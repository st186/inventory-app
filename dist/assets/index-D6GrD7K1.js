function E7(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(a,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var rm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Oy={exports:{}},Yu={},Py={exports:{}},yr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bE;function C7(){if(bE)return yr;bE=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function p(z){return z===null||typeof z!="object"?null:(z=m&&z[m]||z["@@iterator"],typeof z=="function"?z:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function w(z,I,Z){this.props=z,this.context=I,this.refs=y,this.updater=Z||g}w.prototype.isReactComponent={},w.prototype.setState=function(z,I){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,I,"setState")},w.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function k(){}k.prototype=w.prototype;function N(z,I,Z){this.props=z,this.context=I,this.refs=y,this.updater=Z||g}var b=N.prototype=new k;b.constructor=N,v(b,w.prototype),b.isPureReactComponent=!0;var A=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function C(z,I,Z){var te,se={},be=null,Ee=null;if(I!=null)for(te in I.ref!==void 0&&(Ee=I.ref),I.key!==void 0&&(be=""+I.key),I)E.call(I,te)&&!_.hasOwnProperty(te)&&(se[te]=I[te]);var _e=arguments.length-2;if(_e===1)se.children=Z;else if(1<_e){for(var me=Array(_e),ye=0;ye<_e;ye++)me[ye]=arguments[ye+2];se.children=me}if(z&&z.defaultProps)for(te in _e=z.defaultProps,_e)se[te]===void 0&&(se[te]=_e[te]);return{$$typeof:e,type:z,key:be,ref:Ee,props:se,_owner:S.current}}function P(z,I){return{$$typeof:e,type:z.type,key:I,ref:z.ref,props:z.props,_owner:z._owner}}function B(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function F(z){var I={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Z){return I[Z]})}var O=/\/+/g;function R(z,I){return typeof z=="object"&&z!==null&&z.key!=null?F(""+z.key):I.toString(36)}function Q(z,I,Z,te,se){var be=typeof z;(be==="undefined"||be==="boolean")&&(z=null);var Ee=!1;if(z===null)Ee=!0;else switch(be){case"string":case"number":Ee=!0;break;case"object":switch(z.$$typeof){case e:case t:Ee=!0}}if(Ee)return Ee=z,se=se(Ee),z=te===""?"."+R(Ee,0):te,A(se)?(Z="",z!=null&&(Z=z.replace(O,"$&/")+"/"),Q(se,I,Z,"",function(ye){return ye})):se!=null&&(B(se)&&(se=P(se,Z+(!se.key||Ee&&Ee.key===se.key?"":(""+se.key).replace(O,"$&/")+"/")+z)),I.push(se)),1;if(Ee=0,te=te===""?".":te+":",A(z))for(var _e=0;_e<z.length;_e++){be=z[_e];var me=te+R(be,_e);Ee+=Q(be,I,Z,me,se)}else if(me=p(z),typeof me=="function")for(z=me.call(z),_e=0;!(be=z.next()).done;)be=be.value,me=te+R(be,_e++),Ee+=Q(be,I,Z,me,se);else if(be==="object")throw I=String(z),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return Ee}function V(z,I,Z){if(z==null)return z;var te=[],se=0;return Q(z,te,"","",function(be){return I.call(Z,be,se++)}),te}function J(z){if(z._status===-1){var I=z._result;I=I(),I.then(function(Z){(z._status===0||z._status===-1)&&(z._status=1,z._result=Z)},function(Z){(z._status===0||z._status===-1)&&(z._status=2,z._result=Z)}),z._status===-1&&(z._status=0,z._result=I)}if(z._status===1)return z._result.default;throw z._result}var ae={current:null},L={transition:null},H={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:L,ReactCurrentOwner:S};function ce(){throw Error("act(...) is not supported in production builds of React.")}return yr.Children={map:V,forEach:function(z,I,Z){V(z,function(){I.apply(this,arguments)},Z)},count:function(z){var I=0;return V(z,function(){I++}),I},toArray:function(z){return V(z,function(I){return I})||[]},only:function(z){if(!B(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},yr.Component=w,yr.Fragment=r,yr.Profiler=s,yr.PureComponent=N,yr.StrictMode=a,yr.Suspense=d,yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,yr.act=ce,yr.cloneElement=function(z,I,Z){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var te=v({},z.props),se=z.key,be=z.ref,Ee=z._owner;if(I!=null){if(I.ref!==void 0&&(be=I.ref,Ee=S.current),I.key!==void 0&&(se=""+I.key),z.type&&z.type.defaultProps)var _e=z.type.defaultProps;for(me in I)E.call(I,me)&&!_.hasOwnProperty(me)&&(te[me]=I[me]===void 0&&_e!==void 0?_e[me]:I[me])}var me=arguments.length-2;if(me===1)te.children=Z;else if(1<me){_e=Array(me);for(var ye=0;ye<me;ye++)_e[ye]=arguments[ye+2];te.children=_e}return{$$typeof:e,type:z.type,key:se,ref:be,props:te,_owner:Ee}},yr.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:i,_context:z},z.Consumer=z},yr.createElement=C,yr.createFactory=function(z){var I=C.bind(null,z);return I.type=z,I},yr.createRef=function(){return{current:null}},yr.forwardRef=function(z){return{$$typeof:l,render:z}},yr.isValidElement=B,yr.lazy=function(z){return{$$typeof:f,_payload:{_status:-1,_result:z},_init:J}},yr.memo=function(z,I){return{$$typeof:u,type:z,compare:I===void 0?null:I}},yr.startTransition=function(z){var I=L.transition;L.transition={};try{z()}finally{L.transition=I}},yr.unstable_act=ce,yr.useCallback=function(z,I){return ae.current.useCallback(z,I)},yr.useContext=function(z){return ae.current.useContext(z)},yr.useDebugValue=function(){},yr.useDeferredValue=function(z){return ae.current.useDeferredValue(z)},yr.useEffect=function(z,I){return ae.current.useEffect(z,I)},yr.useId=function(){return ae.current.useId()},yr.useImperativeHandle=function(z,I,Z){return ae.current.useImperativeHandle(z,I,Z)},yr.useInsertionEffect=function(z,I){return ae.current.useInsertionEffect(z,I)},yr.useLayoutEffect=function(z,I){return ae.current.useLayoutEffect(z,I)},yr.useMemo=function(z,I){return ae.current.useMemo(z,I)},yr.useReducer=function(z,I,Z){return ae.current.useReducer(z,I,Z)},yr.useRef=function(z){return ae.current.useRef(z)},yr.useState=function(z){return ae.current.useState(z)},yr.useSyncExternalStore=function(z,I,Z){return ae.current.useSyncExternalStore(z,I,Z)},yr.useTransition=function(){return ae.current.useTransition()},yr.version="18.3.1",yr}var wE;function d2(){return wE||(wE=1,Py.exports=C7()),Py.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE;function A7(){if(jE)return Yu;jE=1;var e=d2(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,d,u){var f,m={},p=null,g=null;u!==void 0&&(p=""+u),d.key!==void 0&&(p=""+d.key),d.ref!==void 0&&(g=d.ref);for(f in d)a.call(d,f)&&!i.hasOwnProperty(f)&&(m[f]=d[f]);if(l&&l.defaultProps)for(f in d=l.defaultProps,d)m[f]===void 0&&(m[f]=d[f]);return{$$typeof:t,type:l,key:p,ref:g,props:m,_owner:s.current}}return Yu.Fragment=r,Yu.jsx=o,Yu.jsxs=o,Yu}var NE;function T7(){return NE||(NE=1,Oy.exports=A7()),Oy.exports}var n=T7(),nm={},Iy={exports:{}},ss={},Dy={exports:{}},My={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE;function O7(){return kE||(kE=1,(function(e){function t(L,H){var ce=L.length;L.push(H);e:for(;0<ce;){var z=ce-1>>>1,I=L[z];if(0<s(I,H))L[z]=H,L[ce]=I,ce=z;else break e}}function r(L){return L.length===0?null:L[0]}function a(L){if(L.length===0)return null;var H=L[0],ce=L.pop();if(ce!==H){L[0]=ce;e:for(var z=0,I=L.length,Z=I>>>1;z<Z;){var te=2*(z+1)-1,se=L[te],be=te+1,Ee=L[be];if(0>s(se,ce))be<I&&0>s(Ee,se)?(L[z]=Ee,L[be]=ce,z=be):(L[z]=se,L[te]=ce,z=te);else if(be<I&&0>s(Ee,ce))L[z]=Ee,L[be]=ce,z=be;else break e}}return H}function s(L,H){var ce=L.sortIndex-H.sortIndex;return ce!==0?ce:L.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],u=[],f=1,m=null,p=3,g=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(L){for(var H=r(u);H!==null;){if(H.callback===null)a(u);else if(H.startTime<=L)a(u),H.sortIndex=H.expirationTime,t(d,H);else break;H=r(u)}}function A(L){if(y=!1,b(L),!v)if(r(d)!==null)v=!0,J(E);else{var H=r(u);H!==null&&ae(A,H.startTime-L)}}function E(L,H){v=!1,y&&(y=!1,k(C),C=-1),g=!0;var ce=p;try{for(b(H),m=r(d);m!==null&&(!(m.expirationTime>H)||L&&!F());){var z=m.callback;if(typeof z=="function"){m.callback=null,p=m.priorityLevel;var I=z(m.expirationTime<=H);H=e.unstable_now(),typeof I=="function"?m.callback=I:m===r(d)&&a(d),b(H)}else a(d);m=r(d)}if(m!==null)var Z=!0;else{var te=r(u);te!==null&&ae(A,te.startTime-H),Z=!1}return Z}finally{m=null,p=ce,g=!1}}var S=!1,_=null,C=-1,P=5,B=-1;function F(){return!(e.unstable_now()-B<P)}function O(){if(_!==null){var L=e.unstable_now();B=L;var H=!0;try{H=_(!0,L)}finally{H?R():(S=!1,_=null)}}else S=!1}var R;if(typeof N=="function")R=function(){N(O)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,V=Q.port2;Q.port1.onmessage=O,R=function(){V.postMessage(null)}}else R=function(){w(O,0)};function J(L){_=L,S||(S=!0,R())}function ae(L,H){C=w(function(){L(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,J(E))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(L){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var ce=p;p=H;try{return L()}finally{p=ce}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,H){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var ce=p;p=L;try{return H()}finally{p=ce}},e.unstable_scheduleCallback=function(L,H,ce){var z=e.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?z+ce:z):ce=z,L){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ce+I,L={id:f++,callback:H,priorityLevel:L,startTime:ce,expirationTime:I,sortIndex:-1},ce>z?(L.sortIndex=ce,t(u,L),r(d)===null&&L===r(u)&&(y?(k(C),C=-1):y=!0,ae(A,ce-z))):(L.sortIndex=I,t(d,L),v||g||(v=!0,J(E))),L},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(L){var H=p;return function(){var ce=p;p=H;try{return L.apply(this,arguments)}finally{p=ce}}}})(My)),My}var SE;function P7(){return SE||(SE=1,Dy.exports=O7()),Dy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function I7(){if(_E)return ss;_E=1;var e=d2(),t=P7();function r(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,x=1;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function i(c,h){o(c,h),o(c+"Capture",h)}function o(c,h){for(s[c]=h,c=0;c<h.length;c++)a.add(h[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(c){return d.call(m,c)?!0:d.call(f,c)?!1:u.test(c)?m[c]=!0:(f[c]=!0,!1)}function g(c,h,x,j){if(x!==null&&x.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return j?!1:x!==null?!x.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function v(c,h,x,j){if(h===null||typeof h>"u"||g(c,h,x,j))return!0;if(j)return!1;if(x!==null)switch(x.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function y(c,h,x,j,T,D,X){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=j,this.attributeNamespace=T,this.mustUseProperty=x,this.propertyName=c,this.type=h,this.sanitizeURL=D,this.removeEmptyString=X}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){w[c]=new y(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var h=c[0];w[h]=new y(h,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){w[c]=new y(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){w[c]=new y(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){w[c]=new y(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){w[c]=new y(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){w[c]=new y(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){w[c]=new y(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){w[c]=new y(c,5,!1,c.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function N(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var h=c.replace(k,N);w[h]=new y(h,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var h=c.replace(k,N);w[h]=new y(h,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var h=c.replace(k,N);w[h]=new y(h,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){w[c]=new y(c,1,!1,c.toLowerCase(),null,!1,!1)}),w.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){w[c]=new y(c,1,!1,c.toLowerCase(),null,!0,!0)});function b(c,h,x,j){var T=w.hasOwnProperty(h)?w[h]:null;(T!==null?T.type!==0:j||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(v(h,x,T,j)&&(x=null),j||T===null?p(h)&&(x===null?c.removeAttribute(h):c.setAttribute(h,""+x)):T.mustUseProperty?c[T.propertyName]=x===null?T.type===3?!1:"":x:(h=T.attributeName,j=T.attributeNamespace,x===null?c.removeAttribute(h):(T=T.type,x=T===3||T===4&&x===!0?"":""+x,j?c.setAttributeNS(j,h,x):c.setAttribute(h,x))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),F=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),L=Symbol.iterator;function H(c){return c===null||typeof c!="object"?null:(c=L&&c[L]||c["@@iterator"],typeof c=="function"?c:null)}var ce=Object.assign,z;function I(c){if(z===void 0)try{throw Error()}catch(x){var h=x.stack.trim().match(/\n( *(at )?)/);z=h&&h[1]||""}return`
`+z+c}var Z=!1;function te(c,h){if(!c||Z)return"";Z=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Be){var j=Be}Reflect.construct(c,[],h)}else{try{h.call()}catch(Be){j=Be}c.call(h.prototype)}else{try{throw Error()}catch(Be){j=Be}c()}}catch(Be){if(Be&&j&&typeof Be.stack=="string"){for(var T=Be.stack.split(`
`),D=j.stack.split(`
`),X=T.length-1,ge=D.length-1;1<=X&&0<=ge&&T[X]!==D[ge];)ge--;for(;1<=X&&0<=ge;X--,ge--)if(T[X]!==D[ge]){if(X!==1||ge!==1)do if(X--,ge--,0>ge||T[X]!==D[ge]){var je=`
`+T[X].replace(" at new "," at ");return c.displayName&&je.includes("<anonymous>")&&(je=je.replace("<anonymous>",c.displayName)),je}while(1<=X&&0<=ge);break}}}finally{Z=!1,Error.prepareStackTrace=x}return(c=c?c.displayName||c.name:"")?I(c):""}function se(c){switch(c.tag){case 5:return I(c.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return c=te(c.type,!1),c;case 11:return c=te(c.type.render,!1),c;case 1:return c=te(c.type,!0),c;default:return""}}function be(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case _:return"Fragment";case S:return"Portal";case P:return"Profiler";case C:return"StrictMode";case R:return"Suspense";case Q:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case F:return(c.displayName||"Context")+".Consumer";case B:return(c._context.displayName||"Context")+".Provider";case O:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case V:return h=c.displayName||null,h!==null?h:be(c.type)||"Memo";case J:h=c._payload,c=c._init;try{return be(c(h))}catch{}}return null}function Ee(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(h);case 8:return h===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function _e(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function me(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function ye(c){var h=me(c)?"checked":"value",x=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),j=""+c[h];if(!c.hasOwnProperty(h)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var T=x.get,D=x.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return T.call(this)},set:function(X){j=""+X,D.call(this,X)}}),Object.defineProperty(c,h,{enumerable:x.enumerable}),{getValue:function(){return j},setValue:function(X){j=""+X},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function qe(c){c._valueTracker||(c._valueTracker=ye(c))}function G(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var x=h.getValue(),j="";return c&&(j=me(c)?c.checked?"true":"false":c.value),c=j,c!==x?(h.setValue(c),!0):!1}function He(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Ke(c,h){var x=h.checked;return ce({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??c._wrapperState.initialChecked})}function ut(c,h){var x=h.defaultValue==null?"":h.defaultValue,j=h.checked!=null?h.checked:h.defaultChecked;x=_e(h.value!=null?h.value:x),c._wrapperState={initialChecked:j,initialValue:x,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function ze(c,h){h=h.checked,h!=null&&b(c,"checked",h,!1)}function Pe(c,h){ze(c,h);var x=_e(h.value),j=h.type;if(x!=null)j==="number"?(x===0&&c.value===""||c.value!=x)&&(c.value=""+x):c.value!==""+x&&(c.value=""+x);else if(j==="submit"||j==="reset"){c.removeAttribute("value");return}h.hasOwnProperty("value")?Xe(c,h.type,x):h.hasOwnProperty("defaultValue")&&Xe(c,h.type,_e(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(c.defaultChecked=!!h.defaultChecked)}function ke(c,h,x){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var j=h.type;if(!(j!=="submit"&&j!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+c._wrapperState.initialValue,x||h===c.value||(c.value=h),c.defaultValue=h}x=c.name,x!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,x!==""&&(c.name=x)}function Xe(c,h,x){(h!=="number"||He(c.ownerDocument)!==c)&&(x==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+x&&(c.defaultValue=""+x))}var We=Array.isArray;function ct(c,h,x,j){if(c=c.options,h){h={};for(var T=0;T<x.length;T++)h["$"+x[T]]=!0;for(x=0;x<c.length;x++)T=h.hasOwnProperty("$"+c[x].value),c[x].selected!==T&&(c[x].selected=T),T&&j&&(c[x].defaultSelected=!0)}else{for(x=""+_e(x),h=null,T=0;T<c.length;T++){if(c[T].value===x){c[T].selected=!0,j&&(c[T].defaultSelected=!0);return}h!==null||c[T].disabled||(h=c[T])}h!==null&&(h.selected=!0)}}function Wt(c,h){if(h.dangerouslySetInnerHTML!=null)throw Error(r(91));return ce({},h,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Ut(c,h){var x=h.value;if(x==null){if(x=h.children,h=h.defaultValue,x!=null){if(h!=null)throw Error(r(92));if(We(x)){if(1<x.length)throw Error(r(93));x=x[0]}h=x}h==null&&(h=""),x=h}c._wrapperState={initialValue:_e(x)}}function Vt(c,h){var x=_e(h.value),j=_e(h.defaultValue);x!=null&&(x=""+x,x!==c.value&&(c.value=x),h.defaultValue==null&&c.defaultValue!==x&&(c.defaultValue=x)),j!=null&&(c.defaultValue=""+j)}function Ar(c){var h=c.textContent;h===c._wrapperState.initialValue&&h!==""&&h!==null&&(c.value=h)}function ln(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xr(c,h){return c==null||c==="http://www.w3.org/1999/xhtml"?ln(h):c==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var Ft,ir=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,x,j,T){MSApp.execUnsafeLocalFunction(function(){return c(h,x,j,T)})}:c})(function(c,h){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=h;else{for(Ft=Ft||document.createElement("div"),Ft.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=Ft.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;h.firstChild;)c.appendChild(h.firstChild)}});function nt(c,h){if(h){var x=c.firstChild;if(x&&x===c.lastChild&&x.nodeType===3){x.nodeValue=h;return}}c.textContent=h}var Bt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$e=["Webkit","ms","Moz","O"];Object.keys(Bt).forEach(function(c){$e.forEach(function(h){h=h+c.charAt(0).toUpperCase()+c.substring(1),Bt[h]=Bt[c]})});function De(c,h,x){return h==null||typeof h=="boolean"||h===""?"":x||typeof h!="number"||h===0||Bt.hasOwnProperty(c)&&Bt[c]?(""+h).trim():h+"px"}function re(c,h){c=c.style;for(var x in h)if(h.hasOwnProperty(x)){var j=x.indexOf("--")===0,T=De(x,h[x],j);x==="float"&&(x="cssFloat"),j?c.setProperty(x,T):c[x]=T}}var le=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oe(c,h){if(h){if(le[c]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(r(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(r(61))}if(h.style!=null&&typeof h.style!="object")throw Error(r(62))}}function Le(c,h){if(c.indexOf("-")===-1)return typeof h.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rt=null;function Ot(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var $t=null,bt=null,hr=null;function ht(c){if(c=Du(c)){if(typeof $t!="function")throw Error(r(280));var h=c.stateNode;h&&(h=x0(h),$t(c.stateNode,c.type,h))}}function Rr(c){bt?hr?hr.push(c):hr=[c]:bt=c}function cr(){if(bt){var c=bt,h=hr;if(hr=bt=null,ht(c),h)for(c=0;c<h.length;c++)ht(h[c])}}function fr(c,h){return c(h)}function Jr(){}var Kn=!1;function _n(c,h,x){if(Kn)return c(h,x);Kn=!0;try{return fr(c,h,x)}finally{Kn=!1,(bt!==null||hr!==null)&&(Jr(),cr())}}function dr(c,h){var x=c.stateNode;if(x===null)return null;var j=x0(x);if(j===null)return null;x=j[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(c=c.type,j=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!j;break e;default:c=!1}if(c)return null;if(x&&typeof x!="function")throw Error(r(231,h,typeof x));return x}var ve=!1;if(l)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){ve=!0}}),window.addEventListener("test",tt,tt),window.removeEventListener("test",tt,tt)}catch{ve=!1}function at(c,h,x,j,T,D,X,ge,je){var Be=Array.prototype.slice.call(arguments,3);try{h.apply(x,Be)}catch(ot){this.onError(ot)}}var pt=!1,ft=null,U=!1,oe=null,ne={onError:function(c){pt=!0,ft=c}};function Y(c,h,x,j,T,D,X,ge,je){pt=!1,ft=null,at.apply(ne,arguments)}function q(c,h,x,j,T,D,X,ge,je){if(Y.apply(this,arguments),pt){if(pt){var Be=ft;pt=!1,ft=null}else throw Error(r(198));U||(U=!0,oe=Be)}}function W(c){var h=c,x=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(x=h.return),c=h.return;while(c)}return h.tag===3?x:null}function ie(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function he(c){if(W(c)!==c)throw Error(r(188))}function K(c){var h=c.alternate;if(!h){if(h=W(c),h===null)throw Error(r(188));return h!==c?null:c}for(var x=c,j=h;;){var T=x.return;if(T===null)break;var D=T.alternate;if(D===null){if(j=T.return,j!==null){x=j;continue}break}if(T.child===D.child){for(D=T.child;D;){if(D===x)return he(T),c;if(D===j)return he(T),h;D=D.sibling}throw Error(r(188))}if(x.return!==j.return)x=T,j=D;else{for(var X=!1,ge=T.child;ge;){if(ge===x){X=!0,x=T,j=D;break}if(ge===j){X=!0,j=T,x=D;break}ge=ge.sibling}if(!X){for(ge=D.child;ge;){if(ge===x){X=!0,x=D,j=T;break}if(ge===j){X=!0,j=D,x=T;break}ge=ge.sibling}if(!X)throw Error(r(189))}}if(x.alternate!==j)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?c:h}function ue(c){return c=K(c),c!==null?fe(c):null}function fe(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=fe(c);if(h!==null)return h;c=c.sibling}return null}var Me=t.unstable_scheduleCallback,we=t.unstable_cancelCallback,lt=t.unstable_shouldYield,Ge=t.unstable_requestPaint,Ze=t.unstable_now,jt=t.unstable_getCurrentPriorityLevel,Gt=t.unstable_ImmediatePriority,ar=t.unstable_UserBlockingPriority,Nr=t.unstable_NormalPriority,vn=t.unstable_LowPriority,Tr=t.unstable_IdlePriority,Dn=null,Fr=null;function Ea(c){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(Dn,c,void 0,(c.current.flags&128)===128)}catch{}}var Lr=Math.clz32?Math.clz32:pe,ee=Math.log,Ce=Math.LN2;function pe(c){return c>>>=0,c===0?32:31-(ee(c)/Ce|0)|0}var de=64,Ae=4194304;function Te(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Ne(c,h){var x=c.pendingLanes;if(x===0)return 0;var j=0,T=c.suspendedLanes,D=c.pingedLanes,X=x&268435455;if(X!==0){var ge=X&~T;ge!==0?j=Te(ge):(D&=X,D!==0&&(j=Te(D)))}else X=x&~T,X!==0?j=Te(X):D!==0&&(j=Te(D));if(j===0)return 0;if(h!==0&&h!==j&&(h&T)===0&&(T=j&-j,D=h&-h,T>=D||T===16&&(D&4194240)!==0))return h;if((j&4)!==0&&(j|=x&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=j;0<h;)x=31-Lr(h),T=1<<x,j|=c[x],h&=~T;return j}function Ue(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ve(c,h){for(var x=c.suspendedLanes,j=c.pingedLanes,T=c.expirationTimes,D=c.pendingLanes;0<D;){var X=31-Lr(D),ge=1<<X,je=T[X];je===-1?((ge&x)===0||(ge&j)!==0)&&(T[X]=Ue(ge,h)):je<=h&&(c.expiredLanes|=ge),D&=~ge}}function et(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Ye(){var c=de;return de<<=1,(de&4194240)===0&&(de=64),c}function Pt(c){for(var h=[],x=0;31>x;x++)h.push(c);return h}function It(c,h,x){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-Lr(h),c[h]=x}function _r(c,h){var x=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var j=c.eventTimes;for(c=c.expirationTimes;0<x;){var T=31-Lr(x),D=1<<T;h[T]=0,j[T]=-1,c[T]=-1,x&=~D}}function nn(c,h){var x=c.entangledLanes|=h;for(c=c.entanglements;x;){var j=31-Lr(x),T=1<<j;T&h|c[j]&h&&(c[j]|=h),x&=~T}}var yt=0;function vt(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var ur,vr,Ct,mr,br,Re=!1,Lt=[],jr=null,Dt=null,pr=null,pn=new Map,zr=new Map,cn=[],En="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ha(c,h){switch(c){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":pn.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":zr.delete(h.pointerId)}}function Mn(c,h,x,j,T,D){return c===null||c.nativeEvent!==D?(c={blockedOn:h,domEventName:x,eventSystemFlags:j,nativeEvent:D,targetContainers:[T]},h!==null&&(h=Du(h),h!==null&&vr(h)),c):(c.eventSystemFlags|=j,h=c.targetContainers,T!==null&&h.indexOf(T)===-1&&h.push(T),c)}function Vi(c,h,x,j,T){switch(h){case"focusin":return jr=Mn(jr,c,h,x,j,T),!0;case"dragenter":return Dt=Mn(Dt,c,h,x,j,T),!0;case"mouseover":return pr=Mn(pr,c,h,x,j,T),!0;case"pointerover":var D=T.pointerId;return pn.set(D,Mn(pn.get(D)||null,c,h,x,j,T)),!0;case"gotpointercapture":return D=T.pointerId,zr.set(D,Mn(zr.get(D)||null,c,h,x,j,T)),!0}return!1}function wu(c){var h=vl(c.target);if(h!==null){var x=W(h);if(x!==null){if(h=x.tag,h===13){if(h=ie(x),h!==null){c.blockedOn=h,br(c.priority,function(){Ct(x)});return}}else if(h===3&&x.stateNode.current.memoizedState.isDehydrated){c.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}c.blockedOn=null}function yl(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var x=ax(c.domEventName,c.eventSystemFlags,h[0],c.nativeEvent);if(x===null){x=c.nativeEvent;var j=new x.constructor(x.type,x);rt=j,x.target.dispatchEvent(j),rt=null}else return h=Du(x),h!==null&&vr(h),c.blockedOn=x,!1;h.shift()}return!0}function ju(c,h,x){yl(c)&&x.delete(h)}function Gi(){Re=!1,jr!==null&&yl(jr)&&(jr=null),Dt!==null&&yl(Dt)&&(Dt=null),pr!==null&&yl(pr)&&(pr=null),pn.forEach(ju),zr.forEach(ju)}function Ts(c,h){c.blockedOn===h&&(c.blockedOn=null,Re||(Re=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Gi)))}function Os(c){function h(T){return Ts(T,c)}if(0<Lt.length){Ts(Lt[0],c);for(var x=1;x<Lt.length;x++){var j=Lt[x];j.blockedOn===c&&(j.blockedOn=null)}}for(jr!==null&&Ts(jr,c),Dt!==null&&Ts(Dt,c),pr!==null&&Ts(pr,c),pn.forEach(h),zr.forEach(h),x=0;x<cn.length;x++)j=cn[x],j.blockedOn===c&&(j.blockedOn=null);for(;0<cn.length&&(x=cn[0],x.blockedOn===null);)wu(x),x.blockedOn===null&&cn.shift()}var Yi=A.ReactCurrentBatchConfig,a0=!0;function Q8(c,h,x,j){var T=yt,D=Yi.transition;Yi.transition=null;try{yt=1,nx(c,h,x,j)}finally{yt=T,Yi.transition=D}}function Z8(c,h,x,j){var T=yt,D=Yi.transition;Yi.transition=null;try{yt=4,nx(c,h,x,j)}finally{yt=T,Yi.transition=D}}function nx(c,h,x,j){if(a0){var T=ax(c,h,x,j);if(T===null)wx(c,h,j,s0,x),Ha(c,j);else if(Vi(T,c,h,x,j))j.stopPropagation();else if(Ha(c,j),h&4&&-1<En.indexOf(c)){for(;T!==null;){var D=Du(T);if(D!==null&&ur(D),D=ax(c,h,x,j),D===null&&wx(c,h,j,s0,x),D===T)break;T=D}T!==null&&j.stopPropagation()}else wx(c,h,j,null,x)}}var s0=null;function ax(c,h,x,j){if(s0=null,c=Ot(j),c=vl(c),c!==null)if(h=W(c),h===null)c=null;else if(x=h.tag,x===13){if(c=ie(h),c!==null)return c;c=null}else if(x===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null);return s0=c,null}function iS(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jt()){case Gt:return 1;case ar:return 4;case Nr:case vn:return 16;case Tr:return 536870912;default:return 16}default:return 16}}var Po=null,sx=null,i0=null;function oS(){if(i0)return i0;var c,h=sx,x=h.length,j,T="value"in Po?Po.value:Po.textContent,D=T.length;for(c=0;c<x&&h[c]===T[c];c++);var X=x-c;for(j=1;j<=X&&h[x-j]===T[D-j];j++);return i0=T.slice(c,1<j?1-j:void 0)}function o0(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function l0(){return!0}function lS(){return!1}function hs(c){function h(x,j,T,D,X){this._reactName=x,this._targetInst=T,this.type=j,this.nativeEvent=D,this.target=X,this.currentTarget=null;for(var ge in c)c.hasOwnProperty(ge)&&(x=c[ge],this[ge]=x?x(D):D[ge]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?l0:lS,this.isPropagationStopped=lS,this}return ce(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=l0)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=l0)},persist:function(){},isPersistent:l0}),h}var Ec={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ix=hs(Ec),Nu=ce({},Ec,{view:0,detail:0}),eL=hs(Nu),ox,lx,ku,c0=ce({},Nu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dx,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==ku&&(ku&&c.type==="mousemove"?(ox=c.screenX-ku.screenX,lx=c.screenY-ku.screenY):lx=ox=0,ku=c),ox)},movementY:function(c){return"movementY"in c?c.movementY:lx}}),cS=hs(c0),tL=ce({},c0,{dataTransfer:0}),rL=hs(tL),nL=ce({},Nu,{relatedTarget:0}),cx=hs(nL),aL=ce({},Ec,{animationName:0,elapsedTime:0,pseudoElement:0}),sL=hs(aL),iL=ce({},Ec,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),oL=hs(iL),lL=ce({},Ec,{data:0}),dS=hs(lL),cL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hL(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=uL[c])?!!h[c]:!1}function dx(){return hL}var fL=ce({},Nu,{key:function(c){if(c.key){var h=cL[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=o0(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?dL[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dx,charCode:function(c){return c.type==="keypress"?o0(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?o0(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),mL=hs(fL),pL=ce({},c0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uS=hs(pL),gL=ce({},Nu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dx}),xL=hs(gL),yL=ce({},Ec,{propertyName:0,elapsedTime:0,pseudoElement:0}),vL=hs(yL),bL=ce({},c0,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),wL=hs(bL),jL=[9,13,27,32],ux=l&&"CompositionEvent"in window,Su=null;l&&"documentMode"in document&&(Su=document.documentMode);var NL=l&&"TextEvent"in window&&!Su,hS=l&&(!ux||Su&&8<Su&&11>=Su),fS=" ",mS=!1;function pS(c,h){switch(c){case"keyup":return jL.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gS(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Cc=!1;function kL(c,h){switch(c){case"compositionend":return gS(h);case"keypress":return h.which!==32?null:(mS=!0,fS);case"textInput":return c=h.data,c===fS&&mS?null:c;default:return null}}function SL(c,h){if(Cc)return c==="compositionend"||!ux&&pS(c,h)?(c=oS(),i0=sx=Po=null,Cc=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return hS&&h.locale!=="ko"?null:h.data;default:return null}}var _L={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xS(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!_L[c.type]:h==="textarea"}function yS(c,h,x,j){Rr(j),h=m0(h,"onChange"),0<h.length&&(x=new ix("onChange","change",null,x,j),c.push({event:x,listeners:h}))}var _u=null,Eu=null;function EL(c){RS(c,0)}function d0(c){var h=Ic(c);if(G(h))return c}function CL(c,h){if(c==="change")return h}var vS=!1;if(l){var hx;if(l){var fx="oninput"in document;if(!fx){var bS=document.createElement("div");bS.setAttribute("oninput","return;"),fx=typeof bS.oninput=="function"}hx=fx}else hx=!1;vS=hx&&(!document.documentMode||9<document.documentMode)}function wS(){_u&&(_u.detachEvent("onpropertychange",jS),Eu=_u=null)}function jS(c){if(c.propertyName==="value"&&d0(Eu)){var h=[];yS(h,Eu,c,Ot(c)),_n(EL,h)}}function AL(c,h,x){c==="focusin"?(wS(),_u=h,Eu=x,_u.attachEvent("onpropertychange",jS)):c==="focusout"&&wS()}function TL(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return d0(Eu)}function OL(c,h){if(c==="click")return d0(h)}function PL(c,h){if(c==="input"||c==="change")return d0(h)}function IL(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var Qs=typeof Object.is=="function"?Object.is:IL;function Cu(c,h){if(Qs(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var x=Object.keys(c),j=Object.keys(h);if(x.length!==j.length)return!1;for(j=0;j<x.length;j++){var T=x[j];if(!d.call(h,T)||!Qs(c[T],h[T]))return!1}return!0}function NS(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function kS(c,h){var x=NS(c);c=0;for(var j;x;){if(x.nodeType===3){if(j=c+x.textContent.length,c<=h&&j>=h)return{node:x,offset:h-c};c=j}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=NS(x)}}function SS(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?SS(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function _S(){for(var c=window,h=He();h instanceof c.HTMLIFrameElement;){try{var x=typeof h.contentWindow.location.href=="string"}catch{x=!1}if(x)c=h.contentWindow;else break;h=He(c.document)}return h}function mx(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}function DL(c){var h=_S(),x=c.focusedElem,j=c.selectionRange;if(h!==x&&x&&x.ownerDocument&&SS(x.ownerDocument.documentElement,x)){if(j!==null&&mx(x)){if(h=j.start,c=j.end,c===void 0&&(c=h),"selectionStart"in x)x.selectionStart=h,x.selectionEnd=Math.min(c,x.value.length);else if(c=(h=x.ownerDocument||document)&&h.defaultView||window,c.getSelection){c=c.getSelection();var T=x.textContent.length,D=Math.min(j.start,T);j=j.end===void 0?D:Math.min(j.end,T),!c.extend&&D>j&&(T=j,j=D,D=T),T=kS(x,D);var X=kS(x,j);T&&X&&(c.rangeCount!==1||c.anchorNode!==T.node||c.anchorOffset!==T.offset||c.focusNode!==X.node||c.focusOffset!==X.offset)&&(h=h.createRange(),h.setStart(T.node,T.offset),c.removeAllRanges(),D>j?(c.addRange(h),c.extend(X.node,X.offset)):(h.setEnd(X.node,X.offset),c.addRange(h)))}}for(h=[],c=x;c=c.parentNode;)c.nodeType===1&&h.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<h.length;x++)c=h[x],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var ML=l&&"documentMode"in document&&11>=document.documentMode,Ac=null,px=null,Au=null,gx=!1;function ES(c,h,x){var j=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;gx||Ac==null||Ac!==He(j)||(j=Ac,"selectionStart"in j&&mx(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),Au&&Cu(Au,j)||(Au=j,j=m0(px,"onSelect"),0<j.length&&(h=new ix("onSelect","select",null,h,x),c.push({event:h,listeners:j}),h.target=Ac)))}function u0(c,h){var x={};return x[c.toLowerCase()]=h.toLowerCase(),x["Webkit"+c]="webkit"+h,x["Moz"+c]="moz"+h,x}var Tc={animationend:u0("Animation","AnimationEnd"),animationiteration:u0("Animation","AnimationIteration"),animationstart:u0("Animation","AnimationStart"),transitionend:u0("Transition","TransitionEnd")},xx={},CS={};l&&(CS=document.createElement("div").style,"AnimationEvent"in window||(delete Tc.animationend.animation,delete Tc.animationiteration.animation,delete Tc.animationstart.animation),"TransitionEvent"in window||delete Tc.transitionend.transition);function h0(c){if(xx[c])return xx[c];if(!Tc[c])return c;var h=Tc[c],x;for(x in h)if(h.hasOwnProperty(x)&&x in CS)return xx[c]=h[x];return c}var AS=h0("animationend"),TS=h0("animationiteration"),OS=h0("animationstart"),PS=h0("transitionend"),IS=new Map,DS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Io(c,h){IS.set(c,h),i(h,[c])}for(var yx=0;yx<DS.length;yx++){var vx=DS[yx],RL=vx.toLowerCase(),FL=vx[0].toUpperCase()+vx.slice(1);Io(RL,"on"+FL)}Io(AS,"onAnimationEnd"),Io(TS,"onAnimationIteration"),Io(OS,"onAnimationStart"),Io("dblclick","onDoubleClick"),Io("focusin","onFocus"),Io("focusout","onBlur"),Io(PS,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$L=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tu));function MS(c,h,x){var j=c.type||"unknown-event";c.currentTarget=x,q(j,h,void 0,c),c.currentTarget=null}function RS(c,h){h=(h&4)!==0;for(var x=0;x<c.length;x++){var j=c[x],T=j.event;j=j.listeners;e:{var D=void 0;if(h)for(var X=j.length-1;0<=X;X--){var ge=j[X],je=ge.instance,Be=ge.currentTarget;if(ge=ge.listener,je!==D&&T.isPropagationStopped())break e;MS(T,ge,Be),D=je}else for(X=0;X<j.length;X++){if(ge=j[X],je=ge.instance,Be=ge.currentTarget,ge=ge.listener,je!==D&&T.isPropagationStopped())break e;MS(T,ge,Be),D=je}}}if(U)throw c=oe,U=!1,oe=null,c}function an(c,h){var x=h[Ex];x===void 0&&(x=h[Ex]=new Set);var j=c+"__bubble";x.has(j)||(FS(h,c,2,!1),x.add(j))}function bx(c,h,x){var j=0;h&&(j|=4),FS(x,c,j,h)}var f0="_reactListening"+Math.random().toString(36).slice(2);function Ou(c){if(!c[f0]){c[f0]=!0,a.forEach(function(x){x!=="selectionchange"&&($L.has(x)||bx(x,!1,c),bx(x,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[f0]||(h[f0]=!0,bx("selectionchange",!1,h))}}function FS(c,h,x,j){switch(iS(h)){case 1:var T=Q8;break;case 4:T=Z8;break;default:T=nx}x=T.bind(null,h,x,c),T=void 0,!ve||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(T=!0),j?T!==void 0?c.addEventListener(h,x,{capture:!0,passive:T}):c.addEventListener(h,x,!0):T!==void 0?c.addEventListener(h,x,{passive:T}):c.addEventListener(h,x,!1)}function wx(c,h,x,j,T){var D=j;if((h&1)===0&&(h&2)===0&&j!==null)e:for(;;){if(j===null)return;var X=j.tag;if(X===3||X===4){var ge=j.stateNode.containerInfo;if(ge===T||ge.nodeType===8&&ge.parentNode===T)break;if(X===4)for(X=j.return;X!==null;){var je=X.tag;if((je===3||je===4)&&(je=X.stateNode.containerInfo,je===T||je.nodeType===8&&je.parentNode===T))return;X=X.return}for(;ge!==null;){if(X=vl(ge),X===null)return;if(je=X.tag,je===5||je===6){j=D=X;continue e}ge=ge.parentNode}}j=j.return}_n(function(){var Be=D,ot=Ot(x),dt=[];e:{var st=IS.get(c);if(st!==void 0){var wt=ix,St=c;switch(c){case"keypress":if(o0(x)===0)break e;case"keydown":case"keyup":wt=mL;break;case"focusin":St="focus",wt=cx;break;case"focusout":St="blur",wt=cx;break;case"beforeblur":case"afterblur":wt=cx;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":wt=cS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":wt=rL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":wt=xL;break;case AS:case TS:case OS:wt=sL;break;case PS:wt=vL;break;case"scroll":wt=eL;break;case"wheel":wt=wL;break;case"copy":case"cut":case"paste":wt=oL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":wt=uS}var At=(h&4)!==0,Cn=!At&&c==="scroll",Ie=At?st!==null?st+"Capture":null:st;At=[];for(var Se=Be,Fe;Se!==null;){Fe=Se;var mt=Fe.stateNode;if(Fe.tag===5&&mt!==null&&(Fe=mt,Ie!==null&&(mt=dr(Se,Ie),mt!=null&&At.push(Pu(Se,mt,Fe)))),Cn)break;Se=Se.return}0<At.length&&(st=new wt(st,St,null,x,ot),dt.push({event:st,listeners:At}))}}if((h&7)===0){e:{if(st=c==="mouseover"||c==="pointerover",wt=c==="mouseout"||c==="pointerout",st&&x!==rt&&(St=x.relatedTarget||x.fromElement)&&(vl(St)||St[Xi]))break e;if((wt||st)&&(st=ot.window===ot?ot:(st=ot.ownerDocument)?st.defaultView||st.parentWindow:window,wt?(St=x.relatedTarget||x.toElement,wt=Be,St=St?vl(St):null,St!==null&&(Cn=W(St),St!==Cn||St.tag!==5&&St.tag!==6)&&(St=null)):(wt=null,St=Be),wt!==St)){if(At=cS,mt="onMouseLeave",Ie="onMouseEnter",Se="mouse",(c==="pointerout"||c==="pointerover")&&(At=uS,mt="onPointerLeave",Ie="onPointerEnter",Se="pointer"),Cn=wt==null?st:Ic(wt),Fe=St==null?st:Ic(St),st=new At(mt,Se+"leave",wt,x,ot),st.target=Cn,st.relatedTarget=Fe,mt=null,vl(ot)===Be&&(At=new At(Ie,Se+"enter",St,x,ot),At.target=Fe,At.relatedTarget=Cn,mt=At),Cn=mt,wt&&St)t:{for(At=wt,Ie=St,Se=0,Fe=At;Fe;Fe=Oc(Fe))Se++;for(Fe=0,mt=Ie;mt;mt=Oc(mt))Fe++;for(;0<Se-Fe;)At=Oc(At),Se--;for(;0<Fe-Se;)Ie=Oc(Ie),Fe--;for(;Se--;){if(At===Ie||Ie!==null&&At===Ie.alternate)break t;At=Oc(At),Ie=Oc(Ie)}At=null}else At=null;wt!==null&&$S(dt,st,wt,At,!1),St!==null&&Cn!==null&&$S(dt,Cn,St,At,!0)}}e:{if(st=Be?Ic(Be):window,wt=st.nodeName&&st.nodeName.toLowerCase(),wt==="select"||wt==="input"&&st.type==="file")var Tt=CL;else if(xS(st))if(vS)Tt=PL;else{Tt=TL;var Ht=AL}else(wt=st.nodeName)&&wt.toLowerCase()==="input"&&(st.type==="checkbox"||st.type==="radio")&&(Tt=OL);if(Tt&&(Tt=Tt(c,Be))){yS(dt,Tt,x,ot);break e}Ht&&Ht(c,st,Be),c==="focusout"&&(Ht=st._wrapperState)&&Ht.controlled&&st.type==="number"&&Xe(st,"number",st.value)}switch(Ht=Be?Ic(Be):window,c){case"focusin":(xS(Ht)||Ht.contentEditable==="true")&&(Ac=Ht,px=Be,Au=null);break;case"focusout":Au=px=Ac=null;break;case"mousedown":gx=!0;break;case"contextmenu":case"mouseup":case"dragend":gx=!1,ES(dt,x,ot);break;case"selectionchange":if(ML)break;case"keydown":case"keyup":ES(dt,x,ot)}var qt;if(ux)e:{switch(c){case"compositionstart":var tr="onCompositionStart";break e;case"compositionend":tr="onCompositionEnd";break e;case"compositionupdate":tr="onCompositionUpdate";break e}tr=void 0}else Cc?pS(c,x)&&(tr="onCompositionEnd"):c==="keydown"&&x.keyCode===229&&(tr="onCompositionStart");tr&&(hS&&x.locale!=="ko"&&(Cc||tr!=="onCompositionStart"?tr==="onCompositionEnd"&&Cc&&(qt=oS()):(Po=ot,sx="value"in Po?Po.value:Po.textContent,Cc=!0)),Ht=m0(Be,tr),0<Ht.length&&(tr=new dS(tr,c,null,x,ot),dt.push({event:tr,listeners:Ht}),qt?tr.data=qt:(qt=gS(x),qt!==null&&(tr.data=qt)))),(qt=NL?kL(c,x):SL(c,x))&&(Be=m0(Be,"onBeforeInput"),0<Be.length&&(ot=new dS("onBeforeInput","beforeinput",null,x,ot),dt.push({event:ot,listeners:Be}),ot.data=qt))}RS(dt,h)})}function Pu(c,h,x){return{instance:c,listener:h,currentTarget:x}}function m0(c,h){for(var x=h+"Capture",j=[];c!==null;){var T=c,D=T.stateNode;T.tag===5&&D!==null&&(T=D,D=dr(c,x),D!=null&&j.unshift(Pu(c,D,T)),D=dr(c,h),D!=null&&j.push(Pu(c,D,T))),c=c.return}return j}function Oc(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function $S(c,h,x,j,T){for(var D=h._reactName,X=[];x!==null&&x!==j;){var ge=x,je=ge.alternate,Be=ge.stateNode;if(je!==null&&je===j)break;ge.tag===5&&Be!==null&&(ge=Be,T?(je=dr(x,D),je!=null&&X.unshift(Pu(x,je,ge))):T||(je=dr(x,D),je!=null&&X.push(Pu(x,je,ge)))),x=x.return}X.length!==0&&c.push({event:h,listeners:X})}var LL=/\r\n?/g,BL=/\u0000|\uFFFD/g;function LS(c){return(typeof c=="string"?c:""+c).replace(LL,`
`).replace(BL,"")}function p0(c,h,x){if(h=LS(h),LS(c)!==h&&x)throw Error(r(425))}function g0(){}var jx=null,Nx=null;function kx(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Sx=typeof setTimeout=="function"?setTimeout:void 0,UL=typeof clearTimeout=="function"?clearTimeout:void 0,BS=typeof Promise=="function"?Promise:void 0,HL=typeof queueMicrotask=="function"?queueMicrotask:typeof BS<"u"?function(c){return BS.resolve(null).then(c).catch(qL)}:Sx;function qL(c){setTimeout(function(){throw c})}function _x(c,h){var x=h,j=0;do{var T=x.nextSibling;if(c.removeChild(x),T&&T.nodeType===8)if(x=T.data,x==="/$"){if(j===0){c.removeChild(T),Os(h);return}j--}else x!=="$"&&x!=="$?"&&x!=="$!"||j++;x=T}while(x);Os(h)}function Do(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return c}function US(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var x=c.data;if(x==="$"||x==="$!"||x==="$?"){if(h===0)return c;h--}else x==="/$"&&h++}c=c.previousSibling}return null}var Pc=Math.random().toString(36).slice(2),Si="__reactFiber$"+Pc,Iu="__reactProps$"+Pc,Xi="__reactContainer$"+Pc,Ex="__reactEvents$"+Pc,zL="__reactListeners$"+Pc,WL="__reactHandles$"+Pc;function vl(c){var h=c[Si];if(h)return h;for(var x=c.parentNode;x;){if(h=x[Xi]||x[Si]){if(x=h.alternate,h.child!==null||x!==null&&x.child!==null)for(c=US(c);c!==null;){if(x=c[Si])return x;c=US(c)}return h}c=x,x=c.parentNode}return null}function Du(c){return c=c[Si]||c[Xi],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Ic(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function x0(c){return c[Iu]||null}var Cx=[],Dc=-1;function Mo(c){return{current:c}}function sn(c){0>Dc||(c.current=Cx[Dc],Cx[Dc]=null,Dc--)}function Qr(c,h){Dc++,Cx[Dc]=c.current,c.current=h}var Ro={},Ca=Mo(Ro),es=Mo(!1),bl=Ro;function Mc(c,h){var x=c.type.contextTypes;if(!x)return Ro;var j=c.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===h)return j.__reactInternalMemoizedMaskedChildContext;var T={},D;for(D in x)T[D]=h[D];return j&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=T),T}function ts(c){return c=c.childContextTypes,c!=null}function y0(){sn(es),sn(Ca)}function HS(c,h,x){if(Ca.current!==Ro)throw Error(r(168));Qr(Ca,h),Qr(es,x)}function qS(c,h,x){var j=c.stateNode;if(h=h.childContextTypes,typeof j.getChildContext!="function")return x;j=j.getChildContext();for(var T in j)if(!(T in h))throw Error(r(108,Ee(c)||"Unknown",T));return ce({},x,j)}function v0(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Ro,bl=Ca.current,Qr(Ca,c),Qr(es,es.current),!0}function zS(c,h,x){var j=c.stateNode;if(!j)throw Error(r(169));x?(c=qS(c,h,bl),j.__reactInternalMemoizedMergedChildContext=c,sn(es),sn(Ca),Qr(Ca,c)):sn(es),Qr(es,x)}var Ji=null,b0=!1,Ax=!1;function WS(c){Ji===null?Ji=[c]:Ji.push(c)}function KL(c){b0=!0,WS(c)}function Fo(){if(!Ax&&Ji!==null){Ax=!0;var c=0,h=yt;try{var x=Ji;for(yt=1;c<x.length;c++){var j=x[c];do j=j(!0);while(j!==null)}Ji=null,b0=!1}catch(T){throw Ji!==null&&(Ji=Ji.slice(c+1)),Me(Gt,Fo),T}finally{yt=h,Ax=!1}}return null}var Rc=[],Fc=0,w0=null,j0=0,Ps=[],Is=0,wl=null,Qi=1,Zi="";function jl(c,h){Rc[Fc++]=j0,Rc[Fc++]=w0,w0=c,j0=h}function KS(c,h,x){Ps[Is++]=Qi,Ps[Is++]=Zi,Ps[Is++]=wl,wl=c;var j=Qi;c=Zi;var T=32-Lr(j)-1;j&=~(1<<T),x+=1;var D=32-Lr(h)+T;if(30<D){var X=T-T%5;D=(j&(1<<X)-1).toString(32),j>>=X,T-=X,Qi=1<<32-Lr(h)+T|x<<T|j,Zi=D+c}else Qi=1<<D|x<<T|j,Zi=c}function Tx(c){c.return!==null&&(jl(c,1),KS(c,1,0))}function Ox(c){for(;c===w0;)w0=Rc[--Fc],Rc[Fc]=null,j0=Rc[--Fc],Rc[Fc]=null;for(;c===wl;)wl=Ps[--Is],Ps[Is]=null,Zi=Ps[--Is],Ps[Is]=null,Qi=Ps[--Is],Ps[Is]=null}var fs=null,ms=null,dn=!1,Zs=null;function VS(c,h){var x=Fs(5,null,null,0);x.elementType="DELETED",x.stateNode=h,x.return=c,h=c.deletions,h===null?(c.deletions=[x],c.flags|=16):h.push(x)}function GS(c,h){switch(c.tag){case 5:var x=c.type;return h=h.nodeType!==1||x.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(c.stateNode=h,fs=c,ms=Do(h.firstChild),!0):!1;case 6:return h=c.pendingProps===""||h.nodeType!==3?null:h,h!==null?(c.stateNode=h,fs=c,ms=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(x=wl!==null?{id:Qi,overflow:Zi}:null,c.memoizedState={dehydrated:h,treeContext:x,retryLane:1073741824},x=Fs(18,null,null,0),x.stateNode=h,x.return=c,c.child=x,fs=c,ms=null,!0):!1;default:return!1}}function Px(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Ix(c){if(dn){var h=ms;if(h){var x=h;if(!GS(c,h)){if(Px(c))throw Error(r(418));h=Do(x.nextSibling);var j=fs;h&&GS(c,h)?VS(j,x):(c.flags=c.flags&-4097|2,dn=!1,fs=c)}}else{if(Px(c))throw Error(r(418));c.flags=c.flags&-4097|2,dn=!1,fs=c}}}function YS(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;fs=c}function N0(c){if(c!==fs)return!1;if(!dn)return YS(c),dn=!0,!1;var h;if((h=c.tag!==3)&&!(h=c.tag!==5)&&(h=c.type,h=h!=="head"&&h!=="body"&&!kx(c.type,c.memoizedProps)),h&&(h=ms)){if(Px(c))throw XS(),Error(r(418));for(;h;)VS(c,h),h=Do(h.nextSibling)}if(YS(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8){var x=c.data;if(x==="/$"){if(h===0){ms=Do(c.nextSibling);break e}h--}else x!=="$"&&x!=="$!"&&x!=="$?"||h++}c=c.nextSibling}ms=null}}else ms=fs?Do(c.stateNode.nextSibling):null;return!0}function XS(){for(var c=ms;c;)c=Do(c.nextSibling)}function $c(){ms=fs=null,dn=!1}function Dx(c){Zs===null?Zs=[c]:Zs.push(c)}var VL=A.ReactCurrentBatchConfig;function Mu(c,h,x){if(c=x.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(r(309));var j=x.stateNode}if(!j)throw Error(r(147,c));var T=j,D=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===D?h.ref:(h=function(X){var ge=T.refs;X===null?delete ge[D]:ge[D]=X},h._stringRef=D,h)}if(typeof c!="string")throw Error(r(284));if(!x._owner)throw Error(r(290,c))}return c}function k0(c,h){throw c=Object.prototype.toString.call(h),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function JS(c){var h=c._init;return h(c._payload)}function QS(c){function h(Ie,Se){if(c){var Fe=Ie.deletions;Fe===null?(Ie.deletions=[Se],Ie.flags|=16):Fe.push(Se)}}function x(Ie,Se){if(!c)return null;for(;Se!==null;)h(Ie,Se),Se=Se.sibling;return null}function j(Ie,Se){for(Ie=new Map;Se!==null;)Se.key!==null?Ie.set(Se.key,Se):Ie.set(Se.index,Se),Se=Se.sibling;return Ie}function T(Ie,Se){return Ie=Wo(Ie,Se),Ie.index=0,Ie.sibling=null,Ie}function D(Ie,Se,Fe){return Ie.index=Fe,c?(Fe=Ie.alternate,Fe!==null?(Fe=Fe.index,Fe<Se?(Ie.flags|=2,Se):Fe):(Ie.flags|=2,Se)):(Ie.flags|=1048576,Se)}function X(Ie){return c&&Ie.alternate===null&&(Ie.flags|=2),Ie}function ge(Ie,Se,Fe,mt){return Se===null||Se.tag!==6?(Se=Sy(Fe,Ie.mode,mt),Se.return=Ie,Se):(Se=T(Se,Fe),Se.return=Ie,Se)}function je(Ie,Se,Fe,mt){var Tt=Fe.type;return Tt===_?ot(Ie,Se,Fe.props.children,mt,Fe.key):Se!==null&&(Se.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===J&&JS(Tt)===Se.type)?(mt=T(Se,Fe.props),mt.ref=Mu(Ie,Se,Fe),mt.return=Ie,mt):(mt=G0(Fe.type,Fe.key,Fe.props,null,Ie.mode,mt),mt.ref=Mu(Ie,Se,Fe),mt.return=Ie,mt)}function Be(Ie,Se,Fe,mt){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==Fe.containerInfo||Se.stateNode.implementation!==Fe.implementation?(Se=_y(Fe,Ie.mode,mt),Se.return=Ie,Se):(Se=T(Se,Fe.children||[]),Se.return=Ie,Se)}function ot(Ie,Se,Fe,mt,Tt){return Se===null||Se.tag!==7?(Se=Tl(Fe,Ie.mode,mt,Tt),Se.return=Ie,Se):(Se=T(Se,Fe),Se.return=Ie,Se)}function dt(Ie,Se,Fe){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return Se=Sy(""+Se,Ie.mode,Fe),Se.return=Ie,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case E:return Fe=G0(Se.type,Se.key,Se.props,null,Ie.mode,Fe),Fe.ref=Mu(Ie,null,Se),Fe.return=Ie,Fe;case S:return Se=_y(Se,Ie.mode,Fe),Se.return=Ie,Se;case J:var mt=Se._init;return dt(Ie,mt(Se._payload),Fe)}if(We(Se)||H(Se))return Se=Tl(Se,Ie.mode,Fe,null),Se.return=Ie,Se;k0(Ie,Se)}return null}function st(Ie,Se,Fe,mt){var Tt=Se!==null?Se.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Tt!==null?null:ge(Ie,Se,""+Fe,mt);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case E:return Fe.key===Tt?je(Ie,Se,Fe,mt):null;case S:return Fe.key===Tt?Be(Ie,Se,Fe,mt):null;case J:return Tt=Fe._init,st(Ie,Se,Tt(Fe._payload),mt)}if(We(Fe)||H(Fe))return Tt!==null?null:ot(Ie,Se,Fe,mt,null);k0(Ie,Fe)}return null}function wt(Ie,Se,Fe,mt,Tt){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return Ie=Ie.get(Fe)||null,ge(Se,Ie,""+mt,Tt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case E:return Ie=Ie.get(mt.key===null?Fe:mt.key)||null,je(Se,Ie,mt,Tt);case S:return Ie=Ie.get(mt.key===null?Fe:mt.key)||null,Be(Se,Ie,mt,Tt);case J:var Ht=mt._init;return wt(Ie,Se,Fe,Ht(mt._payload),Tt)}if(We(mt)||H(mt))return Ie=Ie.get(Fe)||null,ot(Se,Ie,mt,Tt,null);k0(Se,mt)}return null}function St(Ie,Se,Fe,mt){for(var Tt=null,Ht=null,qt=Se,tr=Se=0,ca=null;qt!==null&&tr<Fe.length;tr++){qt.index>tr?(ca=qt,qt=null):ca=qt.sibling;var Ir=st(Ie,qt,Fe[tr],mt);if(Ir===null){qt===null&&(qt=ca);break}c&&qt&&Ir.alternate===null&&h(Ie,qt),Se=D(Ir,Se,tr),Ht===null?Tt=Ir:Ht.sibling=Ir,Ht=Ir,qt=ca}if(tr===Fe.length)return x(Ie,qt),dn&&jl(Ie,tr),Tt;if(qt===null){for(;tr<Fe.length;tr++)qt=dt(Ie,Fe[tr],mt),qt!==null&&(Se=D(qt,Se,tr),Ht===null?Tt=qt:Ht.sibling=qt,Ht=qt);return dn&&jl(Ie,tr),Tt}for(qt=j(Ie,qt);tr<Fe.length;tr++)ca=wt(qt,Ie,tr,Fe[tr],mt),ca!==null&&(c&&ca.alternate!==null&&qt.delete(ca.key===null?tr:ca.key),Se=D(ca,Se,tr),Ht===null?Tt=ca:Ht.sibling=ca,Ht=ca);return c&&qt.forEach(function(Ko){return h(Ie,Ko)}),dn&&jl(Ie,tr),Tt}function At(Ie,Se,Fe,mt){var Tt=H(Fe);if(typeof Tt!="function")throw Error(r(150));if(Fe=Tt.call(Fe),Fe==null)throw Error(r(151));for(var Ht=Tt=null,qt=Se,tr=Se=0,ca=null,Ir=Fe.next();qt!==null&&!Ir.done;tr++,Ir=Fe.next()){qt.index>tr?(ca=qt,qt=null):ca=qt.sibling;var Ko=st(Ie,qt,Ir.value,mt);if(Ko===null){qt===null&&(qt=ca);break}c&&qt&&Ko.alternate===null&&h(Ie,qt),Se=D(Ko,Se,tr),Ht===null?Tt=Ko:Ht.sibling=Ko,Ht=Ko,qt=ca}if(Ir.done)return x(Ie,qt),dn&&jl(Ie,tr),Tt;if(qt===null){for(;!Ir.done;tr++,Ir=Fe.next())Ir=dt(Ie,Ir.value,mt),Ir!==null&&(Se=D(Ir,Se,tr),Ht===null?Tt=Ir:Ht.sibling=Ir,Ht=Ir);return dn&&jl(Ie,tr),Tt}for(qt=j(Ie,qt);!Ir.done;tr++,Ir=Fe.next())Ir=wt(qt,Ie,tr,Ir.value,mt),Ir!==null&&(c&&Ir.alternate!==null&&qt.delete(Ir.key===null?tr:Ir.key),Se=D(Ir,Se,tr),Ht===null?Tt=Ir:Ht.sibling=Ir,Ht=Ir);return c&&qt.forEach(function(_7){return h(Ie,_7)}),dn&&jl(Ie,tr),Tt}function Cn(Ie,Se,Fe,mt){if(typeof Fe=="object"&&Fe!==null&&Fe.type===_&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case E:e:{for(var Tt=Fe.key,Ht=Se;Ht!==null;){if(Ht.key===Tt){if(Tt=Fe.type,Tt===_){if(Ht.tag===7){x(Ie,Ht.sibling),Se=T(Ht,Fe.props.children),Se.return=Ie,Ie=Se;break e}}else if(Ht.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===J&&JS(Tt)===Ht.type){x(Ie,Ht.sibling),Se=T(Ht,Fe.props),Se.ref=Mu(Ie,Ht,Fe),Se.return=Ie,Ie=Se;break e}x(Ie,Ht);break}else h(Ie,Ht);Ht=Ht.sibling}Fe.type===_?(Se=Tl(Fe.props.children,Ie.mode,mt,Fe.key),Se.return=Ie,Ie=Se):(mt=G0(Fe.type,Fe.key,Fe.props,null,Ie.mode,mt),mt.ref=Mu(Ie,Se,Fe),mt.return=Ie,Ie=mt)}return X(Ie);case S:e:{for(Ht=Fe.key;Se!==null;){if(Se.key===Ht)if(Se.tag===4&&Se.stateNode.containerInfo===Fe.containerInfo&&Se.stateNode.implementation===Fe.implementation){x(Ie,Se.sibling),Se=T(Se,Fe.children||[]),Se.return=Ie,Ie=Se;break e}else{x(Ie,Se);break}else h(Ie,Se);Se=Se.sibling}Se=_y(Fe,Ie.mode,mt),Se.return=Ie,Ie=Se}return X(Ie);case J:return Ht=Fe._init,Cn(Ie,Se,Ht(Fe._payload),mt)}if(We(Fe))return St(Ie,Se,Fe,mt);if(H(Fe))return At(Ie,Se,Fe,mt);k0(Ie,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"?(Fe=""+Fe,Se!==null&&Se.tag===6?(x(Ie,Se.sibling),Se=T(Se,Fe),Se.return=Ie,Ie=Se):(x(Ie,Se),Se=Sy(Fe,Ie.mode,mt),Se.return=Ie,Ie=Se),X(Ie)):x(Ie,Se)}return Cn}var Lc=QS(!0),ZS=QS(!1),S0=Mo(null),_0=null,Bc=null,Mx=null;function Rx(){Mx=Bc=_0=null}function Fx(c){var h=S0.current;sn(S0),c._currentValue=h}function $x(c,h,x){for(;c!==null;){var j=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,j!==null&&(j.childLanes|=h)):j!==null&&(j.childLanes&h)!==h&&(j.childLanes|=h),c===x)break;c=c.return}}function Uc(c,h){_0=c,Mx=Bc=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&h)!==0&&(rs=!0),c.firstContext=null)}function Ds(c){var h=c._currentValue;if(Mx!==c)if(c={context:c,memoizedValue:h,next:null},Bc===null){if(_0===null)throw Error(r(308));Bc=c,_0.dependencies={lanes:0,firstContext:c}}else Bc=Bc.next=c;return h}var Nl=null;function Lx(c){Nl===null?Nl=[c]:Nl.push(c)}function e_(c,h,x,j){var T=h.interleaved;return T===null?(x.next=x,Lx(h)):(x.next=T.next,T.next=x),h.interleaved=x,eo(c,j)}function eo(c,h){c.lanes|=h;var x=c.alternate;for(x!==null&&(x.lanes|=h),x=c,c=c.return;c!==null;)c.childLanes|=h,x=c.alternate,x!==null&&(x.childLanes|=h),x=c,c=c.return;return x.tag===3?x.stateNode:null}var $o=!1;function Bx(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t_(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function to(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function Lo(c,h,x){var j=c.updateQueue;if(j===null)return null;if(j=j.shared,(Or&2)!==0){var T=j.pending;return T===null?h.next=h:(h.next=T.next,T.next=h),j.pending=h,eo(c,x)}return T=j.interleaved,T===null?(h.next=h,Lx(j)):(h.next=T.next,T.next=h),j.interleaved=h,eo(c,x)}function E0(c,h,x){if(h=h.updateQueue,h!==null&&(h=h.shared,(x&4194240)!==0)){var j=h.lanes;j&=c.pendingLanes,x|=j,h.lanes=x,nn(c,x)}}function r_(c,h){var x=c.updateQueue,j=c.alternate;if(j!==null&&(j=j.updateQueue,x===j)){var T=null,D=null;if(x=x.firstBaseUpdate,x!==null){do{var X={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};D===null?T=D=X:D=D.next=X,x=x.next}while(x!==null);D===null?T=D=h:D=D.next=h}else T=D=h;x={baseState:j.baseState,firstBaseUpdate:T,lastBaseUpdate:D,shared:j.shared,effects:j.effects},c.updateQueue=x;return}c=x.lastBaseUpdate,c===null?x.firstBaseUpdate=h:c.next=h,x.lastBaseUpdate=h}function C0(c,h,x,j){var T=c.updateQueue;$o=!1;var D=T.firstBaseUpdate,X=T.lastBaseUpdate,ge=T.shared.pending;if(ge!==null){T.shared.pending=null;var je=ge,Be=je.next;je.next=null,X===null?D=Be:X.next=Be,X=je;var ot=c.alternate;ot!==null&&(ot=ot.updateQueue,ge=ot.lastBaseUpdate,ge!==X&&(ge===null?ot.firstBaseUpdate=Be:ge.next=Be,ot.lastBaseUpdate=je))}if(D!==null){var dt=T.baseState;X=0,ot=Be=je=null,ge=D;do{var st=ge.lane,wt=ge.eventTime;if((j&st)===st){ot!==null&&(ot=ot.next={eventTime:wt,lane:0,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null});e:{var St=c,At=ge;switch(st=h,wt=x,At.tag){case 1:if(St=At.payload,typeof St=="function"){dt=St.call(wt,dt,st);break e}dt=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=At.payload,st=typeof St=="function"?St.call(wt,dt,st):St,st==null)break e;dt=ce({},dt,st);break e;case 2:$o=!0}}ge.callback!==null&&ge.lane!==0&&(c.flags|=64,st=T.effects,st===null?T.effects=[ge]:st.push(ge))}else wt={eventTime:wt,lane:st,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},ot===null?(Be=ot=wt,je=dt):ot=ot.next=wt,X|=st;if(ge=ge.next,ge===null){if(ge=T.shared.pending,ge===null)break;st=ge,ge=st.next,st.next=null,T.lastBaseUpdate=st,T.shared.pending=null}}while(!0);if(ot===null&&(je=dt),T.baseState=je,T.firstBaseUpdate=Be,T.lastBaseUpdate=ot,h=T.shared.interleaved,h!==null){T=h;do X|=T.lane,T=T.next;while(T!==h)}else D===null&&(T.shared.lanes=0);_l|=X,c.lanes=X,c.memoizedState=dt}}function n_(c,h,x){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var j=c[h],T=j.callback;if(T!==null){if(j.callback=null,j=x,typeof T!="function")throw Error(r(191,T));T.call(j)}}}var Ru={},_i=Mo(Ru),Fu=Mo(Ru),$u=Mo(Ru);function kl(c){if(c===Ru)throw Error(r(174));return c}function Ux(c,h){switch(Qr($u,h),Qr(Fu,c),Qr(_i,Ru),c=h.nodeType,c){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:Xr(null,"");break;default:c=c===8?h.parentNode:h,h=c.namespaceURI||null,c=c.tagName,h=Xr(h,c)}sn(_i),Qr(_i,h)}function Hc(){sn(_i),sn(Fu),sn($u)}function a_(c){kl($u.current);var h=kl(_i.current),x=Xr(h,c.type);h!==x&&(Qr(Fu,c),Qr(_i,x))}function Hx(c){Fu.current===c&&(sn(_i),sn(Fu))}var gn=Mo(0);function A0(c){for(var h=c;h!==null;){if(h.tag===13){var x=h.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var qx=[];function zx(){for(var c=0;c<qx.length;c++)qx[c]._workInProgressVersionPrimary=null;qx.length=0}var T0=A.ReactCurrentDispatcher,Wx=A.ReactCurrentBatchConfig,Sl=0,xn=null,Vn=null,oa=null,O0=!1,Lu=!1,Bu=0,GL=0;function Aa(){throw Error(r(321))}function Kx(c,h){if(h===null)return!1;for(var x=0;x<h.length&&x<c.length;x++)if(!Qs(c[x],h[x]))return!1;return!0}function Vx(c,h,x,j,T,D){if(Sl=D,xn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,T0.current=c===null||c.memoizedState===null?QL:ZL,c=x(j,T),Lu){D=0;do{if(Lu=!1,Bu=0,25<=D)throw Error(r(301));D+=1,oa=Vn=null,h.updateQueue=null,T0.current=e7,c=x(j,T)}while(Lu)}if(T0.current=D0,h=Vn!==null&&Vn.next!==null,Sl=0,oa=Vn=xn=null,O0=!1,h)throw Error(r(300));return c}function Gx(){var c=Bu!==0;return Bu=0,c}function Ei(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oa===null?xn.memoizedState=oa=c:oa=oa.next=c,oa}function Ms(){if(Vn===null){var c=xn.alternate;c=c!==null?c.memoizedState:null}else c=Vn.next;var h=oa===null?xn.memoizedState:oa.next;if(h!==null)oa=h,Vn=c;else{if(c===null)throw Error(r(310));Vn=c,c={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},oa===null?xn.memoizedState=oa=c:oa=oa.next=c}return oa}function Uu(c,h){return typeof h=="function"?h(c):h}function Yx(c){var h=Ms(),x=h.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=c;var j=Vn,T=j.baseQueue,D=x.pending;if(D!==null){if(T!==null){var X=T.next;T.next=D.next,D.next=X}j.baseQueue=T=D,x.pending=null}if(T!==null){D=T.next,j=j.baseState;var ge=X=null,je=null,Be=D;do{var ot=Be.lane;if((Sl&ot)===ot)je!==null&&(je=je.next={lane:0,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),j=Be.hasEagerState?Be.eagerState:c(j,Be.action);else{var dt={lane:ot,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null};je===null?(ge=je=dt,X=j):je=je.next=dt,xn.lanes|=ot,_l|=ot}Be=Be.next}while(Be!==null&&Be!==D);je===null?X=j:je.next=ge,Qs(j,h.memoizedState)||(rs=!0),h.memoizedState=j,h.baseState=X,h.baseQueue=je,x.lastRenderedState=j}if(c=x.interleaved,c!==null){T=c;do D=T.lane,xn.lanes|=D,_l|=D,T=T.next;while(T!==c)}else T===null&&(x.lanes=0);return[h.memoizedState,x.dispatch]}function Xx(c){var h=Ms(),x=h.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=c;var j=x.dispatch,T=x.pending,D=h.memoizedState;if(T!==null){x.pending=null;var X=T=T.next;do D=c(D,X.action),X=X.next;while(X!==T);Qs(D,h.memoizedState)||(rs=!0),h.memoizedState=D,h.baseQueue===null&&(h.baseState=D),x.lastRenderedState=D}return[D,j]}function s_(){}function i_(c,h){var x=xn,j=Ms(),T=h(),D=!Qs(j.memoizedState,T);if(D&&(j.memoizedState=T,rs=!0),j=j.queue,Jx(c_.bind(null,x,j,c),[c]),j.getSnapshot!==h||D||oa!==null&&oa.memoizedState.tag&1){if(x.flags|=2048,Hu(9,l_.bind(null,x,j,T,h),void 0,null),la===null)throw Error(r(349));(Sl&30)!==0||o_(x,h,T)}return T}function o_(c,h,x){c.flags|=16384,c={getSnapshot:h,value:x},h=xn.updateQueue,h===null?(h={lastEffect:null,stores:null},xn.updateQueue=h,h.stores=[c]):(x=h.stores,x===null?h.stores=[c]:x.push(c))}function l_(c,h,x,j){h.value=x,h.getSnapshot=j,d_(h)&&u_(c)}function c_(c,h,x){return x(function(){d_(h)&&u_(c)})}function d_(c){var h=c.getSnapshot;c=c.value;try{var x=h();return!Qs(c,x)}catch{return!0}}function u_(c){var h=eo(c,1);h!==null&&ni(h,c,1,-1)}function h_(c){var h=Ei();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:c},h.queue=c,c=c.dispatch=JL.bind(null,xn,c),[h.memoizedState,c]}function Hu(c,h,x,j){return c={tag:c,create:h,destroy:x,deps:j,next:null},h=xn.updateQueue,h===null?(h={lastEffect:null,stores:null},xn.updateQueue=h,h.lastEffect=c.next=c):(x=h.lastEffect,x===null?h.lastEffect=c.next=c:(j=x.next,x.next=c,c.next=j,h.lastEffect=c)),c}function f_(){return Ms().memoizedState}function P0(c,h,x,j){var T=Ei();xn.flags|=c,T.memoizedState=Hu(1|h,x,void 0,j===void 0?null:j)}function I0(c,h,x,j){var T=Ms();j=j===void 0?null:j;var D=void 0;if(Vn!==null){var X=Vn.memoizedState;if(D=X.destroy,j!==null&&Kx(j,X.deps)){T.memoizedState=Hu(h,x,D,j);return}}xn.flags|=c,T.memoizedState=Hu(1|h,x,D,j)}function m_(c,h){return P0(8390656,8,c,h)}function Jx(c,h){return I0(2048,8,c,h)}function p_(c,h){return I0(4,2,c,h)}function g_(c,h){return I0(4,4,c,h)}function x_(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function y_(c,h,x){return x=x!=null?x.concat([c]):null,I0(4,4,x_.bind(null,h,c),x)}function Qx(){}function v_(c,h){var x=Ms();h=h===void 0?null:h;var j=x.memoizedState;return j!==null&&h!==null&&Kx(h,j[1])?j[0]:(x.memoizedState=[c,h],c)}function b_(c,h){var x=Ms();h=h===void 0?null:h;var j=x.memoizedState;return j!==null&&h!==null&&Kx(h,j[1])?j[0]:(c=c(),x.memoizedState=[c,h],c)}function w_(c,h,x){return(Sl&21)===0?(c.baseState&&(c.baseState=!1,rs=!0),c.memoizedState=x):(Qs(x,h)||(x=Ye(),xn.lanes|=x,_l|=x,c.baseState=!0),h)}function YL(c,h){var x=yt;yt=x!==0&&4>x?x:4,c(!0);var j=Wx.transition;Wx.transition={};try{c(!1),h()}finally{yt=x,Wx.transition=j}}function j_(){return Ms().memoizedState}function XL(c,h,x){var j=qo(c);if(x={lane:j,action:x,hasEagerState:!1,eagerState:null,next:null},N_(c))k_(h,x);else if(x=e_(c,h,x,j),x!==null){var T=za();ni(x,c,j,T),S_(x,h,j)}}function JL(c,h,x){var j=qo(c),T={lane:j,action:x,hasEagerState:!1,eagerState:null,next:null};if(N_(c))k_(h,T);else{var D=c.alternate;if(c.lanes===0&&(D===null||D.lanes===0)&&(D=h.lastRenderedReducer,D!==null))try{var X=h.lastRenderedState,ge=D(X,x);if(T.hasEagerState=!0,T.eagerState=ge,Qs(ge,X)){var je=h.interleaved;je===null?(T.next=T,Lx(h)):(T.next=je.next,je.next=T),h.interleaved=T;return}}catch{}finally{}x=e_(c,h,T,j),x!==null&&(T=za(),ni(x,c,j,T),S_(x,h,j))}}function N_(c){var h=c.alternate;return c===xn||h!==null&&h===xn}function k_(c,h){Lu=O0=!0;var x=c.pending;x===null?h.next=h:(h.next=x.next,x.next=h),c.pending=h}function S_(c,h,x){if((x&4194240)!==0){var j=h.lanes;j&=c.pendingLanes,x|=j,h.lanes=x,nn(c,x)}}var D0={readContext:Ds,useCallback:Aa,useContext:Aa,useEffect:Aa,useImperativeHandle:Aa,useInsertionEffect:Aa,useLayoutEffect:Aa,useMemo:Aa,useReducer:Aa,useRef:Aa,useState:Aa,useDebugValue:Aa,useDeferredValue:Aa,useTransition:Aa,useMutableSource:Aa,useSyncExternalStore:Aa,useId:Aa,unstable_isNewReconciler:!1},QL={readContext:Ds,useCallback:function(c,h){return Ei().memoizedState=[c,h===void 0?null:h],c},useContext:Ds,useEffect:m_,useImperativeHandle:function(c,h,x){return x=x!=null?x.concat([c]):null,P0(4194308,4,x_.bind(null,h,c),x)},useLayoutEffect:function(c,h){return P0(4194308,4,c,h)},useInsertionEffect:function(c,h){return P0(4,2,c,h)},useMemo:function(c,h){var x=Ei();return h=h===void 0?null:h,c=c(),x.memoizedState=[c,h],c},useReducer:function(c,h,x){var j=Ei();return h=x!==void 0?x(h):h,j.memoizedState=j.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},j.queue=c,c=c.dispatch=XL.bind(null,xn,c),[j.memoizedState,c]},useRef:function(c){var h=Ei();return c={current:c},h.memoizedState=c},useState:h_,useDebugValue:Qx,useDeferredValue:function(c){return Ei().memoizedState=c},useTransition:function(){var c=h_(!1),h=c[0];return c=YL.bind(null,c[1]),Ei().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,x){var j=xn,T=Ei();if(dn){if(x===void 0)throw Error(r(407));x=x()}else{if(x=h(),la===null)throw Error(r(349));(Sl&30)!==0||o_(j,h,x)}T.memoizedState=x;var D={value:x,getSnapshot:h};return T.queue=D,m_(c_.bind(null,j,D,c),[c]),j.flags|=2048,Hu(9,l_.bind(null,j,D,x,h),void 0,null),x},useId:function(){var c=Ei(),h=la.identifierPrefix;if(dn){var x=Zi,j=Qi;x=(j&~(1<<32-Lr(j)-1)).toString(32)+x,h=":"+h+"R"+x,x=Bu++,0<x&&(h+="H"+x.toString(32)),h+=":"}else x=GL++,h=":"+h+"r"+x.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},ZL={readContext:Ds,useCallback:v_,useContext:Ds,useEffect:Jx,useImperativeHandle:y_,useInsertionEffect:p_,useLayoutEffect:g_,useMemo:b_,useReducer:Yx,useRef:f_,useState:function(){return Yx(Uu)},useDebugValue:Qx,useDeferredValue:function(c){var h=Ms();return w_(h,Vn.memoizedState,c)},useTransition:function(){var c=Yx(Uu)[0],h=Ms().memoizedState;return[c,h]},useMutableSource:s_,useSyncExternalStore:i_,useId:j_,unstable_isNewReconciler:!1},e7={readContext:Ds,useCallback:v_,useContext:Ds,useEffect:Jx,useImperativeHandle:y_,useInsertionEffect:p_,useLayoutEffect:g_,useMemo:b_,useReducer:Xx,useRef:f_,useState:function(){return Xx(Uu)},useDebugValue:Qx,useDeferredValue:function(c){var h=Ms();return Vn===null?h.memoizedState=c:w_(h,Vn.memoizedState,c)},useTransition:function(){var c=Xx(Uu)[0],h=Ms().memoizedState;return[c,h]},useMutableSource:s_,useSyncExternalStore:i_,useId:j_,unstable_isNewReconciler:!1};function ei(c,h){if(c&&c.defaultProps){h=ce({},h),c=c.defaultProps;for(var x in c)h[x]===void 0&&(h[x]=c[x]);return h}return h}function Zx(c,h,x,j){h=c.memoizedState,x=x(j,h),x=x==null?h:ce({},h,x),c.memoizedState=x,c.lanes===0&&(c.updateQueue.baseState=x)}var M0={isMounted:function(c){return(c=c._reactInternals)?W(c)===c:!1},enqueueSetState:function(c,h,x){c=c._reactInternals;var j=za(),T=qo(c),D=to(j,T);D.payload=h,x!=null&&(D.callback=x),h=Lo(c,D,T),h!==null&&(ni(h,c,T,j),E0(h,c,T))},enqueueReplaceState:function(c,h,x){c=c._reactInternals;var j=za(),T=qo(c),D=to(j,T);D.tag=1,D.payload=h,x!=null&&(D.callback=x),h=Lo(c,D,T),h!==null&&(ni(h,c,T,j),E0(h,c,T))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var x=za(),j=qo(c),T=to(x,j);T.tag=2,h!=null&&(T.callback=h),h=Lo(c,T,j),h!==null&&(ni(h,c,j,x),E0(h,c,j))}};function __(c,h,x,j,T,D,X){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(j,D,X):h.prototype&&h.prototype.isPureReactComponent?!Cu(x,j)||!Cu(T,D):!0}function E_(c,h,x){var j=!1,T=Ro,D=h.contextType;return typeof D=="object"&&D!==null?D=Ds(D):(T=ts(h)?bl:Ca.current,j=h.contextTypes,D=(j=j!=null)?Mc(c,T):Ro),h=new h(x,D),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=M0,c.stateNode=h,h._reactInternals=c,j&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=T,c.__reactInternalMemoizedMaskedChildContext=D),h}function C_(c,h,x,j){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(x,j),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(x,j),h.state!==c&&M0.enqueueReplaceState(h,h.state,null)}function ey(c,h,x,j){var T=c.stateNode;T.props=x,T.state=c.memoizedState,T.refs={},Bx(c);var D=h.contextType;typeof D=="object"&&D!==null?T.context=Ds(D):(D=ts(h)?bl:Ca.current,T.context=Mc(c,D)),T.state=c.memoizedState,D=h.getDerivedStateFromProps,typeof D=="function"&&(Zx(c,h,D,x),T.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(h=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),h!==T.state&&M0.enqueueReplaceState(T,T.state,null),C0(c,x,T,j),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308)}function qc(c,h){try{var x="",j=h;do x+=se(j),j=j.return;while(j);var T=x}catch(D){T=`
Error generating stack: `+D.message+`
`+D.stack}return{value:c,source:h,stack:T,digest:null}}function ty(c,h,x){return{value:c,source:null,stack:x??null,digest:h??null}}function ry(c,h){try{console.error(h.value)}catch(x){setTimeout(function(){throw x})}}var t7=typeof WeakMap=="function"?WeakMap:Map;function A_(c,h,x){x=to(-1,x),x.tag=3,x.payload={element:null};var j=h.value;return x.callback=function(){H0||(H0=!0,xy=j),ry(c,h)},x}function T_(c,h,x){x=to(-1,x),x.tag=3;var j=c.type.getDerivedStateFromError;if(typeof j=="function"){var T=h.value;x.payload=function(){return j(T)},x.callback=function(){ry(c,h)}}var D=c.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(x.callback=function(){ry(c,h),typeof j!="function"&&(Uo===null?Uo=new Set([this]):Uo.add(this));var X=h.stack;this.componentDidCatch(h.value,{componentStack:X!==null?X:""})}),x}function O_(c,h,x){var j=c.pingCache;if(j===null){j=c.pingCache=new t7;var T=new Set;j.set(h,T)}else T=j.get(h),T===void 0&&(T=new Set,j.set(h,T));T.has(x)||(T.add(x),c=p7.bind(null,c,h,x),h.then(c,c))}function P_(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function I_(c,h,x,j,T){return(c.mode&1)===0?(c===h?c.flags|=65536:(c.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(h=to(-1,1),h.tag=2,Lo(x,h,1))),x.lanes|=1),c):(c.flags|=65536,c.lanes=T,c)}var r7=A.ReactCurrentOwner,rs=!1;function qa(c,h,x,j){h.child=c===null?ZS(h,null,x,j):Lc(h,c.child,x,j)}function D_(c,h,x,j,T){x=x.render;var D=h.ref;return Uc(h,T),j=Vx(c,h,x,j,D,T),x=Gx(),c!==null&&!rs?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~T,ro(c,h,T)):(dn&&x&&Tx(h),h.flags|=1,qa(c,h,j,T),h.child)}function M_(c,h,x,j,T){if(c===null){var D=x.type;return typeof D=="function"&&!ky(D)&&D.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(h.tag=15,h.type=D,R_(c,h,D,j,T)):(c=G0(x.type,null,j,h,h.mode,T),c.ref=h.ref,c.return=h,h.child=c)}if(D=c.child,(c.lanes&T)===0){var X=D.memoizedProps;if(x=x.compare,x=x!==null?x:Cu,x(X,j)&&c.ref===h.ref)return ro(c,h,T)}return h.flags|=1,c=Wo(D,j),c.ref=h.ref,c.return=h,h.child=c}function R_(c,h,x,j,T){if(c!==null){var D=c.memoizedProps;if(Cu(D,j)&&c.ref===h.ref)if(rs=!1,h.pendingProps=j=D,(c.lanes&T)!==0)(c.flags&131072)!==0&&(rs=!0);else return h.lanes=c.lanes,ro(c,h,T)}return ny(c,h,x,j,T)}function F_(c,h,x){var j=h.pendingProps,T=j.children,D=c!==null?c.memoizedState:null;if(j.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qr(Wc,ps),ps|=x;else{if((x&1073741824)===0)return c=D!==null?D.baseLanes|x:x,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,Qr(Wc,ps),ps|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},j=D!==null?D.baseLanes:x,Qr(Wc,ps),ps|=j}else D!==null?(j=D.baseLanes|x,h.memoizedState=null):j=x,Qr(Wc,ps),ps|=j;return qa(c,h,T,x),h.child}function $_(c,h){var x=h.ref;(c===null&&x!==null||c!==null&&c.ref!==x)&&(h.flags|=512,h.flags|=2097152)}function ny(c,h,x,j,T){var D=ts(x)?bl:Ca.current;return D=Mc(h,D),Uc(h,T),x=Vx(c,h,x,j,D,T),j=Gx(),c!==null&&!rs?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~T,ro(c,h,T)):(dn&&j&&Tx(h),h.flags|=1,qa(c,h,x,T),h.child)}function L_(c,h,x,j,T){if(ts(x)){var D=!0;v0(h)}else D=!1;if(Uc(h,T),h.stateNode===null)F0(c,h),E_(h,x,j),ey(h,x,j,T),j=!0;else if(c===null){var X=h.stateNode,ge=h.memoizedProps;X.props=ge;var je=X.context,Be=x.contextType;typeof Be=="object"&&Be!==null?Be=Ds(Be):(Be=ts(x)?bl:Ca.current,Be=Mc(h,Be));var ot=x.getDerivedStateFromProps,dt=typeof ot=="function"||typeof X.getSnapshotBeforeUpdate=="function";dt||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(ge!==j||je!==Be)&&C_(h,X,j,Be),$o=!1;var st=h.memoizedState;X.state=st,C0(h,j,X,T),je=h.memoizedState,ge!==j||st!==je||es.current||$o?(typeof ot=="function"&&(Zx(h,x,ot,j),je=h.memoizedState),(ge=$o||__(h,x,ge,j,st,je,Be))?(dt||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(h.flags|=4194308)):(typeof X.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=j,h.memoizedState=je),X.props=j,X.state=je,X.context=Be,j=ge):(typeof X.componentDidMount=="function"&&(h.flags|=4194308),j=!1)}else{X=h.stateNode,t_(c,h),ge=h.memoizedProps,Be=h.type===h.elementType?ge:ei(h.type,ge),X.props=Be,dt=h.pendingProps,st=X.context,je=x.contextType,typeof je=="object"&&je!==null?je=Ds(je):(je=ts(x)?bl:Ca.current,je=Mc(h,je));var wt=x.getDerivedStateFromProps;(ot=typeof wt=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(ge!==dt||st!==je)&&C_(h,X,j,je),$o=!1,st=h.memoizedState,X.state=st,C0(h,j,X,T);var St=h.memoizedState;ge!==dt||st!==St||es.current||$o?(typeof wt=="function"&&(Zx(h,x,wt,j),St=h.memoizedState),(Be=$o||__(h,x,Be,j,st,St,je)||!1)?(ot||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(j,St,je),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(j,St,je)),typeof X.componentDidUpdate=="function"&&(h.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof X.componentDidUpdate!="function"||ge===c.memoizedProps&&st===c.memoizedState||(h.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||ge===c.memoizedProps&&st===c.memoizedState||(h.flags|=1024),h.memoizedProps=j,h.memoizedState=St),X.props=j,X.state=St,X.context=je,j=Be):(typeof X.componentDidUpdate!="function"||ge===c.memoizedProps&&st===c.memoizedState||(h.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||ge===c.memoizedProps&&st===c.memoizedState||(h.flags|=1024),j=!1)}return ay(c,h,x,j,D,T)}function ay(c,h,x,j,T,D){$_(c,h);var X=(h.flags&128)!==0;if(!j&&!X)return T&&zS(h,x,!1),ro(c,h,D);j=h.stateNode,r7.current=h;var ge=X&&typeof x.getDerivedStateFromError!="function"?null:j.render();return h.flags|=1,c!==null&&X?(h.child=Lc(h,c.child,null,D),h.child=Lc(h,null,ge,D)):qa(c,h,ge,D),h.memoizedState=j.state,T&&zS(h,x,!0),h.child}function B_(c){var h=c.stateNode;h.pendingContext?HS(c,h.pendingContext,h.pendingContext!==h.context):h.context&&HS(c,h.context,!1),Ux(c,h.containerInfo)}function U_(c,h,x,j,T){return $c(),Dx(T),h.flags|=256,qa(c,h,x,j),h.child}var sy={dehydrated:null,treeContext:null,retryLane:0};function iy(c){return{baseLanes:c,cachePool:null,transitions:null}}function H_(c,h,x){var j=h.pendingProps,T=gn.current,D=!1,X=(h.flags&128)!==0,ge;if((ge=X)||(ge=c!==null&&c.memoizedState===null?!1:(T&2)!==0),ge?(D=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(T|=1),Qr(gn,T&1),c===null)return Ix(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((h.mode&1)===0?h.lanes=1:c.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(X=j.children,c=j.fallback,D?(j=h.mode,D=h.child,X={mode:"hidden",children:X},(j&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=X):D=Y0(X,j,0,null),c=Tl(c,j,x,null),D.return=h,c.return=h,D.sibling=c,h.child=D,h.child.memoizedState=iy(x),h.memoizedState=sy,c):oy(h,X));if(T=c.memoizedState,T!==null&&(ge=T.dehydrated,ge!==null))return n7(c,h,X,j,ge,T,x);if(D){D=j.fallback,X=h.mode,T=c.child,ge=T.sibling;var je={mode:"hidden",children:j.children};return(X&1)===0&&h.child!==T?(j=h.child,j.childLanes=0,j.pendingProps=je,h.deletions=null):(j=Wo(T,je),j.subtreeFlags=T.subtreeFlags&14680064),ge!==null?D=Wo(ge,D):(D=Tl(D,X,x,null),D.flags|=2),D.return=h,j.return=h,j.sibling=D,h.child=j,j=D,D=h.child,X=c.child.memoizedState,X=X===null?iy(x):{baseLanes:X.baseLanes|x,cachePool:null,transitions:X.transitions},D.memoizedState=X,D.childLanes=c.childLanes&~x,h.memoizedState=sy,j}return D=c.child,c=D.sibling,j=Wo(D,{mode:"visible",children:j.children}),(h.mode&1)===0&&(j.lanes=x),j.return=h,j.sibling=null,c!==null&&(x=h.deletions,x===null?(h.deletions=[c],h.flags|=16):x.push(c)),h.child=j,h.memoizedState=null,j}function oy(c,h){return h=Y0({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function R0(c,h,x,j){return j!==null&&Dx(j),Lc(h,c.child,null,x),c=oy(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function n7(c,h,x,j,T,D,X){if(x)return h.flags&256?(h.flags&=-257,j=ty(Error(r(422))),R0(c,h,X,j)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(D=j.fallback,T=h.mode,j=Y0({mode:"visible",children:j.children},T,0,null),D=Tl(D,T,X,null),D.flags|=2,j.return=h,D.return=h,j.sibling=D,h.child=j,(h.mode&1)!==0&&Lc(h,c.child,null,X),h.child.memoizedState=iy(X),h.memoizedState=sy,D);if((h.mode&1)===0)return R0(c,h,X,null);if(T.data==="$!"){if(j=T.nextSibling&&T.nextSibling.dataset,j)var ge=j.dgst;return j=ge,D=Error(r(419)),j=ty(D,j,void 0),R0(c,h,X,j)}if(ge=(X&c.childLanes)!==0,rs||ge){if(j=la,j!==null){switch(X&-X){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(j.suspendedLanes|X))!==0?0:T,T!==0&&T!==D.retryLane&&(D.retryLane=T,eo(c,T),ni(j,c,T,-1))}return Ny(),j=ty(Error(r(421))),R0(c,h,X,j)}return T.data==="$?"?(h.flags|=128,h.child=c.child,h=g7.bind(null,c),T._reactRetry=h,null):(c=D.treeContext,ms=Do(T.nextSibling),fs=h,dn=!0,Zs=null,c!==null&&(Ps[Is++]=Qi,Ps[Is++]=Zi,Ps[Is++]=wl,Qi=c.id,Zi=c.overflow,wl=h),h=oy(h,j.children),h.flags|=4096,h)}function q_(c,h,x){c.lanes|=h;var j=c.alternate;j!==null&&(j.lanes|=h),$x(c.return,h,x)}function ly(c,h,x,j,T){var D=c.memoizedState;D===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:j,tail:x,tailMode:T}:(D.isBackwards=h,D.rendering=null,D.renderingStartTime=0,D.last=j,D.tail=x,D.tailMode=T)}function z_(c,h,x){var j=h.pendingProps,T=j.revealOrder,D=j.tail;if(qa(c,h,j.children,x),j=gn.current,(j&2)!==0)j=j&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&q_(c,x,h);else if(c.tag===19)q_(c,x,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}j&=1}if(Qr(gn,j),(h.mode&1)===0)h.memoizedState=null;else switch(T){case"forwards":for(x=h.child,T=null;x!==null;)c=x.alternate,c!==null&&A0(c)===null&&(T=x),x=x.sibling;x=T,x===null?(T=h.child,h.child=null):(T=x.sibling,x.sibling=null),ly(h,!1,T,x,D);break;case"backwards":for(x=null,T=h.child,h.child=null;T!==null;){if(c=T.alternate,c!==null&&A0(c)===null){h.child=T;break}c=T.sibling,T.sibling=x,x=T,T=c}ly(h,!0,x,null,D);break;case"together":ly(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function F0(c,h){(h.mode&1)===0&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function ro(c,h,x){if(c!==null&&(h.dependencies=c.dependencies),_l|=h.lanes,(x&h.childLanes)===0)return null;if(c!==null&&h.child!==c.child)throw Error(r(153));if(h.child!==null){for(c=h.child,x=Wo(c,c.pendingProps),h.child=x,x.return=h;c.sibling!==null;)c=c.sibling,x=x.sibling=Wo(c,c.pendingProps),x.return=h;x.sibling=null}return h.child}function a7(c,h,x){switch(h.tag){case 3:B_(h),$c();break;case 5:a_(h);break;case 1:ts(h.type)&&v0(h);break;case 4:Ux(h,h.stateNode.containerInfo);break;case 10:var j=h.type._context,T=h.memoizedProps.value;Qr(S0,j._currentValue),j._currentValue=T;break;case 13:if(j=h.memoizedState,j!==null)return j.dehydrated!==null?(Qr(gn,gn.current&1),h.flags|=128,null):(x&h.child.childLanes)!==0?H_(c,h,x):(Qr(gn,gn.current&1),c=ro(c,h,x),c!==null?c.sibling:null);Qr(gn,gn.current&1);break;case 19:if(j=(x&h.childLanes)!==0,(c.flags&128)!==0){if(j)return z_(c,h,x);h.flags|=128}if(T=h.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Qr(gn,gn.current),j)break;return null;case 22:case 23:return h.lanes=0,F_(c,h,x)}return ro(c,h,x)}var W_,cy,K_,V_;W_=function(c,h){for(var x=h.child;x!==null;){if(x.tag===5||x.tag===6)c.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},cy=function(){},K_=function(c,h,x,j){var T=c.memoizedProps;if(T!==j){c=h.stateNode,kl(_i.current);var D=null;switch(x){case"input":T=Ke(c,T),j=Ke(c,j),D=[];break;case"select":T=ce({},T,{value:void 0}),j=ce({},j,{value:void 0}),D=[];break;case"textarea":T=Wt(c,T),j=Wt(c,j),D=[];break;default:typeof T.onClick!="function"&&typeof j.onClick=="function"&&(c.onclick=g0)}Oe(x,j);var X;x=null;for(Be in T)if(!j.hasOwnProperty(Be)&&T.hasOwnProperty(Be)&&T[Be]!=null)if(Be==="style"){var ge=T[Be];for(X in ge)ge.hasOwnProperty(X)&&(x||(x={}),x[X]="")}else Be!=="dangerouslySetInnerHTML"&&Be!=="children"&&Be!=="suppressContentEditableWarning"&&Be!=="suppressHydrationWarning"&&Be!=="autoFocus"&&(s.hasOwnProperty(Be)?D||(D=[]):(D=D||[]).push(Be,null));for(Be in j){var je=j[Be];if(ge=T?.[Be],j.hasOwnProperty(Be)&&je!==ge&&(je!=null||ge!=null))if(Be==="style")if(ge){for(X in ge)!ge.hasOwnProperty(X)||je&&je.hasOwnProperty(X)||(x||(x={}),x[X]="");for(X in je)je.hasOwnProperty(X)&&ge[X]!==je[X]&&(x||(x={}),x[X]=je[X])}else x||(D||(D=[]),D.push(Be,x)),x=je;else Be==="dangerouslySetInnerHTML"?(je=je?je.__html:void 0,ge=ge?ge.__html:void 0,je!=null&&ge!==je&&(D=D||[]).push(Be,je)):Be==="children"?typeof je!="string"&&typeof je!="number"||(D=D||[]).push(Be,""+je):Be!=="suppressContentEditableWarning"&&Be!=="suppressHydrationWarning"&&(s.hasOwnProperty(Be)?(je!=null&&Be==="onScroll"&&an("scroll",c),D||ge===je||(D=[])):(D=D||[]).push(Be,je))}x&&(D=D||[]).push("style",x);var Be=D;(h.updateQueue=Be)&&(h.flags|=4)}},V_=function(c,h,x,j){x!==j&&(h.flags|=4)};function qu(c,h){if(!dn)switch(c.tailMode){case"hidden":h=c.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?c.tail=null:x.sibling=null;break;case"collapsed":x=c.tail;for(var j=null;x!==null;)x.alternate!==null&&(j=x),x=x.sibling;j===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:j.sibling=null}}function Ta(c){var h=c.alternate!==null&&c.alternate.child===c.child,x=0,j=0;if(h)for(var T=c.child;T!==null;)x|=T.lanes|T.childLanes,j|=T.subtreeFlags&14680064,j|=T.flags&14680064,T.return=c,T=T.sibling;else for(T=c.child;T!==null;)x|=T.lanes|T.childLanes,j|=T.subtreeFlags,j|=T.flags,T.return=c,T=T.sibling;return c.subtreeFlags|=j,c.childLanes=x,h}function s7(c,h,x){var j=h.pendingProps;switch(Ox(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ta(h),null;case 1:return ts(h.type)&&y0(),Ta(h),null;case 3:return j=h.stateNode,Hc(),sn(es),sn(Ca),zx(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(c===null||c.child===null)&&(N0(h)?h.flags|=4:c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Zs!==null&&(by(Zs),Zs=null))),cy(c,h),Ta(h),null;case 5:Hx(h);var T=kl($u.current);if(x=h.type,c!==null&&h.stateNode!=null)K_(c,h,x,j,T),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!j){if(h.stateNode===null)throw Error(r(166));return Ta(h),null}if(c=kl(_i.current),N0(h)){j=h.stateNode,x=h.type;var D=h.memoizedProps;switch(j[Si]=h,j[Iu]=D,c=(h.mode&1)!==0,x){case"dialog":an("cancel",j),an("close",j);break;case"iframe":case"object":case"embed":an("load",j);break;case"video":case"audio":for(T=0;T<Tu.length;T++)an(Tu[T],j);break;case"source":an("error",j);break;case"img":case"image":case"link":an("error",j),an("load",j);break;case"details":an("toggle",j);break;case"input":ut(j,D),an("invalid",j);break;case"select":j._wrapperState={wasMultiple:!!D.multiple},an("invalid",j);break;case"textarea":Ut(j,D),an("invalid",j)}Oe(x,D),T=null;for(var X in D)if(D.hasOwnProperty(X)){var ge=D[X];X==="children"?typeof ge=="string"?j.textContent!==ge&&(D.suppressHydrationWarning!==!0&&p0(j.textContent,ge,c),T=["children",ge]):typeof ge=="number"&&j.textContent!==""+ge&&(D.suppressHydrationWarning!==!0&&p0(j.textContent,ge,c),T=["children",""+ge]):s.hasOwnProperty(X)&&ge!=null&&X==="onScroll"&&an("scroll",j)}switch(x){case"input":qe(j),ke(j,D,!0);break;case"textarea":qe(j),Ar(j);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(j.onclick=g0)}j=T,h.updateQueue=j,j!==null&&(h.flags|=4)}else{X=T.nodeType===9?T:T.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=ln(x)),c==="http://www.w3.org/1999/xhtml"?x==="script"?(c=X.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof j.is=="string"?c=X.createElement(x,{is:j.is}):(c=X.createElement(x),x==="select"&&(X=c,j.multiple?X.multiple=!0:j.size&&(X.size=j.size))):c=X.createElementNS(c,x),c[Si]=h,c[Iu]=j,W_(c,h,!1,!1),h.stateNode=c;e:{switch(X=Le(x,j),x){case"dialog":an("cancel",c),an("close",c),T=j;break;case"iframe":case"object":case"embed":an("load",c),T=j;break;case"video":case"audio":for(T=0;T<Tu.length;T++)an(Tu[T],c);T=j;break;case"source":an("error",c),T=j;break;case"img":case"image":case"link":an("error",c),an("load",c),T=j;break;case"details":an("toggle",c),T=j;break;case"input":ut(c,j),T=Ke(c,j),an("invalid",c);break;case"option":T=j;break;case"select":c._wrapperState={wasMultiple:!!j.multiple},T=ce({},j,{value:void 0}),an("invalid",c);break;case"textarea":Ut(c,j),T=Wt(c,j),an("invalid",c);break;default:T=j}Oe(x,T),ge=T;for(D in ge)if(ge.hasOwnProperty(D)){var je=ge[D];D==="style"?re(c,je):D==="dangerouslySetInnerHTML"?(je=je?je.__html:void 0,je!=null&&ir(c,je)):D==="children"?typeof je=="string"?(x!=="textarea"||je!=="")&&nt(c,je):typeof je=="number"&&nt(c,""+je):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(s.hasOwnProperty(D)?je!=null&&D==="onScroll"&&an("scroll",c):je!=null&&b(c,D,je,X))}switch(x){case"input":qe(c),ke(c,j,!1);break;case"textarea":qe(c),Ar(c);break;case"option":j.value!=null&&c.setAttribute("value",""+_e(j.value));break;case"select":c.multiple=!!j.multiple,D=j.value,D!=null?ct(c,!!j.multiple,D,!1):j.defaultValue!=null&&ct(c,!!j.multiple,j.defaultValue,!0);break;default:typeof T.onClick=="function"&&(c.onclick=g0)}switch(x){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}}j&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Ta(h),null;case 6:if(c&&h.stateNode!=null)V_(c,h,c.memoizedProps,j);else{if(typeof j!="string"&&h.stateNode===null)throw Error(r(166));if(x=kl($u.current),kl(_i.current),N0(h)){if(j=h.stateNode,x=h.memoizedProps,j[Si]=h,(D=j.nodeValue!==x)&&(c=fs,c!==null))switch(c.tag){case 3:p0(j.nodeValue,x,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&p0(j.nodeValue,x,(c.mode&1)!==0)}D&&(h.flags|=4)}else j=(x.nodeType===9?x:x.ownerDocument).createTextNode(j),j[Si]=h,h.stateNode=j}return Ta(h),null;case 13:if(sn(gn),j=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(dn&&ms!==null&&(h.mode&1)!==0&&(h.flags&128)===0)XS(),$c(),h.flags|=98560,D=!1;else if(D=N0(h),j!==null&&j.dehydrated!==null){if(c===null){if(!D)throw Error(r(318));if(D=h.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(r(317));D[Si]=h}else $c(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Ta(h),D=!1}else Zs!==null&&(by(Zs),Zs=null),D=!0;if(!D)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=x,h):(j=j!==null,j!==(c!==null&&c.memoizedState!==null)&&j&&(h.child.flags|=8192,(h.mode&1)!==0&&(c===null||(gn.current&1)!==0?Gn===0&&(Gn=3):Ny())),h.updateQueue!==null&&(h.flags|=4),Ta(h),null);case 4:return Hc(),cy(c,h),c===null&&Ou(h.stateNode.containerInfo),Ta(h),null;case 10:return Fx(h.type._context),Ta(h),null;case 17:return ts(h.type)&&y0(),Ta(h),null;case 19:if(sn(gn),D=h.memoizedState,D===null)return Ta(h),null;if(j=(h.flags&128)!==0,X=D.rendering,X===null)if(j)qu(D,!1);else{if(Gn!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(X=A0(c),X!==null){for(h.flags|=128,qu(D,!1),j=X.updateQueue,j!==null&&(h.updateQueue=j,h.flags|=4),h.subtreeFlags=0,j=x,x=h.child;x!==null;)D=x,c=j,D.flags&=14680066,X=D.alternate,X===null?(D.childLanes=0,D.lanes=c,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=X.childLanes,D.lanes=X.lanes,D.child=X.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=X.memoizedProps,D.memoizedState=X.memoizedState,D.updateQueue=X.updateQueue,D.type=X.type,c=X.dependencies,D.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),x=x.sibling;return Qr(gn,gn.current&1|2),h.child}c=c.sibling}D.tail!==null&&Ze()>Kc&&(h.flags|=128,j=!0,qu(D,!1),h.lanes=4194304)}else{if(!j)if(c=A0(X),c!==null){if(h.flags|=128,j=!0,x=c.updateQueue,x!==null&&(h.updateQueue=x,h.flags|=4),qu(D,!0),D.tail===null&&D.tailMode==="hidden"&&!X.alternate&&!dn)return Ta(h),null}else 2*Ze()-D.renderingStartTime>Kc&&x!==1073741824&&(h.flags|=128,j=!0,qu(D,!1),h.lanes=4194304);D.isBackwards?(X.sibling=h.child,h.child=X):(x=D.last,x!==null?x.sibling=X:h.child=X,D.last=X)}return D.tail!==null?(h=D.tail,D.rendering=h,D.tail=h.sibling,D.renderingStartTime=Ze(),h.sibling=null,x=gn.current,Qr(gn,j?x&1|2:x&1),h):(Ta(h),null);case 22:case 23:return jy(),j=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==j&&(h.flags|=8192),j&&(h.mode&1)!==0?(ps&1073741824)!==0&&(Ta(h),h.subtreeFlags&6&&(h.flags|=8192)):Ta(h),null;case 24:return null;case 25:return null}throw Error(r(156,h.tag))}function i7(c,h){switch(Ox(h),h.tag){case 1:return ts(h.type)&&y0(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return Hc(),sn(es),sn(Ca),zx(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 5:return Hx(h),null;case 13:if(sn(gn),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(r(340));$c()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return sn(gn),null;case 4:return Hc(),null;case 10:return Fx(h.type._context),null;case 22:case 23:return jy(),null;case 24:return null;default:return null}}var $0=!1,Oa=!1,o7=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function zc(c,h){var x=c.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(j){bn(c,h,j)}else x.current=null}function dy(c,h,x){try{x()}catch(j){bn(c,h,j)}}var G_=!1;function l7(c,h){if(jx=a0,c=_S(),mx(c)){if("selectionStart"in c)var x={start:c.selectionStart,end:c.selectionEnd};else e:{x=(x=c.ownerDocument)&&x.defaultView||window;var j=x.getSelection&&x.getSelection();if(j&&j.rangeCount!==0){x=j.anchorNode;var T=j.anchorOffset,D=j.focusNode;j=j.focusOffset;try{x.nodeType,D.nodeType}catch{x=null;break e}var X=0,ge=-1,je=-1,Be=0,ot=0,dt=c,st=null;t:for(;;){for(var wt;dt!==x||T!==0&&dt.nodeType!==3||(ge=X+T),dt!==D||j!==0&&dt.nodeType!==3||(je=X+j),dt.nodeType===3&&(X+=dt.nodeValue.length),(wt=dt.firstChild)!==null;)st=dt,dt=wt;for(;;){if(dt===c)break t;if(st===x&&++Be===T&&(ge=X),st===D&&++ot===j&&(je=X),(wt=dt.nextSibling)!==null)break;dt=st,st=dt.parentNode}dt=wt}x=ge===-1||je===-1?null:{start:ge,end:je}}else x=null}x=x||{start:0,end:0}}else x=null;for(Nx={focusedElem:c,selectionRange:x},a0=!1,Nt=h;Nt!==null;)if(h=Nt,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,Nt=c;else for(;Nt!==null;){h=Nt;try{var St=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(St!==null){var At=St.memoizedProps,Cn=St.memoizedState,Ie=h.stateNode,Se=Ie.getSnapshotBeforeUpdate(h.elementType===h.type?At:ei(h.type,At),Cn);Ie.__reactInternalSnapshotBeforeUpdate=Se}break;case 3:var Fe=h.stateNode.containerInfo;Fe.nodeType===1?Fe.textContent="":Fe.nodeType===9&&Fe.documentElement&&Fe.removeChild(Fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(mt){bn(h,h.return,mt)}if(c=h.sibling,c!==null){c.return=h.return,Nt=c;break}Nt=h.return}return St=G_,G_=!1,St}function zu(c,h,x){var j=h.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var T=j=j.next;do{if((T.tag&c)===c){var D=T.destroy;T.destroy=void 0,D!==void 0&&dy(h,x,D)}T=T.next}while(T!==j)}}function L0(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var x=h=h.next;do{if((x.tag&c)===c){var j=x.create;x.destroy=j()}x=x.next}while(x!==h)}}function uy(c){var h=c.ref;if(h!==null){var x=c.stateNode;switch(c.tag){case 5:c=x;break;default:c=x}typeof h=="function"?h(c):h.current=c}}function Y_(c){var h=c.alternate;h!==null&&(c.alternate=null,Y_(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&(delete h[Si],delete h[Iu],delete h[Ex],delete h[zL],delete h[WL])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function X_(c){return c.tag===5||c.tag===3||c.tag===4}function J_(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||X_(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function hy(c,h,x){var j=c.tag;if(j===5||j===6)c=c.stateNode,h?x.nodeType===8?x.parentNode.insertBefore(c,h):x.insertBefore(c,h):(x.nodeType===8?(h=x.parentNode,h.insertBefore(c,x)):(h=x,h.appendChild(c)),x=x._reactRootContainer,x!=null||h.onclick!==null||(h.onclick=g0));else if(j!==4&&(c=c.child,c!==null))for(hy(c,h,x),c=c.sibling;c!==null;)hy(c,h,x),c=c.sibling}function fy(c,h,x){var j=c.tag;if(j===5||j===6)c=c.stateNode,h?x.insertBefore(c,h):x.appendChild(c);else if(j!==4&&(c=c.child,c!==null))for(fy(c,h,x),c=c.sibling;c!==null;)fy(c,h,x),c=c.sibling}var pa=null,ti=!1;function Bo(c,h,x){for(x=x.child;x!==null;)Q_(c,h,x),x=x.sibling}function Q_(c,h,x){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(Dn,x)}catch{}switch(x.tag){case 5:Oa||zc(x,h);case 6:var j=pa,T=ti;pa=null,Bo(c,h,x),pa=j,ti=T,pa!==null&&(ti?(c=pa,x=x.stateNode,c.nodeType===8?c.parentNode.removeChild(x):c.removeChild(x)):pa.removeChild(x.stateNode));break;case 18:pa!==null&&(ti?(c=pa,x=x.stateNode,c.nodeType===8?_x(c.parentNode,x):c.nodeType===1&&_x(c,x),Os(c)):_x(pa,x.stateNode));break;case 4:j=pa,T=ti,pa=x.stateNode.containerInfo,ti=!0,Bo(c,h,x),pa=j,ti=T;break;case 0:case 11:case 14:case 15:if(!Oa&&(j=x.updateQueue,j!==null&&(j=j.lastEffect,j!==null))){T=j=j.next;do{var D=T,X=D.destroy;D=D.tag,X!==void 0&&((D&2)!==0||(D&4)!==0)&&dy(x,h,X),T=T.next}while(T!==j)}Bo(c,h,x);break;case 1:if(!Oa&&(zc(x,h),j=x.stateNode,typeof j.componentWillUnmount=="function"))try{j.props=x.memoizedProps,j.state=x.memoizedState,j.componentWillUnmount()}catch(ge){bn(x,h,ge)}Bo(c,h,x);break;case 21:Bo(c,h,x);break;case 22:x.mode&1?(Oa=(j=Oa)||x.memoizedState!==null,Bo(c,h,x),Oa=j):Bo(c,h,x);break;default:Bo(c,h,x)}}function Z_(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var x=c.stateNode;x===null&&(x=c.stateNode=new o7),h.forEach(function(j){var T=x7.bind(null,c,j);x.has(j)||(x.add(j),j.then(T,T))})}}function ri(c,h){var x=h.deletions;if(x!==null)for(var j=0;j<x.length;j++){var T=x[j];try{var D=c,X=h,ge=X;e:for(;ge!==null;){switch(ge.tag){case 5:pa=ge.stateNode,ti=!1;break e;case 3:pa=ge.stateNode.containerInfo,ti=!0;break e;case 4:pa=ge.stateNode.containerInfo,ti=!0;break e}ge=ge.return}if(pa===null)throw Error(r(160));Q_(D,X,T),pa=null,ti=!1;var je=T.alternate;je!==null&&(je.return=null),T.return=null}catch(Be){bn(T,h,Be)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)eE(h,c),h=h.sibling}function eE(c,h){var x=c.alternate,j=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(ri(h,c),Ci(c),j&4){try{zu(3,c,c.return),L0(3,c)}catch(At){bn(c,c.return,At)}try{zu(5,c,c.return)}catch(At){bn(c,c.return,At)}}break;case 1:ri(h,c),Ci(c),j&512&&x!==null&&zc(x,x.return);break;case 5:if(ri(h,c),Ci(c),j&512&&x!==null&&zc(x,x.return),c.flags&32){var T=c.stateNode;try{nt(T,"")}catch(At){bn(c,c.return,At)}}if(j&4&&(T=c.stateNode,T!=null)){var D=c.memoizedProps,X=x!==null?x.memoizedProps:D,ge=c.type,je=c.updateQueue;if(c.updateQueue=null,je!==null)try{ge==="input"&&D.type==="radio"&&D.name!=null&&ze(T,D),Le(ge,X);var Be=Le(ge,D);for(X=0;X<je.length;X+=2){var ot=je[X],dt=je[X+1];ot==="style"?re(T,dt):ot==="dangerouslySetInnerHTML"?ir(T,dt):ot==="children"?nt(T,dt):b(T,ot,dt,Be)}switch(ge){case"input":Pe(T,D);break;case"textarea":Vt(T,D);break;case"select":var st=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!D.multiple;var wt=D.value;wt!=null?ct(T,!!D.multiple,wt,!1):st!==!!D.multiple&&(D.defaultValue!=null?ct(T,!!D.multiple,D.defaultValue,!0):ct(T,!!D.multiple,D.multiple?[]:"",!1))}T[Iu]=D}catch(At){bn(c,c.return,At)}}break;case 6:if(ri(h,c),Ci(c),j&4){if(c.stateNode===null)throw Error(r(162));T=c.stateNode,D=c.memoizedProps;try{T.nodeValue=D}catch(At){bn(c,c.return,At)}}break;case 3:if(ri(h,c),Ci(c),j&4&&x!==null&&x.memoizedState.isDehydrated)try{Os(h.containerInfo)}catch(At){bn(c,c.return,At)}break;case 4:ri(h,c),Ci(c);break;case 13:ri(h,c),Ci(c),T=c.child,T.flags&8192&&(D=T.memoizedState!==null,T.stateNode.isHidden=D,!D||T.alternate!==null&&T.alternate.memoizedState!==null||(gy=Ze())),j&4&&Z_(c);break;case 22:if(ot=x!==null&&x.memoizedState!==null,c.mode&1?(Oa=(Be=Oa)||ot,ri(h,c),Oa=Be):ri(h,c),Ci(c),j&8192){if(Be=c.memoizedState!==null,(c.stateNode.isHidden=Be)&&!ot&&(c.mode&1)!==0)for(Nt=c,ot=c.child;ot!==null;){for(dt=Nt=ot;Nt!==null;){switch(st=Nt,wt=st.child,st.tag){case 0:case 11:case 14:case 15:zu(4,st,st.return);break;case 1:zc(st,st.return);var St=st.stateNode;if(typeof St.componentWillUnmount=="function"){j=st,x=st.return;try{h=j,St.props=h.memoizedProps,St.state=h.memoizedState,St.componentWillUnmount()}catch(At){bn(j,x,At)}}break;case 5:zc(st,st.return);break;case 22:if(st.memoizedState!==null){nE(dt);continue}}wt!==null?(wt.return=st,Nt=wt):nE(dt)}ot=ot.sibling}e:for(ot=null,dt=c;;){if(dt.tag===5){if(ot===null){ot=dt;try{T=dt.stateNode,Be?(D=T.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(ge=dt.stateNode,je=dt.memoizedProps.style,X=je!=null&&je.hasOwnProperty("display")?je.display:null,ge.style.display=De("display",X))}catch(At){bn(c,c.return,At)}}}else if(dt.tag===6){if(ot===null)try{dt.stateNode.nodeValue=Be?"":dt.memoizedProps}catch(At){bn(c,c.return,At)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===c)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===c)break e;for(;dt.sibling===null;){if(dt.return===null||dt.return===c)break e;ot===dt&&(ot=null),dt=dt.return}ot===dt&&(ot=null),dt.sibling.return=dt.return,dt=dt.sibling}}break;case 19:ri(h,c),Ci(c),j&4&&Z_(c);break;case 21:break;default:ri(h,c),Ci(c)}}function Ci(c){var h=c.flags;if(h&2){try{e:{for(var x=c.return;x!==null;){if(X_(x)){var j=x;break e}x=x.return}throw Error(r(160))}switch(j.tag){case 5:var T=j.stateNode;j.flags&32&&(nt(T,""),j.flags&=-33);var D=J_(c);fy(c,D,T);break;case 3:case 4:var X=j.stateNode.containerInfo,ge=J_(c);hy(c,ge,X);break;default:throw Error(r(161))}}catch(je){bn(c,c.return,je)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function c7(c,h,x){Nt=c,tE(c)}function tE(c,h,x){for(var j=(c.mode&1)!==0;Nt!==null;){var T=Nt,D=T.child;if(T.tag===22&&j){var X=T.memoizedState!==null||$0;if(!X){var ge=T.alternate,je=ge!==null&&ge.memoizedState!==null||Oa;ge=$0;var Be=Oa;if($0=X,(Oa=je)&&!Be)for(Nt=T;Nt!==null;)X=Nt,je=X.child,X.tag===22&&X.memoizedState!==null?aE(T):je!==null?(je.return=X,Nt=je):aE(T);for(;D!==null;)Nt=D,tE(D),D=D.sibling;Nt=T,$0=ge,Oa=Be}rE(c)}else(T.subtreeFlags&8772)!==0&&D!==null?(D.return=T,Nt=D):rE(c)}}function rE(c){for(;Nt!==null;){var h=Nt;if((h.flags&8772)!==0){var x=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:Oa||L0(5,h);break;case 1:var j=h.stateNode;if(h.flags&4&&!Oa)if(x===null)j.componentDidMount();else{var T=h.elementType===h.type?x.memoizedProps:ei(h.type,x.memoizedProps);j.componentDidUpdate(T,x.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var D=h.updateQueue;D!==null&&n_(h,D,j);break;case 3:var X=h.updateQueue;if(X!==null){if(x=null,h.child!==null)switch(h.child.tag){case 5:x=h.child.stateNode;break;case 1:x=h.child.stateNode}n_(h,X,x)}break;case 5:var ge=h.stateNode;if(x===null&&h.flags&4){x=ge;var je=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":je.autoFocus&&x.focus();break;case"img":je.src&&(x.src=je.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var Be=h.alternate;if(Be!==null){var ot=Be.memoizedState;if(ot!==null){var dt=ot.dehydrated;dt!==null&&Os(dt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Oa||h.flags&512&&uy(h)}catch(st){bn(h,h.return,st)}}if(h===c){Nt=null;break}if(x=h.sibling,x!==null){x.return=h.return,Nt=x;break}Nt=h.return}}function nE(c){for(;Nt!==null;){var h=Nt;if(h===c){Nt=null;break}var x=h.sibling;if(x!==null){x.return=h.return,Nt=x;break}Nt=h.return}}function aE(c){for(;Nt!==null;){var h=Nt;try{switch(h.tag){case 0:case 11:case 15:var x=h.return;try{L0(4,h)}catch(je){bn(h,x,je)}break;case 1:var j=h.stateNode;if(typeof j.componentDidMount=="function"){var T=h.return;try{j.componentDidMount()}catch(je){bn(h,T,je)}}var D=h.return;try{uy(h)}catch(je){bn(h,D,je)}break;case 5:var X=h.return;try{uy(h)}catch(je){bn(h,X,je)}}}catch(je){bn(h,h.return,je)}if(h===c){Nt=null;break}var ge=h.sibling;if(ge!==null){ge.return=h.return,Nt=ge;break}Nt=h.return}}var d7=Math.ceil,B0=A.ReactCurrentDispatcher,my=A.ReactCurrentOwner,Rs=A.ReactCurrentBatchConfig,Or=0,la=null,Rn=null,ga=0,ps=0,Wc=Mo(0),Gn=0,Wu=null,_l=0,U0=0,py=0,Ku=null,ns=null,gy=0,Kc=1/0,no=null,H0=!1,xy=null,Uo=null,q0=!1,Ho=null,z0=0,Vu=0,yy=null,W0=-1,K0=0;function za(){return(Or&6)!==0?Ze():W0!==-1?W0:W0=Ze()}function qo(c){return(c.mode&1)===0?1:(Or&2)!==0&&ga!==0?ga&-ga:VL.transition!==null?(K0===0&&(K0=Ye()),K0):(c=yt,c!==0||(c=window.event,c=c===void 0?16:iS(c.type)),c)}function ni(c,h,x,j){if(50<Vu)throw Vu=0,yy=null,Error(r(185));It(c,x,j),((Or&2)===0||c!==la)&&(c===la&&((Or&2)===0&&(U0|=x),Gn===4&&zo(c,ga)),as(c,j),x===1&&Or===0&&(h.mode&1)===0&&(Kc=Ze()+500,b0&&Fo()))}function as(c,h){var x=c.callbackNode;Ve(c,h);var j=Ne(c,c===la?ga:0);if(j===0)x!==null&&we(x),c.callbackNode=null,c.callbackPriority=0;else if(h=j&-j,c.callbackPriority!==h){if(x!=null&&we(x),h===1)c.tag===0?KL(iE.bind(null,c)):WS(iE.bind(null,c)),HL(function(){(Or&6)===0&&Fo()}),x=null;else{switch(vt(j)){case 1:x=Gt;break;case 4:x=ar;break;case 16:x=Nr;break;case 536870912:x=Tr;break;default:x=Nr}x=mE(x,sE.bind(null,c))}c.callbackPriority=h,c.callbackNode=x}}function sE(c,h){if(W0=-1,K0=0,(Or&6)!==0)throw Error(r(327));var x=c.callbackNode;if(Vc()&&c.callbackNode!==x)return null;var j=Ne(c,c===la?ga:0);if(j===0)return null;if((j&30)!==0||(j&c.expiredLanes)!==0||h)h=V0(c,j);else{h=j;var T=Or;Or|=2;var D=lE();(la!==c||ga!==h)&&(no=null,Kc=Ze()+500,Cl(c,h));do try{f7();break}catch(ge){oE(c,ge)}while(!0);Rx(),B0.current=D,Or=T,Rn!==null?h=0:(la=null,ga=0,h=Gn)}if(h!==0){if(h===2&&(T=et(c),T!==0&&(j=T,h=vy(c,T))),h===1)throw x=Wu,Cl(c,0),zo(c,j),as(c,Ze()),x;if(h===6)zo(c,j);else{if(T=c.current.alternate,(j&30)===0&&!u7(T)&&(h=V0(c,j),h===2&&(D=et(c),D!==0&&(j=D,h=vy(c,D))),h===1))throw x=Wu,Cl(c,0),zo(c,j),as(c,Ze()),x;switch(c.finishedWork=T,c.finishedLanes=j,h){case 0:case 1:throw Error(r(345));case 2:Al(c,ns,no);break;case 3:if(zo(c,j),(j&130023424)===j&&(h=gy+500-Ze(),10<h)){if(Ne(c,0)!==0)break;if(T=c.suspendedLanes,(T&j)!==j){za(),c.pingedLanes|=c.suspendedLanes&T;break}c.timeoutHandle=Sx(Al.bind(null,c,ns,no),h);break}Al(c,ns,no);break;case 4:if(zo(c,j),(j&4194240)===j)break;for(h=c.eventTimes,T=-1;0<j;){var X=31-Lr(j);D=1<<X,X=h[X],X>T&&(T=X),j&=~D}if(j=T,j=Ze()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*d7(j/1960))-j,10<j){c.timeoutHandle=Sx(Al.bind(null,c,ns,no),j);break}Al(c,ns,no);break;case 5:Al(c,ns,no);break;default:throw Error(r(329))}}}return as(c,Ze()),c.callbackNode===x?sE.bind(null,c):null}function vy(c,h){var x=Ku;return c.current.memoizedState.isDehydrated&&(Cl(c,h).flags|=256),c=V0(c,h),c!==2&&(h=ns,ns=x,h!==null&&by(h)),c}function by(c){ns===null?ns=c:ns.push.apply(ns,c)}function u7(c){for(var h=c;;){if(h.flags&16384){var x=h.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var j=0;j<x.length;j++){var T=x[j],D=T.getSnapshot;T=T.value;try{if(!Qs(D(),T))return!1}catch{return!1}}}if(x=h.child,h.subtreeFlags&16384&&x!==null)x.return=h,h=x;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function zo(c,h){for(h&=~py,h&=~U0,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var x=31-Lr(h),j=1<<x;c[x]=-1,h&=~j}}function iE(c){if((Or&6)!==0)throw Error(r(327));Vc();var h=Ne(c,0);if((h&1)===0)return as(c,Ze()),null;var x=V0(c,h);if(c.tag!==0&&x===2){var j=et(c);j!==0&&(h=j,x=vy(c,j))}if(x===1)throw x=Wu,Cl(c,0),zo(c,h),as(c,Ze()),x;if(x===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,Al(c,ns,no),as(c,Ze()),null}function wy(c,h){var x=Or;Or|=1;try{return c(h)}finally{Or=x,Or===0&&(Kc=Ze()+500,b0&&Fo())}}function El(c){Ho!==null&&Ho.tag===0&&(Or&6)===0&&Vc();var h=Or;Or|=1;var x=Rs.transition,j=yt;try{if(Rs.transition=null,yt=1,c)return c()}finally{yt=j,Rs.transition=x,Or=h,(Or&6)===0&&Fo()}}function jy(){ps=Wc.current,sn(Wc)}function Cl(c,h){c.finishedWork=null,c.finishedLanes=0;var x=c.timeoutHandle;if(x!==-1&&(c.timeoutHandle=-1,UL(x)),Rn!==null)for(x=Rn.return;x!==null;){var j=x;switch(Ox(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&y0();break;case 3:Hc(),sn(es),sn(Ca),zx();break;case 5:Hx(j);break;case 4:Hc();break;case 13:sn(gn);break;case 19:sn(gn);break;case 10:Fx(j.type._context);break;case 22:case 23:jy()}x=x.return}if(la=c,Rn=c=Wo(c.current,null),ga=ps=h,Gn=0,Wu=null,py=U0=_l=0,ns=Ku=null,Nl!==null){for(h=0;h<Nl.length;h++)if(x=Nl[h],j=x.interleaved,j!==null){x.interleaved=null;var T=j.next,D=x.pending;if(D!==null){var X=D.next;D.next=T,j.next=X}x.pending=j}Nl=null}return c}function oE(c,h){do{var x=Rn;try{if(Rx(),T0.current=D0,O0){for(var j=xn.memoizedState;j!==null;){var T=j.queue;T!==null&&(T.pending=null),j=j.next}O0=!1}if(Sl=0,oa=Vn=xn=null,Lu=!1,Bu=0,my.current=null,x===null||x.return===null){Gn=1,Wu=h,Rn=null;break}e:{var D=c,X=x.return,ge=x,je=h;if(h=ga,ge.flags|=32768,je!==null&&typeof je=="object"&&typeof je.then=="function"){var Be=je,ot=ge,dt=ot.tag;if((ot.mode&1)===0&&(dt===0||dt===11||dt===15)){var st=ot.alternate;st?(ot.updateQueue=st.updateQueue,ot.memoizedState=st.memoizedState,ot.lanes=st.lanes):(ot.updateQueue=null,ot.memoizedState=null)}var wt=P_(X);if(wt!==null){wt.flags&=-257,I_(wt,X,ge,D,h),wt.mode&1&&O_(D,Be,h),h=wt,je=Be;var St=h.updateQueue;if(St===null){var At=new Set;At.add(je),h.updateQueue=At}else St.add(je);break e}else{if((h&1)===0){O_(D,Be,h),Ny();break e}je=Error(r(426))}}else if(dn&&ge.mode&1){var Cn=P_(X);if(Cn!==null){(Cn.flags&65536)===0&&(Cn.flags|=256),I_(Cn,X,ge,D,h),Dx(qc(je,ge));break e}}D=je=qc(je,ge),Gn!==4&&(Gn=2),Ku===null?Ku=[D]:Ku.push(D),D=X;do{switch(D.tag){case 3:D.flags|=65536,h&=-h,D.lanes|=h;var Ie=A_(D,je,h);r_(D,Ie);break e;case 1:ge=je;var Se=D.type,Fe=D.stateNode;if((D.flags&128)===0&&(typeof Se.getDerivedStateFromError=="function"||Fe!==null&&typeof Fe.componentDidCatch=="function"&&(Uo===null||!Uo.has(Fe)))){D.flags|=65536,h&=-h,D.lanes|=h;var mt=T_(D,ge,h);r_(D,mt);break e}}D=D.return}while(D!==null)}dE(x)}catch(Tt){h=Tt,Rn===x&&x!==null&&(Rn=x=x.return);continue}break}while(!0)}function lE(){var c=B0.current;return B0.current=D0,c===null?D0:c}function Ny(){(Gn===0||Gn===3||Gn===2)&&(Gn=4),la===null||(_l&268435455)===0&&(U0&268435455)===0||zo(la,ga)}function V0(c,h){var x=Or;Or|=2;var j=lE();(la!==c||ga!==h)&&(no=null,Cl(c,h));do try{h7();break}catch(T){oE(c,T)}while(!0);if(Rx(),Or=x,B0.current=j,Rn!==null)throw Error(r(261));return la=null,ga=0,Gn}function h7(){for(;Rn!==null;)cE(Rn)}function f7(){for(;Rn!==null&&!lt();)cE(Rn)}function cE(c){var h=fE(c.alternate,c,ps);c.memoizedProps=c.pendingProps,h===null?dE(c):Rn=h,my.current=null}function dE(c){var h=c;do{var x=h.alternate;if(c=h.return,(h.flags&32768)===0){if(x=s7(x,h,ps),x!==null){Rn=x;return}}else{if(x=i7(x,h),x!==null){x.flags&=32767,Rn=x;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Gn=6,Rn=null;return}}if(h=h.sibling,h!==null){Rn=h;return}Rn=h=c}while(h!==null);Gn===0&&(Gn=5)}function Al(c,h,x){var j=yt,T=Rs.transition;try{Rs.transition=null,yt=1,m7(c,h,x,j)}finally{Rs.transition=T,yt=j}return null}function m7(c,h,x,j){do Vc();while(Ho!==null);if((Or&6)!==0)throw Error(r(327));x=c.finishedWork;var T=c.finishedLanes;if(x===null)return null;if(c.finishedWork=null,c.finishedLanes=0,x===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var D=x.lanes|x.childLanes;if(_r(c,D),c===la&&(Rn=la=null,ga=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||q0||(q0=!0,mE(Nr,function(){return Vc(),null})),D=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||D){D=Rs.transition,Rs.transition=null;var X=yt;yt=1;var ge=Or;Or|=4,my.current=null,l7(c,x),eE(x,c),DL(Nx),a0=!!jx,Nx=jx=null,c.current=x,c7(x),Ge(),Or=ge,yt=X,Rs.transition=D}else c.current=x;if(q0&&(q0=!1,Ho=c,z0=T),D=c.pendingLanes,D===0&&(Uo=null),Ea(x.stateNode),as(c,Ze()),h!==null)for(j=c.onRecoverableError,x=0;x<h.length;x++)T=h[x],j(T.value,{componentStack:T.stack,digest:T.digest});if(H0)throw H0=!1,c=xy,xy=null,c;return(z0&1)!==0&&c.tag!==0&&Vc(),D=c.pendingLanes,(D&1)!==0?c===yy?Vu++:(Vu=0,yy=c):Vu=0,Fo(),null}function Vc(){if(Ho!==null){var c=vt(z0),h=Rs.transition,x=yt;try{if(Rs.transition=null,yt=16>c?16:c,Ho===null)var j=!1;else{if(c=Ho,Ho=null,z0=0,(Or&6)!==0)throw Error(r(331));var T=Or;for(Or|=4,Nt=c.current;Nt!==null;){var D=Nt,X=D.child;if((Nt.flags&16)!==0){var ge=D.deletions;if(ge!==null){for(var je=0;je<ge.length;je++){var Be=ge[je];for(Nt=Be;Nt!==null;){var ot=Nt;switch(ot.tag){case 0:case 11:case 15:zu(8,ot,D)}var dt=ot.child;if(dt!==null)dt.return=ot,Nt=dt;else for(;Nt!==null;){ot=Nt;var st=ot.sibling,wt=ot.return;if(Y_(ot),ot===Be){Nt=null;break}if(st!==null){st.return=wt,Nt=st;break}Nt=wt}}}var St=D.alternate;if(St!==null){var At=St.child;if(At!==null){St.child=null;do{var Cn=At.sibling;At.sibling=null,At=Cn}while(At!==null)}}Nt=D}}if((D.subtreeFlags&2064)!==0&&X!==null)X.return=D,Nt=X;else e:for(;Nt!==null;){if(D=Nt,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:zu(9,D,D.return)}var Ie=D.sibling;if(Ie!==null){Ie.return=D.return,Nt=Ie;break e}Nt=D.return}}var Se=c.current;for(Nt=Se;Nt!==null;){X=Nt;var Fe=X.child;if((X.subtreeFlags&2064)!==0&&Fe!==null)Fe.return=X,Nt=Fe;else e:for(X=Se;Nt!==null;){if(ge=Nt,(ge.flags&2048)!==0)try{switch(ge.tag){case 0:case 11:case 15:L0(9,ge)}}catch(Tt){bn(ge,ge.return,Tt)}if(ge===X){Nt=null;break e}var mt=ge.sibling;if(mt!==null){mt.return=ge.return,Nt=mt;break e}Nt=ge.return}}if(Or=T,Fo(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(Dn,c)}catch{}j=!0}return j}finally{yt=x,Rs.transition=h}}return!1}function uE(c,h,x){h=qc(x,h),h=A_(c,h,1),c=Lo(c,h,1),h=za(),c!==null&&(It(c,1,h),as(c,h))}function bn(c,h,x){if(c.tag===3)uE(c,c,x);else for(;h!==null;){if(h.tag===3){uE(h,c,x);break}else if(h.tag===1){var j=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(Uo===null||!Uo.has(j))){c=qc(x,c),c=T_(h,c,1),h=Lo(h,c,1),c=za(),h!==null&&(It(h,1,c),as(h,c));break}}h=h.return}}function p7(c,h,x){var j=c.pingCache;j!==null&&j.delete(h),h=za(),c.pingedLanes|=c.suspendedLanes&x,la===c&&(ga&x)===x&&(Gn===4||Gn===3&&(ga&130023424)===ga&&500>Ze()-gy?Cl(c,0):py|=x),as(c,h)}function hE(c,h){h===0&&((c.mode&1)===0?h=1:(h=Ae,Ae<<=1,(Ae&130023424)===0&&(Ae=4194304)));var x=za();c=eo(c,h),c!==null&&(It(c,h,x),as(c,x))}function g7(c){var h=c.memoizedState,x=0;h!==null&&(x=h.retryLane),hE(c,x)}function x7(c,h){var x=0;switch(c.tag){case 13:var j=c.stateNode,T=c.memoizedState;T!==null&&(x=T.retryLane);break;case 19:j=c.stateNode;break;default:throw Error(r(314))}j!==null&&j.delete(h),hE(c,x)}var fE;fE=function(c,h,x){if(c!==null)if(c.memoizedProps!==h.pendingProps||es.current)rs=!0;else{if((c.lanes&x)===0&&(h.flags&128)===0)return rs=!1,a7(c,h,x);rs=(c.flags&131072)!==0}else rs=!1,dn&&(h.flags&1048576)!==0&&KS(h,j0,h.index);switch(h.lanes=0,h.tag){case 2:var j=h.type;F0(c,h),c=h.pendingProps;var T=Mc(h,Ca.current);Uc(h,x),T=Vx(null,h,j,c,T,x);var D=Gx();return h.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,ts(j)?(D=!0,v0(h)):D=!1,h.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Bx(h),T.updater=M0,h.stateNode=T,T._reactInternals=h,ey(h,j,c,x),h=ay(null,h,j,!0,D,x)):(h.tag=0,dn&&D&&Tx(h),qa(null,h,T,x),h=h.child),h;case 16:j=h.elementType;e:{switch(F0(c,h),c=h.pendingProps,T=j._init,j=T(j._payload),h.type=j,T=h.tag=v7(j),c=ei(j,c),T){case 0:h=ny(null,h,j,c,x);break e;case 1:h=L_(null,h,j,c,x);break e;case 11:h=D_(null,h,j,c,x);break e;case 14:h=M_(null,h,j,ei(j.type,c),x);break e}throw Error(r(306,j,""))}return h;case 0:return j=h.type,T=h.pendingProps,T=h.elementType===j?T:ei(j,T),ny(c,h,j,T,x);case 1:return j=h.type,T=h.pendingProps,T=h.elementType===j?T:ei(j,T),L_(c,h,j,T,x);case 3:e:{if(B_(h),c===null)throw Error(r(387));j=h.pendingProps,D=h.memoizedState,T=D.element,t_(c,h),C0(h,j,null,x);var X=h.memoizedState;if(j=X.element,D.isDehydrated)if(D={element:j,isDehydrated:!1,cache:X.cache,pendingSuspenseBoundaries:X.pendingSuspenseBoundaries,transitions:X.transitions},h.updateQueue.baseState=D,h.memoizedState=D,h.flags&256){T=qc(Error(r(423)),h),h=U_(c,h,j,x,T);break e}else if(j!==T){T=qc(Error(r(424)),h),h=U_(c,h,j,x,T);break e}else for(ms=Do(h.stateNode.containerInfo.firstChild),fs=h,dn=!0,Zs=null,x=ZS(h,null,j,x),h.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if($c(),j===T){h=ro(c,h,x);break e}qa(c,h,j,x)}h=h.child}return h;case 5:return a_(h),c===null&&Ix(h),j=h.type,T=h.pendingProps,D=c!==null?c.memoizedProps:null,X=T.children,kx(j,T)?X=null:D!==null&&kx(j,D)&&(h.flags|=32),$_(c,h),qa(c,h,X,x),h.child;case 6:return c===null&&Ix(h),null;case 13:return H_(c,h,x);case 4:return Ux(h,h.stateNode.containerInfo),j=h.pendingProps,c===null?h.child=Lc(h,null,j,x):qa(c,h,j,x),h.child;case 11:return j=h.type,T=h.pendingProps,T=h.elementType===j?T:ei(j,T),D_(c,h,j,T,x);case 7:return qa(c,h,h.pendingProps,x),h.child;case 8:return qa(c,h,h.pendingProps.children,x),h.child;case 12:return qa(c,h,h.pendingProps.children,x),h.child;case 10:e:{if(j=h.type._context,T=h.pendingProps,D=h.memoizedProps,X=T.value,Qr(S0,j._currentValue),j._currentValue=X,D!==null)if(Qs(D.value,X)){if(D.children===T.children&&!es.current){h=ro(c,h,x);break e}}else for(D=h.child,D!==null&&(D.return=h);D!==null;){var ge=D.dependencies;if(ge!==null){X=D.child;for(var je=ge.firstContext;je!==null;){if(je.context===j){if(D.tag===1){je=to(-1,x&-x),je.tag=2;var Be=D.updateQueue;if(Be!==null){Be=Be.shared;var ot=Be.pending;ot===null?je.next=je:(je.next=ot.next,ot.next=je),Be.pending=je}}D.lanes|=x,je=D.alternate,je!==null&&(je.lanes|=x),$x(D.return,x,h),ge.lanes|=x;break}je=je.next}}else if(D.tag===10)X=D.type===h.type?null:D.child;else if(D.tag===18){if(X=D.return,X===null)throw Error(r(341));X.lanes|=x,ge=X.alternate,ge!==null&&(ge.lanes|=x),$x(X,x,h),X=D.sibling}else X=D.child;if(X!==null)X.return=D;else for(X=D;X!==null;){if(X===h){X=null;break}if(D=X.sibling,D!==null){D.return=X.return,X=D;break}X=X.return}D=X}qa(c,h,T.children,x),h=h.child}return h;case 9:return T=h.type,j=h.pendingProps.children,Uc(h,x),T=Ds(T),j=j(T),h.flags|=1,qa(c,h,j,x),h.child;case 14:return j=h.type,T=ei(j,h.pendingProps),T=ei(j.type,T),M_(c,h,j,T,x);case 15:return R_(c,h,h.type,h.pendingProps,x);case 17:return j=h.type,T=h.pendingProps,T=h.elementType===j?T:ei(j,T),F0(c,h),h.tag=1,ts(j)?(c=!0,v0(h)):c=!1,Uc(h,x),E_(h,j,T),ey(h,j,T,x),ay(null,h,j,!0,c,x);case 19:return z_(c,h,x);case 22:return F_(c,h,x)}throw Error(r(156,h.tag))};function mE(c,h){return Me(c,h)}function y7(c,h,x,j){this.tag=c,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fs(c,h,x,j){return new y7(c,h,x,j)}function ky(c){return c=c.prototype,!(!c||!c.isReactComponent)}function v7(c){if(typeof c=="function")return ky(c)?1:0;if(c!=null){if(c=c.$$typeof,c===O)return 11;if(c===V)return 14}return 2}function Wo(c,h){var x=c.alternate;return x===null?(x=Fs(c.tag,h,c.key,c.mode),x.elementType=c.elementType,x.type=c.type,x.stateNode=c.stateNode,x.alternate=c,c.alternate=x):(x.pendingProps=h,x.type=c.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=c.flags&14680064,x.childLanes=c.childLanes,x.lanes=c.lanes,x.child=c.child,x.memoizedProps=c.memoizedProps,x.memoizedState=c.memoizedState,x.updateQueue=c.updateQueue,h=c.dependencies,x.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},x.sibling=c.sibling,x.index=c.index,x.ref=c.ref,x}function G0(c,h,x,j,T,D){var X=2;if(j=c,typeof c=="function")ky(c)&&(X=1);else if(typeof c=="string")X=5;else e:switch(c){case _:return Tl(x.children,T,D,h);case C:X=8,T|=8;break;case P:return c=Fs(12,x,h,T|2),c.elementType=P,c.lanes=D,c;case R:return c=Fs(13,x,h,T),c.elementType=R,c.lanes=D,c;case Q:return c=Fs(19,x,h,T),c.elementType=Q,c.lanes=D,c;case ae:return Y0(x,T,D,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case B:X=10;break e;case F:X=9;break e;case O:X=11;break e;case V:X=14;break e;case J:X=16,j=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return h=Fs(X,x,h,T),h.elementType=c,h.type=j,h.lanes=D,h}function Tl(c,h,x,j){return c=Fs(7,c,j,h),c.lanes=x,c}function Y0(c,h,x,j){return c=Fs(22,c,j,h),c.elementType=ae,c.lanes=x,c.stateNode={isHidden:!1},c}function Sy(c,h,x){return c=Fs(6,c,null,h),c.lanes=x,c}function _y(c,h,x){return h=Fs(4,c.children!==null?c.children:[],c.key,h),h.lanes=x,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function b7(c,h,x,j,T){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pt(0),this.expirationTimes=Pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pt(0),this.identifierPrefix=j,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function Ey(c,h,x,j,T,D,X,ge,je){return c=new b7(c,h,x,ge,je),h===1?(h=1,D===!0&&(h|=8)):h=0,D=Fs(3,null,null,h),c.current=D,D.stateNode=c,D.memoizedState={element:j,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bx(D),c}function w7(c,h,x){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:S,key:j==null?null:""+j,children:c,containerInfo:h,implementation:x}}function pE(c){if(!c)return Ro;c=c._reactInternals;e:{if(W(c)!==c||c.tag!==1)throw Error(r(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(ts(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(r(171))}if(c.tag===1){var x=c.type;if(ts(x))return qS(c,x,h)}return h}function gE(c,h,x,j,T,D,X,ge,je){return c=Ey(x,j,!0,c,T,D,X,ge,je),c.context=pE(null),x=c.current,j=za(),T=qo(x),D=to(j,T),D.callback=h??null,Lo(x,D,T),c.current.lanes=T,It(c,T,j),as(c,j),c}function X0(c,h,x,j){var T=h.current,D=za(),X=qo(T);return x=pE(x),h.context===null?h.context=x:h.pendingContext=x,h=to(D,X),h.payload={element:c},j=j===void 0?null:j,j!==null&&(h.callback=j),c=Lo(T,h,X),c!==null&&(ni(c,T,X,D),E0(c,T,X)),X}function J0(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function xE(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var x=c.retryLane;c.retryLane=x!==0&&x<h?x:h}}function Cy(c,h){xE(c,h),(c=c.alternate)&&xE(c,h)}function j7(){return null}var yE=typeof reportError=="function"?reportError:function(c){console.error(c)};function Ay(c){this._internalRoot=c}Q0.prototype.render=Ay.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(r(409));X0(c,h,null,null)},Q0.prototype.unmount=Ay.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;El(function(){X0(null,c,null,null)}),h[Xi]=null}};function Q0(c){this._internalRoot=c}Q0.prototype.unstable_scheduleHydration=function(c){if(c){var h=mr();c={blockedOn:null,target:c,priority:h};for(var x=0;x<cn.length&&h!==0&&h<cn[x].priority;x++);cn.splice(x,0,c),x===0&&wu(c)}};function Ty(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function Z0(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function vE(){}function N7(c,h,x,j,T){if(T){if(typeof j=="function"){var D=j;j=function(){var Be=J0(X);D.call(Be)}}var X=gE(h,j,c,0,null,!1,!1,"",vE);return c._reactRootContainer=X,c[Xi]=X.current,Ou(c.nodeType===8?c.parentNode:c),El(),X}for(;T=c.lastChild;)c.removeChild(T);if(typeof j=="function"){var ge=j;j=function(){var Be=J0(je);ge.call(Be)}}var je=Ey(c,0,!1,null,null,!1,!1,"",vE);return c._reactRootContainer=je,c[Xi]=je.current,Ou(c.nodeType===8?c.parentNode:c),El(function(){X0(h,je,x,j)}),je}function em(c,h,x,j,T){var D=x._reactRootContainer;if(D){var X=D;if(typeof T=="function"){var ge=T;T=function(){var je=J0(X);ge.call(je)}}X0(h,X,c,T)}else X=N7(x,h,c,T,j);return J0(X)}ur=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var x=Te(h.pendingLanes);x!==0&&(nn(h,x|1),as(h,Ze()),(Or&6)===0&&(Kc=Ze()+500,Fo()))}break;case 13:El(function(){var j=eo(c,1);if(j!==null){var T=za();ni(j,c,1,T)}}),Cy(c,1)}},vr=function(c){if(c.tag===13){var h=eo(c,134217728);if(h!==null){var x=za();ni(h,c,134217728,x)}Cy(c,134217728)}},Ct=function(c){if(c.tag===13){var h=qo(c),x=eo(c,h);if(x!==null){var j=za();ni(x,c,h,j)}Cy(c,h)}},mr=function(){return yt},br=function(c,h){var x=yt;try{return yt=c,h()}finally{yt=x}},$t=function(c,h,x){switch(h){case"input":if(Pe(c,x),h=x.name,x.type==="radio"&&h!=null){for(x=c;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<x.length;h++){var j=x[h];if(j!==c&&j.form===c.form){var T=x0(j);if(!T)throw Error(r(90));G(j),Pe(j,T)}}}break;case"textarea":Vt(c,x);break;case"select":h=x.value,h!=null&&ct(c,!!x.multiple,h,!1)}},fr=wy,Jr=El;var k7={usingClientEntryPoint:!1,Events:[Du,Ic,x0,Rr,cr,wy]},Gu={findFiberByHostInstance:vl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S7={bundleType:Gu.bundleType,version:Gu.version,rendererPackageName:Gu.rendererPackageName,rendererConfig:Gu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=ue(c),c===null?null:c.stateNode},findFiberByHostInstance:Gu.findFiberByHostInstance||j7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tm.isDisabled&&tm.supportsFiber)try{Dn=tm.inject(S7),Fr=tm}catch{}}return ss.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k7,ss.createPortal=function(c,h){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ty(h))throw Error(r(200));return w7(c,h,null,x)},ss.createRoot=function(c,h){if(!Ty(c))throw Error(r(299));var x=!1,j="",T=yE;return h!=null&&(h.unstable_strictMode===!0&&(x=!0),h.identifierPrefix!==void 0&&(j=h.identifierPrefix),h.onRecoverableError!==void 0&&(T=h.onRecoverableError)),h=Ey(c,1,!1,null,null,x,!1,j,T),c[Xi]=h.current,Ou(c.nodeType===8?c.parentNode:c),new Ay(h)},ss.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=ue(h),c=c===null?null:c.stateNode,c},ss.flushSync=function(c){return El(c)},ss.hydrate=function(c,h,x){if(!Z0(h))throw Error(r(200));return em(null,c,h,!0,x)},ss.hydrateRoot=function(c,h,x){if(!Ty(c))throw Error(r(405));var j=x!=null&&x.hydratedSources||null,T=!1,D="",X=yE;if(x!=null&&(x.unstable_strictMode===!0&&(T=!0),x.identifierPrefix!==void 0&&(D=x.identifierPrefix),x.onRecoverableError!==void 0&&(X=x.onRecoverableError)),h=gE(h,null,c,1,x??null,T,!1,D,X),c[Xi]=h.current,Ou(c),j)for(c=0;c<j.length;c++)x=j[c],T=x._getVersion,T=T(x._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[x,T]:h.mutableSourceEagerHydrationData.push(x,T);return new Q0(h)},ss.render=function(c,h,x){if(!Z0(h))throw Error(r(200));return em(null,c,h,!1,x)},ss.unmountComponentAtNode=function(c){if(!Z0(c))throw Error(r(40));return c._reactRootContainer?(El(function(){em(null,null,c,!1,function(){c._reactRootContainer=null,c[Xi]=null})}),!0):!1},ss.unstable_batchedUpdates=wy,ss.unstable_renderSubtreeIntoContainer=function(c,h,x,j){if(!Z0(x))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return em(c,h,x,!1,j)},ss.version="18.3.1-next-f1338f8080-20240426",ss}var EE;function OI(){if(EE)return Iy.exports;EE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Iy.exports=I7(),Iy.exports}var CE;function D7(){if(CE)return nm;CE=1;var e=OI();return nm.createRoot=e.createRoot,nm.hydrateRoot=e.hydrateRoot,nm}var M7=D7(),M=d2();const xe=qr(M),R7=E7({__proto__:null,default:xe},[M]),sg={fresh_produce:" Fresh Vegetables",spices_seasonings:" Grocery",dairy:" Dairy Products",meat:" Meat",packaging:" Packaging Materials",staff_essentials:" Staff Essentials"},AE={fresh_produce:["Tomato","Capsicum","Onion","Cabbage","Gandhoraj Lemon","Lemon","Pudina","Coriander Leaves","Garlic","Green Chilli","Ginger","Red Chilli","Carrot","Potato"],spices_seasonings:["Soya Sauce","Chilli Sauce","Vinegar","Oil","Salt","Sugar","Ajinomoto","Black Pepper","White Pepper","Peri Peri Masala","Baking Powder","Corn Flour","Maida"],dairy:["Butter","Cheese"],meat:["Chicken"],packaging:["Butter Paper","Carry Bag","Container","Tissue Paper"],staff_essentials:["Labour","Cleaning","Water","Electricity"]},u2={fuel:" Fuel Cost",travel:" Travel by Employee",transportation:" Goods Transportation Cost",marketing:" Marketing Cost",service_charge:" Service Charge (Food Aggregators)",repair:" Repair Cost",party:" Party Cost",lunch:" Lunch Cost",emergency_online:" Emergency Online Order (Blinkit)",personal_expense:" Personal Expense By an Employee",utensils:" Utensils",equipments:" Equipments",miscellaneous:" Miscellaneous Cost"},h2={electricity:" Electricity",rent:" Rent",lpg_gas:" LPG Gas Cost (Cylinders)"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$7=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),TE=e=>{const t=$7(e);return t.charAt(0).toUpperCase()+t.slice(1)},PI=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var L7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=M.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:i,iconNode:o,...l},d)=>M.createElement("svg",{ref:d,...L7,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:PI("lucide",s),...l},[...o.map(([u,f])=>M.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=(e,t)=>{const r=M.forwardRef(({className:a,...s},i)=>M.createElement(B7,{ref:i,iconNode:t,className:PI(`lucide-${F7(TE(e))}`,`lucide-${e}`,a),...s}));return r.displayName=TE(e),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],oj=xt("activity",U7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],q7=xt("arrow-right",H7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],OE=xt("award",z7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],lj=xt("bell",W7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Rm=xt("briefcase",K7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],PE=xt("bug",V7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],al=xt("building-2",G7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Dr=xt("calendar",Y7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],II=xt("chart-column",X7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ho=xt("check",J7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],Z7=xt("chef-hat",Q7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Uf=xt("chevron-down",e9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],cj=xt("chevron-left",t9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],sl=xt("chevron-right",r9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],DI=xt("chevron-up",n9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],s9=xt("circle-arrow-down",a9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xr=xt("circle-alert",i9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],IE=xt("circle-arrow-up",o9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zt=xt("circle-check-big",l9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Na=xt("circle-x",c9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],DE=xt("clipboard-check",d9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],h9=xt("clipboard-list",u9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],fn=xt("clock",f9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],p9=xt("copy",m9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],yd=xt("credit-card",g9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],oh=xt("database",x9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],qn=xt("dollar-sign",y9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ws=xt("download",v9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],w9=xt("eraser",b9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lo=xt("eye",j9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]],Pn=xt("factory",N9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Fm=xt("file-spreadsheet",k9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vi=xt("file-text",S9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],E9=xt("hard-drive",_9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],A9=xt("hash",C9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],O9=xt("info",T9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],I9=xt("key-round",P9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],M9=xt("key",D9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],F9=xt("layers",R9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],pc=xt("loader-circle",$9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],B9=xt("loader",L9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],dj=xt("lock",U9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],q9=xt("log-in",H9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],lh=xt("log-out",z9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Fh=xt("mail",W9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],f2=xt("map-pin",K9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],ME=xt("menu",V9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["path",{d:"M5 12h14",key:"1ays0h"}]],Y9=xt("minus",G9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],MI=xt("network",X9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],rr=xt("package",J9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Pi=xt("pen",Q9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z9=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],eB=xt("percent",Z9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],am=xt("phone",tB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],xo=xt("plus",rB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],aB=xt("receipt",nB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],gi=xt("refresh-cw",sB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],rc=xt("save",iB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],RI=xt("search",oB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$m=xt("send",lB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ii=xt("settings",cB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],uB=xt("shield-check",dB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],fB=xt("shopping-bag",hB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],id=xt("shopping-cart",mB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],RE=xt("smartphone",pB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["path",{d:"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z",key:"4rw317"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M19.5 12 22 6",key:"shfsr5"}],["path",{d:"M16.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.73 1.62",key:"rpc6vp"}],["path",{d:"M11.25 3c.27.1.8.53.74 1.36-.05.83-.93 1.2-.98 2.02-.06.78.33 1.24.72 1.62",key:"1lf63m"}],["path",{d:"M6.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.74 1.62",key:"97tijn"}]],xB=xt("soup",gB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],js=xt("square-check-big",yB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],uj=xt("square-pen",vB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],Li=xt("store",bB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],jB=xt("table",wB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],m2=xt("target",NB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ls=xt("trash-2",kB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],p2=xt("trending-down",SB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],hn=xt("trending-up",_B);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yn=xt("triangle-alert",EB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],hj=xt("trophy",CB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Ry=xt("truck",AB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],zl=xt("upload",TB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],PB=xt("user-check",OB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],hi=xt("user-cog",IB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Di=xt("user-plus",DB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],FE=xt("user-x",MB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Fa=xt("user",RB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],kn=xt("users",FB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],co=xt("wallet",$B);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Kr=xt("x",LB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],UB=xt("zap",BB),ra="xssxnhrzxvtejavoqgwg",zn="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhzc3huaHJ6eHZ0ZWphdm9xZ3dnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwODAzNjksImV4cCI6MjA4MTY1NjM2OX0.boONpQZ8Xv2AzlDylEoKnAlGEW7DFsMQ0zEQ1S5LPGE";function ig(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r}function HB(e,t,r,a){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{u(a.next(f))}catch(m){o(m)}}function d(f){try{u(a.throw(f))}catch(m){o(m)}}function u(f){f.done?i(f.value):s(f.value).then(l,d)}u((a=a.apply(e,t||[])).next())})}const qB=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class g2 extends Error{constructor(t,r="FunctionsError",a){super(t),this.name=r,this.context=a}}class zB extends g2{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class $E extends g2{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class LE extends g2{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var fj;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(fj||(fj={}));class WB{constructor(t,{headers:r={},customFetch:a,region:s=fj.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=qB(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return HB(this,arguments,void 0,function*(r,a={}){var s;let i,o;try{const{headers:l,method:d,body:u,signal:f,timeout:m}=a;let p={},{region:g}=a;g||(g=this.region);const v=new URL(`${this.url}/${r}`);g&&g!=="any"&&(p["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let y;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(p["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(p["Content-Type"]="application/json",y=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?y=JSON.stringify(u):y=u;let w=f;m&&(o=new AbortController,i=setTimeout(()=>o.abort(),m),f?(w=o.signal,f.addEventListener("abort",()=>o.abort())):w=o.signal);const k=yield this.fetch(v.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:y,signal:w}).catch(E=>{throw new zB(E)}),N=k.headers.get("x-relay-error");if(N&&N==="true")throw new $E(k);if(!k.ok)throw new LE(k);let b=((s=k.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),A;return b==="application/json"?A=yield k.json():b==="application/octet-stream"||b==="application/pdf"?A=yield k.blob():b==="text/event-stream"?A=k:b==="multipart/form-data"?A=yield k.formData():A=yield k.text(),{data:A,error:null,response:k}}catch(l){return{data:null,error:l,response:l instanceof LE||l instanceof $E?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var KB=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},VB=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let s=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,d=null,u=i.status,f=i.statusText;if(i.ok){var m,p;if(r.method!=="HEAD"){var g;const k=await i.text();k===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((g=r.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?l=k:l=JSON.parse(k))}const y=(m=r.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),w=(p=i.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");y&&w&&w.length>1&&(d=parseInt(w[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,d=null,u=406,f="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var v;const y=await i.text();try{o=JSON.parse(y),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,f="OK")}catch{i.status===404&&y===""?(u=204,f="No Content"):o={message:y}}if(o&&r.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,u=200,f="OK"),o&&r.shouldThrowOnError)throw new KB(o)}return{error:o,data:l,count:d,status:u,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let l="";const d=i?.cause;if(d){var u,f,m,p;const v=(u=d?.message)!==null&&u!==void 0?u:"",y=(f=d?.code)!==null&&f!==void 0?f:"";l=`${(m=i?.name)!==null&&m!==void 0?m:"FetchError"}: ${i?.message}`,l+=`

Caused by: ${(p=d?.name)!==null&&p!==void 0?p:"Error"}: ${v}`,y&&(l+=` (${y})`),d?.stack&&(l+=`
${d.stack}`)}else{var g;l=(g=i?.stack)!==null&&g!==void 0?g:""}return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},GB=class extends VB{select(e){let t=!1;const r=(e??"*").split("").map(a=>/\s/.test(a)&&!t?"":(a==='"'&&(t=!t),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:a,referencedTable:s=a}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:a=r}={}){const s=typeof a>"u"?"offset":`${a}.offset`,i=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:a=!1,wal:s=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,a?"buffers":null,s?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${d}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const BE=new RegExp("[,()]");var od=class extends GB{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(a=>typeof a=="string"&&BE.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(a=>typeof a=="string"&&BE.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:a}={}){let s="";a==="plain"?s="pl":a==="phrase"?s="ph":a==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},YB=class{constructor(e,{headers:t={},schema:r,fetch:a}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=a}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:a}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:d}=this.cloneRequestState();return l.searchParams.set("select",o),a&&d.append("Prefer",`count=${a}`),new od({method:s,url:l,headers:d,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var a;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(l.length>0){const d=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",d.join(","))}}return new od({method:s,url:i,headers:o,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:a,defaultToNull:s=!0}={}){var i;const o="POST",{url:l,headers:d}=this.cloneRequestState();if(d.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),a&&d.append("Prefer",`count=${a}`),s||d.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(u.length>0){const f=[...new Set(u)].map(m=>`"${m}"`);l.searchParams.set("columns",f.join(","))}}return new od({method:o,url:l,headers:d,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const a="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new od({method:a,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:a,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new od({method:r,url:a,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},XB=class FI{constructor(t,{headers:r={},schema:a,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=a,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new YB(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new FI(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:a=!1,get:s=!1,count:i}={}){var o;let l;const d=new URL(`${this.url}/rpc/${t}`);let u;const f=g=>g!==null&&typeof g=="object"&&(!Array.isArray(g)||g.some(f)),m=a&&Object.values(r).some(f);m?(l="POST",u=r):a||s?(l=a?"HEAD":"GET",Object.entries(r).filter(([g,v])=>v!==void 0).map(([g,v])=>[g,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([g,v])=>{d.searchParams.append(g,v)})):(l="POST",u=r);const p=new Headers(this.headers);return m?p.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&p.set("Prefer",`count=${i}`),new od({method:l,url:d,headers:p,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class JB{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const a=r.versions;if(a&&a.node){const s=a.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const a=this.getWebSocketConstructor();return new a(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const QB="2.93.3",ZB=`realtime-js/${QB}`,eU="1.0.0",$I="2.0.0",UE=$I,mj=1e4,tU=1e3,rU=100;var Yo;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Yo||(Yo={}));var Qn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Qn||(Qn={}));var ci;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ci||(ci={}));var pj;(function(e){e.websocket="websocket"})(pj||(pj={}));var Bl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Bl||(Bl={}));class nU{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let a=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,a;const s=(a=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,a;const s=(a=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&a!==void 0?a:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,a){var s,i;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",d=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,f=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},m=Object.keys(f).length===0?"":JSON.stringify(f);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+l.length+o.length+u.length+m.length,g=new ArrayBuffer(this.HEADER_LENGTH+p);let v=new DataView(g),y=0;v.setUint8(y++,this.KINDS.userBroadcastPush),v.setUint8(y++,d.length),v.setUint8(y++,l.length),v.setUint8(y++,o.length),v.setUint8(y++,u.length),v.setUint8(y++,m.length),v.setUint8(y++,r),Array.from(d,k=>v.setUint8(y++,k.charCodeAt(0))),Array.from(l,k=>v.setUint8(y++,k.charCodeAt(0))),Array.from(o,k=>v.setUint8(y++,k.charCodeAt(0))),Array.from(u,k=>v.setUint8(y++,k.charCodeAt(0))),Array.from(m,k=>v.setUint8(y++,k.charCodeAt(0)));var w=new Uint8Array(g.byteLength+a.byteLength);return w.set(new Uint8Array(g),0),w.set(new Uint8Array(a),g.byteLength),w.buffer}decode(t,r){if(this._isArrayBuffer(t)){let a=this._binaryDecode(t);return r(a)}if(typeof t=="string"){const a=JSON.parse(t),[s,i,o,l,d]=a;return r({join_ref:s,ref:i,topic:o,event:l,payload:d})}return r({})}_binaryDecode(t){const r=new DataView(t),a=r.getUint8(0),s=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,a){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let d=this.HEADER_LENGTH+4;const u=a.decode(t.slice(d,d+s));d=d+s;const f=a.decode(t.slice(d,d+i));d=d+i;const m=a.decode(t.slice(d,d+o));d=d+o;const p=t.slice(d,t.byteLength),g=l===this.JSON_ENCODING?JSON.parse(a.decode(p)):p,v={type:this.BROADCAST_EVENT,event:f,payload:g};return o>0&&(v.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([a])=>r.includes(a)))}}class LI{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Zr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Zr||(Zr={}));const HE=(e,t,r={})=>{var a;const s=(a=r.skipTypes)!==null&&a!==void 0?a:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=aU(o,e,t,s),i),{}):{}},aU=(e,t,r,a)=>{const s=t.find(l=>l.name===e),i=s?.type,o=r[e];return i&&!a.includes(i)?BI(i,o):gj(o)},BI=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return lU(t,r)}switch(e){case Zr.bool:return sU(t);case Zr.float4:case Zr.float8:case Zr.int2:case Zr.int4:case Zr.int8:case Zr.numeric:case Zr.oid:return iU(t);case Zr.json:case Zr.jsonb:return oU(t);case Zr.timestamp:return cU(t);case Zr.abstime:case Zr.date:case Zr.daterange:case Zr.int4range:case Zr.int8range:case Zr.money:case Zr.reltime:case Zr.text:case Zr.time:case Zr.timestamptz:case Zr.timetz:case Zr.tsrange:case Zr.tstzrange:return gj(t);default:return gj(t)}},gj=e=>e,sU=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},iU=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},oU=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},lU=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,a=e[r];if(e[0]==="{"&&a==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>BI(t,l))}return e},cU=e=>typeof e=="string"?e.replace(" ","T"):e,UI=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Fy{constructor(t,r,a={},s=mj){this.channel=t,this.event=r,this.payload=a,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var a;return this._hasReceived(t)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var qE;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(qE||(qE={}));class yh{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yh.syncState(this.state,s,i,o),this.pendingDiffs.forEach(d=>{this.state=yh.syncDiff(this.state,d,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(a.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=yh.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,a,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},d={};return this.map(i,(u,f)=>{o[u]||(d[u]=f)}),this.map(o,(u,f)=>{const m=i[u];if(m){const p=f.map(w=>w.presence_ref),g=m.map(w=>w.presence_ref),v=f.filter(w=>g.indexOf(w.presence_ref)<0),y=m.filter(w=>p.indexOf(w.presence_ref)<0);v.length>0&&(l[u]=v),y.length>0&&(d[u]=y)}else l[u]=f}),this.syncDiff(i,{joins:l,leaves:d},a,s)}static syncDiff(t,r,a,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),s||(s=()=>{}),this.map(i,(l,d)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(d),f.length>0){const m=t[l].map(g=>g.presence_ref),p=f.filter(g=>m.indexOf(g.presence_ref)<0);t[l].unshift(...p)}a(l,f,d)}),this.map(o,(l,d)=>{let u=t[l];if(!u)return;const f=d.map(m=>m.presence_ref);u=u.filter(m=>f.indexOf(m.presence_ref)<0),t[l]=u,s(l,u,d),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(a=>r(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,a)=>{const s=t[a];return"metas"in s?r[a]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[a]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zE;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(zE||(zE={}));var vh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(vh||(vh={}));var io;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(io||(io={}));class ud{constructor(t,r={config:{}},a){var s,i;if(this.topic=t,this.params=r,this.socket=a,this.bindings={},this.state=Qn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Fy(this,ci.join,this.params,this.timeout),this.rejoinTimer=new LI(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Qn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Qn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ci.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new yh(this),this.broadcastEndpointURL=UI(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var a,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Qn.closed){const{config:{broadcast:o,presence:l,private:d}}=this.params,u=(s=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(g=>g.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[vh.PRESENCE]&&this.bindings[vh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,m={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:u,private:d};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(g=>t?.(io.CHANNEL_ERROR,g)),this._onClose(()=>t?.(io.CLOSED)),this.updateJoinPayload(Object.assign({config:p},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){t?.(io.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,w=(v=y?.length)!==null&&v!==void 0?v:0,k=[];for(let N=0;N<w;N++){const b=y[N],{filter:{event:A,schema:E,table:S,filter:_}}=b,C=g&&g[N];if(C&&C.event===A&&ud.isFilterValueEqual(C.schema,E)&&ud.isFilterValueEqual(C.table,S)&&ud.isFilterValueEqual(C.filter,_))k.push(Object.assign(Object.assign({},b),{id:C.id}));else{this.unsubscribe(),this.state=Qn.errored,t?.(io.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,t&&t(io.SUBSCRIBED);return}}).receive("error",g=>{this.state=Qn.errored,t?.(io.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t?.(io.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,a){return this.state===Qn.joined&&t===vh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,a)}async httpSend(t,r,a={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=a.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let d=l.statusText;try{const u=await l.json();d=u.error||u.message||d}catch{}return Promise.reject(new Error(d))}async send(t,r={}){var a,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,d;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Qn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ci.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(s=>{a=new Fy(this,ci.leave,{},t),a.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Qn.closed,this.bindings={}}async _fetchWithTimeout(t,r,a){const s=new AbortController,i=setTimeout(()=>s.abort(),a),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Fy(this,t,r,a);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>rU){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,a){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,a){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:d,leave:u,join:f}=ci;if(a&&[l,d,u,f].indexOf(o)>=0&&a!==this._joinRef())return;let p=this._onMessage(o,r,a);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var v,y,w;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(y=g.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(g=>g.callback(p,a)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var v,y,w,k,N,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const A=g.id,E=(v=g.filter)===null||v===void 0?void 0:v.event;return A&&((y=r.ids)===null||y===void 0?void 0:y.includes(A))&&(E==="*"||E?.toLocaleLowerCase()===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const A=(N=(k=g?.filter)===null||k===void 0?void 0:k.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return A==="*"||A===((b=r?.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:y,table:w,commit_timestamp:k,type:N,errors:b}=v;p=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:k,eventType:N,new:{},old:{},errors:b}),this._getPayloadRecords(v))}g.callback(p,a)})}_isClosed(){return this.state===Qn.closed}_isJoined(){return this.state===Qn.joined}_isJoining(){return this.state===Qn.joining}_isLeaving(){return this.state===Qn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,a){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:a};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&ud.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const a in t)if(t[a]!==r[a])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ci.close,{},t)}_onError(t){this._on(ci.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=HE(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=HE(t.columns,t.old_record)),r}}const $y=()=>{},sm={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},dU=[1e3,2e3,5e3,1e4],uU=1e4,hU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fU{constructor(t,r){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mj,this.transport=null,this.heartbeatIntervalMs=sm.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$y,this.ref=0,this.reconnectTimer=null,this.vsn=UE,this.logger=$y,this.conn=null,this.sendBuffer=[],this.serializer=new nU,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((a=r?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${pj.websocket}`,this.httpEndpoint=UI(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=JB.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,a){this.logger(t,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Yo.connecting:return Bl.Connecting;case Yo.open:return Bl.Open;case Yo.closing:return Bl.Closing;default:return Bl.Closed}}isConnected(){return this.connectionState()===Bl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const a=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===a);if(s)return s;{const i=new ud(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:a,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${r} ${a} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(tU,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},sm.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(f){this.log("error","error in heartbeat callback",f)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:a,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",d=i.status||"";this.log("receive",`${d} ${a} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(a)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Yo.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Yo.open||this.conn.readyState===Yo.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(ci.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const a=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${a}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const a=new Blob([hU],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,a=!1;if(t)r=t,a=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:ZB};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(ci.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new LI(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},sm.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,a,s,i,o,l,d,u,f,m,p,g;switch(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(a=t?.timeout)!==null&&a!==void 0?a:mj,this.heartbeatIntervalMs=(s=t?.heartbeatIntervalMs)!==null&&s!==void 0?s:sm.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t?.heartbeatCallback)!==null&&l!==void 0?l:$y,this.vsn=(d=t?.vsn)!==null&&d!==void 0?d:UE,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t?.reconnectAfterMs)!==null&&u!==void 0?u:(v=>dU[v-1]||uU),this.vsn){case eU:this.encode=(f=t?.encode)!==null&&f!==void 0?f:((v,y)=>y(JSON.stringify(v))),this.decode=(m=t?.decode)!==null&&m!==void 0?m:((v,y)=>y(JSON.parse(v)));break;case $I:this.encode=(p=t?.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(g=t?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var $h=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function mU(e,t,r){const a=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&a.searchParams.set(s,i);return a.toString()}async function pU(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function gU(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:a,query:s,body:i,headers:o}){const l=mU(e.baseUrl,a,s),d=await pU(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...d,...o},body:i?JSON.stringify(i):void 0}),f=await u.text(),m=(u.headers.get("content-type")||"").includes("application/json"),p=m&&f?JSON.parse(f):f;if(!u.ok){const g=m?p:void 0,v=g?.error;throw new $h(v?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:v?.type,icebergCode:v?.code,details:g})}return{status:u.status,headers:u.headers,data:p}}}}function im(e){return e.join("")}var xU=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:im(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${im(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${im(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${im(e.namespace)}`}),!0}catch(t){if(t instanceof $h&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof $h&&r.status===409)return;throw r}}};function Gc(e){return e.join("")}var yU=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gc(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Gc(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Gc(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gc(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gc(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gc(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof $h&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof $h&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},vU=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=gU({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new xU(this.client,t),this.tableOps=new yU(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},og=class extends Error{constructor(e,t="storage",r,a){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=a}};function lg(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var om=class extends og{constructor(e,t,r,a="storage"){super(e,a,t,r),this.name=a==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},HI=class extends og{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const bU=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),wU=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},xj=e=>{if(Array.isArray(e))return e.map(r=>xj(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,a])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=xj(a)}),t},jU=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Lh(e){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lh(e)}function NU(e,t){if(Lh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Lh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kU(e){var t=NU(e,"string");return Lh(t)=="symbol"?t:t+""}function SU(e,t,r){return(t=kU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(r),!0).forEach(function(a){SU(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}const KE=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},_U=async(e,t,r,a)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!r?.noResolveJson){const s=e,i=s.status||500;if(typeof s.json=="function")s.json().then(o=>{const l=o?.statusCode||o?.code||i+"";t(new om(KE(o),i,l,a))}).catch(()=>{if(a==="vectors"){const o=i+"";t(new om(s.statusText||`HTTP ${i} error`,i,o,a))}else{const o=i+"";t(new om(s.statusText||`HTTP ${i} error`,i,o,a))}});else{const o=i+"";t(new om(s.statusText||`HTTP ${i} error`,i,o,a))}}else t(new HI(KE(e),e,a))},EU=(e,t,r,a)=>{const s={method:e,headers:t?.headers||{}};return e==="GET"||e==="HEAD"||!a?Jt(Jt({},s),r):(wU(a)?(s.headers=Jt({"Content-Type":"application/json"},t?.headers),s.body=JSON.stringify(a)):s.body=a,t?.duplex&&(s.duplex=t.duplex),Jt(Jt({},s),r))};async function Xu(e,t,r,a,s,i,o){return new Promise((l,d)=>{e(r,EU(t,a,s,i)).then(u=>{if(!u.ok)throw u;if(a?.noResolveJson)return u;if(o==="vectors"){const f=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!f||!f.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>_U(u,d,a,o))})}function qI(e="storage"){return{get:async(t,r,a,s)=>Xu(t,"GET",r,a,s,void 0,e),post:async(t,r,a,s,i)=>Xu(t,"POST",r,s,i,a,e),put:async(t,r,a,s,i)=>Xu(t,"PUT",r,s,i,a,e),head:async(t,r,a,s)=>Xu(t,"HEAD",r,Jt(Jt({},a),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,r,a,s,i)=>Xu(t,"DELETE",r,s,i,a,e)}}const CU=qI("storage"),{get:Bh,post:li,put:yj,head:AU,remove:x2}=CU,ks=qI("vectors");var eu=class{constructor(e,t={},r,a="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=bU(r),this.namespace=a}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lg(r))return{data:null,error:r};throw r}}},TU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(lg(t))return{data:null,error:t};throw t}}};let zI;zI=Symbol.toStringTag;var OU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[zI]="BlobDownloadBuilder",this.promise=null}asStream(){return new TU(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(lg(t))return{data:null,error:t};throw t}}};const PU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},VE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var IU=class extends eu{constructor(e,t={},r,a){super(e,t,a,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,a){var s=this;return s.handleOperation(async()=>{let i;const o=Jt(Jt({},VE),a);let l=Jt(Jt({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",s.encodeMetadata(d)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),d&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(d))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,d&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(d))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),a?.headers&&(l=Jt(Jt({},l),a.headers));const u=s._removeEmptyFolders(t),f=s._getFinalPath(u),m=await(e=="PUT"?yj:li)(s.fetch,`${s.url}/object/${f}`,i,Jt({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{path:u,id:m.Id,fullPath:m.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,a){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",t),s.handleOperation(async()=>{let d;const u=Jt({upsert:VE.upsert},a),f=Jt(Jt({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",u.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",u.cacheControl)):(d=r,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType),{path:i,fullPath:(await yj(s.fetch,l.toString(),d,{headers:f})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let a=r._getFinalPath(e);const s=Jt({},r.headers);t?.upsert&&(s["x-upsert"]="true");const i=await li(r.fetch,`${r.url}/object/upload/sign/${a}`,{},{headers:s}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new og("No token returned by API");return{signedUrl:o.toString(),path:e,token:l}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var a=this;return a.handleOperation(async()=>await li(a.fetch,`${a.url}/object/move`,{bucketId:a.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:a.headers}))}async copy(e,t,r){var a=this;return a.handleOperation(async()=>({path:(await li(a.fetch,`${a.url}/object/copy`,{bucketId:a.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:a.headers})).Key}))}async createSignedUrl(e,t,r){var a=this;return a.handleOperation(async()=>{let s=a._getFinalPath(e),i=await li(a.fetch,`${a.url}/object/sign/${s}`,Jt({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:a.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${a.url}${i.signedURL}${o}`)}})}async createSignedUrls(e,t,r){var a=this;return a.handleOperation(async()=>{const s=await li(a.fetch,`${a.url}/object/sign/${a.bucketId}`,{expiresIn:t,paths:e},{headers:a.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s.map(o=>Jt(Jt({},o),{},{signedUrl:o.signedURL?encodeURI(`${a.url}${o.signedURL}${i}`):null}))})}download(e,t){const r=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),s=a?`?${a}`:"",i=this._getFinalPath(e),o=()=>Bh(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new OU(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>xj(await Bh(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await AU(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(lg(a)&&a instanceof HI){const s=a.originalError;if([400,404].includes(s?.status))return{data:!1,error:a}}throw a}}getPublicUrl(e,t){const r=this._getFinalPath(e),a=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&a.push(s);const i=typeof t?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(t?.transform||{});o!==""&&a.push(o);let l=a.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await x2(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var a=this;return a.handleOperation(async()=>{const s=Jt(Jt(Jt({},PU),t),{},{prefix:e||""});return await li(a.fetch,`${a.url}/object/list/${a.bucketId}`,s,{headers:a.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const a=Jt({},e);return await li(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,a,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const DU="2.93.3",Hf={"X-Client-Info":`storage-js/${DU}`};var MU=class extends eu{constructor(e,t={},r,a){const s=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const i=s.href.replace(/\/$/,""),o=Jt(Jt({},Hf),t);super(i,o,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await Bh(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Bh(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await li(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await yj(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await li(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await x2(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},RU=class extends eu{constructor(e,t={},r){const a=e.replace(/\/$/,""),s=Jt(Jt({},Hf),t);super(a,s,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await li(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const a=r.toString(),s=a?`${t.url}/bucket?${a}`:`${t.url}/bucket`;return await Bh(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await x2(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!jU(e))throw new og("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new vU({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(d){if(a)throw d;return{data:null,error:d}}}}})}},FU=class extends eu{constructor(e,t={},r){const a=e.replace(/\/$/,""),s=Jt(Jt({},Hf),{},{"Content-Type":"application/json"},t);super(a,s,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await ks.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await ks.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await ks.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await ks.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},$U=class extends eu{constructor(e,t={},r){const a=e.replace(/\/$/,""),s=Jt(Jt({},Hf),{},{"Content-Type":"application/json"},t);super(a,s,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await ks.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await ks.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await ks.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await ks.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await ks.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},LU=class extends eu{constructor(e,t={},r){const a=e.replace(/\/$/,""),s=Jt(Jt({},Hf),{},{"Content-Type":"application/json"},t);super(a,s,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await ks.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await ks.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await ks.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await ks.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},BU=class extends LU{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new UU(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},UU=class extends FU{constructor(e,t,r,a){super(e,t,a),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new HU(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},HU=class extends $U{constructor(e,t,r,a,s){super(e,t,s),this.vectorBucketName=r,this.indexName=a}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},qU=class extends MU{constructor(e,t={},r,a){super(e,t,r,a)}from(e){return new IU(this.url,this.headers,e,this.fetch)}get vectors(){return new BU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new RU(this.url+"/iceberg",this.headers,this.fetch)}};const WI="2.93.3",ld=30*1e3,vj=3,Ly=vj*ld,zU="http://localhost:9999",WU="supabase.auth.token",KU={"X-Client-Info":`gotrue-js/${WI}`},bj="X-Supabase-Api-Version",KI={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},VU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,GU=600*1e3;class Uh extends Error{constructor(t,r,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function Mt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class YU extends Uh{constructor(t,r,a){super(t,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function XU(e){return Mt(e)&&e.name==="AuthApiError"}class Ul extends Uh{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Eo extends Uh{constructor(t,r,a,s){super(t,a,s),this.name=r,this.status=a}}class xs extends Eo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function By(e){return Mt(e)&&e.name==="AuthSessionMissingError"}class Yc extends Eo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class lm extends Eo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class cm extends Eo{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function JU(e){return Mt(e)&&e.name==="AuthImplicitGrantRedirectError"}class GE extends Eo{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class QU extends Eo{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class wj extends Eo{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Uy(e){return Mt(e)&&e.name==="AuthRetryableFetchError"}class YE extends Eo{constructor(t,r,a){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class jj extends Eo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Lm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),XE=` 	
\r=`.split(""),ZU=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<XE.length;t+=1)e[XE[t].charCodeAt(0)]=-2;for(let t=0;t<Lm.length;t+=1)e[Lm[t].charCodeAt(0)]=t;return e})();function JE(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(Lm[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(Lm[a]),t.queuedBits-=6}}function VI(e,t,r){const a=ZU[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function QE(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},a={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{rH(o,a,r)};for(let o=0;o<e.length;o+=1)VI(e.charCodeAt(o),s,i);return t.join("")}function eH(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function tH(e,t){for(let r=0;r<e.length;r+=1){let a=e.charCodeAt(r);if(a>55295&&a<=56319){const s=(a-55296)*1024&65535;a=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}eH(a,t)}}function rH(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let a=1;a<6;a+=1)if((e>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function vd(e){const t=[],r={queue:0,queuedBits:0},a=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)VI(e.charCodeAt(s),r,a);return new Uint8Array(t)}function nH(e){const t=[];return tH(e,r=>t.push(r)),new Uint8Array(t)}function Wl(e){const t=[],r={queue:0,queuedBits:0},a=s=>{t.push(s)};return e.forEach(s=>JE(s,r,a)),JE(null,r,a),t.join("")}function aH(e){return Math.round(Date.now()/1e3)+e}function sH(){return Symbol("auth-callback")}const ya=()=>typeof window<"u"&&typeof document<"u",Ol={tested:!1,writable:!1},GI=()=>{if(!ya())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ol.tested)return Ol.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ol.tested=!0,Ol.writable=!0}catch{Ol.tested=!0,Ol.writable=!1}return Ol.writable};function iH(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((a,s)=>{t[s]=a}),t}const YI=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),oH=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",cd=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Pl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},xa=async(e,t)=>{await e.removeItem(t)};class cg{constructor(){this.promise=new cg.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}cg.promiseConstructor=Promise;function dm(e){const t=e.split(".");if(t.length!==3)throw new jj("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!VU.test(t[a]))throw new jj("JWT not in base64url format");return{header:JSON.parse(QE(t[0])),payload:JSON.parse(QE(t[1])),signature:vd(t[2]),raw:{header:t[0],payload:t[1]}}}async function lH(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function cH(e,t){return new Promise((a,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){a(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function dH(e){return("0"+e.toString(16)).substr(-2)}function uH(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*a));return s}return crypto.getRandomValues(t),Array.from(t,dH).join("")}async function hH(e){const r=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(a);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function fH(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await hH(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xc(e,t,r=!1){const a=uH();let s=a;r&&(s+="/PASSWORD_RECOVERY"),await cd(e,`${t}-code-verifier`,s);const i=await fH(a);return[i,a===i?"plain":"s256"]}const mH=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pH(e){const t=e.headers.get(bj);if(!t||!t.match(mH))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function gH(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function xH(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yH=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Jc(e){if(!yH.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Hy(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function vH(e,t){return new Proxy(e,{get:(r,a,s)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const i=a.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,a,s)}return!t.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,a,s)}})}function ZE(e){return JSON.parse(JSON.stringify(e))}const Fl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),bH=[502,503,504];async function eC(e){var t;if(!oH(e))throw new wj(Fl(e),0);if(bH.includes(e.status))throw new wj(Fl(e),e.status);let r;try{r=await e.json()}catch(i){throw new Ul(Fl(i),i)}let a;const s=pH(e);if(s&&s.getTime()>=KI["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new YE(Fl(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new xs}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new YE(Fl(r),e.status,r.weak_password.reasons);throw new YU(Fl(r),e.status||500,a)}const wH=(e,t,r,a)=>{const s={method:e,headers:t?.headers||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),s.body=JSON.stringify(a),Object.assign(Object.assign({},s),r))};async function Xt(e,t,r,a){var s;const i=Object.assign({},a?.headers);i[bj]||(i[bj]=KI["2024-01-01"].name),a?.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const o=(s=a?.query)!==null&&s!==void 0?s:{};a?.redirectTo&&(o.redirect_to=a.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await jH(e,t,r+l,{headers:i,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(d):{data:Object.assign({},d),error:null}}async function jH(e,t,r,a,s,i){const o=wH(t,a,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(d){throw console.error(d),new wj(Fl(d),0)}if(l.ok||await eC(l),a?.noResolveJson)return l;try{return await l.json()}catch(d){await eC(d)}}function oi(e){var t;let r=null;SH(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=aH(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:a},error:null}}function tC(e){const t=oi(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Jo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function NH(e){return{data:e,error:null}}function kH(e){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:s,verification_type:i}=e,o=ig(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:a,redirect_to:s,verification_type:i},d=Object.assign({},o);return{data:{properties:l,user:d},error:null}}function rC(e){return e}function SH(e){return e.access_token&&e.refresh_token&&e.expires_in}const qy=["global","local","others"];class _H{constructor({url:t="",headers:r={},fetch:a}){this.url=t,this.headers=r,this.fetch=YI(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=qy[0]){if(qy.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qy.join(", ")}`);try{return await Xt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Mt(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,r={}){try{return await Xt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Jo})}catch(a){if(Mt(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:r}=t,a=ig(t,["options"]),s=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(s.new_email=a?.newEmail,delete s.newEmail),await Xt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:kH,redirectTo:r?.redirectTo})}catch(r){if(Mt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Xt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Jo})}catch(r){if(Mt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,a,s,i,o,l,d;try{const u={nextPage:null,lastPage:0,total:0},f=await Xt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(i=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:rC});if(f.error)throw f.error;const m=await f.json(),p=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(d=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return g.length>0&&(g.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(Mt(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Jc(t);try{return await Xt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Jo})}catch(r){if(Mt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Jc(t);try{return await Xt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Jo})}catch(a){if(Mt(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,r=!1){Jc(t);try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Jo})}catch(a){if(Mt(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){Jc(t.userId);try{const{data:r,error:a}=await Xt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:a}}catch(r){if(Mt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Jc(t.userId),Jc(t.id);try{return{data:await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Mt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,a,s,i,o,l,d;try{const u={nextPage:null,lastPage:0,total:0},f=await Xt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(i=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:rC});if(f.error)throw f.error;const m=await f.json(),p=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(d=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return g.length>0&&(g.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(Mt(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Xt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Mt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Xt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Mt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Xt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Mt(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(t){try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Mt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Xt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Mt(r))return{data:null,error:r};throw r}}}function nC(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Qc={debug:!!(globalThis&&GI()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class XI extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class EH extends XI{}async function CH(e,t,r){Qc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),Qc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async s=>{if(s){Qc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Qc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Qc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new EH(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Qc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function AH(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function JI(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function TH(e){return parseInt(e,16)}function OH(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,a=>a.toString(16).padStart(2,"0")).join("")}function PH(e){var t;const{chainId:r,domain:a,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:d,resources:u,scheme:f,uri:m,version:p}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const g=JI(e.address),v=f?`${f}://${a}`:a,y=e.statement?`${e.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${g}

${y}`;let k=`URI: ${m}
Version: ${p}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(k+=`
Expiration Time: ${s.toISOString()}`),l&&(k+=`
Not Before: ${l.toISOString()}`),d&&(k+=`
Request ID: ${d}`),u){let N=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);N+=`
- ${b}`}k+=N}return`${w}
${k}`}class Un extends Error{constructor({message:t,code:r,cause:a,name:s}){var i;super(t,{cause:a}),this.__isWebAuthnError=!0,this.name=(i=s??(a instanceof Error?a.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Bm extends Un{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function IH({error:e,options:t}){var r,a,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Un({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Un({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Un({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Un({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Un({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Un({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Un({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Un({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(QI(o)){if(i.rp.id!==o)return new Un({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Un({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Un({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Un({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Un({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function DH({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Un({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Un({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(QI(a)){if(r.rpId!==a)return new Un({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Un({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Un({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Un({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class MH{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const RH=new MH;function FH(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:a}=e,s=ig(e,["challenge","user","excludeCredentials"]),i=vd(t).buffer,o=Object.assign(Object.assign({},r),{id:vd(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(a&&a.length>0){l.excludeCredentials=new Array(a.length);for(let d=0;d<a.length;d++){const u=a[d];l.excludeCredentials[d]=Object.assign(Object.assign({},u),{id:vd(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function $H(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,a=ig(e,["challenge","allowCredentials"]),s=vd(t).buffer,i=Object.assign(Object.assign({},a),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:vd(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function LH(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Wl(new Uint8Array(e.response.attestationObject)),clientDataJSON:Wl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function BH(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,a=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Wl(new Uint8Array(s.authenticatorData)),clientDataJSON:Wl(new Uint8Array(s.clientDataJSON)),signature:Wl(new Uint8Array(s.signature)),userHandle:s.userHandle?Wl(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function QI(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function aC(){var e,t;return!!(ya()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function UH(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Bm("Browser returned unexpected credential type",t)}:{data:null,error:new Bm("Empty credential response",t)}}catch(t){return{data:null,error:IH({error:t,options:e})}}}async function HH(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Bm("Browser returned unexpected credential type",t)}:{data:null,error:new Bm("Empty credential response",t)}}catch(t){return{data:null,error:DH({error:t,options:e})}}}const qH={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},zH={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Um(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),a={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))a[i]=o;else if(r(o))a[i]=o;else if(t(o)){const l=a[i];t(l)?a[i]=Um(l,o):a[i]=Um(o)}else a[i]=o}return a}function WH(e,t){return Um(qH,e,t||{})}function KH(e,t){return Um(zH,e,t||{})}class VH{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:a,signal:s},i){var o;try{const{data:l,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:d};const u=s??RH.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;if(!f.name){const m=a;if(m)f.name=`${f.id}:${m}`;else{const g=(await this.client.getUser()).data.user,v=((o=g?.user_metadata)===null||o===void 0?void 0:o.name)||g?.email||g?.id||"User";f.name=`${f.id}:${v}`}}f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=WH(l.webauthn.credential_options.publicKey,i?.create),{data:m,error:p}=await UH({publicKey:f,signal:u});return m?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:p}}case"request":{const f=KH(l.webauthn.credential_options.publicKey,i?.request),{data:m,error:p}=await HH(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:u}));return m?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:p}}}}catch(l){return Mt(l)?{data:null,error:l}:{data:null,error:new Ul("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:a}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:a})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Uh("rpId is required for WebAuthn authentication")};try{if(!aC())return{data:null,error:new Ul("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:a},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:d}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:a,credential_response:d.credential_response}})}catch(o){return Mt(o)?{data:null,error:o}:{data:null,error:new Ul("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Uh("rpId is required for WebAuthn registration")};try{if(!aC())return{data:null,error:new Ul("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(f=>{var m;return(m=f.data)===null||m===void 0?void 0:m.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:l};const{data:d,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:a},signal:s},{create:i});return d?this._verify({factorId:o.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:a,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Mt(o)?{data:null,error:o}:{data:null,error:new Ul("Unexpected error in register",o)}}}}AH();const GH={url:zU,storageKey:WU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:KU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function sC(e,t,r){return await r()}const Zc={};class Hh{get jwks(){var t,r;return(r=(t=Zc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Zc[this.storageKey]=Object.assign(Object.assign({},Zc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Zc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Zc[this.storageKey]=Object.assign(Object.assign({},Zc[this.storageKey]),{cachedAt:t})}constructor(t){var r,a,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},GH),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Hh.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Hh.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&ya()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new _H({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=YI(i.fetch),this.lock=i.lock||sC,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&ya()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=CH:this.lock=sC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new VH(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:GI()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=nC(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=nC(this.memoryStorage)),ya()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${WI}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},a="none";if(ya()&&(r=iH(window.location.href),this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce")),ya()&&this.detectSessionInUrl&&a!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),JU(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Mt(r)?this._returnResult({error:r}):this._returnResult({error:new Ul("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,a,s;try{const i=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(s=t?.options)===null||s===void 0?void 0:s.captchaToken}},xform:oi}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const d=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:u,session:d},error:null})}catch(i){if(Mt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,a,s;try{let i;if("email"in t){const{email:f,password:m,options:p}=t;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Xc(this.storage,this.storageKey)),i=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p?.emailRedirectTo,body:{email:f,password:m,data:(r=p?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:v},xform:oi})}else if("phone"in t){const{phone:f,password:m,options:p}=t;i=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:m,data:(a=p?.data)!==null&&a!==void 0?a:{},channel:(s=p?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:oi})}else throw new lm("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await xa(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const d=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:u,session:d},error:null})}catch(i){if(await xa(this.storage,`${this.storageKey}-code-verifier`),Mt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:tC})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:tC})}else throw new lm("You must provide either an email or phone number and a password");const{data:a,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!a||!a.session||!a.user){const i=new Yc;return this._returnResult({data:{user:null,session:null},error:i})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:s})}catch(r){if(Mt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,a,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,a,s,i,o,l,d,u,f,m,p;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:y,wallet:w,statement:k,options:N}=t;let b;if(ya())if(typeof w=="object")b=w;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")b=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=w}const A=new URL((r=N?.url)!==null&&r!==void 0?r:window.location.href),E=await b.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=JI(E[0]);let _=(a=N?.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!_){const P=await b.request({method:"eth_chainId"});_=TH(P)}const C={domain:A.host,address:S,statement:k,uri:A.href,version:"1",chainId:_,nonce:(s=N?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=N?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=N?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(d=N?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(u=N?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(f=N?.signInWithEthereum)===null||f===void 0?void 0:f.resources};g=PH(C),v=await b.request({method:"personal_sign",params:[OH(g),S]})}try{const{data:y,error:w}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:oi});if(w)throw w;if(!y||!y.session||!y.user){const k=new Yc;return this._returnResult({data:{user:null,session:null},error:k})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:w})}catch(y){if(Mt(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var r,a,s,i,o,l,d,u,f,m,p,g;let v,y;if("message"in t)v=t.message,y=t.signature;else{const{chain:w,wallet:k,statement:N,options:b}=t;let A;if(ya())if(typeof k=="object")A=k;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))A=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=k}const E=new URL((r=b?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in A&&A.signIn){const S=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b?.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),N?{statement:N}:null));let _;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")_=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)_=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)v=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),y=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${E.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(a=b?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((d=b?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((m=(f=b?.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||m===void 0)&&m.length?["Resources",...b.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const S=await A.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=S}}try{const{data:w,error:k}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Wl(y)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:oi});if(k)throw k;if(!w||!w.session||!w.user){const N=new Yc;return this._returnResult({data:{user:null,session:null},error:N})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:k})}catch(w){if(Mt(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const r=await Pl(this.storage,`${this.storageKey}-code-verifier`),[a,s]=(r??"").split("/");try{if(!a&&this.flowType==="pkce")throw new QU;const{data:i,error:o}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:oi});if(await xa(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Yc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await xa(this.storage,`${this.storageKey}-code-verifier`),Mt(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:a,token:s,access_token:i,nonce:o}=t,l=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:oi}),{data:d,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!d||!d.session||!d.user){const f=new Yc;return this._returnResult({data:{user:null,session:null},error:f})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:u})}catch(r){if(Mt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,a,s,i,o;try{if("email"in t){const{email:l,options:d}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await Xc(this.storage,this.storageKey));const{error:m}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=d?.data)!==null&&r!==void 0?r:{},create_user:(a=d?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in t){const{phone:l,options:d}=t,{data:u,error:f}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=d?.data)!==null&&s!==void 0?s:{},create_user:(i=d?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(o=d?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:f})}throw new lm("You must provide either an email or phone number.")}catch(l){if(await xa(this.storage,`${this.storageKey}-code-verifier`),Mt(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,a;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:o,error:l}=await Xt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:oi});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,u=o.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:u,session:d},error:null})}catch(s){if(Mt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,a,s,i,o;try{let l=null,d=null;this.flowType==="pkce"&&([l,d]=await Xc(this.storage,this.storageKey));const u=await Xt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((s=t?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:d}),headers:this.headers,xform:NH});return!((i=u.data)===null||i===void 0)&&i.url&&ya()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await xa(this.storage,`${this.storageKey}-code-verifier`),Mt(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;if(a)throw a;if(!r)throw new xs;const{error:s}=await Xt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(Mt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:a,type:s,options:i}=t,{error:o}=await Xt(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:a,type:s,options:i}=t,{data:o,error:l}=await Xt(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:l})}throw new lm("You must provide either an email or phone number and a type")}catch(r){if(Mt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Pl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<Ly:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const o=await Pl(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=Hy()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=vH(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Jo}):await this._useSession(async r=>{var a,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((a=o.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xs}:await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Jo})})}catch(r){if(Mt(r))return By(r)&&(await this._removeSession(),await xa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async a=>{const{data:s,error:i}=a;if(i)throw i;if(!s.session)throw new xs;const o=s.session;let l=null,d=null;this.flowType==="pkce"&&t.email!=null&&([l,d]=await Xc(this.storage,this.storageKey));const{data:u,error:f}=await Xt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:d}),jwt:o.access_token,xform:Jo});if(f)throw f;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(a){if(await xa(this.storage,`${this.storageKey}-code-verifier`),Mt(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new xs;const r=Date.now()/1e3;let a=r,s=!0,i=null;const{payload:o}=dm(t.access_token);if(o.exp&&(a=o.exp,s=a<=r),s){const{data:l,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:d}=await this._getUser(t.access_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(Mt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var a;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(a=o.session)!==null&&a!==void 0?a:void 0}if(!t?.refresh_token)throw new xs;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Mt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!ya())throw new cm("No browser detected.");if(t.error||t.error_description||t.error_code)throw new cm(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new GE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new cm("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new GE("No code detected.");const{data:N,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:d,token_type:u}=t;if(!i||!l||!o||!u)throw new cm("No session defined in URL");const f=Math.round(Date.now()/1e3),m=parseInt(l);let p=f+m;d&&(p=parseInt(d));const g=p-f;g*1e3<=ld&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${m}s`);const v=p-m;f-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,f):f-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,f);const{data:y,error:w}=await this._getUser(i);if(w)throw w;const k={provider_token:a,provider_refresh_token:s,access_token:i,expires_in:m,expires_at:p,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:k,redirectType:t.type},error:null})}catch(a){if(Mt(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Pl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:s,error:i}=r;if(i&&!By(i))return this._returnResult({error:i});const o=(a=s.session)===null||a===void 0?void 0:a.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(XU(l)&&(l.status===404||l.status===401||l.status===403)||By(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await xa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=sH(),a={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async r=>{var a,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let a=null,s=null;this.flowType==="pkce"&&([a,s]=await Xc(this.storage,this.storageKey,!0));try{return await Xt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await xa(this.storage,`${this.storageKey}-code-verifier`),Mt(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Mt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:a,error:s}=await this._useSession(async i=>{var o,l,d,u,f;const{data:m,error:p}=i;if(p)throw p;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Xt(this.fetch,"GET",g,{headers:this.headers,jwt:(f=(u=m.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return ya()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a?.url),this._returnResult({data:{provider:t.provider,url:a?.url},error:null})}catch(a){if(Mt(a))return this._returnResult({data:{provider:t.provider,url:null},error:a});throw a}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var a;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:l,token:d,access_token:u,nonce:f}=t,m=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=i?.access_token)!==null&&a!==void 0?a:void 0,body:{provider:l,id_token:d,access_token:u,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:oi}),{data:p,error:g}=m;return g?this._returnResult({data:{user:null,session:null},error:g}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Yc}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:g}))}catch(s){if(await xa(this.storage,`${this.storageKey}-code-verifier`),Mt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var a,s;const{data:i,error:o}=r;if(o)throw o;return await Xt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Mt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await cH(async s=>(s>0&&await lH(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Xt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:oi})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Uy(i)&&Date.now()+o-a<ld})}catch(a){if(this._debug(r,"error",a),Mt(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",a),ya()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,r;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const s=await Pl(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Pl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await cd(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o?.user)!==null&&t!==void 0?t:Hy()}else if(s&&!s.user&&!s.user){const o=await Pl(this.storage,this.storageKey+"-user");o&&o?.user?(s.user=o.user,await xa(this.storage,this.storageKey+"-user"),await cd(this.storage,this.storageKey,s)):s.user=Hy()}if(this._debug(a,"session from storage",s),!this._isValidSession(s)){this._debug(a,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ly;if(this._debug(a,`session has${i?"":" not"} expired with margin of ${Ly}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Uy(o)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&o?.user?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(a,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(a,"error",s),console.error(s);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var r,a;if(!t)throw new xs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new cg;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new xs;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Mt(i)){const o={data:null,error:i};return Uy(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,a=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await xa(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),a=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&r.user&&await cd(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=ZE(s);await cd(this.storage,this.storageKey,i)}else{const s=ZE(r);await cd(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await xa(this.storage,this.storageKey),await xa(this.storage,this.storageKey+"-code-verifier"),await xa(this.storage,this.storageKey+"-user"),this.userStorage&&await xa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ya()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ld);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((a.expires_at*1e3-t)/ld);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ld}ms, refresh threshold is ${vj} ticks`),s<=vj&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof XI)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ya()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,a){const s=[`provider=${encodeURIComponent(r)}`];if(a?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&s.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,o]=await Xc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(a?.queryParams){const i=new URLSearchParams(a.queryParams);s.push(i.toString())}return a?.skipBrowserRedirect&&s.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var a;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await Xt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=s?.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(Mt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var a,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:u}=await Xt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(a=i?.session)===null||a===void 0?void 0:a.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&d.type==="totp"&&(!((s=d?.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(r){if(Mt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var a;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?LH(t.webauthn.credential_response):BH(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:d}=await Xt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(a=s?.session)===null||a===void 0?void 0:a.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:d}))})}catch(r){if(Mt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var a;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await Xt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(a=s?.session)===null||a===void 0?void 0:a.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:FH(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:$H(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Mt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:a}=await this._challenge({factorId:t.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:a}=await this.getUser();if(a)return{data:null,error:a};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r?.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,a,s,i;if(t)try{const{payload:g}=dm(t);let v=null;g.aal&&(v=g.aal);let y=v;const{data:{user:w},error:k}=await this.getUser(t);if(k)return this._returnResult({data:null,error:k});((a=(r=w?.factors)===null||r===void 0?void 0:r.filter(A=>A.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(y="aal2");const b=g.amr||[];return{data:{currentLevel:v,nextLevel:y,currentAuthenticationMethods:b},error:null}}catch(g){if(Mt(g))return this._returnResult({data:null,error:g});throw g}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=dm(o.access_token);let u=null;d.aal&&(u=d.aal);let f=u;((i=(s=o.user.factors)===null||s===void 0?void 0:s.filter(g=>g.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(f="aal2");const p=d.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:a},error:s}=r;return s?this._returnResult({data:null,error:s}):a?await Xt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:a.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new xs})})}catch(r){if(Mt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async a=>{const{data:{session:s},error:i}=a;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new xs});const o=await Xt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ya()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(a){if(Mt(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(t,r){try{return await this._useSession(async a=>{const{data:{session:s},error:i}=a;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new xs});const o=await Xt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ya()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(a){if(Mt(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;return a?this._returnResult({data:null,error:a}):r?await Xt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new xs})})}catch(t){if(Mt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:a},error:s}=r;return s?this._returnResult({data:null,error:s}):a?(await Xt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new xs})})}catch(r){if(Mt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let a=r.keys.find(l=>l.kid===t);if(a)return a;const s=Date.now();if(a=this.jwks.keys.find(l=>l.kid===t),a&&this.jwks_cached_at+GU>s)return a;const{data:i,error:o}=await Xt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,a=i.keys.find(l=>l.kid===t),!a)?null:a}async getClaims(t,r={}){try{let a=t;if(!a){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});a=g.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:d}}=dm(a);r?.allowExpired||gH(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){const{error:g}=await this.getUser(a);if(g)throw g;return{data:{claims:i,header:s,signature:o},error:null}}const f=xH(s.alg),m=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,m,o,nH(`${l}.${d}`)))throw new jj("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(a){if(Mt(a))return this._returnResult({data:null,error:a});throw a}}}Hh.nextInstanceID={};const YH=Hh,XH="2.93.3";let ch="";typeof Deno<"u"?ch="deno":typeof document<"u"?ch="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ch="react-native":ch="node";const JH={"X-Client-Info":`supabase-js-${ch}/${XH}`},QH={headers:JH},ZH={schema:"public"},eq={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tq={};function qh(e){"@babel/helpers - typeof";return qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qh(e)}function rq(e,t){if(qh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(qh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nq(e){var t=rq(e,"string");return qh(t)=="symbol"?t:t+""}function aq(e,t,r){return(t=nq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function wn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iC(Object(r),!0).forEach(function(a){aq(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}const sq=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),iq=()=>Headers,oq=(e,t,r)=>{const a=sq(r),s=iq();return async(i,o)=>{var l;const d=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o?.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${d}`),a(i,wn(wn({},o),{},{headers:u}))}};function lq(e){return e.endsWith("/")?e:e+"/"}function cq(e,t){var r,a;const{db:s,auth:i,realtime:o,global:l}=e,{db:d,auth:u,realtime:f,global:m}=t,p={db:wn(wn({},d),s),auth:wn(wn({},u),i),realtime:wn(wn({},f),o),storage:{},global:wn(wn(wn({},m),l),{},{headers:wn(wn({},(r=m?.headers)!==null&&r!==void 0?r:{}),(a=l?.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function dq(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(lq(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var uq=class extends YH{constructor(e){super(e)}},hq=class{constructor(e,t,r){var a,s;this.supabaseUrl=e,this.supabaseKey=t;const i=dq(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:ZH,realtime:tq,auth:wn(wn({},eq),{},{storageKey:o}),global:QH},d=cq(r??{},l);if(this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=d.auth)!==null&&u!==void 0?u:{},this.headers,d.global.fetch)}this.fetch=oq(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(wn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new XB(new URL("rest/v1",i).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new qU(this.storageUrl.href,this.headers,this.fetch,r?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new WB(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:a}=await e.auth.getSession();return(t=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,userStorage:s,storageKey:i,flowType:o,lock:l,debug:d,throwOnError:u},f,m){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uq({url:this.authUrl.href,headers:wn(wn({},p),f),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,userStorage:s,flowType:o,lock:l,debug:d,throwOnError:u,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new fU(this.realtimeUrl.href,wn(wn({},e),{},{params:wn(wn({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const fq=(e,t,r)=>new hq(e,t,r);function mq(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}mq()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function tu(){return typeof window<"u"&&!window.__supabaseClient&&(window.__supabaseClient=fq(`https://${ra}.supabase.co`,zn,{auth:{storageKey:`sb-${ra}-auth-token`,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})),window.__supabaseClient}const Qe=`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d`;function Qt(){return tu()}async function gc(){const e=Qt(),{data:{session:t}}=await e.auth.getSession();if(!t)return null;const{data:{session:r},error:a}=await e.auth.refreshSession();return a||!r?(console.warn("Token refresh failed, using existing session:",a?.message||"No session returned"),t):r}let oC=!1;async function it(e,t,r){const a=await fetch(e,{...r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`,...r?.headers}});if(!a.ok){let s="Request failed";try{const i=await a.json();s=i.error||i.message||`HTTP ${a.status}: ${a.statusText}`}catch{s=`HTTP ${a.status}: ${a.statusText}`}throw console.error(`API Error [${e}]:`,s),a.status===401&&!oC&&(oC=!0,console.error("Session expired or invalid. Please log in again."),await Qt().auth.signOut(),sessionStorage.getItem("logout_redirect_in_progress")||(sessionStorage.setItem("logout_redirect_in_progress","true"),setTimeout(()=>{sessionStorage.removeItem("logout_redirect_in_progress"),window.location.reload()},100))),new Error(s)}return a.json()}async function dg(e){return(await it(`${Qe}/inventory`,e)).inventory||[]}async function ZI(e,t){return(await it(`${Qe}/inventory`,e,{method:"POST",body:JSON.stringify(t)})).item}async function eD(e,t,r){return(await it(`${Qe}/inventory/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function tD(e,t){await it(`${Qe}/inventory/${t}`,e,{method:"DELETE"})}async function ru(e){return(await it(`${Qe}/overheads`,e)).overheads||[]}async function rD(e,t){return(await it(`${Qe}/overheads`,e,{method:"POST",body:JSON.stringify(t)})).item}async function nD(e,t,r){return(await it(`${Qe}/overheads/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function aD(e,t){await it(`${Qe}/overheads/${t}`,e,{method:"DELETE"})}async function sD(){const e=Qt(),{data:{session:t}}=await e.auth.getSession();if(!t)throw new Error("Not authenticated");return ru(t.access_token)}async function iD(e){return(await it(`${Qe}/fixed-costs`,e)).fixedCosts||[]}async function oD(e,t){return(await it(`${Qe}/fixed-costs`,e,{method:"POST",body:JSON.stringify(t)})).item}async function lD(e,t,r){return(await it(`${Qe}/fixed-costs/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function cD(e,t){await it(`${Qe}/fixed-costs/${t}`,e,{method:"DELETE"})}async function dD(e){return await it(`${Qe}/cleanup-duplicates`,e,{method:"POST"})}async function pq(e){return await it(`${Qe}/sales/migrate-discrepancy`,e,{method:"POST"})}async function gq(e){return await it(`${Qe}/migrate-stock-request-timestamps`,e,{method:"POST"})}async function xq(e,t,r,a){return await it(`${Qe}/fix-orphaned-store-data`,e,{method:"POST",body:JSON.stringify({targetStoreId:t,dataType:r,recordIds:a})})}async function y2(e){return(await it(`${Qe}/sales`,e)).sales||[]}async function uD(e,t){return(await it(`${Qe}/sales`,e,{method:"POST",body:JSON.stringify(t)})).item}async function hD(e,t,r){return(await it(`${Qe}/sales/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function fD(e,t){return(await it(`${Qe}/sales/${t}/approve`,e,{method:"POST"})).item}async function mD(e,t,r,a){return(await it(`${Qe}/sales/${t}/request-approval`,e,{method:"POST",body:JSON.stringify({requestedCashInHand:r,requestedOffset:a})})).item}async function pD(e,t){return(await it(`${Qe}/sales/${t}/approve-discrepancy`,e,{method:"POST"})).item}async function gD(e,t,r){return(await it(`${Qe}/sales/${t}/reject-discrepancy`,e,{method:"POST",body:JSON.stringify({reason:r})})).item}async function ug(){const e=Qt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/production`,t.access_token)).production||[]}async function xD(e){const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/production`,r.access_token,{method:"POST",body:JSON.stringify(e)})).item}async function yD(e,t){const r=Qt(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/production/${e}`,a.access_token,{method:"PUT",body:JSON.stringify(t)})).item}async function vD(e){const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/production/${e}/approve`,r.access_token,{method:"POST"})).item}async function yq(){const e=Qt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return await it(`${Qe}/production/migrate-notifications`,t.access_token,{method:"POST"})}async function bD(){const e=Qt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return await it(`${Qe}/production/cleanup-duplicates`,t.access_token,{method:"POST"})}async function vq(){const e=Qt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");await it(`${Qe}/clear-data`,t.access_token,{method:"DELETE"})}async function wD(){const e=Qt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return await it(`${Qe}/cleanup-production-data`,t.access_token,{method:"POST"})}async function jD(){const e=Qt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)return[];try{return(await it(`${Qe}/notifications`,t.access_token)).notifications}catch(r){return console.log("Unable to fetch notifications:",r instanceof Error?r.message:"Unknown error"),[]}}async function ND(e){const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/notifications/${e}/read`,r.access_token,{method:"PUT"})).notification}async function kD(){const e=Qt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");await it(`${Qe}/notifications/read-all`,t.access_token,{method:"PUT"})}async function nu(){const e=Qt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/stores`,t.access_token)).stores}async function v2(e,t){const r=Qt(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/stores`,a.access_token,{method:"POST",body:JSON.stringify({name:e,location:t})})).store}async function SD(e,t){const r=Qt(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/stores/${e}/assign-manager`,a.access_token,{method:"PUT",body:JSON.stringify({managerId:t})})).store}async function _D(e,t){const r=Qt(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/stores/${e}/assign-production-house`,a.access_token,{method:"PUT",body:JSON.stringify({productionHouseId:t})})).store}async function ED(e,t,r){const a=Qt(),{data:{session:s}}=await a.auth.getSession();if(!s?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/stores/${e}`,s.access_token,{method:"PUT",body:JSON.stringify({name:t,location:r})})).store}async function CD(e){const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return await it(`${Qe}/stores/${e}/migrate-data`,r.access_token,{method:"POST"})}async function bq(e){return await it(`${Qe}/cleanup-duplicates`,e,{method:"POST"})}async function wq(e){return await it(`${Qe}/migrate-production-house-system`,e,{method:"POST"})}async function Ks(e){if(e)return(await it(`${Qe}/employees`,e)).employees||[];const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/employees`,r.access_token)).employees||[]}async function cl(){return Ks()}async function AD(){const e=Qt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/archived-employees`,t.access_token)).employees||[]}async function TD(e){const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const a=await fetch(`${Qe}/unified-employees`,{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to create employee")}return await a.json()}async function OD(e){const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const a=await fetch(`${Qe}/unified-employees/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"}});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to delete employee")}return await a.json()}async function PD(e){const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const a=await fetch(`${Qe}/employees/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"}});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to delete employee")}return await a.json()}async function ID(e,t){const r=Qt(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");const s=await fetch(`${Qe}/unified-employees/${e}/reset-password`,{method:"POST",headers:{Authorization:`Bearer ${a.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newPassword:t})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to reset password")}return await s.json()}async function nc(e,t){if(t)return(await it(`${Qe}/unified-employees/manager/${e}`,t)).employees||[];const r=Qt(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/unified-employees/manager/${e}`,a.access_token)).employees||[]}async function hg(e){const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/unified-employees/cluster-head/${e}`,r.access_token)).managers||[]}async function DD(){const e=Qt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");const r=await fetch(`${Qe}/migrate-employee-stores`,{method:"POST",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to run migration")}return await r.json()}async function fg(e,t){const r=await gc();if(!r)throw new Error("Not authenticated");const a=await fetch(`${Qe}/assign-manager-to-employee`,{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({employeeId:e,managerId:t})});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to assign manager")}return await a.json()}async function MD(e,t){const r=await gc();if(!r)throw new Error("Not authenticated");const a=await fetch(`${Qe}/employee/${e}/role`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newRole:t})});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to update role")}return await a.json()}async function RD(e,t){const r=await gc();if(!r)throw new Error("Not authenticated");const a=await fetch(`${Qe}/employee/${e}/store`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newStoreId:t})});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to update store")}return await a.json()}async function FD(e,t,r){const a=await gc();if(!a)throw new Error("Not authenticated");const s=await fetch(`${Qe}/employee/${e}/designation`,{method:"PUT",headers:{Authorization:`Bearer ${a.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({designation:t,department:r})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to update designation")}return await s.json()}async function $D(e,t){const r=await gc();if(!r)throw new Error("Not authenticated");const a=await fetch(`${Qe}/employee/${e}/assign-incharge`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({inchargeId:t})});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to assign incharge")}return await a.json()}async function b2(e){const t=await gc();if(!t)throw new Error("Not authenticated");const r=await fetch(`${Qe}/employees/by-incharge/${e}`,{headers:{Authorization:`Bearer ${t.access_token}`}});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to fetch employees")}return await r.json()}async function LD(){const e=Qt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");const r=await fetch(`${Qe}/sync-designations`,{method:"POST",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to sync designations")}return await r.json()}async function mg(e,t){const r=await gc();if(!r)throw new Error("Not authenticated");const a=await fetch(`${Qe}/unified-employees/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to update employee")}return await a.json()}async function il(){const e=Qt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/payouts`,t.access_token)).payouts||[]}async function w2(e){const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/payouts`,r.access_token,{method:"POST",body:JSON.stringify({payouts:e})})).payouts||[]}async function BD(e,t){const r=Qt(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/payouts/${e}`,a.access_token,{method:"PUT",body:JSON.stringify(t)})).payout}async function Hm(e){const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");await it(`${Qe}/payouts/${e}`,r.access_token,{method:"DELETE"})}async function j2(){const e=Qt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/salary-advances`,t.access_token)).salaryAdvances||[]}async function N2(e){const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/salary-advances`,r.access_token,{method:"POST",body:JSON.stringify(e)})).salaryAdvance}async function Nj(e,t){const r=Qt(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/salary-advances/${e}`,a.access_token,{method:"PUT",body:JSON.stringify(t)})).salaryAdvance}async function jq(e){const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");await it(`${Qe}/salary-advances/${e}`,r.access_token,{method:"DELETE"})}async function dh(e,t,r){try{const a=new URLSearchParams;e&&a.append("entityType",e),t&&a.append("entityId",t),r&&a.append("category",r);const s=await fetch(`${Qe}/inventory-items?${a.toString()}`,{headers:{Authorization:`Bearer ${zn}`}});if(!s.ok){const o=await s.text();return console.error(" Error fetching inventory items:",o),[]}return(await s.json()).items||[]}catch(a){return console.error(" Error fetching inventory items:",a),[]}}async function UD(e){const t=await fetch(`${Qe}/inventory-items`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${zn}`},body:JSON.stringify(e)});if(!t.ok){const a=await t.json();throw new Error(a.error||"Failed to create inventory item")}return(await t.json()).item}async function HD(e,t){const r=await fetch(`${Qe}/inventory-items/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${zn}`},body:JSON.stringify(t)});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to update inventory item")}return(await r.json()).item}async function Nq(e){const t=await fetch(`${Qe}/inventory-items/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${zn}`}});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete inventory item")}}async function qD(){const e=await fetch(`${Qe}/inventory-items/initialize-defaults`,{method:"POST",headers:{Authorization:`Bearer ${zn}`}});if(!e.ok){const r=await e.json();throw new Error(r.error||"Failed to initialize default items")}return(await e.json()).items||[]}async function kq(e){const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");await it(`${Qe}/cluster-heads/by-email/${encodeURIComponent(e)}`,r.access_token,{method:"DELETE"})}async function zD(e){const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const a=e?`${Qe}/organizational-hierarchy?storeId=${encodeURIComponent(e)}`:`${Qe}/organizational-hierarchy`,s=await it(a,r.access_token);return{hierarchy:s.hierarchy||[],unassignedManagers:s.unassignedManagers||[],unassignedEmployees:s.unassignedEmployees||[],stats:s.stats||{totalClusterHeads:0,totalManagers:0,totalEmployees:0}}}async function zh(e){const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/timesheets/${e}`,r.access_token)).timesheets||[]}async function au(e,t){if(t)return(await it(`${Qe}/leaves/${e}`,t)).leaves||[];const r=Qt(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/leaves/${e}`,a.access_token)).leaves||[]}async function WD(e){if(e)return(await it(`${Qe}/leaves/all`,e)).leaves||[];const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/leaves/all`,r.access_token)).leaves||[]}async function KD(e){const t=Qt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/leaves`,r.access_token,{method:"POST",body:JSON.stringify(e)})).leave}async function VD(e,t){const r=Qt(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/leaves/${e}/balance?joiningDate=${t}`,a.access_token)).balance||0}async function kj(e,t,r){const a=Qt(),{data:{session:s}}=await a.auth.getSession();if(!s?.access_token)throw new Error("Not authenticated");await it(`${Qe}/leaves/${e}/approve`,s.access_token,{method:"POST",body:JSON.stringify({managerId:t,managerName:r})})}async function GD(e,t,r,a){const s=Qt(),{data:{session:i}}=await s.auth.getSession();if(!i?.access_token)throw new Error("Not authenticated");await it(`${Qe}/leaves/${e}/reject`,i.access_token,{method:"POST",body:JSON.stringify({managerId:t,managerName:r,reason:a})})}async function YD(){try{const e=await fetch(`${Qe}/custom-items`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${zn}`}});return e.ok?(await e.json()).customItems||[]:(console.error("Failed to fetch custom items:",e.status,e.statusText),[])}catch(e){return console.error("Error fetching custom items:",e),[]}}async function XD(e,t){const r=Qt(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/custom-items`,a.access_token,{method:"POST",body:JSON.stringify({category:e,itemName:t})})).customItem}async function pg(e){return(await it(`${Qe}/production-requests`,e)).requests||[]}async function k2(e,t){return(await it(`${Qe}/production-requests`,e,{method:"POST",body:JSON.stringify(t)})).request}async function JD(e,t,r,a){return(await it(`${Qe}/production-requests/${t}/status`,e,{method:"PUT",body:JSON.stringify({status:r,updatedBy:a})})).request}async function QD(e,t,r,a,s){return(await it(`${Qe}/production-requests/${t}/ship`,e,{method:"PUT",body:JSON.stringify({shippedQuantities:r,shippingNotes:a,shippedBy:s})})).request}async function ZD(e){return await it(`${Qe}/production-requests/check-pending`,e,{method:"POST"})}async function gg(e){return await it(`${Qe}/sales-data`,e)}async function e5(e,t){return(await it(`${Qe}/sales-data`,t,{method:"POST",body:JSON.stringify(e)})).record}async function t5(e,t){await it(`${Qe}/sales-data/${e}`,t,{method:"DELETE"})}async function Wh(){const e=Qt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await it(`${Qe}/production-houses`,t.access_token)).productionHouses||[]}async function r5(e,t){return(await it(`${Qe}/production-houses`,e,{method:"POST",body:JSON.stringify(t)})).productionHouse}async function n5(e,t,r){return(await it(`${Qe}/production-houses/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).productionHouse}async function a5(e,t,r){return(await it(`${Qe}/production-houses/${t}/inventory`,e,{method:"PUT",body:JSON.stringify({inventory:r})})).productionHouse}async function s5(e,t,r){return(await it(`${Qe}/production-houses/${t}/assign-head`,e,{method:"PUT",body:JSON.stringify({productionHeadId:r})})).productionHouse}async function i5(e,t,r){return(await it(`${Qe}/stores/${t}/assign-production-house`,e,{method:"PUT",body:JSON.stringify({productionHouseId:r})})).store}async function o5(e,t,r){return await it(`${Qe}/production-houses/${t}/fix-records`,e,{method:"POST",body:JSON.stringify({oldStoreId:r})})}async function l5(e,t){await it(`${Qe}/production-houses/${t}`,e,{method:"DELETE"})}async function c5(e,t,r,a){const s=await it(`${Qe}/production-houses/transfer-inventory`,e,{method:"POST",body:JSON.stringify({fromHouseId:t,toHouseId:r,quantities:a})});return{fromHouse:s.fromHouse,toHouse:s.toHouse}}async function d5(e){return(await it(`${Qe}/stock-requests`,e)).stockRequests||[]}async function u5(e,t){return(await it(`${Qe}/stock-requests`,e,{method:"POST",body:JSON.stringify(t)})).stockRequest}async function h5(e,t,r,a,s,i){return(await it(`${Qe}/stock-requests/${t}/fulfill`,e,{method:"PUT",body:JSON.stringify({fulfilledQuantities:r,fulfilledBy:a,fulfilledByName:s,notes:i})})).stockRequest}async function f5(e,t){return(await it(`${Qe}/stock-requests/${t}/cancel`,e,{method:"PUT"})).stockRequest}async function Sq(e){return await it(`${Qe}/fix-stock-requests`,e,{method:"POST"})}async function m5(e,t){return await it(`${Qe}/stock-recalibration`,e,{method:"POST",body:JSON.stringify(t)})}async function el(e,t,r){const a=new Date().getTime(),s=r?`${Qe}/stock-recalibration/latest/${t}?locationType=${r}&_t=${a}`:`${Qe}/stock-recalibration/latest/${t}?_t=${a}`;return await it(s,e)}const Sj=el;async function qm(e,t,r){const a=r?`${Qe}/stock-recalibration/history/${t}?locationType=${r}`:`${Qe}/stock-recalibration/history/${t}`;return await it(a,e)}async function p5(e){return await it(`${Qe}/stock-recalibration/pending-approval`,e)}async function g5(e,t){return await it(`${Qe}/stock-recalibration/${t}/approve`,e,{method:"POST"})}async function x5(e,t,r){return await it(`${Qe}/stock-recalibration/${t}/reject`,e,{method:"POST",body:JSON.stringify({reason:r})})}async function y5(e,t){return(await it(`${Qe}/stock-thresholds/${t}`,e)).thresholds}async function v5(e,t,r){return await it(`${Qe}/stock-thresholds/${t}`,e,{method:"POST",body:JSON.stringify({thresholds:r})})}async function b5(e,t,r,a){let s=`${Qe}/stock-recalibration/wastage-report?month=${t}`;return r&&(s+=`&locationId=${r}`),a&&(s+=`&locationType=${a}`),await it(s,e)}async function w5(e){return await it(`${Qe}/cluster/info`,e)}async function j5(e,t,r,a){return await it(`${Qe}/cluster/update-assignments`,e,{method:"POST",body:JSON.stringify({employeeId:t,managedStoreIds:r,managedProductionHouseIds:a})})}async function N5(e){return await it(`${Qe}/cluster/all-cluster-heads`,e)}const _q=Object.freeze(Object.defineProperty({__proto__:null,addCustomItem:XD,addFixedCost:oD,addInventory:ZI,addInventoryItem:UD,addOverhead:rD,addPayouts:w2,addProductionData:xD,addSalesData:uD,applyLeave:KD,approveDiscrepancy:pD,approveLeave:kj,approveProductionData:vD,approveRecalibration:g5,approveSalesData:fD,assignInchargeToEmployee:$D,assignManagerToEmployee:fg,assignManagerToStore:SD,assignProductionHeadToHouse:s5,assignProductionHouseToStore:_D,assignStoreToProductionHouse:i5,cancelStockRequest:f5,checkPendingProductionRequests:ZD,cleanDuplicates:bq,cleanupDuplicateProduction:bD,cleanupDuplicates:dD,cleanupProductionData:wD,clearAllData:vq,createProductionHouse:r5,createProductionRequest:k2,createSalaryAdvance:N2,createStockRequest:u5,createStore:v2,createUnifiedEmployee:TD,deleteClusterHeadByEmail:kq,deleteEmployee:PD,deleteFixedCost:cD,deleteInventory:tD,deleteInventoryItem:Nq,deleteOverhead:aD,deletePayout:Hm,deleteProductionHouse:l5,deleteSalaryAdvance:jq,deleteSalesData:t5,deleteUnifiedEmployee:OD,fetchFixedCosts:iD,fetchInventory:dg,fetchInventoryItems:dh,fetchLatestRecalibration:Sj,fetchOverheads:ru,fetchProductionData:ug,fetchProductionRequests:pg,fetchSalesData:y2,fixOrphanedStoreData:xq,fixProductionRecords:o5,fixStockRequests:Sq,fulfillStockRequest:h5,getAllClusterHeads:N5,getAllEmployees:Ks,getAllLeaves:WD,getAllRecalibrationsForApproval:p5,getArchivedEmployees:AD,getClusterInfo:w5,getCustomItems:YD,getEmployees:cl,getEmployeesByIncharge:b2,getEmployeesByManager:nc,getLastRecalibration:el,getLeaveBalance:VD,getLeaves:au,getManagersByClusterHead:hg,getMonthlyWastageReport:b5,getNotifications:jD,getOrganizationalHierarchy:zD,getOverheads:sD,getPayouts:il,getProductionHouses:Wh,getRecalibrationHistory:qm,getSalaryAdvances:j2,getSalesData:gg,getStockRequests:d5,getStockThresholds:y5,getStores:nu,getTimesheets:zh,initializeDefaultInventoryItems:qD,markAllNotificationsAsRead:kD,markNotificationAsRead:ND,migrateDataToStore:CD,migrateEmployeeStores:DD,migrateProductionHouseSystem:wq,migrateProductionNotifications:yq,migrateSalesDiscrepancy:pq,migrateStockRequestTimestamps:gq,rejectDiscrepancy:gD,rejectLeave:GD,rejectRecalibration:x5,requestSalesApproval:mD,resetEmployeePassword:ID,saveSalesData:e5,saveStockThresholds:v5,shipProductionRequest:QD,submitStockRecalibration:m5,syncDesignations:LD,transferInventoryBetweenHouses:c5,updateClusterAssignments:j5,updateEmployeeDesignation:FD,updateEmployeeRole:MD,updateEmployeeStore:RD,updateFixedCost:lD,updateInventory:eD,updateInventoryItem:HD,updateOverhead:nD,updatePayout:BD,updateProductionData:yD,updateProductionHouse:n5,updateProductionHouseInventory:a5,updateProductionRequestStatus:JD,updateSalaryAdvance:Nj,updateSalesData:hD,updateStore:ED,updateUnifiedEmployee:mg},Symbol.toStringTag,{value:"Module"}));function Eq({selectedDate:e,editingItem:t,onSubmit:r,onClose:a,onSuccess:s}){const[i,o]=M.useState({category:t?.category||"fresh_produce",itemName:t?.itemName||"",customItem:t?!AE[t.category].includes(t.itemName):!1,quantity:t?.quantity.toString()||"",unit:t?.unit||"kg",totalCost:t?.totalCost.toString()||"",paymentMethod:t?.paymentMethod||"cash",cashAmount:t?.cashAmount?.toString()||"",onlineAmount:t?.onlineAmount?.toString()||""}),[l,d]=M.useState({}),[u,f]=M.useState(!0),[m,p]=M.useState(!1),[g,v]=M.useState(""),[y,w]=M.useState(!1),k=M.useRef(null);M.useEffect(()=>{N()},[]),M.useEffect(()=>{const _=C=>{k.current&&!k.current.contains(C.target)&&w(!1)};return y&&document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[y]);const N=async()=>{try{const _=await YD(),C={};_.forEach(P=>{C[P.category]||(C[P.category]=[]),C[P.category].push(P.itemName)}),d(C)}catch(_){console.log("Could not load custom items:",_)}finally{f(!1)}},b=()=>{o({category:i.category,itemName:"",customItem:!1,quantity:"",unit:"kg",totalCost:"",paymentMethod:"cash",cashAmount:"",onlineAmount:""}),v("")},A=async _=>{if(_.preventDefault(),m){console.log(" Submission already in progress, ignoring duplicate request");return}if(!i.itemName||i.itemName.trim()===""){alert(" Please select an item name before submitting!"),console.error(" Attempted to submit inventory item without itemName:",i);return}if(i.paymentMethod==="both"){const V=parseFloat(i.cashAmount)||0,J=parseFloat(i.onlineAmount)||0,ae=parseFloat(i.totalCost)||0;if(Math.abs(V+J-ae)>.01){alert(` Split payment amounts (${V.toFixed(2)} + ${J.toFixed(2)} = ${(V+J).toFixed(2)}) must equal total cost (${ae.toFixed(2)})`);return}}p(!0);const C=parseFloat(i.quantity),P=parseFloat(i.totalCost),B=C>0?P/C:0,F=Math.round(C*100)/100,O=Math.round(P*100)/100,R=Math.round(B*100)/100;if(console.log(" Submitting inventory item:",{itemName:i.itemName,quantity:F,totalCost:O,costPerUnit:R,paymentMethod:i.paymentMethod}),i.customItem&&i.itemName)try{await XD(i.category,i.itemName),console.log("Custom item saved:",i.itemName),await N()}catch(V){console.error("Error saving custom item:",V)}let Q={paymentMethod:i.paymentMethod};if(i.paymentMethod==="both"){const V=parseFloat(i.cashAmount)||0,J=parseFloat(i.onlineAmount)||0;Q.cashAmount=Math.round(V*100)/100,Q.onlineAmount=Math.round(J*100)/100}else i.paymentMethod==="online"?(Q.onlineAmount=O,Q.cashAmount=0):i.paymentMethod==="cash"&&(Q.cashAmount=O,Q.onlineAmount=0);console.log(" Payment data being sent:",Q),await r({date:e,category:i.category,itemName:i.itemName,quantity:F,unit:i.unit,costPerUnit:R,totalCost:O,...Q}),p(!1),t||b(),s&&s()},E=[...new Set([...AE[i.category],...l[i.category]||[]])].sort((_,C)=>_.localeCompare(C)),S=g.trim()?E.filter(_=>_.toLowerCase().includes(g.toLowerCase())):E;return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-gray-900",children:[t?"Edit":"Add"," Inventory Item"]}),n.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Kr,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:A,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),n.jsx("select",{value:i.category,onChange:_=>{o({...i,category:_.target.value,itemName:"",customItem:!1}),v("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:Object.entries(sg).map(([_,C])=>n.jsx("option",{value:_,children:C},_))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Item Name"}),i.customItem?n.jsxs("div",{className:"space-y-2",children:[n.jsx("input",{type:"text",value:i.itemName,onChange:_=>o({...i,itemName:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Enter custom item name",required:!0}),n.jsx("button",{type:"button",onClick:()=>{o({...i,customItem:!1,itemName:""}),v("")},className:"text-sm text-blue-600 hover:text-blue-700",children:" Back to list"})]}):n.jsxs("div",{className:"relative space-y-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(RI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",value:g,onChange:_=>{v(_.target.value),w(!0)},onFocus:()=>w(!0),placeholder:i.itemName||"Search items...",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),i.itemName&&!g&&n.jsx("div",{className:"absolute inset-y-0 left-10 right-10 flex items-center pointer-events-none",children:n.jsx("span",{className:"text-gray-900",children:i.itemName})}),n.jsx(Uf,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 cursor-pointer",onClick:()=>w(!y)})]}),y&&n.jsxs("div",{ref:k,className:"absolute z-20 left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[S.length===0&&g?n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"}):S.map(_=>n.jsx("div",{onClick:()=>{o({...i,itemName:_}),v(""),w(!1)},className:`px-3 py-2 cursor-pointer hover:bg-blue-50 transition-colors ${i.itemName===_?"bg-blue-100 font-medium":""}`,children:_},_)),n.jsx("div",{onClick:()=>{o({...i,customItem:!0,itemName:""}),v(""),w(!1)},className:"px-3 py-2 cursor-pointer hover:bg-blue-50 transition-colors border-t border-gray-200 text-blue-600 font-medium",children:"+ Add Custom Item"})]}),g&&!y&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Showing ",S.length," of ",E.length," items"]}),n.jsx("input",{type:"hidden",value:i.itemName,required:!0})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",step:"0.01",value:i.quantity,onChange:_=>o({...i,quantity:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Unit"}),n.jsxs("select",{value:i.unit,onChange:_=>o({...i,unit:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[n.jsx("option",{value:"kg",children:"kg"}),n.jsx("option",{value:"g",children:"g"}),n.jsx("option",{value:"L",children:"L"}),n.jsx("option",{value:"mL",children:"mL"}),n.jsx("option",{value:"pcs",children:"pcs"}),n.jsx("option",{value:"units",children:"units"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Total Cost ()"}),n.jsx("input",{type:"number",step:"0.01",value:i.totalCost,onChange:_=>o({...i,totalCost:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Payment Method"}),n.jsxs("select",{value:i.paymentMethod,onChange:_=>{const C=_.target.value;o({...i,paymentMethod:C,cashAmount:C==="both"?i.cashAmount:"",onlineAmount:C==="both"?i.onlineAmount:""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",required:!0,children:[n.jsx("option",{value:"cash",children:"Cash in Hand "}),n.jsx("option",{value:"online",children:"Online / Paytm "}),n.jsx("option",{value:"both",children:"Split Payment (Both) "})]})]}),i.paymentMethod==="both"&&n.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 space-y-3",children:[n.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Split Payment Details"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-blue-900 mb-1",children:"Cash Amount ()"}),n.jsx("input",{type:"number",step:"0.01",value:i.cashAmount,onChange:_=>o({...i,cashAmount:_.target.value}),className:"w-full px-3 py-2 border border-blue-300 rounded-lg",placeholder:"0.00",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-blue-900 mb-1",children:"Online Amount ()"}),n.jsx("input",{type:"number",step:"0.01",value:i.onlineAmount,onChange:_=>o({...i,onlineAmount:_.target.value}),className:"w-full px-3 py-2 border border-blue-300 rounded-lg",placeholder:"0.00",required:!0})]})]}),i.cashAmount&&i.onlineAmount&&i.totalCost&&n.jsx("div",{className:"text-xs",children:parseFloat(i.cashAmount)+parseFloat(i.onlineAmount)===parseFloat(i.totalCost)?n.jsx("p",{className:"text-green-700 font-semibold",children:" Split amounts match total cost"}):n.jsxs("p",{className:"text-red-700 font-semibold",children:[" Split total: ",(parseFloat(i.cashAmount)+parseFloat(i.onlineAmount)).toFixed(2),"(Total Cost: ",parseFloat(i.totalCost).toFixed(2),")"]})})]}),i.quantity&&i.totalCost&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Cost per Unit"}),n.jsxs("p",{className:"text-gray-900",children:["",(parseFloat(i.totalCost)/parseFloat(i.quantity)).toFixed(2)]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:m,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:m,children:[m&&n.jsx(pc,{className:"w-4 h-4 animate-spin"}),m?"Saving...":t?"Update Item":"Add Item"]})]})]})]})})}const Cq=[{value:"fuel",label:" Fuel Cost"},{value:"travel",label:" Travel by Employee"},{value:"transportation",label:" Goods Transportation Cost"},{value:"marketing",label:" Marketing Cost"},{value:"service_charge",label:" Service Charge (Food Aggregators)"},{value:"repair",label:" Repair Cost"},{value:"party",label:" Party Cost"},{value:"lunch",label:" Lunch Cost"},{value:"emergency_online",label:" Emergency Online Order (Blinkit)"},{value:"personal_expense",label:" Personal Expense By an Employee"},{value:"utensils",label:" Utensils"},{value:"equipments",label:" Equipments"},{value:"miscellaneous",label:" Miscellaneous Cost"}];function Aq({selectedDate:e,onSubmit:t,onClose:r,editingItem:a,employees:s}){const[i,o]=M.useState({category:a?a.category:"fuel",description:a?a.description:"",amount:a?a.amount.toString():"",employeeId:a?.employeeId||"",employeeName:a?.employeeName||"",paymentMethod:a?.paymentMethod||"cash",cashAmount:a?.cashAmount?a.cashAmount.toString():"",onlineAmount:a?.onlineAmount?a.onlineAmount.toString():""}),[l,d]=M.useState(!1),u=parseFloat(i.amount||"0");M.useEffect(()=>{if(i.paymentMethod==="both"&&u>0&&!i.cashAmount&&!i.onlineAmount){const p=(u/2).toFixed(2);o(g=>({...g,cashAmount:p,onlineAmount:p}))}},[i.paymentMethod,u]),M.useEffect(()=>{if(i.category==="personal_expense"&&i.employeeId){const p=s.find(g=>g.employeeId===i.employeeId);p&&o(g=>({...g,employeeName:p.name}))}},[i.employeeId,i.category,s]);const f=()=>{if(i.paymentMethod!=="both")return!0;const p=parseFloat(i.cashAmount||"0"),g=parseFloat(i.onlineAmount||"0");return Math.abs(p+g-u)<.01},m=async p=>{if(p.preventDefault(),l){console.log(" Submission already in progress, ignoring duplicate request");return}if(!f()){alert("Cash and Online amounts must add up to the total amount!");return}d(!0);const g={date:e,category:i.category,description:i.description,amount:parseFloat(i.amount),paymentMethod:i.paymentMethod};i.category==="personal_expense"&&(g.employeeId=i.employeeId,g.employeeName=i.employeeName);let v={paymentMethod:i.paymentMethod};i.paymentMethod==="both"?(v.cashAmount=parseFloat(i.cashAmount),v.onlineAmount=parseFloat(i.onlineAmount)):i.paymentMethod==="online"?(v.onlineAmount=parseFloat(i.amount),v.cashAmount=0):i.paymentMethod==="cash"&&(v.cashAmount=parseFloat(i.amount),v.onlineAmount=0);const y={...g,...v};console.log(" Overhead payment data being sent:",v),await t(y),d(!1)};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-gray-900",children:[a?"Edit":"Add"," Overhead Cost"]}),n.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Kr,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:m,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),n.jsx("select",{value:i.category,onChange:p=>o({...i,category:p.target.value,employeeId:"",employeeName:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:Cq.map(p=>n.jsx("option",{value:p.value,children:p.label},p.value))})]}),i.category==="personal_expense"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Employee ID"}),n.jsxs("select",{value:i.employeeId,onChange:p=>o({...i,employeeId:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[n.jsx("option",{value:"",children:"Select Employee"}),s.map(p=>n.jsx("option",{value:p.employeeId,children:p.employeeId},p.id))]})]}),i.employeeId&&i.employeeName&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Employee Name"}),n.jsx("input",{type:"text",value:i.employeeName,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Expense Description"}),n.jsx("textarea",{value:i.description,onChange:p=>o({...i,description:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:"What was the expense for?",required:!0})]})]}),i.category!=="personal_expense"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{value:i.description,onChange:p=>o({...i,description:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Amount ()"}),n.jsx("input",{type:"number",step:"0.01",value:i.amount,onChange:p=>o({...i,amount:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:i.paymentMethod==="cash",onChange:p=>o({...i,paymentMethod:"cash"}),className:"w-4 h-4 text-orange-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-gray-900",children:" Cash in Hand"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Will reduce Expected Cash in Hand"})]})]}),n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:i.paymentMethod==="online",onChange:p=>o({...i,paymentMethod:"online"}),className:"w-4 h-4 text-orange-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-gray-900",children:" Online Cash (Paytm)"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Will reduce Online Cash in Hand (Paytm)"})]})]}),n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"both",checked:i.paymentMethod==="both",onChange:p=>o({...i,paymentMethod:"both"}),className:"w-4 h-4 text-orange-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-gray-900",children:" Both (Split Payment)"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Paid using both Cash and Online"})]})]})]})]}),i.paymentMethod==="both"&&u>0&&n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 space-y-3",children:[n.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Split Payment Details"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash Amount ()"}),n.jsx("input",{type:"number",step:"0.01",min:"0",max:u,value:i.cashAmount,onChange:p=>{const g=parseFloat(p.target.value||"0");o({...i,cashAmount:p.target.value,onlineAmount:(u-g).toFixed(2)})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Online Amount ()"}),n.jsx("input",{type:"number",step:"0.01",min:"0",max:u,value:i.onlineAmount,onChange:p=>{const g=parseFloat(p.target.value||"0");o({...i,onlineAmount:p.target.value,cashAmount:(u-g).toFixed(2)})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-purple-300",children:[n.jsx("span",{className:"text-gray-700",children:"Total:"}),n.jsxs("span",{className:`font-medium ${f()?"text-green-600":"text-red-600"}`,children:["",(parseFloat(i.cashAmount||"0")+parseFloat(i.onlineAmount||"0")).toFixed(2)," / ",u.toFixed(2)]})]}),!f()&&n.jsxs("p",{className:"text-xs text-red-600",children:[" Amounts must add up to ",u.toFixed(2)]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:l,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:l,children:[l&&n.jsx(pc,{className:"w-4 h-4 animate-spin"}),l?"Saving...":a?"Update Overhead":"Add Overhead"]})]})]})]})})}function Tq({selectedDate:e,onSubmit:t,onClose:r,editingItem:a}){const[s,i]=M.useState({category:a?a.category:"electricity",description:a?a.description:"",amount:a?a.amount.toString():"",units:a?.units?a.units.toString():"",unitPrice:a?.unitPrice?a.unitPrice.toString():"",paymentMethod:a?.paymentMethod||"cash",cashAmount:a?.cashAmount?a.cashAmount.toString():"",onlineAmount:a?.onlineAmount?a.onlineAmount.toString():""}),[o,l]=M.useState(!1),d=s.category==="lpg_gas"&&s.units&&s.unitPrice?parseFloat(s.units)*parseFloat(s.unitPrice):parseFloat(s.amount||"0");M.useEffect(()=>{if(s.paymentMethod==="both"&&d>0&&!s.cashAmount&&!s.onlineAmount){const m=(d/2).toFixed(2);i(p=>({...p,cashAmount:m,onlineAmount:m}))}},[s.paymentMethod,d]);const u=()=>{if(s.paymentMethod!=="both")return!0;const m=parseFloat(s.cashAmount||"0"),p=parseFloat(s.onlineAmount||"0");return Math.abs(m+p-d)<.01},f=m=>{if(m.preventDefault(),!u()){alert("Cash and Online amounts must add up to the total amount!");return}const p=s.category==="lpg_gas"?parseFloat(s.units)*parseFloat(s.unitPrice):parseFloat(s.amount),g={date:e,category:s.category,description:s.description,amount:p,paymentMethod:s.paymentMethod};s.category==="lpg_gas"&&(g.units=parseFloat(s.units),g.unitPrice=parseFloat(s.unitPrice)),s.paymentMethod==="both"?(g.cashAmount=parseFloat(s.cashAmount),g.onlineAmount=parseFloat(s.onlineAmount)):s.paymentMethod==="online"?(g.onlineAmount=p,g.cashAmount=0):s.paymentMethod==="cash"&&(g.cashAmount=p,g.onlineAmount=0),console.log(" Fixed cost payment data being sent:",{paymentMethod:g.paymentMethod,cashAmount:g.cashAmount,onlineAmount:g.onlineAmount}),l(!0),t(g).finally(()=>l(!1))};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-gray-900",children:[a?"Edit":"Add"," Fixed Cost"]}),n.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Kr,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:f,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),n.jsx("select",{value:s.category,onChange:m=>i({...s,category:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:Object.entries(h2).map(([m,p])=>n.jsx("option",{value:m,children:p},m))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{value:s.description,onChange:m=>i({...s,description:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:s.category==="lpg_gas"?"e.g., Commercial LPG cylinder purchase":"e.g., Monthly electricity bill, Store rent for December",required:!0})]}),s.category==="lpg_gas"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Number of Cylinders"}),n.jsx("input",{type:"number",step:"1",min:"1",value:s.units,onChange:m=>i({...s,units:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 2",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Price per Cylinder ()"}),n.jsx("input",{type:"number",step:"0.01",value:s.unitPrice,onChange:m=>i({...s,unitPrice:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 1450.00",required:!0})]}),s.units&&s.unitPrice&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-sm text-blue-900",children:[n.jsx("strong",{children:"Total Amount:"})," ",d.toFixed(2)]})})]}):n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Amount ()"}),n.jsx("input",{type:"number",step:"0.01",value:s.amount,onChange:m=>i({...s,amount:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:s.paymentMethod==="cash",onChange:m=>i({...s,paymentMethod:"cash"}),className:"w-4 h-4 text-green-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-gray-900",children:" Cash in Hand"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Will reduce Expected Cash in Hand"})]})]}),n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:s.paymentMethod==="online",onChange:m=>i({...s,paymentMethod:"online"}),className:"w-4 h-4 text-green-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-gray-900",children:" Online Cash (Paytm)"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Will reduce Online Cash in Hand (Paytm)"})]})]}),n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"both",checked:s.paymentMethod==="both",onChange:m=>i({...s,paymentMethod:"both"}),className:"w-4 h-4 text-green-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-gray-900",children:" Both (Split Payment)"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Paid using both Cash and Online"})]})]})]})]}),s.paymentMethod==="both"&&d>0&&n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 space-y-3",children:[n.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Split Payment Details"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash Amount ()"}),n.jsx("input",{type:"number",step:"0.01",min:"0",max:d,value:s.cashAmount,onChange:m=>{const p=parseFloat(m.target.value||"0");i({...s,cashAmount:m.target.value,onlineAmount:(d-p).toFixed(2)})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Online Amount ()"}),n.jsx("input",{type:"number",step:"0.01",min:"0",max:d,value:s.onlineAmount,onChange:m=>{const p=parseFloat(m.target.value||"0");i({...s,onlineAmount:m.target.value,cashAmount:(d-p).toFixed(2)})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-purple-300",children:[n.jsx("span",{className:"text-gray-700",children:"Total:"}),n.jsxs("span",{className:`font-medium ${u()?"text-green-600":"text-red-600"}`,children:["",(parseFloat(s.cashAmount||"0")+parseFloat(s.onlineAmount||"0")).toFixed(2)," / ",d.toFixed(2)]})]}),!u()&&n.jsxs("p",{className:"text-xs text-red-600",children:[" Amounts must add up to ",d.toFixed(2)]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:o,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:o,children:[o&&n.jsx(pc,{className:"w-4 h-4 animate-spin"}),o?"Saving...":a?"Update Fixed Cost":"Add Fixed Cost"]})]})]})]})})}function Oq({inventory:e,overheads:t,fixedCosts:r,onEditInventory:a,onDeleteInventory:s,onEditOverhead:i,onDeleteOverhead:o,onEditFixedCost:l,onDeleteFixedCost:d,isManager:u=!0}){const[f,m]=M.useState(null),[p,g]=M.useState(!1),v=k=>{const N=Math.round(k*100)/100;return N%1===0?N.toString():N.toFixed(2)},y=e.reduce((k,N)=>(k[N.category]||(k[N.category]=[]),k[N.category].push(N),k),{}),w=(k,N)=>{g(!0),k==="inventory"?s(N):k==="overhead"?o(N):d(N),m(null),g(!1)};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(rr,{className:"w-5 h-5 text-blue-600"}),n.jsx("h3",{className:"text-gray-900",children:"Inventory Items"})]}),e.length===0?n.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No inventory items for this date"}):n.jsx("div",{className:"space-y-6",children:Object.entries(y).map(([k,N])=>n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm text-gray-700 mb-3",children:sg[k]}),n.jsx("div",{className:"space-y-2",children:N.map(b=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors group",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-gray-900",children:b.itemName})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-blue-600",children:["",b.totalCost.toLocaleString()]}),u&&n.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{onClick:()=>a(b),className:"p-1.5 hover:bg-blue-50 rounded text-blue-600 transition-colors",title:"Edit",children:n.jsx(Pi,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>m({type:"inventory",id:b.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:n.jsx(ls,{className:"w-4 h-4"})})]})]})]}),n.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[n.jsxs("span",{children:[v(b.quantity||0)," ",b.unit]}),n.jsxs("span",{children:["",v(b.costPerUnit||0),"/",b.unit]}),b.paymentMethod&&n.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${b.paymentMethod==="cash"?"bg-green-100 text-green-800":b.paymentMethod==="online"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:b.paymentMethod==="cash"?" Cash":b.paymentMethod==="online"?" Online":` Split (${v(b.cashAmount||0)} + ${v(b.onlineAmount||0)})`})]})]},b.id))})]},k))})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(aB,{className:"w-5 h-5 text-orange-600"}),n.jsx("h3",{className:"text-gray-900",children:"Overhead Costs"})]}),t.length===0?n.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No overhead costs for this date"}):n.jsx("div",{className:"space-y-3",children:t.map(k=>n.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-orange-300 transition-colors group",children:n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-gray-900",children:u2[k.category]}),k.category==="personal_expense"&&k.employeeId&&k.employeeName&&n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Employee: ",k.employeeName," (ID: ",k.employeeId,")"]}),n.jsx("p",{className:"text-sm text-gray-500",children:k.description}),k.paymentMethod&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[k.paymentMethod==="cash"&&n.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:" Paid via Cash"}),k.paymentMethod==="online"&&n.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:" Paid via Paytm"}),k.paymentMethod==="both"&&n.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:[" Cash: ",k.cashAmount?.toLocaleString()]}),n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:[" Paytm: ",k.onlineAmount?.toLocaleString()]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-orange-600",children:["",k.amount.toLocaleString()]}),u&&n.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{onClick:()=>i(k),className:"p-1.5 hover:bg-orange-50 rounded text-orange-600 transition-colors",title:"Edit",children:n.jsx(Pi,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>m({type:"overhead",id:k.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:n.jsx(ls,{className:"w-4 h-4"})})]})]})]})},k.id))})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(co,{className:"w-5 h-5 text-green-600"}),n.jsx("h3",{className:"text-gray-900",children:"Fixed Costs"})]}),r.length===0?n.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No fixed costs for this date"}):n.jsx("div",{className:"space-y-3",children:r.map(k=>n.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-green-300 transition-colors group",children:n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-gray-900",children:h2[k.category]}),n.jsx("p",{className:"text-sm text-gray-500",children:k.description}),k.category==="lpg_gas"&&k.units&&k.unitPrice&&n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[k.units," cylinder",k.units>1?"s":"","  ",k.unitPrice.toLocaleString()]}),k.paymentMethod&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[k.paymentMethod==="cash"&&n.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:" Paid via Cash"}),k.paymentMethod==="online"&&n.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:" Paid via Paytm"}),k.paymentMethod==="both"&&n.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:[" Cash: ",k.cashAmount?.toLocaleString()]}),n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:[" Paytm: ",k.onlineAmount?.toLocaleString()]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-green-600",children:["",k.amount.toLocaleString()]}),u&&n.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{onClick:()=>l(k),className:"p-1.5 hover:bg-green-50 rounded text-green-600 transition-colors",title:"Edit",children:n.jsx(Pi,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>m({type:"fixedcost",id:k.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:n.jsx(ls,{className:"w-4 h-4"})})]})]})]})},k.id))})]})]}),f&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[n.jsx("h3",{className:"text-gray-900 mb-4",children:"Confirm Delete"}),n.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete this ",f.type==="inventory"?"inventory item":f.type==="overhead"?"overhead cost":"fixed cost","? This action cannot be undone."]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>m(null),disabled:p,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsxs("button",{onClick:()=>w(f.type,f.id),disabled:p,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[p&&n.jsx(pc,{className:"w-4 h-4 animate-spin"}),p?"Deleting...":"Delete"]})]})]})})]})}const Pq=5,Iq=30,k5=(Pq*60+Iq)*60*1e3;function Dq(){const e=new Date;return new Date(e.getTime()+k5).toISOString()}function os(){return Dq().substring(0,10)}function S2(e,t=!0){if(!e)return"Invalid Date";try{const r=t?new Date(new Date(e).getTime()+k5):new Date(e);if(isNaN(r.getTime()))return"Invalid Date";const a=r.getUTCDate(),s=r.toLocaleString("en-US",{month:"short",timeZone:"UTC"}),i=r.getUTCFullYear();let o=r.getUTCHours();const l=r.getUTCMinutes(),d=o>=12?"PM":"AM";o=o%12||12;const u=l.toString().padStart(2,"0");return`${a} ${s} ${i}, ${o}:${u} ${d} IST`}catch{return"Invalid Date"}}function ta(e){if(!e)return"Invalid Date";const t=e.substring(0,10),[r,a,s]=t.split("-").map(Number);if(!r||!a||!s||isNaN(r)||isNaN(a)||isNaN(s))return"Invalid Date";const o=new Date(Date.UTC(r,a-1,s)).toLocaleString("en-US",{month:"short",timeZone:"UTC"});return`${s} ${o} ${r}`}const xg=M.memo(function({selectedDate:t,onDateChange:r}){const[a,s]=M.useState(0),[i,o]=M.useState(!1);M.useEffect(()=>{const m=()=>{o(window.innerWidth<768)};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);const l=M.useMemo(()=>{const m=os(),p=new Date(m);p.setDate(p.getDate()+a*7);const g=[];for(let v=-3;v<=3;v++){const y=new Date(p);y.setDate(y.getDate()+v),g.push(y.toISOString().split("T")[0])}return g},[a]);M.useEffect(()=>{if(!l.includes(t)){const m=new Date(t),p=new Date(os()),g=Math.floor((m.getTime()-p.getTime())/(1e3*60*60*24)),v=Math.floor(g/7);s(v)}},[t,l]);const d=()=>{s(0),r(os())},u=()=>{const m=a-1;s(m);const p=os(),g=new Date(p);g.setDate(g.getDate()+m*7);const v=g.toISOString().split("T")[0];r(v)},f=()=>{const m=a+1;s(m);const p=os(),g=new Date(p);g.setDate(g.getDate()+m*7);const v=g.toISOString().split("T")[0];r(v)};return i?n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-gray-900",children:"Select Date"}),a!==0&&n.jsx("button",{type:"button",onClick:d,className:"px-3 py-1.5 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-xs",children:"Jump to Today"})]}),n.jsx("div",{className:"mb-4",children:n.jsx("input",{type:"date",value:t,onChange:m=>r(m.target.value),className:"w-full px-4 py-3 text-base bg-gray-50 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all"})}),n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsxs("button",{type:"button",onClick:u,className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-1 text-sm",children:[n.jsx(cj,{className:"w-4 h-4"}),n.jsx("span",{children:"Prev Week"})]}),n.jsxs("button",{type:"button",onClick:f,className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-1 text-sm",children:[n.jsx("span",{children:"Next Week"}),n.jsx(sl,{className:"w-4 h-4"})]})]}),n.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:n.jsx("div",{className:"flex gap-2 pb-2 min-w-max",children:l.map(m=>{const p=new Date(m),g=m===os(),v=m===t;return n.jsxs("button",{type:"button",onClick:()=>r(m),className:`flex-shrink-0 p-2 rounded-lg text-center transition-all min-w-[60px] ${v?"bg-orange-600 text-white shadow-lg":g?"bg-orange-100 text-orange-800 border-2 border-orange-300":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[n.jsx("div",{className:"text-xs uppercase",children:p.toLocaleDateString("en-US",{weekday:"short"})}),n.jsx("div",{className:"text-base font-medium",children:p.getDate()}),n.jsx("div",{className:"text-xs",children:p.toLocaleDateString("en-US",{month:"short"})})]},m)})})})]}):n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-gray-900",children:"Select Date"}),a!==0&&n.jsx("button",{type:"button",onClick:d,className:"px-4 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-sm",children:"Jump to Today"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",title:"Previous Week",children:[n.jsx(cj,{className:"w-5 h-5"}),n.jsx("span",{className:"text-sm",children:"Prev"})]}),n.jsx("div",{className:"grid grid-cols-7 gap-2 flex-1",children:l.map(m=>{const p=new Date(m),g=m===os(),v=m===t;return n.jsxs("button",{type:"button",onClick:()=>r(m),className:`p-3 rounded-lg text-center transition-all ${v?"bg-orange-600 text-white shadow-lg transform scale-105":g?"bg-orange-100 text-orange-800 border-2 border-orange-300":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[n.jsx("div",{className:"text-xs uppercase",children:p.toLocaleDateString("en-US",{weekday:"short"})}),n.jsx("div",{className:"text-lg font-medium",children:p.getDate()}),n.jsx("div",{className:"text-xs",children:p.toLocaleDateString("en-US",{month:"short"})})]},m)})}),n.jsxs("button",{type:"button",onClick:f,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",title:"Next Week",children:[n.jsx("span",{className:"text-sm",children:"Next"}),n.jsx(sl,{className:"w-5 h-5"})]})]})]})});OI();function Mq(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Array(12).fill(0);let _j=1;class Rq{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:a,...s}=t,i=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:_j++,o=this.toasts.find(d=>d.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...t,id:i,title:a}),{...d,...t,id:i,dismissible:l,title:a}):d):this.addToast({title:a,...s,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(a=>a({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let a;r.loading!==void 0&&(a=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=a!==void 0,o;const l=s.then(async u=>{if(o=["resolve",u],xe.isValidElement(u))i=!1,this.create({id:a,type:"default",message:u});else if($q(u)&&!u.ok){i=!1;const m=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,p=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description,v=typeof m=="object"&&!xe.isValidElement(m)?m:{message:m};this.create({id:a,type:"error",description:p,...v})}else if(u instanceof Error){i=!1;const m=typeof r.error=="function"?await r.error(u):r.error,p=typeof r.description=="function"?await r.description(u):r.description,v=typeof m=="object"&&!xe.isValidElement(m)?m:{message:m};this.create({id:a,type:"error",description:p,...v})}else if(r.success!==void 0){i=!1;const m=typeof r.success=="function"?await r.success(u):r.success,p=typeof r.description=="function"?await r.description(u):r.description,v=typeof m=="object"&&!xe.isValidElement(m)?m:{message:m};this.create({id:a,type:"success",description:p,...v})}}).catch(async u=>{if(o=["reject",u],r.error!==void 0){i=!1;const f=typeof r.error=="function"?await r.error(u):r.error,m=typeof r.description=="function"?await r.description(u):r.description,g=typeof f=="object"&&!xe.isValidElement(f)?f:{message:f};this.create({id:a,type:"error",description:m,...g})}}).finally(()=>{i&&(this.dismiss(a),a=void 0),r.finally==null||r.finally.call(r)}),d=()=>new Promise((u,f)=>l.then(()=>o[0]==="reject"?f(o[1]):u(o[1])).catch(f));return typeof a!="string"&&typeof a!="number"?{unwrap:d}:Object.assign(a,{unwrap:d})},this.custom=(t,r)=>{const a=r?.id||_j++;return this.create({jsx:t(a),id:a,...r}),a},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const qs=new Rq,Fq=(e,t)=>{const r=t?.id||_j++;return qs.addToast({title:e,...t,id:r}),r},$q=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Lq=Fq,Bq=()=>qs.toasts,Uq=()=>qs.getActiveToasts(),Zt=Object.assign(Lq,{success:qs.success,info:qs.info,warning:qs.warning,error:qs.error,custom:qs.custom,message:qs.message,promise:qs.promise,dismiss:qs.dismiss,loading:qs.loading},{getHistory:Bq,getToasts:Uq});Mq("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Hq({context:e,selectedStoreId:t,employees:r}){const[a,s]=M.useState(os()),[i,o]=M.useState(!1),[l,d]=M.useState(!1),[u,f]=M.useState(!1),[m,p]=M.useState(null),[g,v]=M.useState(null),[y,w]=M.useState(null),k=t||e.user?.storeId;console.log(" InventoryManagement - effectiveStoreId:",k),console.log(" InventoryManagement - selectedStoreId prop:",t),console.log(" InventoryManagement - user storeId:",e.user?.storeId);const N=e.inventory.filter(C=>{const P=C.date===a,B=k?C.storeId===k:!0;return P&&B}),b=e.overheads.filter(C=>{const P=C.date===a,B=k?C.storeId===k:!0;return P&&B}),A=e.fixedCosts.filter(C=>{const P=C.date===a,B=k?C.storeId===k:!0;return P&&B}),E=N.reduce((C,P)=>C+P.totalCost,0),S=b.reduce((C,P)=>C+P.amount,0),_=A.reduce((C,P)=>C+P.amount,0);return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx(xg,{selectedDate:a,onDateChange:s}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6 mb-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 shadow-lg shadow-blue-500/30",children:[n.jsx("p",{className:"text-sm text-blue-100 uppercase tracking-wide",children:"Inventory Cost"}),n.jsxs("p",{className:"text-white text-2xl mt-2",children:["",E.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 shadow-lg shadow-orange-500/30",children:[n.jsx("p",{className:"text-sm text-orange-100 uppercase tracking-wide",children:"Overhead Cost"}),n.jsxs("p",{className:"text-white text-2xl mt-2",children:["",S.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 shadow-lg shadow-green-500/30",children:[n.jsx("p",{className:"text-sm text-green-100 uppercase tracking-wide",children:"Fixed Cost"}),n.jsxs("p",{className:"text-white text-2xl mt-2",children:["",_.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 shadow-lg shadow-purple-500/30",children:[n.jsx("p",{className:"text-sm text-purple-100 uppercase tracking-wide",children:"Total Expenses"}),n.jsxs("p",{className:"text-white text-2xl mt-2",children:["",(E+S+_).toLocaleString()]})]})]}),n.jsxs("div",{className:"flex gap-4 mb-6",children:[n.jsxs("button",{onClick:()=>o(!0),disabled:!e.isManager,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e.isManager?"":"Only managers can add inventory items",children:[n.jsx(xo,{className:"w-4 h-4"}),"Add Inventory Item"]}),n.jsxs("button",{onClick:()=>d(!0),disabled:!e.isManager,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e.isManager?"":"Only managers can add overhead costs",children:[n.jsx(xo,{className:"w-4 h-4"}),"Add Overhead"]}),n.jsxs("button",{onClick:()=>f(!0),disabled:!e.isManager,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e.isManager?"":"Only managers can add fixed costs",children:[n.jsx(xo,{className:"w-4 h-4"}),"Add Fixed Cost"]})]}),n.jsx(Oq,{inventory:N,overheads:b,fixedCosts:A,onEditInventory:C=>{p(C),o(!0)},onDeleteInventory:e.deleteInventoryItem,onEditOverhead:C=>{v(C),d(!0)},onDeleteOverhead:e.deleteOverheadItem,onEditFixedCost:C=>{w(C),f(!0)},onDeleteFixedCost:e.deleteFixedCostItem,isManager:e.isManager}),i&&n.jsx(Eq,{selectedDate:a,editingItem:m,onSubmit:async C=>{try{m?(await e.updateInventoryItem(m.id,C),o(!1),p(null),Zt.success("Inventory item updated successfully!")):(await e.addInventoryItem(C),Zt.success("Inventory item added! You can add another item."))}catch{Zt.error("Failed to save inventory item. Please try again.")}},onClose:()=>{o(!1),p(null)}}),l&&n.jsx(Aq,{selectedDate:a,editingItem:g,employees:r,onSubmit:async C=>{try{g?await e.updateOverheadItem(g.id,C):await e.addOverheadItem(C),d(!1),v(null),Zt.success("Overhead cost saved successfully!")}catch{alert("Failed to save overhead cost. Please try again.")}},onClose:()=>{d(!1),v(null)}}),u&&n.jsx(Tq,{selectedDate:a,editingItem:y,onSubmit:async C=>{try{y?await e.updateFixedCostItem(y.id,C):await e.addFixedCostItem(C),f(!1),w(null),Zt.success("Fixed cost saved successfully!")}catch{alert("Failed to save fixed cost. Please try again.")}},onClose:()=>{f(!1),w(null)}})]})}function _2({context:e,selectedStoreId:t,onClose:r,onSaveSuccess:a,isProductionHouse:s,isStoreFinishedProducts:i=!1,currentCalculatedStock:o}){const[l,d]=M.useState([]),[u,f]=M.useState(!0),[m,p]=M.useState(!1),[g,v]=M.useState(null),[y,w]=M.useState(null),[k,N]=M.useState(!1),b=t||e.user?.storeId,A=e.stores?.find(z=>z.id===b),E=t||e.user?.storeId,S=s?e.productionHouses?.find(z=>z.id===E):e.stores?.find(z=>z.id===E),_=S?.name,C=new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"});new Date().getDate(),M.useEffect(()=>{P(),R()},[]);async function P(){try{if(f(!0),s||i)await B();else{const I=(await dg(e.user?.accessToken||"")).filter(se=>b?se.storeId===b:!1),Z=new Map;I.forEach(se=>{Z.has(se.id)||Z.set(se.id,se)});const te=Array.from(Z.values()).map(se=>({itemId:se.id,itemName:se.itemName,category:se.category,unit:se.unit,systemQuantity:se.quantity,actualQuantity:se.quantity,difference:0,adjustmentType:null,notes:""}));d(te)}}catch(z){console.error("Error loading inventory:",z),w("Failed to load inventory data")}finally{f(!1)}}async function B(){let z=[];try{z=await ug(e.user?.accessToken||""),console.log(" Fetched raw production data for recalibration:",{totalRecords:z.length,sampleRecord:z[0]})}catch(ze){console.error(" Failed to fetch production data for recalibration:",ze),z=e.productionData||[]}const I=new Date().toISOString().substring(0,7);let Z=b,te=b,se=b;if(b&&!b.startsWith("STORE-")){const ze=e.productionHouses?.find(Pe=>Pe.uuid===b);ze&&(console.log(" Resolved UUID to production house:",{uuid:b,storeId:ze.id,name:ze.name}),Z=ze.id,te=b,se=ze.id)}let be=Z;if(i)se=Z;else if(Z&&Z.startsWith("STORE-")){const ze=e.productionHouses?.find(Pe=>Pe.id===Z);if(ze)te=ze.uuid,be=Z,se=Z;else{const Pe=e.stores?.find(ke=>ke.id===Z);Pe?.productionHouseId&&(te=Pe.productionHouseId,se=te)}}else se=Z;let Ee,_e;if(i)Ee=(e.productionRequests||[]).filter(ke=>{if(ke.status!=="delivered"||ke.storeId!==b)return!1;const Xe=ke.deliveredDate||ke.requestDate||ke.createdAt;return Xe&&Xe.startsWith(I)}).reduce((ke,Xe)=>({chicken:ke.chicken+(Xe.chicken||0),chickenCheese:ke.chickenCheese+(Xe.chickenCheese||0),veg:ke.veg+(Xe.veg||0),cheeseCorn:ke.cheeseCorn+(Xe.cheeseCorn||0),paneer:ke.paneer+(Xe.paneer||0),vegKurkure:ke.vegKurkure+(Xe.vegKurkure||0),chickenKurkure:ke.chickenKurkure+(Xe.chickenKurkure||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),_e=(e.categorySalesData||[]).filter(ke=>ke.storeId!==b?!1:ke.date&&ke.date.startsWith(I)).reduce((ke,Xe)=>({chicken:ke.chicken+(Xe.data["Chicken Momos"]||0),chickenCheese:ke.chickenCheese+(Xe.data["Chicken Cheese Momos"]||0),veg:ke.veg+(Xe.data["Veg Momos"]||0),cheeseCorn:ke.cheeseCorn+(Xe.data["Corn Cheese Momos"]||0),paneer:ke.paneer+(Xe.data["Paneer Momos"]||0),vegKurkure:ke.vegKurkure+(Xe.data["Veg Kurkure Momos"]||0),chickenKurkure:ke.chickenKurkure+(Xe.data["Chicken Kurkure Momos"]||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});else{console.log(" Production filtering for recalibration:",{currentMonth:I,productionHouseUUID:te,effectiveStoreId:b,totalProductionRecords:z.length,sampleProductionRecord:z[0],firstProductionDates:z.slice(0,3).map(We=>({date:We.date,type:typeof We.date}))});const ze=z.filter(We=>{const ct=We.date||"",Wt=ct.startsWith(I)||ct.substring(0,7)===I,Ut=We.storeId===te||We.storeId===b||We.storeId===be,Vt=We.productionHouseId===te||We.productionHouseId===b||We.productionHouseId===be,Ar=Wt&&(Ut||Vt);return console.log(" Checking production record:",{date:We.date,dateSubstring:ct.substring(0,7),currentMonth:I,dateMatch:Wt,pStoreId:We.storeId,pProductionHouseId:We.productionHouseId,productionHouseUUID:te,effectiveStoreId:b,originalStoreId:be,matchesStoreId:Ut,matchesProductionHouseId:Vt,finalMatch:Ar}),Ar});console.log(" Filtered production count:",ze.length),console.log(" Sample filtered production:",ze[0]);const Pe=ze.reduce((We,ct)=>({chicken:We.chicken+(ct.chickenMomos?.final||0),chickenCheese:We.chickenCheese+(ct.chickenCheeseMomos?.final||0),veg:We.veg+(ct.vegMomos?.final||0),cheeseCorn:We.cheeseCorn+(ct.cheeseCornMomos?.final||0),paneer:We.paneer+(ct.paneerMomos?.final||0),vegKurkure:We.vegKurkure+(ct.vegKurkureMomos?.final||0),chickenKurkure:We.chickenKurkure+(ct.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});Ee={chicken:Pe.chicken-Pe.chickenKurkure,chickenCheese:Pe.chickenCheese,veg:Pe.veg-Pe.vegKurkure,cheeseCorn:Pe.cheeseCorn,paneer:Pe.paneer,vegKurkure:Pe.vegKurkure,chickenKurkure:Pe.chickenKurkure},console.log(" Raw production (before parent-child adjustment):",Pe),console.log(" Total produced (after parent-child adjustment):",Ee),console.log(`    Chicken Momo: ${Pe.chicken} produced - ${Pe.chickenKurkure} used for kurkure = ${Ee.chicken} net`),console.log(`    Veg Momo: ${Pe.veg} produced - ${Pe.vegKurkure} used for kurkure = ${Ee.veg} net`),console.log(` Filtering requests - productionHouseUUID: ${te}, effectiveStoreId: ${b}, currentMonth: ${I}`),console.log(` Total production requests in context: ${(e.productionRequests||[]).length}`);let ke=!1;_e=(e.productionRequests||[]).filter(We=>{if(We.status!=="delivered")return!1;const ct=We.deliveredDate||We.requestDate||We.createdAt;if(!ct||!ct.startsWith(I))return!1;const Wt=e.stores?.find(Vt=>Vt.id===We.storeId),Ut=Wt?.productionHouseId===te||Wt?.productionHouseId===b;return We.status==="delivered"&&ct?.startsWith(I)&&(console.log(` Request ${We.requestId}: storeId=${We.storeId}, store.productionHouseId=${Wt?.productionHouseId}, comparing to UUID=${te} or storeId=${b}, matches=${Ut}`),Ut&&!ke&&(console.log(" First matching request structure:",{requestId:We.requestId,chickenMomos:We.chickenMomos,cheeseCornMomos:We.cheeseCornMomos,allKeys:Object.keys(We)}),ke=!0)),Ut}).reduce((We,ct)=>({chicken:We.chicken+(ct.chicken||0),chickenCheese:We.chickenCheese+(ct.chickenCheese||0),veg:We.veg+(ct.veg||0),cheeseCorn:We.cheeseCorn+(ct.cheeseCorn||0),paneer:We.paneer+(ct.paneer||0),vegKurkure:We.vegKurkure+(ct.vegKurkure||0),chickenKurkure:We.chickenKurkure+(ct.chickenKurkure||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}const me=await F(se,I,i);let ye=null,qe=null;try{const ze=i?"store":"production_house",Pe=await el(e.user?.accessToken||"",se,ze);if(Pe?.record){const ke=Pe.record.date,Xe=ke.substring(0,7),We=parseInt(ke.substring(8,10));if(console.log(" Latest recalibration check:",{recalDate:ke,recalMonth:Xe,currentMonth:I,recalDay:We,isSameMonth:Xe===I,isMidMonth:We>1}),Xe===I&&We>1){console.log(" Found mid-month recalibration - using as baseline!"),qe=ke,ye={};const ct=Pe.record.items||[];for(const Wt of ct){const Ut=e.inventoryItems?.find(Vt=>Vt.name===Wt.itemId||Vt.id===Wt.itemId);if(Ut){const Ar=Ut.name.replace(/_([a-z])/g,ln=>ln[1].toUpperCase()).replace(/Momo(s)?$/i,"");ye[Ar]=Wt.actualQuantity,console.log(`   Recal stock: ${Wt.itemId} -> ${Ar} = ${Wt.actualQuantity}`)}}console.log(" Mid-month recalibration stock:",ye)}}}catch(ze){console.error("Error fetching latest recalibration for mid-month check:",ze)}if(ye&&qe&&!i){console.log(" Recalculating with mid-month recalibration baseline...");const ze=qe.substring(0,10),ke=z.filter(We=>(We.date||"")>ze&&(We.storeId===te||We.storeId===b||We.storeId===be||We.productionHouseId===te||We.productionHouseId===b||We.productionHouseId===be)).reduce((We,ct)=>({chicken:We.chicken+(ct.chickenMomos?.final||0),chickenCheese:We.chickenCheese+(ct.chickenCheeseMomos?.final||0),veg:We.veg+(ct.vegMomos?.final||0),cheeseCorn:We.cheeseCorn+(ct.cheeseCornMomos?.final||0),paneer:We.paneer+(ct.paneerMomos?.final||0),vegKurkure:We.vegKurkure+(ct.vegKurkureMomos?.final||0),chickenKurkure:We.chickenKurkure+(ct.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});Ee={chicken:ke.chicken-ke.chickenKurkure,chickenCheese:ke.chickenCheese,veg:ke.veg-ke.vegKurkure,cheeseCorn:ke.cheeseCorn,paneer:ke.paneer,vegKurkure:ke.vegKurkure,chickenKurkure:ke.chickenKurkure},_e=(e.productionRequests||[]).filter(We=>{if(We.status!=="delivered")return!1;const ct=We.deliveredDate||We.requestDate||We.createdAt;if(!ct||ct<qe)return!1;const Wt=e.stores?.find(Ut=>Ut.id===We.storeId);return Wt?.productionHouseId===te||Wt?.productionHouseId===b}).reduce((We,ct)=>({chicken:We.chicken+(ct.chicken||0),chickenCheese:We.chickenCheese+(ct.chickenCheese||0),veg:We.veg+(ct.veg||0),cheeseCorn:We.cheeseCorn+(ct.cheeseCorn||0),paneer:We.paneer+(ct.paneer||0),vegKurkure:We.vegKurkure+(ct.vegKurkure||0),chickenKurkure:We.chickenKurkure+(ct.chickenKurkure||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),console.log("  Production AFTER recalibration:",Ee),console.log("  Deliveries AFTER recalibration:",_e)}console.log(" Recalibration - Location ID:",se),console.log(" Recalibration - Is Store Finished Products:",i),console.log(" Recalibration - Opening Balance:",me),console.log(" Recalibration - Mid-Month Recal Stock:",ye),console.log(" Recalibration - Total Received/Produced:",Ee),console.log(" Recalibration - Total Sent/Sold:",_e);const G=e.inventoryItems?.filter(ze=>ze.category==="finished_product"&&ze.isActive&&(ze.linkedEntityType==="global"||ze.linkedEntityType==="production_house"&&ze.linkedEntityId===se||ze.linkedEntityType==="store"&&ze.linkedEntityId===b))||[];console.log(" Recalibration - Finished Products from Context:",G.length);const He=ze=>ze.replace(/_([a-z])/g,Pe=>Pe[1].toUpperCase()),Ke=ze=>{const Pe=ze.replace(/_momo(s)?$/i,"");return He(Pe)},ut=G.map(ze=>{const Pe=Ke(ze.name);let ke;if(o&&o[Pe]!==void 0)ke=o[Pe],console.log(` ${ze.displayName} (${ze.name} -> ${Pe}): Using pre-calculated stock from Analytics = ${ke}`);else{const Xe=me[Pe]||0,We=Ee[Pe]||0,ct=_e[Pe]||0;ke=Xe+We-ct,console.log(` ${ze.displayName} (${ze.name} -> ${Pe}): Opening=${Xe}, Produced=${We}, Sent=${ct}, Stock=${ke}`)}return{itemId:ze.name,itemName:ze.displayName,category:ze.category,unit:ze.unit,systemQuantity:ke,actualQuantity:ke,difference:0,adjustmentType:null,notes:""}});d(ut)}async function F(z,I,Z){if(!z)return{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};try{const te=Z?"store":"production_house",[se,be]=I.split("-").map(Number);let Ee=se,_e=be-1;_e===0&&(_e=12,Ee=se-1);const me=`${Ee}-${String(_e).padStart(2,"0")}`;console.log(" fetchOpeningBalance - Location ID:",z),console.log(" fetchOpeningBalance - Location Type:",te),console.log(" fetchOpeningBalance - Current Month:",I),console.log(" fetchOpeningBalance - Looking for recalibration from:",me);let ye=await el(e.user?.accessToken||"",z,te);if(!ye?.record&&!Z){console.log("   No recalibration found with UUID, checking with mapped store ID...");const qe=e.stores?.filter(G=>G.productionHouseId===z)||[];console.log("   Stores mapped to this production house:",qe.map(G=>G.id));for(const G of qe)if(console.log(`   Trying to fetch recalibration with store ID: ${G.id}`),ye=await el(e.user?.accessToken||"",G.id,te),ye?.record){console.log(`    Found recalibration using store ID: ${G.id}`);break}}if(ye?.record){const qe=ye.record.date.substring(0,7);console.log(" Recalibration Response:",ye.record);const G=ye.record.isOpeningBalance;if(console.log(" Recalibration date comparison:",{recalDate:qe,currentMonth:I,previousMonthStr:me,isOpeningBalance:G,isCurrentMonth:qe===I,isPreviousMonth:qe===me,isOlder:qe<me}),qe===I&&(G===!0||G===void 0)||qe===me||qe<me){const Ke=Pe=>Pe.replace(/_([a-z])/g,ke=>ke[1].toUpperCase()),ut=Pe=>{const ke=Pe.replace(/_momo(s)?$/i,"");return Ke(ke)},ze={};return qe===I&&G?(console.log(" Using current month opening balance recalibration (done on 1st)"),console.log("   Recalibration items:",ye.record.items)):qe===me?console.log(" Using previous month recalibration as opening balance"):console.log(" Using older recalibration as opening balance from:",qe),ye.record.items.forEach(Pe=>{const ke=ut(Pe.itemId);ze[ke]=Pe.actualQuantity,console.log(`   Opening balance mapping: ${Pe.itemId} -> ${ke} = ${Pe.actualQuantity}`)}),console.log("   Parsed opening balance:",ze),console.log(" Opening Balance Calculated:",ze),ze}}return console.log(" fetchOpeningBalance - No suitable recalibration found, calculating from transactions"),await O(z,I,Z)}catch(te){return console.error("Error fetching opening balance:",te),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}}}async function O(z,I,Z){const[te,se]=I.split("-").map(Number);let be=te,Ee=se-1;Ee===0&&(Ee=12,be=te-1);const _e=`${be}-${String(Ee).padStart(2,"0")}`;if(console.log(" calculatePreviousMonthStock - Previous Month:",_e),console.log(" calculatePreviousMonthStock - Is Store:",Z),Z){const me=(e.productionRequests||[]).filter(G=>{if(G.status!=="delivered"||G.storeId!==z)return!1;const He=G.deliveredDate||G.requestDate||G.createdAt;return He&&He.startsWith(_e)}).reduce((G,He)=>({chicken:G.chicken+(He.chickenMomos||0),chickenCheese:G.chickenCheese+(He.chickenCheeseMomos||0),veg:G.veg+(He.vegMomos||0),cheeseCorn:G.cheeseCorn+(He.cheeseCornMomos||0),paneer:G.paneer+(He.paneerMomos||0),vegKurkure:G.vegKurkure+(He.vegKurkureMomos||0),chickenKurkure:G.chickenKurkure+(He.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});console.log(" calculatePreviousMonthStock - Previous Received:",me),console.log(" calculatePreviousMonthStock - Context categorySalesData length:",(e.categorySalesData||[]).length);const ye=(e.categorySalesData||[]).filter(G=>G.storeId!==z?!1:G.date&&G.date.startsWith(_e)).reduce((G,He)=>({chicken:G.chicken+(He.data["Chicken Momos"]||0),chickenCheese:G.chickenCheese+(He.data["Chicken Cheese Momos"]||0),veg:G.veg+(He.data["Veg Momos"]||0),cheeseCorn:G.cheeseCorn+(He.data["Corn Cheese Momos"]||0),paneer:G.paneer+(He.data["Paneer Momos"]||0),vegKurkure:G.vegKurkure+(He.data["Veg Kurkure Momos"]||0),chickenKurkure:G.chickenKurkure+(He.data["Chicken Kurkure Momos"]||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});console.log(" calculatePreviousMonthStock - Previous Sold:",ye);const qe={chicken:me.chicken-ye.chicken,chickenCheese:me.chickenCheese-ye.chickenCheese,veg:me.veg-ye.veg,cheeseCorn:me.cheeseCorn-ye.cheeseCorn,paneer:me.paneer-ye.paneer,vegKurkure:me.vegKurkure-ye.vegKurkure,chickenKurkure:me.chickenKurkure-ye.chickenKurkure};return console.log(" calculatePreviousMonthStock - Calculated Closing Stock:",qe),qe}else{const ye=(e.productionData||[]).filter(He=>He.date.startsWith(_e)?He.storeId===z||He.productionHouseId===z:!1).reduce((He,Ke)=>({chicken:He.chicken+(Ke.chickenMomos?.final||0),chickenCheese:He.chickenCheese+(Ke.chickenCheeseMomos?.final||0),veg:He.veg+(Ke.vegMomos?.final||0),cheeseCorn:He.cheeseCorn+(Ke.cheeseCornMomos?.final||0),paneer:He.paneer+(Ke.paneerMomos?.final||0),vegKurkure:He.vegKurkure+(Ke.vegKurkureMomos?.final||0),chickenKurkure:He.chickenKurkure+(Ke.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),qe=(e.productionRequests||[]).filter(He=>{if(He.status!=="delivered")return!1;const Ke=He.deliveredDate||He.requestDate||He.createdAt;if(!Ke||!Ke.startsWith(_e))return!1;const ut=e.stores?.find(ze=>ze.id===He.storeId);return ut?.productionHouseId===z||ut?.productionHouseId===b}).reduce((He,Ke)=>({chicken:He.chicken+(Ke.chickenMomos||0),chickenCheese:He.chickenCheese+(Ke.chickenCheeseMomos||0),veg:He.veg+(Ke.veg||0),cheeseCorn:He.cheeseCorn+(Ke.cheeseCorn||0),paneer:He.paneer+(Ke.paneerMomos||0),vegKurkure:He.vegKurkure+(Ke.vegKurkureMomos||0),chickenKurkure:He.chickenKurkure+(Ke.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),G={chicken:ye.chicken-ye.chickenKurkure,chickenCheese:ye.chickenCheese,veg:ye.veg-ye.vegKurkure,cheeseCorn:ye.cheeseCorn,paneer:ye.paneer,vegKurkure:ye.vegKurkure,chickenKurkure:ye.chickenKurkure};return{chicken:G.chicken-qe.chicken,chickenCheese:G.chickenCheese-qe.chickenCheese,veg:G.veg-qe.veg,cheeseCorn:G.cheeseCorn-qe.cheeseCorn,paneer:G.paneer-qe.paneer,vegKurkure:G.vegKurkure-qe.vegKurkure,chickenKurkure:G.chickenKurkure-qe.chickenKurkure}}}async function R(){try{const z=b;if(!z)return;const I=s?"production_house":"store",Z=await el(e.user?.accessToken||"",z,I);Z.lastRecalibration&&v(Z.lastRecalibration)}catch(z){console.error("Error checking last recalibration:",z)}}function Q(z,I){const Z=parseFloat(I)||0;d(l.map(te=>{if(te.itemId===z){const se=Z-te.systemQuantity;return{...te,actualQuantity:Z,difference:se,adjustmentType:se===0?null:te.adjustmentType}}return te}))}function V(z,I){d(l.map(Z=>Z.itemId===z?{...Z,adjustmentType:I}:Z))}function J(z,I){d(l.map(Z=>Z.itemId===z?{...Z,notes:I}:Z))}async function ae(){if(l.filter(I=>I.difference!==0&&!I.adjustmentType).length>0){w("Please select adjustment type (Wastage or Counting Error) for all items with differences");return}try{p(!0),w(null),console.log(` Submitting recalibration:
        - locationId: ${E}
        - locationType: ${s?"production_house":"store"}
        - locationName: ${_}
        - isProductionHouse: ${s}`);const I={locationId:E,locationType:s?"production_house":"store",locationName:_,items:l.map(Z=>({itemId:Z.itemId,itemName:Z.itemName,category:Z.category,unit:Z.unit,systemQuantity:Z.systemQuantity,actualQuantity:Z.actualQuantity,difference:Z.difference,adjustmentType:Z.adjustmentType,notes:Z.notes}))};await m5(e.user?.accessToken||"",I),N(!0),setTimeout(()=>{r(),a&&a()},2e3)}catch(I){console.error("Error submitting recalibration:",I),w(I instanceof Error?I.message:"Failed to submit recalibration")}finally{p(!1)}}const L=l.length,H=l.filter(z=>z.difference!==0).length,ce=l.filter(z=>z.adjustmentType==="wastage"&&z.difference<0).reduce((z,I)=>z+Math.abs(I.difference),0);return u?n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:n.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(gi,{className:"w-6 h-6 animate-spin text-purple-600"}),n.jsx("span",{className:"text-gray-700",children:"Loading inventory data..."})]})})}):k?n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:n.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(zt,{className:"w-8 h-8 text-green-600"})}),n.jsx("h3",{className:"text-xl text-gray-900",children:"Recalibration Submitted!"}),n.jsx("p",{className:"text-gray-600 text-center",children:"Your recalibration has been submitted for approval."}),n.jsx("p",{className:"text-sm text-gray-500 text-center",children:"A manager or cluster head will review and approve it."})]})})}):n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full my-8",children:[n.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 p-6 rounded-t-2xl",children:[n.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),n.jsxs("div",{className:"relative flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center border-2 border-white/30",children:n.jsx(Dr,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl text-white",children:"Monthly Stock Recalibration"}),n.jsxs("p",{className:"text-white/80 text-sm",children:[_||A?.name," - ",C]})]})]}),n.jsx("button",{onClick:r,className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-all",children:n.jsx(Na,{className:"w-6 h-6 text-white"})})]})]}),n.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-purple-200",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Items"}),n.jsx("div",{className:"text-2xl text-purple-600",children:L})]}),n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-orange-200",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Items with Difference"}),n.jsx("div",{className:"text-2xl text-orange-600",children:H})]}),n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-red-200",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Wastage"}),n.jsx("div",{className:"text-2xl text-red-600",children:ce.toFixed(2)})]})]}),g&&n.jsxs("div",{className:"mt-4 bg-blue-50 border-2 border-blue-200 rounded-xl p-3 flex items-start gap-3",children:[n.jsx(yn,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm text-blue-900 font-medium mb-1",children:"Last recalibration was performed on:"}),n.jsx("div",{className:"text-sm text-blue-700",children:S2(g,!0)}),n.jsxs("div",{className:"text-xs text-blue-600 mt-1 flex items-center gap-1",children:[n.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full"}),"Timezone: Indian Standard Time (GMT+5:30)"]})]})]}),n.jsxs("div",{className:"mt-4 bg-green-50 border-2 border-green-200 rounded-xl p-3 flex items-start gap-3",children:[n.jsx(zt,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),n.jsx("div",{className:"text-sm text-green-900",children:"Stock recalibration is now enabled for the entire month. Operations Managers and Cluster Heads will be notified when you submit a recalibration."})]})]}),n.jsx("div",{className:"p-6 max-h-[500px] overflow-y-auto",children:n.jsx("div",{className:"space-y-4",children:l.map((z,I)=>n.jsxs("div",{className:`bg-gradient-to-r ${z.difference!==0?"from-red-50 to-orange-50 border-red-200":"from-gray-50 to-gray-100 border-gray-200"} border-2 rounded-xl p-4`,children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-start",children:[n.jsxs("div",{className:"md:col-span-3",children:[n.jsxs("div",{className:"text-sm text-gray-500",children:["Item ",I+1]}),n.jsx("div",{className:"text-gray-900",children:z.itemName}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[z.category.replace(/_/g," "),"  ",z.unit]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Current Stock"}),n.jsxs("div",{className:"text-gray-900",children:[z.systemQuantity," ",z.unit]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Actual Count"}),n.jsx("input",{type:"number",step:"0.01",value:z.actualQuantity,onChange:Z=>Q(z.itemId,Z.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter count"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Difference"}),n.jsxs("div",{className:`text-lg ${z.difference>0?"text-green-600":z.difference<0?"text-red-600":"text-gray-600"}`,children:[z.difference>0?"+":"",z.difference.toFixed(2)]})]}),n.jsx("div",{className:"md:col-span-3",children:z.difference!==0&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-500 mb-2 block",children:"Adjustment Type *"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>V(z.itemId,"wastage"),className:`px-3 py-1.5 rounded-lg text-sm border-2 transition-all ${z.adjustmentType==="wastage"?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-gray-300 hover:border-red-400"}`,children:"Wastage"}),n.jsx("button",{onClick:()=>V(z.itemId,"counting_error"),className:`px-3 py-1.5 rounded-lg text-sm border-2 transition-all ${z.adjustmentType==="counting_error"?"bg-orange-600 text-white border-orange-600":"bg-white text-gray-700 border-gray-300 hover:border-orange-400"}`,children:"Counting Error"})]})]})})]}),z.difference!==0&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Notes (Optional)"}),n.jsx("input",{type:"text",value:z.notes,onChange:Z=>J(z.itemId,Z.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Add any additional notes..."})]})]},z.itemId))})}),y&&n.jsx("div",{className:"px-6 pb-4",children:n.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-3 flex items-start gap-3",children:[n.jsx(yn,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("div",{className:"text-sm text-red-900",children:y})]})}),n.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl border-t-2 border-gray-200 flex justify-between items-center",children:[n.jsx("button",{onClick:r,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:ae,disabled:m,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:m?n.jsxs(n.Fragment,{children:[n.jsx(gi,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(rc,{className:"w-5 h-5"}),"Save Recalibration"]})})]})]})})}function Ej({context:e,selectedStoreId:t}){const[r,a]=M.useState(new Date().toISOString().split("T")[0]),[s,i]=M.useState(!1),o=t||e.user?.storeId,l=e.inventory.filter(k=>{const N=k.date===r,b=o?k.storeId===o:!0;return N&&b}),d=e.overheads.filter(k=>{const N=k.date===r,b=o?k.storeId===o:!0;return N&&b}),u=e.fixedCosts.filter(k=>{const N=k.date===r,b=o?k.storeId===o:!0;return N&&b}),f=l.reduce((k,N)=>k+N.totalCost,0),m=d.reduce((k,N)=>k+N.amount,0),p=u.reduce((k,N)=>k+N.amount,0),g=l.reduce((k,N)=>(k[N.category]||(k[N.category]=[]),k[N.category].push(N),k),{}),v=d.reduce((k,N)=>(k[N.category]||(k[N.category]=[]),k[N.category].push(N),k),{}),y={fresh_produce:"Fresh Vegetables",spices_seasonings:"Grocery",dairy:"Dairy Products",meat:"Meat",packaging:"Packaging Materials",staff_essentials:"Staff Essentials",fuel:"Fuel",travel:"Travel",transportation:"Transportation",marketing:"Marketing",service_charge:"Service Charge",repair:"Repair & Maintenance",party:"Party Expenses",lunch:"Lunch",miscellaneous:"Miscellaneous",electricity:"Electricity",rent:"Rent"},w=e.user?.role==="cluster_head";return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(lo,{className:"w-6 h-6 text-blue-600"}),n.jsx("h1",{className:"text-2xl text-gray-900",children:"Inventory Overview"})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-50 border-2 border-amber-200 rounded-lg",children:[n.jsx(dj,{className:"w-4 h-4 text-amber-600"}),n.jsx("span",{className:"text-sm text-amber-800",children:"View Only"})]})]}),n.jsx(xg,{selectedDate:r,onDateChange:a}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6 mb-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 shadow-lg shadow-blue-500/30",children:[n.jsx("p",{className:"text-sm text-blue-100 uppercase tracking-wide",children:"Inventory Cost"}),n.jsxs("p",{className:"text-white text-2xl mt-2",children:["",f.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 shadow-lg shadow-orange-500/30",children:[n.jsx("p",{className:"text-sm text-orange-100 uppercase tracking-wide",children:"Overhead Cost"}),n.jsxs("p",{className:"text-white text-2xl mt-2",children:["",m.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 shadow-lg shadow-green-500/30",children:[n.jsx("p",{className:"text-sm text-green-100 uppercase tracking-wide",children:"Fixed Cost"}),n.jsxs("p",{className:"text-white text-2xl mt-2",children:["",p.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 shadow-lg shadow-purple-500/30",children:[n.jsx("p",{className:"text-sm text-purple-100 uppercase tracking-wide",children:"Total Expenses"}),n.jsxs("p",{className:"text-white text-2xl mt-2",children:["",(f+m+p).toLocaleString()]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(rr,{className:"w-5 h-5 text-blue-600"}),n.jsx("h2",{className:"text-xl text-gray-900",children:"Inventory Items"})]}),Object.keys(g).length>0?n.jsx("div",{className:"space-y-6",children:Object.entries(g).map(([k,N])=>n.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:y[k]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Quantity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Cost/Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Total Cost"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(b=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:b.itemName||n.jsx("span",{className:"text-red-600 italic",children:" Missing Name"})}),n.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:[b.quantity," ",b.unit]}),n.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:["",(b.costPerUnit||0).toFixed(2)]}),n.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",(b.totalCost||0).toLocaleString()]})]},b.id))})]})})]},k))}):n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(rr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{children:"No inventory items for this date"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(qn,{className:"w-5 h-5 text-orange-600"}),n.jsx("h2",{className:"text-xl text-gray-900",children:"Overhead Costs"})]}),Object.keys(v).length>0?n.jsx("div",{className:"space-y-6",children:Object.entries(v).map(([k,N])=>n.jsxs("div",{className:"border-l-4 border-orange-500 pl-4",children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:y[k]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Description"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(b=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:b.description}),n.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",b.amount.toLocaleString()]})]},b.id))})]})})]},k))}):n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(qn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{children:"No overhead costs for this date"})]})]}),u.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(hn,{className:"w-5 h-5 text-green-600"}),n.jsx("h2",{className:"text-xl text-gray-900",children:"Fixed Costs"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Description"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(k=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:y[k.category]}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:k.description}),n.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",k.amount.toLocaleString()]})]},k.id))})]})})]}),w&&n.jsx("div",{className:"mt-6",children:n.jsxs("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",onClick:()=>i(!0),children:[n.jsx(Dr,{className:"w-5 h-5 mr-2"}),"Monthly Stock Recalibration"]})}),s&&n.jsx(_2,{context:e,selectedStoreId:o,onClose:()=>i(!1)}),n.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(dj,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsx("div",{children:n.jsx("p",{className:"text-sm text-blue-800",children:w?"You are viewing inventory data in read-only mode. Only Operations Managers can add or edit inventory items.":"You are viewing inventory data in read-only mode. To add or modify inventory items, please contact your Operations Manager."})})]})})]})}function S5(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=S5(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function nr(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=S5(e))&&(a&&(a+=" "),a+=t);return a}var zy,lC;function us(){if(lC)return zy;lC=1;var e=Array.isArray;return zy=e,zy}var Wy,cC;function _5(){if(cC)return Wy;cC=1;var e=typeof rm=="object"&&rm&&rm.Object===Object&&rm;return Wy=e,Wy}var Ky,dC;function Hi(){if(dC)return Ky;dC=1;var e=_5(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Ky=r,Ky}var Vy,uC;function qf(){if(uC)return Vy;uC=1;var e=Hi(),t=e.Symbol;return Vy=t,Vy}var Gy,hC;function qq(){if(hC)return Gy;hC=1;var e=qf(),t=Object.prototype,r=t.hasOwnProperty,a=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=r.call(o,s),d=o[s];try{o[s]=void 0;var u=!0}catch{}var f=a.call(o);return u&&(l?o[s]=d:delete o[s]),f}return Gy=i,Gy}var Yy,fC;function zq(){if(fC)return Yy;fC=1;var e=Object.prototype,t=e.toString;function r(a){return t.call(a)}return Yy=r,Yy}var Xy,mC;function Co(){if(mC)return Xy;mC=1;var e=qf(),t=qq(),r=zq(),a="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:a:i&&i in Object(l)?t(l):r(l)}return Xy=o,Xy}var Jy,pC;function Ao(){if(pC)return Jy;pC=1;function e(t){return t!=null&&typeof t=="object"}return Jy=e,Jy}var Qy,gC;function su(){if(gC)return Qy;gC=1;var e=Co(),t=Ao(),r="[object Symbol]";function a(s){return typeof s=="symbol"||t(s)&&e(s)==r}return Qy=a,Qy}var Zy,xC;function E2(){if(xC)return Zy;xC=1;var e=us(),t=su(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:a.test(i)||!r.test(i)||o!=null&&i in Object(o)}return Zy=s,Zy}var ev,yC;function hl(){if(yC)return ev;yC=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return ev=e,ev}var tv,vC;function C2(){if(vC)return tv;vC=1;var e=Co(),t=hl(),r="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var d=e(l);return d==a||d==s||d==r||d==i}return tv=o,tv}var rv,bC;function Wq(){if(bC)return rv;bC=1;var e=Hi(),t=e["__core-js_shared__"];return rv=t,rv}var nv,wC;function Kq(){if(wC)return nv;wC=1;var e=Wq(),t=(function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function r(a){return!!t&&t in a}return nv=r,nv}var av,jC;function E5(){if(jC)return av;jC=1;var e=Function.prototype,t=e.toString;function r(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return av=r,av}var sv,NC;function Vq(){if(NC)return sv;NC=1;var e=C2(),t=Kq(),r=hl(),a=E5(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,d=o.toString,u=l.hasOwnProperty,f=RegExp("^"+d.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(p){if(!r(p)||t(p))return!1;var g=e(p)?f:i;return g.test(a(p))}return sv=m,sv}var iv,kC;function Gq(){if(kC)return iv;kC=1;function e(t,r){return t?.[r]}return iv=e,iv}var ov,SC;function xc(){if(SC)return ov;SC=1;var e=Vq(),t=Gq();function r(a,s){var i=t(a,s);return e(i)?i:void 0}return ov=r,ov}var lv,_C;function yg(){if(_C)return lv;_C=1;var e=xc(),t=e(Object,"create");return lv=t,lv}var cv,EC;function Yq(){if(EC)return cv;EC=1;var e=yg();function t(){this.__data__=e?e(null):{},this.size=0}return cv=t,cv}var dv,CC;function Xq(){if(CC)return dv;CC=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return dv=e,dv}var uv,AC;function Jq(){if(AC)return uv;AC=1;var e=yg(),t="__lodash_hash_undefined__",r=Object.prototype,a=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return a.call(o,i)?o[i]:void 0}return uv=s,uv}var hv,TC;function Qq(){if(TC)return hv;TC=1;var e=yg(),t=Object.prototype,r=t.hasOwnProperty;function a(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return hv=a,hv}var fv,OC;function Zq(){if(OC)return fv;OC=1;var e=yg(),t="__lodash_hash_undefined__";function r(a,s){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=e&&s===void 0?t:s,this}return fv=r,fv}var mv,PC;function ez(){if(PC)return mv;PC=1;var e=Yq(),t=Xq(),r=Jq(),a=Qq(),s=Zq();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,mv=i,mv}var pv,IC;function tz(){if(IC)return pv;IC=1;function e(){this.__data__=[],this.size=0}return pv=e,pv}var gv,DC;function A2(){if(DC)return gv;DC=1;function e(t,r){return t===r||t!==t&&r!==r}return gv=e,gv}var xv,MC;function vg(){if(MC)return xv;MC=1;var e=A2();function t(r,a){for(var s=r.length;s--;)if(e(r[s][0],a))return s;return-1}return xv=t,xv}var yv,RC;function rz(){if(RC)return yv;RC=1;var e=vg(),t=Array.prototype,r=t.splice;function a(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return yv=a,yv}var vv,FC;function nz(){if(FC)return vv;FC=1;var e=vg();function t(r){var a=this.__data__,s=e(a,r);return s<0?void 0:a[s][1]}return vv=t,vv}var bv,$C;function az(){if($C)return bv;$C=1;var e=vg();function t(r){return e(this.__data__,r)>-1}return bv=t,bv}var wv,LC;function sz(){if(LC)return wv;LC=1;var e=vg();function t(r,a){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,a])):s[i][1]=a,this}return wv=t,wv}var jv,BC;function bg(){if(BC)return jv;BC=1;var e=tz(),t=rz(),r=nz(),a=az(),s=sz();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,jv=i,jv}var Nv,UC;function T2(){if(UC)return Nv;UC=1;var e=xc(),t=Hi(),r=e(t,"Map");return Nv=r,Nv}var kv,HC;function iz(){if(HC)return kv;HC=1;var e=ez(),t=bg(),r=T2();function a(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return kv=a,kv}var Sv,qC;function oz(){if(qC)return Sv;qC=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return Sv=e,Sv}var _v,zC;function wg(){if(zC)return _v;zC=1;var e=oz();function t(r,a){var s=r.__data__;return e(a)?s[typeof a=="string"?"string":"hash"]:s.map}return _v=t,_v}var Ev,WC;function lz(){if(WC)return Ev;WC=1;var e=wg();function t(r){var a=e(this,r).delete(r);return this.size-=a?1:0,a}return Ev=t,Ev}var Cv,KC;function cz(){if(KC)return Cv;KC=1;var e=wg();function t(r){return e(this,r).get(r)}return Cv=t,Cv}var Av,VC;function dz(){if(VC)return Av;VC=1;var e=wg();function t(r){return e(this,r).has(r)}return Av=t,Av}var Tv,GC;function uz(){if(GC)return Tv;GC=1;var e=wg();function t(r,a){var s=e(this,r),i=s.size;return s.set(r,a),this.size+=s.size==i?0:1,this}return Tv=t,Tv}var Ov,YC;function O2(){if(YC)return Ov;YC=1;var e=iz(),t=lz(),r=cz(),a=dz(),s=uz();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,Ov=i,Ov}var Pv,XC;function C5(){if(XC)return Pv;XC=1;var e=O2(),t="Expected a function";function r(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],d=i.cache;if(d.has(l))return d.get(l);var u=a.apply(this,o);return i.cache=d.set(l,u)||d,u};return i.cache=new(r.Cache||e),i}return r.Cache=e,Pv=r,Pv}var Iv,JC;function hz(){if(JC)return Iv;JC=1;var e=C5(),t=500;function r(a){var s=e(a,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return Iv=r,Iv}var Dv,QC;function fz(){if(QC)return Dv;QC=1;var e=hz(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,d,u){i.push(d?u.replace(r,"$1"):l||o)}),i});return Dv=a,Dv}var Mv,ZC;function P2(){if(ZC)return Mv;ZC=1;function e(t,r){for(var a=-1,s=t==null?0:t.length,i=Array(s);++a<s;)i[a]=r(t[a],a,t);return i}return Mv=e,Mv}var Rv,eA;function mz(){if(eA)return Rv;eA=1;var e=qf(),t=P2(),r=us(),a=su(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(a(l))return i?i.call(l):"";var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}return Rv=o,Rv}var Fv,tA;function A5(){if(tA)return Fv;tA=1;var e=mz();function t(r){return r==null?"":e(r)}return Fv=t,Fv}var $v,rA;function T5(){if(rA)return $v;rA=1;var e=us(),t=E2(),r=fz(),a=A5();function s(i,o){return e(i)?i:t(i,o)?[i]:r(a(i))}return $v=s,$v}var Lv,nA;function jg(){if(nA)return Lv;nA=1;var e=su();function t(r){if(typeof r=="string"||e(r))return r;var a=r+"";return a=="0"&&1/r==-1/0?"-0":a}return Lv=t,Lv}var Bv,aA;function I2(){if(aA)return Bv;aA=1;var e=T5(),t=jg();function r(a,s){s=e(s,a);for(var i=0,o=s.length;a!=null&&i<o;)a=a[t(s[i++])];return i&&i==o?a:void 0}return Bv=r,Bv}var Uv,sA;function O5(){if(sA)return Uv;sA=1;var e=I2();function t(r,a,s){var i=r==null?void 0:e(r,a);return i===void 0?s:i}return Uv=t,Uv}var pz=O5();const Es=qr(pz);var Hv,iA;function gz(){if(iA)return Hv;iA=1;function e(t){return t==null}return Hv=e,Hv}var xz=gz();const sr=qr(xz);var qv,oA;function yz(){if(oA)return qv;oA=1;var e=Co(),t=us(),r=Ao(),a="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==a}return qv=s,qv}var vz=yz();const ac=qr(vz);var bz=C2();const Kt=qr(bz);var wz=hl();const iu=qr(wz);var zv={exports:{}},Br={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lA;function jz(){if(lA)return Br;lA=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function y(w){if(typeof w=="object"&&w!==null){var k=w.$$typeof;switch(k){case e:switch(w=w.type,w){case r:case s:case a:case u:case f:return w;default:switch(w=w&&w.$$typeof,w){case l:case o:case d:case p:case m:case i:return w;default:return k}}case t:return k}}}return Br.ContextConsumer=o,Br.ContextProvider=i,Br.Element=e,Br.ForwardRef=d,Br.Fragment=r,Br.Lazy=p,Br.Memo=m,Br.Portal=t,Br.Profiler=s,Br.StrictMode=a,Br.Suspense=u,Br.SuspenseList=f,Br.isAsyncMode=function(){return!1},Br.isConcurrentMode=function(){return!1},Br.isContextConsumer=function(w){return y(w)===o},Br.isContextProvider=function(w){return y(w)===i},Br.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},Br.isForwardRef=function(w){return y(w)===d},Br.isFragment=function(w){return y(w)===r},Br.isLazy=function(w){return y(w)===p},Br.isMemo=function(w){return y(w)===m},Br.isPortal=function(w){return y(w)===t},Br.isProfiler=function(w){return y(w)===s},Br.isStrictMode=function(w){return y(w)===a},Br.isSuspense=function(w){return y(w)===u},Br.isSuspenseList=function(w){return y(w)===f},Br.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===s||w===a||w===u||w===f||w===g||typeof w=="object"&&w!==null&&(w.$$typeof===p||w.$$typeof===m||w.$$typeof===i||w.$$typeof===o||w.$$typeof===d||w.$$typeof===v||w.getModuleId!==void 0)},Br.typeOf=y,Br}var cA;function Nz(){return cA||(cA=1,zv.exports=jz()),zv.exports}var kz=Nz(),Wv,dA;function P5(){if(dA)return Wv;dA=1;var e=Co(),t=Ao(),r="[object Number]";function a(s){return typeof s=="number"||t(s)&&e(s)==r}return Wv=a,Wv}var Kv,uA;function Sz(){if(uA)return Kv;uA=1;var e=P5();function t(r){return e(r)&&r!=+r}return Kv=t,Kv}var _z=Sz();const zf=qr(_z);var Ez=P5();const Cz=qr(Ez);var Ga=function(t){return t===0?0:t>0?1:-1},Kl=function(t){return ac(t)&&t.indexOf("%")===t.length-1},gt=function(t){return Cz(t)&&!zf(t)},Az=function(t){return sr(t)},na=function(t){return gt(t)||ac(t)},Tz=0,ou=function(t){var r=++Tz;return"".concat(t||"").concat(r)},Ya=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!gt(t)&&!ac(t))return a;var i;if(Kl(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return zf(i)&&(i=a),s&&i>r&&(i=r),i},Qo=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Oz=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,a={},s=0;s<r;s++)if(!a[t[s]])a[t[s]]=!0;else return!0;return!1},ja=function(t,r){return gt(t)&&gt(r)?function(a){return t+a*(r-t)}:function(){return r}};function zm(e,t,r){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):Es(a,t))===r})}var Pz=function(t,r){return gt(t)&&gt(r)?t-r:ac(t)&&ac(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function bd(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function Cj(e){"@babel/helpers - typeof";return Cj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cj(e)}var Iz=["viewBox","children"],Dz=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],hA=["points","pathLength"],Vv={svg:Iz,polygon:hA,polyline:hA},D2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Wm=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(M.isValidElement(t)&&(a=t.props),!iu(a))return null;var s={};return Object.keys(a).forEach(function(i){D2.includes(i)&&(s[i]=r||function(o){return a[i](a,o)})}),s},Mz=function(t,r,a){return function(s){return t(r,a,s),null}},sc=function(t,r,a){if(!iu(t)||Cj(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];D2.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=Mz(o,r,a))}),s},Rz=["children"],Fz=["children"];function fA(e,t){if(e==null)return{};var r=$z(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function $z(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Aj(e){"@babel/helpers - typeof";return Aj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Aj(e)}var mA={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},yo=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},pA=null,Gv=null,M2=function e(t){if(t===pA&&Array.isArray(Gv))return Gv;var r=[];return M.Children.forEach(t,function(a){sr(a)||(kz.isFragment(a)?r=r.concat(e(a.props.children)):r.push(a))}),Gv=r,pA=t,r};function Cs(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(function(s){return yo(s)}):a=[yo(t)],M2(e).forEach(function(s){var i=Es(s,"type.displayName")||Es(s,"type.name");a.indexOf(i)!==-1&&r.push(s)}),r}function bs(e,t){var r=Cs(e,t);return r&&r[0]}var gA=function(t){if(!t||!t.props)return!1;var r=t.props,a=r.width,s=r.height;return!(!gt(a)||a<=0||!gt(s)||s<=0)},Lz=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Bz=function(t){return t&&t.type&&ac(t.type)&&Lz.indexOf(t.type)>=0},Uz=function(t){return t&&Aj(t)==="object"&&"clipDot"in t},Hz=function(t,r,a,s){var i,o=(i=Vv?.[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Kt(t)&&(s&&o.includes(r)||Dz.includes(r))||a&&D2.includes(r)},Rt=function(t,r,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(M.isValidElement(t)&&(s=t.props),!iu(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;Hz((l=s)===null||l===void 0?void 0:l[o],o,r,a)&&(i[o]=s[o])}),i},Tj=function e(t,r){if(t===r)return!0;var a=M.Children.count(t);if(a!==M.Children.count(r))return!1;if(a===0)return!0;if(a===1)return xA(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<a;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!xA(i,o))return!1}return!0},xA=function(t,r){if(sr(t)&&sr(r))return!0;if(!sr(t)&&!sr(r)){var a=t.props||{},s=a.children,i=fA(a,Rz),o=r.props||{},l=o.children,d=fA(o,Fz);return s&&l?bd(i,d)&&Tj(s,l):!s&&!l?bd(i,d):!1}return!1},yA=function(t,r){var a=[],s={};return M2(t).forEach(function(i,o){if(Bz(i))a.push(i);else if(i){var l=yo(i.type),d=r[l]||{},u=d.handler,f=d.once;if(u&&(!f||!s[l])){var m=u(i,l,o);a.push(m),s[l]=!0}}}),a},qz=function(t){var r=t&&t.type;return r&&mA[r]?mA[r]:null},zz=function(t,r){return M2(r).indexOf(t)},Wz=["children","width","height","viewBox","className","style","title","desc"];function Oj(){return Oj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Oj.apply(this,arguments)}function Kz(e,t){if(e==null)return{};var r=Vz(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Vz(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Pj(e){var t=e.children,r=e.width,a=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,d=e.desc,u=Kz(e,Wz),f=s||{width:r,height:a,x:0,y:0},m=nr("recharts-surface",i);return xe.createElement("svg",Oj({},Rt(u,!0,"svg"),{className:m,width:r,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),xe.createElement("title",null,l),xe.createElement("desc",null,d),t)}var Gz=["children","className"];function Ij(){return Ij=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ij.apply(this,arguments)}function Yz(e,t){if(e==null)return{};var r=Xz(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Xz(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var Sr=xe.forwardRef(function(e,t){var r=e.children,a=e.className,s=Yz(e,Gz),i=nr("recharts-layer",a);return xe.createElement("g",Ij({className:i},Rt(s,!0),{ref:t}),r)}),bi=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]},Yv,vA;function Jz(){if(vA)return Yv;vA=1;function e(t,r,a){var s=-1,i=t.length;r<0&&(r=-r>i?0:i+r),a=a>i?i:a,a<0&&(a+=i),i=r>a?0:a-r>>>0,r>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+r];return o}return Yv=e,Yv}var Xv,bA;function Qz(){if(bA)return Xv;bA=1;var e=Jz();function t(r,a,s){var i=r.length;return s=s===void 0?i:s,!a&&s>=i?r:e(r,a,s)}return Xv=t,Xv}var Jv,wA;function I5(){if(wA)return Jv;wA=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+r+a,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function d(u){return l.test(u)}return Jv=d,Jv}var Qv,jA;function Zz(){if(jA)return Qv;jA=1;function e(t){return t.split("")}return Qv=e,Qv}var Zv,NA;function eW(){if(NA)return Zv;NA=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+r+a,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",d="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+d+")",f="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",v=u+"?",y="["+i+"]?",w="(?:"+g+"(?:"+[f,m,p].join("|")+")"+y+v+")*",k=y+v+w,N="(?:"+[f+l+"?",l,m,p,o].join("|")+")",b=RegExp(d+"(?="+d+")|"+N+k,"g");function A(E){return E.match(b)||[]}return Zv=A,Zv}var eb,kA;function tW(){if(kA)return eb;kA=1;var e=Zz(),t=I5(),r=eW();function a(s){return t(s)?r(s):e(s)}return eb=a,eb}var tb,SA;function rW(){if(SA)return tb;SA=1;var e=Qz(),t=I5(),r=tW(),a=A5();function s(i){return function(o){o=a(o);var l=t(o)?r(o):void 0,d=l?l[0]:o.charAt(0),u=l?e(l,1).join(""):o.slice(1);return d[i]()+u}}return tb=s,tb}var rb,_A;function nW(){if(_A)return rb;_A=1;var e=rW(),t=e("toUpperCase");return rb=t,rb}var aW=nW();const Ng=qr(aW);function tn(e){return function(){return e}}const D5=Math.cos,Km=Math.sin,ki=Math.sqrt,Vm=Math.PI,kg=2*Vm,Dj=Math.PI,Mj=2*Dj,$l=1e-6,sW=Mj-$l;function M5(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function iW(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return M5;const r=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+a[s]}}class oW{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?M5:iW(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,s){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,r,a,s,i,o){this._append`C${+t},${+r},${+a},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,a,s,i){if(t=+t,r=+r,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,d=a-t,u=s-r,f=o-t,m=l-r,p=f*f+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>$l)if(!(Math.abs(m*d-u*f)>$l)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let g=a-o,v=s-l,y=d*d+u*u,w=g*g+v*v,k=Math.sqrt(y),N=Math.sqrt(p),b=i*Math.tan((Dj-Math.acos((y+p-w)/(2*k*N)))/2),A=b/N,E=b/k;Math.abs(A-1)>$l&&this._append`L${t+A*f},${r+A*m}`,this._append`A${i},${i},0,0,${+(m*g>f*v)},${this._x1=t+E*d},${this._y1=r+E*u}`}}arc(t,r,a,s,i,o){if(t=+t,r=+r,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(s),d=a*Math.sin(s),u=t+l,f=r+d,m=1^o,p=o?s-i:i-s;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>$l||Math.abs(this._y1-f)>$l)&&this._append`L${u},${f}`,a&&(p<0&&(p=p%Mj+Mj),p>sW?this._append`A${a},${a},0,1,${m},${t-l},${r-d}A${a},${a},0,1,${m},${this._x1=u},${this._y1=f}`:p>$l&&this._append`A${a},${a},0,${+(p>=Dj)},${m},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function R2(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new oW(t)}function F2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function R5(e){this._context=e}R5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Sg(e){return new R5(e)}function F5(e){return e[0]}function $5(e){return e[1]}function L5(e,t){var r=tn(!0),a=null,s=Sg,i=null,o=R2(l);e=typeof e=="function"?e:e===void 0?F5:tn(e),t=typeof t=="function"?t:t===void 0?$5:tn(t);function l(d){var u,f=(d=F2(d)).length,m,p=!1,g;for(a==null&&(i=s(g=o())),u=0;u<=f;++u)!(u<f&&r(m=d[u],u,d))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(m,u,d),+t(m,u,d));if(g)return i=null,g+""||null}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:tn(+d),l):e},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:tn(+d),l):t},l.defined=function(d){return arguments.length?(r=typeof d=="function"?d:tn(!!d),l):r},l.curve=function(d){return arguments.length?(s=d,a!=null&&(i=s(a)),l):s},l.context=function(d){return arguments.length?(d==null?a=i=null:i=s(a=d),l):a},l}function um(e,t,r){var a=null,s=tn(!0),i=null,o=Sg,l=null,d=R2(u);e=typeof e=="function"?e:e===void 0?F5:tn(+e),t=typeof t=="function"?t:tn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?$5:tn(+r);function u(m){var p,g,v,y=(m=F2(m)).length,w,k=!1,N,b=new Array(y),A=new Array(y);for(i==null&&(l=o(N=d())),p=0;p<=y;++p){if(!(p<y&&s(w=m[p],p,m))===k)if(k=!k)g=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=p-1;v>=g;--v)l.point(b[v],A[v]);l.lineEnd(),l.areaEnd()}k&&(b[p]=+e(w,p,m),A[p]=+t(w,p,m),l.point(a?+a(w,p,m):b[p],r?+r(w,p,m):A[p]))}if(N)return l=null,N+""||null}function f(){return L5().defined(s).curve(o).context(i)}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:tn(+m),a=null,u):e},u.x0=function(m){return arguments.length?(e=typeof m=="function"?m:tn(+m),u):e},u.x1=function(m){return arguments.length?(a=m==null?null:typeof m=="function"?m:tn(+m),u):a},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:tn(+m),r=null,u):t},u.y0=function(m){return arguments.length?(t=typeof m=="function"?m:tn(+m),u):t},u.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:tn(+m),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(a).y(t)},u.defined=function(m){return arguments.length?(s=typeof m=="function"?m:tn(!!m),u):s},u.curve=function(m){return arguments.length?(o=m,i!=null&&(l=o(i)),u):o},u.context=function(m){return arguments.length?(m==null?i=l=null:l=o(i=m),u):i},u}class B5{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function lW(e){return new B5(e,!0)}function cW(e){return new B5(e,!1)}const $2={draw(e,t){const r=ki(t/Vm);e.moveTo(r,0),e.arc(0,0,r,0,kg)}},dW={draw(e,t){const r=ki(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},U5=ki(1/3),uW=U5*2,hW={draw(e,t){const r=ki(t/uW),a=r*U5;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},fW={draw(e,t){const r=ki(t),a=-r/2;e.rect(a,a,r,r)}},mW=.8908130915292852,H5=Km(Vm/10)/Km(7*Vm/10),pW=Km(kg/10)*H5,gW=-D5(kg/10)*H5,xW={draw(e,t){const r=ki(t*mW),a=pW*r,s=gW*r;e.moveTo(0,-r),e.lineTo(a,s);for(let i=1;i<5;++i){const o=kg*i/5,l=D5(o),d=Km(o);e.lineTo(d*r,-l*r),e.lineTo(l*a-d*s,d*a+l*s)}e.closePath()}},nb=ki(3),yW={draw(e,t){const r=-ki(t/(nb*3));e.moveTo(0,r*2),e.lineTo(-nb*r,-r),e.lineTo(nb*r,-r),e.closePath()}},$s=-.5,Ls=ki(3)/2,Rj=1/ki(12),vW=(Rj/2+1)*3,bW={draw(e,t){const r=ki(t/vW),a=r/2,s=r*Rj,i=a,o=r*Rj+r,l=-i,d=o;e.moveTo(a,s),e.lineTo(i,o),e.lineTo(l,d),e.lineTo($s*a-Ls*s,Ls*a+$s*s),e.lineTo($s*i-Ls*o,Ls*i+$s*o),e.lineTo($s*l-Ls*d,Ls*l+$s*d),e.lineTo($s*a+Ls*s,$s*s-Ls*a),e.lineTo($s*i+Ls*o,$s*o-Ls*i),e.lineTo($s*l+Ls*d,$s*d-Ls*l),e.closePath()}};function wW(e,t){let r=null,a=R2(s);e=typeof e=="function"?e:tn(e||$2),t=typeof t=="function"?t:tn(t===void 0?64:+t);function s(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:tn(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:tn(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Gm(){}function Ym(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function q5(e){this._context=e}q5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ym(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ym(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jW(e){return new q5(e)}function z5(e){this._context=e}z5.prototype={areaStart:Gm,areaEnd:Gm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ym(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function NW(e){return new z5(e)}function W5(e){this._context=e}W5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:Ym(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kW(e){return new W5(e)}function K5(e){this._context=e}K5.prototype={areaStart:Gm,areaEnd:Gm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function SW(e){return new K5(e)}function EA(e){return e<0?-1:1}function CA(e,t,r){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),o=(r-e._y1)/(s||a<0&&-0),l=(i*s+o*a)/(a+s);return(EA(i)+EA(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function AA(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function ab(e,t,r){var a=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,s+l*t,i-l,o-l*r,i,o)}function Xm(e){this._context=e}Xm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ab(this,this._t0,AA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ab(this,AA(this,r=CA(this,e,t)),r);break;default:ab(this,this._t0,r=CA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function V5(e){this._context=new G5(e)}(V5.prototype=Object.create(Xm.prototype)).point=function(e,t){Xm.prototype.point.call(this,t,e)};function G5(e){this._context=e}G5.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,s,i){this._context.bezierCurveTo(t,e,a,r,i,s)}};function _W(e){return new Xm(e)}function EW(e){return new V5(e)}function Y5(e){this._context=e}Y5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=TA(e),s=TA(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function TA(e){var t,r=e.length-1,a,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=s[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function CW(e){return new Y5(e)}function _g(e,t){this._context=e,this._t=t}_g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function AW(e){return new _g(e,.5)}function TW(e){return new _g(e,0)}function OW(e){return new _g(e,1)}function _d(e,t){if((o=e.length)>1)for(var r=1,a,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function Fj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function PW(e,t){return e[t]}function IW(e){const t=[];return t.key=e,t}function DW(){var e=tn([]),t=Fj,r=_d,a=PW;function s(i){var o=Array.from(e.apply(this,arguments),IW),l,d=o.length,u=-1,f;for(const m of i)for(l=0,++u;l<d;++l)(o[l][u]=[0,+a(m,o[l].key,u,i)]).data=m;for(l=0,f=F2(t(o));l<d;++l)o[f[l]].index=l;return r(o,f),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:tn(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:tn(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?Fj:typeof i=="function"?i:tn(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??_d,s):r},s}function MW(e,t){if((a=e.length)>0){for(var r,a,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<a;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<a;++r)e[r][s][1]/=o}_d(e,t)}}function RW(e,t){if((s=e.length)>0){for(var r=0,a=e[t[0]],s,i=a.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;a[r][1]+=a[r][0]=-l/2}_d(e,t)}}function FW(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,a=1,s,i,o;a<i;++a){for(var l=0,d=0,u=0;l<o;++l){for(var f=e[t[l]],m=f[a][1]||0,p=f[a-1][1]||0,g=(m-p)/2,v=0;v<l;++v){var y=e[t[v]],w=y[a][1]||0,k=y[a-1][1]||0;g+=w-k}d+=m,u+=g*m}s[a-1][1]+=s[a-1][0]=r,d&&(r-=u/d)}s[a-1][1]+=s[a-1][0]=r,_d(e,t)}}function Kh(e){"@babel/helpers - typeof";return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kh(e)}var $W=["type","size","sizeType"];function $j(){return $j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$j.apply(this,arguments)}function OA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function PA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OA(Object(r),!0).forEach(function(a){LW(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function LW(e,t,r){return t=BW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BW(e){var t=UW(e,"string");return Kh(t)=="symbol"?t:t+""}function UW(e,t){if(Kh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Kh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HW(e,t){if(e==null)return{};var r=qW(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function qW(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var X5={symbolCircle:$2,symbolCross:dW,symbolDiamond:hW,symbolSquare:fW,symbolStar:xW,symbolTriangle:yW,symbolWye:bW},zW=Math.PI/180,WW=function(t){var r="symbol".concat(Ng(t));return X5[r]||$2},KW=function(t,r,a){if(r==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*zW;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},VW=function(t,r){X5["symbol".concat(Ng(t))]=r},L2=function(t){var r=t.type,a=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,d=HW(t,$W),u=PA(PA({},d),{},{type:a,size:i,sizeType:l}),f=function(){var w=WW(a),k=wW().type(w).size(KW(i,l,a));return k()},m=u.className,p=u.cx,g=u.cy,v=Rt(u,!0);return p===+p&&g===+g&&i===+i?xe.createElement("path",$j({},v,{className:nr("recharts-symbols",m),transform:"translate(".concat(p,", ").concat(g,")"),d:f()})):null};L2.registerSymbol=VW;function Ed(e){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ed(e)}function Lj(){return Lj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Lj.apply(this,arguments)}function IA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function GW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IA(Object(r),!0).forEach(function(a){Vh(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function YW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XW(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Q5(a.key),a)}}function JW(e,t,r){return t&&XW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function QW(e,t,r){return t=Jm(t),ZW(e,J5()?Reflect.construct(t,r||[],Jm(e).constructor):t.apply(e,r))}function ZW(e,t){if(t&&(Ed(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eK(e)}function eK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J5=function(){return!!e})()}function Jm(e){return Jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jm(e)}function tK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bj(e,t)}function Bj(e,t){return Bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Bj(e,t)}function Vh(e,t,r){return t=Q5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q5(e){var t=rK(e,"string");return Ed(t)=="symbol"?t:t+""}function rK(e,t){if(Ed(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ed(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bs=32,B2=(function(e){function t(){return YW(this,t),QW(this,t,arguments)}return tK(t,e),JW(t,[{key:"renderIcon",value:function(a){var s=this.props.inactiveColor,i=Bs/2,o=Bs/6,l=Bs/3,d=a.inactive?s:a.color;if(a.type==="plainline")return xe.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:Bs,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return xe.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Bs,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return xe.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Bs/8,"h").concat(Bs,"v").concat(Bs*3/4,"h").concat(-Bs,"z"),className:"recharts-legend-icon"});if(xe.isValidElement(a.legendIcon)){var u=GW({},a);return delete u.legendIcon,xe.cloneElement(a.legendIcon,u)}return xe.createElement(L2,{fill:d,cx:i,cy:i,size:Bs,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,d=s.formatter,u=s.inactiveColor,f={x:0,y:0,width:Bs,height:Bs},m={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(g,v){var y=g.formatter||d,w=nr(Vh(Vh({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",g.inactive));if(g.type==="none")return null;var k=Kt(g.value)?null:g.value;bi(!Kt(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var N=g.inactive?u:g.color;return xe.createElement("li",Lj({className:w,style:m,key:"legend-item-".concat(v)},sc(a.props,g,v)),xe.createElement(Pj,{width:o,height:o,viewBox:f,style:p},a.renderIcon(g)),xe.createElement("span",{className:"recharts-legend-item-text",style:{color:N}},y?y(k,g,v):k))})}},{key:"render",value:function(){var a=this.props,s=a.payload,i=a.layout,o=a.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return xe.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(M.PureComponent);Vh(B2,"displayName","Legend");Vh(B2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var sb,DA;function nK(){if(DA)return sb;DA=1;var e=bg();function t(){this.__data__=new e,this.size=0}return sb=t,sb}var ib,MA;function aK(){if(MA)return ib;MA=1;function e(t){var r=this.__data__,a=r.delete(t);return this.size=r.size,a}return ib=e,ib}var ob,RA;function sK(){if(RA)return ob;RA=1;function e(t){return this.__data__.get(t)}return ob=e,ob}var lb,FA;function iK(){if(FA)return lb;FA=1;function e(t){return this.__data__.has(t)}return lb=e,lb}var cb,$A;function oK(){if($A)return cb;$A=1;var e=bg(),t=T2(),r=O2(),a=200;function s(i,o){var l=this.__data__;if(l instanceof e){var d=l.__data__;if(!t||d.length<a-1)return d.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(d)}return l.set(i,o),this.size=l.size,this}return cb=s,cb}var db,LA;function Z5(){if(LA)return db;LA=1;var e=bg(),t=nK(),r=aK(),a=sK(),s=iK(),i=oK();function o(l){var d=this.__data__=new e(l);this.size=d.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=a,o.prototype.has=s,o.prototype.set=i,db=o,db}var ub,BA;function lK(){if(BA)return ub;BA=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return ub=t,ub}var hb,UA;function cK(){if(UA)return hb;UA=1;function e(t){return this.__data__.has(t)}return hb=e,hb}var fb,HA;function eM(){if(HA)return fb;HA=1;var e=O2(),t=lK(),r=cK();function a(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return a.prototype.add=a.prototype.push=t,a.prototype.has=r,fb=a,fb}var mb,qA;function tM(){if(qA)return mb;qA=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(r(t[a],a,t))return!0;return!1}return mb=e,mb}var pb,zA;function rM(){if(zA)return pb;zA=1;function e(t,r){return t.has(r)}return pb=e,pb}var gb,WA;function nM(){if(WA)return gb;WA=1;var e=eM(),t=tM(),r=rM(),a=1,s=2;function i(o,l,d,u,f,m){var p=d&a,g=o.length,v=l.length;if(g!=v&&!(p&&v>g))return!1;var y=m.get(o),w=m.get(l);if(y&&w)return y==l&&w==o;var k=-1,N=!0,b=d&s?new e:void 0;for(m.set(o,l),m.set(l,o);++k<g;){var A=o[k],E=l[k];if(u)var S=p?u(E,A,k,l,o,m):u(A,E,k,o,l,m);if(S!==void 0){if(S)continue;N=!1;break}if(b){if(!t(l,function(_,C){if(!r(b,C)&&(A===_||f(A,_,d,u,m)))return b.push(C)})){N=!1;break}}else if(!(A===E||f(A,E,d,u,m))){N=!1;break}}return m.delete(o),m.delete(l),N}return gb=i,gb}var xb,KA;function dK(){if(KA)return xb;KA=1;var e=Hi(),t=e.Uint8Array;return xb=t,xb}var yb,VA;function uK(){if(VA)return yb;VA=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(s,i){a[++r]=[i,s]}),a}return yb=e,yb}var vb,GA;function U2(){if(GA)return vb;GA=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(s){a[++r]=s}),a}return vb=e,vb}var bb,YA;function hK(){if(YA)return bb;YA=1;var e=qf(),t=dK(),r=A2(),a=nM(),s=uK(),i=U2(),o=1,l=2,d="[object Boolean]",u="[object Date]",f="[object Error]",m="[object Map]",p="[object Number]",g="[object RegExp]",v="[object Set]",y="[object String]",w="[object Symbol]",k="[object ArrayBuffer]",N="[object DataView]",b=e?e.prototype:void 0,A=b?b.valueOf:void 0;function E(S,_,C,P,B,F,O){switch(C){case N:if(S.byteLength!=_.byteLength||S.byteOffset!=_.byteOffset)return!1;S=S.buffer,_=_.buffer;case k:return!(S.byteLength!=_.byteLength||!F(new t(S),new t(_)));case d:case u:case p:return r(+S,+_);case f:return S.name==_.name&&S.message==_.message;case g:case y:return S==_+"";case m:var R=s;case v:var Q=P&o;if(R||(R=i),S.size!=_.size&&!Q)return!1;var V=O.get(S);if(V)return V==_;P|=l,O.set(S,_);var J=a(R(S),R(_),P,B,F,O);return O.delete(S),J;case w:if(A)return A.call(S)==A.call(_)}return!1}return bb=E,bb}var wb,XA;function aM(){if(XA)return wb;XA=1;function e(t,r){for(var a=-1,s=r.length,i=t.length;++a<s;)t[i+a]=r[a];return t}return wb=e,wb}var jb,JA;function fK(){if(JA)return jb;JA=1;var e=aM(),t=us();function r(a,s,i){var o=s(a);return t(a)?o:e(o,i(a))}return jb=r,jb}var Nb,QA;function mK(){if(QA)return Nb;QA=1;function e(t,r){for(var a=-1,s=t==null?0:t.length,i=0,o=[];++a<s;){var l=t[a];r(l,a,t)&&(o[i++]=l)}return o}return Nb=e,Nb}var kb,ZA;function pK(){if(ZA)return kb;ZA=1;function e(){return[]}return kb=e,kb}var Sb,eT;function gK(){if(eT)return Sb;eT=1;var e=mK(),t=pK(),r=Object.prototype,a=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return a.call(o,l)}))}:t;return Sb=i,Sb}var _b,tT;function xK(){if(tT)return _b;tT=1;function e(t,r){for(var a=-1,s=Array(t);++a<t;)s[a]=r(a);return s}return _b=e,_b}var Eb,rT;function yK(){if(rT)return Eb;rT=1;var e=Co(),t=Ao(),r="[object Arguments]";function a(s){return t(s)&&e(s)==r}return Eb=a,Eb}var Cb,nT;function H2(){if(nT)return Cb;nT=1;var e=yK(),t=Ao(),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&a.call(o,"callee")&&!s.call(o,"callee")};return Cb=i,Cb}var uh={exports:{}},Ab,aT;function vK(){if(aT)return Ab;aT=1;function e(){return!1}return Ab=e,Ab}uh.exports;var sT;function sM(){return sT||(sT=1,(function(e,t){var r=Hi(),a=vK(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,d=l?l.isBuffer:void 0,u=d||a;e.exports=u})(uh,uh.exports)),uh.exports}var Tb,iT;function q2(){if(iT)return Tb;iT=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(a,s){var i=typeof a;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<s}return Tb=r,Tb}var Ob,oT;function z2(){if(oT)return Ob;oT=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Ob=t,Ob}var Pb,lT;function bK(){if(lT)return Pb;lT=1;var e=Co(),t=z2(),r=Ao(),a="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",d="[object Function]",u="[object Map]",f="[object Number]",m="[object Object]",p="[object RegExp]",g="[object Set]",v="[object String]",y="[object WeakMap]",w="[object ArrayBuffer]",k="[object DataView]",N="[object Float32Array]",b="[object Float64Array]",A="[object Int8Array]",E="[object Int16Array]",S="[object Int32Array]",_="[object Uint8Array]",C="[object Uint8ClampedArray]",P="[object Uint16Array]",B="[object Uint32Array]",F={};F[N]=F[b]=F[A]=F[E]=F[S]=F[_]=F[C]=F[P]=F[B]=!0,F[a]=F[s]=F[w]=F[i]=F[k]=F[o]=F[l]=F[d]=F[u]=F[f]=F[m]=F[p]=F[g]=F[v]=F[y]=!1;function O(R){return r(R)&&t(R.length)&&!!F[e(R)]}return Pb=O,Pb}var Ib,cT;function iM(){if(cT)return Ib;cT=1;function e(t){return function(r){return t(r)}}return Ib=e,Ib}var hh={exports:{}};hh.exports;var dT;function wK(){return dT||(dT=1,(function(e,t){var r=_5(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,o=i&&r.process,l=(function(){try{var d=s&&s.require&&s.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(hh,hh.exports)),hh.exports}var Db,uT;function oM(){if(uT)return Db;uT=1;var e=bK(),t=iM(),r=wK(),a=r&&r.isTypedArray,s=a?t(a):e;return Db=s,Db}var Mb,hT;function jK(){if(hT)return Mb;hT=1;var e=xK(),t=H2(),r=us(),a=sM(),s=q2(),i=oM(),o=Object.prototype,l=o.hasOwnProperty;function d(u,f){var m=r(u),p=!m&&t(u),g=!m&&!p&&a(u),v=!m&&!p&&!g&&i(u),y=m||p||g||v,w=y?e(u.length,String):[],k=w.length;for(var N in u)(f||l.call(u,N))&&!(y&&(N=="length"||g&&(N=="offset"||N=="parent")||v&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||s(N,k)))&&w.push(N);return w}return Mb=d,Mb}var Rb,fT;function NK(){if(fT)return Rb;fT=1;var e=Object.prototype;function t(r){var a=r&&r.constructor,s=typeof a=="function"&&a.prototype||e;return r===s}return Rb=t,Rb}var Fb,mT;function lM(){if(mT)return Fb;mT=1;function e(t,r){return function(a){return t(r(a))}}return Fb=e,Fb}var $b,pT;function kK(){if(pT)return $b;pT=1;var e=lM(),t=e(Object.keys,Object);return $b=t,$b}var Lb,gT;function SK(){if(gT)return Lb;gT=1;var e=NK(),t=kK(),r=Object.prototype,a=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))a.call(i,l)&&l!="constructor"&&o.push(l);return o}return Lb=s,Lb}var Bb,xT;function Wf(){if(xT)return Bb;xT=1;var e=C2(),t=z2();function r(a){return a!=null&&t(a.length)&&!e(a)}return Bb=r,Bb}var Ub,yT;function Eg(){if(yT)return Ub;yT=1;var e=jK(),t=SK(),r=Wf();function a(s){return r(s)?e(s):t(s)}return Ub=a,Ub}var Hb,vT;function _K(){if(vT)return Hb;vT=1;var e=fK(),t=gK(),r=Eg();function a(s){return e(s,r,t)}return Hb=a,Hb}var qb,bT;function EK(){if(bT)return qb;bT=1;var e=_K(),t=1,r=Object.prototype,a=r.hasOwnProperty;function s(i,o,l,d,u,f){var m=l&t,p=e(i),g=p.length,v=e(o),y=v.length;if(g!=y&&!m)return!1;for(var w=g;w--;){var k=p[w];if(!(m?k in o:a.call(o,k)))return!1}var N=f.get(i),b=f.get(o);if(N&&b)return N==o&&b==i;var A=!0;f.set(i,o),f.set(o,i);for(var E=m;++w<g;){k=p[w];var S=i[k],_=o[k];if(d)var C=m?d(_,S,k,o,i,f):d(S,_,k,i,o,f);if(!(C===void 0?S===_||u(S,_,l,d,f):C)){A=!1;break}E||(E=k=="constructor")}if(A&&!E){var P=i.constructor,B=o.constructor;P!=B&&"constructor"in i&&"constructor"in o&&!(typeof P=="function"&&P instanceof P&&typeof B=="function"&&B instanceof B)&&(A=!1)}return f.delete(i),f.delete(o),A}return qb=s,qb}var zb,wT;function CK(){if(wT)return zb;wT=1;var e=xc(),t=Hi(),r=e(t,"DataView");return zb=r,zb}var Wb,jT;function AK(){if(jT)return Wb;jT=1;var e=xc(),t=Hi(),r=e(t,"Promise");return Wb=r,Wb}var Kb,NT;function cM(){if(NT)return Kb;NT=1;var e=xc(),t=Hi(),r=e(t,"Set");return Kb=r,Kb}var Vb,kT;function TK(){if(kT)return Vb;kT=1;var e=xc(),t=Hi(),r=e(t,"WeakMap");return Vb=r,Vb}var Gb,ST;function OK(){if(ST)return Gb;ST=1;var e=CK(),t=T2(),r=AK(),a=cM(),s=TK(),i=Co(),o=E5(),l="[object Map]",d="[object Object]",u="[object Promise]",f="[object Set]",m="[object WeakMap]",p="[object DataView]",g=o(e),v=o(t),y=o(r),w=o(a),k=o(s),N=i;return(e&&N(new e(new ArrayBuffer(1)))!=p||t&&N(new t)!=l||r&&N(r.resolve())!=u||a&&N(new a)!=f||s&&N(new s)!=m)&&(N=function(b){var A=i(b),E=A==d?b.constructor:void 0,S=E?o(E):"";if(S)switch(S){case g:return p;case v:return l;case y:return u;case w:return f;case k:return m}return A}),Gb=N,Gb}var Yb,_T;function PK(){if(_T)return Yb;_T=1;var e=Z5(),t=nM(),r=hK(),a=EK(),s=OK(),i=us(),o=sM(),l=oM(),d=1,u="[object Arguments]",f="[object Array]",m="[object Object]",p=Object.prototype,g=p.hasOwnProperty;function v(y,w,k,N,b,A){var E=i(y),S=i(w),_=E?f:s(y),C=S?f:s(w);_=_==u?m:_,C=C==u?m:C;var P=_==m,B=C==m,F=_==C;if(F&&o(y)){if(!o(w))return!1;E=!0,P=!1}if(F&&!P)return A||(A=new e),E||l(y)?t(y,w,k,N,b,A):r(y,w,_,k,N,b,A);if(!(k&d)){var O=P&&g.call(y,"__wrapped__"),R=B&&g.call(w,"__wrapped__");if(O||R){var Q=O?y.value():y,V=R?w.value():w;return A||(A=new e),b(Q,V,k,N,A)}}return F?(A||(A=new e),a(y,w,k,N,b,A)):!1}return Yb=v,Yb}var Xb,ET;function W2(){if(ET)return Xb;ET=1;var e=PK(),t=Ao();function r(a,s,i,o,l){return a===s?!0:a==null||s==null||!t(a)&&!t(s)?a!==a&&s!==s:e(a,s,i,o,r,l)}return Xb=r,Xb}var Jb,CT;function IK(){if(CT)return Jb;CT=1;var e=Z5(),t=W2(),r=1,a=2;function s(i,o,l,d){var u=l.length,f=u,m=!d;if(i==null)return!f;for(i=Object(i);u--;){var p=l[u];if(m&&p[2]?p[1]!==i[p[0]]:!(p[0]in i))return!1}for(;++u<f;){p=l[u];var g=p[0],v=i[g],y=p[1];if(m&&p[2]){if(v===void 0&&!(g in i))return!1}else{var w=new e;if(d)var k=d(v,y,g,i,o,w);if(!(k===void 0?t(y,v,r|a,d,w):k))return!1}}return!0}return Jb=s,Jb}var Qb,AT;function dM(){if(AT)return Qb;AT=1;var e=hl();function t(r){return r===r&&!e(r)}return Qb=t,Qb}var Zb,TT;function DK(){if(TT)return Zb;TT=1;var e=dM(),t=Eg();function r(a){for(var s=t(a),i=s.length;i--;){var o=s[i],l=a[o];s[i]=[o,l,e(l)]}return s}return Zb=r,Zb}var ew,OT;function uM(){if(OT)return ew;OT=1;function e(t,r){return function(a){return a==null?!1:a[t]===r&&(r!==void 0||t in Object(a))}}return ew=e,ew}var tw,PT;function MK(){if(PT)return tw;PT=1;var e=IK(),t=DK(),r=uM();function a(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return tw=a,tw}var rw,IT;function RK(){if(IT)return rw;IT=1;function e(t,r){return t!=null&&r in Object(t)}return rw=e,rw}var nw,DT;function FK(){if(DT)return nw;DT=1;var e=T5(),t=H2(),r=us(),a=q2(),s=z2(),i=jg();function o(l,d,u){d=e(d,l);for(var f=-1,m=d.length,p=!1;++f<m;){var g=i(d[f]);if(!(p=l!=null&&u(l,g)))break;l=l[g]}return p||++f!=m?p:(m=l==null?0:l.length,!!m&&s(m)&&a(g,m)&&(r(l)||t(l)))}return nw=o,nw}var aw,MT;function $K(){if(MT)return aw;MT=1;var e=RK(),t=FK();function r(a,s){return a!=null&&t(a,s,e)}return aw=r,aw}var sw,RT;function LK(){if(RT)return sw;RT=1;var e=W2(),t=O5(),r=$K(),a=E2(),s=dM(),i=uM(),o=jg(),l=1,d=2;function u(f,m){return a(f)&&s(m)?i(o(f),m):function(p){var g=t(p,f);return g===void 0&&g===m?r(p,f):e(m,g,l|d)}}return sw=u,sw}var iw,FT;function lu(){if(FT)return iw;FT=1;function e(t){return t}return iw=e,iw}var ow,$T;function BK(){if($T)return ow;$T=1;function e(t){return function(r){return r?.[t]}}return ow=e,ow}var lw,LT;function UK(){if(LT)return lw;LT=1;var e=I2();function t(r){return function(a){return e(a,r)}}return lw=t,lw}var cw,BT;function HK(){if(BT)return cw;BT=1;var e=BK(),t=UK(),r=E2(),a=jg();function s(i){return r(i)?e(a(i)):t(i)}return cw=s,cw}var dw,UT;function qi(){if(UT)return dw;UT=1;var e=MK(),t=LK(),r=lu(),a=us(),s=HK();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?a(o)?t(o[0],o[1]):e(o):s(o)}return dw=i,dw}var uw,HT;function hM(){if(HT)return uw;HT=1;function e(t,r,a,s){for(var i=t.length,o=a+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return uw=e,uw}var hw,qT;function qK(){if(qT)return hw;qT=1;function e(t){return t!==t}return hw=e,hw}var fw,zT;function zK(){if(zT)return fw;zT=1;function e(t,r,a){for(var s=a-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return fw=e,fw}var mw,WT;function WK(){if(WT)return mw;WT=1;var e=hM(),t=qK(),r=zK();function a(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return mw=a,mw}var pw,KT;function KK(){if(KT)return pw;KT=1;var e=WK();function t(r,a){var s=r==null?0:r.length;return!!s&&e(r,a,0)>-1}return pw=t,pw}var gw,VT;function VK(){if(VT)return gw;VT=1;function e(t,r,a){for(var s=-1,i=t==null?0:t.length;++s<i;)if(a(r,t[s]))return!0;return!1}return gw=e,gw}var xw,GT;function GK(){if(GT)return xw;GT=1;function e(){}return xw=e,xw}var yw,YT;function YK(){if(YT)return yw;YT=1;var e=cM(),t=GK(),r=U2(),a=1/0,s=e&&1/r(new e([,-0]))[1]==a?function(i){return new e(i)}:t;return yw=s,yw}var vw,XT;function XK(){if(XT)return vw;XT=1;var e=eM(),t=KK(),r=VK(),a=rM(),s=YK(),i=U2(),o=200;function l(d,u,f){var m=-1,p=t,g=d.length,v=!0,y=[],w=y;if(f)v=!1,p=r;else if(g>=o){var k=u?null:s(d);if(k)return i(k);v=!1,p=a,w=new e}else w=u?[]:y;e:for(;++m<g;){var N=d[m],b=u?u(N):N;if(N=f||N!==0?N:0,v&&b===b){for(var A=w.length;A--;)if(w[A]===b)continue e;u&&w.push(b),y.push(N)}else p(w,b,f)||(w!==y&&w.push(b),y.push(N))}return y}return vw=l,vw}var bw,JT;function JK(){if(JT)return bw;JT=1;var e=qi(),t=XK();function r(a,s){return a&&a.length?t(a,e(s,2)):[]}return bw=r,bw}var QK=JK();const QT=qr(QK);function fM(e,t,r){return t===!0?QT(e,r):Kt(t)?QT(e,t):e}function Cd(e){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cd(e)}var ZK=["ref"];function ZT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ao(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZT(Object(r),!0).forEach(function(a){Cg(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function eV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e4(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,pM(a.key),a)}}function tV(e,t,r){return t&&e4(e.prototype,t),r&&e4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rV(e,t,r){return t=Qm(t),nV(e,mM()?Reflect.construct(t,r||[],Qm(e).constructor):t.apply(e,r))}function nV(e,t){if(t&&(Cd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aV(e)}function aV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mM=function(){return!!e})()}function Qm(e){return Qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qm(e)}function sV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uj(e,t)}function Uj(e,t){return Uj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Uj(e,t)}function Cg(e,t,r){return t=pM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pM(e){var t=iV(e,"string");return Cd(t)=="symbol"?t:t+""}function iV(e,t){if(Cd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Cd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function oV(e,t){if(e==null)return{};var r=lV(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function lV(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function cV(e){return e.value}function dV(e,t){if(xe.isValidElement(e))return xe.cloneElement(e,t);if(typeof e=="function")return xe.createElement(e,t);t.ref;var r=oV(t,ZK);return xe.createElement(B2,r)}var t4=1,ka=(function(e){function t(){var r;eV(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=rV(this,t,[].concat(s)),Cg(r,"lastBoundingBox",{width:-1,height:-1}),r}return sV(t,e),tV(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>t4||Math.abs(s.height-this.lastBoundingBox.height)>t4)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,a&&a(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ao({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,d=s.margin,u=s.chartWidth,f=s.chartHeight,m,p;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&i==="vertical"){var g=this.getBBoxSnapshot();m={left:((u||0)-g.width)/2}}else m=o==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();p={top:((f||0)-v.height)/2}}else p=l==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return ao(ao({},m),p)}},{key:"render",value:function(){var a=this,s=this.props,i=s.content,o=s.width,l=s.height,d=s.wrapperStyle,u=s.payloadUniqBy,f=s.payload,m=ao(ao({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(d)),d);return xe.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(g){a.wrapperNode=g}},dV(i,ao(ao({},this.props),{},{payload:fM(f,u,cV)})))}}],[{key:"getWithHeight",value:function(a,s){var i=ao(ao({},this.defaultProps),a.props),o=i.layout;return o==="vertical"&&gt(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||s}:null}}])})(M.PureComponent);Cg(ka,"displayName","Legend");Cg(ka,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var ww,r4;function uV(){if(r4)return ww;r4=1;var e=qf(),t=H2(),r=us(),a=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(a&&i&&i[a])}return ww=s,ww}var jw,n4;function gM(){if(n4)return jw;n4=1;var e=aM(),t=uV();function r(a,s,i,o,l){var d=-1,u=a.length;for(i||(i=t),l||(l=[]);++d<u;){var f=a[d];s>0&&i(f)?s>1?r(f,s-1,i,o,l):e(l,f):o||(l[l.length]=f)}return l}return jw=r,jw}var Nw,a4;function hV(){if(a4)return Nw;a4=1;function e(t){return function(r,a,s){for(var i=-1,o=Object(r),l=s(r),d=l.length;d--;){var u=l[t?d:++i];if(a(o[u],u,o)===!1)break}return r}}return Nw=e,Nw}var kw,s4;function fV(){if(s4)return kw;s4=1;var e=hV(),t=e();return kw=t,kw}var Sw,i4;function xM(){if(i4)return Sw;i4=1;var e=fV(),t=Eg();function r(a,s){return a&&e(a,s,t)}return Sw=r,Sw}var _w,o4;function mV(){if(o4)return _w;o4=1;var e=Wf();function t(r,a){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,l=a?o:-1,d=Object(s);(a?l--:++l<o)&&i(d[l],l,d)!==!1;);return s}}return _w=t,_w}var Ew,l4;function K2(){if(l4)return Ew;l4=1;var e=xM(),t=mV(),r=t(e);return Ew=r,Ew}var Cw,c4;function yM(){if(c4)return Cw;c4=1;var e=K2(),t=Wf();function r(a,s){var i=-1,o=t(a)?Array(a.length):[];return e(a,function(l,d,u){o[++i]=s(l,d,u)}),o}return Cw=r,Cw}var Aw,d4;function pV(){if(d4)return Aw;d4=1;function e(t,r){var a=t.length;for(t.sort(r);a--;)t[a]=t[a].value;return t}return Aw=e,Aw}var Tw,u4;function gV(){if(u4)return Tw;u4=1;var e=su();function t(r,a){if(r!==a){var s=r!==void 0,i=r===null,o=r===r,l=e(r),d=a!==void 0,u=a===null,f=a===a,m=e(a);if(!u&&!m&&!l&&r>a||l&&d&&f&&!u&&!m||i&&d&&f||!s&&f||!o)return 1;if(!i&&!l&&!m&&r<a||m&&s&&o&&!i&&!l||u&&s&&o||!d&&o||!f)return-1}return 0}return Tw=t,Tw}var Ow,h4;function xV(){if(h4)return Ow;h4=1;var e=gV();function t(r,a,s){for(var i=-1,o=r.criteria,l=a.criteria,d=o.length,u=s.length;++i<d;){var f=e(o[i],l[i]);if(f){if(i>=u)return f;var m=s[i];return f*(m=="desc"?-1:1)}}return r.index-a.index}return Ow=t,Ow}var Pw,f4;function yV(){if(f4)return Pw;f4=1;var e=P2(),t=I2(),r=qi(),a=yM(),s=pV(),i=iM(),o=xV(),l=lu(),d=us();function u(f,m,p){m.length?m=e(m,function(y){return d(y)?function(w){return t(w,y.length===1?y[0]:y)}:y}):m=[l];var g=-1;m=e(m,i(r));var v=a(f,function(y,w,k){var N=e(m,function(b){return b(y)});return{criteria:N,index:++g,value:y}});return s(v,function(y,w){return o(y,w,p)})}return Pw=u,Pw}var Iw,m4;function vV(){if(m4)return Iw;m4=1;function e(t,r,a){switch(a.length){case 0:return t.call(r);case 1:return t.call(r,a[0]);case 2:return t.call(r,a[0],a[1]);case 3:return t.call(r,a[0],a[1],a[2])}return t.apply(r,a)}return Iw=e,Iw}var Dw,p4;function bV(){if(p4)return Dw;p4=1;var e=vV(),t=Math.max;function r(a,s,i){return s=t(s===void 0?a.length-1:s,0),function(){for(var o=arguments,l=-1,d=t(o.length-s,0),u=Array(d);++l<d;)u[l]=o[s+l];l=-1;for(var f=Array(s+1);++l<s;)f[l]=o[l];return f[s]=i(u),e(a,this,f)}}return Dw=r,Dw}var Mw,g4;function wV(){if(g4)return Mw;g4=1;function e(t){return function(){return t}}return Mw=e,Mw}var Rw,x4;function vM(){if(x4)return Rw;x4=1;var e=xc(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return Rw=t,Rw}var Fw,y4;function jV(){if(y4)return Fw;y4=1;var e=wV(),t=vM(),r=lu(),a=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return Fw=a,Fw}var $w,v4;function NV(){if(v4)return $w;v4=1;var e=800,t=16,r=Date.now;function a(s){var i=0,o=0;return function(){var l=r(),d=t-(l-o);if(o=l,d>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return $w=a,$w}var Lw,b4;function kV(){if(b4)return Lw;b4=1;var e=jV(),t=NV(),r=t(e);return Lw=r,Lw}var Bw,w4;function SV(){if(w4)return Bw;w4=1;var e=lu(),t=bV(),r=kV();function a(s,i){return r(t(s,i,e),s+"")}return Bw=a,Bw}var Uw,j4;function Ag(){if(j4)return Uw;j4=1;var e=A2(),t=Wf(),r=q2(),a=hl();function s(i,o,l){if(!a(l))return!1;var d=typeof o;return(d=="number"?t(l)&&r(o,l.length):d=="string"&&o in l)?e(l[o],i):!1}return Uw=s,Uw}var Hw,N4;function _V(){if(N4)return Hw;N4=1;var e=gM(),t=yV(),r=SV(),a=Ag(),s=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&a(i,o[0],o[1])?o=[]:l>2&&a(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return Hw=s,Hw}var EV=_V();const V2=qr(EV);function Gh(e){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gh(e)}function Hj(){return Hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Hj.apply(this,arguments)}function CV(e,t){return PV(e)||OV(e,t)||TV(e,t)||AV()}function AV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TV(e,t){if(e){if(typeof e=="string")return k4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k4(e,t)}}function k4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function OV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function PV(e){if(Array.isArray(e))return e}function S4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function qw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S4(Object(r),!0).forEach(function(a){IV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function IV(e,t,r){return t=DV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DV(e){var t=MV(e,"string");return Gh(t)=="symbol"?t:t+""}function MV(e,t){if(Gh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Gh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RV(e){return Array.isArray(e)&&na(e[0])&&na(e[1])?e.join(" ~ "):e}var FV=function(t){var r=t.separator,a=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,d=t.labelStyle,u=d===void 0?{}:d,f=t.payload,m=t.formatter,p=t.itemSorter,g=t.wrapperClassName,v=t.labelClassName,y=t.label,w=t.labelFormatter,k=t.accessibilityLayer,N=k===void 0?!1:k,b=function(){if(f&&f.length){var O={padding:0,margin:0},R=(p?V2(f,p):f).map(function(Q,V){if(Q.type==="none")return null;var J=qw({display:"block",paddingTop:4,paddingBottom:4,color:Q.color||"#000"},l),ae=Q.formatter||m||RV,L=Q.value,H=Q.name,ce=L,z=H;if(ae&&ce!=null&&z!=null){var I=ae(L,H,Q,V,f);if(Array.isArray(I)){var Z=CV(I,2);ce=Z[0],z=Z[1]}else ce=I}return xe.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(V),style:J},na(z)?xe.createElement("span",{className:"recharts-tooltip-item-name"},z):null,na(z)?xe.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,xe.createElement("span",{className:"recharts-tooltip-item-value"},ce),xe.createElement("span",{className:"recharts-tooltip-item-unit"},Q.unit||""))});return xe.createElement("ul",{className:"recharts-tooltip-item-list",style:O},R)}return null},A=qw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),E=qw({margin:0},u),S=!sr(y),_=S?y:"",C=nr("recharts-default-tooltip",g),P=nr("recharts-tooltip-label",v);S&&w&&f!==void 0&&f!==null&&(_=w(y,f));var B=N?{role:"status","aria-live":"assertive"}:{};return xe.createElement("div",Hj({className:C,style:A},B),xe.createElement("p",{className:P,style:E},xe.isValidElement(_)?_:"".concat(_)),b())};function Yh(e){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yh(e)}function hm(e,t,r){return t=$V(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $V(e){var t=LV(e,"string");return Yh(t)=="symbol"?t:t+""}function LV(e,t){if(Yh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Yh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ju="recharts-tooltip-wrapper",BV={visibility:"hidden"};function UV(e){var t=e.coordinate,r=e.translateX,a=e.translateY;return nr(Ju,hm(hm(hm(hm({},"".concat(Ju,"-right"),gt(r)&&t&&gt(t.x)&&r>=t.x),"".concat(Ju,"-left"),gt(r)&&t&&gt(t.x)&&r<t.x),"".concat(Ju,"-bottom"),gt(a)&&t&&gt(t.y)&&a>=t.y),"".concat(Ju,"-top"),gt(a)&&t&&gt(t.y)&&a<t.y))}function _4(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,d=e.viewBox,u=e.viewBoxDimension;if(i&&gt(i[a]))return i[a];var f=r[a]-l-s,m=r[a]+s;if(t[a])return o[a]?f:m;if(o[a]){var p=f,g=d[a];return p<g?Math.max(m,d[a]):Math.max(f,d[a])}var v=m+l,y=d[a]+u;return v>y?Math.max(f,d[a]):Math.max(m,d[a])}function HV(e){var t=e.translateX,r=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function qV(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,d=e.viewBox,u,f,m;return o.height>0&&o.width>0&&r?(f=_4({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),m=_4({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),u=HV({translateX:f,translateY:m,useTranslate3d:l})):u=BV,{cssProperties:u,cssClasses:UV({translateX:f,translateY:m,coordinate:r})}}function Ad(e){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ad(e)}function E4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function C4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E4(Object(r),!0).forEach(function(a){zj(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WV(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,wM(a.key),a)}}function KV(e,t,r){return t&&WV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VV(e,t,r){return t=Zm(t),GV(e,bM()?Reflect.construct(t,r||[],Zm(e).constructor):t.apply(e,r))}function GV(e,t){if(t&&(Ad(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YV(e)}function YV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bM=function(){return!!e})()}function Zm(e){return Zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zm(e)}function XV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qj(e,t)}function qj(e,t){return qj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},qj(e,t)}function zj(e,t,r){return t=wM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wM(e){var t=JV(e,"string");return Ad(t)=="symbol"?t:t+""}function JV(e,t){if(Ad(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ad(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var A4=1,QV=(function(e){function t(){var r;zV(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=VV(this,t,[].concat(s)),zj(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),zj(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,d,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&l!==void 0?l:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return XV(t,e),KV(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>A4||Math.abs(a.height-this.state.lastBoundingBox.height)>A4)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,d=s.animationEasing,u=s.children,f=s.coordinate,m=s.hasPayload,p=s.isAnimationActive,g=s.offset,v=s.position,y=s.reverseDirection,w=s.useTranslate3d,k=s.viewBox,N=s.wrapperStyle,b=qV({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:g,position:v,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:k}),A=b.cssClasses,E=b.cssProperties,S=C4(C4({transition:p&&i?"transform ".concat(l,"ms ").concat(d):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},N);return xe.createElement("div",{tabIndex:-1,className:A,style:S,ref:function(C){a.wrapperNode=C}},u)}}])})(M.PureComponent),ZV=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},fl={isSsr:ZV()};function Td(e){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Td(e)}function T4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function O4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T4(Object(r),!0).forEach(function(a){G2(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function eG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tG(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,NM(a.key),a)}}function rG(e,t,r){return t&&tG(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nG(e,t,r){return t=ep(t),aG(e,jM()?Reflect.construct(t,r||[],ep(e).constructor):t.apply(e,r))}function aG(e,t){if(t&&(Td(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sG(e)}function sG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jM=function(){return!!e})()}function ep(e){return ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ep(e)}function iG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wj(e,t)}function Wj(e,t){return Wj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Wj(e,t)}function G2(e,t,r){return t=NM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NM(e){var t=oG(e,"string");return Td(t)=="symbol"?t:t+""}function oG(e,t){if(Td(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Td(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function lG(e){return e.dataKey}function cG(e,t){return xe.isValidElement(e)?xe.cloneElement(e,t):typeof e=="function"?xe.createElement(e,t):xe.createElement(FV,t)}var Gr=(function(e){function t(){return eG(this,t),nG(this,t,arguments)}return iG(t,e),rG(t,[{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,d=s.animationEasing,u=s.content,f=s.coordinate,m=s.filterNull,p=s.isAnimationActive,g=s.offset,v=s.payload,y=s.payloadUniqBy,w=s.position,k=s.reverseDirection,N=s.useTranslate3d,b=s.viewBox,A=s.wrapperStyle,E=v??[];m&&E.length&&(E=fM(v.filter(function(_){return _.value!=null&&(_.hide!==!0||a.props.includeHidden)}),y,lG));var S=E.length>0;return xe.createElement(QV,{allowEscapeViewBox:o,animationDuration:l,animationEasing:d,isAnimationActive:p,active:i,coordinate:f,hasPayload:S,offset:g,position:w,reverseDirection:k,useTranslate3d:N,viewBox:b,wrapperStyle:A},cG(u,O4(O4({},this.props),{},{payload:E})))}}])})(M.PureComponent);G2(Gr,"displayName","Tooltip");G2(Gr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!fl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var zw,P4;function dG(){if(P4)return zw;P4=1;var e=Hi(),t=function(){return e.Date.now()};return zw=t,zw}var Ww,I4;function uG(){if(I4)return Ww;I4=1;var e=/\s/;function t(r){for(var a=r.length;a--&&e.test(r.charAt(a)););return a}return Ww=t,Ww}var Kw,D4;function hG(){if(D4)return Kw;D4=1;var e=uG(),t=/^\s+/;function r(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return Kw=r,Kw}var Vw,M4;function kM(){if(M4)return Vw;M4=1;var e=hG(),t=hl(),r=su(),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function d(u){if(typeof u=="number")return u;if(r(u))return a;if(t(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=t(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=e(u);var m=i.test(u);return m||o.test(u)?l(u.slice(2),m?2:8):s.test(u)?a:+u}return Vw=d,Vw}var Gw,R4;function fG(){if(R4)return Gw;R4=1;var e=hl(),t=dG(),r=kM(),a="Expected a function",s=Math.max,i=Math.min;function o(l,d,u){var f,m,p,g,v,y,w=0,k=!1,N=!1,b=!0;if(typeof l!="function")throw new TypeError(a);d=r(d)||0,e(u)&&(k=!!u.leading,N="maxWait"in u,p=N?s(r(u.maxWait)||0,d):p,b="trailing"in u?!!u.trailing:b);function A(R){var Q=f,V=m;return f=m=void 0,w=R,g=l.apply(V,Q),g}function E(R){return w=R,v=setTimeout(C,d),k?A(R):g}function S(R){var Q=R-y,V=R-w,J=d-Q;return N?i(J,p-V):J}function _(R){var Q=R-y,V=R-w;return y===void 0||Q>=d||Q<0||N&&V>=p}function C(){var R=t();if(_(R))return P(R);v=setTimeout(C,S(R))}function P(R){return v=void 0,b&&f?A(R):(f=m=void 0,g)}function B(){v!==void 0&&clearTimeout(v),w=0,f=y=m=v=void 0}function F(){return v===void 0?g:P(t())}function O(){var R=t(),Q=_(R);if(f=arguments,m=this,y=R,Q){if(v===void 0)return E(y);if(N)return clearTimeout(v),v=setTimeout(C,d),A(y)}return v===void 0&&(v=setTimeout(C,d)),g}return O.cancel=B,O.flush=F,O}return Gw=o,Gw}var Yw,F4;function mG(){if(F4)return Yw;F4=1;var e=fG(),t=hl(),r="Expected a function";function a(s,i,o){var l=!0,d=!0;if(typeof s!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,d="trailing"in o?!!o.trailing:d),e(s,i,{leading:l,maxWait:i,trailing:d})}return Yw=a,Yw}var pG=mG();const SM=qr(pG);function Xh(e){"@babel/helpers - typeof";return Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xh(e)}function $4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function fm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$4(Object(r),!0).forEach(function(a){gG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function gG(e,t,r){return t=xG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xG(e){var t=yG(e,"string");return Xh(t)=="symbol"?t:t+""}function yG(e,t){if(Xh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Xh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vG(e,t){return NG(e)||jG(e,t)||wG(e,t)||bG()}function bG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wG(e,t){if(e){if(typeof e=="string")return L4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L4(e,t)}}function L4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function jG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function NG(e){if(Array.isArray(e))return e}var Zn=M.forwardRef(function(e,t){var r=e.aspect,a=e.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=e.width,o=i===void 0?"100%":i,l=e.height,d=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,m=e.minHeight,p=e.maxHeight,g=e.children,v=e.debounce,y=v===void 0?0:v,w=e.id,k=e.className,N=e.onResize,b=e.style,A=b===void 0?{}:b,E=M.useRef(null),S=M.useRef();S.current=N,M.useImperativeHandle(t,function(){return Object.defineProperty(E.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),E.current},configurable:!0})});var _=M.useState({containerWidth:s.width,containerHeight:s.height}),C=vG(_,2),P=C[0],B=C[1],F=M.useCallback(function(R,Q){B(function(V){var J=Math.round(R),ae=Math.round(Q);return V.containerWidth===J&&V.containerHeight===ae?V:{containerWidth:J,containerHeight:ae}})},[]);M.useEffect(function(){var R=function(H){var ce,z=H[0].contentRect,I=z.width,Z=z.height;F(I,Z),(ce=S.current)===null||ce===void 0||ce.call(S,I,Z)};y>0&&(R=SM(R,y,{trailing:!0,leading:!1}));var Q=new ResizeObserver(R),V=E.current.getBoundingClientRect(),J=V.width,ae=V.height;return F(J,ae),Q.observe(E.current),function(){Q.disconnect()}},[F,y]);var O=M.useMemo(function(){var R=P.containerWidth,Q=P.containerHeight;if(R<0||Q<0)return null;bi(Kl(o)||Kl(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,d),bi(!r||r>0,"The aspect(%s) must be greater than zero.",r);var V=Kl(o)?R:o,J=Kl(d)?Q:d;r&&r>0&&(V?J=V/r:J&&(V=J*r),p&&J>p&&(J=p)),bi(V>0||J>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,V,J,o,d,f,m,r);var ae=!Array.isArray(g)&&yo(g.type).endsWith("Chart");return xe.Children.map(g,function(L){return xe.isValidElement(L)?M.cloneElement(L,fm({width:V,height:J},ae?{style:fm({height:"100%",width:"100%",maxHeight:J,maxWidth:V},L.props.style)}:{})):L})},[r,g,d,p,m,f,P,o]);return xe.createElement("div",{id:w?"".concat(w):void 0,className:nr("recharts-responsive-container",k),style:fm(fm({},A),{},{width:o,height:d,minWidth:f,minHeight:m,maxHeight:p}),ref:E},O)}),ic=function(t){return null};ic.displayName="Cell";function Jh(e){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jh(e)}function B4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Kj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B4(Object(r),!0).forEach(function(a){kG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kG(e,t,r){return t=SG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SG(e){var t=_G(e,"string");return Jh(t)=="symbol"?t:t+""}function _G(e,t){if(Jh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Jh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ed={widthCache:{},cacheCount:0},EG=2e3,CG={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},U4="recharts_measurement_span";function AG(e){var t=Kj({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var bh=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||fl.isSsr)return{width:0,height:0};var a=AG(r),s=JSON.stringify({text:t,copyStyle:a});if(ed.widthCache[s])return ed.widthCache[s];try{var i=document.getElementById(U4);i||(i=document.createElement("span"),i.setAttribute("id",U4),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Kj(Kj({},CG),a);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),d={width:l.width,height:l.height};return ed.widthCache[s]=d,++ed.cacheCount>EG&&(ed.cacheCount=0,ed.widthCache={}),d}catch{return{width:0,height:0}}},TG=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Qh(e){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(e)}function tp(e,t){return DG(e)||IG(e,t)||PG(e,t)||OG()}function OG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PG(e,t){if(e){if(typeof e=="string")return H4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H4(e,t)}}function H4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function IG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function DG(e){if(Array.isArray(e))return e}function MG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q4(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,FG(a.key),a)}}function RG(e,t,r){return t&&q4(e.prototype,t),r&&q4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function FG(e){var t=$G(e,"string");return Qh(t)=="symbol"?t:t+""}function $G(e,t){if(Qh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Qh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var z4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,W4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,LG=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,BG=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_M={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},UG=Object.keys(_M),hd="NaN";function HG(e,t){return e*_M[t]}var mm=(function(){function e(t,r){MG(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!LG.test(r)&&(this.num=NaN,this.unit=""),UG.includes(r)&&(this.num=HG(t,r),this.unit="px")}return RG(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var a,s=(a=BG.exec(r))!==null&&a!==void 0?a:[],i=tp(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function EM(e){if(e.includes(hd))return hd;for(var t=e;t.includes("*")||t.includes("/");){var r,a=(r=z4.exec(t))!==null&&r!==void 0?r:[],s=tp(a,4),i=s[1],o=s[2],l=s[3],d=mm.parse(i??""),u=mm.parse(l??""),f=o==="*"?d.multiply(u):d.divide(u);if(f.isNaN())return hd;t=t.replace(z4,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,p=(m=W4.exec(t))!==null&&m!==void 0?m:[],g=tp(p,4),v=g[1],y=g[2],w=g[3],k=mm.parse(v??""),N=mm.parse(w??""),b=y==="+"?k.add(N):k.subtract(N);if(b.isNaN())return hd;t=t.replace(W4,b.toString())}return t}var K4=/\(([^()]*)\)/;function qG(e){for(var t=e;t.includes("(");){var r=K4.exec(t),a=tp(r,2),s=a[1];t=t.replace(K4,EM(s))}return t}function zG(e){var t=e.replace(/\s+/g,"");return t=qG(t),t=EM(t),t}function WG(e){try{return zG(e)}catch{return hd}}function Xw(e){var t=WG(e.slice(5,-1));return t===hd?"":t}var KG=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],VG=["dx","dy","angle","className","breakAll"];function Vj(){return Vj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Vj.apply(this,arguments)}function V4(e,t){if(e==null)return{};var r=GG(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function GG(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function G4(e,t){return QG(e)||JG(e,t)||XG(e,t)||YG()}function YG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XG(e,t){if(e){if(typeof e=="string")return Y4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y4(e,t)}}function Y4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function JG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function QG(e){if(Array.isArray(e))return e}var CM=/[ \f\n\r\t\v\u2028\u2029]+/,AM=function(t){var r=t.children,a=t.breakAll,s=t.style;try{var i=[];sr(r)||(a?i=r.toString().split(""):i=r.toString().split(CM));var o=i.map(function(d){return{word:d,width:bh(d,s).width}}),l=a?0:bh("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},ZG=function(t,r,a,s,i){var o=t.maxLines,l=t.children,d=t.style,u=t.breakAll,f=gt(o),m=l,p=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V.reduce(function(J,ae){var L=ae.word,H=ae.width,ce=J[J.length-1];if(ce&&(s==null||i||ce.width+H+a<Number(s)))ce.words.push(L),ce.width+=H+a;else{var z={words:[L],width:H};J.push(z)}return J},[])},g=p(r),v=function(V){return V.reduce(function(J,ae){return J.width>ae.width?J:ae})};if(!f)return g;for(var y="",w=function(V){var J=m.slice(0,V),ae=AM({breakAll:u,style:d,children:J+y}).wordsWithComputedWidth,L=p(ae),H=L.length>o||v(L).width>Number(s);return[H,L]},k=0,N=m.length-1,b=0,A;k<=N&&b<=m.length-1;){var E=Math.floor((k+N)/2),S=E-1,_=w(S),C=G4(_,2),P=C[0],B=C[1],F=w(E),O=G4(F,1),R=O[0];if(!P&&!R&&(k=E+1),P&&R&&(N=E-1),!P&&R){A=B;break}b++}return A||g},X4=function(t){var r=sr(t)?[]:t.toString().split(CM);return[{words:r}]},eY=function(t){var r=t.width,a=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||a)&&!fl.isSsr){var d,u,f=AM({breakAll:o,children:s,style:i});if(f){var m=f.wordsWithComputedWidth,p=f.spaceWidth;d=m,u=p}else return X4(s);return ZG({breakAll:o,children:s,maxLines:l,style:i},d,u,r,a)}return X4(s)},J4="#808080",oc=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,d=t.capHeight,u=d===void 0?"0.71em":d,f=t.scaleToFit,m=f===void 0?!1:f,p=t.textAnchor,g=p===void 0?"start":p,v=t.verticalAnchor,y=v===void 0?"end":v,w=t.fill,k=w===void 0?J4:w,N=V4(t,KG),b=M.useMemo(function(){return eY({breakAll:N.breakAll,children:N.children,maxLines:N.maxLines,scaleToFit:m,style:N.style,width:N.width})},[N.breakAll,N.children,N.maxLines,m,N.style,N.width]),A=N.dx,E=N.dy,S=N.angle,_=N.className,C=N.breakAll,P=V4(N,VG);if(!na(a)||!na(i))return null;var B=a+(gt(A)?A:0),F=i+(gt(E)?E:0),O;switch(y){case"start":O=Xw("calc(".concat(u,")"));break;case"middle":O=Xw("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:O=Xw("calc(".concat(b.length-1," * -").concat(l,")"));break}var R=[];if(m){var Q=b[0].width,V=N.width;R.push("scale(".concat((gt(V)?V/Q:1)/Q,")"))}return S&&R.push("rotate(".concat(S,", ").concat(B,", ").concat(F,")")),R.length&&(P.transform=R.join(" ")),xe.createElement("text",Vj({},Rt(P,!0),{x:B,y:F,className:nr("recharts-text",_),textAnchor:g,fill:k.includes("url")?J4:k}),b.map(function(J,ae){var L=J.words.join(C?"":" ");return xe.createElement("tspan",{x:B,dy:ae===0?O:l,key:"".concat(L,"-").concat(ae)},L)}))};function ol(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function tY(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Y2(e){let t,r,a;e.length!==2?(t=ol,r=(l,d)=>ol(e(l),d),a=(l,d)=>e(l)-d):(t=e===ol||e===tY?e:rY,r=e,a=e);function s(l,d,u=0,f=l.length){if(u<f){if(t(d,d)!==0)return f;do{const m=u+f>>>1;r(l[m],d)<0?u=m+1:f=m}while(u<f)}return u}function i(l,d,u=0,f=l.length){if(u<f){if(t(d,d)!==0)return f;do{const m=u+f>>>1;r(l[m],d)<=0?u=m+1:f=m}while(u<f)}return u}function o(l,d,u=0,f=l.length){const m=s(l,d,u,f-1);return m>u&&a(l[m-1],d)>-a(l[m],d)?m-1:m}return{left:s,center:o,right:i}}function rY(){return 0}function TM(e){return e===null?NaN:+e}function*nY(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const aY=Y2(ol),Kf=aY.right;Y2(TM).center;class Q4 extends Map{constructor(t,r=oY){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(Z4(this,t))}has(t){return super.has(Z4(this,t))}set(t,r){return super.set(sY(this,t),r)}delete(t){return super.delete(iY(this,t))}}function Z4({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function sY({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function iY({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function oY(e){return e!==null&&typeof e=="object"?e.valueOf():e}function lY(e=ol){if(e===ol)return OM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function OM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const cY=Math.sqrt(50),dY=Math.sqrt(10),uY=Math.sqrt(2);function rp(e,t,r){const a=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),o=i>=cY?10:i>=dY?5:i>=uY?2:1;let l,d,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),d=Math.round(t*u),l/u<e&&++l,d/u>t&&--d,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),d=Math.round(t/u),l*u<e&&++l,d*u>t&&--d),d<l&&.5<=r&&r<2?rp(e,t,r*2):[l,d,u]}function Gj(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[s,i,o]=a?rp(t,e,r):rp(e,t,r);if(!(i>=s))return[];const l=i-s+1,d=new Array(l);if(a)if(o<0)for(let u=0;u<l;++u)d[u]=(i-u)/-o;else for(let u=0;u<l;++u)d[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)d[u]=(s+u)/-o;else for(let u=0;u<l;++u)d[u]=(s+u)*o;return d}function Yj(e,t,r){return t=+t,e=+e,r=+r,rp(e,t,r)[2]}function Xj(e,t,r){t=+t,e=+e,r=+r;const a=t<e,s=a?Yj(t,e,r):Yj(e,t,r);return(a?-1:1)*(s<0?1/-s:s)}function e3(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function t3(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function PM(e,t,r=0,a=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(s=s===void 0?OM:lY(s);a>r;){if(a-r>600){const d=a-r+1,u=t-r+1,f=Math.log(d),m=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*m*(d-m)/d)*(u-d/2<0?-1:1),g=Math.max(r,Math.floor(t-u*m/d+p)),v=Math.min(a,Math.floor(t+(d-u)*m/d+p));PM(e,t,g,v,s)}const i=e[t];let o=r,l=a;for(Qu(e,r,t),s(e[a],i)>0&&Qu(e,r,a);o<l;){for(Qu(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Qu(e,r,l):(++l,Qu(e,l,a)),l<=t&&(r=l+1),t<=l&&(a=l-1)}return e}function Qu(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function hY(e,t,r){if(e=Float64Array.from(nY(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return t3(e);if(t>=1)return e3(e);var a,s=(a-1)*t,i=Math.floor(s),o=e3(PM(e,i).subarray(0,i+1)),l=t3(e.subarray(i+1));return o+(l-o)*(s-i)}}function fY(e,t,r=TM){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function mY(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++a<s;)i[a]=e+a*r;return i}function Xs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function To(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Jj=Symbol("implicit");function X2(){var e=new Q4,t=[],r=[],a=Jj;function s(i){let o=e.get(i);if(o===void 0){if(a!==Jj)return a;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Q4;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return X2(t,r).unknown(a)},Xs.apply(s,arguments),s}function Zh(){var e=X2().unknown(void 0),t=e.domain,r=e.range,a=0,s=1,i,o,l=!1,d=0,u=0,f=.5;delete e.unknown;function m(){var p=t().length,g=s<a,v=g?s:a,y=g?a:s;i=(y-v)/Math.max(1,p-d+u*2),l&&(i=Math.floor(i)),v+=(y-v-i*(p-d))*f,o=i*(1-d),l&&(v=Math.round(v),o=Math.round(o));var w=mY(p).map(function(k){return v+i*k});return r(g?w.reverse():w)}return e.domain=function(p){return arguments.length?(t(p),m()):t()},e.range=function(p){return arguments.length?([a,s]=p,a=+a,s=+s,m()):[a,s]},e.rangeRound=function(p){return[a,s]=p,a=+a,s=+s,l=!0,m()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,m()):l},e.padding=function(p){return arguments.length?(d=Math.min(1,u=+p),m()):d},e.paddingInner=function(p){return arguments.length?(d=Math.min(1,p),m()):d},e.paddingOuter=function(p){return arguments.length?(u=+p,m()):u},e.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),m()):f},e.copy=function(){return Zh(t(),[a,s]).round(l).paddingInner(d).paddingOuter(u).align(f)},Xs.apply(m(),arguments)}function IM(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return IM(t())},e}function wh(){return IM(Zh.apply(null,arguments).paddingInner(1))}function J2(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function DM(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function Vf(){}var ef=.7,np=1/ef,wd="\\s*([+-]?\\d+)\\s*",tf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pY=/^#([0-9a-f]{3,8})$/,gY=new RegExp(`^rgb\\(${wd},${wd},${wd}\\)$`),xY=new RegExp(`^rgb\\(${Ri},${Ri},${Ri}\\)$`),yY=new RegExp(`^rgba\\(${wd},${wd},${wd},${tf}\\)$`),vY=new RegExp(`^rgba\\(${Ri},${Ri},${Ri},${tf}\\)$`),bY=new RegExp(`^hsl\\(${tf},${Ri},${Ri}\\)$`),wY=new RegExp(`^hsla\\(${tf},${Ri},${Ri},${tf}\\)$`),r3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};J2(Vf,rf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:n3,formatHex:n3,formatHex8:jY,formatHsl:NY,formatRgb:a3,toString:a3});function n3(){return this.rgb().formatHex()}function jY(){return this.rgb().formatHex8()}function NY(){return MM(this).formatHsl()}function a3(){return this.rgb().formatRgb()}function rf(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=pY.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?s3(t):r===3?new cs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?pm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?pm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gY.exec(e))?new cs(t[1],t[2],t[3],1):(t=xY.exec(e))?new cs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=yY.exec(e))?pm(t[1],t[2],t[3],t[4]):(t=vY.exec(e))?pm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bY.exec(e))?l3(t[1],t[2]/100,t[3]/100,1):(t=wY.exec(e))?l3(t[1],t[2]/100,t[3]/100,t[4]):r3.hasOwnProperty(e)?s3(r3[e]):e==="transparent"?new cs(NaN,NaN,NaN,0):null}function s3(e){return new cs(e>>16&255,e>>8&255,e&255,1)}function pm(e,t,r,a){return a<=0&&(e=t=r=NaN),new cs(e,t,r,a)}function kY(e){return e instanceof Vf||(e=rf(e)),e?(e=e.rgb(),new cs(e.r,e.g,e.b,e.opacity)):new cs}function Qj(e,t,r,a){return arguments.length===1?kY(e):new cs(e,t,r,a??1)}function cs(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}J2(cs,Qj,DM(Vf,{brighter(e){return e=e==null?np:Math.pow(np,e),new cs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ef:Math.pow(ef,e),new cs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new cs(Jl(this.r),Jl(this.g),Jl(this.b),ap(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:i3,formatHex:i3,formatHex8:SY,formatRgb:o3,toString:o3}));function i3(){return`#${Vl(this.r)}${Vl(this.g)}${Vl(this.b)}`}function SY(){return`#${Vl(this.r)}${Vl(this.g)}${Vl(this.b)}${Vl((isNaN(this.opacity)?1:this.opacity)*255)}`}function o3(){const e=ap(this.opacity);return`${e===1?"rgb(":"rgba("}${Jl(this.r)}, ${Jl(this.g)}, ${Jl(this.b)}${e===1?")":`, ${e})`}`}function ap(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Vl(e){return e=Jl(e),(e<16?"0":"")+e.toString(16)}function l3(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new fi(e,t,r,a)}function MM(e){if(e instanceof fi)return new fi(e.h,e.s,e.l,e.opacity);if(e instanceof Vf||(e=rf(e)),!e)return new fi;if(e instanceof fi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),i=Math.max(t,r,a),o=NaN,l=i-s,d=(i+s)/2;return l?(t===i?o=(r-a)/l+(r<a)*6:r===i?o=(a-t)/l+2:o=(t-r)/l+4,l/=d<.5?i+s:2-i-s,o*=60):l=d>0&&d<1?0:o,new fi(o,l,d,e.opacity)}function _Y(e,t,r,a){return arguments.length===1?MM(e):new fi(e,t,r,a??1)}function fi(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}J2(fi,_Y,DM(Vf,{brighter(e){return e=e==null?np:Math.pow(np,e),new fi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ef:Math.pow(ef,e),new fi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new cs(Jw(e>=240?e-240:e+120,s,a),Jw(e,s,a),Jw(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new fi(c3(this.h),gm(this.s),gm(this.l),ap(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ap(this.opacity);return`${e===1?"hsl(":"hsla("}${c3(this.h)}, ${gm(this.s)*100}%, ${gm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function c3(e){return e=(e||0)%360,e<0?e+360:e}function gm(e){return Math.max(0,Math.min(1,e||0))}function Jw(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Q2=e=>()=>e;function EY(e,t){return function(r){return e+r*t}}function CY(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function AY(e){return(e=+e)==1?RM:function(t,r){return r-t?CY(t,r,e):Q2(isNaN(t)?r:t)}}function RM(e,t){var r=t-e;return r?EY(e,r):Q2(isNaN(e)?t:e)}const d3=(function e(t){var r=AY(t);function a(s,i){var o=r((s=Qj(s)).r,(i=Qj(i)).r),l=r(s.g,i.g),d=r(s.b,i.b),u=RM(s.opacity,i.opacity);return function(f){return s.r=o(f),s.g=l(f),s.b=d(f),s.opacity=u(f),s+""}}return a.gamma=e,a})(1);function TY(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<r;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function OY(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function PY(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r),o;for(o=0;o<a;++o)s[o]=cu(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=s[o](l);return i}}function IY(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function sp(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function DY(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=cu(e[s],t[s]):a[s]=t[s];return function(i){for(s in r)a[s]=r[s](i);return a}}var Zj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qw=new RegExp(Zj.source,"g");function MY(e){return function(){return e}}function RY(e){return function(t){return e(t)+""}}function FY(e,t){var r=Zj.lastIndex=Qw.lastIndex=0,a,s,i,o=-1,l=[],d=[];for(e=e+"",t=t+"";(a=Zj.exec(e))&&(s=Qw.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,d.push({i:o,x:sp(a,s)})),r=Qw.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?d[0]?RY(d[0].x):MY(t):(t=d.length,function(u){for(var f=0,m;f<t;++f)l[(m=d[f]).i]=m.x(u);return l.join("")})}function cu(e,t){var r=typeof t,a;return t==null||r==="boolean"?Q2(t):(r==="number"?sp:r==="string"?(a=rf(t))?(t=a,d3):FY:t instanceof rf?d3:t instanceof Date?IY:OY(t)?TY:Array.isArray(t)?PY:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?DY:sp)(e,t)}function Z2(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function $Y(e,t){t===void 0&&(t=e,e=cu);for(var r=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function LY(e){return function(){return e}}function ip(e){return+e}var u3=[0,1];function Xa(e){return e}function eN(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:LY(isNaN(t)?NaN:.5)}function BY(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function UY(e,t,r){var a=e[0],s=e[1],i=t[0],o=t[1];return s<a?(a=eN(s,a),i=r(o,i)):(a=eN(a,s),i=r(i,o)),function(l){return i(a(l))}}function HY(e,t,r){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)s[o]=eN(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var d=Kf(e,l,1,a)-1;return i[d](s[d](l))}}function Gf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Tg(){var e=u3,t=u3,r=cu,a,s,i,o=Xa,l,d,u;function f(){var p=Math.min(e.length,t.length);return o!==Xa&&(o=BY(e[0],e[p-1])),l=p>2?HY:UY,d=u=null,m}function m(p){return p==null||isNaN(p=+p)?i:(d||(d=l(e.map(a),t,r)))(a(o(p)))}return m.invert=function(p){return o(s((u||(u=l(t,e.map(a),sp)))(p)))},m.domain=function(p){return arguments.length?(e=Array.from(p,ip),f()):e.slice()},m.range=function(p){return arguments.length?(t=Array.from(p),f()):t.slice()},m.rangeRound=function(p){return t=Array.from(p),r=Z2,f()},m.clamp=function(p){return arguments.length?(o=p?!0:Xa,f()):o!==Xa},m.interpolate=function(p){return arguments.length?(r=p,f()):r},m.unknown=function(p){return arguments.length?(i=p,m):i},function(p,g){return a=p,s=g,f()}}function ek(){return Tg()(Xa,Xa)}function qY(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function op(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function Od(e){return e=op(Math.abs(e)),e?e[1]:NaN}function zY(e,t){return function(r,a){for(var s=r.length,i=[],o=0,l=e[0],d=0;s>0&&l>0&&(d+l+1>a&&(l=Math.max(1,a-d)),i.push(r.substring(s-=l,s+l)),!((d+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function WY(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var KY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nf(e){if(!(t=KY.exec(e)))throw new Error("invalid format: "+e);var t;return new tk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}nf.prototype=tk.prototype;function tk(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}tk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function VY(e){e:for(var t=e.length,r=1,a=-1,s;r<t;++r)switch(e[r]){case".":a=s=r;break;case"0":a===0&&(a=r),s=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var lp;function GY(e,t){var r=op(e,t);if(!r)return lp=void 0,e.toPrecision(t);var a=r[0],s=r[1],i=s-(lp=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+op(e,Math.max(0,t+i-1))[0]}function h3(e,t){var r=op(e,t);if(!r)return e+"";var a=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const f3={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:qY,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>h3(e*100,t),r:h3,s:GY,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function m3(e){return e}var p3=Array.prototype.map,g3=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function YY(e){var t=e.grouping===void 0||e.thousands===void 0?m3:zY(p3.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?m3:WY(p3.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function u(m,p){m=nf(m);var g=m.fill,v=m.align,y=m.sign,w=m.symbol,k=m.zero,N=m.width,b=m.comma,A=m.precision,E=m.trim,S=m.type;S==="n"?(b=!0,S="g"):f3[S]||(A===void 0&&(A=12),E=!0,S="g"),(k||g==="0"&&v==="=")&&(k=!0,g="0",v="=");var _=(p&&p.prefix!==void 0?p.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():""),C=(w==="$"?a:/[%p]/.test(S)?o:"")+(p&&p.suffix!==void 0?p.suffix:""),P=f3[S],B=/[defgprs%]/.test(S);A=A===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function F(O){var R=_,Q=C,V,J,ae;if(S==="c")Q=P(O)+Q,O="";else{O=+O;var L=O<0||1/O<0;if(O=isNaN(O)?d:P(Math.abs(O),A),E&&(O=VY(O)),L&&+O==0&&y!=="+"&&(L=!1),R=(L?y==="("?y:l:y==="-"||y==="("?"":y)+R,Q=(S==="s"&&!isNaN(O)&&lp!==void 0?g3[8+lp/3]:"")+Q+(L&&y==="("?")":""),B){for(V=-1,J=O.length;++V<J;)if(ae=O.charCodeAt(V),48>ae||ae>57){Q=(ae===46?s+O.slice(V+1):O.slice(V))+Q,O=O.slice(0,V);break}}}b&&!k&&(O=t(O,1/0));var H=R.length+O.length+Q.length,ce=H<N?new Array(N-H+1).join(g):"";switch(b&&k&&(O=t(ce+O,ce.length?N-Q.length:1/0),ce=""),v){case"<":O=R+O+Q+ce;break;case"=":O=R+ce+O+Q;break;case"^":O=ce.slice(0,H=ce.length>>1)+R+O+Q+ce.slice(H);break;default:O=ce+R+O+Q;break}return i(O)}return F.toString=function(){return m+""},F}function f(m,p){var g=Math.max(-8,Math.min(8,Math.floor(Od(p)/3)))*3,v=Math.pow(10,-g),y=u((m=nf(m),m.type="f",m),{suffix:g3[8+g/3]});return function(w){return y(v*w)}}return{format:u,formatPrefix:f}}var xm,rk,FM;XY({thousands:",",grouping:[3],currency:["$",""]});function XY(e){return xm=YY(e),rk=xm.format,FM=xm.formatPrefix,xm}function JY(e){return Math.max(0,-Od(Math.abs(e)))}function QY(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Od(t)/3)))*3-Od(Math.abs(e)))}function ZY(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Od(t)-Od(e))+1}function $M(e,t,r,a){var s=Xj(e,t,r),i;switch(a=nf(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=QY(s,o))&&(a.precision=i),FM(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=ZY(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=JY(s))&&(a.precision=i-(a.type==="%")*2);break}}return rk(a)}function ml(e){var t=e.domain;return e.ticks=function(r){var a=t();return Gj(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var s=t();return $M(s[0],s[s.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),s=0,i=a.length-1,o=a[s],l=a[i],d,u,f=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);f-- >0;){if(u=Yj(o,l,r),u===d)return a[s]=o,a[i]=l,t(a);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;d=u}return e},e}function cp(){var e=ek();return e.copy=function(){return Gf(e,cp())},Xs.apply(e,arguments),ml(e)}function LM(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,ip),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return LM(e).unknown(t)},e=arguments.length?Array.from(e,ip):[0,1],ml(r)}function BM(e,t){e=e.slice();var r=0,a=e.length-1,s=e[r],i=e[a],o;return i<s&&(o=r,r=a,a=o,o=s,s=i,i=o),e[r]=t.floor(s),e[a]=t.ceil(i),e}function x3(e){return Math.log(e)}function y3(e){return Math.exp(e)}function eX(e){return-Math.log(-e)}function tX(e){return-Math.exp(-e)}function rX(e){return isFinite(e)?+("1e"+e):e<0?0:e}function nX(e){return e===10?rX:e===Math.E?Math.exp:t=>Math.pow(e,t)}function aX(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function v3(e){return(t,r)=>-e(-t,r)}function nk(e){const t=e(x3,y3),r=t.domain;let a=10,s,i;function o(){return s=aX(a),i=nX(a),r()[0]<0?(s=v3(s),i=v3(i),e(eX,tX)):e(x3,y3),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const d=r();let u=d[0],f=d[d.length-1];const m=f<u;m&&([u,f]=[f,u]);let p=s(u),g=s(f),v,y;const w=l==null?10:+l;let k=[];if(!(a%1)&&g-p<w){if(p=Math.floor(p),g=Math.ceil(g),u>0){for(;p<=g;++p)for(v=1;v<a;++v)if(y=p<0?v/i(-p):v*i(p),!(y<u)){if(y>f)break;k.push(y)}}else for(;p<=g;++p)for(v=a-1;v>=1;--v)if(y=p>0?v/i(-p):v*i(p),!(y<u)){if(y>f)break;k.push(y)}k.length*2<w&&(k=Gj(u,f,w))}else k=Gj(p,g,Math.min(g-p,w)).map(i);return m?k.reverse():k},t.tickFormat=(l,d)=>{if(l==null&&(l=10),d==null&&(d=a===10?"s":","),typeof d!="function"&&(!(a%1)&&(d=nf(d)).precision==null&&(d.trim=!0),d=rk(d)),l===1/0)return d;const u=Math.max(1,a*l/t.ticks().length);return f=>{let m=f/i(Math.round(s(f)));return m*a<a-.5&&(m*=a),m<=u?d(f):""}},t.nice=()=>r(BM(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function UM(){const e=nk(Tg()).domain([1,10]);return e.copy=()=>Gf(e,UM()).base(e.base()),Xs.apply(e,arguments),e}function b3(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function w3(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ak(e){var t=1,r=e(b3(t),w3(t));return r.constant=function(a){return arguments.length?e(b3(t=+a),w3(t)):t},ml(r)}function HM(){var e=ak(Tg());return e.copy=function(){return Gf(e,HM()).constant(e.constant())},Xs.apply(e,arguments)}function j3(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function sX(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function iX(e){return e<0?-e*e:e*e}function sk(e){var t=e(Xa,Xa),r=1;function a(){return r===1?e(Xa,Xa):r===.5?e(sX,iX):e(j3(r),j3(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,a()):r},ml(t)}function ik(){var e=sk(Tg());return e.copy=function(){return Gf(e,ik()).exponent(e.exponent())},Xs.apply(e,arguments),e}function oX(){return ik.apply(null,arguments).exponent(.5)}function N3(e){return Math.sign(e)*e*e}function lX(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function qM(){var e=ek(),t=[0,1],r=!1,a;function s(i){var o=lX(e(i));return isNaN(o)?a:r?Math.round(o):o}return s.invert=function(i){return e.invert(N3(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,ip)).map(N3)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return qM(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},Xs.apply(s,arguments),ml(s)}function zM(){var e=[],t=[],r=[],a;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=fY(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[Kf(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ol),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return zM().domain(e).range(t).unknown(a)},Xs.apply(i,arguments)}function WM(){var e=0,t=1,r=1,a=[.5],s=[0,1],i;function o(d){return d!=null&&d<=d?s[Kf(a,d,0,r)]:i}function l(){var d=-1;for(a=new Array(r);++d<r;)a[d]=((d+1)*t-(d-r)*e)/(r+1);return o}return o.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,l()):[e,t]},o.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,l()):s.slice()},o.invertExtent=function(d){var u=s.indexOf(d);return u<0?[NaN,NaN]:u<1?[e,a[0]]:u>=r?[a[r-1],t]:[a[u-1],a[u]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return a.slice()},o.copy=function(){return WM().domain([e,t]).range(s).unknown(i)},Xs.apply(ml(o),arguments)}function KM(){var e=[.5],t=[0,1],r,a=1;function s(i){return i!=null&&i<=i?t[Kf(e,i,0,a)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return KM().domain(e).range(t).unknown(r)},Xs.apply(s,arguments)}const Zw=new Date,e1=new Date;function ia(e,t,r,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const d=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return d;let u;do d.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return d},s.filter=i=>ia(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(Zw.setTime(+i),e1.setTime(+o),e(Zw),e(e1),Math.floor(r(Zw,e1))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?o=>a(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const dp=ia(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);dp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ia(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):dp);dp.range;const fo=1e3,Vs=fo*60,mo=Vs*60,jo=mo*24,ok=jo*7,k3=jo*30,t1=jo*365,Gl=ia(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*fo)},(e,t)=>(t-e)/fo,e=>e.getUTCSeconds());Gl.range;const lk=ia(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fo)},(e,t)=>{e.setTime(+e+t*Vs)},(e,t)=>(t-e)/Vs,e=>e.getMinutes());lk.range;const ck=ia(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Vs)},(e,t)=>(t-e)/Vs,e=>e.getUTCMinutes());ck.range;const dk=ia(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fo-e.getMinutes()*Vs)},(e,t)=>{e.setTime(+e+t*mo)},(e,t)=>(t-e)/mo,e=>e.getHours());dk.range;const uk=ia(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*mo)},(e,t)=>(t-e)/mo,e=>e.getUTCHours());uk.range;const Yf=ia(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Vs)/jo,e=>e.getDate()-1);Yf.range;const Og=ia(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/jo,e=>e.getUTCDate()-1);Og.range;const VM=ia(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/jo,e=>Math.floor(e/jo));VM.range;function yc(e){return ia(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Vs)/ok)}const Pg=yc(0),up=yc(1),cX=yc(2),dX=yc(3),Pd=yc(4),uX=yc(5),hX=yc(6);Pg.range;up.range;cX.range;dX.range;Pd.range;uX.range;hX.range;function vc(e){return ia(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/ok)}const Ig=vc(0),hp=vc(1),fX=vc(2),mX=vc(3),Id=vc(4),pX=vc(5),gX=vc(6);Ig.range;hp.range;fX.range;mX.range;Id.range;pX.range;gX.range;const hk=ia(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());hk.range;const fk=ia(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());fk.range;const No=ia(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());No.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ia(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});No.range;const ko=ia(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ko.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ia(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ko.range;function GM(e,t,r,a,s,i){const o=[[Gl,1,fo],[Gl,5,5*fo],[Gl,15,15*fo],[Gl,30,30*fo],[i,1,Vs],[i,5,5*Vs],[i,15,15*Vs],[i,30,30*Vs],[s,1,mo],[s,3,3*mo],[s,6,6*mo],[s,12,12*mo],[a,1,jo],[a,2,2*jo],[r,1,ok],[t,1,k3],[t,3,3*k3],[e,1,t1]];function l(u,f,m){const p=f<u;p&&([u,f]=[f,u]);const g=m&&typeof m.range=="function"?m:d(u,f,m),v=g?g.range(u,+f+1):[];return p?v.reverse():v}function d(u,f,m){const p=Math.abs(f-u)/m,g=Y2(([,,w])=>w).right(o,p);if(g===o.length)return e.every(Xj(u/t1,f/t1,m));if(g===0)return dp.every(Math.max(Xj(u,f,m),1));const[v,y]=o[p/o[g-1][2]<o[g][2]/p?g-1:g];return v.every(y)}return[l,d]}const[xX,yX]=GM(ko,fk,Ig,VM,uk,ck),[vX,bX]=GM(No,hk,Pg,Yf,dk,lk);function r1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function n1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Zu(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function wX(e){var t=e.dateTime,r=e.date,a=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,d=e.shortMonths,u=eh(s),f=th(s),m=eh(i),p=th(i),g=eh(o),v=th(o),y=eh(l),w=th(l),k=eh(d),N=th(d),b={a:ae,A:L,b:H,B:ce,c:null,d:T3,e:T3,f:zX,g:eJ,G:rJ,H:UX,I:HX,j:qX,L:YM,m:WX,M:KX,p:z,q:I,Q:I3,s:D3,S:VX,u:GX,U:YX,V:XX,w:JX,W:QX,x:null,X:null,y:ZX,Y:tJ,Z:nJ,"%":P3},A={a:Z,A:te,b:se,B:be,c:null,d:O3,e:O3,f:oJ,g:xJ,G:vJ,H:aJ,I:sJ,j:iJ,L:JM,m:lJ,M:cJ,p:Ee,q:_e,Q:I3,s:D3,S:dJ,u:uJ,U:hJ,V:fJ,w:mJ,W:pJ,x:null,X:null,y:gJ,Y:yJ,Z:bJ,"%":P3},E={a:B,A:F,b:O,B:R,c:Q,d:C3,e:C3,f:FX,g:E3,G:_3,H:A3,I:A3,j:IX,L:RX,m:PX,M:DX,p:P,q:OX,Q:LX,s:BX,S:MX,u:_X,U:EX,V:CX,w:SX,W:AX,x:V,X:J,y:E3,Y:_3,Z:TX,"%":$X};b.x=S(r,b),b.X=S(a,b),b.c=S(t,b),A.x=S(r,A),A.X=S(a,A),A.c=S(t,A);function S(me,ye){return function(qe){var G=[],He=-1,Ke=0,ut=me.length,ze,Pe,ke;for(qe instanceof Date||(qe=new Date(+qe));++He<ut;)me.charCodeAt(He)===37&&(G.push(me.slice(Ke,He)),(Pe=S3[ze=me.charAt(++He)])!=null?ze=me.charAt(++He):Pe=ze==="e"?" ":"0",(ke=ye[ze])&&(ze=ke(qe,Pe)),G.push(ze),Ke=He+1);return G.push(me.slice(Ke,He)),G.join("")}}function _(me,ye){return function(qe){var G=Zu(1900,void 0,1),He=C(G,me,qe+="",0),Ke,ut;if(He!=qe.length)return null;if("Q"in G)return new Date(G.Q);if("s"in G)return new Date(G.s*1e3+("L"in G?G.L:0));if(ye&&!("Z"in G)&&(G.Z=0),"p"in G&&(G.H=G.H%12+G.p*12),G.m===void 0&&(G.m="q"in G?G.q:0),"V"in G){if(G.V<1||G.V>53)return null;"w"in G||(G.w=1),"Z"in G?(Ke=n1(Zu(G.y,0,1)),ut=Ke.getUTCDay(),Ke=ut>4||ut===0?hp.ceil(Ke):hp(Ke),Ke=Og.offset(Ke,(G.V-1)*7),G.y=Ke.getUTCFullYear(),G.m=Ke.getUTCMonth(),G.d=Ke.getUTCDate()+(G.w+6)%7):(Ke=r1(Zu(G.y,0,1)),ut=Ke.getDay(),Ke=ut>4||ut===0?up.ceil(Ke):up(Ke),Ke=Yf.offset(Ke,(G.V-1)*7),G.y=Ke.getFullYear(),G.m=Ke.getMonth(),G.d=Ke.getDate()+(G.w+6)%7)}else("W"in G||"U"in G)&&("w"in G||(G.w="u"in G?G.u%7:"W"in G?1:0),ut="Z"in G?n1(Zu(G.y,0,1)).getUTCDay():r1(Zu(G.y,0,1)).getDay(),G.m=0,G.d="W"in G?(G.w+6)%7+G.W*7-(ut+5)%7:G.w+G.U*7-(ut+6)%7);return"Z"in G?(G.H+=G.Z/100|0,G.M+=G.Z%100,n1(G)):r1(G)}}function C(me,ye,qe,G){for(var He=0,Ke=ye.length,ut=qe.length,ze,Pe;He<Ke;){if(G>=ut)return-1;if(ze=ye.charCodeAt(He++),ze===37){if(ze=ye.charAt(He++),Pe=E[ze in S3?ye.charAt(He++):ze],!Pe||(G=Pe(me,qe,G))<0)return-1}else if(ze!=qe.charCodeAt(G++))return-1}return G}function P(me,ye,qe){var G=u.exec(ye.slice(qe));return G?(me.p=f.get(G[0].toLowerCase()),qe+G[0].length):-1}function B(me,ye,qe){var G=g.exec(ye.slice(qe));return G?(me.w=v.get(G[0].toLowerCase()),qe+G[0].length):-1}function F(me,ye,qe){var G=m.exec(ye.slice(qe));return G?(me.w=p.get(G[0].toLowerCase()),qe+G[0].length):-1}function O(me,ye,qe){var G=k.exec(ye.slice(qe));return G?(me.m=N.get(G[0].toLowerCase()),qe+G[0].length):-1}function R(me,ye,qe){var G=y.exec(ye.slice(qe));return G?(me.m=w.get(G[0].toLowerCase()),qe+G[0].length):-1}function Q(me,ye,qe){return C(me,t,ye,qe)}function V(me,ye,qe){return C(me,r,ye,qe)}function J(me,ye,qe){return C(me,a,ye,qe)}function ae(me){return o[me.getDay()]}function L(me){return i[me.getDay()]}function H(me){return d[me.getMonth()]}function ce(me){return l[me.getMonth()]}function z(me){return s[+(me.getHours()>=12)]}function I(me){return 1+~~(me.getMonth()/3)}function Z(me){return o[me.getUTCDay()]}function te(me){return i[me.getUTCDay()]}function se(me){return d[me.getUTCMonth()]}function be(me){return l[me.getUTCMonth()]}function Ee(me){return s[+(me.getUTCHours()>=12)]}function _e(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var ye=S(me+="",b);return ye.toString=function(){return me},ye},parse:function(me){var ye=_(me+="",!1);return ye.toString=function(){return me},ye},utcFormat:function(me){var ye=S(me+="",A);return ye.toString=function(){return me},ye},utcParse:function(me){var ye=_(me+="",!0);return ye.toString=function(){return me},ye}}}var S3={"-":"",_:" ",0:"0"},ma=/^\s*\d+/,jX=/^%/,NX=/[\\^$*+?|[\]().{}]/g;function Mr(e,t,r){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<r?new Array(r-i+1).join(t)+s:s)}function kX(e){return e.replace(NX,"\\$&")}function eh(e){return new RegExp("^(?:"+e.map(kX).join("|")+")","i")}function th(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function SX(e,t,r){var a=ma.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function _X(e,t,r){var a=ma.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function EX(e,t,r){var a=ma.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function CX(e,t,r){var a=ma.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function AX(e,t,r){var a=ma.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function _3(e,t,r){var a=ma.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function E3(e,t,r){var a=ma.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function TX(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function OX(e,t,r){var a=ma.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function PX(e,t,r){var a=ma.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function C3(e,t,r){var a=ma.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function IX(e,t,r){var a=ma.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function A3(e,t,r){var a=ma.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function DX(e,t,r){var a=ma.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function MX(e,t,r){var a=ma.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function RX(e,t,r){var a=ma.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function FX(e,t,r){var a=ma.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function $X(e,t,r){var a=jX.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function LX(e,t,r){var a=ma.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function BX(e,t,r){var a=ma.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function T3(e,t){return Mr(e.getDate(),t,2)}function UX(e,t){return Mr(e.getHours(),t,2)}function HX(e,t){return Mr(e.getHours()%12||12,t,2)}function qX(e,t){return Mr(1+Yf.count(No(e),e),t,3)}function YM(e,t){return Mr(e.getMilliseconds(),t,3)}function zX(e,t){return YM(e,t)+"000"}function WX(e,t){return Mr(e.getMonth()+1,t,2)}function KX(e,t){return Mr(e.getMinutes(),t,2)}function VX(e,t){return Mr(e.getSeconds(),t,2)}function GX(e){var t=e.getDay();return t===0?7:t}function YX(e,t){return Mr(Pg.count(No(e)-1,e),t,2)}function XM(e){var t=e.getDay();return t>=4||t===0?Pd(e):Pd.ceil(e)}function XX(e,t){return e=XM(e),Mr(Pd.count(No(e),e)+(No(e).getDay()===4),t,2)}function JX(e){return e.getDay()}function QX(e,t){return Mr(up.count(No(e)-1,e),t,2)}function ZX(e,t){return Mr(e.getFullYear()%100,t,2)}function eJ(e,t){return e=XM(e),Mr(e.getFullYear()%100,t,2)}function tJ(e,t){return Mr(e.getFullYear()%1e4,t,4)}function rJ(e,t){var r=e.getDay();return e=r>=4||r===0?Pd(e):Pd.ceil(e),Mr(e.getFullYear()%1e4,t,4)}function nJ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Mr(t/60|0,"0",2)+Mr(t%60,"0",2)}function O3(e,t){return Mr(e.getUTCDate(),t,2)}function aJ(e,t){return Mr(e.getUTCHours(),t,2)}function sJ(e,t){return Mr(e.getUTCHours()%12||12,t,2)}function iJ(e,t){return Mr(1+Og.count(ko(e),e),t,3)}function JM(e,t){return Mr(e.getUTCMilliseconds(),t,3)}function oJ(e,t){return JM(e,t)+"000"}function lJ(e,t){return Mr(e.getUTCMonth()+1,t,2)}function cJ(e,t){return Mr(e.getUTCMinutes(),t,2)}function dJ(e,t){return Mr(e.getUTCSeconds(),t,2)}function uJ(e){var t=e.getUTCDay();return t===0?7:t}function hJ(e,t){return Mr(Ig.count(ko(e)-1,e),t,2)}function QM(e){var t=e.getUTCDay();return t>=4||t===0?Id(e):Id.ceil(e)}function fJ(e,t){return e=QM(e),Mr(Id.count(ko(e),e)+(ko(e).getUTCDay()===4),t,2)}function mJ(e){return e.getUTCDay()}function pJ(e,t){return Mr(hp.count(ko(e)-1,e),t,2)}function gJ(e,t){return Mr(e.getUTCFullYear()%100,t,2)}function xJ(e,t){return e=QM(e),Mr(e.getUTCFullYear()%100,t,2)}function yJ(e,t){return Mr(e.getUTCFullYear()%1e4,t,4)}function vJ(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Id(e):Id.ceil(e),Mr(e.getUTCFullYear()%1e4,t,4)}function bJ(){return"+0000"}function P3(){return"%"}function I3(e){return+e}function D3(e){return Math.floor(+e/1e3)}var td,ZM,eR;wJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wJ(e){return td=wX(e),ZM=td.format,td.parse,eR=td.utcFormat,td.utcParse,td}function jJ(e){return new Date(e)}function NJ(e){return e instanceof Date?+e:+new Date(+e)}function mk(e,t,r,a,s,i,o,l,d,u){var f=ek(),m=f.invert,p=f.domain,g=u(".%L"),v=u(":%S"),y=u("%I:%M"),w=u("%I %p"),k=u("%a %d"),N=u("%b %d"),b=u("%B"),A=u("%Y");function E(S){return(d(S)<S?g:l(S)<S?v:o(S)<S?y:i(S)<S?w:a(S)<S?s(S)<S?k:N:r(S)<S?b:A)(S)}return f.invert=function(S){return new Date(m(S))},f.domain=function(S){return arguments.length?p(Array.from(S,NJ)):p().map(jJ)},f.ticks=function(S){var _=p();return e(_[0],_[_.length-1],S??10)},f.tickFormat=function(S,_){return _==null?E:u(_)},f.nice=function(S){var _=p();return(!S||typeof S.range!="function")&&(S=t(_[0],_[_.length-1],S??10)),S?p(BM(_,S)):f},f.copy=function(){return Gf(f,mk(e,t,r,a,s,i,o,l,d,u))},f}function kJ(){return Xs.apply(mk(vX,bX,No,hk,Pg,Yf,dk,lk,Gl,ZM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function SJ(){return Xs.apply(mk(xX,yX,ko,fk,Ig,Og,uk,ck,Gl,eR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Dg(){var e=0,t=1,r,a,s,i,o=Xa,l=!1,d;function u(m){return m==null||isNaN(m=+m)?d:o(s===0?.5:(m=(i(m)-r)*s,l?Math.max(0,Math.min(1,m)):m))}u.domain=function(m){return arguments.length?([e,t]=m,r=i(e=+e),a=i(t=+t),s=r===a?0:1/(a-r),u):[e,t]},u.clamp=function(m){return arguments.length?(l=!!m,u):l},u.interpolator=function(m){return arguments.length?(o=m,u):o};function f(m){return function(p){var g,v;return arguments.length?([g,v]=p,o=m(g,v),u):[o(0),o(1)]}}return u.range=f(cu),u.rangeRound=f(Z2),u.unknown=function(m){return arguments.length?(d=m,u):d},function(m){return i=m,r=m(e),a=m(t),s=r===a?0:1/(a-r),u}}function pl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function tR(){var e=ml(Dg()(Xa));return e.copy=function(){return pl(e,tR())},To.apply(e,arguments)}function rR(){var e=nk(Dg()).domain([1,10]);return e.copy=function(){return pl(e,rR()).base(e.base())},To.apply(e,arguments)}function nR(){var e=ak(Dg());return e.copy=function(){return pl(e,nR()).constant(e.constant())},To.apply(e,arguments)}function pk(){var e=sk(Dg());return e.copy=function(){return pl(e,pk()).exponent(e.exponent())},To.apply(e,arguments)}function _J(){return pk.apply(null,arguments).exponent(.5)}function aR(){var e=[],t=Xa;function r(a){if(a!=null&&!isNaN(a=+a))return t((Kf(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ol),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(s,i)=>hY(e,i/a))},r.copy=function(){return aR(t).domain(e)},To.apply(r,arguments)}function Mg(){var e=0,t=.5,r=1,a=1,s,i,o,l,d,u=Xa,f,m=!1,p;function g(y){return isNaN(y=+y)?p:(y=.5+((y=+f(y))-i)*(a*y<a*i?l:d),u(m?Math.max(0,Math.min(1,y)):y))}g.domain=function(y){return arguments.length?([e,t,r]=y,s=f(e=+e),i=f(t=+t),o=f(r=+r),l=s===i?0:.5/(i-s),d=i===o?0:.5/(o-i),a=i<s?-1:1,g):[e,t,r]},g.clamp=function(y){return arguments.length?(m=!!y,g):m},g.interpolator=function(y){return arguments.length?(u=y,g):u};function v(y){return function(w){var k,N,b;return arguments.length?([k,N,b]=w,u=$Y(y,[k,N,b]),g):[u(0),u(.5),u(1)]}}return g.range=v(cu),g.rangeRound=v(Z2),g.unknown=function(y){return arguments.length?(p=y,g):p},function(y){return f=y,s=y(e),i=y(t),o=y(r),l=s===i?0:.5/(i-s),d=i===o?0:.5/(o-i),a=i<s?-1:1,g}}function sR(){var e=ml(Mg()(Xa));return e.copy=function(){return pl(e,sR())},To.apply(e,arguments)}function iR(){var e=nk(Mg()).domain([.1,1,10]);return e.copy=function(){return pl(e,iR()).base(e.base())},To.apply(e,arguments)}function oR(){var e=ak(Mg());return e.copy=function(){return pl(e,oR()).constant(e.constant())},To.apply(e,arguments)}function gk(){var e=sk(Mg());return e.copy=function(){return pl(e,gk()).exponent(e.exponent())},To.apply(e,arguments)}function EJ(){return gk.apply(null,arguments).exponent(.5)}const M3=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Zh,scaleDiverging:sR,scaleDivergingLog:iR,scaleDivergingPow:gk,scaleDivergingSqrt:EJ,scaleDivergingSymlog:oR,scaleIdentity:LM,scaleImplicit:Jj,scaleLinear:cp,scaleLog:UM,scaleOrdinal:X2,scalePoint:wh,scalePow:ik,scaleQuantile:zM,scaleQuantize:WM,scaleRadial:qM,scaleSequential:tR,scaleSequentialLog:rR,scaleSequentialPow:pk,scaleSequentialQuantile:aR,scaleSequentialSqrt:_J,scaleSequentialSymlog:nR,scaleSqrt:oX,scaleSymlog:HM,scaleThreshold:KM,scaleTime:kJ,scaleUtc:SJ,tickFormat:$M},Symbol.toStringTag,{value:"Module"}));var a1,R3;function Rg(){if(R3)return a1;R3=1;var e=su();function t(r,a,s){for(var i=-1,o=r.length;++i<o;){var l=r[i],d=a(l);if(d!=null&&(u===void 0?d===d&&!e(d):s(d,u)))var u=d,f=l}return f}return a1=t,a1}var s1,F3;function lR(){if(F3)return s1;F3=1;function e(t,r){return t>r}return s1=e,s1}var i1,$3;function CJ(){if($3)return i1;$3=1;var e=Rg(),t=lR(),r=lu();function a(s){return s&&s.length?e(s,r,t):void 0}return i1=a,i1}var AJ=CJ();const Fg=qr(AJ);var o1,L3;function cR(){if(L3)return o1;L3=1;function e(t,r){return t<r}return o1=e,o1}var l1,B3;function TJ(){if(B3)return l1;B3=1;var e=Rg(),t=cR(),r=lu();function a(s){return s&&s.length?e(s,r,t):void 0}return l1=a,l1}var OJ=TJ();const $g=qr(OJ);var c1,U3;function PJ(){if(U3)return c1;U3=1;var e=P2(),t=qi(),r=yM(),a=us();function s(i,o){var l=a(i)?e:r;return l(i,t(o,3))}return c1=s,c1}var d1,H3;function IJ(){if(H3)return d1;H3=1;var e=gM(),t=PJ();function r(a,s){return e(t(a,s),1)}return d1=r,d1}var DJ=IJ();const MJ=qr(DJ);var u1,q3;function RJ(){if(q3)return u1;q3=1;var e=W2();function t(r,a){return e(r,a)}return u1=t,u1}var FJ=RJ();const du=qr(FJ);var uu=1e9,$J={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},yk,mn=!0,Gs="[DecimalError] ",Ql=Gs+"Invalid argument: ",xk=Gs+"Exponent out of range: ",hu=Math.floor,Ll=Math.pow,LJ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ss,da=1e7,on=7,dR=9007199254740991,fp=hu(dR/on),kt={};kt.absoluteValue=kt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};kt.comparedTo=kt.cmp=function(e){var t,r,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,r=a<s?a:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};kt.decimalPlaces=kt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*on;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};kt.dividedBy=kt.div=function(e){return vo(this,new this.constructor(e))};kt.dividedToIntegerBy=kt.idiv=function(e){var t=this,r=t.constructor;return Yr(vo(t,new r(e),0,1),r.precision)};kt.equals=kt.eq=function(e){return!this.cmp(e)};kt.exponent=function(){return Wn(this)};kt.greaterThan=kt.gt=function(e){return this.cmp(e)>0};kt.greaterThanOrEqualTo=kt.gte=function(e){return this.cmp(e)>=0};kt.isInteger=kt.isint=function(){return this.e>this.d.length-2};kt.isNegative=kt.isneg=function(){return this.s<0};kt.isPositive=kt.ispos=function(){return this.s>0};kt.isZero=function(){return this.s===0};kt.lessThan=kt.lt=function(e){return this.cmp(e)<0};kt.lessThanOrEqualTo=kt.lte=function(e){return this.cmp(e)<1};kt.logarithm=kt.log=function(e){var t,r=this,a=r.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Ss))throw Error(Gs+"NaN");if(r.s<1)throw Error(Gs+(r.s?"NaN":"-Infinity"));return r.eq(Ss)?new a(0):(mn=!1,t=vo(af(r,i),af(e,i),i),mn=!0,Yr(t,s))};kt.minus=kt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?fR(t,e):uR(t,(e.s=-e.s,e))};kt.modulo=kt.mod=function(e){var t,r=this,a=r.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(Gs+"NaN");return r.s?(mn=!1,t=vo(r,e,0,1).times(e),mn=!0,r.minus(t)):Yr(new a(r),s)};kt.naturalExponential=kt.exp=function(){return hR(this)};kt.naturalLogarithm=kt.ln=function(){return af(this)};kt.negated=kt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};kt.plus=kt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?uR(t,e):fR(t,(e.s=-e.s,e))};kt.precision=kt.sd=function(e){var t,r,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ql+e);if(t=Wn(s)+1,a=s.d.length-1,r=a*on+1,a=s.d[a],a){for(;a%10==0;a/=10)r--;for(a=s.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};kt.squareRoot=kt.sqrt=function(){var e,t,r,a,s,i,o,l=this,d=l.constructor;if(l.s<1){if(!l.s)return new d(0);throw Error(Gs+"NaN")}for(e=Wn(l),mn=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Mi(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=hu((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new d(t)):a=new d(s.toString()),r=d.precision,s=o=r+3;;)if(i=a,a=i.plus(vo(l,i,o+2)).times(.5),Mi(i.d).slice(0,o)===(t=Mi(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Yr(i,r+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return mn=!0,Yr(a,r)};kt.times=kt.mul=function(e){var t,r,a,s,i,o,l,d,u,f=this,m=f.constructor,p=f.d,g=(e=new m(e)).d;if(!f.s||!e.s)return new m(0);for(e.s*=f.s,r=f.e+e.e,d=p.length,u=g.length,d<u&&(i=p,p=g,g=i,o=d,d=u,u=o),i=[],o=d+u,a=o;a--;)i.push(0);for(a=u;--a>=0;){for(t=0,s=d+a;s>a;)l=i[s]+g[a]*p[s-a-1]+t,i[s--]=l%da|0,t=l/da|0;i[s]=(i[s]+t)%da|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,mn?Yr(e,m.precision):e};kt.toDecimalPlaces=kt.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(Bi(e,0,uu),t===void 0?t=a.rounding:Bi(t,0,8),Yr(r,e+Wn(r)+1,t))};kt.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=lc(a,!0):(Bi(e,0,uu),t===void 0?t=s.rounding:Bi(t,0,8),a=Yr(new s(a),e+1,t),r=lc(a,!0,e+1)),r};kt.toFixed=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?lc(s):(Bi(e,0,uu),t===void 0?t=i.rounding:Bi(t,0,8),a=Yr(new i(s),e+Wn(s)+1,t),r=lc(a.abs(),!1,e+Wn(a)+1),s.isneg()&&!s.isZero()?"-"+r:r)};kt.toInteger=kt.toint=function(){var e=this,t=e.constructor;return Yr(new t(e),Wn(e)+1,t.rounding)};kt.toNumber=function(){return+this};kt.toPower=kt.pow=function(e){var t,r,a,s,i,o,l=this,d=l.constructor,u=12,f=+(e=new d(e));if(!e.s)return new d(Ss);if(l=new d(l),!l.s){if(e.s<1)throw Error(Gs+"Infinity");return l}if(l.eq(Ss))return l;if(a=d.precision,e.eq(Ss))return Yr(l,a);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=f<0?-f:f)<=dR){for(s=new d(Ss),t=Math.ceil(a/on+4),mn=!1;r%2&&(s=s.times(l),W3(s.d,t)),r=hu(r/2),r!==0;)l=l.times(l),W3(l.d,t);return mn=!0,e.s<0?new d(Ss).div(s):Yr(s,a)}}else if(i<0)throw Error(Gs+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,mn=!1,s=e.times(af(l,a+u)),mn=!0,s=hR(s),s.s=i,s};kt.toPrecision=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?(r=Wn(s),a=lc(s,r<=i.toExpNeg||r>=i.toExpPos)):(Bi(e,1,uu),t===void 0?t=i.rounding:Bi(t,0,8),s=Yr(new i(s),e,t),r=Wn(s),a=lc(s,e<=r||r<=i.toExpNeg,e)),a};kt.toSignificantDigits=kt.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Bi(e,1,uu),t===void 0?t=a.rounding:Bi(t,0,8)),Yr(new a(r),e,t)};kt.toString=kt.valueOf=kt.val=kt.toJSON=kt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Wn(e),r=e.constructor;return lc(e,t<=r.toExpNeg||t>=r.toExpPos)};function uR(e,t){var r,a,s,i,o,l,d,u,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),mn?Yr(t,m):t;if(d=e.d,u=t.d,o=e.e,s=t.e,d=d.slice(),i=o-s,i){for(i<0?(a=d,i=-i,l=u.length):(a=u,s=o,l=d.length),o=Math.ceil(m/on),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=d.length,i=u.length,l-i<0&&(i=l,a=u,u=d,d=a),r=0;i;)r=(d[--i]=d[i]+u[i]+r)/da|0,d[i]%=da;for(r&&(d.unshift(r),++s),l=d.length;d[--l]==0;)d.pop();return t.d=d,t.e=s,mn?Yr(t,m):t}function Bi(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ql+e)}function Mi(e){var t,r,a,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)a=e[t]+"",r=on-a.length,r&&(i+=Xo(r)),i+=a;o=e[t],a=o+"",r=on-a.length,r&&(i+=Xo(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var vo=(function(){function e(a,s){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*s+o,a[l]=i%da|0,o=i/da|0;return o&&a.unshift(o),a}function t(a,s,i,o){var l,d;if(i!=o)d=i>o?1:-1;else for(l=d=0;l<i;l++)if(a[l]!=s[l]){d=a[l]>s[l]?1:-1;break}return d}function r(a,s,i){for(var o=0;i--;)a[i]-=o,o=a[i]<s[i]?1:0,a[i]=o*da+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,o){var l,d,u,f,m,p,g,v,y,w,k,N,b,A,E,S,_,C,P=a.constructor,B=a.s==s.s?1:-1,F=a.d,O=s.d;if(!a.s)return new P(a);if(!s.s)throw Error(Gs+"Division by zero");for(d=a.e-s.e,_=O.length,E=F.length,g=new P(B),v=g.d=[],u=0;O[u]==(F[u]||0);)++u;if(O[u]>(F[u]||0)&&--d,i==null?N=i=P.precision:o?N=i+(Wn(a)-Wn(s))+1:N=i,N<0)return new P(0);if(N=N/on+2|0,u=0,_==1)for(f=0,O=O[0],N++;(u<E||f)&&N--;u++)b=f*da+(F[u]||0),v[u]=b/O|0,f=b%O|0;else{for(f=da/(O[0]+1)|0,f>1&&(O=e(O,f),F=e(F,f),_=O.length,E=F.length),A=_,y=F.slice(0,_),w=y.length;w<_;)y[w++]=0;C=O.slice(),C.unshift(0),S=O[0],O[1]>=da/2&&++S;do f=0,l=t(O,y,_,w),l<0?(k=y[0],_!=w&&(k=k*da+(y[1]||0)),f=k/S|0,f>1?(f>=da&&(f=da-1),m=e(O,f),p=m.length,w=y.length,l=t(m,y,p,w),l==1&&(f--,r(m,_<p?C:O,p))):(f==0&&(l=f=1),m=O.slice()),p=m.length,p<w&&m.unshift(0),r(y,m,w),l==-1&&(w=y.length,l=t(O,y,_,w),l<1&&(f++,r(y,_<w?C:O,w))),w=y.length):l===0&&(f++,y=[0]),v[u++]=f,l&&y[0]?y[w++]=F[A]||0:(y=[F[A]],w=1);while((A++<E||y[0]!==void 0)&&N--)}return v[0]||v.shift(),g.e=d,Yr(g,o?i+Wn(g)+1:i)}})();function hR(e,t){var r,a,s,i,o,l,d=0,u=0,f=e.constructor,m=f.precision;if(Wn(e)>16)throw Error(xk+Wn(e));if(!e.s)return new f(Ss);for(mn=!1,l=m,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(a=Math.log(Ll(2,u))/Math.LN10*2+5|0,l+=a,r=s=i=new f(Ss),f.precision=l;;){if(s=Yr(s.times(e),l),r=r.times(++d),o=i.plus(vo(s,r,l)),Mi(o.d).slice(0,l)===Mi(i.d).slice(0,l)){for(;u--;)i=Yr(i.times(i),l);return f.precision=m,t==null?(mn=!0,Yr(i,m)):i}i=o}}function Wn(e){for(var t=e.e*on,r=e.d[0];r>=10;r/=10)t++;return t}function h1(e,t,r){if(t>e.LN10.sd())throw mn=!0,r&&(e.precision=r),Error(Gs+"LN10 precision limit exceeded");return Yr(new e(e.LN10),t)}function Xo(e){for(var t="";e--;)t+="0";return t}function af(e,t){var r,a,s,i,o,l,d,u,f,m=1,p=10,g=e,v=g.d,y=g.constructor,w=y.precision;if(g.s<1)throw Error(Gs+(g.s?"NaN":"-Infinity"));if(g.eq(Ss))return new y(0);if(t==null?(mn=!1,u=w):u=t,g.eq(10))return t==null&&(mn=!0),h1(y,u);if(u+=p,y.precision=u,r=Mi(v),a=r.charAt(0),i=Wn(g),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)g=g.times(e),r=Mi(g.d),a=r.charAt(0),m++;i=Wn(g),a>1?(g=new y("0."+r),i++):g=new y(a+"."+r.slice(1))}else return d=h1(y,u+2,w).times(i+""),g=af(new y(a+"."+r.slice(1)),u-p).plus(d),y.precision=w,t==null?(mn=!0,Yr(g,w)):g;for(l=o=g=vo(g.minus(Ss),g.plus(Ss),u),f=Yr(g.times(g),u),s=3;;){if(o=Yr(o.times(f),u),d=l.plus(vo(o,new y(s),u)),Mi(d.d).slice(0,u)===Mi(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(h1(y,u+2,w).times(i+""))),l=vo(l,new y(m),u),y.precision=w,t==null?(mn=!0,Yr(l,w)):l;l=d,s+=2}}function z3(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,r=r-a-1,e.e=hu(r/on),e.d=[],a=(r+1)%on,r<0&&(a+=on),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=on;a<s;)e.d.push(+t.slice(a,a+=on));t=t.slice(a),a=on-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),mn&&(e.e>fp||e.e<-fp))throw Error(xk+r)}else e.s=0,e.e=0,e.d=[0];return e}function Yr(e,t,r){var a,s,i,o,l,d,u,f,m=e.d;for(o=1,i=m[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=on,s=t,u=m[f=0];else{if(f=Math.ceil((a+1)/on),i=m.length,f>=i)return e;for(u=i=m[f],o=1;i>=10;i/=10)o++;a%=on,s=a-on+o}if(r!==void 0&&(i=Ll(10,o-s-1),l=u/i%10|0,d=t<0||m[f+1]!==void 0||u%i,d=r<4?(l||d)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||d||r==6&&(a>0?s>0?u/Ll(10,o-s):0:m[f-1])%10&1||r==(e.s<0?8:7))),t<1||!m[0])return d?(i=Wn(e),m.length=1,t=t-i-1,m[0]=Ll(10,(on-t%on)%on),e.e=hu(-t/on)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(a==0?(m.length=f,i=1,f--):(m.length=f+1,i=Ll(10,on-a),m[f]=s>0?(u/Ll(10,o-s)%Ll(10,s)|0)*i:0),d)for(;;)if(f==0){(m[0]+=i)==da&&(m[0]=1,++e.e);break}else{if(m[f]+=i,m[f]!=da)break;m[f--]=0,i=1}for(a=m.length;m[--a]===0;)m.pop();if(mn&&(e.e>fp||e.e<-fp))throw Error(xk+Wn(e));return e}function fR(e,t){var r,a,s,i,o,l,d,u,f,m,p=e.constructor,g=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),mn?Yr(t,g):t;if(d=e.d,m=t.d,a=t.e,u=e.e,d=d.slice(),o=u-a,o){for(f=o<0,f?(r=d,o=-o,l=m.length):(r=m,a=u,l=d.length),s=Math.max(Math.ceil(g/on),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=d.length,l=m.length,f=s<l,f&&(l=s),s=0;s<l;s++)if(d[s]!=m[s]){f=d[s]<m[s];break}o=0}for(f&&(r=d,d=m,m=r,t.s=-t.s),l=d.length,s=m.length-l;s>0;--s)d[l++]=0;for(s=m.length;s>o;){if(d[--s]<m[s]){for(i=s;i&&d[--i]===0;)d[i]=da-1;--d[i],d[s]+=da}d[s]-=m[s]}for(;d[--l]===0;)d.pop();for(;d[0]===0;d.shift())--a;return d[0]?(t.d=d,t.e=a,mn?Yr(t,g):t):new p(0)}function lc(e,t,r){var a,s=Wn(e),i=Mi(e.d),o=i.length;return t?(r&&(a=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Xo(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Xo(-s-1)+i,r&&(a=r-o)>0&&(i+=Xo(a))):s>=o?(i+=Xo(s+1-o),r&&(a=r-s-1)>0&&(i=i+"."+Xo(a))):((a=s+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-o)>0&&(s+1===o&&(i+="."),i+=Xo(a))),e.s<0?"-"+i:i}function W3(e,t){if(e.length>t)return e.length=t,!0}function mR(e){var t,r,a;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ql+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return z3(o,i.toString())}else if(typeof i!="string")throw Error(Ql+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,LJ.test(i))z3(o,i);else throw Error(Ql+i)}if(s.prototype=kt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=mR,s.config=s.set=BJ,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function BJ(e){if(!e||typeof e!="object")throw Error(Gs+"Object expected");var t,r,a,s=["precision",1,uu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[r=s[t]])!==void 0)if(hu(a)===a&&a>=s[t+1]&&a<=s[t+2])this[r]=a;else throw Error(Ql+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(Ql+r+": "+a);return this}var yk=mR($J);Ss=new yk(1);const Vr=yk;function UJ(e){return WJ(e)||zJ(e)||qJ(e)||HJ()}function HJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qJ(e,t){if(e){if(typeof e=="string")return tN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tN(e,t)}}function zJ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function WJ(e){if(Array.isArray(e))return tN(e)}function tN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var KJ=function(t){return t},pR={},gR=function(t){return t===pR},K3=function(t){return function r(){return arguments.length===0||arguments.length===1&&gR(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},VJ=function e(t,r){return t===1?r:K3(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==pR}).length;return o>=t?r.apply(void 0,s):e(t-o,K3(function(){for(var l=arguments.length,d=new Array(l),u=0;u<l;u++)d[u]=arguments[u];var f=s.map(function(m){return gR(m)?d.shift():m});return r.apply(void 0,UJ(f).concat(d))}))})},Lg=function(t){return VJ(t.length,t)},rN=function(t,r){for(var a=[],s=t;s<r;++s)a[s-t]=s;return a},GJ=Lg(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),YJ=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return KJ;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,d){return d(l)},i.apply(void 0,arguments))}},nN=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},xR=function(t){var r=null,a=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,d){return l===r[d]})||(r=i,a=t.apply(void 0,i)),a}};function XJ(e){var t;return e===0?t=1:t=Math.floor(new Vr(e).abs().log(10).toNumber())+1,t}function JJ(e,t,r){for(var a=new Vr(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(r),s++;return i}var QJ=Lg(function(e,t,r){var a=+e,s=+t;return a+r*(s-a)}),ZJ=Lg(function(e,t,r){var a=t-+e;return a=a||1/0,(r-e)/a}),eQ=Lg(function(e,t,r){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});const Bg={rangeStep:JJ,getDigitCount:XJ,interpolateNumber:QJ,uninterpolateNumber:ZJ,uninterpolateTruncation:eQ};function aN(e){return nQ(e)||rQ(e)||yR(e)||tQ()}function tQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rQ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function nQ(e){if(Array.isArray(e))return sN(e)}function sf(e,t){return iQ(e)||sQ(e,t)||yR(e,t)||aQ()}function aQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yR(e,t){if(e){if(typeof e=="string")return sN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sN(e,t)}}function sN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function sQ(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],a=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));a=!0);}catch(d){s=!0,i=d}finally{try{!a&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function iQ(e){if(Array.isArray(e))return e}function vR(e){var t=sf(e,2),r=t[0],a=t[1],s=r,i=a;return r>a&&(s=a,i=r),[s,i]}function bR(e,t,r){if(e.lte(0))return new Vr(0);var a=Bg.getDigitCount(e.toNumber()),s=new Vr(10).pow(a),i=e.div(s),o=a!==1?.05:.1,l=new Vr(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=l.mul(s);return t?d:new Vr(Math.ceil(d))}function oQ(e,t,r){var a=1,s=new Vr(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(a=new Vr(10).pow(Bg.getDigitCount(e)-1),s=new Vr(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new Vr(Math.floor(e)))}else e===0?s=new Vr(Math.floor((t-1)/2)):r||(s=new Vr(Math.floor(e)));var o=Math.floor((t-1)/2),l=YJ(GJ(function(d){return s.add(new Vr(d-o).mul(a)).toNumber()}),rN);return l(0,t)}function wR(e,t,r,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Vr(0),tickMin:new Vr(0),tickMax:new Vr(0)};var i=bR(new Vr(t).sub(e).div(r-1),a,s),o;e<=0&&t>=0?o=new Vr(0):(o=new Vr(e).add(t).div(2),o=o.sub(new Vr(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),d=Math.ceil(new Vr(t).sub(o).div(i).toNumber()),u=l+d+1;return u>r?wR(e,t,r,a,s+1):(u<r&&(d=t>0?d+(r-u):d,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new Vr(l).mul(i)),tickMax:o.add(new Vr(d).mul(i))})}function lQ(e){var t=sf(e,2),r=t[0],a=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=vR([r,a]),d=sf(l,2),u=d[0],f=d[1];if(u===-1/0||f===1/0){var m=f===1/0?[u].concat(aN(rN(0,s-1).map(function(){return 1/0}))):[].concat(aN(rN(0,s-1).map(function(){return-1/0})),[f]);return r>a?nN(m):m}if(u===f)return oQ(u,s,i);var p=wR(u,f,o,i),g=p.step,v=p.tickMin,y=p.tickMax,w=Bg.rangeStep(v,y.add(new Vr(.1).mul(g)),g);return r>a?nN(w):w}function cQ(e,t){var r=sf(e,2),a=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=vR([a,s]),l=sf(o,2),d=l[0],u=l[1];if(d===-1/0||u===1/0)return[a,s];if(d===u)return[d];var f=Math.max(t,2),m=bR(new Vr(u).sub(d).div(f-1),i,0),p=[].concat(aN(Bg.rangeStep(new Vr(d),new Vr(u).sub(new Vr(.99).mul(m)),m)),[u]);return a>s?nN(p):p}var dQ=xR(lQ),uQ=xR(cQ),hQ="Invariant failed";function cc(e,t){throw new Error(hQ)}var fQ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Dd(e){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dd(e)}function mp(){return mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},mp.apply(this,arguments)}function mQ(e,t){return yQ(e)||xQ(e,t)||gQ(e,t)||pQ()}function pQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gQ(e,t){if(e){if(typeof e=="string")return V3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V3(e,t)}}function V3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function xQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function yQ(e){if(Array.isArray(e))return e}function vQ(e,t){if(e==null)return{};var r=bQ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function bQ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function wQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jQ(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,kR(a.key),a)}}function NQ(e,t,r){return t&&jQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kQ(e,t,r){return t=pp(t),SQ(e,jR()?Reflect.construct(t,r||[],pp(e).constructor):t.apply(e,r))}function SQ(e,t){if(t&&(Dd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Q(e)}function _Q(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jR=function(){return!!e})()}function pp(e){return pp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pp(e)}function EQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iN(e,t)}function iN(e,t){return iN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},iN(e,t)}function NR(e,t,r){return t=kR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kR(e){var t=CQ(e,"string");return Dd(t)=="symbol"?t:t+""}function CQ(e,t){if(Dd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Dd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xf=(function(e){function t(){return wQ(this,t),kQ(this,t,arguments)}return EQ(t,e),NQ(t,[{key:"render",value:function(){var a=this.props,s=a.offset,i=a.layout,o=a.width,l=a.dataKey,d=a.data,u=a.dataPointFormatter,f=a.xAxis,m=a.yAxis,p=vQ(a,fQ),g=Rt(p,!1);this.props.direction==="x"&&f.type!=="number"&&cc();var v=d.map(function(y){var w=u(y,l),k=w.x,N=w.y,b=w.value,A=w.errorVal;if(!A)return null;var E=[],S,_;if(Array.isArray(A)){var C=mQ(A,2);S=C[0],_=C[1]}else S=_=A;if(i==="vertical"){var P=f.scale,B=N+s,F=B+o,O=B-o,R=P(b-S),Q=P(b+_);E.push({x1:Q,y1:F,x2:Q,y2:O}),E.push({x1:R,y1:B,x2:Q,y2:B}),E.push({x1:R,y1:F,x2:R,y2:O})}else if(i==="horizontal"){var V=m.scale,J=k+s,ae=J-o,L=J+o,H=V(b-S),ce=V(b+_);E.push({x1:ae,y1:ce,x2:L,y2:ce}),E.push({x1:J,y1:H,x2:J,y2:ce}),E.push({x1:ae,y1:H,x2:L,y2:H})}return xe.createElement(Sr,mp({className:"recharts-errorBar",key:"bar-".concat(E.map(function(z){return"".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))},g),E.map(function(z){return xe.createElement("line",mp({},z,{key:"line-".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))}))});return xe.createElement(Sr,{className:"recharts-errorBars"},v)}}])})(xe.Component);NR(Xf,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});NR(Xf,"displayName","ErrorBar");function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function G3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Il(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G3(Object(r),!0).forEach(function(a){AQ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function AQ(e,t,r){return t=TQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TQ(e){var t=OQ(e,"string");return of(t)=="symbol"?t:t+""}function OQ(e,t){if(of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(of(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SR=function(t){var r=t.children,a=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=bs(r,ka);if(!o)return null;var l=ka.defaultProps,d=l!==void 0?Il(Il({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(a||[]).reduce(function(f,m){var p=m.item,g=m.props,v=g.sectors||g.data||[];return f.concat(v.map(function(y){return{type:o.props.iconType||p.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):u=(a||[]).map(function(f){var m=f.item,p=m.type.defaultProps,g=p!==void 0?Il(Il({},p),m.props):{},v=g.dataKey,y=g.name,w=g.legendType,k=g.hide;return{inactive:k,dataKey:v,type:d.iconType||w||"square",color:vk(m),value:y||v,payload:g}}),Il(Il(Il({},d),ka.getWithHeight(o,s)),{},{payload:u,item:o})};function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function Y3(e){return MQ(e)||DQ(e)||IQ(e)||PQ()}function PQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IQ(e,t){if(e){if(typeof e=="string")return oN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oN(e,t)}}function DQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function MQ(e){if(Array.isArray(e))return oN(e)}function oN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function X3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function jn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X3(Object(r),!0).forEach(function(a){jd(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function jd(e,t,r){return t=RQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RQ(e){var t=FQ(e,"string");return lf(t)=="symbol"?t:t+""}function FQ(e,t){if(lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(lf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function In(e,t,r){return sr(e)||sr(t)?r:na(t)?Es(e,t,r):Kt(t)?t(e):r}function jh(e,t,r,a){var s=MJ(e,function(l){return In(l,t)});if(r==="number"){var i=s.filter(function(l){return gt(l)||parseFloat(l)});return i.length?[$g(i),Fg(i)]:[1/0,-1/0]}var o=a?s.filter(function(l){return!sr(l)}):s;return o.map(function(l){return na(l)||l instanceof Date?l:""})}var $Q=function(t){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=a?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,u=0;u<l;u++){var f=u>0?s[u-1].coordinate:s[l-1].coordinate,m=s[u].coordinate,p=u>=l-1?s[0].coordinate:s[u+1].coordinate,g=void 0;if(Ga(m-f)!==Ga(p-m)){var v=[];if(Ga(p-m)===Ga(d[1]-d[0])){g=p;var y=m+d[1]-d[0];v[0]=Math.min(y,(y+f)/2),v[1]=Math.max(y,(y+f)/2)}else{g=f;var w=p+d[1]-d[0];v[0]=Math.min(m,(w+m)/2),v[1]=Math.max(m,(w+m)/2)}var k=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(t>k[0]&&t<=k[1]||t>=v[0]&&t<=v[1]){o=s[u].index;break}}else{var N=Math.min(f,p),b=Math.max(f,p);if(t>(N+m)/2&&t<=(b+m)/2){o=s[u].index;break}}}else for(var A=0;A<l;A++)if(A===0&&t<=(a[A].coordinate+a[A+1].coordinate)/2||A>0&&A<l-1&&t>(a[A].coordinate+a[A-1].coordinate)/2&&t<=(a[A].coordinate+a[A+1].coordinate)/2||A===l-1&&t>(a[A].coordinate+a[A-1].coordinate)/2){o=a[A].index;break}return o},vk=function(t){var r,a=t,s=a.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?jn(jn({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,d;switch(s){case"Line":d=o;break;case"Area":case"Radar":d=o&&o!=="none"?o:l;break;default:d=l;break}return d},LQ=function(t){var r=t.barSize,a=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),d=0,u=l.length;d<u;d++)for(var f=i[l[d]].stackGroups,m=Object.keys(f),p=0,g=m.length;p<g;p++){var v=f[m[p]],y=v.items,w=v.cateAxisId,k=y.filter(function(_){return yo(_.type).indexOf("Bar")>=0});if(k&&k.length){var N=k[0].type.defaultProps,b=N!==void 0?jn(jn({},N),k[0].props):k[0].props,A=b.barSize,E=b[w];o[E]||(o[E]=[]);var S=sr(A)?r:A;o[E].push({item:k[0],stackList:k.slice(1),barSize:sr(S)?void 0:Ya(S,a,0)})}}return o},BQ=function(t){var r=t.barGap,a=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,d=o.length;if(d<1)return null;var u=Ya(r,s,0,!0),f,m=[];if(o[0].barSize===+o[0].barSize){var p=!1,g=s/d,v=o.reduce(function(A,E){return A+E.barSize||0},0);v+=(d-1)*u,v>=s&&(v-=(d-1)*u,u=0),v>=s&&g>0&&(p=!0,g*=.9,v=d*g);var y=(s-v)/2>>0,w={offset:y-u,size:0};f=o.reduce(function(A,E){var S={item:E.item,position:{offset:w.offset+w.size+u,size:p?g:E.barSize}},_=[].concat(Y3(A),[S]);return w=_[_.length-1].position,E.stackList&&E.stackList.length&&E.stackList.forEach(function(C){_.push({item:C,position:w})}),_},m)}else{var k=Ya(a,s,0,!0);s-2*k-(d-1)*u<=0&&(u=0);var N=(s-2*k-(d-1)*u)/d;N>1&&(N>>=0);var b=l===+l?Math.min(N,l):N;f=o.reduce(function(A,E,S){var _=[].concat(Y3(A),[{item:E.item,position:{offset:k+(N+u)*S+(N-b)/2,size:b}}]);return E.stackList&&E.stackList.length&&E.stackList.forEach(function(C){_.push({item:C,position:_[_.length-1].position})}),_},m)}return f},UQ=function(t,r,a,s){var i=a.children,o=a.width,l=a.margin,d=o-(l.left||0)-(l.right||0),u=SR({children:i,legendWidth:d});if(u){var f=s||{},m=f.width,p=f.height,g=u.align,v=u.verticalAlign,y=u.layout;if((y==="vertical"||y==="horizontal"&&v==="middle")&&g!=="center"&&gt(t[g]))return jn(jn({},t),{},jd({},g,t[g]+(m||0)));if((y==="horizontal"||y==="vertical"&&g==="center")&&v!=="middle"&&gt(t[v]))return jn(jn({},t),{},jd({},v,t[v]+(p||0)))}return t},HQ=function(t,r,a){return sr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||a==="x"?r==="xAxis":a==="y"?r==="yAxis":!0},_R=function(t,r,a,s,i){var o=r.props.children,l=Cs(o,Xf).filter(function(u){return HQ(s,i,u.props.direction)});if(l&&l.length){var d=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var m=In(f,a);if(sr(m))return u;var p=Array.isArray(m)?[$g(m),Fg(m)]:[m,m],g=d.reduce(function(v,y){var w=In(f,y,0),k=p[0]-Math.abs(Array.isArray(w)?w[0]:w),N=p[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(k,v[0]),Math.max(N,v[1])]},[1/0,-1/0]);return[Math.min(g[0],u[0]),Math.max(g[1],u[1])]},[1/0,-1/0])}return null},qQ=function(t,r,a,s,i){var o=r.map(function(l){return _R(t,l,a,i,s)}).filter(function(l){return!sr(l)});return o&&o.length?o.reduce(function(l,d){return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]):null},ER=function(t,r,a,s,i){var o=r.map(function(d){var u=d.props.dataKey;return a==="number"&&u&&_R(t,d,u,s)||jh(t,u,a,i)});if(a==="number")return o.reduce(function(d,u){return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(d,u){for(var f=0,m=u.length;f<m;f++)l[u[f]]||(l[u[f]]=!0,d.push(u[f]));return d},[])},CR=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},AR=function(t,r,a,s){if(s)return t.map(function(d){return d.coordinate});var i,o,l=t.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===a&&(o=!0),d.coordinate});return i||l.push(r),o||l.push(a),l},po=function(t,r,a){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,d=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||a)&&o==="category"&&s.bandwidth?s.bandwidth()/d:0;if(u=t.axisType==="angleAxis"&&l?.length>=2?Ga(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(m){var p=i?i.indexOf(m):m;return{coordinate:s(p)+u,value:m,offset:u}});return f.filter(function(m){return!zf(m.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(m,p){return{coordinate:s(m)+u,value:m,index:p,offset:u}}):s.ticks&&!a?s.ticks(t.tickCount).map(function(m){return{coordinate:s(m)+u,value:m,offset:u}}):s.domain().map(function(m,p){return{coordinate:s(m)+u,value:i?i[m]:m,index:p,offset:u}})},f1=new WeakMap,ym=function(t,r){if(typeof r!="function")return t;f1.has(t)||f1.set(t,new WeakMap);var a=f1.get(t);if(a.has(r))return a.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return a.set(r,s),s},TR=function(t,r,a){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Zh(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:cp(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!a)?{scale:wh(),realScaleType:"point"}:i==="category"?{scale:Zh(),realScaleType:"band"}:{scale:cp(),realScaleType:"linear"};if(ac(s)){var d="scale".concat(Ng(s));return{scale:(M3[d]||wh)(),realScaleType:M3[d]?d:"point"}}return Kt(s)?{scale:s}:{scale:wh(),realScaleType:"point"}},J3=1e-4,OR=function(t){var r=t.domain();if(!(!r||r.length<=2)){var a=r.length,s=t.range(),i=Math.min(s[0],s[1])-J3,o=Math.max(s[0],s[1])+J3,l=t(r[0]),d=t(r[a-1]);(l<i||l>o||d<i||d>o)&&t.domain([r[0],r[a-1]])}},zQ=function(t,r){if(!t)return null;for(var a=0,s=t.length;a<s;a++)if(t[a].item===r)return t[a].position;return null},WQ=function(t,r){if(!r||r.length!==2||!gt(r[0])||!gt(r[1]))return t;var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!gt(t[0])||t[0]<a)&&(i[0]=a),(!gt(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<a&&(i[1]=a),i},KQ=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0,l=0;l<r;++l){var d=zf(t[l][a][1])?t[l][a][0]:t[l][a][1];d>=0?(t[l][a][0]=i,t[l][a][1]=i+d,i=t[l][a][1]):(t[l][a][0]=o,t[l][a][1]=o+d,o=t[l][a][1])}},VQ=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0;o<r;++o){var l=zf(t[o][a][1])?t[o][a][0]:t[o][a][1];l>=0?(t[o][a][0]=i,t[o][a][1]=i+l,i=t[o][a][1]):(t[o][a][0]=0,t[o][a][1]=0)}},GQ={sign:KQ,expand:MW,none:_d,silhouette:RW,wiggle:FW,positive:VQ},YQ=function(t,r,a){var s=r.map(function(l){return l.props.dataKey}),i=GQ[a],o=DW().keys(s).value(function(l,d){return+In(l,d,0)}).order(Fj).offset(i);return o(t)},XQ=function(t,r,a,s,i,o){if(!t)return null;var l=o?r.reverse():r,d={},u=l.reduce(function(m,p){var g,v=(g=p.type)!==null&&g!==void 0&&g.defaultProps?jn(jn({},p.type.defaultProps),p.props):p.props,y=v.stackId,w=v.hide;if(w)return m;var k=v[a],N=m[k]||{hasStack:!1,stackGroups:{}};if(na(y)){var b=N.stackGroups[y]||{numericAxisId:a,cateAxisId:s,items:[]};b.items.push(p),N.hasStack=!0,N.stackGroups[y]=b}else N.stackGroups[ou("_stackId_")]={numericAxisId:a,cateAxisId:s,items:[p]};return jn(jn({},m),{},jd({},k,N))},d),f={};return Object.keys(u).reduce(function(m,p){var g=u[p];if(g.hasStack){var v={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(y,w){var k=g.stackGroups[w];return jn(jn({},y),{},jd({},w,{numericAxisId:a,cateAxisId:s,items:k.items,stackedData:YQ(t,k.items,i)}))},v)}return jn(jn({},m),{},jd({},p,g))},f)},PR=function(t,r){var a=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,d=a||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=dQ(u,i,l);return t.domain([$g(f),Fg(f)]),{niceTicks:f}}if(i&&s==="number"){var m=t.domain(),p=uQ(m,i,l);return{niceTicks:p}}return null};function Q3(e){var t=e.axis,r=e.ticks,a=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!sr(s[t.dataKey])){var l=zm(r,"value",s[t.dataKey]);if(l)return l.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var d=In(s,sr(o)?t.dataKey:o);return sr(d)?null:t.scale(d)}var Z3=function(t){var r=t.axis,a=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return a[l]?a[l].coordinate+s:null;var d=In(o,r.dataKey,r.domain[l]);return sr(d)?null:r.scale(d)-i/2+s},JQ=function(t){var r=t.numericAxis,a=r.scale.domain();if(r.type==="number"){var s=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return s<=0&&i>=0?0:i<0?i:s}return a[0]},QQ=function(t,r){var a,s=(a=t.type)!==null&&a!==void 0&&a.defaultProps?jn(jn({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(na(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},ZQ=function(t){return t.reduce(function(r,a){return[$g(a.concat([r[0]]).filter(gt)),Fg(a.concat([r[1]]).filter(gt))]},[1/0,-1/0])},IR=function(t,r,a){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,d=l.reduce(function(u,f){var m=ZQ(f.slice(r,a+1));return[Math.min(u[0],m[0]),Math.max(u[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],s[0]),Math.max(d[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},eO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lN=function(t,r,a){if(Kt(t))return t(r,a);if(!Array.isArray(t))return r;var s=[];if(gt(t[0]))s[0]=a?t[0]:Math.min(t[0],r[0]);else if(eO.test(t[0])){var i=+eO.exec(t[0])[1];s[0]=r[0]-i}else Kt(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(gt(t[1]))s[1]=a?t[1]:Math.max(t[1],r[1]);else if(tO.test(t[1])){var o=+tO.exec(t[1])[1];s[1]=r[1]+o}else Kt(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},gp=function(t,r,a){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!a||s>0)return s}if(t&&r&&r.length>=2){for(var i=V2(r,function(m){return m.coordinate}),o=1/0,l=1,d=i.length;l<d;l++){var u=i[l],f=i[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},rO=function(t,r,a){return!t||!t.length||du(t,Es(a,"type.defaultProps.domain"))?r:t},DR=function(t,r){var a=t.type.defaultProps?jn(jn({},t.type.defaultProps),t.props):t.props,s=a.dataKey,i=a.name,o=a.unit,l=a.formatter,d=a.tooltipType,u=a.chartType,f=a.hide;return jn(jn({},Rt(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:vk(t),value:In(r,s),type:d,payload:r,chartType:u,hide:f})};function cf(e){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cf(e)}function nO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function oo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nO(Object(r),!0).forEach(function(a){MR(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function MR(e,t,r){return t=eZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eZ(e){var t=tZ(e,"string");return cf(t)=="symbol"?t:t+""}function tZ(e,t){if(cf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(cf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rZ(e,t){return iZ(e)||sZ(e,t)||aZ(e,t)||nZ()}function nZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aZ(e,t){if(e){if(typeof e=="string")return aO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aO(e,t)}}function aO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function sZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function iZ(e){if(Array.isArray(e))return e}var xp=Math.PI/180,oZ=function(t){return t*180/Math.PI},$r=function(t,r,a,s){return{x:t+Math.cos(-xp*s)*a,y:r+Math.sin(-xp*s)*a}},RR=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},FR=function(t,r,a,s,i){var o=t.width,l=t.height,d=t.startAngle,u=t.endAngle,f=Ya(t.cx,o,o/2),m=Ya(t.cy,l,l/2),p=RR(o,l,a),g=Ya(t.innerRadius,p,0),v=Ya(t.outerRadius,p,p*.8),y=Object.keys(r);return y.reduce(function(w,k){var N=r[k],b=N.domain,A=N.reversed,E;if(sr(N.range))s==="angleAxis"?E=[d,u]:s==="radiusAxis"&&(E=[g,v]),A&&(E=[E[1],E[0]]);else{E=N.range;var S=E,_=rZ(S,2);d=_[0],u=_[1]}var C=TR(N,i),P=C.realScaleType,B=C.scale;B.domain(b).range(E),OR(B);var F=PR(B,oo(oo({},N),{},{realScaleType:P})),O=oo(oo(oo({},N),F),{},{range:E,radius:v,realScaleType:P,scale:B,cx:f,cy:m,innerRadius:g,outerRadius:v,startAngle:d,endAngle:u});return oo(oo({},w),{},MR({},k,O))},{})},lZ=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-o,2))},cZ=function(t,r){var a=t.x,s=t.y,i=r.cx,o=r.cy,l=lZ({x:a,y:s},{x:i,y:o});if(l<=0)return{radius:l};var d=(a-i)/l,u=Math.acos(d);return s>o&&(u=2*Math.PI-u),{radius:l,angle:oZ(u),angleInRadian:u}},dZ=function(t){var r=t.startAngle,a=t.endAngle,s=Math.floor(r/360),i=Math.floor(a/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:a-o*360}},uZ=function(t,r){var a=r.startAngle,s=r.endAngle,i=Math.floor(a/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},sO=function(t,r){var a=t.x,s=t.y,i=cZ({x:a,y:s},r),o=i.radius,l=i.angle,d=r.innerRadius,u=r.outerRadius;if(o<d||o>u)return!1;if(o===0)return!0;var f=dZ(r),m=f.startAngle,p=f.endAngle,g=l,v;if(m<=p){for(;g>p;)g-=360;for(;g<m;)g+=360;v=g>=m&&g<=p}else{for(;g>m;)g-=360;for(;g<p;)g+=360;v=g>=p&&g<=m}return v?oo(oo({},r),{},{radius:o,angle:uZ(g,r)}):null},$R=function(t){return!M.isValidElement(t)&&!Kt(t)&&typeof t!="boolean"?t.className:""};function df(e){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},df(e)}var hZ=["offset"];function fZ(e){return xZ(e)||gZ(e)||pZ(e)||mZ()}function mZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pZ(e,t){if(e){if(typeof e=="string")return cN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cN(e,t)}}function gZ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xZ(e){if(Array.isArray(e))return cN(e)}function cN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function yZ(e,t){if(e==null)return{};var r=vZ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function vZ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function iO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Jn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iO(Object(r),!0).forEach(function(a){bZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bZ(e,t,r){return t=wZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wZ(e){var t=jZ(e,"string");return df(t)=="symbol"?t:t+""}function jZ(e,t){if(df(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(df(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uf(){return uf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},uf.apply(this,arguments)}var NZ=function(t){var r=t.value,a=t.formatter,s=sr(t.children)?r:t.children;return Kt(a)?a(s):s},kZ=function(t,r){var a=Ga(r-t),s=Math.min(Math.abs(r-t),360);return a*s},SZ=function(t,r,a){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,d=i,u=d.cx,f=d.cy,m=d.innerRadius,p=d.outerRadius,g=d.startAngle,v=d.endAngle,y=d.clockWise,w=(m+p)/2,k=kZ(g,v),N=k>=0?1:-1,b,A;s==="insideStart"?(b=g+N*o,A=y):s==="insideEnd"?(b=v-N*o,A=!y):s==="end"&&(b=v+N*o,A=y),A=k<=0?A:!A;var E=$r(u,f,w,b),S=$r(u,f,w,b+(A?1:-1)*359),_="M".concat(E.x,",").concat(E.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(A?0:1,`,
    `).concat(S.x,",").concat(S.y),C=sr(t.id)?ou("recharts-radial-line-"):t.id;return xe.createElement("text",uf({},a,{dominantBaseline:"central",className:nr("recharts-radial-bar-label",l)}),xe.createElement("defs",null,xe.createElement("path",{id:C,d:_})),xe.createElement("textPath",{xlinkHref:"#".concat(C)},r))},_Z=function(t){var r=t.viewBox,a=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,d=i.innerRadius,u=i.outerRadius,f=i.startAngle,m=i.endAngle,p=(f+m)/2;if(s==="outside"){var g=$r(o,l,u+a,p),v=g.x,y=g.y;return{x:v,y,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var w=(d+u)/2,k=$r(o,l,w,p),N=k.x,b=k.y;return{x:N,y:b,textAnchor:"middle",verticalAnchor:"middle"}},EZ=function(t){var r=t.viewBox,a=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,d=o.y,u=o.width,f=o.height,m=f>=0?1:-1,p=m*s,g=m>0?"end":"start",v=m>0?"start":"end",y=u>=0?1:-1,w=y*s,k=y>0?"end":"start",N=y>0?"start":"end";if(i==="top"){var b={x:l+u/2,y:d-m*s,textAnchor:"middle",verticalAnchor:g};return Jn(Jn({},b),a?{height:Math.max(d-a.y,0),width:u}:{})}if(i==="bottom"){var A={x:l+u/2,y:d+f+p,textAnchor:"middle",verticalAnchor:v};return Jn(Jn({},A),a?{height:Math.max(a.y+a.height-(d+f),0),width:u}:{})}if(i==="left"){var E={x:l-w,y:d+f/2,textAnchor:k,verticalAnchor:"middle"};return Jn(Jn({},E),a?{width:Math.max(E.x-a.x,0),height:f}:{})}if(i==="right"){var S={x:l+u+w,y:d+f/2,textAnchor:N,verticalAnchor:"middle"};return Jn(Jn({},S),a?{width:Math.max(a.x+a.width-S.x,0),height:f}:{})}var _=a?{width:u,height:f}:{};return i==="insideLeft"?Jn({x:l+w,y:d+f/2,textAnchor:N,verticalAnchor:"middle"},_):i==="insideRight"?Jn({x:l+u-w,y:d+f/2,textAnchor:k,verticalAnchor:"middle"},_):i==="insideTop"?Jn({x:l+u/2,y:d+p,textAnchor:"middle",verticalAnchor:v},_):i==="insideBottom"?Jn({x:l+u/2,y:d+f-p,textAnchor:"middle",verticalAnchor:g},_):i==="insideTopLeft"?Jn({x:l+w,y:d+p,textAnchor:N,verticalAnchor:v},_):i==="insideTopRight"?Jn({x:l+u-w,y:d+p,textAnchor:k,verticalAnchor:v},_):i==="insideBottomLeft"?Jn({x:l+w,y:d+f-p,textAnchor:N,verticalAnchor:g},_):i==="insideBottomRight"?Jn({x:l+u-w,y:d+f-p,textAnchor:k,verticalAnchor:g},_):iu(i)&&(gt(i.x)||Kl(i.x))&&(gt(i.y)||Kl(i.y))?Jn({x:l+Ya(i.x,u),y:d+Ya(i.y,f),textAnchor:"end",verticalAnchor:"end"},_):Jn({x:l+u/2,y:d+f/2,textAnchor:"middle",verticalAnchor:"middle"},_)},CZ=function(t){return"cx"in t&&gt(t.cx)};function ha(e){var t=e.offset,r=t===void 0?5:t,a=yZ(e,hZ),s=Jn({offset:r},a),i=s.viewBox,o=s.position,l=s.value,d=s.children,u=s.content,f=s.className,m=f===void 0?"":f,p=s.textBreakAll;if(!i||sr(l)&&sr(d)&&!M.isValidElement(u)&&!Kt(u))return null;if(M.isValidElement(u))return M.cloneElement(u,s);var g;if(Kt(u)){if(g=M.createElement(u,s),M.isValidElement(g))return g}else g=NZ(s);var v=CZ(i),y=Rt(s,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return SZ(s,g,y);var w=v?_Z(s):EZ(s);return xe.createElement(oc,uf({className:nr("recharts-label",m)},y,w,{breakAll:p}),g)}ha.displayName="Label";var LR=function(t){var r=t.cx,a=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,d=t.radius,u=t.innerRadius,f=t.outerRadius,m=t.x,p=t.y,g=t.top,v=t.left,y=t.width,w=t.height,k=t.clockWise,N=t.labelViewBox;if(N)return N;if(gt(y)&&gt(w)){if(gt(m)&&gt(p))return{x:m,y:p,width:y,height:w};if(gt(g)&&gt(v))return{x:g,y:v,width:y,height:w}}return gt(m)&&gt(p)?{x:m,y:p,width:0,height:0}:gt(r)&&gt(a)?{cx:r,cy:a,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:f||d||l||0,clockWise:k}:t.viewBox?t.viewBox:{}},AZ=function(t,r){return t?t===!0?xe.createElement(ha,{key:"label-implicit",viewBox:r}):na(t)?xe.createElement(ha,{key:"label-implicit",viewBox:r,value:t}):M.isValidElement(t)?t.type===ha?M.cloneElement(t,{key:"label-implicit",viewBox:r}):xe.createElement(ha,{key:"label-implicit",content:t,viewBox:r}):Kt(t)?xe.createElement(ha,{key:"label-implicit",content:t,viewBox:r}):iu(t)?xe.createElement(ha,uf({viewBox:r},t,{key:"label-implicit"})):null:null},TZ=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,i=LR(t),o=Cs(s,ha).map(function(d,u){return M.cloneElement(d,{viewBox:r||i,key:"label-".concat(u)})});if(!a)return o;var l=AZ(t.label,r||i);return[l].concat(fZ(o))};ha.parseViewBox=LR;ha.renderCallByParent=TZ;var m1,oO;function OZ(){if(oO)return m1;oO=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return m1=e,m1}var PZ=OZ();const BR=qr(PZ);function hf(e){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hf(e)}var IZ=["valueAccessor"],DZ=["data","dataKey","clockWise","id","textBreakAll"];function MZ(e){return LZ(e)||$Z(e)||FZ(e)||RZ()}function RZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FZ(e,t){if(e){if(typeof e=="string")return dN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dN(e,t)}}function $Z(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function LZ(e){if(Array.isArray(e))return dN(e)}function dN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function yp(){return yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},yp.apply(this,arguments)}function lO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function cO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lO(Object(r),!0).forEach(function(a){BZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function BZ(e,t,r){return t=UZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UZ(e){var t=HZ(e,"string");return hf(t)=="symbol"?t:t+""}function HZ(e,t){if(hf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(hf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dO(e,t){if(e==null)return{};var r=qZ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function qZ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var zZ=function(t){return Array.isArray(t.value)?BR(t.value):t.value};function Fi(e){var t=e.valueAccessor,r=t===void 0?zZ:t,a=dO(e,IZ),s=a.data,i=a.dataKey,o=a.clockWise,l=a.id,d=a.textBreakAll,u=dO(a,DZ);return!s||!s.length?null:xe.createElement(Sr,{className:"recharts-label-list"},s.map(function(f,m){var p=sr(i)?r(f,m):In(f&&f.payload,i),g=sr(l)?{}:{id:"".concat(l,"-").concat(m)};return xe.createElement(ha,yp({},Rt(f,!0),u,g,{parentViewBox:f.parentViewBox,value:p,textBreakAll:d,viewBox:ha.parseViewBox(sr(o)?f:cO(cO({},f),{},{clockWise:o})),key:"label-".concat(m),index:m}))}))}Fi.displayName="LabelList";function WZ(e,t){return e?e===!0?xe.createElement(Fi,{key:"labelList-implicit",data:t}):xe.isValidElement(e)||Kt(e)?xe.createElement(Fi,{key:"labelList-implicit",data:t,content:e}):iu(e)?xe.createElement(Fi,yp({data:t},e,{key:"labelList-implicit"})):null:null}function KZ(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var a=e.children,s=Cs(a,Fi).map(function(o,l){return M.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=WZ(e.label,t);return[i].concat(MZ(s))}Fi.renderCallByParent=KZ;function ff(e){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ff(e)}function uN(){return uN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},uN.apply(this,arguments)}function uO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function hO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uO(Object(r),!0).forEach(function(a){VZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function VZ(e,t,r){return t=GZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GZ(e){var t=YZ(e,"string");return ff(t)=="symbol"?t:t+""}function YZ(e,t){if(ff(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ff(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XZ=function(t,r){var a=Ga(r-t),s=Math.min(Math.abs(r-t),359.999);return a*s},vm=function(t){var r=t.cx,a=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,d=t.cornerRadius,u=t.cornerIsExternal,f=d*(l?1:-1)+s,m=Math.asin(d/f)/xp,p=u?i:i+o*m,g=$r(r,a,f,p),v=$r(r,a,s,p),y=u?i-o*m:i,w=$r(r,a,f*Math.cos(m*xp),y);return{center:g,circleTangency:v,lineTangency:w,theta:m}},UR=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,d=XZ(o,l),u=o+d,f=$r(r,a,i,o),m=$r(r,a,i,u),p="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>u),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(s>0){var g=$r(r,a,s,o),v=$r(r,a,s,u);p+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else p+="L ".concat(r,",").concat(a," Z");return p},JZ=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,d=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,m=Ga(f-u),p=vm({cx:r,cy:a,radius:i,angle:u,sign:m,cornerRadius:o,cornerIsExternal:d}),g=p.circleTangency,v=p.lineTangency,y=p.theta,w=vm({cx:r,cy:a,radius:i,angle:f,sign:-m,cornerRadius:o,cornerIsExternal:d}),k=w.circleTangency,N=w.lineTangency,b=w.theta,A=d?Math.abs(u-f):Math.abs(u-f)-y-b;if(A<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):UR({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:u,endAngle:f});var E="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(A>180),",").concat(+(m<0),",").concat(k.x,",").concat(k.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(N.x,",").concat(N.y,`
  `);if(s>0){var S=vm({cx:r,cy:a,radius:s,angle:u,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),_=S.circleTangency,C=S.lineTangency,P=S.theta,B=vm({cx:r,cy:a,radius:s,angle:f,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),F=B.circleTangency,O=B.lineTangency,R=B.theta,Q=d?Math.abs(u-f):Math.abs(u-f)-P-R;if(Q<0&&o===0)return"".concat(E,"L").concat(r,",").concat(a,"Z");E+="L".concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(Q>180),",").concat(+(m>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(C.x,",").concat(C.y,"Z")}else E+="L".concat(r,",").concat(a,"Z");return E},QZ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},HR=function(t){var r=hO(hO({},QZ),t),a=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,d=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,m=r.endAngle,p=r.className;if(o<i||f===m)return null;var g=nr("recharts-sector",p),v=o-i,y=Ya(l,v,0,!0),w;return y>0&&Math.abs(f-m)<360?w=JZ({cx:a,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(y,v/2),forceCornerRadius:d,cornerIsExternal:u,startAngle:f,endAngle:m}):w=UR({cx:a,cy:s,innerRadius:i,outerRadius:o,startAngle:f,endAngle:m}),xe.createElement("path",uN({},Rt(r,!0),{className:g,d:w,role:"img"}))};function mf(e){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mf(e)}function hN(){return hN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},hN.apply(this,arguments)}function fO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function mO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fO(Object(r),!0).forEach(function(a){ZZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ZZ(e,t,r){return t=eee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eee(e){var t=tee(e,"string");return mf(t)=="symbol"?t:t+""}function tee(e,t){if(mf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(mf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pO={curveBasisClosed:NW,curveBasisOpen:kW,curveBasis:jW,curveBumpX:lW,curveBumpY:cW,curveLinearClosed:SW,curveLinear:Sg,curveMonotoneX:_W,curveMonotoneY:EW,curveNatural:CW,curveStep:AW,curveStepAfter:OW,curveStepBefore:TW},bm=function(t){return t.x===+t.x&&t.y===+t.y},rh=function(t){return t.x},nh=function(t){return t.y},ree=function(t,r){if(Kt(t))return t;var a="curve".concat(Ng(t));return(a==="curveMonotone"||a==="curveBump")&&r?pO["".concat(a).concat(r==="vertical"?"Y":"X")]:pO[a]||Sg},nee=function(t){var r=t.type,a=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,d=t.connectNulls,u=d===void 0?!1:d,f=ree(a,l),m=u?i.filter(function(y){return bm(y)}):i,p;if(Array.isArray(o)){var g=u?o.filter(function(y){return bm(y)}):o,v=m.map(function(y,w){return mO(mO({},y),{},{base:g[w]})});return l==="vertical"?p=um().y(nh).x1(rh).x0(function(y){return y.base.x}):p=um().x(rh).y1(nh).y0(function(y){return y.base.y}),p.defined(bm).curve(f),p(v)}return l==="vertical"&&gt(o)?p=um().y(nh).x1(rh).x0(o):gt(o)?p=um().x(rh).y1(nh).y0(o):p=L5().x(rh).y(nh),p.defined(bm).curve(f),p(m)},vp=function(t){var r=t.className,a=t.points,s=t.path,i=t.pathRef;if((!a||!a.length)&&!s)return null;var o=a&&a.length?nee(t):s;return M.createElement("path",hN({},Rt(t,!1),Wm(t),{className:nr("recharts-curve",r),d:o,ref:i}))},p1={exports:{}},g1,gO;function aee(){if(gO)return g1;gO=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return g1=e,g1}var x1,xO;function see(){if(xO)return x1;xO=1;var e=aee();function t(){}function r(){}return r.resetWarningCache=t,x1=function(){function a(o,l,d,u,f,m){if(m!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}a.isRequired=a;function s(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:s,element:a,elementType:a,instanceOf:s,node:a,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},x1}var yO;function iee(){return yO||(yO=1,p1.exports=see()()),p1.exports}var oee=iee();const Ur=qr(oee),{getOwnPropertyNames:lee,getOwnPropertySymbols:cee}=Object,{hasOwnProperty:dee}=Object.prototype;function y1(e,t){return function(a,s,i){return e(a,s,i)&&t(a,s,i)}}function wm(e){return function(r,a,s){if(!r||!a||typeof r!="object"||typeof a!="object")return e(r,a,s);const{cache:i}=s,o=i.get(r),l=i.get(a);if(o&&l)return o===a&&l===r;i.set(r,a),i.set(a,r);const d=e(r,a,s);return i.delete(r),i.delete(a),d}}function uee(e){return e?.[Symbol.toStringTag]}function vO(e){return lee(e).concat(cee(e))}const hee=Object.hasOwn||((e,t)=>dee.call(e,t));function bc(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const fee="__v",mee="__o",pee="_owner",{getOwnPropertyDescriptor:bO,keys:wO}=Object;function gee(e,t){return e.byteLength===t.byteLength&&bp(new Uint8Array(e),new Uint8Array(t))}function xee(e,t,r){let a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function yee(e,t){return e.byteLength===t.byteLength&&bp(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function vee(e,t){return bc(e.getTime(),t.getTime())}function bee(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function wee(e,t){return e===t}function jO(e,t,r){const a=e.size;if(a!==t.size)return!1;if(!a)return!0;const s=new Array(a),i=e.entries();let o,l,d=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let f=!1,m=0;for(;(l=u.next())&&!l.done;){if(s[m]){m++;continue}const p=o.value,g=l.value;if(r.equals(p[0],g[0],d,m,e,t,r)&&r.equals(p[1],g[1],p[0],g[0],e,t,r)){f=s[m]=!0;break}m++}if(!f)return!1;d++}return!0}const jee=bc;function Nee(e,t,r){const a=wO(e);let s=a.length;if(wO(t).length!==s)return!1;for(;s-- >0;)if(!qR(e,t,r,a[s]))return!1;return!0}function ah(e,t,r){const a=vO(e);let s=a.length;if(vO(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=a[s],!qR(e,t,r,i)||(o=bO(e,i),l=bO(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function kee(e,t){return bc(e.valueOf(),t.valueOf())}function See(e,t){return e.source===t.source&&e.flags===t.flags}function NO(e,t,r){const a=e.size;if(a!==t.size)return!1;if(!a)return!0;const s=new Array(a),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const d=t.values();let u=!1,f=0;for(;(l=d.next())&&!l.done;){if(!s[f]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=s[f]=!0;break}f++}if(!u)return!1}return!0}function bp(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function _ee(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function qR(e,t,r,a){return(a===pee||a===mee||a===fee)&&(e.$$typeof||t.$$typeof)?!0:hee(t,a)&&r.equals(e[a],t[a],a,a,e,t,r)}const Eee="[object ArrayBuffer]",Cee="[object Arguments]",Aee="[object Boolean]",Tee="[object DataView]",Oee="[object Date]",Pee="[object Error]",Iee="[object Map]",Dee="[object Number]",Mee="[object Object]",Ree="[object RegExp]",Fee="[object Set]",$ee="[object String]",Lee={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Bee="[object URL]",Uee=Object.prototype.toString;function Hee({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:a,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:d,arePrimitiveWrappersEqual:u,areRegExpsEqual:f,areSetsEqual:m,areTypedArraysEqual:p,areUrlsEqual:g,unknownTagComparators:v}){return function(w,k,N){if(w===k)return!0;if(w==null||k==null)return!1;const b=typeof w;if(b!==typeof k)return!1;if(b!=="object")return b==="number"?l(w,k,N):b==="function"?i(w,k,N):!1;const A=w.constructor;if(A!==k.constructor)return!1;if(A===Object)return d(w,k,N);if(Array.isArray(w))return t(w,k,N);if(A===Date)return a(w,k,N);if(A===RegExp)return f(w,k,N);if(A===Map)return o(w,k,N);if(A===Set)return m(w,k,N);const E=Uee.call(w);if(E===Oee)return a(w,k,N);if(E===Ree)return f(w,k,N);if(E===Iee)return o(w,k,N);if(E===Fee)return m(w,k,N);if(E===Mee)return typeof w.then!="function"&&typeof k.then!="function"&&d(w,k,N);if(E===Bee)return g(w,k,N);if(E===Pee)return s(w,k,N);if(E===Cee)return d(w,k,N);if(Lee[E])return p(w,k,N);if(E===Eee)return e(w,k,N);if(E===Tee)return r(w,k,N);if(E===Aee||E===Dee||E===$ee)return u(w,k,N);if(v){let S=v[E];if(!S){const _=uee(w);_&&(S=v[_])}if(S)return S(w,k,N)}return!1}}function qee({circular:e,createCustomConfig:t,strict:r}){let a={areArrayBuffersEqual:gee,areArraysEqual:r?ah:xee,areDataViewsEqual:yee,areDatesEqual:vee,areErrorsEqual:bee,areFunctionsEqual:wee,areMapsEqual:r?y1(jO,ah):jO,areNumbersEqual:jee,areObjectsEqual:r?ah:Nee,arePrimitiveWrappersEqual:kee,areRegExpsEqual:See,areSetsEqual:r?y1(NO,ah):NO,areTypedArraysEqual:r?y1(bp,ah):bp,areUrlsEqual:_ee,unknownTagComparators:void 0};if(t&&(a=Object.assign({},a,t(a))),e){const s=wm(a.areArraysEqual),i=wm(a.areMapsEqual),o=wm(a.areObjectsEqual),l=wm(a.areSetsEqual);a=Object.assign({},a,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return a}function zee(e){return function(t,r,a,s,i,o,l){return e(t,r,l)}}function Wee({circular:e,comparator:t,createState:r,equals:a,strict:s}){if(r)return function(l,d){const{cache:u=e?new WeakMap:void 0,meta:f}=r();return t(l,d,{cache:u,equals:a,meta:f,strict:s})};if(e)return function(l,d){return t(l,d,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};const i={cache:void 0,equals:a,meta:void 0,strict:s};return function(l,d){return t(l,d,i)}}const Kee=gl();gl({strict:!0});gl({circular:!0});gl({circular:!0,strict:!0});gl({createInternalComparator:()=>bc});gl({strict:!0,createInternalComparator:()=>bc});gl({circular:!0,createInternalComparator:()=>bc});gl({circular:!0,createInternalComparator:()=>bc,strict:!0});function gl(e={}){const{circular:t=!1,createInternalComparator:r,createState:a,strict:s=!1}=e,i=qee(e),o=Hee(i),l=r?r(o):zee(o);return Wee({circular:t,comparator:o,createState:a,equals:l,strict:s})}function Vee(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function kO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,a=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):Vee(s)};requestAnimationFrame(a)}function fN(e){"@babel/helpers - typeof";return fN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fN(e)}function Gee(e){return Qee(e)||Jee(e)||Xee(e)||Yee()}function Yee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xee(e,t){if(e){if(typeof e=="string")return SO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SO(e,t)}}function SO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Jee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Qee(e){if(Array.isArray(e))return e}function Zee(){var e={},t=function(){return null},r=!1,a=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=Gee(o),d=l[0],u=l.slice(1);if(typeof d=="number"){kO(s.bind(null,u),d);return}s(d),kO(s.bind(null,u));return}fN(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,a(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function pf(e){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pf(e)}function _O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function EO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_O(Object(r),!0).forEach(function(a){zR(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_O(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zR(e,t,r){return t=ete(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ete(e){var t=tte(e,"string");return pf(t)==="symbol"?t:String(t)}function tte(e,t){if(pf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(pf(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rte=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(a,s){return a.filter(function(i){return s.includes(i)})})},nte=function(t){return t},ate=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Nh=function(t,r){return Object.keys(r).reduce(function(a,s){return EO(EO({},a),{},zR({},s,t(s,r[s])))},{})},CO=function(t,r,a){return t.map(function(s){return"".concat(ate(s)," ").concat(r,"ms ").concat(a)}).join(",")};function ste(e,t){return lte(e)||ote(e,t)||WR(e,t)||ite()}function ite(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ote(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function lte(e){if(Array.isArray(e))return e}function cte(e){return hte(e)||ute(e)||WR(e)||dte()}function dte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WR(e,t){if(e){if(typeof e=="string")return mN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mN(e,t)}}function ute(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hte(e){if(Array.isArray(e))return mN(e)}function mN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var wp=1e-4,KR=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},VR=function(t,r){return t.map(function(a,s){return a*Math.pow(r,s)}).reduce(function(a,s){return a+s})},AO=function(t,r){return function(a){var s=KR(t,r);return VR(s,a)}},fte=function(t,r){return function(a){var s=KR(t,r),i=[].concat(cte(s.map(function(o,l){return o*l}).slice(1)),[0]);return VR(i,a)}},TO=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var u=d[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),f=ste(u,4);s=f[0],i=f[1],o=f[2],l=f[3]}}}var m=AO(s,o),p=AO(i,l),g=fte(s,o),v=function(k){return k>1?1:k<0?0:k},y=function(k){for(var N=k>1?1:k,b=N,A=0;A<8;++A){var E=m(b)-N,S=g(b);if(Math.abs(E-N)<wp||S<wp)return p(b);b=v(b-E/S)}return p(b)};return y.isStepper=!1,y},mte=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,a=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,d=function(f,m,p){var g=-(f-m)*a,v=p*i,y=p+(g-v)*l/1e3,w=p*l/1e3+f;return Math.abs(w-m)<wp&&Math.abs(y)<wp?[m,0]:[w,y]};return d.isStepper=!0,d.dt=l,d},pte=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return TO(s);case"spring":return mte();default:if(s.split("(")[0]==="cubic-bezier")return TO(s)}return typeof s=="function"?s:null};function gf(e){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gf(e)}function OO(e){return yte(e)||xte(e)||GR(e)||gte()}function gte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yte(e){if(Array.isArray(e))return gN(e)}function PO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function va(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PO(Object(r),!0).forEach(function(a){pN(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pN(e,t,r){return t=vte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vte(e){var t=bte(e,"string");return gf(t)==="symbol"?t:String(t)}function bte(e,t){if(gf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(gf(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wte(e,t){return kte(e)||Nte(e,t)||GR(e,t)||jte()}function jte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GR(e,t){if(e){if(typeof e=="string")return gN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gN(e,t)}}function gN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Nte(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function kte(e){if(Array.isArray(e))return e}var jp=function(t,r,a){return t+(r-t)*a},xN=function(t){var r=t.from,a=t.to;return r!==a},Ste=function e(t,r,a){var s=Nh(function(i,o){if(xN(o)){var l=t(o.from,o.to,o.velocity),d=wte(l,2),u=d[0],f=d[1];return va(va({},o),{},{from:u,velocity:f})}return o},r);return a<1?Nh(function(i,o){return xN(o)?va(va({},o),{},{velocity:jp(o.velocity,s[i].velocity,a),from:jp(o.from,s[i].from,a)}):o},r):e(t,s,a-1)};const _te=(function(e,t,r,a,s){var i=rte(e,t),o=i.reduce(function(w,k){return va(va({},w),{},pN({},k,[e[k],t[k]]))},{}),l=i.reduce(function(w,k){return va(va({},w),{},pN({},k,{from:e[k],velocity:0,to:t[k]}))},{}),d=-1,u,f,m=function(){return null},p=function(){return Nh(function(k,N){return N.from},l)},g=function(){return!Object.values(l).filter(xN).length},v=function(k){u||(u=k);var N=k-u,b=N/r.dt;l=Ste(r,l,b),s(va(va(va({},e),t),p())),u=k,g()||(d=requestAnimationFrame(m))},y=function(k){f||(f=k);var N=(k-f)/a,b=Nh(function(E,S){return jp.apply(void 0,OO(S).concat([r(N)]))},o);if(s(va(va(va({},e),t),b)),N<1)d=requestAnimationFrame(m);else{var A=Nh(function(E,S){return jp.apply(void 0,OO(S).concat([r(1)]))},o);s(va(va(va({},e),t),A))}};return m=r.isStepper?v:y,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function Md(e){"@babel/helpers - typeof";return Md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Md(e)}var Ete=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Cte(e,t){if(e==null)return{};var r=Ate(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Ate(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function v1(e){return Ite(e)||Pte(e)||Ote(e)||Tte()}function Tte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ote(e,t){if(e){if(typeof e=="string")return yN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yN(e,t)}}function Pte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ite(e){if(Array.isArray(e))return yN(e)}function yN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function IO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ai(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IO(Object(r),!0).forEach(function(a){fh(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fh(e,t,r){return t=YR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mte(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,YR(a.key),a)}}function Rte(e,t,r){return t&&Mte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function YR(e){var t=Fte(e,"string");return Md(t)==="symbol"?t:String(t)}function Fte(e,t){if(Md(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Md(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $te(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vN(e,t)}function vN(e,t){return vN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},vN(e,t)}function Lte(e){var t=Bte();return function(){var a=Np(e),s;if(t){var i=Np(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return bN(this,s)}}function bN(e,t){if(t&&(Md(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wN(e)}function wN(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Np(e){return Np=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Np(e)}var Ni=(function(e){$te(r,e);var t=Lte(r);function r(a,s){var i;Dte(this,r),i=t.call(this,a,s);var o=i.props,l=o.isActive,d=o.attributeName,u=o.from,f=o.to,m=o.steps,p=o.children,g=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(wN(i)),i.changeStyle=i.changeStyle.bind(wN(i)),!l||g<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:f}),bN(i);if(m&&m.length)i.state={style:m[0].style};else if(u){if(typeof p=="function")return i.state={style:u},bN(i);i.state={style:d?fh({},d,u):u}}else i.state={style:{}};return i}return Rte(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,d=i.attributeName,u=i.shouldReAnimate,f=i.to,m=i.from,p=this.state.style;if(l){if(!o){var g={style:d?fh({},d,f):f};this.state&&p&&(d&&p[d]!==f||!d&&p!==f)&&this.setState(g);return}if(!(Kee(s.to,f)&&s.canBegin&&s.isActive)){var v=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=v||u?m:s.to;if(this.state&&p){var w={style:d?fh({},d,y):y};(d&&p[d]!==y||!d&&p!==y)&&this.setState(w)}this.runAnimation(ai(ai({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,d=s.duration,u=s.easing,f=s.begin,m=s.onAnimationEnd,p=s.onAnimationStart,g=_te(o,l,pte(u),d,this.changeStyle),v=function(){i.stopJSAnimation=g()};this.manager.start([p,f,v,d,m])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,d=s.onAnimationStart,u=o[0],f=u.style,m=u.duration,p=m===void 0?0:m,g=function(y,w,k){if(k===0)return y;var N=w.duration,b=w.easing,A=b===void 0?"ease":b,E=w.style,S=w.properties,_=w.onAnimationEnd,C=k>0?o[k-1]:w,P=S||Object.keys(E);if(typeof A=="function"||A==="spring")return[].concat(v1(y),[i.runJSAnimation.bind(i,{from:C.style,to:E,duration:N,easing:A}),N]);var B=CO(P,N,A),F=ai(ai(ai({},C.style),E),{},{transition:B});return[].concat(v1(y),[F,N,_]).filter(nte)};return this.manager.start([d].concat(v1(o.reduce(g,[f,Math.max(p,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=Zee());var i=s.begin,o=s.duration,l=s.attributeName,d=s.to,u=s.easing,f=s.onAnimationStart,m=s.onAnimationEnd,p=s.steps,g=s.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof g=="function"||u==="spring"){this.runJSAnimation(s);return}if(p.length>1){this.runStepAnimation(s);return}var y=l?fh({},l,d):d,w=CO(Object.keys(y),o,u);v.start([f,i,ai(ai({},y),{},{transition:w}),o,m])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var d=Cte(s,Ete),u=M.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||u===0||o<=0)return i;var m=function(g){var v=g.props,y=v.style,w=y===void 0?{}:y,k=v.className,N=M.cloneElement(g,ai(ai({},d),{},{style:ai(ai({},w),f),className:k}));return N};return u===1?m(M.Children.only(i)):xe.createElement("div",null,M.Children.map(i,function(p){return m(p)}))}}]),r})(M.PureComponent);Ni.displayName="Animate";Ni.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ni.propTypes={from:Ur.oneOfType([Ur.object,Ur.string]),to:Ur.oneOfType([Ur.object,Ur.string]),attributeName:Ur.string,duration:Ur.number,begin:Ur.number,easing:Ur.oneOfType([Ur.string,Ur.func]),steps:Ur.arrayOf(Ur.shape({duration:Ur.number.isRequired,style:Ur.object.isRequired,easing:Ur.oneOfType([Ur.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ur.func]),properties:Ur.arrayOf("string"),onAnimationEnd:Ur.func})),children:Ur.oneOfType([Ur.node,Ur.func]),isActive:Ur.bool,canBegin:Ur.bool,onAnimationEnd:Ur.func,shouldReAnimate:Ur.bool,onAnimationStart:Ur.func,onAnimationReStart:Ur.func};function xf(e){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xf(e)}function kp(){return kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},kp.apply(this,arguments)}function Ute(e,t){return Wte(e)||zte(e,t)||qte(e,t)||Hte()}function Hte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qte(e,t){if(e){if(typeof e=="string")return DO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DO(e,t)}}function DO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function zte(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Wte(e){if(Array.isArray(e))return e}function MO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function RO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MO(Object(r),!0).forEach(function(a){Kte(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Kte(e,t,r){return t=Vte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vte(e){var t=Gte(e,"string");return xf(t)=="symbol"?t:t+""}function Gte(e,t){if(xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(xf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FO=function(t,r,a,s,i){var o=Math.min(Math.abs(a)/2,Math.abs(s)/2),l=s>=0?1:-1,d=a>=0?1:-1,u=s>=0&&a>=0||s<0&&a<0?1:0,f;if(o>0&&i instanceof Array){for(var m=[0,0,0,0],p=0,g=4;p<g;p++)m[p]=i[p]>o?o:i[p];f="M".concat(t,",").concat(r+l*m[0]),m[0]>0&&(f+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(u,",").concat(t+d*m[0],",").concat(r)),f+="L ".concat(t+a-d*m[1],",").concat(r),m[1]>0&&(f+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(u,`,
        `).concat(t+a,",").concat(r+l*m[1])),f+="L ".concat(t+a,",").concat(r+s-l*m[2]),m[2]>0&&(f+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(u,`,
        `).concat(t+a-d*m[2],",").concat(r+s)),f+="L ".concat(t+d*m[3],",").concat(r+s),m[3]>0&&(f+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+s-l*m[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var v=Math.min(o,i);f="M ".concat(t,",").concat(r+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+d*v,",").concat(r,`
            L `).concat(t+a-d*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+a,",").concat(r+l*v,`
            L `).concat(t+a,",").concat(r+s-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+a-d*v,",").concat(r+s,`
            L `).concat(t+d*v,",").concat(r+s,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t,",").concat(r+s-l*v," Z")}else f="M ".concat(t,",").concat(r," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return f},Yte=function(t,r){if(!t||!r)return!1;var a=t.x,s=t.y,i=r.x,o=r.y,l=r.width,d=r.height;if(Math.abs(l)>0&&Math.abs(d)>0){var u=Math.min(i,i+l),f=Math.max(i,i+l),m=Math.min(o,o+d),p=Math.max(o,o+d);return a>=u&&a<=f&&s>=m&&s<=p}return!1},Xte={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bk=function(t){var r=RO(RO({},Xte),t),a=M.useRef(),s=M.useState(-1),i=Ute(s,2),o=i[0],l=i[1];M.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var A=a.current.getTotalLength();A&&l(A)}catch{}},[]);var d=r.x,u=r.y,f=r.width,m=r.height,p=r.radius,g=r.className,v=r.animationEasing,y=r.animationDuration,w=r.animationBegin,k=r.isAnimationActive,N=r.isUpdateAnimationActive;if(d!==+d||u!==+u||f!==+f||m!==+m||f===0||m===0)return null;var b=nr("recharts-rectangle",g);return N?xe.createElement(Ni,{canBegin:o>0,from:{width:f,height:m,x:d,y:u},to:{width:f,height:m,x:d,y:u},duration:y,animationEasing:v,isActive:N},function(A){var E=A.width,S=A.height,_=A.x,C=A.y;return xe.createElement(Ni,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:y,isActive:k,easing:v},xe.createElement("path",kp({},Rt(r,!0),{className:b,d:FO(_,C,E,S,p),ref:a})))}):xe.createElement("path",kp({},Rt(r,!0),{className:b,d:FO(d,u,f,m,p)}))},Jte=["points","className","baseLinePoints","connectNulls"];function fd(){return fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},fd.apply(this,arguments)}function Qte(e,t){if(e==null)return{};var r=Zte(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Zte(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function $O(e){return nre(e)||rre(e)||tre(e)||ere()}function ere(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tre(e,t){if(e){if(typeof e=="string")return jN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jN(e,t)}}function rre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nre(e){if(Array.isArray(e))return jN(e)}function jN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var LO=function(t){return t&&t.x===+t.x&&t.y===+t.y},are=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(a){LO(a)?r[r.length-1].push(a):r[r.length-1].length>0&&r.push([])}),LO(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},kh=function(t,r){var a=are(t);r&&(a=[a.reduce(function(i,o){return[].concat($O(i),$O(o))},[])]);var s=a.map(function(i){return i.reduce(function(o,l,d){return"".concat(o).concat(d===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return a.length===1?"".concat(s,"Z"):s},sre=function(t,r,a){var s=kh(t,a);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(kh(r.reverse(),a).slice(1))},XR=function(t){var r=t.points,a=t.className,s=t.baseLinePoints,i=t.connectNulls,o=Qte(t,Jte);if(!r||!r.length)return null;var l=nr("recharts-polygon",a);if(s&&s.length){var d=o.stroke&&o.stroke!=="none",u=sre(r,s,i);return xe.createElement("g",{className:l},xe.createElement("path",fd({},Rt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),d?xe.createElement("path",fd({},Rt(o,!0),{fill:"none",d:kh(r,i)})):null,d?xe.createElement("path",fd({},Rt(o,!0),{fill:"none",d:kh(s,i)})):null)}var f=kh(r,i);return xe.createElement("path",fd({},Rt(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function NN(){return NN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},NN.apply(this,arguments)}var Jf=function(t){var r=t.cx,a=t.cy,s=t.r,i=t.className,o=nr("recharts-dot",i);return r===+r&&a===+a&&s===+s?M.createElement("circle",NN({},Rt(t,!1),Wm(t),{className:o,cx:r,cy:a,r:s})):null};function yf(e){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yf(e)}var ire=["x","y","top","left","width","height","className"];function kN(){return kN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},kN.apply(this,arguments)}function BO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ore(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BO(Object(r),!0).forEach(function(a){lre(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lre(e,t,r){return t=cre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cre(e){var t=dre(e,"string");return yf(t)=="symbol"?t:t+""}function dre(e,t){if(yf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(yf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ure(e,t){if(e==null)return{};var r=hre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function hre(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var fre=function(t,r,a,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(a)},mre=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,d=t.left,u=d===void 0?0:d,f=t.width,m=f===void 0?0:f,p=t.height,g=p===void 0?0:p,v=t.className,y=ure(t,ire),w=ore({x:a,y:i,top:l,left:u,width:m,height:g},y);return!gt(a)||!gt(i)||!gt(m)||!gt(g)||!gt(l)||!gt(u)?null:xe.createElement("path",kN({},Rt(w,!0),{className:nr("recharts-cross",v),d:fre(a,i,m,g,l,u)}))},pre=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function vf(e){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vf(e)}function gre(e,t){if(e==null)return{};var r=xre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function xre(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function So(){return So=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},So.apply(this,arguments)}function UO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function bf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UO(Object(r),!0).forEach(function(a){yre(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function yre(e,t,r){return t=vre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vre(e){var t=bre(e,"string");return vf(t)=="symbol"?t:t+""}function bre(e,t){if(vf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(vf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wre=function(t,r,a,s){var i="";return s.forEach(function(o,l){var d=$r(r,a,t,o);l?i+="L ".concat(d.x,",").concat(d.y):i+="M ".concat(d.x,",").concat(d.y)}),i+="Z",i},jre=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.polarAngles,l=t.radialLines;if(!o||!o.length||!l)return null;var d=bf({stroke:"#ccc"},Rt(t,!1));return xe.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(u){var f=$r(r,a,s,u),m=$r(r,a,i,u);return xe.createElement("line",So({},d,{key:"line-".concat(u),x1:f.x,y1:f.y,x2:m.x,y2:m.y}))}))},Nre=function(t){var r=t.cx,a=t.cy,s=t.radius,i=t.index,o=bf(bf({stroke:"#ccc"},Rt(t,!1)),{},{fill:"none"});return xe.createElement("circle",So({},o,{className:nr("recharts-polar-grid-concentric-circle",t.className),key:"circle-".concat(i),cx:r,cy:a,r:s}))},kre=function(t){var r=t.radius,a=t.index,s=bf(bf({stroke:"#ccc"},Rt(t,!1)),{},{fill:"none"});return xe.createElement("path",So({},s,{className:nr("recharts-polar-grid-concentric-polygon",t.className),key:"path-".concat(a),d:wre(r,t.cx,t.cy,t.polarAngles)}))},Sre=function(t){var r=t.polarRadius,a=t.gridType;return!r||!r.length?null:xe.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(s,i){var o=i;return a==="circle"?xe.createElement(Nre,So({key:o},t,{radius:s,index:i})):xe.createElement(kre,So({key:o},t,{radius:s,index:i}))}))},JR=function(t){var r=t.cx,a=r===void 0?0:r,s=t.cy,i=s===void 0?0:s,o=t.innerRadius,l=o===void 0?0:o,d=t.outerRadius,u=d===void 0?0:d,f=t.gridType,m=f===void 0?"polygon":f,p=t.radialLines,g=p===void 0?!0:p,v=gre(t,pre);return u<=0?null:xe.createElement("g",{className:"recharts-polar-grid"},xe.createElement(jre,So({cx:a,cy:i,innerRadius:l,outerRadius:u,gridType:m,radialLines:g},v)),xe.createElement(Sre,So({cx:a,cy:i,innerRadius:l,outerRadius:u,gridType:m,radialLines:g},v)))};JR.displayName="PolarGrid";var b1,HO;function _re(){if(HO)return b1;HO=1;var e=Rg(),t=lR(),r=qi();function a(s,i){return s&&s.length?e(s,r(i,2),t):void 0}return b1=a,b1}var Ere=_re();const Cre=qr(Ere);var w1,qO;function Are(){if(qO)return w1;qO=1;var e=Rg(),t=qi(),r=cR();function a(s,i){return s&&s.length?e(s,t(i,2),r):void 0}return w1=a,w1}var Tre=Are();const Ore=qr(Tre);var Pre=["cx","cy","angle","ticks","axisLine"],Ire=["ticks","tick","angle","tickFormatter","stroke"];function Rd(e){"@babel/helpers - typeof";return Rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rd(e)}function Sh(){return Sh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Sh.apply(this,arguments)}function zO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Dl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(r),!0).forEach(function(a){Ug(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function WO(e,t){if(e==null)return{};var r=Dre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Dre(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Mre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KO(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ZR(a.key),a)}}function Rre(e,t,r){return t&&KO(e.prototype,t),r&&KO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fre(e,t,r){return t=Sp(t),$re(e,QR()?Reflect.construct(t,r||[],Sp(e).constructor):t.apply(e,r))}function $re(e,t){if(t&&(Rd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lre(e)}function Lre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QR=function(){return!!e})()}function Sp(e){return Sp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sp(e)}function Bre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SN(e,t)}function SN(e,t){return SN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},SN(e,t)}function Ug(e,t,r){return t=ZR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZR(e){var t=Ure(e,"string");return Rd(t)=="symbol"?t:t+""}function Ure(e,t){if(Rd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Rd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var fu=(function(e){function t(){return Mre(this,t),Fre(this,t,arguments)}return Bre(t,e),Rre(t,[{key:"getTickValueCoord",value:function(a){var s=a.coordinate,i=this.props,o=i.angle,l=i.cx,d=i.cy;return $r(l,d,s,o)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,s;switch(a){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var a=this.props,s=a.cx,i=a.cy,o=a.angle,l=a.ticks,d=Cre(l,function(f){return f.coordinate||0}),u=Ore(l,function(f){return f.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.cx,i=a.cy,o=a.angle,l=a.ticks,d=a.axisLine,u=WO(a,Pre),f=l.reduce(function(v,y){return[Math.min(v[0],y.coordinate),Math.max(v[1],y.coordinate)]},[1/0,-1/0]),m=$r(s,i,f[0],o),p=$r(s,i,f[1],o),g=Dl(Dl(Dl({},Rt(u,!1)),{},{fill:"none"},Rt(d,!1)),{},{x1:m.x,y1:m.y,x2:p.x,y2:p.y});return xe.createElement("line",Sh({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var a=this,s=this.props,i=s.ticks,o=s.tick,l=s.angle,d=s.tickFormatter,u=s.stroke,f=WO(s,Ire),m=this.getTickTextAnchor(),p=Rt(f,!1),g=Rt(o,!1),v=i.map(function(y,w){var k=a.getTickValueCoord(y),N=Dl(Dl(Dl(Dl({textAnchor:m,transform:"rotate(".concat(90-l,", ").concat(k.x,", ").concat(k.y,")")},p),{},{stroke:"none",fill:u},g),{},{index:w},k),{},{payload:y});return xe.createElement(Sr,Sh({className:nr("recharts-polar-radius-axis-tick",$R(o)),key:"tick-".concat(y.coordinate)},sc(a.props,y,w)),t.renderTickItem(o,N,d?d(y.value,w):y.value))});return xe.createElement(Sr,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var a=this.props,s=a.ticks,i=a.axisLine,o=a.tick;return!s||!s.length?null:xe.createElement(Sr,{className:nr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),ha.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,s,i){var o;return xe.isValidElement(a)?o=xe.cloneElement(a,s):Kt(a)?o=a(s):o=xe.createElement(oc,Sh({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(M.PureComponent);Ug(fu,"displayName","PolarRadiusAxis");Ug(fu,"axisType","radiusAxis");Ug(fu,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Fd(e){"@babel/helpers - typeof";return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fd(e)}function Hl(){return Hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Hl.apply(this,arguments)}function VO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ml(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VO(Object(r),!0).forEach(function(a){Hg(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Hre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GO(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,tF(a.key),a)}}function qre(e,t,r){return t&&GO(e.prototype,t),r&&GO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zre(e,t,r){return t=_p(t),Wre(e,eF()?Reflect.construct(t,r||[],_p(e).constructor):t.apply(e,r))}function Wre(e,t){if(t&&(Fd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kre(e)}function Kre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eF=function(){return!!e})()}function _p(e){return _p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_p(e)}function Vre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_N(e,t)}function _N(e,t){return _N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},_N(e,t)}function Hg(e,t,r){return t=tF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tF(e){var t=Gre(e,"string");return Fd(t)=="symbol"?t:t+""}function Gre(e,t){if(Fd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Fd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Yre=Math.PI/180,YO=1e-5,mu=(function(e){function t(){return Hre(this,t),zre(this,t,arguments)}return Vre(t,e),qre(t,[{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.cx,o=s.cy,l=s.radius,d=s.orientation,u=s.tickSize,f=u||8,m=$r(i,o,l,a.coordinate),p=$r(i,o,l+(d==="inner"?-1:1)*f,a.coordinate);return{x1:m.x,y1:m.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(a){var s=this.props.orientation,i=Math.cos(-a.coordinate*Yre),o;return i>YO?o=s==="outer"?"start":"end":i<-YO?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.cx,i=a.cy,o=a.radius,l=a.axisLine,d=a.axisLineType,u=Ml(Ml({},Rt(this.props,!1)),{},{fill:"none"},Rt(l,!1));if(d==="circle")return xe.createElement(Jf,Hl({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:i,r:o}));var f=this.props.ticks,m=f.map(function(p){return $r(s,i,o,p.coordinate)});return xe.createElement(XR,Hl({className:"recharts-polar-angle-axis-line"},u,{points:m}))}},{key:"renderTicks",value:function(){var a=this,s=this.props,i=s.ticks,o=s.tick,l=s.tickLine,d=s.tickFormatter,u=s.stroke,f=Rt(this.props,!1),m=Rt(o,!1),p=Ml(Ml({},f),{},{fill:"none"},Rt(l,!1)),g=i.map(function(v,y){var w=a.getTickLineCoord(v),k=a.getTickTextAnchor(v),N=Ml(Ml(Ml({textAnchor:k},f),{},{stroke:"none",fill:u},m),{},{index:y,payload:v,x:w.x2,y:w.y2});return xe.createElement(Sr,Hl({className:nr("recharts-polar-angle-axis-tick",$R(o)),key:"tick-".concat(v.coordinate)},sc(a.props,v,y)),l&&xe.createElement("line",Hl({className:"recharts-polar-angle-axis-tick-line"},p,w)),o&&t.renderTickItem(o,N,d?d(v.value,y):v.value))});return xe.createElement(Sr,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var a=this.props,s=a.ticks,i=a.radius,o=a.axisLine;return i<=0||!s||!s.length?null:xe.createElement(Sr,{className:nr("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,s,i){var o;return xe.isValidElement(a)?o=xe.cloneElement(a,s):Kt(a)?o=a(s):o=xe.createElement(oc,Hl({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(M.PureComponent);Hg(mu,"displayName","PolarAngleAxis");Hg(mu,"axisType","angleAxis");Hg(mu,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var j1,XO;function Xre(){if(XO)return j1;XO=1;var e=lM(),t=e(Object.getPrototypeOf,Object);return j1=t,j1}var N1,JO;function Jre(){if(JO)return N1;JO=1;var e=Co(),t=Xre(),r=Ao(),a="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,d=o.call(Object);function u(f){if(!r(f)||e(f)!=a)return!1;var m=t(f);if(m===null)return!0;var p=l.call(m,"constructor")&&m.constructor;return typeof p=="function"&&p instanceof p&&o.call(p)==d}return N1=u,N1}var Qre=Jre();const Zre=qr(Qre);var k1,QO;function ene(){if(QO)return k1;QO=1;var e=Co(),t=Ao(),r="[object Boolean]";function a(s){return s===!0||s===!1||t(s)&&e(s)==r}return k1=a,k1}var tne=ene();const rne=qr(tne);function wf(e){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wf(e)}function Ep(){return Ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ep.apply(this,arguments)}function nne(e,t){return one(e)||ine(e,t)||sne(e,t)||ane()}function ane(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sne(e,t){if(e){if(typeof e=="string")return ZO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZO(e,t)}}function ZO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function ine(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function one(e){if(Array.isArray(e))return e}function e6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function t6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e6(Object(r),!0).forEach(function(a){lne(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lne(e,t,r){return t=cne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cne(e){var t=dne(e,"string");return wf(t)=="symbol"?t:t+""}function dne(e,t){if(wf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(wf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r6=function(t,r,a,s,i){var o=a-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+a,",").concat(r),l+="L ".concat(t+a-o/2,",").concat(r+i),l+="L ".concat(t+a-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},une={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},hne=function(t){var r=t6(t6({},une),t),a=M.useRef(),s=M.useState(-1),i=nne(s,2),o=i[0],l=i[1];M.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var b=a.current.getTotalLength();b&&l(b)}catch{}},[]);var d=r.x,u=r.y,f=r.upperWidth,m=r.lowerWidth,p=r.height,g=r.className,v=r.animationEasing,y=r.animationDuration,w=r.animationBegin,k=r.isUpdateAnimationActive;if(d!==+d||u!==+u||f!==+f||m!==+m||p!==+p||f===0&&m===0||p===0)return null;var N=nr("recharts-trapezoid",g);return k?xe.createElement(Ni,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:d,y:u},to:{upperWidth:f,lowerWidth:m,height:p,x:d,y:u},duration:y,animationEasing:v,isActive:k},function(b){var A=b.upperWidth,E=b.lowerWidth,S=b.height,_=b.x,C=b.y;return xe.createElement(Ni,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:y,easing:v},xe.createElement("path",Ep({},Rt(r,!0),{className:N,d:r6(_,C,A,E,S),ref:a})))}):xe.createElement("g",null,xe.createElement("path",Ep({},Rt(r,!0),{className:N,d:r6(d,u,f,m,p)})))},fne=["option","shapeType","propTransformer","activeClassName","isActive"];function jf(e){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jf(e)}function mne(e,t){if(e==null)return{};var r=pne(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function pne(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function n6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Cp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n6(Object(r),!0).forEach(function(a){gne(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function gne(e,t,r){return t=xne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xne(e){var t=yne(e,"string");return jf(t)=="symbol"?t:t+""}function yne(e,t){if(jf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(jf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vne(e,t){return Cp(Cp({},t),e)}function bne(e,t){return e==="symbols"}function a6(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return xe.createElement(bk,r);case"trapezoid":return xe.createElement(hne,r);case"sector":return xe.createElement(HR,r);case"symbols":if(bne(t))return xe.createElement(L2,r);break;default:return null}}function wne(e){return M.isValidElement(e)?e.props:e}function rF(e){var t=e.option,r=e.shapeType,a=e.propTransformer,s=a===void 0?vne:a,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,d=mne(e,fne),u;if(M.isValidElement(t))u=M.cloneElement(t,Cp(Cp({},d),wne(t)));else if(Kt(t))u=t(d);else if(Zre(t)&&!rne(t)){var f=s(t,d);u=xe.createElement(a6,{shapeType:r,elementProps:f})}else{var m=d;u=xe.createElement(a6,{shapeType:r,elementProps:m})}return l?xe.createElement(Sr,{className:o},u):u}function qg(e,t){return t!=null&&"trapezoids"in e.props}function zg(e,t){return t!=null&&"sectors"in e.props}function Nf(e,t){return t!=null&&"points"in e.props}function jne(e,t){var r,a,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return s&&i}function Nne(e,t){var r=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return r&&a}function kne(e,t){var r=e.x===t.x,a=e.y===t.y,s=e.z===t.z;return r&&a&&s}function Sne(e,t){var r;return qg(e,t)?r=jne:zg(e,t)?r=Nne:Nf(e,t)&&(r=kne),r}function _ne(e,t){var r;return qg(e,t)?r="trapezoids":zg(e,t)?r="sectors":Nf(e,t)&&(r="points"),r}function Ene(e,t){if(qg(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(zg(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return Nf(e,t)?t.payload:{}}function Cne(e){var t=e.activeTooltipItem,r=e.graphicalItem,a=e.itemData,s=_ne(r,t),i=Ene(r,t),o=a.filter(function(d,u){var f=du(i,d),m=r.props[s].filter(function(v){var y=Sne(r,t);return y(v,t)}),p=r.props[s].indexOf(m[m.length-1]),g=u===p;return f&&g}),l=a.indexOf(o[o.length-1]);return l}var Mm;function $d(e){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$d(e)}function md(){return md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},md.apply(this,arguments)}function s6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function en(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s6(Object(r),!0).forEach(function(a){Ws(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ane(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i6(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,aF(a.key),a)}}function Tne(e,t,r){return t&&i6(e.prototype,t),r&&i6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function One(e,t,r){return t=Ap(t),Pne(e,nF()?Reflect.construct(t,r||[],Ap(e).constructor):t.apply(e,r))}function Pne(e,t){if(t&&($d(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ine(e)}function Ine(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nF=function(){return!!e})()}function Ap(e){return Ap=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ap(e)}function Dne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EN(e,t)}function EN(e,t){return EN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},EN(e,t)}function Ws(e,t,r){return t=aF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aF(e){var t=Mne(e,"string");return $d(t)=="symbol"?t:t+""}function Mne(e,t){if($d(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if($d(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zi=(function(e){function t(r){var a;return Ane(this,t),a=One(this,t,[r]),Ws(a,"pieRef",null),Ws(a,"sectorRefs",[]),Ws(a,"id",ou("recharts-pie-")),Ws(a,"handleAnimationEnd",function(){var s=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),Kt(s)&&s()}),Ws(a,"handleAnimationStart",function(){var s=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),Kt(s)&&s()}),a.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},a}return Dne(t,e),Tne(t,[{key:"isActiveIndex",value:function(a){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(a)!==-1:a===s}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,d=i.dataKey,u=i.valueKey,f=Rt(this.props,!1),m=Rt(o,!1),p=Rt(l,!1),g=o&&o.offsetRadius||20,v=a.map(function(y,w){var k=(y.startAngle+y.endAngle)/2,N=$r(y.cx,y.cy,y.outerRadius+g,k),b=en(en(en(en({},f),y),{},{stroke:"none"},m),{},{index:w,textAnchor:t.getTextAnchor(N.x,y.cx)},N),A=en(en(en(en({},f),y),{},{fill:"none",stroke:y.fill},p),{},{index:w,points:[$r(y.cx,y.cy,y.outerRadius,k),N]}),E=d;return sr(d)&&sr(u)?E="value":sr(d)&&(E=u),xe.createElement(Sr,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(w)},l&&t.renderLabelLineItem(l,A,"line"),t.renderLabelItem(o,b,In(y,E)))});return xe.createElement(Sr,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(a){var s=this,i=this.props,o=i.activeShape,l=i.blendStroke,d=i.inactiveShape;return a.map(function(u,f){if(u?.startAngle===0&&u?.endAngle===0&&a.length!==1)return null;var m=s.isActiveIndex(f),p=d&&s.hasActiveIndex()?d:null,g=m?o:p,v=en(en({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return xe.createElement(Sr,md({ref:function(w){w&&!s.sectorRefs.includes(w)&&s.sectorRefs.push(w)},tabIndex:-1,className:"recharts-pie-sector"},sc(s.props,u,f),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(f)}),xe.createElement(rF,md({option:g,isActive:m,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,s=this.props,i=s.sectors,o=s.isAnimationActive,l=s.animationBegin,d=s.animationDuration,u=s.animationEasing,f=s.animationId,m=this.state,p=m.prevSectors,g=m.prevIsAnimationActive;return xe.createElement(Ni,{begin:l,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var y=v.t,w=[],k=i&&i[0],N=k.startAngle;return i.forEach(function(b,A){var E=p&&p[A],S=A>0?Es(b,"paddingAngle",0):0;if(E){var _=ja(E.endAngle-E.startAngle,b.endAngle-b.startAngle),C=en(en({},b),{},{startAngle:N+S,endAngle:N+_(y)+S});w.push(C),N=C.endAngle}else{var P=b.endAngle,B=b.startAngle,F=ja(0,P-B),O=F(y),R=en(en({},b),{},{startAngle:N+S,endAngle:N+O+S});w.push(R),N=R.endAngle}}),xe.createElement(Sr,null,a.renderSectorsStatically(w))})}},{key:"attachKeyboardHandlers",value:function(a){var s=this;a.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,s=a.sectors,i=a.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!du(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,s=this.props,i=s.hide,o=s.sectors,l=s.className,d=s.label,u=s.cx,f=s.cy,m=s.innerRadius,p=s.outerRadius,g=s.isAnimationActive,v=this.state.isAnimationFinished;if(i||!o||!o.length||!gt(u)||!gt(f)||!gt(m)||!gt(p))return null;var y=nr("recharts-pie",l);return xe.createElement(Sr,{tabIndex:this.props.rootTabIndex,className:y,ref:function(k){a.pieRef=k}},this.renderSectors(),d&&this.renderLabels(o),ha.renderCallByParent(this.props,null,!1),(!g||v)&&Fi.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return s.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:a.sectors!==s.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,s){return a>s?"start":a<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,s,i){if(xe.isValidElement(a))return xe.cloneElement(a,s);if(Kt(a))return a(s);var o=nr("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return xe.createElement(vp,md({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(a,s,i){if(xe.isValidElement(a))return xe.cloneElement(a,s);var o=i;if(Kt(a)&&(o=a(s),xe.isValidElement(o)))return o;var l=nr("recharts-pie-label-text",typeof a!="boolean"&&!Kt(a)?a.className:"");return xe.createElement(oc,md({},s,{alignmentBaseline:"middle",className:l}),o)}}])})(M.PureComponent);Mm=zi;Ws(zi,"displayName","Pie");Ws(zi,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!fl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ws(zi,"parseDeltaAngle",function(e,t){var r=Ga(t-e),a=Math.min(Math.abs(t-e),360);return r*a});Ws(zi,"getRealPieData",function(e){var t=e.data,r=e.children,a=Rt(e,!1),s=Cs(r,ic);return t&&t.length?t.map(function(i,o){return en(en(en({payload:i},a),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return en(en({},a),i.props)}):[]});Ws(zi,"parseCoordinateOfPie",function(e,t){var r=t.top,a=t.left,s=t.width,i=t.height,o=RR(s,i),l=a+Ya(e.cx,s,s/2),d=r+Ya(e.cy,i,i/2),u=Ya(e.innerRadius,o,0),f=Ya(e.outerRadius,o,o*.8),m=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:d,innerRadius:u,outerRadius:f,maxRadius:m}});Ws(zi,"getComposedData",function(e){var t=e.item,r=e.offset,a=t.type.defaultProps!==void 0?en(en({},t.type.defaultProps),t.props):t.props,s=Mm.getRealPieData(a);if(!s||!s.length)return null;var i=a.cornerRadius,o=a.startAngle,l=a.endAngle,d=a.paddingAngle,u=a.dataKey,f=a.nameKey,m=a.valueKey,p=a.tooltipType,g=Math.abs(a.minAngle),v=Mm.parseCoordinateOfPie(a,r),y=Mm.parseDeltaAngle(o,l),w=Math.abs(y),k=u;sr(u)&&sr(m)?(bi(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),k="value"):sr(u)&&(bi(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),k=m);var N=s.filter(function(C){return In(C,k,0)!==0}).length,b=(w>=360?N:N-1)*d,A=w-N*g-b,E=s.reduce(function(C,P){var B=In(P,k,0);return C+(gt(B)?B:0)},0),S;if(E>0){var _;S=s.map(function(C,P){var B=In(C,k,0),F=In(C,f,P),O=(gt(B)?B:0)/E,R;P?R=_.endAngle+Ga(y)*d*(B!==0?1:0):R=o;var Q=R+Ga(y)*((B!==0?g:0)+O*A),V=(R+Q)/2,J=(v.innerRadius+v.outerRadius)/2,ae=[{name:F,value:B,payload:C,dataKey:k,type:p}],L=$r(v.cx,v.cy,J,V);return _=en(en(en({percent:O,cornerRadius:i,name:F,tooltipPayload:ae,midAngle:V,middleRadius:J,tooltipPosition:L},C),v),{},{value:In(C,k),startAngle:R,endAngle:Q,payload:C,paddingAngle:Ga(y)*d}),_})}return en(en({},v),{},{sectors:S,data:s})});var S1,o6;function Rne(){if(o6)return S1;o6=1;function e(t){return t&&t.length?t[0]:void 0}return S1=e,S1}var _1,l6;function Fne(){return l6||(l6=1,_1=Rne()),_1}var $ne=Fne();const Lne=qr($ne);var Bne=["key"];function Ld(e){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ld(e)}function Une(e,t){if(e==null)return{};var r=Hne(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Hne(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Tp(){return Tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Tp.apply(this,arguments)}function c6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Wa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c6(Object(r),!0).forEach(function(a){uo(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d6(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,iF(a.key),a)}}function zne(e,t,r){return t&&d6(e.prototype,t),r&&d6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wne(e,t,r){return t=Op(t),Kne(e,sF()?Reflect.construct(t,r||[],Op(e).constructor):t.apply(e,r))}function Kne(e,t){if(t&&(Ld(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vne(e)}function Vne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sF=function(){return!!e})()}function Op(e){return Op=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Op(e)}function Gne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CN(e,t)}function CN(e,t){return CN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},CN(e,t)}function uo(e,t,r){return t=iF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iF(e){var t=Yne(e,"string");return Ld(t)=="symbol"?t:t+""}function Yne(e,t){if(Ld(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ld(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Zl=(function(e){function t(){var r;qne(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=Wne(this,t,[].concat(s)),uo(r,"state",{isAnimationFinished:!1}),uo(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Kt(o)&&o()}),uo(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Kt(o)&&o()}),uo(r,"handleMouseEnter",function(o){var l=r.props.onMouseEnter;l&&l(r.props,o)}),uo(r,"handleMouseLeave",function(o){var l=r.props.onMouseLeave;l&&l(r.props,o)}),r}return Gne(t,e),zne(t,[{key:"renderDots",value:function(a){var s=this.props,i=s.dot,o=s.dataKey,l=Rt(this.props,!1),d=Rt(i,!0),u=a.map(function(f,m){var p=Wa(Wa(Wa({key:"dot-".concat(m),r:3},l),d),{},{dataKey:o,cx:f.x,cy:f.y,index:m,payload:f});return t.renderDotItem(i,p)});return xe.createElement(Sr,{className:"recharts-radar-dots"},u)}},{key:"renderPolygonStatically",value:function(a){var s=this.props,i=s.shape,o=s.dot,l=s.isRange,d=s.baseLinePoints,u=s.connectNulls,f;return xe.isValidElement(i)?f=xe.cloneElement(i,Wa(Wa({},this.props),{},{points:a})):Kt(i)?f=i(Wa(Wa({},this.props),{},{points:a})):f=xe.createElement(XR,Tp({},Rt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:a,baseLinePoints:l?d:null,connectNulls:u})),xe.createElement(Sr,{className:"recharts-radar-polygon"},f,o?this.renderDots(a):null)}},{key:"renderPolygonWithAnimation",value:function(){var a=this,s=this.props,i=s.points,o=s.isAnimationActive,l=s.animationBegin,d=s.animationDuration,u=s.animationEasing,f=s.animationId,m=this.state.prevPoints;return xe.createElement(Ni,{begin:l,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"radar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var g=p.t,v=m&&m.length/i.length,y=i.map(function(w,k){var N=m&&m[Math.floor(k*v)];if(N){var b=ja(N.x,w.x),A=ja(N.y,w.y);return Wa(Wa({},w),{},{x:b(g),y:A(g)})}var E=ja(w.cx,w.x),S=ja(w.cy,w.y);return Wa(Wa({},w),{},{x:E(g),y:S(g)})});return a.renderPolygonStatically(y)})}},{key:"renderPolygon",value:function(){var a=this.props,s=a.points,i=a.isAnimationActive,o=a.isRange,l=this.state.prevPoints;return i&&s&&s.length&&!o&&(!l||!du(l,s))?this.renderPolygonWithAnimation():this.renderPolygonStatically(s)}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.className,o=a.points,l=a.isAnimationActive;if(s||!o||!o.length)return null;var d=this.state.isAnimationFinished,u=nr("recharts-radar",i);return xe.createElement(Sr,{className:u},this.renderPolygon(),(!l||d)&&Fi.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"renderDotItem",value:function(a,s){var i;if(xe.isValidElement(a))i=xe.cloneElement(a,s);else if(Kt(a))i=a(s);else{var o=s.key,l=Une(s,Bne);i=xe.createElement(Jf,Tp({},l,{key:o,className:nr("recharts-radar-dot",typeof a!="boolean"?a.className:"")}))}return i}}])})(M.PureComponent);uo(Zl,"displayName","Radar");uo(Zl,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!fl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});uo(Zl,"getComposedData",function(e){var t=e.radiusAxis,r=e.angleAxis,a=e.displayedData,s=e.dataKey,i=e.bandSize,o=r.cx,l=r.cy,d=!1,u=[],f=r.type!=="number"?i??0:0;a.forEach(function(p,g){var v=In(p,r.dataKey,g),y=In(p,s),w=r.scale(v)+f,k=Array.isArray(y)?BR(y):y,N=sr(k)?void 0:t.scale(k);Array.isArray(y)&&y.length>=2&&(d=!0),u.push(Wa(Wa({},$r(o,l,N,w)),{},{name:v,value:y,cx:o,cy:l,radius:N,angle:w,payload:p}))});var m=[];return d&&u.forEach(function(p){if(Array.isArray(p.value)){var g=Lne(p.value),v=sr(g)?void 0:t.scale(g);m.push(Wa(Wa({},p),{},{radius:v},$r(o,l,v,p.angle)))}else m.push(p)}),{points:u,isRange:d,baseLinePoints:m}});var E1,u6;function Xne(){if(u6)return E1;u6=1;var e=Math.ceil,t=Math.max;function r(a,s,i,o){for(var l=-1,d=t(e((s-a)/(i||1)),0),u=Array(d);d--;)u[o?d:++l]=a,a+=i;return u}return E1=r,E1}var C1,h6;function oF(){if(h6)return C1;h6=1;var e=kM(),t=1/0,r=17976931348623157e292;function a(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return C1=a,C1}var A1,f6;function Jne(){if(f6)return A1;f6=1;var e=Xne(),t=Ag(),r=oF();function a(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,s)}}return A1=a,A1}var T1,m6;function Qne(){if(m6)return T1;m6=1;var e=Jne(),t=e();return T1=t,T1}var Zne=Qne();const Pp=qr(Zne);function kf(e){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kf(e)}function p6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function g6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p6(Object(r),!0).forEach(function(a){lF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lF(e,t,r){return t=eae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eae(e){var t=tae(e,"string");return kf(t)=="symbol"?t:t+""}function tae(e,t){if(kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(kf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rae=["Webkit","Moz","O","ms"],nae=function(t,r){var a=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=rae.reduce(function(i,o){return g6(g6({},i),{},lF({},o+a,r))},{});return s[t]=r,s};function Bd(e){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bd(e)}function Ip(){return Ip=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ip.apply(this,arguments)}function x6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function O1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x6(Object(r),!0).forEach(function(a){vs(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function aae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y6(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,dF(a.key),a)}}function sae(e,t,r){return t&&y6(e.prototype,t),r&&y6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function iae(e,t,r){return t=Dp(t),oae(e,cF()?Reflect.construct(t,r||[],Dp(e).constructor):t.apply(e,r))}function oae(e,t){if(t&&(Bd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lae(e)}function lae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cF=function(){return!!e})()}function Dp(e){return Dp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dp(e)}function cae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AN(e,t)}function AN(e,t){return AN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},AN(e,t)}function vs(e,t,r){return t=dF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dF(e){var t=dae(e,"string");return Bd(t)=="symbol"?t:t+""}function dae(e,t){if(Bd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Bd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var uae=function(t){var r=t.data,a=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var d=r.length,u=wh().domain(Pp(0,d)).range([i,i+o-l]),f=u.domain().map(function(m){return u(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(a),endX:u(s),scale:u,scaleValues:f}},v6=function(t){return t.changedTouches&&!!t.changedTouches.length},Ud=(function(e){function t(r){var a;return aae(this,t),a=iae(this,t,[r]),vs(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),vs(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),vs(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),a.detachDragEndListener()}),vs(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),vs(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),vs(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),vs(a,"handleSlideDragStart",function(s){var i=v6(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return cae(t,e),sae(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var s=a.startX,i=a.endX,o=this.state.scaleValues,l=this.props,d=l.gap,u=l.data,f=u.length-1,m=Math.min(s,i),p=Math.max(s,i),g=t.getIndexInRange(o,m),v=t.getIndexInRange(o,p);return{startIndex:g-g%d,endIndex:v===f?f:v-v%d}}},{key:"getTextOfTick",value:function(a){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,d=In(i[a],l,a);return Kt(o)?o(d,a):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,d=this.props,u=d.x,f=d.width,m=d.travellerWidth,p=d.startIndex,g=d.endIndex,v=d.onChange,y=a.pageX-i;y>0?y=Math.min(y,u+f-m-l,u+f-m-o):y<0&&(y=Math.max(y,u-o,u-l));var w=this.getIndex({startX:o+y,endX:l+y});(w.startIndex!==p||w.endIndex!==g)&&v&&v(w),this.setState({startX:o+y,endX:l+y,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,s){var i=v6(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,d=s.startX,u=this.state[o],f=this.props,m=f.x,p=f.width,g=f.travellerWidth,v=f.onChange,y=f.gap,w=f.data,k={startX:this.state.startX,endX:this.state.endX},N=a.pageX-i;N>0?N=Math.min(N,m+p-g-u):N<0&&(N=Math.max(N,m-u)),k[o]=u+N;var b=this.getIndex(k),A=b.startIndex,E=b.endIndex,S=function(){var C=w.length-1;return o==="startX"&&(l>d?A%y===0:E%y===0)||l<d&&E===C||o==="endX"&&(l>d?E%y===0:A%y===0)||l>d&&E===C};this.setState(vs(vs({},o,u+N),"brushMoveStartX",a.pageX),function(){v&&S()&&v(b)})}},{key:"handleTravellerMoveKeyboard",value:function(a,s){var i=this,o=this.state,l=o.scaleValues,d=o.startX,u=o.endX,f=this.state[s],m=l.indexOf(f);if(m!==-1){var p=m+a;if(!(p===-1||p>=l.length)){var g=l[p];s==="startX"&&g>=u||s==="endX"&&g<=d||this.setState(vs({},s,g),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,d=a.fill,u=a.stroke;return xe.createElement("rect",{stroke:u,fill:d,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,d=a.data,u=a.children,f=a.padding,m=M.Children.only(u);return m?xe.cloneElement(m,{x:s,y:i,width:o,height:l,margin:f,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(a,s){var i,o,l=this,d=this.props,u=d.y,f=d.travellerWidth,m=d.height,p=d.traveller,g=d.ariaLabel,v=d.data,y=d.startIndex,w=d.endIndex,k=Math.max(a,this.props.x),N=O1(O1({},Rt(this.props,!1)),{},{x:k,y:u,width:f,height:m}),b=g||"Min value: ".concat((i=v[y])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=v[w])===null||o===void 0?void 0:o.name);return xe.createElement(Sr,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(E){["ArrowLeft","ArrowRight"].includes(E.key)&&(E.preventDefault(),E.stopPropagation(),l.handleTravellerMoveKeyboard(E.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,N))}},{key:"renderSlide",value:function(a,s){var i=this.props,o=i.y,l=i.height,d=i.stroke,u=i.travellerWidth,f=Math.min(a,s)+u,m=Math.max(Math.abs(s-a)-u,0);return xe.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:f,y:o,width:m,height:l})}},{key:"renderText",value:function(){var a=this.props,s=a.startIndex,i=a.endIndex,o=a.y,l=a.height,d=a.travellerWidth,u=a.stroke,f=this.state,m=f.startX,p=f.endX,g=5,v={pointerEvents:"none",fill:u};return xe.createElement(Sr,{className:"recharts-brush-texts"},xe.createElement(oc,Ip({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,p)-g,y:o+l/2},v),this.getTextOfTick(s)),xe.createElement(oc,Ip({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,p)+d+g,y:o+l/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,s=a.data,i=a.className,o=a.children,l=a.x,d=a.y,u=a.width,f=a.height,m=a.alwaysShowText,p=this.state,g=p.startX,v=p.endX,y=p.isTextActive,w=p.isSlideMoving,k=p.isTravellerMoving,N=p.isTravellerFocused;if(!s||!s.length||!gt(l)||!gt(d)||!gt(u)||!gt(f)||u<=0||f<=0)return null;var b=nr("recharts-brush",i),A=xe.Children.count(o)===1,E=nae("userSelect","none");return xe.createElement(Sr,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:E},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(g,v),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(v,"endX"),(y||w||k||N||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var s=a.x,i=a.y,o=a.width,l=a.height,d=a.stroke,u=Math.floor(i+l/2)-1;return xe.createElement(xe.Fragment,null,xe.createElement("rect",{x:s,y:i,width:o,height:l,fill:d,stroke:"none"}),xe.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),xe.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,s){var i;return xe.isValidElement(a)?i=xe.cloneElement(a,s):Kt(a)?i=a(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(a,s){var i=a.data,o=a.width,l=a.x,d=a.travellerWidth,u=a.updateId,f=a.startIndex,m=a.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return O1({prevData:i,prevTravellerWidth:d,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?uae({data:i,width:o,x:l,travellerWidth:d,startIndex:f,endIndex:m}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||d!==s.prevTravellerWidth)){s.scale.range([l,l+o-d]);var p=s.scale.domain().map(function(g){return s.scale(g)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(a.startIndex),endX:s.scale(a.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(a,s){for(var i=a.length,o=0,l=i-1;l-o>1;){var d=Math.floor((o+l)/2);a[d]>s?l=d:o=d}return s>=a[l]?l:o}}])})(M.PureComponent);vs(Ud,"displayName","Brush");vs(Ud,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var P1,b6;function hae(){if(b6)return P1;b6=1;var e=K2();function t(r,a){var s;return e(r,function(i,o,l){return s=a(i,o,l),!s}),!!s}return P1=t,P1}var I1,w6;function fae(){if(w6)return I1;w6=1;var e=tM(),t=qi(),r=hae(),a=us(),s=Ag();function i(o,l,d){var u=a(o)?e:r;return d&&s(o,l,d)&&(l=void 0),u(o,t(l,3))}return I1=i,I1}var mae=fae();const pae=qr(mae);var $i=function(t,r){var a=t.alwaysShow,s=t.ifOverflow;return a&&(s="extendDomain"),s===r},D1,j6;function gae(){if(j6)return D1;j6=1;var e=vM();function t(r,a,s){a=="__proto__"&&e?e(r,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[a]=s}return D1=t,D1}var M1,N6;function xae(){if(N6)return M1;N6=1;var e=gae(),t=xM(),r=qi();function a(s,i){var o={};return i=r(i,3),t(s,function(l,d,u){e(o,d,i(l,d,u))}),o}return M1=a,M1}var yae=xae();const vae=qr(yae);var R1,k6;function bae(){if(k6)return R1;k6=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(!r(t[a],a,t))return!1;return!0}return R1=e,R1}var F1,S6;function wae(){if(S6)return F1;S6=1;var e=K2();function t(r,a){var s=!0;return e(r,function(i,o,l){return s=!!a(i,o,l),s}),s}return F1=t,F1}var $1,_6;function jae(){if(_6)return $1;_6=1;var e=bae(),t=wae(),r=qi(),a=us(),s=Ag();function i(o,l,d){var u=a(o)?e:t;return d&&s(o,l,d)&&(l=void 0),u(o,r(l,3))}return $1=i,$1}var Nae=jae();const uF=qr(Nae);var kae=["x","y"];function Sf(e){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sf(e)}function TN(){return TN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},TN.apply(this,arguments)}function E6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function sh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E6(Object(r),!0).forEach(function(a){Sae(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Sae(e,t,r){return t=_ae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _ae(e){var t=Eae(e,"string");return Sf(t)=="symbol"?t:t+""}function Eae(e,t){if(Sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Sf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cae(e,t){if(e==null)return{};var r=Aae(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Aae(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Tae(e,t){var r=e.x,a=e.y,s=Cae(e,kae),i="".concat(r),o=parseInt(i,10),l="".concat(a),d=parseInt(l,10),u="".concat(t.height||s.height),f=parseInt(u,10),m="".concat(t.width||s.width),p=parseInt(m,10);return sh(sh(sh(sh(sh({},t),s),o?{x:o}:{}),d?{y:d}:{}),{},{height:f,width:p,name:t.name,radius:t.radius})}function C6(e){return xe.createElement(rF,TN({shapeType:"rectangle",propTransformer:Tae,activeClassName:"recharts-active-bar"},e))}var Oae=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,s){if(typeof t=="number")return t;var i=gt(a)||Az(a);return i?t(a,s):(i||cc(),r)}},Pae=["value","background"],hF;function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}function Iae(e,t){if(e==null)return{};var r=Dae(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Dae(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Mp(){return Mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Mp.apply(this,arguments)}function A6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function $n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A6(Object(r),!0).forEach(function(a){tl(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Mae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T6(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,mF(a.key),a)}}function Rae(e,t,r){return t&&T6(e.prototype,t),r&&T6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fae(e,t,r){return t=Rp(t),$ae(e,fF()?Reflect.construct(t,r||[],Rp(e).constructor):t.apply(e,r))}function $ae(e,t){if(t&&(Hd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lae(e)}function Lae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fF=function(){return!!e})()}function Rp(e){return Rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rp(e)}function Bae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ON(e,t)}function ON(e,t){return ON=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ON(e,t)}function tl(e,t,r){return t=mF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mF(e){var t=Uae(e,"string");return Hd(t)=="symbol"?t:t+""}function Uae(e,t){if(Hd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Hd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wr=(function(e){function t(){var r;Mae(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=Fae(this,t,[].concat(s)),tl(r,"state",{isAnimationFinished:!1}),tl(r,"id",ou("recharts-bar-")),tl(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),tl(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Bae(t,e),Rae(t,[{key:"renderRectanglesStatically",value:function(a){var s=this,i=this.props,o=i.shape,l=i.dataKey,d=i.activeIndex,u=i.activeBar,f=Rt(this.props,!1);return a&&a.map(function(m,p){var g=p===d,v=g?u:o,y=$n($n($n({},f),m),{},{isActive:g,option:v,index:p,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return xe.createElement(Sr,Mp({className:"recharts-bar-rectangle"},sc(s.props,m,p),{key:"rectangle-".concat(m?.x,"-").concat(m?.y,"-").concat(m?.value,"-").concat(p)}),xe.createElement(C6,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,d=s.animationBegin,u=s.animationDuration,f=s.animationEasing,m=s.animationId,p=this.state.prevData;return xe.createElement(Ni,{begin:d,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var v=g.t,y=i.map(function(w,k){var N=p&&p[k];if(N){var b=ja(N.x,w.x),A=ja(N.y,w.y),E=ja(N.width,w.width),S=ja(N.height,w.height);return $n($n({},w),{},{x:b(v),y:A(v),width:E(v),height:S(v)})}if(o==="horizontal"){var _=ja(0,w.height),C=_(v);return $n($n({},w),{},{y:w.y+w.height-C,height:C})}var P=ja(0,w.width),B=P(v);return $n($n({},w),{},{width:B})});return xe.createElement(Sr,null,a.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var a=this.props,s=a.data,i=a.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!du(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var a=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,d=Rt(this.props.background,!1);return i.map(function(u,f){u.value;var m=u.background,p=Iae(u,Pae);if(!m)return null;var g=$n($n($n($n($n({},p),{},{fill:"#eee"},m),d),sc(a.props,u,f)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return xe.createElement(C6,Mp({key:"background-bar-".concat(f),option:a.props.background,isActive:f===l},g))})}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,d=i.yAxis,u=i.layout,f=i.children,m=Cs(f,Xf);if(!m)return null;var p=u==="vertical"?o[0].height/2:o[0].width/2,g=function(w,k){var N=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:N,errorVal:In(w,k)}},v={clipPath:a?"url(#clipPath-".concat(s,")"):null};return xe.createElement(Sr,v,m.map(function(y){return xe.cloneElement(y,{key:"error-bar-".concat(s,"-").concat(y.props.dataKey),data:o,xAxis:l,yAxis:d,layout:u,offset:p,dataPointFormatter:g})}))}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.data,o=a.className,l=a.xAxis,d=a.yAxis,u=a.left,f=a.top,m=a.width,p=a.height,g=a.isAnimationActive,v=a.background,y=a.id;if(s||!i||!i.length)return null;var w=this.state.isAnimationFinished,k=nr("recharts-bar",o),N=l&&l.allowDataOverflow,b=d&&d.allowDataOverflow,A=N||b,E=sr(y)?this.id:y;return xe.createElement(Sr,{className:k},N||b?xe.createElement("defs",null,xe.createElement("clipPath",{id:"clipPath-".concat(E)},xe.createElement("rect",{x:N?u:u-m/2,y:b?f:f-p/2,width:N?m:m*2,height:b?p:p*2}))):null,xe.createElement(Sr,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(E,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,E),(!g||w)&&Fi.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:s.curData}:a.data!==s.curData?{curData:a.data}:null}}])})(M.PureComponent);hF=wr;tl(wr,"displayName","Bar");tl(wr,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!fl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});tl(wr,"getComposedData",function(e){var t=e.props,r=e.item,a=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,d=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,m=e.displayedData,p=e.offset,g=zQ(a,r);if(!g)return null;var v=t.layout,y=r.type.defaultProps,w=y!==void 0?$n($n({},y),r.props):r.props,k=w.dataKey,N=w.children,b=w.minPointSize,A=v==="horizontal"?o:i,E=u?A.scale.domain():null,S=JQ({numericAxis:A}),_=Cs(N,ic),C=m.map(function(P,B){var F,O,R,Q,V,J;u?F=WQ(u[f+B],E):(F=In(P,k),Array.isArray(F)||(F=[S,F]));var ae=Oae(b,hF.defaultProps.minPointSize)(F[1],B);if(v==="horizontal"){var L,H=[o.scale(F[0]),o.scale(F[1])],ce=H[0],z=H[1];O=Z3({axis:i,ticks:l,bandSize:s,offset:g.offset,entry:P,index:B}),R=(L=z??ce)!==null&&L!==void 0?L:void 0,Q=g.size;var I=ce-z;if(V=Number.isNaN(I)?0:I,J={x:O,y:o.y,width:Q,height:o.height},Math.abs(ae)>0&&Math.abs(V)<Math.abs(ae)){var Z=Ga(V||ae)*(Math.abs(ae)-Math.abs(V));R-=Z,V+=Z}}else{var te=[i.scale(F[0]),i.scale(F[1])],se=te[0],be=te[1];if(O=se,R=Z3({axis:o,ticks:d,bandSize:s,offset:g.offset,entry:P,index:B}),Q=be-se,V=g.size,J={x:i.x,y:R,width:i.width,height:V},Math.abs(ae)>0&&Math.abs(Q)<Math.abs(ae)){var Ee=Ga(Q||ae)*(Math.abs(ae)-Math.abs(Q));Q+=Ee}}return $n($n($n({},P),{},{x:O,y:R,width:Q,height:V,value:u?F:F[1],payload:P,background:J},_&&_[B]&&_[B].props),{},{tooltipPayload:[DR(r,P)],tooltipPosition:{x:O+Q/2,y:R+V/2}})});return $n({data:C,layout:v},p)});function _f(e){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(e)}function Hae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O6(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,pF(a.key),a)}}function qae(e,t,r){return t&&O6(e.prototype,t),r&&O6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function P6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P6(Object(r),!0).forEach(function(a){Wg(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Wg(e,t,r){return t=pF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pF(e){var t=zae(e,"string");return _f(t)=="symbol"?t:t+""}function zae(e,t){if(_f(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(_f(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gF=function(t,r,a,s,i){var o=t.width,l=t.height,d=t.layout,u=t.children,f=Object.keys(r),m={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},p=!!bs(u,wr);return f.reduce(function(g,v){var y=r[v],w=y.orientation,k=y.domain,N=y.padding,b=N===void 0?{}:N,A=y.mirror,E=y.reversed,S="".concat(w).concat(A?"Mirror":""),_,C,P,B,F;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var O=k[1]-k[0],R=1/0,Q=y.categoricalDomain.sort(Pz);if(Q.forEach(function(te,se){se>0&&(R=Math.min((te||0)-(Q[se-1]||0),R))}),Number.isFinite(R)){var V=R/O,J=y.layout==="vertical"?a.height:a.width;if(y.padding==="gap"&&(_=V*J/2),y.padding==="no-gap"){var ae=Ya(t.barCategoryGap,V*J),L=V*J/2;_=L-ae-(L-ae)/J*ae}}}s==="xAxis"?C=[a.left+(b.left||0)+(_||0),a.left+a.width-(b.right||0)-(_||0)]:s==="yAxis"?C=d==="horizontal"?[a.top+a.height-(b.bottom||0),a.top+(b.top||0)]:[a.top+(b.top||0)+(_||0),a.top+a.height-(b.bottom||0)-(_||0)]:C=y.range,E&&(C=[C[1],C[0]]);var H=TR(y,i,p),ce=H.scale,z=H.realScaleType;ce.domain(k).range(C),OR(ce);var I=PR(ce,di(di({},y),{},{realScaleType:z}));s==="xAxis"?(F=w==="top"&&!A||w==="bottom"&&A,P=a.left,B=m[S]-F*y.height):s==="yAxis"&&(F=w==="left"&&!A||w==="right"&&A,P=m[S]-F*y.width,B=a.top);var Z=di(di(di({},y),I),{},{realScaleType:z,x:P,y:B,scale:ce,width:s==="xAxis"?a.width:y.width,height:s==="yAxis"?a.height:y.height});return Z.bandSize=gp(Z,I),!y.hide&&s==="xAxis"?m[S]+=(F?-1:1)*Z.height:y.hide||(m[S]+=(F?-1:1)*Z.width),di(di({},g),{},Wg({},v,Z))},{})},xF=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(a,i),y:Math.min(s,o),width:Math.abs(i-a),height:Math.abs(o-s)}},Wae=function(t){var r=t.x1,a=t.y1,s=t.x2,i=t.y2;return xF({x:r,y:a},{x:s,y:i})},yF=(function(){function e(t){Hae(this,e),this.scale=t}return qae(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var a=this.range(),s=a[0],i=a[a.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();Wg(yF,"EPS",1e-4);var wk=function(t){var r=Object.keys(t).reduce(function(a,s){return di(di({},a),{},Wg({},s,yF.create(t[s])))},{});return di(di({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return vae(s,function(d,u){return r[u].apply(d,{bandAware:o,position:l})})},isInRange:function(s){return uF(s,function(i,o){return r[o].isInRange(i)})}})};function Kae(e){return(e%180+180)%180}var Vae=function(t){var r=t.width,a=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Kae(s),o=i*Math.PI/180,l=Math.atan(a/r),d=o>l&&o<Math.PI-l?a/Math.sin(o):r/Math.cos(o);return Math.abs(d)},L1,I6;function Gae(){if(I6)return L1;I6=1;var e=qi(),t=Wf(),r=Eg();function a(s){return function(i,o,l){var d=Object(i);if(!t(i)){var u=e(o,3);i=r(i),o=function(m){return u(d[m],m,d)}}var f=s(i,o,l);return f>-1?d[u?i[f]:f]:void 0}}return L1=a,L1}var B1,D6;function Yae(){if(D6)return B1;D6=1;var e=oF();function t(r){var a=e(r),s=a%1;return a===a?s?a-s:a:0}return B1=t,B1}var U1,M6;function Xae(){if(M6)return U1;M6=1;var e=hM(),t=qi(),r=Yae(),a=Math.max;function s(i,o,l){var d=i==null?0:i.length;if(!d)return-1;var u=l==null?0:r(l);return u<0&&(u=a(d+u,0)),e(i,t(o,3),u)}return U1=s,U1}var H1,R6;function Jae(){if(R6)return H1;R6=1;var e=Gae(),t=Xae(),r=e(t);return H1=r,H1}var Qae=Jae();const Zae=qr(Qae);var ese=C5();const tse=qr(ese);var rse=tse(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),jk=M.createContext(void 0),Nk=M.createContext(void 0),vF=M.createContext(void 0),bF=M.createContext({}),wF=M.createContext(void 0),jF=M.createContext(0),NF=M.createContext(0),F6=function(t){var r=t.state,a=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,d=t.width,u=t.height,f=rse(i);return xe.createElement(jk.Provider,{value:a},xe.createElement(Nk.Provider,{value:s},xe.createElement(bF.Provider,{value:i},xe.createElement(vF.Provider,{value:f},xe.createElement(wF.Provider,{value:o},xe.createElement(jF.Provider,{value:u},xe.createElement(NF.Provider,{value:d},l)))))))},nse=function(){return M.useContext(wF)},kF=function(t){var r=M.useContext(jk);r==null&&cc();var a=r[t];return a==null&&cc(),a},ase=function(){var t=M.useContext(jk);return Qo(t)},sse=function(){var t=M.useContext(Nk),r=Zae(t,function(a){return uF(a.domain,Number.isFinite)});return r||Qo(t)},SF=function(t){var r=M.useContext(Nk);r==null&&cc();var a=r[t];return a==null&&cc(),a},ise=function(){var t=M.useContext(vF);return t},ose=function(){return M.useContext(bF)},kk=function(){return M.useContext(NF)},Sk=function(){return M.useContext(jF)};function qd(e){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qd(e)}function lse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cse(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,EF(a.key),a)}}function dse(e,t,r){return t&&cse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function use(e,t,r){return t=Fp(t),hse(e,_F()?Reflect.construct(t,r||[],Fp(e).constructor):t.apply(e,r))}function hse(e,t){if(t&&(qd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fse(e)}function fse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_F=function(){return!!e})()}function Fp(e){return Fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fp(e)}function mse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PN(e,t)}function PN(e,t){return PN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},PN(e,t)}function $6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function L6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$6(Object(r),!0).forEach(function(a){_k(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function _k(e,t,r){return t=EF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EF(e){var t=pse(e,"string");return qd(t)=="symbol"?t:t+""}function pse(e,t){if(qd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(qd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function gse(e,t){return bse(e)||vse(e,t)||yse(e,t)||xse()}function xse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yse(e,t){if(e){if(typeof e=="string")return B6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B6(e,t)}}function B6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function vse(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function bse(e){if(Array.isArray(e))return e}function IN(){return IN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},IN.apply(this,arguments)}var wse=function(t,r){var a;return xe.isValidElement(t)?a=xe.cloneElement(t,r):Kt(t)?a=t(r):a=xe.createElement("line",IN({},r,{className:"recharts-reference-line-line"})),a},jse=function(t,r,a,s,i,o,l,d,u){var f=i.x,m=i.y,p=i.width,g=i.height;if(a){var v=u.y,y=t.y.apply(v,{position:o});if($i(u,"discard")&&!t.y.isInRange(y))return null;var w=[{x:f+p,y},{x:f,y}];return d==="left"?w.reverse():w}if(r){var k=u.x,N=t.x.apply(k,{position:o});if($i(u,"discard")&&!t.x.isInRange(N))return null;var b=[{x:N,y:m+g},{x:N,y:m}];return l==="top"?b.reverse():b}if(s){var A=u.segment,E=A.map(function(S){return t.apply(S,{position:o})});return $i(u,"discard")&&pae(E,function(S){return!t.isInRange(S)})?null:E}return null};function Nse(e){var t=e.x,r=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,d=e.alwaysShow,u=nse(),f=kF(s),m=SF(i),p=ise();if(!u||!p)return null;bi(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=wk({x:f.scale,y:m.scale}),v=na(t),y=na(r),w=a&&a.length===2,k=jse(g,v,y,w,p,e.position,f.orientation,m.orientation,e);if(!k)return null;var N=gse(k,2),b=N[0],A=b.x,E=b.y,S=N[1],_=S.x,C=S.y,P=$i(e,"hidden")?"url(#".concat(u,")"):void 0,B=L6(L6({clipPath:P},Rt(e,!0)),{},{x1:A,y1:E,x2:_,y2:C});return xe.createElement(Sr,{className:nr("recharts-reference-line",l)},wse(o,B),ha.renderCallByParent(e,Wae({x1:A,y1:E,x2:_,y2:C})))}var Ek=(function(e){function t(){return lse(this,t),use(this,t,arguments)}return mse(t,e),dse(t,[{key:"render",value:function(){return xe.createElement(Nse,this.props)}}])})(xe.Component);_k(Ek,"displayName","ReferenceLine");_k(Ek,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function DN(){return DN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},DN.apply(this,arguments)}function zd(e){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(e)}function U6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function H6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U6(Object(r),!0).forEach(function(a){Kg(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sse(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,AF(a.key),a)}}function _se(e,t,r){return t&&Sse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ese(e,t,r){return t=$p(t),Cse(e,CF()?Reflect.construct(t,r||[],$p(e).constructor):t.apply(e,r))}function Cse(e,t){if(t&&(zd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ase(e)}function Ase(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CF=function(){return!!e})()}function $p(e){return $p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$p(e)}function Tse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MN(e,t)}function MN(e,t){return MN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},MN(e,t)}function Kg(e,t,r){return t=AF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AF(e){var t=Ose(e,"string");return zd(t)=="symbol"?t:t+""}function Ose(e,t){if(zd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(zd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Pse=function(t){var r=t.x,a=t.y,s=t.xAxis,i=t.yAxis,o=wk({x:s.scale,y:i.scale}),l=o.apply({x:r,y:a},{bandAware:!0});return $i(t,"discard")&&!o.isInRange(l)?null:l},Vg=(function(e){function t(){return kse(this,t),Ese(this,t,arguments)}return Tse(t,e),_se(t,[{key:"render",value:function(){var a=this.props,s=a.x,i=a.y,o=a.r,l=a.alwaysShow,d=a.clipPathId,u=na(s),f=na(i);if(bi(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var m=Pse(this.props);if(!m)return null;var p=m.x,g=m.y,v=this.props,y=v.shape,w=v.className,k=$i(this.props,"hidden")?"url(#".concat(d,")"):void 0,N=H6(H6({clipPath:k},Rt(this.props,!0)),{},{cx:p,cy:g});return xe.createElement(Sr,{className:nr("recharts-reference-dot",w)},t.renderDot(y,N),ha.renderCallByParent(this.props,{x:p-o,y:g-o,width:2*o,height:2*o}))}}])})(xe.Component);Kg(Vg,"displayName","ReferenceDot");Kg(Vg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Kg(Vg,"renderDot",function(e,t){var r;return xe.isValidElement(e)?r=xe.cloneElement(e,t):Kt(e)?r=e(t):r=xe.createElement(Jf,DN({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function RN(){return RN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},RN.apply(this,arguments)}function Wd(e){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(e)}function q6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function z6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q6(Object(r),!0).forEach(function(a){Gg(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ise(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dse(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,OF(a.key),a)}}function Mse(e,t,r){return t&&Dse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rse(e,t,r){return t=Lp(t),Fse(e,TF()?Reflect.construct(t,r||[],Lp(e).constructor):t.apply(e,r))}function Fse(e,t){if(t&&(Wd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $se(e)}function $se(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TF=function(){return!!e})()}function Lp(e){return Lp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lp(e)}function Lse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FN(e,t)}function FN(e,t){return FN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},FN(e,t)}function Gg(e,t,r){return t=OF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OF(e){var t=Bse(e,"string");return Wd(t)=="symbol"?t:t+""}function Bse(e,t){if(Wd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Wd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Use=function(t,r,a,s,i){var o=i.x1,l=i.x2,d=i.y1,u=i.y2,f=i.xAxis,m=i.yAxis;if(!f||!m)return null;var p=wk({x:f.scale,y:m.scale}),g={x:t?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:a?p.y.apply(d,{position:"start"}):p.y.rangeMin},v={x:r?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:s?p.y.apply(u,{position:"end"}):p.y.rangeMax};return $i(i,"discard")&&(!p.isInRange(g)||!p.isInRange(v))?null:xF(g,v)},Yg=(function(e){function t(){return Ise(this,t),Rse(this,t,arguments)}return Lse(t,e),Mse(t,[{key:"render",value:function(){var a=this.props,s=a.x1,i=a.x2,o=a.y1,l=a.y2,d=a.className,u=a.alwaysShow,f=a.clipPathId;bi(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=na(s),p=na(i),g=na(o),v=na(l),y=this.props.shape;if(!m&&!p&&!g&&!v&&!y)return null;var w=Use(m,p,g,v,this.props);if(!w&&!y)return null;var k=$i(this.props,"hidden")?"url(#".concat(f,")"):void 0;return xe.createElement(Sr,{className:nr("recharts-reference-area",d)},t.renderRect(y,z6(z6({clipPath:k},Rt(this.props,!0)),w)),ha.renderCallByParent(this.props,w))}}])})(xe.Component);Gg(Yg,"displayName","ReferenceArea");Gg(Yg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Gg(Yg,"renderRect",function(e,t){var r;return xe.isValidElement(e)?r=xe.cloneElement(e,t):Kt(e)?r=e(t):r=xe.createElement(bk,RN({},t,{className:"recharts-reference-area-rect"})),r});function PF(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function Hse(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return Vae(a,r)}function qse(e,t,r){var a=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:a?s:i,end:a?s+o:i+l}:{start:a?s+o:i+l,end:a?s:i}}function Bp(e,t,r,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function zse(e,t){return PF(e,t+1)}function Wse(e,t,r,a,s){for(var i=(a||[]).slice(),o=t.start,l=t.end,d=0,u=1,f=o,m=function(){var v=a?.[d];if(v===void 0)return{v:PF(a,u)};var y=d,w,k=function(){return w===void 0&&(w=r(v,y)),w},N=v.coordinate,b=d===0||Bp(e,N,k,f,l);b||(d=0,f=o,u+=1),b&&(f=N+e*(k()/2+s),d+=u)},p;u<=i.length;)if(p=m(),p)return p.v;return[]}function Ef(e){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ef(e)}function W6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ia(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W6(Object(r),!0).forEach(function(a){Kse(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Kse(e,t,r){return t=Vse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vse(e){var t=Gse(e,"string");return Ef(t)=="symbol"?t:t+""}function Gse(e,t){if(Ef(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ef(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yse(e,t,r,a,s){for(var i=(a||[]).slice(),o=i.length,l=t.start,d=t.end,u=function(p){var g=i[p],v,y=function(){return v===void 0&&(v=r(g,p)),v};if(p===o-1){var w=e*(g.coordinate+e*y()/2-d);i[p]=g=Ia(Ia({},g),{},{tickCoord:w>0?g.coordinate-w*e:g.coordinate})}else i[p]=g=Ia(Ia({},g),{},{tickCoord:g.coordinate});var k=Bp(e,g.tickCoord,y,l,d);k&&(d=g.tickCoord-e*(y()/2+s),i[p]=Ia(Ia({},g),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function Xse(e,t,r,a,s,i){var o=(a||[]).slice(),l=o.length,d=t.start,u=t.end;if(i){var f=a[l-1],m=r(f,l-1),p=e*(f.coordinate+e*m/2-u);o[l-1]=f=Ia(Ia({},f),{},{tickCoord:p>0?f.coordinate-p*e:f.coordinate});var g=Bp(e,f.tickCoord,function(){return m},d,u);g&&(u=f.tickCoord-e*(m/2+s),o[l-1]=Ia(Ia({},f),{},{isShow:!0}))}for(var v=i?l-1:l,y=function(N){var b=o[N],A,E=function(){return A===void 0&&(A=r(b,N)),A};if(N===0){var S=e*(b.coordinate-e*E()/2-d);o[N]=b=Ia(Ia({},b),{},{tickCoord:S<0?b.coordinate-S*e:b.coordinate})}else o[N]=b=Ia(Ia({},b),{},{tickCoord:b.coordinate});var _=Bp(e,b.tickCoord,E,d,u);_&&(d=b.tickCoord+e*(E()/2+s),o[N]=Ia(Ia({},b),{},{isShow:!0}))},w=0;w<v;w++)y(w);return o}function Ck(e,t,r){var a=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,d=e.interval,u=e.tickFormatter,f=e.unit,m=e.angle;if(!s||!s.length||!a)return[];if(gt(d)||fl.isSsr)return zse(s,typeof d=="number"&&gt(d)?d:0);var p=[],g=l==="top"||l==="bottom"?"width":"height",v=f&&g==="width"?bh(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},y=function(b,A){var E=Kt(u)?u(b.value,A):b.value;return g==="width"?Hse(bh(E,{fontSize:t,letterSpacing:r}),v,m):bh(E,{fontSize:t,letterSpacing:r})[g]},w=s.length>=2?Ga(s[1].coordinate-s[0].coordinate):1,k=qse(i,w,g);return d==="equidistantPreserveStart"?Wse(w,k,y,s,o):(d==="preserveStart"||d==="preserveStartEnd"?p=Xse(w,k,y,s,o,d==="preserveStartEnd"):p=Yse(w,k,y,s,o),p.filter(function(N){return N.isShow}))}var Jse=["viewBox"],Qse=["viewBox"],Zse=["ticks"];function Kd(e){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(e)}function pd(){return pd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},pd.apply(this,arguments)}function K6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Yn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K6(Object(r),!0).forEach(function(a){Ak(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function q1(e,t){if(e==null)return{};var r=eie(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function eie(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function tie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V6(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,DF(a.key),a)}}function rie(e,t,r){return t&&V6(e.prototype,t),r&&V6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function nie(e,t,r){return t=Up(t),aie(e,IF()?Reflect.construct(t,r||[],Up(e).constructor):t.apply(e,r))}function aie(e,t){if(t&&(Kd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sie(e)}function sie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IF=function(){return!!e})()}function Up(e){return Up=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Up(e)}function iie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$N(e,t)}function $N(e,t){return $N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},$N(e,t)}function Ak(e,t,r){return t=DF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DF(e){var t=oie(e,"string");return Kd(t)=="symbol"?t:t+""}function oie(e,t){if(Kd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Kd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var pu=(function(e){function t(r){var a;return tie(this,t),a=nie(this,t,[r]),a.state={fontSize:"",letterSpacing:""},a}return iie(t,e),rie(t,[{key:"shouldComponentUpdate",value:function(a,s){var i=a.viewBox,o=q1(a,Jse),l=this.props,d=l.viewBox,u=q1(l,Qse);return!bd(i,d)||!bd(o,u)||!bd(s,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var s=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.x,o=s.y,l=s.width,d=s.height,u=s.orientation,f=s.tickSize,m=s.mirror,p=s.tickMargin,g,v,y,w,k,N,b=m?-1:1,A=a.tickSize||f,E=gt(a.tickCoord)?a.tickCoord:a.coordinate;switch(u){case"top":g=v=a.coordinate,w=o+ +!m*d,y=w-b*A,N=y-b*p,k=E;break;case"left":y=w=a.coordinate,v=i+ +!m*l,g=v-b*A,k=g-b*p,N=E;break;case"right":y=w=a.coordinate,v=i+ +m*l,g=v+b*A,k=g+b*p,N=E;break;default:g=v=a.coordinate,w=o+ +m*d,y=w+b*A,N=y+b*p,k=E;break}return{line:{x1:g,y1:y,x2:v,y2:w},tick:{x:k,y:N}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,d=a.orientation,u=a.mirror,f=a.axisLine,m=Yn(Yn(Yn({},Rt(this.props,!1)),Rt(f,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var p=+(d==="top"&&!u||d==="bottom"&&u);m=Yn(Yn({},m),{},{x1:s,y1:i+p*l,x2:s+o,y2:i+p*l})}else{var g=+(d==="left"&&!u||d==="right"&&u);m=Yn(Yn({},m),{},{x1:s+g*o,y1:i,x2:s+g*o,y2:i+l})}return xe.createElement("line",pd({},m,{className:nr("recharts-cartesian-axis-line",Es(f,"className"))}))}},{key:"renderTicks",value:function(a,s,i){var o=this,l=this.props,d=l.tickLine,u=l.stroke,f=l.tick,m=l.tickFormatter,p=l.unit,g=Ck(Yn(Yn({},this.props),{},{ticks:a}),s,i),v=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),w=Rt(this.props,!1),k=Rt(f,!1),N=Yn(Yn({},w),{},{fill:"none"},Rt(d,!1)),b=g.map(function(A,E){var S=o.getTickLineCoord(A),_=S.line,C=S.tick,P=Yn(Yn(Yn(Yn({textAnchor:v,verticalAnchor:y},w),{},{stroke:"none",fill:u},k),C),{},{index:E,payload:A,visibleTicksCount:g.length,tickFormatter:m});return xe.createElement(Sr,pd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},sc(o.props,A,E)),d&&xe.createElement("line",pd({},N,_,{className:nr("recharts-cartesian-axis-tick-line",Es(d,"className"))})),f&&t.renderTickItem(f,P,"".concat(Kt(m)?m(A.value,E):A.value).concat(p||"")))});return xe.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var a=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,d=s.ticksGenerator,u=s.className,f=s.hide;if(f)return null;var m=this.props,p=m.ticks,g=q1(m,Zse),v=p;return Kt(d)&&(v=p&&p.length>0?d(this.props):d(g)),o<=0||l<=0||!v||!v.length?null:xe.createElement(Sr,{className:nr("recharts-cartesian-axis",u),ref:function(w){a.layerReference=w}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),ha.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,s,i){var o,l=nr(s.className,"recharts-cartesian-axis-tick-value");return xe.isValidElement(a)?o=xe.cloneElement(a,Yn(Yn({},s),{},{className:l})):Kt(a)?o=a(Yn(Yn({},s),{},{className:l})):o=xe.createElement(oc,pd({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(M.Component);Ak(pu,"displayName","CartesianAxis");Ak(pu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var lie=["x1","y1","x2","y2","key"],cie=["offset"];function dc(e){"@babel/helpers - typeof";return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dc(e)}function G6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ma(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G6(Object(r),!0).forEach(function(a){die(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function die(e,t,r){return t=uie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uie(e){var t=hie(e,"string");return dc(t)=="symbol"?t:t+""}function hie(e,t){if(dc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(dc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yl(){return Yl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Yl.apply(this,arguments)}function Y6(e,t){if(e==null)return{};var r=fie(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function fie(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var mie=function(t){var r=t.fill;if(!r||r==="none")return null;var a=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,d=t.ry;return xe.createElement("rect",{x:s,y:i,ry:d,width:o,height:l,stroke:"none",fill:r,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function MF(e,t){var r;if(xe.isValidElement(e))r=xe.cloneElement(e,t);else if(Kt(e))r=e(t);else{var a=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,d=Y6(t,lie),u=Rt(d,!1);u.offset;var f=Y6(u,cie);r=xe.createElement("line",Yl({},f,{x1:a,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function pie(e){var t=e.x,r=e.width,a=e.horizontal,s=a===void 0?!0:a,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,d){var u=Ma(Ma({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(d),index:d});return MF(s,u)});return xe.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function gie(e){var t=e.y,r=e.height,a=e.vertical,s=a===void 0?!0:a,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,d){var u=Ma(Ma({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(d),index:d});return MF(s,u)});return xe.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function xie(e){var t=e.horizontalFill,r=e.fillOpacity,a=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,d=e.horizontal,u=d===void 0?!0:d;if(!u||!t||!t.length)return null;var f=l.map(function(p){return Math.round(p+s-s)}).sort(function(p,g){return p-g});s!==f[0]&&f.unshift(0);var m=f.map(function(p,g){var v=!f[g+1],y=v?s+o-p:f[g+1]-p;if(y<=0)return null;var w=g%t.length;return xe.createElement("rect",{key:"react-".concat(g),y:p,x:a,height:y,width:i,stroke:"none",fill:t[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return xe.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function yie(e){var t=e.vertical,r=t===void 0?!0:t,a=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,d=e.height,u=e.verticalPoints;if(!r||!a||!a.length)return null;var f=u.map(function(p){return Math.round(p+i-i)}).sort(function(p,g){return p-g});i!==f[0]&&f.unshift(0);var m=f.map(function(p,g){var v=!f[g+1],y=v?i+l-p:f[g+1]-p;if(y<=0)return null;var w=g%a.length;return xe.createElement("rect",{key:"react-".concat(g),x:p,y:o,width:y,height:d,stroke:"none",fill:a[w],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return xe.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var vie=function(t,r){var a=t.xAxis,s=t.width,i=t.height,o=t.offset;return AR(Ck(Ma(Ma(Ma({},pu.defaultProps),a),{},{ticks:po(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},bie=function(t,r){var a=t.yAxis,s=t.width,i=t.height,o=t.offset;return AR(Ck(Ma(Ma(Ma({},pu.defaultProps),a),{},{ticks:po(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},rd={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function ba(e){var t,r,a,s,i,o,l=kk(),d=Sk(),u=ose(),f=Ma(Ma({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:rd.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:rd.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:rd.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:rd.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:rd.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:rd.verticalFill,x:gt(e.x)?e.x:u.left,y:gt(e.y)?e.y:u.top,width:gt(e.width)?e.width:u.width,height:gt(e.height)?e.height:u.height}),m=f.x,p=f.y,g=f.width,v=f.height,y=f.syncWithTicks,w=f.horizontalValues,k=f.verticalValues,N=ase(),b=sse();if(!gt(g)||g<=0||!gt(v)||v<=0||!gt(m)||m!==+m||!gt(p)||p!==+p)return null;var A=f.verticalCoordinatesGenerator||vie,E=f.horizontalCoordinatesGenerator||bie,S=f.horizontalPoints,_=f.verticalPoints;if((!S||!S.length)&&Kt(E)){var C=w&&w.length,P=E({yAxis:b?Ma(Ma({},b),{},{ticks:C?w:b.ticks}):void 0,width:l,height:d,offset:u},C?!0:y);bi(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(dc(P),"]")),Array.isArray(P)&&(S=P)}if((!_||!_.length)&&Kt(A)){var B=k&&k.length,F=A({xAxis:N?Ma(Ma({},N),{},{ticks:B?k:N.ticks}):void 0,width:l,height:d,offset:u},B?!0:y);bi(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(dc(F),"]")),Array.isArray(F)&&(_=F)}return xe.createElement("g",{className:"recharts-cartesian-grid"},xe.createElement(mie,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),xe.createElement(pie,Yl({},f,{offset:u,horizontalPoints:S,xAxis:N,yAxis:b})),xe.createElement(gie,Yl({},f,{offset:u,verticalPoints:_,xAxis:N,yAxis:b})),xe.createElement(xie,Yl({},f,{horizontalPoints:S})),xe.createElement(yie,Yl({},f,{verticalPoints:_})))}ba.displayName="CartesianGrid";var wie=["type","layout","connectNulls","ref"],jie=["key"];function Vd(e){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vd(e)}function X6(e,t){if(e==null)return{};var r=Nie(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Nie(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function _h(){return _h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_h.apply(this,arguments)}function J6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ys(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J6(Object(r),!0).forEach(function(a){ui(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nd(e){return Eie(e)||_ie(e)||Sie(e)||kie()}function kie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sie(e,t){if(e){if(typeof e=="string")return LN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LN(e,t)}}function _ie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Eie(e){if(Array.isArray(e))return LN(e)}function LN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Cie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q6(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,FF(a.key),a)}}function Aie(e,t,r){return t&&Q6(e.prototype,t),r&&Q6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tie(e,t,r){return t=Hp(t),Oie(e,RF()?Reflect.construct(t,r||[],Hp(e).constructor):t.apply(e,r))}function Oie(e,t){if(t&&(Vd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pie(e)}function Pie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RF=function(){return!!e})()}function Hp(e){return Hp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hp(e)}function Iie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BN(e,t)}function BN(e,t){return BN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},BN(e,t)}function ui(e,t,r){return t=FF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FF(e){var t=Die(e,"string");return Vd(t)=="symbol"?t:t+""}function Die(e,t){if(Vd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Vd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wi=(function(e){function t(){var r;Cie(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=Tie(this,t,[].concat(s)),ui(r,"state",{isAnimationFinished:!0,totalLength:0}),ui(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),ui(r,"getStrokeDasharray",function(o,l,d){var u=d.reduce(function(k,N){return k+N});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/u),m=o%u,p=l-o,g=[],v=0,y=0;v<d.length;y+=d[v],++v)if(y+d[v]>m){g=[].concat(nd(d.slice(0,v)),[m-y]);break}var w=g.length%2===0?[0,p]:[p];return[].concat(nd(t.repeat(d,f)),nd(g),w).map(function(k){return"".concat(k,"px")}).join(", ")}),ui(r,"id",ou("recharts-line-")),ui(r,"pathRef",function(o){r.mainCurve=o}),ui(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),ui(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Iie(t,e),Aie(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,d=i.yAxis,u=i.layout,f=i.children,m=Cs(f,Xf);if(!m)return null;var p=function(y,w){return{x:y.x,y:y.y,value:y.value,errorVal:In(y.payload,w)}},g={clipPath:a?"url(#clipPath-".concat(s,")"):null};return xe.createElement(Sr,g,m.map(function(v){return xe.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:l,yAxis:d,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(a,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,d=l.dot,u=l.points,f=l.dataKey,m=Rt(this.props,!1),p=Rt(d,!0),g=u.map(function(y,w){var k=ys(ys(ys({key:"dot-".concat(w),r:3},m),p),{},{index:w,cx:y.x,cy:y.y,value:y.value,dataKey:f,payload:y.payload,points:u});return t.renderDotItem(d,k)}),v={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return xe.createElement(Sr,_h({className:"recharts-line-dots",key:"dots"},v),g)}},{key:"renderCurveStatically",value:function(a,s,i,o){var l=this.props,d=l.type,u=l.layout,f=l.connectNulls;l.ref;var m=X6(l,wie),p=ys(ys(ys({},Rt(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:a},o),{},{type:d,layout:u,connectNulls:f});return xe.createElement(vp,_h({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,s){var i=this,o=this.props,l=o.points,d=o.strokeDasharray,u=o.isAnimationActive,f=o.animationBegin,m=o.animationDuration,p=o.animationEasing,g=o.animationId,v=o.animateNewValues,y=o.width,w=o.height,k=this.state,N=k.prevPoints,b=k.totalLength;return xe.createElement(Ni,{begin:f,duration:m,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var E=A.t;if(N){var S=N.length/l.length,_=l.map(function(O,R){var Q=Math.floor(R*S);if(N[Q]){var V=N[Q],J=ja(V.x,O.x),ae=ja(V.y,O.y);return ys(ys({},O),{},{x:J(E),y:ae(E)})}if(v){var L=ja(y*2,O.x),H=ja(w/2,O.y);return ys(ys({},O),{},{x:L(E),y:H(E)})}return ys(ys({},O),{},{x:O.x,y:O.y})});return i.renderCurveStatically(_,a,s)}var C=ja(0,b),P=C(E),B;if(d){var F="".concat(d).split(/[,\s]+/gim).map(function(O){return parseFloat(O)});B=i.getStrokeDasharray(P,b,F)}else B=i.generateSimpleStrokeDasharray(b,P);return i.renderCurveStatically(l,a,s,{strokeDasharray:B})})}},{key:"renderCurve",value:function(a,s){var i=this.props,o=i.points,l=i.isAnimationActive,d=this.state,u=d.prevPoints,f=d.totalLength;return l&&o&&o.length&&(!u&&f>0||!du(u,o))?this.renderCurveWithAnimation(a,s):this.renderCurveStatically(o,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,o=s.dot,l=s.points,d=s.className,u=s.xAxis,f=s.yAxis,m=s.top,p=s.left,g=s.width,v=s.height,y=s.isAnimationActive,w=s.id;if(i||!l||!l.length)return null;var k=this.state.isAnimationFinished,N=l.length===1,b=nr("recharts-line",d),A=u&&u.allowDataOverflow,E=f&&f.allowDataOverflow,S=A||E,_=sr(w)?this.id:w,C=(a=Rt(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},P=C.r,B=P===void 0?3:P,F=C.strokeWidth,O=F===void 0?2:F,R=Uz(o)?o:{},Q=R.clipDot,V=Q===void 0?!0:Q,J=B*2+O;return xe.createElement(Sr,{className:b},A||E?xe.createElement("defs",null,xe.createElement("clipPath",{id:"clipPath-".concat(_)},xe.createElement("rect",{x:A?p:p-g/2,y:E?m:m-v/2,width:A?g:g*2,height:E?v:v*2})),!V&&xe.createElement("clipPath",{id:"clipPath-dots-".concat(_)},xe.createElement("rect",{x:p-J/2,y:m-J/2,width:g+J,height:v+J}))):null,!N&&this.renderCurve(S,_),this.renderErrorBar(S,_),(N||o)&&this.renderDots(S,V,_),(!y||k)&&Fi.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,s){for(var i=a.length%2!==0?[].concat(nd(a),[0]):a,o=[],l=0;l<s;++l)o=[].concat(nd(o),nd(i));return o}},{key:"renderDotItem",value:function(a,s){var i;if(xe.isValidElement(a))i=xe.cloneElement(a,s);else if(Kt(a))i=a(s);else{var o=s.key,l=X6(s,jie),d=nr("recharts-line-dot",typeof a!="boolean"?a.className:"");i=xe.createElement(Jf,_h({key:o},l,{className:d}))}return i}}])})(M.PureComponent);ui(wi,"displayName","Line");ui(wi,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!fl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ui(wi,"getComposedData",function(e){var t=e.props,r=e.xAxis,a=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,d=e.displayedData,u=e.offset,f=t.layout,m=d.map(function(p,g){var v=In(p,o);return f==="horizontal"?{x:Q3({axis:r,ticks:s,bandSize:l,entry:p,index:g}),y:sr(v)?null:a.scale(v),value:v,payload:p}:{x:sr(v)?null:r.scale(v),y:Q3({axis:a,ticks:i,bandSize:l,entry:p,index:g}),value:v,payload:p}});return ys({points:m,layout:f},u)});function Gd(e){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gd(e)}function Mie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rie(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,BF(a.key),a)}}function Fie(e,t,r){return t&&Rie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $ie(e,t,r){return t=qp(t),Lie(e,$F()?Reflect.construct(t,r||[],qp(e).constructor):t.apply(e,r))}function Lie(e,t){if(t&&(Gd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bie(e)}function Bie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($F=function(){return!!e})()}function qp(e){return qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qp(e)}function Uie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UN(e,t)}function UN(e,t){return UN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},UN(e,t)}function LF(e,t,r){return t=BF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BF(e){var t=Hie(e,"string");return Gd(t)=="symbol"?t:t+""}function Hie(e,t){if(Gd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Gd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function HN(){return HN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},HN.apply(this,arguments)}function qie(e){var t=e.xAxisId,r=kk(),a=Sk(),s=kF(t);return s==null?null:M.createElement(pu,HN({},s,{className:nr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(o){return po(o,!0)}}))}var Hn=(function(e){function t(){return Mie(this,t),$ie(this,t,arguments)}return Uie(t,e),Fie(t,[{key:"render",value:function(){return M.createElement(qie,this.props)}}])})(M.Component);LF(Hn,"displayName","XAxis");LF(Hn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Yd(e){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yd(e)}function zie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wie(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,qF(a.key),a)}}function Kie(e,t,r){return t&&Wie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vie(e,t,r){return t=zp(t),Gie(e,UF()?Reflect.construct(t,r||[],zp(e).constructor):t.apply(e,r))}function Gie(e,t){if(t&&(Yd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yie(e)}function Yie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UF=function(){return!!e})()}function zp(e){return zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zp(e)}function Xie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qN(e,t)}function qN(e,t){return qN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},qN(e,t)}function HF(e,t,r){return t=qF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qF(e){var t=Jie(e,"string");return Yd(t)=="symbol"?t:t+""}function Jie(e,t){if(Yd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Yd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function zN(){return zN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},zN.apply(this,arguments)}var Qie=function(t){var r=t.yAxisId,a=kk(),s=Sk(),i=SF(r);return i==null?null:M.createElement(pu,zN({},i,{className:nr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(l){return po(l,!0)}}))},Tn=(function(e){function t(){return zie(this,t),Vie(this,t,arguments)}return Xie(t,e),Kie(t,[{key:"render",value:function(){return M.createElement(Qie,this.props)}}])})(M.Component);HF(Tn,"displayName","YAxis");HF(Tn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Z6(e){return roe(e)||toe(e)||eoe(e)||Zie()}function Zie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eoe(e,t){if(e){if(typeof e=="string")return WN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WN(e,t)}}function toe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function roe(e){if(Array.isArray(e))return WN(e)}function WN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var KN=function(t,r,a,s,i){var o=Cs(t,Ek),l=Cs(t,Vg),d=[].concat(Z6(o),Z6(l)),u=Cs(t,Yg),f="".concat(s,"Id"),m=s[0],p=r;if(d.length&&(p=d.reduce(function(y,w){if(w.props[f]===a&&$i(w.props,"extendDomain")&&gt(w.props[m])){var k=w.props[m];return[Math.min(y[0],k),Math.max(y[1],k)]}return y},p)),u.length){var g="".concat(m,"1"),v="".concat(m,"2");p=u.reduce(function(y,w){if(w.props[f]===a&&$i(w.props,"extendDomain")&&gt(w.props[g])&&gt(w.props[v])){var k=w.props[g],N=w.props[v];return[Math.min(y[0],k,N),Math.max(y[1],k,N)]}return y},p)}return i&&i.length&&(p=i.reduce(function(y,w){return gt(w)?[Math.min(y[0],w),Math.max(y[1],w)]:y},p)),p},z1={exports:{}},eP;function noe(){return eP||(eP=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(d,u,f){this.fn=d,this.context=u,this.once=f||!1}function i(d,u,f,m,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new s(f,m||d,p),v=r?r+u:u;return d._events[v]?d._events[v].fn?d._events[v]=[d._events[v],g]:d._events[v].push(g):(d._events[v]=g,d._eventsCount++),d}function o(d,u){--d._eventsCount===0?d._events=new a:delete d._events[u]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,m;if(this._eventsCount===0)return u;for(m in f=this._events)t.call(f,m)&&u.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=r?r+u:u,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var p=0,g=m.length,v=new Array(g);p<g;p++)v[p]=m[p].fn;return v},l.prototype.listenerCount=function(u){var f=r?r+u:u,m=this._events[f];return m?m.fn?1:m.length:0},l.prototype.emit=function(u,f,m,p,g,v){var y=r?r+u:u;if(!this._events[y])return!1;var w=this._events[y],k=arguments.length,N,b;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),k){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,m),!0;case 4:return w.fn.call(w.context,f,m,p),!0;case 5:return w.fn.call(w.context,f,m,p,g),!0;case 6:return w.fn.call(w.context,f,m,p,g,v),!0}for(b=1,N=new Array(k-1);b<k;b++)N[b-1]=arguments[b];w.fn.apply(w.context,N)}else{var A=w.length,E;for(b=0;b<A;b++)switch(w[b].once&&this.removeListener(u,w[b].fn,void 0,!0),k){case 1:w[b].fn.call(w[b].context);break;case 2:w[b].fn.call(w[b].context,f);break;case 3:w[b].fn.call(w[b].context,f,m);break;case 4:w[b].fn.call(w[b].context,f,m,p);break;default:if(!N)for(E=1,N=new Array(k-1);E<k;E++)N[E-1]=arguments[E];w[b].fn.apply(w[b].context,N)}}return!0},l.prototype.on=function(u,f,m){return i(this,u,f,m,!1)},l.prototype.once=function(u,f,m){return i(this,u,f,m,!0)},l.prototype.removeListener=function(u,f,m,p){var g=r?r+u:u;if(!this._events[g])return this;if(!f)return o(this,g),this;var v=this._events[g];if(v.fn)v.fn===f&&(!p||v.once)&&(!m||v.context===m)&&o(this,g);else{for(var y=0,w=[],k=v.length;y<k;y++)(v[y].fn!==f||p&&!v[y].once||m&&v[y].context!==m)&&w.push(v[y]);w.length?this._events[g]=w.length===1?w[0]:w:o(this,g)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(z1)),z1.exports}var aoe=noe();const soe=qr(aoe);var W1=new soe,K1="recharts.syncMouseEvents";function Cf(e){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cf(e)}function ioe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ooe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,zF(a.key),a)}}function loe(e,t,r){return t&&ooe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function V1(e,t,r){return t=zF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zF(e){var t=coe(e,"string");return Cf(t)=="symbol"?t:t+""}function coe(e,t){if(Cf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Cf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var doe=(function(){function e(){ioe(this,e),V1(this,"activeIndex",0),V1(this,"coordinateList",[]),V1(this,"layout","horizontal")}return loe(e,[{key:"setDetails",value:function(r){var a,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,d=r.layout,u=d===void 0?null:d,f=r.offset,m=f===void 0?null:f,p=r.mouseHandlerCallback,g=p===void 0?null:p;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,d=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((a=window)===null||a===void 0?void 0:a.scrollY)||0,m=i+d+u,p=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:m,pageY:p})}}}])})();function uoe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var a=e?.[0],s=e?.[1];if(a&&s&&gt(a)&&gt(s))return!0}return!1}function hoe(e,t,r,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function WF(e){var t=e.cx,r=e.cy,a=e.radius,s=e.startAngle,i=e.endAngle,o=$r(t,r,a,s),l=$r(t,r,a,i);return{points:[o,l],cx:t,cy:r,radius:a,startAngle:s,endAngle:i}}function foe(e,t,r){var a,s,i,o;if(e==="horizontal")a=t.x,i=a,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,d=t.cy,u=t.innerRadius,f=t.outerRadius,m=t.angle,p=$r(l,d,u,m),g=$r(l,d,f,m);a=p.x,s=p.y,i=g.x,o=g.y}else return WF(t);return[{x:a,y:s},{x:i,y:o}]}function Af(e){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Af(e)}function tP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function jm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tP(Object(r),!0).forEach(function(a){moe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function moe(e,t,r){return t=poe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function poe(e){var t=goe(e,"string");return Af(t)=="symbol"?t:t+""}function goe(e,t){if(Af(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Af(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xoe(e){var t,r,a=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,d=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,m=e.layout,p=e.chartName,g=(t=a.props.cursor)!==null&&t!==void 0?t:(r=a.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!a||!g||!i||!o||p!=="ScatterChart"&&s!=="axis")return null;var v,y=vp;if(p==="ScatterChart")v=o,y=mre;else if(p==="BarChart")v=hoe(m,o,d,f),y=bk;else if(m==="radial"){var w=WF(o),k=w.cx,N=w.cy,b=w.radius,A=w.startAngle,E=w.endAngle;v={cx:k,cy:N,startAngle:A,endAngle:E,innerRadius:b,outerRadius:b},y=HR}else v={points:foe(m,o,d)},y=vp;var S=jm(jm(jm(jm({stroke:"#ccc",pointerEvents:"none"},d),v),Rt(g,!1)),{},{payload:l,payloadIndex:u,className:nr("recharts-tooltip-cursor",g.className)});return M.isValidElement(g)?M.cloneElement(g,S):M.createElement(y,S)}var yoe=["item"],voe=["children","className","width","height","style","compact","title","desc"];function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function gd(){return gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},gd.apply(this,arguments)}function rP(e,t){return joe(e)||woe(e,t)||VF(e,t)||boe()}function boe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function woe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function joe(e){if(Array.isArray(e))return e}function nP(e,t){if(e==null)return{};var r=Noe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Noe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function koe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Soe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,GF(a.key),a)}}function _oe(e,t,r){return t&&Soe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Eoe(e,t,r){return t=Wp(t),Coe(e,KF()?Reflect.construct(t,r||[],Wp(e).constructor):t.apply(e,r))}function Coe(e,t){if(t&&(Xd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Aoe(e)}function Aoe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KF=function(){return!!e})()}function Wp(e){return Wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wp(e)}function Toe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VN(e,t)}function VN(e,t){return VN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},VN(e,t)}function Jd(e){return Ioe(e)||Poe(e)||VF(e)||Ooe()}function Ooe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VF(e,t){if(e){if(typeof e=="string")return GN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GN(e,t)}}function Poe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ioe(e){if(Array.isArray(e))return GN(e)}function GN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function aP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aP(Object(r),!0).forEach(function(a){Yt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Yt(e,t,r){return t=GF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GF(e){var t=Doe(e,"string");return Xd(t)=="symbol"?t:t+""}function Doe(e,t){if(Xd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Xd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Moe={xAxis:["bottom","top"],yAxis:["left","right"]},Roe={width:"100%",height:"100%"},YF={x:0,y:0};function Nm(e){return e}var Foe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},$oe=function(t,r,a,s){var i=r.find(function(f){return f&&f.index===a});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return Je(Je(Je({},s),$r(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var d=i.coordinate,u=s.angle;return Je(Je(Je({},s),$r(s.cx,s.cy,d,u)),{},{angle:u,radius:d})}return YF},Xg=function(t,r){var a=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(a??[]).reduce(function(l,d){var u=d.props.data;return u&&u.length?[].concat(Jd(l),Jd(u)):l},[]);return o.length>0?o:t&&t.length&&gt(s)&&gt(i)?t.slice(s,i+1):[]};function XF(e){return e==="number"?[0,"auto"]:void 0}var YN=function(t,r,a,s){var i=t.graphicalItems,o=t.tooltipAxis,l=Xg(r,t);return a<0||!i||!i.length||a>=l.length?null:i.reduce(function(d,u){var f,m=(f=u.props.data)!==null&&f!==void 0?f:r;m&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(m=m.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var g=m===void 0?l:m;p=zm(g,o.dataKey,s)}else p=m&&m[a]||l[a];return p?[].concat(Jd(d),[DR(u,p)]):d},[])},sP=function(t,r,a,s){var i=s||{x:t.chartX,y:t.chartY},o=Foe(i,a),l=t.orderedTooltipTicks,d=t.tooltipAxis,u=t.tooltipTicks,f=$Q(o,l,u,d);if(f>=0&&u){var m=u[f]&&u[f].value,p=YN(t,r,f,m),g=$oe(a,l,f,i);return{activeTooltipIndex:f,activeLabel:m,activePayload:p,activeCoordinate:g}}return null},Loe=function(t,r){var a=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,m=t.children,p=t.stackOffset,g=CR(f,i);return a.reduce(function(v,y){var w,k=y.type.defaultProps!==void 0?Je(Je({},y.type.defaultProps),y.props):y.props,N=k.type,b=k.dataKey,A=k.allowDataOverflow,E=k.allowDuplicatedCategory,S=k.scale,_=k.ticks,C=k.includeHidden,P=k[o];if(v[P])return v;var B=Xg(t.data,{graphicalItems:s.filter(function(I){var Z,te=o in I.props?I.props[o]:(Z=I.type.defaultProps)===null||Z===void 0?void 0:Z[o];return te===P}),dataStartIndex:d,dataEndIndex:u}),F=B.length,O,R,Q;uoe(k.domain,A,N)&&(O=lN(k.domain,null,A),g&&(N==="number"||S!=="auto")&&(Q=jh(B,b,"category")));var V=XF(N);if(!O||O.length===0){var J,ae=(J=k.domain)!==null&&J!==void 0?J:V;if(b){if(O=jh(B,b,N),N==="category"&&g){var L=Oz(O);E&&L?(R=O,O=Pp(0,F)):E||(O=rO(ae,O,y).reduce(function(I,Z){return I.indexOf(Z)>=0?I:[].concat(Jd(I),[Z])},[]))}else if(N==="category")E?O=O.filter(function(I){return I!==""&&!sr(I)}):O=rO(ae,O,y).reduce(function(I,Z){return I.indexOf(Z)>=0||Z===""||sr(Z)?I:[].concat(Jd(I),[Z])},[]);else if(N==="number"){var H=qQ(B,s.filter(function(I){var Z,te,se=o in I.props?I.props[o]:(Z=I.type.defaultProps)===null||Z===void 0?void 0:Z[o],be="hide"in I.props?I.props.hide:(te=I.type.defaultProps)===null||te===void 0?void 0:te.hide;return se===P&&(C||!be)}),b,i,f);H&&(O=H)}g&&(N==="number"||S!=="auto")&&(Q=jh(B,b,"category"))}else g?O=Pp(0,F):l&&l[P]&&l[P].hasStack&&N==="number"?O=p==="expand"?[0,1]:IR(l[P].stackGroups,d,u):O=ER(B,s.filter(function(I){var Z=o in I.props?I.props[o]:I.type.defaultProps[o],te="hide"in I.props?I.props.hide:I.type.defaultProps.hide;return Z===P&&(C||!te)}),N,f,!0);if(N==="number")O=KN(m,O,P,i,_),ae&&(O=lN(ae,O,A));else if(N==="category"&&ae){var ce=ae,z=O.every(function(I){return ce.indexOf(I)>=0});z&&(O=ce)}}return Je(Je({},v),{},Yt({},P,Je(Je({},k),{},{axisType:i,domain:O,categoricalDomain:Q,duplicateDomain:R,originalDomain:(w=k.domain)!==null&&w!==void 0?w:V,isCategorical:g,layout:f})))},{})},Boe=function(t,r){var a=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,m=t.children,p=Xg(t.data,{graphicalItems:a,dataStartIndex:d,dataEndIndex:u}),g=p.length,v=CR(f,i),y=-1;return a.reduce(function(w,k){var N=k.type.defaultProps!==void 0?Je(Je({},k.type.defaultProps),k.props):k.props,b=N[o],A=XF("number");if(!w[b]){y++;var E;return v?E=Pp(0,g):l&&l[b]&&l[b].hasStack?(E=IR(l[b].stackGroups,d,u),E=KN(m,E,b,i)):(E=lN(A,ER(p,a.filter(function(S){var _,C,P=o in S.props?S.props[o]:(_=S.type.defaultProps)===null||_===void 0?void 0:_[o],B="hide"in S.props?S.props.hide:(C=S.type.defaultProps)===null||C===void 0?void 0:C.hide;return P===b&&!B}),"number",f),s.defaultProps.allowDataOverflow),E=KN(m,E,b,i)),Je(Je({},w),{},Yt({},b,Je(Je({axisType:i},s.defaultProps),{},{hide:!0,orientation:Es(Moe,"".concat(i,".").concat(y%2),null),domain:E,originalDomain:A,isCategorical:v,layout:f})))}return w},{})},Uoe=function(t,r){var a=r.axisType,s=a===void 0?"xAxis":a,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,f=t.children,m="".concat(s,"Id"),p=Cs(f,i),g={};return p&&p.length?g=Loe(t,{axes:p,graphicalItems:o,axisType:s,axisIdKey:m,stackGroups:l,dataStartIndex:d,dataEndIndex:u}):o&&o.length&&(g=Boe(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:m,stackGroups:l,dataStartIndex:d,dataEndIndex:u})),g},Hoe=function(t){var r=Qo(t),a=po(r,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:V2(a,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:gp(r,a)}},iP=function(t){var r=t.children,a=t.defaultShowTooltip,s=bs(r,Ud),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},qoe=function(t){return!t||!t.length?!1:t.some(function(r){var a=yo(r&&r.type);return a&&a.indexOf("Bar")>=0})},oP=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},zoe=function(t,r){var a=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,d=l===void 0?{}:l,u=a.width,f=a.height,m=a.children,p=a.margin||{},g=bs(m,Ud),v=bs(m,ka),y=Object.keys(d).reduce(function(E,S){var _=d[S],C=_.orientation;return!_.mirror&&!_.hide?Je(Je({},E),{},Yt({},C,E[C]+_.width)):E},{left:p.left||0,right:p.right||0}),w=Object.keys(o).reduce(function(E,S){var _=o[S],C=_.orientation;return!_.mirror&&!_.hide?Je(Je({},E),{},Yt({},C,Es(E,"".concat(C))+_.height)):E},{top:p.top||0,bottom:p.bottom||0}),k=Je(Je({},w),y),N=k.bottom;g&&(k.bottom+=g.props.height||Ud.defaultProps.height),v&&r&&(k=UQ(k,s,a,r));var b=u-k.left-k.right,A=f-k.top-k.bottom;return Je(Je({brushBottom:N},k),{},{width:Math.max(b,0),height:Math.max(A,0)})},Woe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Jg=function(t){var r=t.chartName,a=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,d=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,m=t.defaultProps,p=function(k,N){var b=N.graphicalItems,A=N.stackGroups,E=N.offset,S=N.updateId,_=N.dataStartIndex,C=N.dataEndIndex,P=k.barSize,B=k.layout,F=k.barGap,O=k.barCategoryGap,R=k.maxBarSize,Q=oP(B),V=Q.numericAxisName,J=Q.cateAxisName,ae=qoe(b),L=[];return b.forEach(function(H,ce){var z=Xg(k.data,{graphicalItems:[H],dataStartIndex:_,dataEndIndex:C}),I=H.type.defaultProps!==void 0?Je(Je({},H.type.defaultProps),H.props):H.props,Z=I.dataKey,te=I.maxBarSize,se=I["".concat(V,"Id")],be=I["".concat(J,"Id")],Ee={},_e=d.reduce(function(ct,Wt){var Ut=N["".concat(Wt.axisType,"Map")],Vt=I["".concat(Wt.axisType,"Id")];Ut&&Ut[Vt]||Wt.axisType==="zAxis"||cc();var Ar=Ut[Vt];return Je(Je({},ct),{},Yt(Yt({},Wt.axisType,Ar),"".concat(Wt.axisType,"Ticks"),po(Ar)))},Ee),me=_e[J],ye=_e["".concat(J,"Ticks")],qe=A&&A[se]&&A[se].hasStack&&QQ(H,A[se].stackGroups),G=yo(H.type).indexOf("Bar")>=0,He=gp(me,ye),Ke=[],ut=ae&&LQ({barSize:P,stackGroups:A,totalSize:Woe(_e,J)});if(G){var ze,Pe,ke=sr(te)?R:te,Xe=(ze=(Pe=gp(me,ye,!0))!==null&&Pe!==void 0?Pe:ke)!==null&&ze!==void 0?ze:0;Ke=BQ({barGap:F,barCategoryGap:O,bandSize:Xe!==He?Xe:He,sizeList:ut[be],maxBarSize:ke}),Xe!==He&&(Ke=Ke.map(function(ct){return Je(Je({},ct),{},{position:Je(Je({},ct.position),{},{offset:ct.position.offset-Xe/2})})}))}var We=H&&H.type&&H.type.getComposedData;We&&L.push({props:Je(Je({},We(Je(Je({},_e),{},{displayedData:z,props:k,dataKey:Z,item:H,bandSize:He,barPosition:Ke,offset:E,stackedData:qe,layout:B,dataStartIndex:_,dataEndIndex:C}))),{},Yt(Yt(Yt({key:H.key||"item-".concat(ce)},V,_e[V]),J,_e[J]),"animationId",S)),childIndex:zz(H,k.children),item:H})}),L},g=function(k,N){var b=k.props,A=k.dataStartIndex,E=k.dataEndIndex,S=k.updateId;if(!gA({props:b}))return null;var _=b.children,C=b.layout,P=b.stackOffset,B=b.data,F=b.reverseStackOrder,O=oP(C),R=O.numericAxisName,Q=O.cateAxisName,V=Cs(_,a),J=XQ(B,V,"".concat(R,"Id"),"".concat(Q,"Id"),P,F),ae=d.reduce(function(I,Z){var te="".concat(Z.axisType,"Map");return Je(Je({},I),{},Yt({},te,Uoe(b,Je(Je({},Z),{},{graphicalItems:V,stackGroups:Z.axisType===R&&J,dataStartIndex:A,dataEndIndex:E}))))},{}),L=zoe(Je(Je({},ae),{},{props:b,graphicalItems:V}),N?.legendBBox);Object.keys(ae).forEach(function(I){ae[I]=f(b,ae[I],L,I.replace("Map",""),r)});var H=ae["".concat(Q,"Map")],ce=Hoe(H),z=p(b,Je(Je({},ae),{},{dataStartIndex:A,dataEndIndex:E,updateId:S,graphicalItems:V,stackGroups:J,offset:L}));return Je(Je({formattedGraphicalItems:z,graphicalItems:V,offset:L,stackGroups:J},ce),ae)},v=(function(w){function k(N){var b,A,E;return koe(this,k),E=Eoe(this,k,[N]),Yt(E,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Yt(E,"accessibilityManager",new doe),Yt(E,"handleLegendBBoxUpdate",function(S){if(S){var _=E.state,C=_.dataStartIndex,P=_.dataEndIndex,B=_.updateId;E.setState(Je({legendBBox:S},g({props:E.props,dataStartIndex:C,dataEndIndex:P,updateId:B},Je(Je({},E.state),{},{legendBBox:S}))))}}),Yt(E,"handleReceiveSyncEvent",function(S,_,C){if(E.props.syncId===S){if(C===E.eventEmitterSymbol&&typeof E.props.syncMethod!="function")return;E.applySyncEvent(_)}}),Yt(E,"handleBrushChange",function(S){var _=S.startIndex,C=S.endIndex;if(_!==E.state.dataStartIndex||C!==E.state.dataEndIndex){var P=E.state.updateId;E.setState(function(){return Je({dataStartIndex:_,dataEndIndex:C},g({props:E.props,dataStartIndex:_,dataEndIndex:C,updateId:P},E.state))}),E.triggerSyncEvent({dataStartIndex:_,dataEndIndex:C})}}),Yt(E,"handleMouseEnter",function(S){var _=E.getMouseInfo(S);if(_){var C=Je(Je({},_),{},{isTooltipActive:!0});E.setState(C),E.triggerSyncEvent(C);var P=E.props.onMouseEnter;Kt(P)&&P(C,S)}}),Yt(E,"triggeredAfterMouseMove",function(S){var _=E.getMouseInfo(S),C=_?Je(Je({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};E.setState(C),E.triggerSyncEvent(C);var P=E.props.onMouseMove;Kt(P)&&P(C,S)}),Yt(E,"handleItemMouseEnter",function(S){E.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Yt(E,"handleItemMouseLeave",function(){E.setState(function(){return{isTooltipActive:!1}})}),Yt(E,"handleMouseMove",function(S){S.persist(),E.throttleTriggeredAfterMouseMove(S)}),Yt(E,"handleMouseLeave",function(S){E.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};E.setState(_),E.triggerSyncEvent(_);var C=E.props.onMouseLeave;Kt(C)&&C(_,S)}),Yt(E,"handleOuterEvent",function(S){var _=qz(S),C=Es(E.props,"".concat(_));if(_&&Kt(C)){var P,B;/.*touch.*/i.test(_)?B=E.getMouseInfo(S.changedTouches[0]):B=E.getMouseInfo(S),C((P=B)!==null&&P!==void 0?P:{},S)}}),Yt(E,"handleClick",function(S){var _=E.getMouseInfo(S);if(_){var C=Je(Je({},_),{},{isTooltipActive:!0});E.setState(C),E.triggerSyncEvent(C);var P=E.props.onClick;Kt(P)&&P(C,S)}}),Yt(E,"handleMouseDown",function(S){var _=E.props.onMouseDown;if(Kt(_)){var C=E.getMouseInfo(S);_(C,S)}}),Yt(E,"handleMouseUp",function(S){var _=E.props.onMouseUp;if(Kt(_)){var C=E.getMouseInfo(S);_(C,S)}}),Yt(E,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&E.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Yt(E,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&E.handleMouseDown(S.changedTouches[0])}),Yt(E,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&E.handleMouseUp(S.changedTouches[0])}),Yt(E,"handleDoubleClick",function(S){var _=E.props.onDoubleClick;if(Kt(_)){var C=E.getMouseInfo(S);_(C,S)}}),Yt(E,"handleContextMenu",function(S){var _=E.props.onContextMenu;if(Kt(_)){var C=E.getMouseInfo(S);_(C,S)}}),Yt(E,"triggerSyncEvent",function(S){E.props.syncId!==void 0&&W1.emit(K1,E.props.syncId,S,E.eventEmitterSymbol)}),Yt(E,"applySyncEvent",function(S){var _=E.props,C=_.layout,P=_.syncMethod,B=E.state.updateId,F=S.dataStartIndex,O=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)E.setState(Je({dataStartIndex:F,dataEndIndex:O},g({props:E.props,dataStartIndex:F,dataEndIndex:O,updateId:B},E.state)));else if(S.activeTooltipIndex!==void 0){var R=S.chartX,Q=S.chartY,V=S.activeTooltipIndex,J=E.state,ae=J.offset,L=J.tooltipTicks;if(!ae)return;if(typeof P=="function")V=P(L,S);else if(P==="value"){V=-1;for(var H=0;H<L.length;H++)if(L[H].value===S.activeLabel){V=H;break}}var ce=Je(Je({},ae),{},{x:ae.left,y:ae.top}),z=Math.min(R,ce.x+ce.width),I=Math.min(Q,ce.y+ce.height),Z=L[V]&&L[V].value,te=YN(E.state,E.props.data,V),se=L[V]?{x:C==="horizontal"?L[V].coordinate:z,y:C==="horizontal"?I:L[V].coordinate}:YF;E.setState(Je(Je({},S),{},{activeLabel:Z,activeCoordinate:se,activePayload:te,activeTooltipIndex:V}))}else E.setState(S)}),Yt(E,"renderCursor",function(S){var _,C=E.state,P=C.isTooltipActive,B=C.activeCoordinate,F=C.activePayload,O=C.offset,R=C.activeTooltipIndex,Q=C.tooltipAxisBandSize,V=E.getTooltipEventType(),J=(_=S.props.active)!==null&&_!==void 0?_:P,ae=E.props.layout,L=S.key||"_recharts-cursor";return xe.createElement(xoe,{key:L,activeCoordinate:B,activePayload:F,activeTooltipIndex:R,chartName:r,element:S,isActive:J,layout:ae,offset:O,tooltipAxisBandSize:Q,tooltipEventType:V})}),Yt(E,"renderPolarAxis",function(S,_,C){var P=Es(S,"type.axisType"),B=Es(E.state,"".concat(P,"Map")),F=S.type.defaultProps,O=F!==void 0?Je(Je({},F),S.props):S.props,R=B&&B[O["".concat(P,"Id")]];return M.cloneElement(S,Je(Je({},R),{},{className:nr(P,R.className),key:S.key||"".concat(_,"-").concat(C),ticks:po(R,!0)}))}),Yt(E,"renderPolarGrid",function(S){var _=S.props,C=_.radialLines,P=_.polarAngles,B=_.polarRadius,F=E.state,O=F.radiusAxisMap,R=F.angleAxisMap,Q=Qo(O),V=Qo(R),J=V.cx,ae=V.cy,L=V.innerRadius,H=V.outerRadius;return M.cloneElement(S,{polarAngles:Array.isArray(P)?P:po(V,!0).map(function(ce){return ce.coordinate}),polarRadius:Array.isArray(B)?B:po(Q,!0).map(function(ce){return ce.coordinate}),cx:J,cy:ae,innerRadius:L,outerRadius:H,key:S.key||"polar-grid",radialLines:C})}),Yt(E,"renderLegend",function(){var S=E.state.formattedGraphicalItems,_=E.props,C=_.children,P=_.width,B=_.height,F=E.props.margin||{},O=P-(F.left||0)-(F.right||0),R=SR({children:C,formattedGraphicalItems:S,legendWidth:O,legendContent:u});if(!R)return null;var Q=R.item,V=nP(R,yoe);return M.cloneElement(Q,Je(Je({},V),{},{chartWidth:P,chartHeight:B,margin:F,onBBoxUpdate:E.handleLegendBBoxUpdate}))}),Yt(E,"renderTooltip",function(){var S,_=E.props,C=_.children,P=_.accessibilityLayer,B=bs(C,Gr);if(!B)return null;var F=E.state,O=F.isTooltipActive,R=F.activeCoordinate,Q=F.activePayload,V=F.activeLabel,J=F.offset,ae=(S=B.props.active)!==null&&S!==void 0?S:O;return M.cloneElement(B,{viewBox:Je(Je({},J),{},{x:J.left,y:J.top}),active:ae,label:V,payload:ae?Q:[],coordinate:R,accessibilityLayer:P})}),Yt(E,"renderBrush",function(S){var _=E.props,C=_.margin,P=_.data,B=E.state,F=B.offset,O=B.dataStartIndex,R=B.dataEndIndex,Q=B.updateId;return M.cloneElement(S,{key:S.key||"_recharts-brush",onChange:ym(E.handleBrushChange,S.props.onChange),data:P,x:gt(S.props.x)?S.props.x:F.left,y:gt(S.props.y)?S.props.y:F.top+F.height+F.brushBottom-(C.bottom||0),width:gt(S.props.width)?S.props.width:F.width,startIndex:O,endIndex:R,updateId:"brush-".concat(Q)})}),Yt(E,"renderReferenceElement",function(S,_,C){if(!S)return null;var P=E,B=P.clipPathId,F=E.state,O=F.xAxisMap,R=F.yAxisMap,Q=F.offset,V=S.type.defaultProps||{},J=S.props,ae=J.xAxisId,L=ae===void 0?V.xAxisId:ae,H=J.yAxisId,ce=H===void 0?V.yAxisId:H;return M.cloneElement(S,{key:S.key||"".concat(_,"-").concat(C),xAxis:O[L],yAxis:R[ce],viewBox:{x:Q.left,y:Q.top,width:Q.width,height:Q.height},clipPathId:B})}),Yt(E,"renderActivePoints",function(S){var _=S.item,C=S.activePoint,P=S.basePoint,B=S.childIndex,F=S.isRange,O=[],R=_.props.key,Q=_.item.type.defaultProps!==void 0?Je(Je({},_.item.type.defaultProps),_.item.props):_.item.props,V=Q.activeDot,J=Q.dataKey,ae=Je(Je({index:B,dataKey:J,cx:C.x,cy:C.y,r:4,fill:vk(_.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},Rt(V,!1)),Wm(V));return O.push(k.renderActiveDot(V,ae,"".concat(R,"-activePoint-").concat(B))),P?O.push(k.renderActiveDot(V,Je(Je({},ae),{},{cx:P.x,cy:P.y}),"".concat(R,"-basePoint-").concat(B))):F&&O.push(null),O}),Yt(E,"renderGraphicChild",function(S,_,C){var P=E.filterFormatItem(S,_,C);if(!P)return null;var B=E.getTooltipEventType(),F=E.state,O=F.isTooltipActive,R=F.tooltipAxis,Q=F.activeTooltipIndex,V=F.activeLabel,J=E.props.children,ae=bs(J,Gr),L=P.props,H=L.points,ce=L.isRange,z=L.baseLine,I=P.item.type.defaultProps!==void 0?Je(Je({},P.item.type.defaultProps),P.item.props):P.item.props,Z=I.activeDot,te=I.hide,se=I.activeBar,be=I.activeShape,Ee=!!(!te&&O&&ae&&(Z||se||be)),_e={};B!=="axis"&&ae&&ae.props.trigger==="click"?_e={onClick:ym(E.handleItemMouseEnter,S.props.onClick)}:B!=="axis"&&(_e={onMouseLeave:ym(E.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:ym(E.handleItemMouseEnter,S.props.onMouseEnter)});var me=M.cloneElement(S,Je(Je({},P.props),_e));function ye(Wt){return typeof R.dataKey=="function"?R.dataKey(Wt.payload):null}if(Ee)if(Q>=0){var qe,G;if(R.dataKey&&!R.allowDuplicatedCategory){var He=typeof R.dataKey=="function"?ye:"payload.".concat(R.dataKey.toString());qe=zm(H,He,V),G=ce&&z&&zm(z,He,V)}else qe=H?.[Q],G=ce&&z&&z[Q];if(be||se){var Ke=S.props.activeIndex!==void 0?S.props.activeIndex:Q;return[M.cloneElement(S,Je(Je(Je({},P.props),_e),{},{activeIndex:Ke})),null,null]}if(!sr(qe))return[me].concat(Jd(E.renderActivePoints({item:P,activePoint:qe,basePoint:G,childIndex:Q,isRange:ce})))}else{var ut,ze=(ut=E.getItemByXY(E.state.activeCoordinate))!==null&&ut!==void 0?ut:{graphicalItem:me},Pe=ze.graphicalItem,ke=Pe.item,Xe=ke===void 0?S:ke,We=Pe.childIndex,ct=Je(Je(Je({},P.props),_e),{},{activeIndex:We});return[M.cloneElement(Xe,ct),null,null]}return ce?[me,null,null]:[me,null]}),Yt(E,"renderCustomized",function(S,_,C){return M.cloneElement(S,Je(Je({key:"recharts-customized-".concat(C)},E.props),E.state))}),Yt(E,"renderMap",{CartesianGrid:{handler:Nm,once:!0},ReferenceArea:{handler:E.renderReferenceElement},ReferenceLine:{handler:Nm},ReferenceDot:{handler:E.renderReferenceElement},XAxis:{handler:Nm},YAxis:{handler:Nm},Brush:{handler:E.renderBrush,once:!0},Bar:{handler:E.renderGraphicChild},Line:{handler:E.renderGraphicChild},Area:{handler:E.renderGraphicChild},Radar:{handler:E.renderGraphicChild},RadialBar:{handler:E.renderGraphicChild},Scatter:{handler:E.renderGraphicChild},Pie:{handler:E.renderGraphicChild},Funnel:{handler:E.renderGraphicChild},Tooltip:{handler:E.renderCursor,once:!0},PolarGrid:{handler:E.renderPolarGrid,once:!0},PolarAngleAxis:{handler:E.renderPolarAxis},PolarRadiusAxis:{handler:E.renderPolarAxis},Customized:{handler:E.renderCustomized}}),E.clipPathId="".concat((b=N.id)!==null&&b!==void 0?b:ou("recharts"),"-clip"),E.throttleTriggeredAfterMouseMove=SM(E.triggeredAfterMouseMove,(A=N.throttleDelay)!==null&&A!==void 0?A:1e3/60),E.state={},E}return Toe(k,w),_oe(k,[{key:"componentDidMount",value:function(){var b,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,A=b.children,E=b.data,S=b.height,_=b.layout,C=bs(A,Gr);if(C){var P=C.props.defaultIndex;if(!(typeof P!="number"||P<0||P>this.state.tooltipTicks.length-1)){var B=this.state.tooltipTicks[P]&&this.state.tooltipTicks[P].value,F=YN(this.state,E,P,B),O=this.state.tooltipTicks[P].coordinate,R=(this.state.offset.top+S)/2,Q=_==="horizontal",V=Q?{x:O,y:R}:{y:O,x:R},J=this.state.formattedGraphicalItems.find(function(L){var H=L.item;return H.type.name==="Scatter"});J&&(V=Je(Je({},V),J.props.points[P].tooltipPosition),F=J.props.points[P].tooltipPayload);var ae={activeTooltipIndex:P,isTooltipActive:!0,activeLabel:B,activePayload:F,activeCoordinate:V};this.setState(ae),this.renderCursor(C),this.accessibilityManager.setIndex(P)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var E,S;this.accessibilityManager.setDetails({offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(b){Tj([bs(b.children,Gr)],[bs(this.props.children,Gr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=bs(this.props.children,Gr);if(b&&typeof b.props.shared=="boolean"){var A=b.props.shared?"axis":"item";return l.indexOf(A)>=0?A:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var A=this.container,E=A.getBoundingClientRect(),S=TG(E),_={chartX:Math.round(b.pageX-S.left),chartY:Math.round(b.pageY-S.top)},C=E.width/A.offsetWidth||1,P=this.inRange(_.chartX,_.chartY,C);if(!P)return null;var B=this.state,F=B.xAxisMap,O=B.yAxisMap,R=this.getTooltipEventType(),Q=sP(this.state,this.props.data,this.props.layout,P);if(R!=="axis"&&F&&O){var V=Qo(F).scale,J=Qo(O).scale,ae=V&&V.invert?V.invert(_.chartX):null,L=J&&J.invert?J.invert(_.chartY):null;return Je(Je({},_),{},{xValue:ae,yValue:L},Q)}return Q?Je(Je({},_),Q):null}},{key:"inRange",value:function(b,A){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,_=b/E,C=A/E;if(S==="horizontal"||S==="vertical"){var P=this.state.offset,B=_>=P.left&&_<=P.left+P.width&&C>=P.top&&C<=P.top+P.height;return B?{x:_,y:C}:null}var F=this.state,O=F.angleAxisMap,R=F.radiusAxisMap;if(O&&R){var Q=Qo(O);return sO({x:_,y:C},Q)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,A=this.getTooltipEventType(),E=bs(b,Gr),S={};E&&A==="axis"&&(E.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=Wm(this.props,this.handleOuterEvent);return Je(Je({},_),S)}},{key:"addListener",value:function(){W1.on(K1,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){W1.removeListener(K1,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,A,E){for(var S=this.state.formattedGraphicalItems,_=0,C=S.length;_<C;_++){var P=S[_];if(P.item===b||P.props.key===b.key||A===yo(P.item.type)&&E===P.childIndex)return P}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,A=this.state.offset,E=A.left,S=A.top,_=A.height,C=A.width;return xe.createElement("defs",null,xe.createElement("clipPath",{id:b},xe.createElement("rect",{x:E,y:S,height:_,width:C})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(A,E){var S=rP(E,2),_=S[0],C=S[1];return Je(Je({},A),{},Yt({},_,C.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(A,E){var S=rP(E,2),_=S[0],C=S[1];return Je(Je({},A),{},Yt({},_,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[b])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(b){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[b])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(b){var A=this.state,E=A.formattedGraphicalItems,S=A.activeItem;if(E&&E.length)for(var _=0,C=E.length;_<C;_++){var P=E[_],B=P.props,F=P.item,O=F.type.defaultProps!==void 0?Je(Je({},F.type.defaultProps),F.props):F.props,R=yo(F.type);if(R==="Bar"){var Q=(B.data||[]).find(function(L){return Yte(b,L)});if(Q)return{graphicalItem:P,payload:Q}}else if(R==="RadialBar"){var V=(B.data||[]).find(function(L){return sO(b,L)});if(V)return{graphicalItem:P,payload:V}}else if(qg(P,S)||zg(P,S)||Nf(P,S)){var J=Cne({graphicalItem:P,activeTooltipItem:S,itemData:O.data}),ae=O.activeIndex===void 0?J:O.activeIndex;return{graphicalItem:Je(Je({},P),{},{childIndex:ae}),payload:Nf(P,S)?O.data[J]:P.props.data[J]}}}return null}},{key:"render",value:function(){var b=this;if(!gA(this))return null;var A=this.props,E=A.children,S=A.className,_=A.width,C=A.height,P=A.style,B=A.compact,F=A.title,O=A.desc,R=nP(A,voe),Q=Rt(R,!1);if(B)return xe.createElement(F6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},xe.createElement(Pj,gd({},Q,{width:_,height:C,title:F,desc:O}),this.renderClipPath(),yA(E,this.renderMap)));if(this.props.accessibilityLayer){var V,J;Q.tabIndex=(V=this.props.tabIndex)!==null&&V!==void 0?V:0,Q.role=(J=this.props.role)!==null&&J!==void 0?J:"application",Q.onKeyDown=function(L){b.accessibilityManager.keyboardEvent(L)},Q.onFocus=function(){b.accessibilityManager.focus()}}var ae=this.parseEventsOfWrapper();return xe.createElement(F6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},xe.createElement("div",gd({className:nr("recharts-wrapper",S),style:Je({position:"relative",cursor:"default",width:_,height:C},P)},ae,{ref:function(H){b.container=H}}),xe.createElement(Pj,gd({},Q,{width:_,height:C,title:F,desc:O,style:Roe}),this.renderClipPath(),yA(E,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(M.Component);Yt(v,"displayName",r),Yt(v,"defaultProps",Je({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Yt(v,"getDerivedStateFromProps",function(w,k){var N=w.dataKey,b=w.data,A=w.children,E=w.width,S=w.height,_=w.layout,C=w.stackOffset,P=w.margin,B=k.dataStartIndex,F=k.dataEndIndex;if(k.updateId===void 0){var O=iP(w);return Je(Je(Je({},O),{},{updateId:0},g(Je(Je({props:w},O),{},{updateId:0}),k)),{},{prevDataKey:N,prevData:b,prevWidth:E,prevHeight:S,prevLayout:_,prevStackOffset:C,prevMargin:P,prevChildren:A})}if(N!==k.prevDataKey||b!==k.prevData||E!==k.prevWidth||S!==k.prevHeight||_!==k.prevLayout||C!==k.prevStackOffset||!bd(P,k.prevMargin)){var R=iP(w),Q={chartX:k.chartX,chartY:k.chartY,isTooltipActive:k.isTooltipActive},V=Je(Je({},sP(k,b,_)),{},{updateId:k.updateId+1}),J=Je(Je(Je({},R),Q),V);return Je(Je(Je({},J),g(Je({props:w},J),k)),{},{prevDataKey:N,prevData:b,prevWidth:E,prevHeight:S,prevLayout:_,prevStackOffset:C,prevMargin:P,prevChildren:A})}if(!Tj(A,k.prevChildren)){var ae,L,H,ce,z=bs(A,Ud),I=z&&(ae=(L=z.props)===null||L===void 0?void 0:L.startIndex)!==null&&ae!==void 0?ae:B,Z=z&&(H=(ce=z.props)===null||ce===void 0?void 0:ce.endIndex)!==null&&H!==void 0?H:F,te=I!==B||Z!==F,se=!sr(b),be=se&&!te?k.updateId:k.updateId+1;return Je(Je({updateId:be},g(Je(Je({props:w},k),{},{updateId:be,dataStartIndex:I,dataEndIndex:Z}),k)),{},{prevChildren:A,dataStartIndex:I,dataEndIndex:Z})}return null}),Yt(v,"renderActiveDot",function(w,k,N){var b;return M.isValidElement(w)?b=M.cloneElement(w,k):Kt(w)?b=w(k):b=xe.createElement(Jf,k),xe.createElement(Sr,{className:"recharts-active-dot",key:N},b)});var y=M.forwardRef(function(k,N){return xe.createElement(v,gd({},k,{ref:N}))});return y.displayName=v.displayName,y},Eh=Jg({chartName:"LineChart",GraphicalChild:wi,axisComponents:[{axisType:"xAxis",AxisComp:Hn},{axisType:"yAxis",AxisComp:Tn}],formatAxisMap:gF}),mi=Jg({chartName:"BarChart",GraphicalChild:wr,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Hn},{axisType:"yAxis",AxisComp:Tn}],formatAxisMap:gF}),JF=Jg({chartName:"PieChart",GraphicalChild:zi,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:mu},{axisType:"radiusAxis",AxisComp:fu}],formatAxisMap:FR,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Koe=Jg({chartName:"RadarChart",GraphicalChild:Zl,axisComponents:[{axisType:"angleAxis",AxisComp:mu},{axisType:"radiusAxis",AxisComp:fu}],formatAxisMap:FR,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const lP=["#3b82f6","#f59e0b","#10b981","#ef4444","#8b5cf6","#ec4899"];function Voe({context:e}){const t=M.useMemo(()=>{const l=new Map;return e.inventory.forEach(d=>{const u=l.get(d.date)||{inventory:0,overhead:0};l.set(d.date,{...u,inventory:u.inventory+d.totalCost})}),e.overheads.forEach(d=>{const u=l.get(d.date)||{inventory:0,overhead:0};l.set(d.date,{...u,overhead:u.overhead+d.amount})}),Array.from(l.entries()).map(([d,u])=>({date:ta(d),fullDate:d,inventory:u.inventory,overhead:u.overhead,total:u.inventory+u.overhead})).sort((d,u)=>d.fullDate.localeCompare(u.fullDate))},[e.inventory,e.overheads]),r=M.useMemo(()=>{const l=new Map;return e.inventory.forEach(d=>{const u=l.get(d.category)||0;l.set(d.category,u+d.totalCost)}),e.overheads.forEach(d=>{const u=l.get(d.category)||0;l.set(d.category,u+d.amount)}),Array.from(l.entries()).map(([d,u])=>({name:sg[d]||u2[d]||d,value:u})).sort((d,u)=>u.value-d.value)},[e.inventory,e.overheads]),a=M.useMemo(()=>{const l=new Map;return e.inventory.forEach(d=>{const u=l.get(d.itemName)||0;l.set(d.itemName,u+d.totalCost)}),Array.from(l.entries()).map(([d,u])=>({name:d,value:u})).sort((d,u)=>u.value-d.value).slice(0,10)},[e.inventory]),s=e.inventory.reduce((l,d)=>l+d.totalCost,0),i=e.overheads.reduce((l,d)=>l+d.amount,0),o=s+i;return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-gray-900",children:"Analytics Dashboard"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive view of spending patterns and trends"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(id,{className:"w-5 h-5"}),n.jsx("p",{className:"text-sm opacity-90",children:"Total Inventory Spend"})]}),n.jsxs("p",{className:"text-2xl",children:["",s.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(F9,{className:"w-5 h-5"}),n.jsx("p",{className:"text-sm opacity-90",children:"Total Overhead Spend"})]}),n.jsxs("p",{className:"text-2xl",children:["",i.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(hn,{className:"w-5 h-5"}),n.jsx("p",{className:"text-sm opacity-90",children:"Total Expenses"})]}),n.jsxs("p",{className:"text-2xl",children:["",o.toLocaleString()]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[n.jsx("h3",{className:"text-gray-900 mb-6",children:"Daily Spending Trends"}),n.jsx(Zn,{width:"100%",height:300,children:n.jsxs(Eh,{data:t,children:[n.jsx(ba,{strokeDasharray:"3 3"}),n.jsx(Hn,{dataKey:"date"}),n.jsx(Tn,{}),n.jsx(Gr,{formatter:l=>`${l.toLocaleString()}`}),n.jsx(ka,{}),n.jsx(wi,{type:"monotone",dataKey:"inventory",stroke:"#3b82f6",name:"Inventory",strokeWidth:2}),n.jsx(wi,{type:"monotone",dataKey:"overhead",stroke:"#f59e0b",name:"Overhead",strokeWidth:2}),n.jsx(wi,{type:"monotone",dataKey:"total",stroke:"#8b5cf6",name:"Total",strokeWidth:2})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h3",{className:"text-gray-900 mb-6",children:"Spending by Category"}),n.jsx(Zn,{width:"100%",height:300,children:n.jsxs(JF,{children:[n.jsx(zi,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:({name:l,percent:d})=>`${l} (${(d*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:r.map((l,d)=>n.jsx(ic,{fill:lP[d%lP.length]},`cell-${d}`))}),n.jsx(Gr,{formatter:l=>`${l.toLocaleString()}`})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h3",{className:"text-gray-900 mb-6",children:"Top Inventory Items"}),n.jsx(Zn,{width:"100%",height:300,children:n.jsxs(mi,{data:a,layout:"vertical",children:[n.jsx(ba,{strokeDasharray:"3 3"}),n.jsx(Hn,{type:"number"}),n.jsx(Tn,{dataKey:"name",type:"category",width:100}),n.jsx(Gr,{formatter:l=>`${l.toLocaleString()}`}),n.jsx(wr,{dataKey:"value",fill:"#3b82f6"})]})})]})]})]})}function Goe({selectedDate:e,accessToken:t,userEmail:r,userName:a,storeId:s,onCommissionSaved:i}){const[o,l]=M.useState(""),[d,u]=M.useState(""),[f,m]=M.useState(!1),[p,g]=M.useState(null),[v,y]=M.useState(!0),k=(()=>{const A=new Date(e);A.setMonth(A.getMonth()-1);const E=A.getFullYear(),S=String(A.getMonth()+1).padStart(2,"0");return`${E}-${S}`})(),N=new Date(k+"-01").toLocaleDateString("default",{month:"long",year:"numeric"});M.useEffect(()=>{(async()=>{try{y(!0);const S=(await ru(t)).find(_=>_.category==="commission"&&_.date?.startsWith(k)&&(s?_.storeId===s:!0));S&&(g(S),l(S.amount.toString()),u(S.description||""))}catch(E){console.error("Error loading commission:",E)}finally{y(!1)}})()},[e,k,t,s]);const b=async()=>{if(!o||parseFloat(o)<=0){alert("Please enter a valid commission amount");return}try{m(!0);const A={category:"commission",description:d||`Online food aggregator commission for ${N}`,amount:parseFloat(o),date:`${k}-01`,storeId:s||void 0,createdBy:r,createdByName:a,createdByEmail:r};p?(await(void 0)(t,p.id,A),alert(`Commission for ${N} updated successfully!`)):(await(void 0)(t,A),alert(`Commission for ${N} saved successfully!`)),i()}catch(A){console.error("Error saving commission:",A),alert("Failed to save commission. Please try again.")}finally{m(!1)}};return v?n.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-6 border-2 border-purple-200",children:n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("div",{className:"text-gray-600",children:"Loading..."})})}):n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-6 border-2 border-purple-200 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"bg-purple-500 rounded-full p-2",children:n.jsx(eB,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Commission Entry"}),n.jsxs("p",{className:"text-sm text-gray-600",children:[p?"Update":"Enter"," aggregator commission for ",N]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[n.jsxs("div",{className:"flex items-start gap-2 text-sm text-blue-700 bg-blue-50 rounded-lg p-3 mb-4",children:[n.jsx(xr,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium mb-1",children:"Monthly Commission Policy"}),n.jsxs("p",{className:"text-xs",children:["Enter the total commission charged by online food aggregators (Swiggy + Zomato) for ",n.jsx("strong",{children:N}),". This will be added to your expenses and reduce net profit accordingly."]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Commission Amount for ",N," () *"]}),n.jsxs("div",{className:"relative",children:[n.jsx(qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"number",step:"0.01",value:o,onChange:A=>l(A.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter total commission amount",disabled:f})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Typically 20-25% of your total online sales for the month"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),n.jsx("textarea",{value:d,onChange:A=>u(A.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Add any notes about this commission",rows:2,disabled:f})]})]})]}),n.jsx("button",{onClick:b,disabled:f||!o,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white py-3 px-6 rounded-lg font-medium flex items-center justify-center gap-2 transition-colors",children:f?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),n.jsx("span",{children:"Saving..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(zt,{className:"w-5 h-5"}),n.jsxs("span",{children:[p?"Update":"Save"," Commission"]})]})}),p&&n.jsxs("p",{className:"text-xs text-green-600 text-center mt-2 flex items-center justify-center gap-1",children:[n.jsx(zt,{className:"w-4 h-4"}),"Commission already recorded for ",N,". You can update it above."]})]})}function cP({context:e,selectedStoreId:t}){const[r,a]=M.useState(os()),[s,i]=M.useState({offlineSales:"",paytmAmount:"",cashAmount:"",onlineSales:"",employeeSalary:"",previousCashInHand:"",usedOnlineMoney:"",actualCashInHand:""}),[o,l]=M.useState(!1),[d,u]=M.useState(null),[f,m]=M.useState(!1),[p,g]=M.useState(!1),[v,y]=M.useState(!1),[w,k]=M.useState(null),[N,b]=M.useState(!1),A=e.user?.role==="cluster_head",E=e.user?.role==="manager",S=e.user?.designation==="store_incharge",_=e.user?.designation==="production_incharge",C=E&&!S&&!_,P=C,[B,F]=M.useState([]),[O,R]=M.useState([]),[Q,V]=M.useState(!1);M.useEffect(()=>{J()},[]),M.useEffect(()=>{const re=le=>{le.key==="Escape"&&p&&Ut()};if(p)return window.addEventListener("keydown",re),()=>window.removeEventListener("keydown",re)},[p]);const J=async()=>{V(!0);try{const le=(await cl()).filter(Oe=>Oe.type==="contract");F(le)}catch(re){console.error("Error loading contract workers:",re)}finally{V(!1)}};M.useEffect(()=>{ae()},[r,B]);const ae=async()=>{if(B.length!==0)try{const le=(await il()).filter($t=>$t.date===r),Oe=B.map($t=>$t.id),Le=le.filter($t=>Oe.includes($t.employeeId)),rt=new Map;Le.forEach($t=>{const bt=rt.get($t.employeeId);(!bt||new Date($t.createdAt)>new Date(bt.createdAt))&&rt.set($t.employeeId,$t)});const Ot=Array.from(rt.values()).map($t=>({employeeId:$t.employeeId,amount:$t.amount.toString()}));R(Ot)}catch(re){console.error("Error loading payouts for date:",re)}},L=()=>{R([...O,{employeeId:"",amount:""}])},H=re=>{R(O.filter((le,Oe)=>Oe!==re))},ce=(re,le,Oe)=>{const Le=[...O];Le[re][le]=Oe,R(Le)},z=M.useMemo(()=>O.reduce((re,le)=>re+(parseFloat(le.amount)||0),0),[O]),I=M.useMemo(()=>{const re=t||e.user?.storeId;console.log(" SalesManagement - effectiveStoreId:",re),console.log(" SalesManagement - selectedStoreId prop:",t),console.log(" SalesManagement - user storeId:",e.user?.storeId),console.log(" SalesManagement - selectedDate:",r),console.log(" SalesManagement - all sales data:",e.salesData.map(Le=>({id:Le.id.substring(0,8),date:Le.date,storeId:Le.storeId,offlineSales:Le.offlineSales})));const le=re?e.salesData.filter(Le=>Le.storeId===re):e.salesData;console.log(" SalesManagement - filtered sales:",le.map(Le=>({id:Le.id.substring(0,8),date:Le.date,storeId:Le.storeId})));const Oe=le.find(Le=>Le.date===r);return console.log(" SalesManagement - salesForDate result:",Oe?{id:Oe.id.substring(0,8),date:Oe.date,storeId:Oe.storeId}:"NOT FOUND"),Oe},[e.salesData,r,t,e.user?.storeId]),Z=M.useMemo(()=>e.salesData.length===0||!I&&e.salesData.every(re=>re.date>r),[e.salesData,r,I]),te=M.useMemo(()=>new Date(r).getDate()===1,[r]),se=M.useMemo(()=>new Date(r).getDay()===5,[r]),be=M.useMemo(()=>{const re=new Date(r);re.setDate(re.getDate()-1);const le=re.toISOString().split("T")[0];return e.salesData.find(Oe=>Oe.date===le)},[e.salesData,r]),Ee=M.useMemo(()=>{const re=e.inventory.filter(Le=>Le.date===r).reduce((Le,rt)=>Le+rt.totalCost,0),le=e.overheads.filter(Le=>Le.date===r).reduce((Le,rt)=>Le+rt.amount,0),Oe=e.fixedCosts.filter(Le=>Le.date===r).reduce((Le,rt)=>Le+rt.amount,0);return re+le+Oe},[e.inventory,e.overheads,e.fixedCosts,r]),_e=M.useMemo(()=>e.fixedCosts.filter(re=>re.date===r).reduce((re,le)=>le.paymentMethod==="cash"?re+le.amount:le.paymentMethod==="both"&&le.cashAmount?re+le.cashAmount:re,0),[e.fixedCosts,r]),me=M.useMemo(()=>e.fixedCosts.filter(re=>re.date===r).reduce((re,le)=>le.paymentMethod==="online"?re+le.amount:le.paymentMethod==="both"&&le.onlineAmount?re+le.onlineAmount:re,0),[e.fixedCosts,r]),ye=M.useMemo(()=>e.overheads.filter(re=>re.date===r).reduce((re,le)=>le.paymentMethod==="cash"||!le.paymentMethod?re+le.amount:le.paymentMethod==="both"&&le.cashAmount?re+le.cashAmount:re,0),[e.overheads,r]),qe=M.useMemo(()=>e.overheads.filter(re=>re.date===r).reduce((re,le)=>le.paymentMethod==="online"?re+le.amount:le.paymentMethod==="both"&&le.onlineAmount?re+le.onlineAmount:re,0),[e.overheads,r]),G=(re,le,Oe,Le,rt)=>re+rt+le-Oe-Le,He=M.useMemo(()=>{const re=parseFloat(s.previousCashInHand)||0,le=parseFloat(s.cashAmount)||0,Oe=z,Le=parseFloat(s.usedOnlineMoney)||0;return G(re,le,Ee,Oe,Le)},[s.previousCashInHand,s.cashAmount,z,Ee,s.usedOnlineMoney]),Ke=M.useMemo(()=>{const re=parseFloat(s.actualCashInHand)||0;return re===0?0:re-He},[s.actualCashInHand,He]),ut=Math.abs(Ke)>500,ze=M.useMemo(()=>{const re=e.salesData.filter(Oe=>Oe.date<=r).reduce((Oe,Le)=>Oe+(Le.paytmAmount??0),0),le=e.salesData.filter(Oe=>Oe.date<=r).reduce((Oe,Le)=>Oe+(Le.usedOnlineMoney??0),0);return re-le},[e.salesData,r]),Pe=M.useMemo(()=>{const re=new Set;e.salesData.filter(Le=>Le.date<=r).forEach(Le=>re.add(Le.date)),e.fixedCosts.filter(Le=>Le.date<=r).forEach(Le=>re.add(Le.date)),e.overheads.filter(Le=>Le.date<=r).forEach(Le=>re.add(Le.date)),e.inventory.filter(Le=>Le.date<=r).forEach(Le=>re.add(Le.date));const le=Array.from(re).sort();let Oe=0;return le.map(Le=>{const rt=e.salesData.find(cr=>cr.date===Le),Ot=rt?.paytmAmount??0,$t=rt?.usedOnlineMoney??0,bt=e.fixedCosts.filter(cr=>cr.date===Le).reduce((cr,fr)=>fr.paymentMethod==="online"?cr+fr.amount:fr.paymentMethod==="both"&&fr.onlineAmount?cr+fr.onlineAmount:cr,0),hr=e.overheads.filter(cr=>cr.date===Le).reduce((cr,fr)=>fr.paymentMethod==="online"?cr+fr.amount:fr.paymentMethod==="both"&&fr.onlineAmount?cr+fr.onlineAmount:cr,0),ht=e.inventory.filter(cr=>cr.date===Le).reduce((cr,fr)=>fr.paymentMethod==="online"?cr+fr.totalCost:fr.paymentMethod==="both"&&fr.onlineAmount?cr+fr.onlineAmount:cr,0),Rr=Ot-$t;return Oe+=Rr,{date:Le,paytmReceived:Ot,usedOnlineMoney:$t,inventoryCosts:ht,fixedCosts:bt,overheadCosts:hr,netChange:Rr,runningBalance:Oe}})},[e.salesData,e.fixedCosts,e.overheads,e.inventory,r]),ke=M.useMemo(()=>{const re=e.inventory.filter(le=>le.date===r).reduce((le,Oe)=>Oe.paymentMethod==="online"?le+Oe.totalCost:Oe.paymentMethod==="both"&&Oe.onlineAmount?le+Oe.onlineAmount:le,0);return console.log(` Inventory Online Total for ${r}:`,re,"items:",e.inventory.filter(le=>le.date===r).map(le=>({name:le.itemName,payment:le.paymentMethod,total:le.totalCost}))),re},[e.inventory,r]),Xe=M.useMemo(()=>{const re=e.overheads.filter(le=>le.date===r).reduce((le,Oe)=>Oe.paymentMethod==="online"?le+Oe.amount:Oe.paymentMethod==="both"&&Oe.onlineAmount?le+Oe.onlineAmount:le,0);return console.log(` Overhead Online Total for ${r}:`,re,"items:",e.overheads.filter(le=>le.date===r).map(le=>({category:le.category,payment:le.paymentMethod,total:le.amount}))),re},[e.overheads,r]),We=M.useMemo(()=>{const re=e.fixedCosts.filter(le=>le.date===r).reduce((le,Oe)=>Oe.paymentMethod==="online"?le+Oe.amount:Oe.paymentMethod==="both"&&Oe.onlineAmount?le+Oe.onlineAmount:le,0);return console.log(` Fixed Cost Online Total for ${r}:`,re,"items:",e.fixedCosts.filter(le=>le.date===r).map(le=>({category:le.category,payment:le.paymentMethod,total:le.amount}))),re},[e.fixedCosts,r]),ct=M.useMemo(()=>{const re=ke+Xe+We;return console.log(` TOTAL Online Expenses for ${r}:`,{inventory:ke,overhead:Xe,fixedCost:We,total:re}),re},[ke,Xe,We,r]);M.useEffect(()=>{if(I)i({offlineSales:(I.offlineSales??0).toString(),paytmAmount:(I.paytmAmount??0).toString(),cashAmount:(I.cashAmount??0).toString(),onlineSales:(I.onlineSales??0).toString(),employeeSalary:(I.employeeSalary??0).toString(),previousCashInHand:(I.previousCashInHand??0).toString(),usedOnlineMoney:(I.usedOnlineMoney??0).toString(),actualCashInHand:(I.actualCashInHand??0).toString()}),l(!0),u(I.id);else{let re=0;be&&(re=be.actualCashInHand??0),i({offlineSales:"",paytmAmount:"",cashAmount:"",onlineSales:"",employeeSalary:"0",previousCashInHand:re.toString(),usedOnlineMoney:ct.toString(),actualCashInHand:""}),l(!1),u(null)}},[r,I,be,ct]);const Wt=async re=>{if(re.preventDefault(),f){console.log(" Submission already in progress, ignoring duplicate request");return}k(re),g(!0),y(!1)},Ut=()=>{g(!1),y(!1),k(null)},Vt=async()=>{if(!v){alert(" Please confirm that you take responsibility for this sales data.");return}g(!1),m(!0);const re=parseFloat(s.actualCashInHand)||0,le=re-He,Oe=C,Le={date:r,offlineSales:parseFloat(s.offlineSales)||0,paytmAmount:parseFloat(s.paytmAmount)||0,cashAmount:parseFloat(s.cashAmount)||0,onlineSales:parseFloat(s.onlineSales)||0,onlineSalesCommission:0,employeeSalary:z,previousCashInHand:parseFloat(s.previousCashInHand)||0,usedOnlineMoney:parseFloat(s.usedOnlineMoney)||0,actualCashInHand:re,cashOffset:le,salesDiscrepancy:I?.salesDiscrepancy!==void 0?I.salesDiscrepancy:le,approvalRequired:ut,approvalStatus:Oe?"pending":"approved",createdBy:e.user?.employeeId||e.user?.email||"unknown",approvedBy:Oe?I?.approvedBy||null:e.user?.employeeId||e.user?.email||"self",approvedAt:Oe?I?.approvedAt||null:new Date().toISOString(),approvalRequested:I?.approvalRequested||!1,approvalRequestedAt:I?.approvalRequestedAt||null,requestedCashInHand:I?.requestedCashInHand||null,requestedOffset:I?.requestedOffset||null,rejectedBy:I?.rejectedBy||null,rejectedAt:I?.rejectedAt||null,rejectionReason:I?.rejectionReason||null,storeId:t||e.user?.storeId||void 0};try{if(o&&d?await e.updateSalesData(d,Le):await e.addSalesData(Le),O.length>0){const rt=await il(),Ot=B.map(hr=>hr.id),$t=rt.filter(hr=>hr.date===r&&Ot.includes(hr.employeeId));for(const hr of $t)await Hm(hr.id),console.log("Deleted old payout:",hr.id);const bt=O.filter(hr=>hr.employeeId&&hr.amount).map(hr=>{const ht=B.find(Rr=>Rr.id===hr.employeeId);return{id:crypto.randomUUID(),employeeId:hr.employeeId,employeeName:ht?.name||"",amount:parseFloat(hr.amount),date:r,createdAt:new Date().toISOString()}});bt.length>0&&(await w2(bt),console.log("Contract worker payouts synced to payroll:",bt))}else{const rt=await il(),Ot=B.map(bt=>bt.id),$t=rt.filter(bt=>bt.date===r&&Ot.includes(bt.employeeId));for(const bt of $t)await Hm(bt.id),console.log("Deleted payout (no workers entered):",bt.id)}alert("Sales data and contract worker payouts saved successfully!")}catch(rt){console.error("Error saving sales data:",rt),alert("Failed to save sales data. Please try again.")}finally{m(!1)}},Ar=async()=>{if(!d)return;const re=parseFloat(s.actualCashInHand)||0,le=re-He;if(confirm(`Request approval for cash discrepancy of ${Math.abs(le).toFixed(2)}?

This will notify the cluster head for approval.`))try{await e.requestSalesApproval(d,re,le),alert("Approval request sent successfully!")}catch{alert("Failed to request approval. Please try again.")}},ln=async re=>{if(confirm("Approve this discrepancy? The new cash amount will be accepted."))try{await e.approveDiscrepancy(re),alert("Discrepancy approved successfully!")}catch{alert("Failed to approve discrepancy. Please try again.")}},Xr=async re=>{const le=prompt("Please enter reason for rejection:");if(le)try{await e.rejectDiscrepancy(re,le),alert("Discrepancy rejected. Manager must pay the difference.")}catch{alert("Failed to reject discrepancy. Please try again.")}},Ft=parseFloat(s.onlineSales)||0,ir=parseFloat(s.offlineSales)||0,nt=parseFloat(s.paytmAmount)||0,Bt=parseFloat(s.cashAmount)||0,$e=nt+Bt,De=Math.abs(ir-$e)>.01;return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx(xg,{selectedDate:r,onDateChange:a}),se&&e.isManager&&n.jsxs("div",{className:"mt-6 bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(yn,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-gray-900",children:"Weekly Cash Reporting - Friday"})]}),n.jsx("p",{className:"text-gray-700 mb-3",children:"Today is Friday! Please report the actual cash left with you after entering today's sales data."}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm",children:n.jsxs("p",{className:"text-gray-700",children:[n.jsx("strong",{children:"Important:"})," If the cash discrepancy exceeds 500, cluster head approval will be required before saving."]})})]}),A&&n.jsxs("div",{className:"mt-6 space-y-4",children:[e.salesData.filter(re=>re.approvalRequested&&!re.approvedBy&&!re.rejectedBy).length>0&&n.jsxs("div",{className:"bg-[#FFF4E6] border-2 border-[#FFE4C4] rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(yn,{className:"w-6 h-6 text-orange-600"}),n.jsx("h2",{className:"text-gray-900",children:"Discrepancy Approval Requests"})]}),n.jsx("div",{className:"space-y-3",children:e.salesData.filter(re=>re.approvalRequested&&!re.approvedBy&&!re.rejectedBy).map(re=>n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-orange-300",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-gray-900 font-medium",children:ta(re.date)}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Expected Cash: ",(re.actualCashInHand-re.cashOffset).toFixed(2)]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Requested Cash: ",(re.requestedCashInHand||0).toFixed(2)]}),n.jsxs("p",{className:"text-sm mt-1",children:["Discrepancy: ",n.jsxs("span",{className:(re.requestedOffset||0)>0?"text-green-600 font-medium":"text-red-600 font-medium",children:[(re.requestedOffset||0)>0?"+":"","",(re.requestedOffset||0).toFixed(2)]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>ln(re.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(js,{className:"w-4 h-4"}),"Approve"]}),n.jsxs("button",{onClick:()=>Xr(re.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[n.jsx(Kr,{className:"w-4 h-4"}),"Reject"]})]})]},re.id))})]}),e.salesData.filter(re=>re.approvalRequired&&!re.approvedBy&&!re.approvalRequested).length>0&&n.jsxs("div",{className:"bg-[#FFF4E6] border-2 border-[#FFE4C4] rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(yn,{className:"w-6 h-6 text-[#E8A87C]"}),n.jsx("h2",{className:"text-gray-900",children:"Pending Approvals"})]}),n.jsx("div",{className:"space-y-3",children:e.salesData.filter(re=>re.approvalRequired&&!re.approvedBy&&!re.approvalRequested).map(re=>n.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center justify-between border border-yellow-300",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-900",children:ta(re.date)}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Cash Discrepancy: ",n.jsxs("span",{className:re.cashOffset>0?"text-green-600":"text-red-600",children:[re.cashOffset>0?"+":"","",re.cashOffset.toFixed(2)]})]}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Expected: ",(re.actualCashInHand-re.cashOffset).toFixed(2)," | Actual: ",re.actualCashInHand.toFixed(2)]})]}),n.jsxs("button",{onClick:async()=>{try{await e.approveSalesData(re.id),alert("Approved successfully!")}catch{alert("Failed to approve")}},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(js,{className:"w-4 h-4"}),"Approve"]})]},re.id))})]}),e.salesData.filter(re=>re.approvalRequired&&!re.approvedBy||re.approvalRequested&&!re.approvedBy&&!re.rejectedBy).length===0&&n.jsxs("div",{className:"bg-[#FFF4E6] border-2 border-[#FFE4C4] rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(yn,{className:"w-6 h-6 text-[#E8A87C]"}),n.jsx("h2",{className:"text-gray-900",children:"Pending Approvals"})]}),n.jsx("p",{className:"text-gray-600",children:"No pending approvals at the moment."})]})]}),C&&n.jsxs("div",{className:"mt-6 space-y-4",children:[e.salesData.filter(re=>re.approvalStatus==="pending"&&re.createdBy!==e.user?.employeeId).length>0&&n.jsxs("div",{className:"bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(js,{className:"w-6 h-6 text-green-600"}),n.jsx("h2",{className:"text-gray-900",children:"Sales Pending Approval"})]}),n.jsx("div",{className:"space-y-3",children:e.salesData.filter(re=>re.approvalStatus==="pending"&&re.createdBy!==e.user?.employeeId).map(re=>n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-300",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-gray-900 font-medium",children:ta(re.date)}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Submitted by: ",re.createdBy]}),n.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Total Sales:"}),n.jsxs("span",{className:"ml-1 font-medium",children:["",(re.offlineSales+re.onlineSales).toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Cash in Hand:"}),n.jsxs("span",{className:"ml-1 font-medium",children:["",re.actualCashInHand.toFixed(2)]})]})]}),Math.abs(re.cashOffset)>0&&n.jsxs("p",{className:"text-sm mt-1",children:["Cash Offset: ",n.jsxs("span",{className:re.cashOffset>0?"text-green-600 font-medium":"text-red-600 font-medium",children:[re.cashOffset>0?"+":"","",re.cashOffset.toFixed(2)]})]})]}),n.jsxs("button",{onClick:async()=>{if(confirm(`Approve sales data for ${ta(re.date)}?`))try{await e.approveSalesData(re.id),alert("Sales data approved successfully!")}catch{alert("Failed to approve sales data")}},className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(js,{className:"w-4 h-4"}),"Approve Sales Data"]})]},re.id))})]}),e.salesData.filter(re=>re.approvalStatus==="pending"&&re.createdBy!==e.user?.employeeId).length===0&&n.jsxs("div",{className:"bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(js,{className:"w-6 h-6 text-green-600"}),n.jsx("h2",{className:"text-gray-900",children:"Sales Pending Approval"})]}),n.jsx("p",{className:"text-gray-600",children:"No pending sales at the moment."})]})]}),C&&I&&I.approvalStatus==="pending"&&n.jsxs("div",{className:"mt-6 bg-[#FFF9E6] border-2 border-[#FFD54F] rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(yn,{className:"w-6 h-6 text-orange-600"}),n.jsx("h2",{className:"text-gray-900",children:"Sales Pending Approval"})]}),n.jsxs("p",{className:"text-gray-700",children:["Your sales entry for ",ta(I.date)," is awaiting approval from the Cluster Head."]})]}),C&&I&&I.approvalStatus==="approved"&&n.jsxs("div",{className:"mt-6 bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(zt,{className:"w-6 h-6 text-green-600"}),n.jsx("h2",{className:"text-gray-900",children:"Sales Approved"})]}),n.jsxs("p",{className:"text-gray-700",children:[" Your sales entry for ",ta(I.date)," has been approved by ",I.approvedBy,"."]})]}),new Date(r).getDate()===1&&e.user?.accessToken&&n.jsx(Goe,{selectedDate:r,accessToken:e.user.accessToken,userEmail:e.user.email,userName:e.user.name,storeId:t||e.user.storeId,onCommissionSaved:async()=>{e.user?.accessToken&&await ru(e.user.accessToken)}}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[n.jsx(qn,{className:"w-6 h-6 text-green-600"}),n.jsx("h2",{className:"text-gray-900",children:"Sales Entry"})]}),n.jsxs("form",{onSubmit:Wt,className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-[#D4E6F1] to-[#AED6F1] rounded-lg p-4",children:[n.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(fB,{className:"w-5 h-5 text-[#5499C7]"}),"Offline Sales"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Total Offline Sales ()"}),n.jsx("input",{type:"number",step:"0.01",value:s.offlineSales,onChange:re=>i({...s,offlineSales:re.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!P})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Paytm ()"}),n.jsx("input",{type:"number",step:"0.01",value:s.paytmAmount,onChange:re=>i({...s,paytmAmount:re.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!P})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash ()"}),n.jsx("input",{type:"number",step:"0.01",value:s.cashAmount,onChange:re=>i({...s,cashAmount:re.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!P})]})]}),De&&n.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-700 px-3 py-2 rounded-lg text-sm",children:[" Payment mode total (",$e.toFixed(2),") doesn't match offline sales (",ir.toFixed(2),")"]}),!De&&ir>0&&n.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-700 px-3 py-2 rounded-lg text-sm flex items-center gap-2",children:[n.jsx(zt,{className:"w-4 h-4"}),"Payment modes match total sales"]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-[#FFE6CC] to-[#FFDAB9] rounded-lg p-4",children:[n.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(hn,{className:"w-5 h-5 text-[#E8A87C]"}),"Online Sales"]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Total Online Sales (Zomato + Swiggy) ()"}),n.jsx("input",{type:"number",step:"0.01",value:s.onlineSales,onChange:re=>i({...s,onlineSales:re.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!P})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-[#E0F2F7] to-[#B3E5FC] rounded-lg p-4",children:[n.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(s9,{className:"w-5 h-5 text-[#4FC3F7]"}),"Used Online Money"]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:["Amount Used from Paytm ()",ct>0&&n.jsxs("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full",children:["Auto: ",ke.toFixed(2),"(Inv) + ",Xe.toFixed(2),"(OH) + ",We.toFixed(2),"(FC)"]})]}),n.jsx("input",{type:"number",step:"0.01",value:s.usedOnlineMoney,onChange:re=>i({...s,usedOnlineMoney:re.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",disabled:!P}),ct>0?n.jsxs("div",{className:"mt-2 bg-blue-50 border border-blue-200 rounded-lg p-2",children:[n.jsx("p",{className:"text-xs text-blue-900 font-semibold mb-1",children:" Auto-calculated from:"}),n.jsxs("ul",{className:"text-xs text-blue-800 space-y-0.5 ml-4",children:[ke>0&&n.jsxs("li",{children:[" Inventory: ",ke.toFixed(2)]}),Xe>0&&n.jsxs("li",{children:[" Overhead Costs: ",Xe.toFixed(2)]}),We>0&&n.jsxs("li",{children:[" Fixed Costs: ",We.toFixed(2)]}),n.jsxs("li",{className:"font-semibold",children:["Total: ",ct.toFixed(2)]})]}),n.jsx("p",{className:"text-xs text-blue-700 mt-1 italic",children:"This field is editable if you need to adjust for other expenses."})]}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter amount if Paytm balance was used for expenses"})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-gray-900 flex items-center gap-2",children:[n.jsx(kn,{className:"w-5 h-5 text-purple-600"}),"Contract Worker Payouts"]}),e.isManager&&n.jsxs("button",{type:"button",onClick:L,className:"flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[n.jsx(xo,{className:"w-4 h-4"}),"Add Worker"]})]}),Q?n.jsx("p",{className:"text-sm text-gray-500",children:"Loading workers..."}):B.length===0?n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-sm text-gray-700",children:n.jsx("p",{children:"No contract workers found. Please add contract workers in the Payroll tab first."})}):n.jsxs("div",{className:"space-y-3",children:[O.length===0?n.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 text-sm text-gray-600",children:'No payouts entered for today. Click "Add Worker" to record a payout.'}):O.map((re,le)=>{const Oe=B.find(Le=>Le.id===re.employeeId);return n.jsx("div",{className:"bg-white border border-purple-200 rounded-lg p-3 space-y-2",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Select Worker"}),n.jsxs("select",{value:re.employeeId,onChange:Le=>ce(le,"employeeId",Le.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm",disabled:!e.isManager,required:!0,children:[n.jsx("option",{value:"",children:"Choose a worker..."}),B.map(Le=>n.jsxs("option",{value:Le.id,children:[Le.name," (",Le.employeeId,")"]},Le.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Amount Paid ()"}),n.jsx("input",{type:"number",step:"0.01",value:re.amount,onChange:Le=>ce(le,"amount",Le.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm",placeholder:Oe?.dailyRate?`Suggested: ${Oe.dailyRate}`:"Enter amount",disabled:!e.isManager,required:!0}),Oe?.dailyRate&&n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Daily rate: ",Oe.dailyRate]})]})]}),e.isManager&&n.jsx("button",{type:"button",onClick:()=>H(le),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors mt-5",children:n.jsx(Kr,{className:"w-4 h-4"})})]})},le)}),O.length>0&&n.jsxs("div",{className:"bg-purple-600 text-white rounded-lg p-3 flex justify-between items-center",children:[n.jsx("span",{className:"text-sm",children:"Total Contract Payouts:"}),n.jsxs("span",{className:"text-lg",children:["",z.toFixed(2)]})]})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-3 bg-purple-50 p-2 rounded border border-purple-200",children:[" ",n.jsx("strong",{children:"Note:"})," Payouts entered here will automatically sync with the Payroll page. For permanent employees, use the Payroll tab."]}),z>0&&n.jsxs("p",{className:"text-xs text-purple-700 mt-2 bg-purple-100 p-2 rounded border border-purple-300 flex items-center gap-1",children:[" ",n.jsx("strong",{children:"Cash Impact:"})," ",z.toFixed(2)," will be deducted from offline cash when calculating cash in hand."]})]}),(Z||te)&&n.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4",children:[n.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(co,{className:"w-5 h-5 text-amber-600"}),Z?"Opening Cash Balance (Day 1)":"Cash Left from Previous Month"]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash Left ()"}),n.jsx("input",{type:"number",step:"0.01",value:s.previousCashInHand,onChange:re=>i({...s,previousCashInHand:re.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",disabled:!P,required:!0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Z?"Enter starting cash for the first day":"Enter cash left from previous month (after deducting all expenses and salaries)"})]})]}),!Z&&!te&&n.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-4 border-2 border-gray-300",children:[n.jsxs("h3",{className:"text-gray-900 mb-2 flex items-center gap-2",children:[n.jsx(co,{className:"w-5 h-5 text-gray-600"}),"Cash Left from Previous Day (Auto-Calculated)"]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[n.jsxs("p",{className:"text-2xl text-gray-900",children:["",(parseFloat(s.previousCashInHand)||0).toFixed(2)]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" This is automatically calculated from previous day's cash left after deducting expenses and salaries.",te&&" You can edit this only on the 1st of the month."]})]})]}),!Z&&n.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-lg p-4",children:[n.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(co,{className:"w-5 h-5 text-teal-600"}),"Cash Reconciliation"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-teal-200",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Expected Cash in Hand"}),n.jsxs("p",{className:"text-2xl text-gray-900",children:["",He.toFixed(2)]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Previous Cash: ",(parseFloat(s.previousCashInHand)||0).toFixed(2)," + Amount Used from Paytm: ",(parseFloat(s.usedOnlineMoney)||0).toFixed(2)," + Cash Received: ",Bt.toFixed(2)," - Expenses: ",Ee.toFixed(2)," - Contract Payouts: ",z.toFixed(2)]}),n.jsxs("details",{className:"mt-2",children:[n.jsx("summary",{className:"text-xs text-blue-600 cursor-pointer hover:underline",children:"View expense breakdown"}),n.jsxs("div",{className:"mt-2 text-xs text-gray-600 bg-gray-50 p-2 rounded",children:[n.jsxs("p",{children:["Inventory Cost: ",e.inventory.filter(re=>re.date===r).reduce((re,le)=>re+le.totalCost,0).toFixed(2)," (",e.inventory.filter(re=>re.date===r).length," items)"]}),n.jsxs("p",{children:["Overhead Cost: ",e.overheads.filter(re=>re.date===r).reduce((re,le)=>re+le.amount,0).toFixed(2)," (",e.overheads.filter(re=>re.date===r).length," items)"]}),n.jsxs("p",{children:["Fixed Costs: ",e.fixedCosts.filter(re=>re.date===r).reduce((re,le)=>re+le.amount,0).toFixed(2)," (",e.fixedCosts.filter(re=>re.date===r).length," items)"]}),n.jsxs("p",{className:"font-medium mt-1",children:["Total: ",Ee.toFixed(2)]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Actual Cash in Hand ()"}),n.jsx("input",{type:"number",step:"0.01",value:s.actualCashInHand,onChange:re=>i({...s,actualCashInHand:re.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!P}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Count and enter actual physical cash"})]}),s.actualCashInHand&&n.jsxs("div",{className:`rounded-lg p-3 border-2 ${Math.abs(Ke)===0?"bg-green-100 border-green-300":ut?"bg-red-100 border-red-300":"bg-yellow-100 border-yellow-300"}`,children:[n.jsx("p",{className:"text-sm font-medium",children:Math.abs(Ke)===0?n.jsxs("span",{className:"text-green-700 flex items-center gap-2",children:[n.jsx(zt,{className:"w-4 h-4"}),"Perfect Match! No discrepancy."]}):ut?n.jsxs("span",{className:"text-red-700 flex items-center gap-2",children:[n.jsx(yn,{className:"w-4 h-4"}),"High Discrepancy: ",Ke>0?"+":"","",Ke.toFixed(2)]}):n.jsxs("span",{className:"text-yellow-700",children:["Small Offset: ",Ke>0?"+":"","",Ke.toFixed(2)]})}),ut&&!I?.approvedBy&&!I?.approvalRequested&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Exceeds 500 limit - Save first, then request cluster head approval"}),I?.approvalRequested&&!I?.approvedBy&&!I?.rejectedBy&&n.jsxs("p",{className:"text-xs text-orange-600 mt-1 flex items-center gap-1",children:[n.jsx(yn,{className:"w-3 h-3"}),"Approval pending from cluster head"]}),I?.approvedBy&&n.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[n.jsx(js,{className:"w-3 h-3"}),"Approved by: ",I.approvedBy]}),I?.rejectedBy&&n.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[n.jsxs("p",{className:"flex items-center gap-1",children:[n.jsx(Kr,{className:"w-3 h-3"}),"Rejected by: ",I.rejectedBy]}),I.rejectionReason&&n.jsxs("p",{className:"mt-1 italic",children:["Reason: ",I.rejectionReason]}),n.jsx("p",{className:"mt-1 font-medium",children:"You must pay the discrepancy from your pocket."})]})]})]})]}),P&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{type:"submit",disabled:De||f,className:"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[f&&n.jsx(pc,{className:"w-5 h-5 animate-spin"}),f?"Saving...":o?"Update Sales Data":"Save Sales Data"]}),o&&d&&ut&&!I?.approvedBy&&!I?.approvalRequested&&n.jsxs("button",{type:"button",onClick:Ar,className:"w-full px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[n.jsx(yn,{className:"w-5 h-5"}),"Request Approval from Cluster Head"]}),o&&I?.approvalRequested&&!I?.approvedBy&&!I?.rejectedBy&&n.jsx("div",{className:"w-full px-6 py-3 bg-orange-100 border-2 border-orange-300 text-orange-800 rounded-lg text-center",children:" Approval request sent - Waiting for cluster head response"})]})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-[#B8E6B8] to-[#A3D9A5] rounded-xl shadow-lg p-6 text-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(qn,{className:"w-6 h-6"}),n.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Total Sales"})]}),n.jsxs("p",{className:"text-4xl",children:["",(ir+Ft).toLocaleString()]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700/20 space-y-1 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Offline Sales:"}),n.jsxs("span",{children:["",ir.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Online Sales:"}),n.jsxs("span",{children:["",Ft.toLocaleString()]})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-[#A8D8EA] to-[#93C5FD] rounded-xl shadow-lg p-6 text-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(co,{className:"w-6 h-6"}),n.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Payment Breakdown"})]}),n.jsxs("div",{className:"space-y-3 mt-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{children:"Cash Received:"}),n.jsxs("span",{className:"text-2xl",children:["",Bt.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{children:"Paytm Received:"}),n.jsxs("span",{className:"text-2xl",children:["",nt.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700/20",children:[n.jsx("span",{children:"Online Sales:"}),n.jsxs("span",{className:"text-xl",children:["",Ft.toLocaleString()]})]})]})]}),!Z&&n.jsxs("div",{className:"bg-gradient-to-br from-[#D8B5FF] to-[#C7A7FF] rounded-xl shadow-lg p-6 text-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(co,{className:"w-6 h-6"}),n.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Cash Status"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm",children:"Expected Cash"}),n.jsxs("p",{className:"text-3xl",children:["",He.toFixed(2)]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["",(parseFloat(s.previousCashInHand)||0).toFixed(2)," + ",(parseFloat(s.usedOnlineMoney)||0).toFixed(2)," + ",Bt.toFixed(2)," - ",Ee.toFixed(2)," - ",_e.toFixed(2)," - ",ye.toFixed(2)," - ",z.toFixed(2)]})]}),s.actualCashInHand&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"pt-3 border-t border-gray-700/20",children:[n.jsx("p",{className:"text-sm",children:"Actual Cash"}),n.jsxs("p",{className:"text-3xl",children:["",(parseFloat(s.actualCashInHand)||0).toFixed(2)]})]}),Math.abs(Ke)>0&&n.jsxs("div",{className:"pt-3 border-t border-gray-700/20",children:[n.jsx("p",{className:"text-sm",children:"Difference"}),n.jsxs("p",{className:`text-2xl ${Ke>0?"text-green-700":"text-red-700"}`,children:[Ke>0?"+":"","",Ke.toFixed(2)]})]})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-[#C7A7FF] to-[#B794F4] rounded-xl shadow-lg p-6 text-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(RE,{className:"w-6 h-6"}),n.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Online Cash in Hand (Paytm)"})]}),n.jsxs("p",{className:"text-4xl mb-4",children:["",ze.toLocaleString()]}),n.jsxs("div",{className:"space-y-2 text-sm bg-gray-800/10 rounded-lg p-3",children:[n.jsxs("div",{className:"flex justify-between text-green-700",children:[n.jsx("span",{children:"Total Paytm Received:"}),n.jsxs("span",{children:["",e.salesData.filter(re=>re.date<=r).reduce((re,le)=>re+(le.paytmAmount??0),0).toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between text-red-700",children:[n.jsx("span",{children:"- Total Used:"}),n.jsxs("span",{children:["",e.salesData.filter(re=>re.date<=r).reduce((re,le)=>re+(le.usedOnlineMoney??0),0).toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between text-red-700",children:[n.jsx("span",{children:"- Fixed Costs (Online):"}),n.jsxs("span",{children:["",e.fixedCosts.filter(re=>re.date<=r).reduce((re,le)=>le.paymentMethod==="online"?re+le.amount:le.paymentMethod==="both"&&le.onlineAmount?re+le.onlineAmount:re,0).toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between text-red-700",children:[n.jsx("span",{children:"- Overhead Costs (Online):"}),n.jsxs("span",{children:["",e.overheads.filter(re=>re.date<=r).reduce((re,le)=>le.paymentMethod==="online"?re+le.amount:le.paymentMethod==="both"&&le.onlineAmount?re+le.onlineAmount:re,0).toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between text-gray-700 pt-2 border-t border-gray-700/20",children:[n.jsx("span",{children:"Used Today:"}),n.jsxs("span",{children:["",(parseFloat(s.usedOnlineMoney)||0).toLocaleString()]})]}),me>0&&n.jsxs("div",{className:"flex justify-between text-gray-700",children:[n.jsx("span",{children:"Fixed Costs Today (Online):"}),n.jsxs("span",{children:["",me.toLocaleString()]})]}),qe>0&&n.jsxs("div",{className:"flex justify-between text-gray-700",children:[n.jsx("span",{children:"Overhead Costs Today (Online):"}),n.jsxs("span",{children:["",qe.toLocaleString()]})]})]}),n.jsxs("button",{onClick:()=>b(!0),className:"mt-4 w-full px-4 py-2 bg-white/20 hover:bg-white/30 text-gray-800 rounded-lg transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[n.jsx(hn,{className:"w-4 h-4"}),"View Daily Breakdown"]})]})]})]}),N&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>b(!1),children:n.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",onClick:re=>re.stopPropagation(),children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[n.jsx(RE,{className:"w-6 h-6"}),"Online Cash in Hand - Daily Breakdown"]}),n.jsxs("p",{className:"text-purple-100 mt-1",children:["How we reached ",ze.toLocaleString()]})]}),n.jsx("button",{onClick:()=>b(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Kr,{className:"w-6 h-6"})})]})}),n.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border-2 border-green-200",children:[n.jsx("p",{className:"text-xs text-green-700 mb-1",children:"Total Received"}),n.jsxs("p",{className:"text-xl font-bold text-green-800",children:["",e.salesData.filter(re=>re.date<=r).reduce((re,le)=>re+(le.paytmAmount??0),0).toLocaleString()]})]}),n.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border-2 border-red-200",children:[n.jsx("p",{className:"text-xs text-red-700 mb-1",children:"Total Used"}),n.jsxs("p",{className:"text-xl font-bold text-red-800",children:["",e.salesData.filter(re=>re.date<=r).reduce((re,le)=>re+(le.usedOnlineMoney??0),0).toLocaleString()]})]}),n.jsxs("div",{className:"bg-teal-50 rounded-lg p-4 border-2 border-teal-200",children:[n.jsx("p",{className:"text-xs text-teal-700 mb-1",children:"Inventory"}),n.jsxs("p",{className:"text-xl font-bold text-teal-800",children:["",e.inventory.filter(re=>re.date<=r).reduce((re,le)=>le.paymentMethod==="online"?re+le.totalCost:le.paymentMethod==="both"&&le.onlineAmount?re+le.onlineAmount:re,0).toLocaleString()]})]}),n.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border-2 border-orange-200",children:[n.jsx("p",{className:"text-xs text-orange-700 mb-1",children:"Fixed Costs"}),n.jsxs("p",{className:"text-xl font-bold text-orange-800",children:["",e.fixedCosts.filter(re=>re.date<=r).reduce((re,le)=>le.paymentMethod==="online"?re+le.amount:le.paymentMethod==="both"&&le.onlineAmount?re+le.onlineAmount:re,0).toLocaleString()]})]}),n.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border-2 border-purple-200",children:[n.jsx("p",{className:"text-xs text-purple-700 mb-1",children:"Overhead Costs"}),n.jsxs("p",{className:"text-xl font-bold text-purple-800",children:["",e.overheads.filter(re=>re.date<=r).reduce((re,le)=>le.paymentMethod==="online"?re+le.amount:le.paymentMethod==="both"&&le.onlineAmount?re+le.onlineAmount:re,0).toLocaleString()]})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(hn,{className:"w-5 h-5 text-purple-600"}),"Day-by-Day Transactions"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b-2 border-gray-300",children:[n.jsx("th",{className:"text-left p-3 font-semibold text-gray-700",children:"Date"}),n.jsx("th",{className:"text-right p-3 font-semibold text-green-700",children:"Received"}),n.jsx("th",{className:"text-right p-3 font-semibold text-red-700",children:"Used"}),n.jsx("th",{className:"text-right p-3 font-semibold text-teal-700",children:"Inventory"}),n.jsx("th",{className:"text-right p-3 font-semibold text-orange-700",children:"Fixed Costs"}),n.jsx("th",{className:"text-right p-3 font-semibold text-purple-700",children:"Overheads"}),n.jsx("th",{className:"text-right p-3 font-semibold text-gray-700",children:"Net Change"}),n.jsx("th",{className:"text-right p-3 font-semibold text-blue-700",children:"Balance"})]})}),n.jsx("tbody",{children:Pe.map((re,le)=>n.jsxs("tr",{className:`border-b border-gray-200 hover:bg-white transition-colors ${re.date===r?"bg-blue-50 font-semibold":""}`,children:[n.jsxs("td",{className:"p-3 text-gray-900",children:[ta(re.date),re.date===r&&n.jsx("span",{className:"ml-2 text-xs bg-blue-500 text-white px-2 py-0.5 rounded-full",children:"Today"})]}),n.jsx("td",{className:"p-3 text-right text-green-700",children:re.paytmReceived>0?`+${re.paytmReceived.toLocaleString()}`:"-"}),n.jsx("td",{className:"p-3 text-right text-red-700",children:re.usedOnlineMoney>0?`-${re.usedOnlineMoney.toLocaleString()}`:"-"}),n.jsx("td",{className:"p-3 text-right text-teal-700",children:re.inventoryCosts>0?`-${re.inventoryCosts.toLocaleString()}`:"-"}),n.jsx("td",{className:"p-3 text-right text-orange-700",children:re.fixedCosts>0?`-${re.fixedCosts.toLocaleString()}`:"-"}),n.jsx("td",{className:"p-3 text-right text-purple-700",children:re.overheadCosts>0?`-${re.overheadCosts.toLocaleString()}`:"-"}),n.jsxs("td",{className:`p-3 text-right font-semibold ${re.netChange>=0?"text-green-700":"text-red-700"}`,children:[re.netChange>=0?"+":"","",re.netChange.toLocaleString()]}),n.jsxs("td",{className:`p-3 text-right font-bold ${re.runningBalance>=0?"text-blue-700":"text-red-700"}`,children:["",re.runningBalance.toLocaleString()]})]},re.date))}),n.jsx("tfoot",{children:n.jsxs("tr",{className:"border-t-2 border-gray-300 bg-gray-100",children:[n.jsx("td",{className:"p-3 font-bold text-gray-900",children:"TOTAL / FINAL"}),n.jsxs("td",{className:"p-3 text-right font-bold text-green-700",children:["+",e.salesData.filter(re=>re.date<=r).reduce((re,le)=>re+(le.paytmAmount??0),0).toLocaleString()]}),n.jsxs("td",{className:"p-3 text-right font-bold text-red-700",children:["-",e.salesData.filter(re=>re.date<=r).reduce((re,le)=>re+(le.usedOnlineMoney??0),0).toLocaleString()]}),n.jsxs("td",{className:"p-3 text-right font-bold text-teal-700",children:["-",e.inventory.filter(re=>re.date<=r).reduce((re,le)=>le.paymentMethod==="online"?re+le.totalCost:le.paymentMethod==="both"&&le.onlineAmount?re+le.onlineAmount:re,0).toLocaleString()]}),n.jsxs("td",{className:"p-3 text-right font-bold text-orange-700",children:["-",e.fixedCosts.filter(re=>re.date<=r).reduce((re,le)=>le.paymentMethod==="online"?re+le.amount:le.paymentMethod==="both"&&le.onlineAmount?re+le.onlineAmount:re,0).toLocaleString()]}),n.jsxs("td",{className:"p-3 text-right font-bold text-purple-700",children:["-",e.overheads.filter(re=>re.date<=r).reduce((re,le)=>le.paymentMethod==="online"?re+le.amount:le.paymentMethod==="both"&&le.onlineAmount?re+le.onlineAmount:re,0).toLocaleString()]}),n.jsx("td",{className:"p-3"}),n.jsxs("td",{className:`p-3 text-right font-bold text-lg ${ze>=0?"text-blue-700":"text-red-700"}`,children:["",ze.toLocaleString()]})]})})]})}),n.jsxs("div",{className:"mt-6 bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:[n.jsxs("h4",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[n.jsx(yn,{className:"w-4 h-4"}),"How is this calculated?"]}),n.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Online Cash in Hand"})," = Total Paytm Received - Used Online Money"]}),n.jsxs("p",{className:"mt-2",children:[n.jsx("strong",{children:'"Used"'})," column is the total money spent from Paytm (can include inventory, fixed costs, overheads, and other expenses)."]}),n.jsxs("p",{className:"mt-2",children:[n.jsx("strong",{children:"Inventory, Fixed Costs, Overheads"}),' columns show individual expense categories for reference (already included in "Used").']}),n.jsxs("p",{className:"mt-2",children:[n.jsx("strong",{children:"Running Balance"})," accumulates day by day, showing how much online cash you had at the end of each day."]}),n.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 ml-2",children:[n.jsxs("li",{children:[n.jsx("span",{className:"text-green-700 font-semibold",children:"Green (+)"})," = Money received via Paytm"]}),n.jsxs("li",{children:[n.jsx("span",{className:"text-red-700 font-semibold",children:"Red (-)"})," = Total money used from Paytm (as entered in Sales form)"]}),n.jsxs("li",{children:[n.jsx("span",{className:"text-teal-700 font-semibold",children:"Teal (-)"})," = Inventory purchases paid online (part of Used)"]}),n.jsxs("li",{children:[n.jsx("span",{className:"text-orange-700 font-semibold",children:"Orange (-)"})," = Fixed costs paid online (part of Used)"]}),n.jsxs("li",{children:[n.jsx("span",{className:"text-purple-700 font-semibold",children:"Purple (-)"})," = Overhead costs paid online (part of Used)"]})]}),n.jsx("div",{className:"mt-3 bg-yellow-50 border border-yellow-200 rounded p-2",children:n.jsxs("p",{className:"text-xs text-yellow-900",children:[n.jsx("strong",{children:" Note:"}),' "Used Online Money" is auto-populated with Inventory + Fixed Costs + Overheads paid online, but can be manually edited if needed for other expenses.']})})]})]})]})]}),n.jsx("div",{className:"p-4 bg-gray-100 border-t flex justify-end",children:n.jsx("button",{onClick:()=>b(!1),className:"px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all font-medium",children:"Close"})})]})}),p&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:Ut,children:n.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6 shadow-2xl",onClick:re=>re.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-500 rounded-full flex items-center justify-center",children:n.jsx(yn,{className:"w-6 h-6 text-white"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Confirm Sales Data Submission"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("p",{className:"text-gray-700 mb-4",children:["You are about to ",o?"update":"submit"," sales data for ",n.jsx("span",{className:"font-semibold",children:ta(r)}),"."]}),n.jsx("p",{className:"text-gray-700 mb-4",children:"Please review all the information carefully before proceeding."}),n.jsx("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-lg p-4 mb-4",children:n.jsx("p",{className:"text-sm text-gray-800 font-medium",children:" This sales data will be used for financial reporting and reconciliation. Inaccurate data may lead to discrepancies."})}),n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-3 bg-gray-50 rounded-lg border-2 border-gray-200 hover:border-blue-400 transition-colors",children:[n.jsx("input",{type:"checkbox",checked:v,onChange:re=>y(re.target.checked),className:"mt-1 w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-800 font-medium",children:"I confirm that I have reviewed all the sales data and I take full responsibility for the accuracy of this information."})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:Ut,className:"flex-1 px-4 py-2.5 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Vt,disabled:!v,className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:from-green-600 hover:to-green-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:from-gray-400 disabled:to-gray-400",children:o?"Update Sales Data":"Save Sales Data"})]})]})})]})}function QF({onClose:e,employees:t}){const[r,a]=M.useState([]),[s,i]=M.useState({}),[o,l]=M.useState(!1),[d,u]=M.useState(null);M.useEffect(()=>{const g=t.filter(y=>y.type==="fulltime"||y.type==="Permanent");a(g);const v={};g.forEach(y=>{const w=y.email||`${y.name.toLowerCase().replace(/\s+/g,".")}@bhandar.com`,k=`Bhandar@${y.employeeId}`;v[y.id]={email:w,password:k}}),i(v)},[t]);const f=(g,v,y)=>{i(w=>({...w,[g]:{...w[g],[v]:y}}))},m=async()=>{l(!0),u(null);try{if(r.length===0){alert("No permanent employees found. Please add permanent employees first."),l(!1);return}const g=r.map(w=>({name:w.name,email:s[w.id].email,password:s[w.id].password,employeeId:w.employeeId}));console.log("Creating accounts for employees:",g);const v=await fetch("https://xssxnhrzxvtejavoqgwg.supabase.co/functions/v1/make-server-c2dd9b9d/auth/create-employee-accounts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${zn}`},body:JSON.stringify({employees:g})}),y=await v.json();if(console.log("Server response:",y),!v.ok)throw console.error("Server error:",y),new Error(y.error||`Failed to create accounts (Status: ${v.status})`);u({deleted:y.deleted||0,failed:y.failed,message:y.message,details:[...y.results||[],...y.errors||[]]})}catch(g){console.error("Error creating employee accounts:",g),alert(`Failed to create employee accounts: ${g instanceof Error?g.message:String(g)}`)}finally{l(!1)}},p=()=>{const g=r.map(N=>({"Employee ID":N.employeeId,Name:N.name,Email:s[N.id].email,Password:s[N.id].password,"Monthly Salary":N.monthlySalary||0})),v=[Object.keys(g[0]).join(","),...g.map(N=>Object.values(N).join(","))].join(`
`),y=new Blob([v],{type:"text/csv"}),w=window.URL.createObjectURL(y),k=document.createElement("a");k.href=w,k.download="employee-credentials.csv",k.click(),window.URL.revokeObjectURL(w)};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:n.jsx(Di,{className:"w-5 h-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl",children:"Prepare Employee Login Credentials"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Generate signup credentials for ",r.length," permanent employees"]})]})]}),n.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(Kr,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[n.jsxs("h3",{className:"flex items-center gap-2 text-yellow-800 mb-2",children:[n.jsx(xr,{className:"w-5 h-5"}),n.jsx("span",{className:"font-semibold",children:"Important: Employees Must Complete Signup"})]}),n.jsx("p",{className:"text-yellow-700 text-sm mb-2",children:d.message||"Old accounts have been deleted. Employees must now signup using their credentials below."}),n.jsx("p",{className:"text-yellow-700 text-sm",children:'Download the credentials below and share them with employees. They should go to the login page and click "Sign up" to create their accounts.'})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[n.jsx(ho,{className:"w-5 h-5"}),n.jsx("span",{children:"Accounts Prepared"})]}),n.jsx("div",{className:"text-2xl mt-2",children:d.deleted})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[n.jsx(xr,{className:"w-5 h-5"}),n.jsx("span",{children:"Failed"})]}),n.jsx("div",{className:"text-2xl mt-2",children:d.failed})]})]}),n.jsx("div",{className:"space-y-2",children:d.details.map((g,v)=>n.jsx("div",{className:`p-3 rounded-lg border ${g.status==="created"?"bg-green-50 border-green-200":g.status==="updated"?"bg-blue-50 border-blue-200":"bg-red-50 border-red-200"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:g.email}),n.jsxs("span",{className:"text-sm",children:[g.status==="created"&&n.jsx("span",{className:"text-green-700",children:" Created"}),g.status==="updated"&&n.jsx("span",{className:"text-blue-700",children:" Updated"}),g.error&&n.jsxs("span",{className:"text-red-700",children:[" ",g.error]})]})]})},v))}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsx("p",{className:"text-sm text-yellow-800",children:" All accounts have been processed. Download the credentials CSV to share login information with employees."})})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("p",{className:"text-sm text-blue-800",children:["Review and modify the email addresses and passwords below before creating accounts. Default passwords follow the pattern: Bhandar@","{EmployeeID}"]})}),n.jsx("div",{className:"space-y-3",children:r.map(g=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm",children:g.name}),n.jsxs("div",{className:"text-xs text-gray-600",children:["ID: ",g.employeeId]})]}),g.email&&n.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Has Account"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[n.jsx(Fh,{className:"w-3 h-3"}),"Email Address"]}),n.jsx("input",{type:"email",value:s[g.id]?.email||"",onChange:v=>f(g.id,"email",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"employee@bhandar.com"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[n.jsx(dj,{className:"w-3 h-3"}),"Password"]}),n.jsx("input",{type:"text",value:s[g.id]?.password||"",onChange:v=>f(g.id,"password",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono",placeholder:"Password123"})]})]})]},g.id))})]})}),n.jsx("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("button",{onClick:p,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Download Credentials CSV"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Close"}),!d&&n.jsx("button",{onClick:m,disabled:o,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Preparing Credentials..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Di,{className:"w-4 h-4"}),"Prepare Signup Credentials"]})})]})]})})]})})}function ds({value:e,onChange:t,label:r,className:a="",min:s,max:i}){const o=M.useRef(null),l=()=>{try{o.current?.showPicker?.()}catch{}},d=f=>f?ta(f):"Select date",u=a.includes("w-full");return n.jsxs("div",{className:u?"w-full":`flex items-center gap-2 ${a}`,children:[r&&n.jsx("label",{className:`text-sm text-gray-600 ${u?"block mb-2":"whitespace-nowrap"}`,children:r}),n.jsxs("div",{onClick:l,className:`relative flex items-center gap-2 px-4 py-2 border-2 border-gray-300 rounded-lg bg-white hover:border-purple-400 hover:bg-purple-50 transition-all cursor-pointer group ${u?"w-full":"min-w-[160px]"}`,children:[n.jsx(Dr,{className:"w-4 h-4 text-gray-500 group-hover:text-purple-600 transition-colors flex-shrink-0"}),n.jsx("span",{className:"text-sm text-gray-700 group-hover:text-purple-700 transition-colors flex-1",children:d(e)}),n.jsx("input",{ref:o,type:"date",value:e,onChange:f=>t(f.target.value),min:s,max:i,className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full z-10"})]})]})}const Yoe=(e,t,r,a,s,i)=>{const o=s.reduce((u,f)=>u+f.amount,0),l=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>Payslip - ${r} ${a}</title>
      <style>
        body {
          font-family: 'Arial', sans-serif;
          margin: 0;
          padding: 20px;
          color: #333;
        }
        .payslip-container {
          max-width: 800px;
          margin: 0 auto;
          border: 2px solid #9333ea;
          padding: 30px;
          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
        }
        .header {
          text-align: center;
          border-bottom: 3px solid #9333ea;
          padding-bottom: 20px;
          margin-bottom: 30px;
        }
        .company-name {
          font-size: 32px;
          font-weight: bold;
          color: #9333ea;
          margin-bottom: 5px;
        }
        .company-tagline {
          font-size: 14px;
          color: #666;
          font-style: italic;
        }
        .payslip-title {
          font-size: 24px;
          color: #9333ea;
          margin: 20px 0 10px 0;
          font-weight: bold;
        }
        .payslip-period {
          font-size: 16px;
          color: #666;
          margin-bottom: 20px;
        }
        .info-section {
          display: table;
          width: 100%;
          margin-bottom: 30px;
        }
        .info-row {
          display: table-row;
        }
        .info-label {
          display: table-cell;
          padding: 10px 0;
          font-weight: bold;
          color: #9333ea;
          width: 40%;
        }
        .info-value {
          display: table-cell;
          padding: 10px 0;
          color: #333;
        }
        .payment-table {
          width: 100%;
          border-collapse: collapse;
          margin: 20px 0;
          background: white;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .payment-table th {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 12px;
          text-align: left;
          font-weight: bold;
        }
        .payment-table td {
          padding: 12px;
          border-bottom: 1px solid #e5e7eb;
        }
        .payment-table tr:last-child td {
          border-bottom: none;
        }
        .payment-table tr:nth-child(even) {
          background: #faf5ff;
        }
        .total-section {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 20px;
          margin-top: 30px;
          border-radius: 8px;
          text-align: center;
        }
        .total-label {
          font-size: 18px;
          margin-bottom: 10px;
        }
        .total-amount {
          font-size: 36px;
          font-weight: bold;
        }
        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 2px solid #9333ea;
          text-align: center;
          font-size: 12px;
          color: #666;
        }
        .signature-section {
          margin-top: 60px;
          display: flex;
          justify-content: space-between;
        }
        .signature-box {
          text-align: center;
          width: 45%;
        }
        .signature-line {
          border-top: 2px solid #9333ea;
          margin-top: 50px;
          padding-top: 10px;
          font-weight: bold;
          color: #9333ea;
        }
        @media print {
          body {
            padding: 0;
          }
          .payslip-container {
            border: none;
            box-shadow: none;
          }
        }
      </style>
    </head>
    <body>
      <div class="payslip-container">
        <div class="header">
          <div class="company-name">BHANDAR-IMS</div>
          <div class="company-tagline">Food Business Inventory Management System</div>
          <div class="payslip-title">SALARY SLIP</div>
          <div class="payslip-period">For the Month of ${r} ${a}</div>
        </div>
        
        <div class="info-section">
          <div class="info-row">
            <div class="info-label">Employee Name:</div>
            <div class="info-value">${e}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee ID:</div>
            <div class="info-value">${t}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee Type:</div>
            <div class="info-value">${i==="fulltime"?"Permanent":"Contract"}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Payment Date:</div>
            <div class="info-value">${new Date().toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})}</div>
          </div>
        </div>

        <table class="payment-table">
          <thead>
            <tr>
              <th>Payment Date</th>
              <th>Description</th>
              <th style="text-align: right;">Amount ()</th>
            </tr>
          </thead>
          <tbody>
            ${s.map(u=>`
              <tr>
                <td>${new Date(u.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}</td>
                <td>Salary Payment</td>
                <td style="text-align: right;">${u.amount.toLocaleString("en-IN")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="total-section">
          <div class="total-label">Net Salary for ${r} ${a}</div>
          <div class="total-amount">${o.toLocaleString("en-IN")}</div>
        </div>

        <div class="signature-section">
          <div class="signature-box">
            <div class="signature-line">Employee Signature</div>
          </div>
          <div class="signature-box">
            <div class="signature-line">Authorized Signatory</div>
          </div>
        </div>

        <div class="footer">
          <p>This is a computer-generated payslip and does not require a signature.</p>
          <p> ${a} Bhandar-IMS. All rights reserved.</p>
        </div>
      </div>
    </body>
    </html>
  `,d=window.open("","_blank");d&&(d.document.write(l),d.document.close(),d.onload=()=>{d.print()})};function Tk({userRole:e,selectedDate:t,userEmployeeId:r,userName:a,selectedStoreId:s,isIncharge:i=!1,inchargeDesignation:o=null}){const[l,d]=M.useState("contract"),[u,f]=M.useState([]),[m,p]=M.useState([]),[g,v]=M.useState([]),[y,w]=M.useState([]),[k,N]=M.useState(!0),[b,A]=M.useState(!1),[E,S]=M.useState(!1),[_,C]=M.useState(""),[P,B]=M.useState("current"),[F,O]=M.useState(""),[R,Q]=M.useState(""),V=()=>{const $e=new Date,De=$e.getFullYear(),re=$e.getMonth(),le=new Date(De,re+1,0),Oe=`${De}-${String(re+1).padStart(2,"0")}-01`,Le=le.getDate(),rt=`${De}-${String(re+1).padStart(2,"0")}-${String(Le).padStart(2,"0")}`;return{start:Oe,end:rt,monthName:$e.toLocaleDateString("en-US",{month:"long",year:"numeric"})}},J=()=>{const $e=new Date,De=$e.getMonth()===0?$e.getFullYear()-1:$e.getFullYear(),re=$e.getMonth()===0?11:$e.getMonth()-1,le=new Date(De,re,1),Oe=new Date(De,re+1,0),Le=`${De}-${String(re+1).padStart(2,"0")}-01`,rt=Oe.getDate(),Ot=`${De}-${String(re+1).padStart(2,"0")}-${String(rt).padStart(2,"0")}`;return{start:Le,end:Ot,monthName:le.toLocaleDateString("en-US",{month:"long",year:"numeric"})}},ae=V(),L=J(),[H,ce]=M.useState(!1),[z,I]=M.useState(null),[Z,te]=M.useState(!1),[se,be]=M.useState({employeeIds:[],amount:"",date:t}),[Ee,_e]=M.useState(!1),[me,ye]=M.useState(null),[qe,G]=M.useState(!1),He=M.useMemo(()=>{let $e=u;return s&&($e=$e.filter(De=>De.storeId===s||De.storeId===null||De.storeId===void 0)),i&&r&&($e=$e.filter(De=>De.type==="contract"?!0:De.type==="fulltime"?De.inchargeId===r:!1)),$e},[u,s,i,r]),Ke=M.useMemo(()=>{if(!s)return m;const $e=He.map(De=>De.id);return m.filter(De=>$e.includes(De.employeeId))},[m,He,s]),ut=M.useMemo(()=>{let $e;if(P==="current")$e=Ke.filter(De=>De.date>=ae.start&&De.date<=ae.end);else if(P==="last")$e=Ke.filter(De=>De.date>=L.start&&De.date<=L.end);else{if(!F||!R)return[];$e=Ke.filter(De=>De.date>=F&&De.date<=R)}return $e},[Ke,P,ae,L,F,R]);M.useEffect(()=>{ze()},[]);const ze=async()=>{N(!0);try{console.log("Loading employees, payouts, salary advances, and overheads from server...");const[$e,De,re,le]=await Promise.all([cl(),il(),j2(),sD()]);console.log("Loaded employees:",$e),console.log("Loaded payouts:",De),console.log("Loaded salary advances:",re),console.log("Loaded overheads:",le),f($e||[]),p(De||[]),v(re||[]),w(le||[])}catch($e){console.error("Error loading payroll data:",$e)}finally{N(!1)}},Pe=async $e=>{try{const De=g.find(Oe=>Oe.id===$e);if(!De)return;const le={...De,status:"approved",approvedBy:a||r||"Cluster Head",approvedDate:new Date().toISOString()};await Nj($e,le),alert("Salary advance approved successfully!"),ze()}catch(De){console.error("Error approving salary advance:",De),alert("Failed to approve salary advance. Please try again.")}},ke=async $e=>{const De=prompt("Please provide a reason for rejection:");if(De)try{const re=g.find(Oe=>Oe.id===$e);if(!re)return;const le={...re,status:"rejected",rejectionReason:De,approvedBy:a||r||"Cluster Head",approvedDate:new Date().toISOString()};await Nj($e,le),alert("Salary advance rejected."),ze()}catch(re){console.error("Error rejecting salary advance:",re),alert("Failed to reject salary advance. Please try again.")}},Xe=async()=>{if(!_||!r)return;const $e=parseFloat(_);if(isNaN($e)||$e<=0){alert("Please enter a valid amount");return}try{const De=u.find(Le=>Le.employeeId===r);if(!De){alert("Employee not found");return}if(De.type!=="fulltime"){alert("Only permanent employees can apply for salary advance");return}if(g.some(Le=>Le.employeeId===De.id&&(Le.status==="pending"||Le.status==="approved"&&Le.remainingAmount>0))){alert("You already have an active or pending salary advance");return}const le=$e/4,Oe={employeeId:De.id,employeeName:De.name,employeeEmployeeId:De.employeeId,amount:$e,monthlyDeduction:le,remainingAmount:$e,status:"pending",requestDate:new Date().toISOString()};await N2(Oe),alert("Salary advance request submitted successfully!"),S(!1),C(""),ze()}catch(De){console.error("Error applying for salary advance:",De),alert("Failed to submit salary advance request. Please try again.")}},We=async()=>{if(se.employeeIds.length===0||!se.amount){alert("Please select employees and enter amount");return}if(!b)try{A(!0);const $e=se.employeeIds.map(re=>{const le=u.find(Oe=>Oe.id===re);return{id:crypto.randomUUID(),employeeId:re,employeeName:le?.name||"",amount:parseFloat(se.amount),date:se.date,createdAt:new Date().toISOString()}});console.log("Adding payouts:",$e);const De=await w2($e);console.log("Payouts added successfully:",De),p([...m,...$e]),te(!1),be({employeeIds:[],amount:"",date:t}),alert("Payout added successfully!")}catch($e){console.error("Error adding payout:",$e);const De=$e instanceof Error?$e.message:"Unknown error occurred";alert(`Failed to add payout: ${De}`)}finally{A(!1)}},ct=async()=>{if(z)try{console.log("PayrollManagement: Updating employee:",z),await(void 0)(z.id,z),f(u.map($e=>$e.id===z.id?z:$e)),ce(!1),I(null),alert("Employee updated successfully!")}catch($e){console.error("PayrollManagement: Error updating employee:",$e);const De=$e instanceof Error?$e.message:"Unknown error";alert(`Failed to update employee: ${De}`)}},Wt=async $e=>{if(confirm("Are you sure you want to delete this employee? This action cannot be undone."))try{await PD($e),f(u.filter(De=>De.id!==$e)),p(m.filter(De=>De.employeeId!==$e)),alert("Employee deleted successfully!")}catch(De){console.error("Error deleting employee:",De),alert("Failed to delete employee")}},Ut=async()=>{if(me)try{await BD(me.id,{amount:me.amount,date:me.date}),p(m.map($e=>$e.id===me.id?me:$e)),_e(!1),ye(null),alert("Payout updated successfully!")}catch($e){console.error("Error updating payout:",$e),alert("Failed to update payout")}},Vt=async $e=>{if(confirm("Are you sure you want to delete this payout?"))try{await Hm($e),p(m.filter(De=>De.id!==$e)),alert("Payout deleted successfully!")}catch(De){console.error("Error deleting payout:",De),alert("Failed to delete payout")}},Ar=()=>{const $e=He.filter(Le=>Le.type==="contract"),De=ut.filter(Le=>He.find(Ot=>Ot.id===Le.employeeId)?.type==="contract"),re=De.reduce((Le,rt)=>Le+rt.amount,0),le=$e.map(Le=>{const rt=De.filter($t=>$t.employeeId===Le.id),Ot=new Set(rt.map($t=>$t.date));return{...Le,daysWorked:Ot.size,totalPay:rt.reduce(($t,bt)=>$t+bt.amount,0)}}),Oe=le.reduce((Le,rt)=>Le+rt.daysWorked,0);return{totalPayout:re,employeeWorkDays:le,totalDaysWorked:Oe}},ln=()=>{const $e=He.filter(Oe=>Oe.type==="fulltime"),De=ut.filter(Oe=>He.find(rt=>rt.id===Oe.employeeId)?.type==="fulltime"),re=De.reduce((Oe,Le)=>Oe+Le.amount,0),le=$e.map(Oe=>{const Le=De.filter(rt=>rt.employeeId===Oe.id);return{...Oe,totalPaid:Le.reduce((rt,Ot)=>rt+Ot.amount,0),lastPayout:Le.length>0?Le[Le.length-1]:null}});return{totalPayout:re,employeePayouts:le}},Xr=$e=>{let De;if(P==="current")De=y.filter(le=>le.date>=ae.start&&le.date<=ae.end);else if(P==="last")De=y.filter(le=>le.date>=L.start&&le.date<=L.end);else{if(!F||!R)return 0;De=y.filter(le=>le.date>=F&&le.date<=R)}return De.filter(le=>le.category==="personal_expense"&&le.employeeId===$e).reduce((le,Oe)=>le+Oe.amount,0)},Ft=$e=>$e.split(" ").map(De=>De[0]).join("").toUpperCase().slice(0,2),ir=$e=>{const De=["bg-blue-500","bg-purple-500","bg-green-500","bg-orange-500","bg-pink-500","bg-indigo-500"];return De[$e%De.length]};Ar(),ln();const nt=l==="contract"?He.filter($e=>$e.type==="contract"):He.filter($e=>$e.type==="fulltime"),Bt=()=>e==="audit"?!1:l==="contract"&&e==="manager"||l==="permanent"&&e==="cluster_head";return k?n.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:n.jsx("div",{className:"text-gray-500",children:"Loading payroll data..."})}):n.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Payroll Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage and track employee payments"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:[n.jsx("div",{className:"border-b border-gray-200",children:n.jsxs("div",{className:"flex gap-8 px-6",children:[e==="manager"&&r&&n.jsx("button",{onClick:()=>d("my-payouts"),className:`py-4 border-b-2 transition-colors ${l==="my-payouts"?"border-green-500 text-green-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"My Payouts"}),n.jsx("button",{onClick:()=>d("contract"),className:`py-4 border-b-2 transition-colors ${l==="contract"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Contract Employees"}),(e==="cluster_head"||e==="audit")&&n.jsx("button",{onClick:()=>d("permanent"),className:`py-4 border-b-2 transition-colors ${l==="permanent"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Permanent Employees"}),(e==="cluster_head"||e==="audit")&&n.jsx("button",{onClick:()=>d("advances"),className:`py-4 border-b-2 transition-colors ${l==="advances"?"border-purple-500 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(yd,{className:"w-4 h-4"}),n.jsx("span",{children:"Salary Advances"}),g.filter($e=>$e.status==="pending").length>0&&n.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:g.filter($e=>$e.status==="pending").length})]})})]})}),n.jsxs("div",{className:"p-6 border-b border-gray-200 space-y-4",children:[n.jsx("div",{className:"flex gap-4 flex-wrap",children:Bt()&&n.jsxs("button",{onClick:()=>te(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(qn,{className:"w-4 h-4"}),"Add Payout"]})}),n.jsx("div",{className:"bg-gradient-to-br from-[#E8D5F2] to-[#D4B5F0] rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dr,{className:"w-5 h-5 text-purple-700"}),n.jsx("span",{className:"text-gray-900",children:"View Period:"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>B("current"),className:`px-4 py-2 rounded-lg transition-colors ${P==="current"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Current Month"}),n.jsx("button",{onClick:()=>B("last"),className:`px-4 py-2 rounded-lg transition-colors ${P==="last"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Last Month"}),n.jsx("button",{onClick:()=>B("custom"),className:`px-4 py-2 rounded-lg transition-colors ${P==="custom"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Custom Range"})]}),P==="current"?n.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg",children:n.jsx("span",{className:"text-gray-900 font-medium",children:ae.monthName})}):P==="last"?n.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg",children:n.jsx("span",{className:"text-gray-900 font-medium",children:L.monthName})}):n.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[n.jsx(ds,{label:"From:",value:F,onChange:O}),n.jsx(ds,{label:"To:",value:R,onChange:Q})]})]})})]}),l==="contract"&&(()=>{const $e=u.filter(le=>le.type==="contract"),De=ut.filter(le=>u.find(Le=>Le.id===le.employeeId)?.type==="contract");console.log("Rendering contract tab"),console.log("Total employees:",u.length),console.log("Contract employees:",$e.length,$e),console.log("Contract payouts:",De.length,De);const re=De.reduce((le,Oe)=>le+Oe.amount,0);return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Contract Employees"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Daily rate workers"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Employees"}),n.jsx("div",{className:"text-2xl text-blue-600",children:$e.length})]})]}),$e.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[n.jsx(kn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),n.jsx("p",{children:"No contract employees yet"}),n.jsx("p",{className:"text-sm mt-2",children:"Contact your cluster head to add employees"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:$e.map((le,Oe)=>{const Le=De.filter($t=>$t.employeeId===le.id),rt=Le.reduce(($t,bt)=>$t+bt.amount,0),Ot=new Set(Le.map($t=>$t.date)).size;return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-12 h-12 rounded-full ${ir(Oe)} flex items-center justify-center text-white`,children:Ft(le.name)}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:le.name}),n.jsx("div",{className:"text-xs text-gray-500",children:le.employeeId})]})]}),e!=="audit"&&n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>{I(le),ce(!0)},className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit employee",children:n.jsx(Pi,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>Wt(le.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete employee",children:n.jsx(ls,{className:"w-4 h-4"})})]})]}),le.role&&n.jsx("div",{className:"mb-2",children:n.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:le.role})}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Phone:"}),n.jsx("span",{className:"text-gray-900",children:le.phone})]}),le.dailyRate&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Daily Rate:"}),n.jsxs("span",{className:"text-green-600",children:["",le.dailyRate]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Days Worked:"}),n.jsx("span",{className:"text-gray-900",children:Ot})]}),n.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200",children:[n.jsx("span",{className:"text-gray-600",children:"Total Paid:"}),n.jsxs("span",{className:"text-gray-900",children:["",rt.toLocaleString()]})]})]})]},le.id)})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Recent Payouts"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Individual payout records for ",P==="current"?ae.monthName:"selected period"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Payout"}),n.jsxs("div",{className:"text-2xl text-green-600",children:["",re.toLocaleString()]})]})]}),De.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[n.jsx(qn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),n.jsx("p",{children:"No payouts recorded for this period"}),n.jsx("p",{className:"text-sm mt-2",children:"Add payouts to track contract employee payments"})]}):n.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),n.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"}),e!=="audit"&&n.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{children:De.sort((le,Oe)=>new Date(Oe.date).getTime()-new Date(le.date).getTime()).map((le,Oe)=>{const Le=u.find(rt=>rt.id===le.employeeId);return n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-4 px-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full ${ir(Oe)} flex items-center justify-center text-white text-sm`,children:Ft(le.employeeName)}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:le.employeeName}),Le?.role&&n.jsx("div",{className:"text-xs text-gray-500",children:Le.role})]})]})}),n.jsx("td",{className:"py-4 px-4",children:n.jsx("span",{className:"text-sm text-gray-600",children:Le?.employeeId||"-"})}),n.jsx("td",{className:"py-4 px-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dr,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-gray-900",children:new Date(le.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})}),n.jsx("td",{className:"py-4 px-4 text-right",children:n.jsxs("span",{className:"text-gray-900",children:["",le.amount.toLocaleString()]})}),e!=="audit"&&n.jsx("td",{className:"py-4 px-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{onClick:()=>{ye(le),_e(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit payout",children:n.jsx(Pi,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>Vt(le.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete payout",children:n.jsx(ls,{className:"w-4 h-4"})})]})})]},le.id)})})]})})]})]})})(),l==="my-payouts"&&r&&(()=>{const $e=m.filter(ht=>ht.employeeId===r),De=u.find(ht=>ht.employeeId===r),re=De?.type||"fulltime",le=g.filter(ht=>ht.employeeId===De?.id),Oe=le.some(ht=>ht.status==="pending"||ht.status==="approved"&&ht.remainingAmount>0),Le=new Date;Le.getDate();const rt=[];for(let ht=0;ht<12;ht++){const Rr=new Date(Le.getFullYear(),Le.getMonth()-ht,1),cr=Rr.toLocaleDateString("en-US",{month:"long"}),fr=Rr.getFullYear().toString(),Jr=Rr.getMonth()+1,Kn=new Date(Rr.getFullYear(),Rr.getMonth()+1,5),_n=Le>=Kn,dr=$e.filter(tt=>{const at=new Date(tt.date);return at.getMonth()+1===Jr&&at.getFullYear()===Rr.getFullYear()}),ve=dr.reduce((tt,at)=>tt+at.amount,0);rt.push({month:cr,year:fr,payouts:dr,total:ve,isAvailable:_n})}const Ot=ut.filter(ht=>ht.employeeId===r),$t=Ot.reduce((ht,Rr)=>ht+Rr.amount,0),bt=De?Xr(De.id):0,hr=-(bt+$t);return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"My Payout History"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View your salary records and download monthly payslips"})]}),re==="fulltime"&&n.jsxs("button",{onClick:()=>S(!0),disabled:Oe,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${Oe?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 shadow-md"}`,title:Oe?"You already have an active salary advance":"Apply for salary advance",children:[n.jsx(yd,{className:"w-4 h-4"}),Oe?"Advance Active":"Apply for Advance"]})]}),le.length>0&&n.jsx("div",{className:"mb-6 space-y-3",children:le.map(ht=>n.jsx("div",{className:`border-2 rounded-lg p-4 ${ht.status==="pending"?"border-yellow-300 bg-yellow-50":ht.status==="approved"?"border-green-300 bg-green-50":"border-red-300 bg-red-50"}`,children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[ht.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx(fn,{className:"w-5 h-5 text-yellow-600"}),n.jsx("span",{className:"font-medium text-yellow-900",children:"Advance Request Pending"})]}),ht.status==="approved"&&n.jsxs(n.Fragment,{children:[n.jsx(zt,{className:"w-5 h-5 text-green-600"}),n.jsx("span",{className:"font-medium text-green-900",children:"Advance Approved"})]}),ht.status==="rejected"&&n.jsxs(n.Fragment,{children:[n.jsx(Na,{className:"w-5 h-5 text-red-600"}),n.jsx("span",{className:"font-medium text-red-900",children:"Advance Rejected"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Amount"}),n.jsxs("p",{className:"font-semibold text-gray-900",children:["",ht.amount.toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Monthly Deduction"}),n.jsxs("p",{className:"font-semibold text-gray-900",children:["",ht.monthlyDeduction.toLocaleString()]})]}),ht.status==="approved"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Remaining"}),n.jsxs("p",{className:"font-semibold text-gray-900",children:["",ht.remainingAmount.toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Request Date"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(ht.requestDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]})]}),ht.status==="approved"&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-300",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Deduction Period"}),n.jsx("p",{className:"text-sm text-gray-900",children:(()=>{const[Rr,cr]=ht.startMonth.split("-"),[fr,Jr]=ht.endMonth.split("-"),Kn=new Date(parseInt(Rr),parseInt(cr)-1,1),_n=new Date(parseInt(fr),parseInt(Jr)-1,1),dr=Kn.toLocaleDateString("en-US",{month:"short",year:"numeric"}),ve=_n.toLocaleDateString("en-US",{month:"short",year:"numeric"});return`${dr} to ${ve} (${ht.installments} months)`})()})]}),ht.status==="rejected"&&ht.rejectionReason&&n.jsxs("div",{className:"mt-2 pt-2 border-t border-red-200",children:[n.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Rejection Reason"}),n.jsx("p",{className:"text-sm text-red-900",children:ht.rejectionReason})]})]})})},ht.id))}),n.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6 mb-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Period"}),n.jsx("p",{className:"text-sm text-gray-700 font-medium",children:P==="current"?ae.monthName:P==="last"?L.monthName:`${F} to ${R}`})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[Ot.length," payment",Ot.length!==1?"s":""]})})]}),n.jsxs("div",{className:"pt-4 border-t border-green-200 space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Gross Pay"}),n.jsxs("p",{className:"text-2xl text-green-600",children:["",$t.toLocaleString()]})]}),bt>0&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Y9,{className:"w-4 h-4 text-red-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Personal Expenses"})]}),n.jsxs("p",{className:"text-xl text-red-600",children:["",bt.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-green-300",children:[n.jsx("p",{className:"text-base font-semibold text-gray-900",children:"Net Amount"}),n.jsxs("p",{className:"text-3xl font-bold text-green-700",children:["",hr.toLocaleString()]})]})]})]})}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(vi,{className:"w-5 h-5 text-purple-600"}),n.jsx("h3",{className:"text-lg text-gray-900",children:"Monthly Payslips"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Payslips are available for download after the 4th of each month"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:rt.map((ht,Rr)=>n.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${ht.isAvailable&&ht.payouts.length>0?"border-purple-300 bg-gradient-to-br from-purple-50 to-pink-50 hover:shadow-lg":"border-gray-200 bg-gray-50 opacity-60"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"text-gray-900 font-semibold",children:[ht.month," ",ht.year]}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[ht.payouts.length," payment",ht.payouts.length!==1?"s":""]})]}),ht.isAvailable&&ht.payouts.length>0?n.jsxs("button",{onClick:()=>Yoe(a||"Employee",r,ht.month,ht.year,ht.payouts,re),className:"flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",title:"Download Payslip",children:[n.jsx(ws,{className:"w-4 h-4"}),"Download"]}):n.jsx("div",{className:"px-3 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm cursor-not-allowed",children:ht.payouts.length===0?"No Data":"Not Available"})]}),n.jsxs("div",{className:"pt-3 border-t border-gray-300",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Amount"}),n.jsxs("p",{className:"text-xl text-gray-900 font-semibold",children:["",ht.total.toLocaleString("en-IN")]})]})]},Rr))})]}),n.jsx("div",{className:"mb-4",children:n.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Payment Details"})}),Ot.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[n.jsx(qn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),n.jsx("p",{children:"No payouts found for the selected period"})]}):n.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),n.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"})]})}),n.jsx("tbody",{children:Ot.sort((ht,Rr)=>new Date(Rr.date).getTime()-new Date(ht.date).getTime()).map(ht=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-4 px-4",children:n.jsx("span",{className:"text-sm text-gray-900",children:new Date(ht.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})}),n.jsx("td",{className:"py-4 px-4",children:n.jsx("span",{className:"text-sm text-gray-600",children:r})}),n.jsx("td",{className:"py-4 px-4 text-right",children:n.jsxs("span",{className:"text-green-600",children:["",ht.amount.toLocaleString()]})})]},ht.id))})]})})]})})(),l==="permanent"&&(()=>{const $e=u.filter(le=>le.type==="fulltime"),De=ut.filter(le=>u.find(Le=>Le.id===le.employeeId)?.type==="fulltime"),re=De.reduce((le,Oe)=>le+Oe.amount,0);return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Permanent Employees"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Full-time employees - Monthly/periodic payouts"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Employees"}),n.jsx("div",{className:"text-2xl text-blue-600",children:$e.length})]})]}),$e.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[n.jsx(kn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),n.jsx("p",{children:"No permanent employees yet"}),n.jsx("p",{className:"text-sm mt-2",children:"Contact your cluster head to add employees"})]}):n.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Role"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Phone"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Last Payout"}),n.jsxs("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:["Total Paid (",P==="current"?"This Month":P==="last"?"Last Month":"Period",")"]}),n.jsxs("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:["Personal Expenses (",P==="current"?"This Month":P==="last"?"Last Month":"Period",")"]}),n.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Net Amount"}),e==="cluster_head"&&n.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{children:$e.map((le,Oe)=>{const Le=De.filter(hr=>hr.employeeId===le.id),rt=Le.reduce((hr,ht)=>hr+ht.amount,0),Ot=Xr(le.id),$t=-(Ot+rt),bt=Le.length>0?Le.sort((hr,ht)=>new Date(ht.date).getTime()-new Date(hr.date).getTime())[0]:null;return n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-4 px-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full ${ir(Oe)} flex items-center justify-center text-white text-sm`,children:Ft(le.name)}),n.jsx("div",{className:"text-gray-900",children:le.name})]})}),n.jsx("td",{className:"py-4 px-4",children:n.jsx("span",{className:"text-sm text-gray-600",children:le.employeeId})}),n.jsx("td",{className:"py-4 px-4",children:le.role&&n.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:le.role})}),n.jsx("td",{className:"py-4 px-4",children:n.jsx("span",{className:"text-sm text-gray-600",children:le.phone})}),n.jsx("td",{className:"py-4 px-4",children:bt?n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:new Date(bt.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),n.jsxs("div",{className:"text-xs text-gray-500",children:["",bt.amount.toLocaleString()]})]}):n.jsx("span",{className:"text-gray-400 text-sm",children:"No payouts"})}),n.jsx("td",{className:"py-4 px-4 text-right",children:n.jsxs("span",{className:"text-green-600",children:["",rt.toLocaleString()]})}),n.jsx("td",{className:"py-4 px-4 text-right",children:Ot>0?n.jsxs("span",{className:"text-red-600",children:["- ",Ot.toLocaleString()]}):n.jsx("span",{className:"text-gray-400",children:"0"})}),n.jsx("td",{className:"py-4 px-4 text-right",children:n.jsxs("span",{className:`font-semibold ${$t<0?"text-red-600":$t>0?"text-green-600":"text-gray-900"}`,children:["",$t.toLocaleString()]})}),e==="cluster_head"&&n.jsx("td",{className:"py-4 px-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{onClick:()=>{I(le),ce(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit employee",children:n.jsx(Pi,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>Wt(le.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete employee",children:n.jsx(ls,{className:"w-4 h-4"})})]})})]},le.id)})})]})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Payout History"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Salary payments for ",P==="current"?ae.monthName:P==="last"?L.monthName:"selected period"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Payout"}),n.jsxs("div",{className:"text-2xl text-green-600",children:["",re.toLocaleString()]})]})]}),De.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[n.jsx(qn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),n.jsx("p",{children:"No payouts recorded for this period"}),n.jsx("p",{className:"text-sm mt-2",children:"Add payouts to track permanent employee payments"})]}):n.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),n.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"}),e==="cluster_head"&&n.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{children:De.sort((le,Oe)=>new Date(Oe.date).getTime()-new Date(le.date).getTime()).map((le,Oe)=>{const Le=u.find(rt=>rt.id===le.employeeId);return n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-4 px-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full ${ir(Oe)} flex items-center justify-center text-white text-sm`,children:Ft(le.employeeName)}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:le.employeeName}),Le?.role&&n.jsx("div",{className:"text-xs text-gray-500",children:Le.role})]})]})}),n.jsx("td",{className:"py-4 px-4",children:n.jsx("span",{className:"text-sm text-gray-600",children:Le?.employeeId||"-"})}),n.jsx("td",{className:"py-4 px-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dr,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-gray-900",children:new Date(le.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})}),n.jsx("td",{className:"py-4 px-4 text-right",children:n.jsxs("span",{className:"text-gray-900",children:["",le.amount.toLocaleString()]})}),e==="cluster_head"&&n.jsx("td",{className:"py-4 px-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{onClick:()=>{ye(le),_e(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit payout",children:n.jsx(Pi,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>Vt(le.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete payout",children:n.jsx(ls,{className:"w-4 h-4"})})]})})]},le.id)})})]})})]})]})})(),l==="advances"&&(e==="cluster_head"||e==="audit")&&(()=>{const $e=g.filter(le=>le.status==="pending"),De=g.filter(le=>le.status==="approved"),re=g.filter(le=>le.status==="rejected");return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Salary Advance Requests"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Review and manage employee salary advance requests"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-yellow-700 mb-1",children:"Pending Requests"}),n.jsx("p",{className:"text-2xl font-semibold text-yellow-900",children:$e.length})]}),n.jsx(fn,{className:"w-10 h-10 text-yellow-400"})]})}),n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-green-700 mb-1",children:"Approved"}),n.jsx("p",{className:"text-2xl font-semibold text-green-900",children:De.length})]}),n.jsx(zt,{className:"w-10 h-10 text-green-400"})]})}),n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-red-700 mb-1",children:"Rejected"}),n.jsx("p",{className:"text-2xl font-semibold text-red-900",children:re.length})]}),n.jsx(Na,{className:"w-10 h-10 text-red-400"})]})})]}),$e.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(fn,{className:"w-5 h-5 text-yellow-600"}),"Pending Requests"]}),n.jsx("div",{className:"space-y-4",children:$e.map(le=>n.jsxs("div",{className:"border-2 border-yellow-300 bg-yellow-50 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:le.employeeName}),n.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Employee ID: ",le.employeeEmployeeId]}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Requested on ",new Date(le.requestDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Advance Amount"}),n.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:["",le.amount.toLocaleString("en-IN")]})]})]}),n.jsx("div",{className:"bg-white border border-yellow-200 rounded-lg p-4 mb-4",children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Monthly Deduction"}),n.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",le.monthlyDeduction.toLocaleString("en-IN")]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Installments"}),n.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[le.installments," months"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Start Month"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:(()=>{const[Oe,Le]=le.startMonth.split("-");return new Date(parseInt(Oe),parseInt(Le)-1,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})()})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"End Month"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:(()=>{const[Oe,Le]=le.endMonth.split("-");return new Date(parseInt(Oe),parseInt(Le)-1,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})()})]})]})}),e==="cluster_head"&&n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:()=>Pe(le.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md font-medium",children:[n.jsx(zt,{className:"w-5 h-5"}),n.jsx("span",{children:"Approve"})]}),n.jsxs("button",{onClick:()=>ke(le.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-red-600 to-rose-600 text-white rounded-lg hover:from-red-700 hover:to-rose-700 transition-all shadow-md font-medium",children:[n.jsx(Na,{className:"w-5 h-5"}),n.jsx("span",{children:"Reject"})]})]})]},le.id))})]}),De.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(zt,{className:"w-5 h-5 text-green-600"}),"Approved Advances"]}),n.jsx("div",{className:"space-y-4",children:De.map(le=>n.jsxs("div",{className:"border-2 border-green-300 bg-green-50 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:le.employeeName}),n.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Employee ID: ",le.employeeEmployeeId]}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Approved on ",new Date(le.approvedDate||"").toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Amount"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",le.amount.toLocaleString("en-IN")]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Remaining: ",le.remainingAmount.toLocaleString("en-IN")]})]})]}),n.jsxs("div",{className:"bg-white border border-green-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Deduction Progress"}),n.jsx("div",{className:"space-y-2",children:le.deductions.map((Oe,Le)=>n.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${Oe.deducted?"bg-green-100 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[Oe.deducted?n.jsx(zt,{className:"w-4 h-4 text-green-600"}):n.jsx(fn,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:new Date(Oe.month+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})})]}),n.jsxs("span",{className:`text-sm font-semibold ${Oe.deducted?"text-green-700":"text-gray-700"}`,children:["",Oe.amount.toLocaleString("en-IN")]})]},Le))})]})]},le.id))})]}),re.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(Na,{className:"w-5 h-5 text-red-600"}),"Rejected Requests"]}),n.jsx("div",{className:"space-y-4",children:re.map(le=>n.jsxs("div",{className:"border-2 border-red-300 bg-red-50 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:le.employeeName}),n.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Employee ID: ",le.employeeEmployeeId]}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Rejected on ",new Date(le.approvedDate||"").toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Requested Amount"}),n.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["",le.amount.toLocaleString("en-IN")]})]})]}),le.rejectionReason&&n.jsxs("div",{className:"bg-white border border-red-200 rounded-lg p-3",children:[n.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:"Rejection Reason:"}),n.jsx("p",{className:"text-sm text-red-700",children:le.rejectionReason})]})]},le.id))})]}),g.length===0&&n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-12 text-center",children:[n.jsx(yd,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"No Salary Advance Requests"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Employees can apply for salary advances from their dashboard"})]})]})})()]})]}),E&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl text-gray-900",children:"Apply for Salary Advance"}),n.jsx("button",{onClick:()=>S(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(Kr,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-purple-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-purple-800 font-medium mb-1",children:"Recovery Terms"}),n.jsx("p",{className:"text-sm text-purple-700",children:"The advance will be automatically deducted from your salary over the next 4 months in equal installments."})]})]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Advance Amount *"}),n.jsx("input",{type:"number",value:_,onChange:$e=>C($e.target.value),placeholder:"Enter amount (e.g., 10000)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),_&&!isNaN(parseFloat(_))&&parseFloat(_)>0&&n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Monthly Deduction Preview:"}),n.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["",(parseFloat(_)/4).toLocaleString("en-IN"),"/month"]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"for 4 months"})]})]}),n.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[n.jsx("button",{onClick:()=>{S(!1),C("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-gray-700",children:"Cancel"}),n.jsx("button",{onClick:Xe,disabled:!_||isNaN(parseFloat(_))||parseFloat(_)<=0,className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit Request"})]})]})}),H&&z&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl text-gray-900",children:"Edit Employee"}),n.jsx("button",{onClick:()=>ce(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(Kr,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employee ID"}),n.jsx("input",{type:"text",value:z.employeeId,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Name *"}),n.jsx("input",{type:"text",value:z.name,onChange:$e=>I({...z,name:$e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone *"}),n.jsx("input",{type:"tel",value:z.phone,onChange:$e=>I({...z,phone:$e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role (Optional)"}),n.jsx("input",{type:"text",value:z.role||"",onChange:$e=>I({...z,role:$e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),z.type==="contract"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Daily Rate (Optional)"}),n.jsx("input",{type:"number",value:z.dailyRate||"",onChange:$e=>I({...z,dailyRate:parseFloat($e.target.value)||void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]}),n.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[n.jsx("button",{onClick:()=>ce(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:ct,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Update Employee"})]})]})}),Z&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl text-gray-900",children:"Add Payout"}),n.jsx("button",{onClick:()=>te(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(Kr,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Employees *"}),n.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-40 overflow-y-auto space-y-2",children:nt.map($e=>n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[n.jsx("input",{type:"checkbox",checked:se.employeeIds.includes($e.id),onChange:De=>{De.target.checked?be({...se,employeeIds:[...se.employeeIds,$e.id]}):be({...se,employeeIds:se.employeeIds.filter(re=>re!==$e.id)})},className:"w-4 h-4"}),n.jsxs("span",{className:"text-sm text-gray-900",children:[$e.name," (",$e.employeeId,")"]})]},$e.id))}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[se.employeeIds.length," employee(s) selected"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Amount () *"}),n.jsx("input",{type:"number",step:"0.01",value:se.amount,onChange:$e=>be({...se,amount:$e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Enter amount"})]}),n.jsx(ds,{label:"Date *",value:se.date,onChange:$e=>be({...se,date:$e}),className:"w-full"})]}),n.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[n.jsx("button",{onClick:()=>te(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:We,disabled:b,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:b?"Adding...":"Add Payout"})]})]})}),Ee&&me&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl text-gray-900",children:"Edit Payout"}),n.jsx("button",{onClick:()=>_e(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(Kr,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employee"}),n.jsx("input",{type:"text",value:me.employeeName,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Amount () *"}),n.jsx("input",{type:"number",step:"0.01",value:me.amount,onChange:$e=>ye({...me,amount:parseFloat($e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),n.jsx(ds,{label:"Date *",value:me.date,onChange:$e=>ye({...me,date:$e}),className:"w-full"})]}),n.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[n.jsx("button",{onClick:()=>_e(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Ut,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Update Payout"})]})]})}),qe&&n.jsx(QF,{onClose:()=>G(!1),employees:u})]})}function Xoe({context:e,selectedStoreId:t,selectedProductionHouseId:r}){const[a,s]=M.useState("week"),[i,o]=M.useState(""),[l,d]=M.useState(""),[u,f]=M.useState([]),[m,p]=M.useState(null),[g,v]=M.useState(!0),[y,w]=M.useState(null),k=t||e.user?.storeId;M.useEffect(()=>{b()},[e.inventory,e.salesData,e.productionData,e.stockRequests,a,i,l,k]);const N=()=>{const C=new Date;let P=new Date;switch(a){case"day":P=new Date(C);break;case"week":P=new Date(C),P.setDate(C.getDate()-7);break;case"month":P=new Date(C),P.setMonth(C.getMonth()-1);break;case"custom":if(i&&l)return{startDate:new Date(i),endDate:new Date(l)};P=new Date(C),P.setDate(C.getDate()-7);break}return{startDate:P,endDate:C}},b=()=>{v(!0);const{startDate:C,endDate:P}=N(),B=new Map,F=new Date(C);for(;F<=P;){const L=F.getFullYear(),H=String(F.getMonth()+1).padStart(2,"0"),ce=String(F.getDate()).padStart(2,"0"),z=`${L}-${H}-${ce}`;B.set(z,{date:z,inventoryLogged:!1,inventoryCount:0,inventoryLoggedAt:null,inventoryLoggedBy:"",salesLogged:!1,salesLoggedAt:null,salesLoggedBy:"",productionLogged:!1,productionLoggedAt:null,productionLoggedBy:"",stockRequestLogged:!1,stockRequestLoggedAt:null,stockRequestLoggedBy:"",cashDiscrepancy:0,managerEmail:"",managerName:"",status:"missing",lateEntry:!1}),F.setDate(F.getDate()+1)}const O=new Map;(k?e.inventory.filter(L=>L.storeId===k):e.inventory).forEach(L=>{O.has(L.date)||O.set(L.date,[]),O.get(L.date)?.push(L)}),O.forEach((L,H)=>{if(B.has(H)){const ce=B.get(H);if(ce.inventoryLogged=!0,ce.inventoryCount=L.length,L.length>0){const z=L[0],Z=z.id.split("-")[0];if(z.createdByName?ce.inventoryLoggedBy=z.createdByName:z.createdByEmail?ce.inventoryLoggedBy=z.createdByEmail:z.createdBy?typeof z.createdBy=="string"&&z.createdBy.includes("-")?ce.inventoryLoggedBy=z.userId?`User ${z.userId.substring(0,8)}`:"Manager":ce.inventoryLoggedBy=z.createdBy:z.userId?ce.inventoryLoggedBy=`User ${z.userId.substring(0,8)}`:ce.inventoryLoggedBy="Unknown User",Z){const te=parseInt(Z);if(!isNaN(te)&&te>0){ce.inventoryLoggedAt=new Date(te).toISOString();const se=new Date(te),be=new Date(H+"T23:59:59");ce.lateEntry=se>be}}}}}),(k?e.salesData.filter(L=>L.storeId===k):e.salesData).forEach(L=>{if(B.has(L.date)){const H=B.get(L.date);H.salesLogged=!0,H.cashDiscrepancy=Math.abs(L.salesDiscrepancy!==void 0?L.salesDiscrepancy:L.cashOffset||0),L.createdByName?H.salesLoggedBy=L.createdByName:L.createdByEmail?H.salesLoggedBy=L.createdByEmail:L.createdBy?typeof L.createdBy=="string"&&L.createdBy.includes("-")?H.salesLoggedBy="Manager":H.salesLoggedBy=L.createdBy:H.salesLoggedBy="Unknown User",e.user&&(H.managerEmail=e.user.email,H.managerName=e.user.name);const ce=L.id.split("-")[0];if(ce){const z=parseInt(ce);if(!isNaN(z)&&z>0){H.salesLoggedAt=new Date(z).toISOString();const I=new Date(z),Z=new Date(L.date+"T23:59:59");I>Z&&(H.lateEntry=!0)}}}});const V=k?e.stockRequests.filter(L=>L.storeId===k):e.stockRequests;console.log(" DataCapture - Stock Requests Debug:",{totalStockRequests:e.stockRequests.length,filteredStockRequests:V.length,effectiveStoreId:k,stockRequestDates:V.map(L=>L.requestDate),dateMapKeys:Array.from(B.keys()),stockRequestIds:V.map(L=>L.id),sampleRequest:V[0],dateRangeStart:Array.from(B.keys()).sort()[0],dateRangeEnd:Array.from(B.keys()).sort().reverse()[0]}),V.forEach(L=>{if(B.has(L.requestDate)){const H=B.get(L.requestDate);H.stockRequestLogged=!0,L.requestedByName?H.stockRequestLoggedBy=L.requestedByName:L.requestedBy?H.stockRequestLoggedBy=L.requestedBy:H.stockRequestLoggedBy="Unknown User";const ce=L.id.split("-")[0];if(ce){const z=parseInt(ce);if(!isNaN(z)&&z>1e12){H.stockRequestLoggedAt=new Date(z).toISOString();const I=new Date(z),Z=new Date(L.requestDate+"T23:59:59");I>Z&&(H.lateEntry=!0)}else H.stockRequestLoggedAt=new Date(L.requestDate+"T12:00:00").toISOString()}}}),B.forEach(L=>{const H=L.inventoryLogged,ce=L.salesLogged;H&&ce?L.status="complete":H||ce?L.status="partial":L.status="missing"});const J=Array.from(B.values()).sort((L,H)=>new Date(H.date).getTime()-new Date(L.date).getTime());f(J);const ae={totalDays:J.length,daysWithData:J.filter(L=>L.status!=="missing").length,totalDiscrepancy:J.reduce((L,H)=>L+H.cashDiscrepancy,0),avgDiscrepancy:0,completionRate:0,onTimeRate:0};ae.avgDiscrepancy=ae.totalDiscrepancy/(J.filter(L=>L.salesLogged).length||1),ae.completionRate=J.filter(L=>L.status==="complete").length/ae.totalDays*100,ae.onTimeRate=J.filter(L=>L.status==="complete"&&!L.lateEntry).length/ae.totalDays*100,p(ae),v(!1)},A=C=>C?S2(C):"-",E=C=>ta(C),S=C=>{switch(C){case"complete":return"bg-green-100 text-green-800";case"partial":return"bg-yellow-100 text-yellow-800";case"missing":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},_=C=>{switch(C){case"complete":return n.jsx(zt,{className:"w-5 h-5 text-green-600"});case"partial":return n.jsx(yn,{className:"w-5 h-5 text-yellow-600"});case"missing":return n.jsx(Na,{className:"w-5 h-5 text-red-600"});default:return n.jsx(fn,{className:"w-5 h-5 text-gray-600"})}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-gray-900 mb-1",children:" Data Capture Monitor"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Track daily data logging and manager performance"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{onClick:()=>s("day"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a==="day"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Today"}),n.jsx("button",{onClick:()=>s("week"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a==="week"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"7 Days"}),n.jsx("button",{onClick:()=>s("month"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a==="month"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"30 Days"}),n.jsx("button",{onClick:()=>s("custom"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a==="custom"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Custom"})]})]}),a==="custom"&&n.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[n.jsx(ds,{label:"Start Date",value:i,onChange:o}),n.jsx(ds,{label:"End Date",value:l,onChange:d})]})]}),m&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Dr,{className:"w-5 h-5 text-blue-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total Days"})]}),n.jsx("p",{className:"text-2xl text-gray-900",children:m.totalDays})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(zt,{className:"w-5 h-5 text-green-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Completion Rate"})]}),n.jsxs("p",{className:"text-2xl text-gray-900",children:[m.completionRate.toFixed(1),"%"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(fn,{className:"w-5 h-5 text-orange-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"On-Time Rate"})]}),n.jsxs("p",{className:"text-2xl text-gray-900",children:[m.onTimeRate.toFixed(1),"%"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(p2,{className:"w-5 h-5 text-red-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total Discrepancy"})]}),n.jsxs("p",{className:"text-2xl text-gray-900",children:["",m.totalDiscrepancy.toFixed(2)]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(hn,{className:"w-5 h-5 text-purple-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Avg Discrepancy"})]}),n.jsxs("p",{className:"text-2xl text-gray-900",children:["",m.avgDiscrepancy.toFixed(2)]})]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Inventory"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Sales"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Cash Discrepancy"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:g?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"Loading data..."})}):u.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"No data for selected period"})}):u.map(C=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[C.lateEntry&&n.jsx(yn,{className:"w-4 h-4 text-orange-500",title:"Late Entry"}),n.jsx("span",{className:"text-sm text-gray-900",children:E(C.date)})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[_(C.status),n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S(C.status)}`,children:C.status.charAt(0).toUpperCase()+C.status.slice(1)})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.inventoryLogged?n.jsxs("div",{className:"text-sm",children:[n.jsxs("p",{className:"text-gray-900",children:[C.inventoryCount," items"]}),n.jsx("p",{className:"text-gray-500",children:A(C.inventoryLoggedAt)}),C.inventoryLoggedBy&&n.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",C.inventoryLoggedBy]})]}):n.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.salesLogged?n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"text-gray-900",children:" Logged"}),n.jsx("p",{className:"text-gray-500",children:A(C.salesLoggedAt)}),C.salesLoggedBy&&n.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",C.salesLoggedBy]})]}):n.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.salesLogged?n.jsxs("span",{className:`text-sm ${C.cashDiscrepancy>500?"text-red-600":"text-gray-900"}`,children:["",C.cashDiscrepancy.toFixed(2)]}):n.jsx("span",{className:"text-sm text-gray-400",children:"-"})})]},C.date))})]})})}),n.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[n.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Legend:"}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zt,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"text-gray-600",children:"Complete - Both Inventory AND Sales logged"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(yn,{className:"w-4 h-4 text-yellow-600"}),n.jsx("span",{className:"text-gray-600",children:"Partial - At least one data type logged"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Na,{className:"w-4 h-4 text-red-600"}),n.jsx("span",{className:"text-gray-600",children:"Missing - No data logged"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(yn,{className:"w-4 h-4 text-orange-500"}),n.jsx("span",{className:"text-gray-600",children:"Orange icon = Late entry (logged after midnight)"})]})]})]})]})}function Joe({storeId:e,accessToken:t,thresholds:r,onClose:a,onSave:s}){const[i,o]=M.useState(r),[l,d]=M.useState(!1),u=[{key:"chicken",label:"Chicken Momos"},{key:"chickenCheese",label:"Chicken Cheese Momos"},{key:"veg",label:"Veg Momos"},{key:"cheeseCorn",label:"Cheese Corn Momos"},{key:"paneer",label:"Paneer Momos"},{key:"vegKurkure",label:"Veg Kurkure Momos"},{key:"chickenKurkure",label:"Chicken Kurkure Momos"}],f=(p,g,v)=>{const y=parseInt(v)||0;o({...i,[p]:{...i[p],[g]:y}})},m=async()=>{try{d(!0),await v5(t,e,i),s(i),Zt.success("Stock thresholds saved successfully"),a()}catch(p){console.error("Error saving thresholds:",p),Zt.error("Failed to save thresholds")}finally{d(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-500 p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:n.jsx(Ii,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-white",children:"Stock Alert Thresholds"}),n.jsx("p",{className:"text-sm text-white/80",children:"Customize alert levels for each momo type"})]})]}),n.jsx("button",{onClick:a,className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center hover:bg-white/30 transition-all",children:n.jsx(Kr,{className:"w-5 h-5 text-white"})})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[n.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6",children:[n.jsxs("p",{className:"text-sm text-blue-900",children:[n.jsx("strong",{children:"How it works:"})," Set three threshold levels for each momo type. When stock falls below these levels, color-coded alerts will appear on the stock cards."]}),n.jsxs("div",{className:"mt-3 flex flex-wrap gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"High: Stock above high threshold"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Medium: Between medium and high"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Low: Between low and medium"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Critical: Below low threshold or zero"})]})]})]}),n.jsx("div",{className:"space-y-4",children:u.map(({key:p,label:g})=>{const v=i[p]||{high:600,medium:300,low:150};return n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:g}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"High Threshold (plates)"}),n.jsx("input",{type:"number",value:v.high,onChange:y=>f(p,"high",y.target.value),className:"w-full px-3 py-2 border-2 border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., 1200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Medium Threshold (plates)"}),n.jsx("input",{type:"number",value:v.medium,onChange:y=>f(p,"medium",y.target.value),className:"w-full px-3 py-2 border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"e.g., 600"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Low Threshold (plates)"}),n.jsx("input",{type:"number",value:v.low,onChange:y=>f(p,"low",y.target.value),className:"w-full px-3 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"e.g., 300"})]})]})]},p)})})]}),n.jsxs("div",{className:"border-t-2 border-gray-200 p-6 bg-gray-50 flex justify-between items-center",children:[n.jsx("button",{onClick:a,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:m,disabled:l,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 disabled:opacity-50",children:l?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(rc,{className:"w-5 h-5"}),"Save Thresholds"]})})]})]})})}function Qoe({context:e,highlightRequestId:t,selectedStoreId:r,onNavigateToManageItems:a}){const[s,i]=M.useState([]),[o,l]=M.useState(!0),[d,u]=M.useState(!1),[f,m]=M.useState(""),[p,g]=M.useState("all"),[v,y]=M.useState("daily"),[w,k]=M.useState({from:new Date(Date.now()-10080*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),[N,b]=M.useState([]),[A,E]=M.useState({}),[S,_]=M.useState(""),C=()=>new Date().toISOString().split("T")[0],[P,B]=M.useState(C()),[F,O]=M.useState(null),[R,Q]=M.useState({}),[V,J]=M.useState({}),[ae,L]=M.useState({}),[H,ce]=M.useState({}),[z,I]=M.useState(!1),[Z,te]=M.useState(null),[se,be]=M.useState(null),[Ee,_e]=M.useState(!1),[me,ye]=M.useState({}),[qe,G]=M.useState(!1),[He,Ke]=M.useState(null),[ut,ze]=M.useState({}),[Pe,ke]=M.useState({}),[Xe,We]=M.useState(!1),[ct,Wt]=M.useState(()=>{const ve=localStorage.getItem("momosPerPlate");return ve?parseInt(ve,10):6}),[Ut,Vt]=M.useState(!1),Ar=[{name:"Chaat Masala",unit:"pkt"},{name:"Peri-Peri Masala",unit:"pkt"},{name:"Black Salt",unit:"pkt"},{name:"Butter",unit:"pkt"},{name:"Burger",unit:"pkt"},{name:"Oil",unit:"litre"},{name:"Capsicum",unit:"pieces"},{name:"Onion",unit:"piece"},{name:"Fresh Cream",unit:"pkt"},{name:"Liquid Cheese",unit:"pkt"},{name:"Milk",unit:"pkt"},{name:"Lemon",unit:"pieces"},{name:"Coriander",unit:"bundle"},{name:"Tandoori Masala",unit:"pkt"},{name:"Sesame Seeds (Til)",unit:"pkt"},{name:"Chilli Flakes",unit:"pkt"},{name:"Tomato Ketchup",unit:"pkt"}],ln=["Pan-Fried Sauce","Butter Makhani Sauce","Chilli Chicken Sauce","Korean Sauce","Red Sauce","Green Sauce","Soup Premix","Tandoori Sauce"],Xr=["KOT Roll","Parcel Box","Table Box","Zomato Tape"],Ft=e.user?.designation==="store_incharge",ir=e.user?.designation==="production_incharge",nt=e.user?.role==="manager",Bt=e.user?.role==="cluster_head",$e=nt||Bt||ir,De=M.useMemo(()=>(e.inventoryItems?.filter(ve=>ve.category==="finished_product"&&ve.isActive)||[]).map(ve=>{const tt=ve.displayName.endsWith("Momo")?ve.displayName+"s":ve.displayName;return{key:ve.name,camelKey:ve.name.replace(/_([a-z])/g,at=>at[1].toUpperCase()),label:ve.displayName,legacySalesKey:tt,unit:ve.unit}}),[e.inventoryItems]),re=async()=>{try{const ve=tu(),{data:{session:tt}}=await ve.auth.getSession();return tt?.access_token||null}catch(ve){return console.error("Error getting fresh token:",ve),null}};M.useEffect(()=>{console.log("ProductionRequests - User Info:",{role:e.user?.role,designation:e.user?.designation,isStoreIncharge:Ft,isProductionHead:ir,isOperationsHead:nt,isClusterHead:Bt,canViewAll:$e})},[e.user,Ft,ir,nt,Bt,$e]),M.useEffect(()=>{Oe(),Le(),le()},[e.user,r]),M.useEffect(()=>{N.length>=0&&e.inventoryItems&&e.inventoryItems.length>0&&(te(null),be(null),rt())},[N,e.user,r,e.inventoryItems]),M.useEffect(()=>{if(!Ft||!e.user?.storeId)return;const ve=()=>{const at=new Date,pt=at.getHours(),ft=at.getMinutes(),U=at.toISOString().split("T")[0];if(pt===15&&ft===0&&F!==U){const oe=new Date(at);oe.setDate(oe.getDate()+1);const ne=oe.toISOString().split("T")[0];s.some(q=>q.storeId===e.user?.storeId&&q.requestDate===ne&&q.status!=="cancelled")||(console.log(" 3 PM Reminder: No stock request found for tomorrow"),Zt.warning(" Reminder: You haven't submitted a stock request for tomorrow yet!",{duration:1e4,description:"Please submit your production request to ensure timely preparation."}),O(U))}};ve();const tt=setInterval(ve,6e4);return()=>clearInterval(tt)},[Ft,e.user,s,F]),M.useEffect(()=>{if(!Bt&&!ir&&!nt)return;const ve=async()=>{try{const at=await re();if(!at)return;const pt=await ZD(at);pt.notificationsSent>0&&console.log(` Sent ${pt.notificationsSent} notifications for ${pt.newPendingCount} delayed pending requests`)}catch(at){console.log("Background pending request check failed:",at)}};ve();const tt=setInterval(ve,1800*1e3);return()=>clearInterval(tt)},[Bt,ir,nt]);const le=async()=>{if(e.user)try{const ve=r||e.user.storeId;if(!ve)return;const tt=await re();if(!tt)return;const at=await y5(tt,ve);at&&ye(at)}catch{console.log("No saved thresholds, using defaults")}},Oe=async()=>{if(e.user)try{l(!0);const ve=await re();if(!ve){console.error("No valid access token available");return}const tt=await pg(ve),at=r||e.user.storeId;let pt=tt;at?pt=tt.filter(ft=>ft.storeId===at):Ft&&e.user.storeId?pt=tt.filter(ft=>ft.storeId===e.user.storeId):nt&&e.user.storeId&&!Bt&&(pt=tt.filter(ft=>ft.storeId===e.user.storeId)),console.log("Production Requests loaded:",{totalRequests:tt.length,filteredRequests:pt.length,userRole:e.user.role,userDesignation:e.user.designation}),i(pt)}catch(ve){console.error("Error loading production requests:",ve),Zt.error("Failed to load production requests")}finally{l(!1)}},Le=async()=>{if(e.user)try{const ve=await re();if(!ve){console.error("No valid access token available");return}let at=(await gg(ve)).data||[];const pt=r||e.user.storeId;pt&&(at=at.filter(ft=>ft?.storeId===pt)),b(at)}catch(ve){console.error("Error loading sales data:",ve)}},rt=async()=>{const ve=r||e.user?.storeId,tt=!ve||ve==="all";if(e.user?.accessToken){console.log(" ============================================"),console.log(" loadStoreOpeningBalance called"),console.log("  selectedStoreId:",r),console.log("  context.user.storeId:",e.user?.storeId),console.log("  effectiveStoreId:",ve),console.log("  isAllStores:",tt),console.log("  context.stores count:",e.stores?.length||0),console.log("  Current salesData length:",N.length),console.log(" ============================================");try{const at=new Date().toISOString().substring(0,7);if(tt){console.log("   Calculating aggregate opening balance for all stores");const ft=e.stores||[];console.log("   All stores to aggregate:",ft.map(oe=>({id:oe.id,name:oe.name})));let U={};De.forEach(({camelKey:oe})=>{U[oe]=0});for(const oe of ft){console.log(`   Processing store: ${oe.name} (${oe.id})`);try{const ne=await qm(e.user.accessToken,oe.id,"store");if(ne?.history&&ne.history.length>0){const Y=ne.history.find(q=>q.date.substring(0,7)===at&&q.isOpeningBalance===!0);if(Y)console.log(`     Found OPENING BALANCE recalibration for ${oe.name}, date: ${Y.date}`),Y.items.forEach(q=>{const W=e.inventoryItems?.find(ie=>ie.id===q.itemId||ie.name===q.itemId);if(W){const ie=W.name.replace(/_([a-z])/g,he=>he[1].toUpperCase());console.log(`      Adding ${q.actualQuantity} ${ie} from ${oe.name}`),U[ie]+=q.actualQuantity}});else{console.log(`     No opening balance recalibration for ${oe.name}, calculating from previous month`);const q=await Ot(oe.id,at);console.log(`      Previous month balance for ${oe.name}:`,q),Object.keys(q).forEach(W=>{U[W]+=q[W]})}}else{console.log(`     No recalibration history for ${oe.name}, calculating from previous month`);const Y=await Ot(oe.id,at);console.log(`      Previous month balance for ${oe.name}:`,Y),Object.keys(Y).forEach(q=>{U[q]+=Y[q]})}}catch(ne){console.error(`     Error loading recalibration for ${oe.name}:`,ne);const Y=await Ot(oe.id,at);console.log(`      Previous month balance for ${oe.name} (fallback):`,Y),Object.keys(Y).forEach(q=>{U[q]+=Y[q]})}console.log(`    Running total after ${oe.name}:`,U)}console.log("   FINAL Aggregated opening balance for all stores:",U),te(U);return}if(!ve){console.log("   No effectiveStoreId available, skipping recalibration fetch"),te({});return}try{const ft=await qm(e.user.accessToken,ve,"store");if(console.log(" Recalibration Check:"),console.log("  Total recalibrations found:",ft?.history?.length||0),ft?.history&&ft.history.length>0){const U=ft.history.find(W=>W.date.substring(0,7)===at&&W.isOpeningBalance===!0),ne=ft.history.filter(W=>W.date.substring(0,7)===at).sort((W,ie)=>new Date(ie.date).getTime()-new Date(W.date).getTime())[0],Y=U?null:ft.history.find(W=>W.date.substring(0,7)===at&&W.isOpeningBalance===void 0),q=U||Y;if(q){console.log("   Found opening balance recalibration:"),console.log("  Recalibration date:",q.date),console.log("  Recalibration month:",q.date.substring(0,7)),console.log("  Recalibration locationType:",q.locationType),console.log("  Recalibration locationName:",q.locationName),console.log("  Recalibration isOpeningBalance:",q.isOpeningBalance),console.log("  Current month:",at);const W={};if(console.log("   Processing recalibration items:",q.items.length),console.log("   Available inventory items:",e.inventoryItems?.length||0),q.items.forEach(ie=>{const he=e.inventoryItems?.find(K=>K.id===ie.itemId||K.name===ie.itemId);if(he){const K=he.name.replace(/_([a-z])/g,ue=>ue[1].toUpperCase());W[K]=ie.actualQuantity}}),console.log("   Using opening balance from recalibration:",W),te(W),ne&&ne.date!==q.date){console.log("   Found MORE RECENT recalibration (mid-month):"),console.log("    Date:",ne.date),console.log("    isOpeningBalance:",ne.isOpeningBalance);const ie={};ne.items.forEach(he=>{const K=e.inventoryItems?.find(ue=>ue.id===he.itemId||ue.name===he.itemId);if(K){const ue=K.name.replace(/_([a-z])/g,fe=>fe[1].toUpperCase());ie[ue]=he.actualQuantity}}),be({date:ne.date,stock:ie}),console.log("    Stock:",ie)}else be(null);return}else console.log("   No opening balance recalibration found for current month, calculating from previous month")}else console.log("   No recalibration records found")}catch(ft){console.error(" Error fetching recalibration history (will calculate from previous month):",ft)}const pt=await Ot(ve,at);te(pt)}catch(at){console.error("Error loading opening balance:",at);const pt={};De.forEach(({camelKey:ft})=>{pt[ft]=0}),te(pt)}}},Ot=async(ve,tt)=>{if(!ve){console.warn("   calculatePreviousMonthStoreStock called with empty storeId");const he={};return De.forEach(({camelKey:K})=>{he[K]=0}),he}const[at,pt]=tt.split("-").map(Number);let ft=at,U=pt-1;U===0&&(U=12,ft=at-1);const oe=`${ft}-${String(U).padStart(2,"0")}`;console.log(" Store Opening Balance Calculation:"),console.log("  Store ID:",ve),console.log("  Previous Month:",oe);let ne={};try{const he=await el(e.user.accessToken,ve,"store");if(he?.record){const K=he.record.date.substring(0,7);console.log("   Found recalibration from:",K),K===oe?(he.record.items.forEach(ue=>{const fe=e.inventoryItems?.find(Me=>Me.id===ue.itemId||Me.name===ue.itemId);if(fe){const Me=fe.name.replace(/_([a-z])/g,we=>we[1].toUpperCase());ne[Me]=ue.actualQuantity}}),console.log("   Using previous month recalibration as opening:",ne)):(console.log("   Recalibration is from different month, assuming zero opening balance"),De.forEach(({camelKey:ue})=>{ne[ue]=0}))}else console.log("   No recalibration found, assuming zero opening balance"),De.forEach(({camelKey:K})=>{ne[K]=0})}catch(he){console.error("   Error fetching recalibration:",he),De.forEach(({camelKey:K})=>{ne[K]=0})}const Y=(e.productionRequests||[]).filter(he=>{if(he.status!=="delivered"||he.storeId!==ve)return!1;const K=he.deliveredDate||he.requestDate||he.createdAt;return K&&K.startsWith(oe)}).reduce((he,K)=>(De.forEach(({camelKey:ue})=>{const fe=K[ue]||0,Me=K[ue+"s"]||0;he[ue]=(he[ue]||0)+fe+Me}),he),{}),W=(N||[]).filter(he=>he.storeId!==ve?!1:he.date&&he.date.startsWith(oe)).reduce((he,K)=>(De.forEach(({camelKey:ue,legacySalesKey:fe})=>{let Me=K.data?.[fe]||0;fe==="Cheese Corn Momos"&&Me===0&&(Me=K.data?.["Corn Cheese Momos"]||0),he[ue]=(he[ue]||0)+Me}),he),{}),ie={};return De.forEach(({camelKey:he})=>{ie[he]=(ne[he]||0)+(Y[he]||0)-(W[he]||0)}),console.log("  Previous Month Opening Balance:",ne),console.log("  Previous Month Received:",Y),console.log("  Previous Month Sold:",W),console.log("  Calculated Closing Stock (= Opening + Received - Sold):",ie),ie},$t=async ve=>{if(ve.preventDefault(),d){console.log(" Submission already in progress, ignoring duplicate request");return}if(console.log(" handleSubmitRequest called"),console.log("  User info:",{hasAccessToken:!!e.user?.accessToken,hasEmployeeId:!!e.user?.employeeId,hasStoreId:!!e.user?.storeId,user:e.user}),console.log("  Form data:",{momoQuantities:A,totalQuantity:Object.values(A).reduce((at,pt)=>at+pt,0),requestDate:P,notes:S}),!e.user?.accessToken||!e.user?.employeeId||!e.user?.storeId){console.error(" Missing user information:",{hasAccessToken:!!e.user?.accessToken,hasEmployeeId:!!e.user?.employeeId,hasStoreId:!!e.user?.storeId,user:e.user}),Zt.error("Missing user information. Please ensure you are assigned to a store.");return}if(Object.values(A).reduce((at,pt)=>at+pt,0)===0){console.log(" No quantities specified"),Zt.error("Please specify at least one item quantity");return}console.log(" Submitting request for date:",P);try{u(!0),console.log(" Validation passed, submitting request..."),await k2(e.user.accessToken,{requestDate:P,storeId:e.user.storeId,storeName:void 0,requestedBy:e.user.employeeId,requestedByName:e.user.name||e.user.email,...A,kitchenUtilities:Object.keys(R).length>0?R:void 0,sauces:Object.keys(V).length>0?V:void 0,utilities:Object.keys(ae).length>0?ae:void 0,notes:S}),console.log(" Request submitted successfully"),Zt.success("Production request submitted successfully"),E({}),Q({}),J({}),L({}),_(""),B(C()),await Oe()}catch(at){console.error(" Error submitting production request:",at),Zt.error(at.message||"Failed to submit request")}finally{u(!1)}},bt=async(ve,tt)=>{if(!(!e.user?.accessToken||!e.user?.employeeId))try{await JD(e.user.accessToken,ve,tt,e.user.employeeId),Zt.success(`Request marked as ${tt.replace("-"," ")}`),await Oe()}catch(at){console.error("Error updating status:",at),Zt.error("Failed to update status")}},hr=ve=>{Ke(ve);const tt={};["chickenMomos","chickenCheeseMomos","vegMomos","cheeseCornMomos","paneerMomos","vegKurkureMomos","chickenKurkureMomos"].forEach(pt=>{const ft=ve[pt];ft>0&&(tt[pt]=ft)}),ve.kitchenUtilities&&Object.entries(ve.kitchenUtilities).forEach(([pt,ft])=>{tt[`kitchenUtility_${pt}`]=ft.quantity}),ve.utilities&&Object.entries(ve.utilities).forEach(([pt,ft])=>{tt[`utility_${pt}`]=ft}),ze(tt),ke({}),We(!1),G(!0)},ht=async()=>{if(!e.user?.accessToken||!e.user?.employeeId||!He)return;if(!Xe){Zt.error("Please confirm your responsibility for shipping these items");return}const ve=[];if(Object.entries(ut).forEach(([tt,at])=>{let pt=0;if(tt.startsWith("kitchenUtility_")){const U=tt.replace("kitchenUtility_","");pt=He.kitchenUtilities?.[U]?.quantity||0}else if(tt.startsWith("utility_")){const U=tt.replace("utility_","");pt=He.utilities?.[U]||0}else pt=He[tt]||0;const ft=tt.toLowerCase().includes("sauce")||tt.toLowerCase().includes("mayo")||tt.toLowerCase().includes("schezwan");at!==pt&&!ft&&!Pe[tt]&&ve.push(tt.replace("_"," "))}),ve.length>0){Zt.error(`Please add notes for items with different quantities: ${ve.join(", ")}`);return}try{await QD(e.user.accessToken,He.id,ut,Pe,e.user.employeeId),Zt.success("Request marked as shipped with quantities recorded"),G(!1),await Oe()}catch(tt){console.error("Error shipping request:",tt),Zt.error(tt.message||"Failed to ship request")}},Rr=ve=>{switch(ve){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"accepted":return"bg-blue-100 text-blue-800 border-blue-300";case"in-preparation":return"bg-purple-100 text-purple-800 border-purple-300";case"prepared":return"bg-indigo-100 text-indigo-800 border-indigo-300";case"shipped":return"bg-orange-100 text-orange-800 border-orange-300";case"partially-shipped":return"bg-amber-100 text-amber-800 border-amber-300";case"delivered":return"bg-green-100 text-green-800 border-green-300";case"partially-delivered":return"bg-lime-100 text-lime-800 border-lime-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},cr=ve=>{switch(ve){case"pending":return n.jsx(fn,{className:"w-4 h-4"});case"accepted":return n.jsx(zt,{className:"w-4 h-4"});case"in-preparation":return n.jsx(rr,{className:"w-4 h-4"});case"prepared":return n.jsx(zt,{className:"w-4 h-4"});case"shipped":return n.jsx(Ry,{className:"w-4 h-4"});case"delivered":return n.jsx(zt,{className:"w-4 h-4"});default:return n.jsx(fn,{className:"w-4 h-4"})}},fr=s.filter(ve=>!(f&&ve.requestDate!==f||p!=="all"&&ve.status!==p)),Jr={pending:fr.filter(ve=>ve.status==="pending"),accepted:fr.filter(ve=>ve.status==="accepted"),"in-preparation":fr.filter(ve=>ve.status==="in-preparation"),prepared:fr.filter(ve=>ve.status==="prepared"),shipped:fr.filter(ve=>ve.status==="shipped"),delivered:fr.filter(ve=>ve.status==="delivered")},Kn=fr.reduce((ve,tt)=>{const at=tt.requestDate;return ve[at]||(ve[at]=[]),ve[at].push(tt),ve},{}),_n=Object.keys(Kn).sort((ve,tt)=>new Date(tt).getTime()-new Date(ve).getTime()),dr=()=>{const ve=new Date;let tt=[],at,pt=ve;const ft=(Y,q)=>{if(q==="day")return Y.toLocaleDateString("en-US",{month:"short",day:"numeric"});if(q==="week"){const W=new Date(Y);W.setDate(Y.getDate()-Y.getDay());const ie=new Date(W);return ie.setDate(W.getDate()+6),`${W.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${ie.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else{if(q==="month")return Y.toLocaleDateString("en-US",{month:"short",year:"numeric"});if(q==="year")return Y.getFullYear().toString()}return Y.toLocaleDateString()},U=(Y,q)=>{const W=ie=>{const he=ie.getFullYear(),K=String(ie.getMonth()+1).padStart(2,"0"),ue=String(ie.getDate()).padStart(2,"0");return`${he}-${K}-${ue}`};if(q==="day")return W(Y);if(q==="week"){const ie=new Date(Y),he=ie.getDay();return ie.setDate(ie.getDate()-he),W(ie)}else{if(q==="month")return`${Y.getFullYear()}-${String(Y.getMonth()+1).padStart(2,"0")}`;if(q==="year")return Y.getFullYear().toString()}return W(Y)};if(v==="daily")for(let Y=4;Y>=0;Y--){const q=new Date(ve);q.setDate(ve.getDate()-Y),tt.push(U(q,"day"))}else if(v==="weekly")for(let Y=4;Y>=0;Y--){const q=new Date(ve);q.setDate(ve.getDate()-Y*7);const W=U(q,"week");tt.includes(W)||tt.push(W)}else if(v==="monthly")for(let Y=4;Y>=0;Y--){const q=new Date(ve);q.setMonth(ve.getMonth()-Y),tt.push(U(q,"month"))}else if(v==="yearly")for(let Y=4;Y>=0;Y--){const q=new Date(ve);q.setFullYear(ve.getFullYear()-Y),tt.push(U(q,"year"))}else if(v==="custom"){at=new Date(w.from),pt=new Date(w.to);const Y=Math.ceil((pt.getTime()-at.getTime())/(1e3*60*60*24));for(let q=0;q<=Y;q++){const W=new Date(at);W.setDate(at.getDate()+q),tt.push(U(W,"day"))}}console.log(" Chart Periods:",{filter:v,periods:tt,today:ve.toISOString().split("T")[0]}),console.log(" Requests for chart:",{totalRequests:s.length,requestDates:s.map(Y=>({date:Y.requestDate,id:Y.id.slice(0,8),chickenMomo:Y.chickenMomo,chickenMomos:Y.chickenMomos}))});const oe={};tt.forEach(Y=>{const q={period:Y};De.forEach(({label:W})=>{q[W]=0}),oe[Y]=q}),s.forEach(Y=>{const q=new Date(Y.requestDate);let W;v==="daily"||v==="custom"?W=U(q,"day"):v==="weekly"?W=U(q,"week"):v==="monthly"?W=U(q,"month"):v==="yearly"&&(W=U(q,"year")),oe[W]?De.forEach(({camelKey:ie,label:he})=>{const K=Y[ie]||0,ue=Y[ie+"s"]||0;oe[W][he]=(oe[W][he]||0)+K+ue}):console.log(" Request not matching any period:",{requestDate:Y.requestDate,periodKey:W,availablePeriods:tt})}),console.log(" Aggregated Period Data:",oe);const ne=tt.map(Y=>{const q=oe[Y],W=new Date(Y);let ie;return v==="daily"||v==="custom"?ie=ft(W,"day"):v==="weekly"?ie=ft(W,"week"):v==="monthly"?ie=ft(W,"month"):v==="yearly"&&(ie=ft(W,"year")),{name:ie,...q}});return console.log(" Final Chart Data:",ne),ne};return M.useEffect(()=>{if(t&&!o){const ve=document.getElementById(`request-${t}`);ve&&setTimeout(()=>{ve.scrollIntoView({behavior:"smooth",block:"center"})},300)}},[t,o]),M.useEffect(()=>{_n.length>0&&Object.keys(H).length===0&&ce({[_n[0]]:!0})},[_n,H]),o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):n.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg shadow-lg p-4 sm:p-6 text-white",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl mb-2",children:"Daily Stock Requests"}),n.jsxs("p",{className:"text-sm sm:text-base text-purple-100",children:[Ft&&"Submit your daily stock requirements before 9:00 AM",ir&&"Manage incoming stock requests and track fulfillment",(nt||Bt)&&"Monitor stock request workflow across stores"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 sm:p-6 border-2 border-green-200",children:[n.jsxs("div",{className:"mb-4 flex items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1 flex items-center gap-2",children:[n.jsx(rr,{className:"w-6 h-6 text-green-600"}),"Store Stock Status"]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total inventory received from production house - Stock sold"})]}),Ft&&n.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all whitespace-nowrap bg-gradient-to-r from-teal-600 to-emerald-600 text-white hover:from-teal-700 hover:to-emerald-700 shadow-lg",title:"Recalibrate store stock (Operations Managers and Cluster Heads will be notified)",children:[n.jsx(zt,{className:"w-5 h-5"}),"Recalibrate Stock"]})]}),(r||e.user?.storeId,n.jsx("div",{className:"bg-gradient-to-r from-green-100 to-green-50 border-l-4 border-green-600 rounded-lg p-3 mb-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dr,{className:"w-5 h-5 text-green-700"}),n.jsx("p",{className:"text-sm font-semibold text-green-900",children:"Store Stock Status (Current Month)"})]}),n.jsx("p",{className:"text-xs text-green-700 ml-7",children:"Opening balance + Current month received - Current month sold"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>_e(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-green-600 text-green-700 rounded-lg hover:bg-green-50 transition-all",children:[n.jsx(Ii,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-semibold",children:"Alert Settings"})]}),(nt||Bt)&&n.jsxs("button",{onClick:()=>Vt(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md hover:shadow-lg",children:[n.jsx(Ii,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-semibold",children:"Plate Config"})]}),a&&(nt||Bt)&&n.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg",children:[n.jsx(rr,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-semibold",children:"Manage Items"})]})]})]})})),(()=>{const ve=r||e.user?.storeId,tt=new Date,at=5.5*60*60*1e3,ft=new Date(tt.getTime()+at).toISOString().substring(0,7);console.log(" Stock Status Calculation Debug:",{currentMonth:ft,totalRequests:e.productionRequests?.length||0,deliveredRequests:e.productionRequests?.filter(fe=>fe.status==="delivered").length||0,requestStatuses:e.productionRequests?.map(fe=>({id:fe.id.slice(0,8),status:fe.status,date:fe.requestDate}))||[]});const U=e.productionRequests?.filter(fe=>{if(fe.status!=="delivered"&&fe.status!=="pending")return!1;const Me=fe.deliveredDate||fe.requestDate||fe.createdAt,we=Me&&Me.startsWith(ft);return console.log(" Delivered Request:",{id:fe.id.slice(0,8),status:fe.status,chicken:fe.chicken,chickenMomo:fe.chickenMomo,chickenMomos:fe.chickenMomos,chickenKurkure:fe.chickenKurkure,chickenKurkureMomo:fe.chickenKurkureMomo,chickenKurkureMomos:fe.chickenKurkureMomos,deliveryDate:Me,matchesMonth:we}),we?!ve||ve==="all"?!0:fe.storeId===ve:!1})||[],oe=U.reduce((fe,Me)=>(De.forEach(({camelKey:we})=>{const lt=Me[we]||0,Ge=Me[we+"s"]||0;fe[we]=(fe[we]||0)+lt+Ge}),fe),{});console.log(" After aggregation - deliveredRequests count:",U.length),console.log(" After aggregation - totalReceived:",oe);const ne=N.filter(fe=>!fe.date||!fe.date.startsWith(ft)?!1:!ve||ve==="all"?!0:fe.storeId===ve),Y=ne.reduce((fe,Me)=>(De.forEach(({camelKey:we,legacySalesKey:lt})=>{let Ge=Me.data?.[lt]||0;lt==="Cheese Corn Momos"&&Ge===0&&(Ge=Me.data?.["Corn Cheese Momos"]||0),fe[we]=(fe[we]||0)+Ge}),fe),{}),q=Z||De.reduce((fe,{camelKey:Me})=>(fe[Me]=0,fe),{});if(console.log(" Store Stock Status Calculation Debug:"),console.log("  storeOpeningBalance from state:",Z),console.log("  openingBalance being used:",q),console.log("  totalReceived:",oe),console.log("   Chicken Momo (chicken) received:",oe.chicken||0),console.log("   Chicken Kurkure (chickenKurkure) received:",oe.chickenKurkure||0),console.log("  totalSales:",Y),console.log("  finishedProducts count:",De.length),Z===null)return console.log("   Opening balance not loaded yet, showing loading state"),n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl p-6 mt-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Dr,{className:"w-5 h-5 text-green-700"}),n.jsx("p",{className:"text-sm font-semibold text-green-900",children:"Store Stock Status (Current Month)"})]}),n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),n.jsx("p",{className:"ml-3 text-sm text-green-700",children:"Loading opening balance..."})]})]});const W={};if(se){console.log("   Using MOST RECENT recalibration as baseline:"),console.log("    Recalibration date:",se.date),console.log("    Recalibration stock:",se.stock);const Me=se.date.substring(0,10),we={},lt={};U.forEach(Ge=>{const Ze=Ge.deliveredDate||Ge.requestDate||Ge.createdAt,jt=Ze?Ze.substring(0,10):"";jt&&jt>Me&&De.forEach(({camelKey:Gt})=>{const ar=Ge[Gt]||0;we[Gt]=(we[Gt]||0)+ar})}),ne.forEach(Ge=>{const Ze=Ge.date,jt=Ze?Ze.substring(0,10):"";jt&&jt>=Me&&De.forEach(({camelKey:Gt,legacySalesKey:ar})=>{let Nr=Ge.data?.[ar]||0;ar==="Cheese Corn Momos"&&Nr===0&&(Nr=Ge.data?.["Corn Cheese Momos"]||0),lt[Gt]=(lt[Gt]||0)+Nr})}),console.log("    Received AFTER recalibration:",we),console.log("    Sold AFTER recalibration:",lt),De.forEach(({camelKey:Ge})=>{const Ze=se.stock[Ge]||0,jt=we[Ge]||0,Gt=lt[Ge]||0;W[Ge]=Ze+jt-Gt,console.log(`    ${Ge}: ${Ze} (recal) + ${jt} (received) - ${Gt} (sold) = ${W[Ge]}`)})}else console.log("   Using opening balance (no mid-month recalibration)"),De.forEach(({camelKey:fe})=>{W[fe]=(q[fe]||0)+(oe[fe]||0)-(Y[fe]||0)});console.log("  storeStock calculated:",W);const ie=["purple","pink","green","yellow","blue","teal","red","indigo","orange","cyan"],he=Object.values(oe).reduce((fe,Me)=>fe+Me,0),K=Object.values(q).reduce((fe,Me)=>fe+Me,0),ue=he+K;return console.log("  totalReceivedSum:",he),console.log("  totalOpeningBalanceSum:",K),console.log("  totalStockSum:",ue),ue===0?n.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[n.jsx(rr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsxs("p",{className:"text-gray-600",children:["No inventory available for ",ft]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Stock will appear here once:"}),n.jsxs("ul",{className:"text-sm text-gray-500 mt-2 list-disc list-inside",children:[n.jsxs("li",{children:["Your requests are ",n.jsx("strong",{children:"delivered"})," by the production house"]}),n.jsx("li",{children:"OR you perform a stock recalibration (1st-5th of each month)"})]}),n.jsx("p",{className:"text-xs text-blue-600 mt-4",children:' Tip: Check if your requests have been marked as "Delivered" below'})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:De.map(({camelKey:fe,label:Me},we)=>{const lt=oe[fe]||0,Ge=Y[fe]||0,Ze=W[fe]||0,Gt=(q[fe]||0)+lt,ar=ie[we%ie.length],Nr=me[fe]||{high:600,medium:300,low:150};let vn="high",Tr="",Dn="",Fr="",Ea="";Ze<=0?(vn="critical",Tr="bg-red-100",Dn="text-red-700",Fr="border-red-300",Ea="CRITICAL"):Ze<=Nr.low?(vn="low",Tr="bg-red-100",Dn="text-red-700",Fr="border-red-300",Ea="LOW"):Ze<=Nr.medium?(vn="medium",Tr="bg-orange-100",Dn="text-orange-700",Fr="border-orange-300",Ea="MEDIUM"):Ze<Nr.high&&(vn="medium",Tr="bg-yellow-100",Dn="text-yellow-700",Fr="border-yellow-300",Ea="MEDIUM");const Lr=Gt>0?(Ze/Gt*100).toFixed(0):"0",ee=Ze<Gt*.2&&Gt>0;return n.jsxs("div",{className:`bg-gradient-to-br from-${ar}-50 to-${ar}-100 border-2 border-${ar}-200 rounded-xl p-4 hover:shadow-lg transition-all duration-300 relative`,children:[vn!=="high"&&n.jsxs("div",{className:`absolute top-2 right-2 flex items-center gap-1 px-2 py-1 rounded-lg ${Tr} border ${Fr}`,children:[n.jsx(yn,{className:`w-4 h-4 ${Dn}`}),n.jsx("span",{className:`text-xs font-semibold ${Dn} uppercase`,children:Ea})]}),n.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pr-20",children:Me}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"Total Received:"}),n.jsx("span",{className:`text-lg font-bold text-${ar}-600`,children:lt})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"Total Sold:"}),n.jsx("span",{className:`text-lg font-bold text-${ar}-700`,children:Ge})]}),n.jsxs("div",{className:"border-t-2 border-gray-300 pt-2 mt-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Stock Available:"}),n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:`text-2xl font-bold ${ee||Ze<0?"text-red-600":`text-${ar}-800`}`,children:[Ze," pcs / ",Math.round(Ze/ct)," plates"]})})]}),Gt>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:n.jsxs("span",{children:[Lr,"% remaining"]})}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full ${ee||Ze<0?"bg-red-500":`bg-${ar}-500`}`,style:{width:`${Math.min(100,Math.max(0,Number(Lr)))}%`}})})]})]}),(ee||Ze<0)&&n.jsx("div",{className:"bg-red-100 border border-red-300 rounded-lg px-2 py-1 mt-2",children:n.jsx("p",{className:"text-xs text-red-800 font-semibold",children:Ze<0?" Oversold":" Low Stock"})})]})]},fe)})})})()]}),Ft&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[n.jsxs("h2",{className:"text-lg sm:text-xl text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx($m,{className:"w-5 h-5 text-purple-600"}),"Submit Stock Request"]}),new Date().getHours()>=9&&n.jsx("div",{className:"mb-4 bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(yn,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-blue-900 font-semibold mb-1",children:"It's past 9:00 AM"}),n.jsx("p",{className:"text-xs text-blue-800",children:"Same-day production requests are no longer accepted. The request date has been automatically set to tomorrow. You can also select any future date for advance orders."})]})]})}),n.jsxs("form",{onSubmit:$t,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx(ds,{label:"Request Date",value:P,onChange:B,className:"w-full"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Same-day requests must be submitted before 9:00 AM. After 9 AM, please select tomorrow or a future date for advance orders."})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-base text-gray-900 mb-3 flex items-center gap-2",children:[n.jsx(rr,{className:"w-5 h-5 text-purple-600"}),"Momos Quantities"]}),n.jsx("div",{className:"space-y-3 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0 lg:grid-cols-3",children:De.map(({camelKey:ve,label:tt})=>{const at=ve==="chicken"?[150,300,450,600]:[60,120,180,300];return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:tt}),n.jsx("input",{type:"number",min:"0",value:A[ve]||0,onChange:pt=>E({...A,[ve]:parseInt(pt.target.value)||0}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base"}),n.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:at.map(pt=>n.jsx("button",{type:"button",onClick:()=>E({...A,[ve]:pt}),className:"px-3 py-1.5 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg text-sm transition-colors",children:pt},pt))})]},ve)})})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(rr,{className:"w-5 h-5 text-purple-600"}),"Kitchen Utilities (Optional)"]}),n.jsx("div",{className:"space-y-3",children:Ar.map(ve=>n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:[ve.name," ",n.jsxs("span",{className:"text-gray-500 text-xs",children:["(in ",ve.unit,")"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",min:"0",step:"0.01",value:R[ve.name]?.quantity!==void 0?R[ve.name].quantity:"",onChange:tt=>{const at=parseFloat(tt.target.value)||0;if(at>0)Q({...R,[ve.name]:{quantity:at,unit:ve.unit}});else{const pt={...R};delete pt[ve.name],Q(pt)}},className:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",placeholder:`Quantity in ${ve.unit}`}),n.jsx("div",{className:"flex items-center px-4 py-3 bg-gray-100 border-2 border-gray-300 rounded-lg text-gray-700 text-base font-medium min-w-[80px] justify-center",children:ve.unit})]})]},ve.name))})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(rr,{className:"w-5 h-5 text-pink-600"}),"Sauces (Select Required Sauces)"]}),n.jsx("div",{className:"space-y-2 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0",children:ln.map(ve=>n.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-300 rounded-lg hover:border-purple-500 cursor-pointer transition-colors active:bg-purple-50",children:[n.jsx("input",{type:"checkbox",checked:V[ve]||!1,onChange:tt=>{if(tt.target.checked)J({...V,[ve]:!0});else{const at={...V};delete at[ve],J(at)}},className:"w-5 h-5 text-purple-600 rounded focus:ring-purple-500 flex-shrink-0"}),n.jsx("span",{className:"text-sm text-gray-700",children:ve})]},ve))})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(rr,{className:"w-5 h-5 text-indigo-600"}),"Utilities (Quantity in Pieces)"]}),n.jsx("div",{className:"space-y-3 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0",children:Xr.map(ve=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:ve}),n.jsx("input",{type:"number",min:"0",value:ae[ve]!==void 0?ae[ve]:"",onChange:tt=>{const at=parseInt(tt.target.value)||0;if(at>0)L({...ae,[ve]:at});else{const pt={...ae};delete pt[ve],L(pt)}},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",placeholder:"Pieces"})]},ve))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Additional Notes (Optional)"}),n.jsx("textarea",{value:S,onChange:ve=>_(ve.target.value),rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none resize-none",placeholder:"Any special requirements or notes..."})]}),n.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-base font-medium shadow-lg active:scale-95",children:d?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),n.jsx("span",{children:"Submitting..."})]}):n.jsxs(n.Fragment,{children:[n.jsx($m,{className:"w-5 h-5"}),n.jsx("span",{children:"Submit Request"})]})})]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:n.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:flex sm:flex-wrap sm:gap-3",children:[n.jsx("div",{className:"flex-1 sm:min-w-[200px]",children:n.jsx(ds,{label:"Filter by Date",value:f,onChange:m,className:"w-full"})}),n.jsxs("div",{className:"flex-1 sm:min-w-[200px]",children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Filter by Status"}),n.jsxs("select",{value:p,onChange:ve=>g(ve.target.value),className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"accepted",children:"Accepted"}),n.jsx("option",{value:"in-preparation",children:"In Preparation"}),n.jsx("option",{value:"prepared",children:"Prepared"}),n.jsx("option",{value:"shipped",children:"Shipped"}),n.jsx("option",{value:"delivered",children:"Delivered"})]})]}),(f||p!=="all")&&n.jsx("div",{className:"flex sm:items-end",children:n.jsx("button",{onClick:()=>{m(""),g("all")},className:"w-full sm:w-auto px-4 py-3 sm:py-2 text-sm text-purple-600 hover:text-purple-900 underline font-medium",children:"Clear Filters"})})]})}),$e&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[n.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-4 sm:mb-6",children:"Production Request Workflow"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute top-8 left-0 right-0 h-1 bg-gray-200",style:{zIndex:0}}),n.jsxs("div",{className:"relative grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",style:{zIndex:1},children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-yellow-500 text-white flex items-center justify-center shadow-lg mb-3",children:n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"text-2xl",children:Jr.pending.length})})}),n.jsx("div",{className:"w-full bg-yellow-50 border-2 border-yellow-200 rounded-lg p-3 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[n.jsx(fn,{className:"w-3 h-3 text-yellow-600"}),n.jsx("p",{className:"text-xs text-yellow-800",children:"Pending"})]})})]}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-500 text-white flex items-center justify-center shadow-lg mb-3",children:n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"text-2xl",children:Jr.accepted.length})})}),n.jsx("div",{className:"w-full bg-blue-50 border-2 border-blue-200 rounded-lg p-3 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[n.jsx(zt,{className:"w-3 h-3 text-blue-600"}),n.jsx("p",{className:"text-xs text-blue-800",children:"Accepted"})]})})]}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-500 text-white flex items-center justify-center shadow-lg mb-3",children:n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"text-2xl",children:Jr["in-preparation"].length})})}),n.jsx("div",{className:"w-full bg-purple-50 border-2 border-purple-200 rounded-lg p-3 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[n.jsx(rr,{className:"w-3 h-3 text-purple-600"}),n.jsx("p",{className:"text-xs text-purple-800",children:"In Prep"})]})})]}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-indigo-500 text-white flex items-center justify-center shadow-lg mb-3",children:n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"text-2xl",children:Jr.prepared.length})})}),n.jsx("div",{className:"w-full bg-indigo-50 border-2 border-indigo-200 rounded-lg p-3 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[n.jsx(zt,{className:"w-3 h-3 text-indigo-600"}),n.jsx("p",{className:"text-xs text-indigo-800",children:"Prepared"})]})})]}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-orange-500 text-white flex items-center justify-center shadow-lg mb-3",children:n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"text-2xl",children:Jr.shipped.length})})}),n.jsx("div",{className:"w-full bg-orange-50 border-2 border-orange-200 rounded-lg p-3 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[n.jsx(Ry,{className:"w-3 h-3 text-orange-600"}),n.jsx("p",{className:"text-xs text-orange-800",children:"Shipped"})]})})]}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500 text-white flex items-center justify-center shadow-lg mb-3",children:n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"text-2xl",children:Jr.delivered.length})})}),n.jsx("div",{className:"w-full bg-green-50 border-2 border-green-200 rounded-lg p-3 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[n.jsx(zt,{className:"w-3 h-3 text-green-600"}),n.jsx("p",{className:"text-xs text-green-800",children:"Delivered"})]})})]})]})]}),n.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl text-gray-900",children:fr.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total Requests"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl text-yellow-600",children:Jr.pending.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Awaiting Action"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl text-purple-600",children:Jr.accepted.length+Jr["in-preparation"].length+Jr.prepared.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl text-green-600",children:Jr.delivered.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Completed"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[n.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 mb-4 sm:mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"w-5 h-5 text-purple-600"}),n.jsx("h2",{className:"text-lg sm:text-xl text-gray-900",children:"Momo Orders by Type"})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:[{filter:"daily",label:"5 Days"},{filter:"weekly",label:"5 Weeks"},{filter:"monthly",label:"5 Months"},{filter:"yearly",label:"5 Years"},{filter:"custom",label:"Custom"}].map(({filter:ve,label:tt})=>n.jsx("button",{onClick:()=>y(ve),className:`px-3 py-2 rounded-lg text-xs sm:text-sm transition-colors flex-1 sm:flex-none ${v===ve?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:tt},ve))})]}),v==="custom"&&n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[n.jsx(ds,{label:"From Date",value:w.from,onChange:ve=>k({...w,from:ve})}),n.jsx(ds,{label:"To Date",value:w.to,onChange:ve=>k({...w,to:ve})})]}),n.jsx(Zn,{width:"100%",height:400,children:n.jsxs(mi,{data:dr(),children:[n.jsx(ba,{strokeDasharray:"3 3"}),n.jsx(Hn,{dataKey:"name"}),n.jsx(Tn,{}),n.jsx(Gr,{}),n.jsx(ka,{}),De.map((ve,tt)=>{const at=["#8b5cf6","#ec4899","#10b981","#f59e0b","#3b82f6","#14b8a6","#ef4444","#f97316"];return n.jsx(wr,{dataKey:ve.label,name:ve.label,fill:at[tt%at.length]},ve.label)})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h2",{className:"text-xl text-gray-900",children:[_n.length," Date",_n.length!==1?"s":""," with Requests"]}),_n.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[n.jsx(rr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No production requests found"})]}):_n.map(ve=>{const tt=Kn[ve],at=H[ve],pt=new Set(tt.map(U=>U.storeName)).size,ft=tt.reduce((U,oe)=>(De.forEach(({camelKey:ne})=>{const Y=oe[ne]||0,q=oe[ne+"s"]||0;U[ne]=(U[ne]||0)+Y+q}),U),{});return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-200 hover:shadow-md",children:[n.jsxs("button",{onClick:()=>ce({...H,[ve]:!at}),className:"w-full p-4 sm:p-6 text-left flex items-center justify-between gap-4 hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx(Dr,{className:"w-6 h-6 text-purple-600 flex-shrink-0"}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h3",{className:"text-base sm:text-lg text-gray-900 truncate",children:new Date(ve).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),n.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:[tt.length," Request",tt.length!==1?"s":""," from"," ",pt," Store",pt!==1?"s":""]})]})]}),n.jsx("div",{className:"flex-shrink-0",children:at?n.jsx(DI,{className:"w-5 h-5 text-gray-400"}):n.jsx(Uf,{className:"w-5 h-5 text-gray-400"})})]}),n.jsx("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6",children:n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-3 sm:p-4",children:[n.jsx("h4",{className:"text-xs sm:text-sm text-gray-700 mb-3",children:"Total Quantities for this Day"}),n.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-2 sm:gap-3",children:[ft.chicken>0&&n.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[n.jsx("p",{className:"text-lg sm:text-xl text-purple-600",children:ft.chicken}),n.jsx("p",{className:"text-xs text-gray-600",children:"Chicken"})]}),ft.chickenCheese>0&&n.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[n.jsx("p",{className:"text-lg sm:text-xl text-pink-600",children:ft.chickenCheese}),n.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Cheese"})]}),ft.veg>0&&n.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[n.jsx("p",{className:"text-lg sm:text-xl text-green-600",children:ft.veg}),n.jsx("p",{className:"text-xs text-gray-600",children:"Veg"})]}),ft.cheeseCorn>0&&n.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[n.jsx("p",{className:"text-lg sm:text-xl text-orange-600",children:ft.cheeseCorn}),n.jsx("p",{className:"text-xs text-gray-600",children:"Cheese Corn"})]}),ft.paneer>0&&n.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[n.jsx("p",{className:"text-lg sm:text-xl text-blue-600",children:ft.paneer}),n.jsx("p",{className:"text-xs text-gray-600",children:"Paneer"})]}),ft.vegKurkure>0&&n.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[n.jsx("p",{className:"text-lg sm:text-xl text-teal-600",children:ft.vegKurkure}),n.jsx("p",{className:"text-xs text-gray-600",children:"Veg Kurkure"})]}),ft.chickenKurkure>0&&n.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[n.jsx("p",{className:"text-lg sm:text-xl text-red-600",children:ft.chickenKurkure}),n.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Kurkure"})]})]})]})}),at&&n.jsx("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6 pt-0",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"text-sm text-gray-700",children:"Requests by Store"}),tt.map(U=>{const oe=t===U.id;return n.jsxs("div",{id:`request-${U.id}`,className:`border rounded-lg p-4 transition-all duration-300 ${oe?"border-purple-500 bg-purple-50 shadow-lg ring-2 ring-purple-300":"border-gray-200"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"bg-gray-100 px-3 py-1 rounded-full",children:n.jsxs("span",{className:"text-xs text-gray-700",children:[n.jsx("strong",{children:"Request ID:"})," ",U.id.slice(0,8).toUpperCase()]})}),oe&&n.jsx("div",{className:"bg-purple-600 text-white px-3 py-1 rounded-full text-xs animate-pulse",children:"New Notification"})]}),n.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[n.jsxs("div",{className:`px-3 py-2 rounded-lg text-xs sm:text-sm flex items-center gap-2 border-2 ${Rr(U.status)} w-fit`,children:[cr(U.status),n.jsx("span",{className:"capitalize",children:U.status.replace("-"," ")})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:[n.jsx(Li,{className:"w-4 h-4 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:U.storeName||"Unknown Store"})]})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-2",children:[ir&&U.status==="pending"&&n.jsx("button",{onClick:()=>bt(U.id,"accepted"),className:"w-full sm:w-auto px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors text-sm font-medium",children:"Accept Request"}),ir&&U.status==="accepted"&&n.jsx("button",{onClick:()=>bt(U.id,"in-preparation"),className:"w-full sm:w-auto px-4 py-2.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 active:bg-purple-800 transition-colors text-sm font-medium",children:"Start Preparation"}),ir&&U.status==="in-preparation"&&n.jsx("button",{onClick:()=>bt(U.id,"prepared"),className:"w-full sm:w-auto px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 active:bg-indigo-800 transition-colors text-sm font-medium",children:"Mark as Prepared"}),ir&&U.status==="prepared"&&n.jsx("button",{onClick:()=>hr(U),className:"w-full sm:w-auto px-4 py-2.5 bg-orange-600 text-white rounded-lg hover:bg-orange-700 active:bg-orange-800 transition-colors text-sm font-medium",children:"Mark as Shipped"}),Ft&&(U.status==="shipped"||U.status==="partially-shipped")&&n.jsx("button",{onClick:()=>bt(U.id,U.status==="partially-shipped"?"partially-delivered":"delivered"),className:"w-full sm:w-auto px-4 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 active:bg-green-800 transition-colors text-sm font-medium",children:"Confirm Delivery"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[n.jsx(Fa,{className:"w-4 h-4"}),n.jsxs("span",{children:["Requested by: ",U.requestedByName||U.requestedBy]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[n.jsx("h5",{className:"text-xs sm:text-sm text-gray-600 mb-3",children:"Momos Quantities"}),n.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-2 sm:gap-3",children:De.map(({camelKey:ne,label:Y})=>{const q=U[ne];return!q||q===0?null:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-900",children:q}),n.jsx("p",{className:"text-xs text-gray-600",children:Y.replace(" Momos","")})]},ne)})})]}),U.kitchenUtilities&&Object.keys(U.kitchenUtilities).length>0&&n.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 mb-3",children:[n.jsx("h5",{className:"text-xs sm:text-sm text-purple-700 mb-3",children:"Kitchen Utilities"}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3",children:Object.entries(U.kitchenUtilities).map(([ne,Y])=>n.jsxs("div",{className:"text-sm",children:[n.jsxs("p",{className:"text-gray-900",children:[Y.quantity," ",Y.unit]}),n.jsx("p",{className:"text-xs text-gray-600",children:ne})]},ne))})]}),U.sauces&&Object.keys(U.sauces).length>0&&n.jsxs("div",{className:"bg-pink-50 rounded-lg p-3 mb-3",children:[n.jsx("h5",{className:"text-xs sm:text-sm text-pink-700 mb-3",children:"Sauces Requested"}),n.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:Object.keys(U.sauces).map(ne=>n.jsx("span",{className:"px-3 py-1 bg-pink-200 text-pink-900 rounded-full text-xs",children:ne},ne))})]}),U.utilities&&Object.keys(U.utilities).length>0&&n.jsxs("div",{className:"bg-indigo-50 rounded-lg p-3 mb-3",children:[n.jsx("h5",{className:"text-xs sm:text-sm text-indigo-700 mb-3",children:"Utilities"}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3",children:Object.entries(U.utilities).map(([ne,Y])=>n.jsxs("div",{className:"text-sm",children:[n.jsxs("p",{className:"text-gray-900",children:[Y," pcs"]}),n.jsx("p",{className:"text-xs text-gray-600",children:ne})]},ne))})]}),U.notes&&n.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-2 rounded mb-3",children:n.jsxs("p",{className:"text-xs text-gray-700",children:[n.jsx("strong",{children:"Notes:"})," ",U.notes]})}),n.jsx("div",{className:"pt-3 border-t border-gray-200",children:n.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-gray-500",children:[n.jsxs("div",{children:["Created: ",new Date(U.createdAt).toLocaleString()]}),U.acceptedAt&&n.jsxs("div",{children:["Accepted: ",new Date(U.acceptedAt).toLocaleString()]}),U.preparedAt&&n.jsxs("div",{children:["Prepared: ",new Date(U.preparedAt).toLocaleString()]}),U.shippedAt&&n.jsxs("div",{children:["Shipped: ",new Date(U.shippedAt).toLocaleString()]}),U.deliveredAt&&n.jsxs("div",{children:["Delivered: ",new Date(U.deliveredAt).toLocaleString()]})]})})]},U.id)})]})})]},ve)})]}),z&&n.jsx(_2,{context:e,selectedStoreId:r||e.user?.storeId,onClose:()=>I(!1),isProductionHouse:!1,isStoreFinishedProducts:!0}),Ee&&n.jsx(Joe,{storeId:r||e.user?.storeId||"",accessToken:e.user?.accessToken||"",thresholds:me,onClose:()=>_e(!1),onSave:ve=>{ye(ve),_e(!1)}}),Ut&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white rounded-t-2xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Plate Configuration"}),n.jsx("p",{className:"text-sm text-blue-100",children:"Set how many momos are in each plate"})]}),n.jsx("button",{onClick:()=>Vt(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Kr,{className:"w-6 h-6"})})]})}),n.jsxs("div",{className:"p-6 bg-blue-50 border-b-2 border-blue-200",children:[n.jsx("h3",{className:"text-gray-900 font-semibold mb-2",children:"How it works:"}),n.jsxs("p",{className:"text-sm text-gray-700",children:["Stock will be displayed as both pieces and plates. For example, if you have 170 momos and each plate contains 6 momos, it will show as ",n.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded",children:"170 pcs / 28 plates"}),"."]})]}),n.jsxs("div",{className:"p-6",children:[n.jsx("label",{className:"text-gray-900 font-semibold mb-3 block",children:"Momos Per Plate"}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-300 rounded-xl p-4",children:[n.jsx("input",{type:"number",min:"1",max:"20",value:ct,onChange:ve=>{const tt=parseInt(ve.target.value)||6;Wt(tt),localStorage.setItem("momosPerPlate",tt.toString())},className:"w-full px-4 py-3 border-2 border-blue-400 rounded-lg focus:border-blue-600 focus:outline-none text-center text-2xl font-bold text-blue-900"}),n.jsx("p",{className:"text-center text-sm text-blue-700 mt-2",children:"pieces per plate"})]})]}),n.jsx("div",{className:"p-4 bg-gray-50 rounded-b-2xl flex justify-end",children:n.jsx("button",{onClick:()=>Vt(!1),className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg",children:"Done"})})]})}),qe&&He&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[n.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-pink-500 p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[n.jsx(Ry,{className:"w-6 h-6"}),"Confirm Shipping Details"]}),n.jsx("p",{className:"text-orange-100 mt-1",children:"Verify quantities and add notes for any changes"})]}),n.jsx("button",{onClick:()=>G(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Kr,{className:"w-6 h-6"})})]})}),n.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-220px)]",children:n.jsxs("div",{className:"space-y-6",children:[Object.entries(ut).filter(([ve])=>!ve.startsWith("kitchenUtility_")&&!ve.startsWith("utility_")).length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-3",children:"Momos"}),n.jsx("div",{className:"space-y-3",children:Object.entries(ut).filter(([ve])=>!ve.startsWith("kitchenUtility_")&&!ve.startsWith("utility_")).map(([ve,tt])=>{const at=He[ve]||0,pt=ve.replace(/([A-Z])/g," $1").replace(/^./,U=>U.toUpperCase()),ft=tt!==at;return n.jsx("div",{className:`border rounded-lg p-4 ${ft?"border-amber-300 bg-amber-50":"border-gray-200"}`,children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[pt,n.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(Requested: ",at,")"]})]}),n.jsx("input",{type:"number",min:"0",value:tt,onChange:U=>ze({...ut,[ve]:parseInt(U.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),ft&&n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-amber-700 mb-1",children:"Reason for difference *"}),n.jsx("input",{type:"text",value:Pe[ve]||"",onChange:U=>ke({...Pe,[ve]:U.target.value}),placeholder:"e.g., Insufficient stock",className:"w-full px-3 py-2 border border-amber-300 rounded-lg bg-white"})]})]})},ve)})})]}),Object.entries(ut).filter(([ve])=>ve.startsWith("kitchenUtility_")).length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-3",children:"Kitchen Utilities"}),n.jsx("div",{className:"space-y-3",children:Object.entries(ut).filter(([ve])=>ve.startsWith("kitchenUtility_")).map(([ve,tt])=>{const at=ve.replace("kitchenUtility_",""),pt=He.kitchenUtilities?.[at]?.quantity||0,ft=He.kitchenUtilities?.[at]?.unit||"",U=tt!==pt;return n.jsx("div",{className:`border rounded-lg p-4 ${U?"border-amber-300 bg-amber-50":"border-gray-200"}`,children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[at,n.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(Requested: ",pt," ",ft,")"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",min:"0",value:tt,onChange:oe=>ze({...ut,[ve]:parseFloat(oe.target.value)||0}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"}),n.jsx("span",{className:"px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-700",children:ft})]})]}),U&&n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-amber-700 mb-1",children:"Reason for difference *"}),n.jsx("input",{type:"text",value:Pe[ve]||"",onChange:oe=>ke({...Pe,[ve]:oe.target.value}),placeholder:"e.g., Insufficient stock",className:"w-full px-3 py-2 border border-amber-300 rounded-lg bg-white"})]})]})},ve)})})]}),Object.entries(ut).filter(([ve])=>ve.startsWith("utility_")).length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-3",children:"Utilities"}),n.jsx("div",{className:"space-y-3",children:Object.entries(ut).filter(([ve])=>ve.startsWith("utility_")).map(([ve,tt])=>{const at=ve.replace("utility_",""),pt=He.utilities?.[at]||0,ft=tt!==pt;return n.jsx("div",{className:`border rounded-lg p-4 ${ft?"border-amber-300 bg-amber-50":"border-gray-200"}`,children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[at,n.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(Requested: ",pt," pcs)"]})]}),n.jsx("input",{type:"number",min:"0",value:tt,onChange:U=>ze({...ut,[ve]:parseInt(U.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),ft&&n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-amber-700 mb-1",children:"Reason for difference *"}),n.jsx("input",{type:"text",value:Pe[ve]||"",onChange:U=>ke({...Pe,[ve]:U.target.value}),placeholder:"e.g., Insufficient stock",className:"w-full px-3 py-2 border border-amber-300 rounded-lg bg-white"})]})]})},ve)})})]}),n.jsx("div",{className:"border-t border-gray-200 pt-4",children:n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:Xe,onChange:ve=>We(ve.target.checked),className:"mt-1 w-5 h-5 text-orange-600 rounded border-gray-300"}),n.jsxs("span",{className:"text-sm text-gray-700",children:[n.jsx("strong",{className:"text-gray-900",children:"I confirm that I am responsible for shipping these items"})," and have verified the quantities above. I understand that any discrepancies must be documented with a valid reason."]})]})})]})}),n.jsxs("div",{className:"p-4 bg-gray-100 border-t flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>G(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-medium",children:"Cancel"}),n.jsx("button",{onClick:ht,disabled:!Xe,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-pink-500 text-white rounded-lg hover:from-orange-600 hover:to-pink-600 transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm Shipping"})]})]})})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var ZF=1252,Zoe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Ok={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Pk=function(e){Zoe.indexOf(e)!=-1&&(ZF=Ok[0]=e)};function ele(){Pk(1252)}var xi=function(e){Pk(e)};function e$(){xi(1200),ele()}function dP(e){for(var t=[],r=0,a=e.length;r<a;++r)t[r]=e.charCodeAt(r);return t}function tle(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function t$(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var mh=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?tle(e.slice(2)):t==254&&r==255?t$(e.slice(2)):t==65279?e.slice(1):e},km=function(t){return String.fromCharCode(t)},uP=function(t){return String.fromCharCode(t)},Tf,rl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function hP(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0,d=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,a=e.charCodeAt(u++),o=(r&3)<<4|a>>4,s=e.charCodeAt(u++),l=(a&15)<<2|s>>6,d=s&63,isNaN(a)?l=d=64:isNaN(s)&&(d=64),t+=rl.charAt(i)+rl.charAt(o)+rl.charAt(l)+rl.charAt(d);return t}function As(e){var t="",r=0,a=0,s=0,i=0,o=0,l=0,d=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=rl.indexOf(e.charAt(u++)),o=rl.indexOf(e.charAt(u++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=rl.indexOf(e.charAt(u++)),a=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(a)),d=rl.indexOf(e.charAt(u++)),s=(l&3)<<6|d,d!==64&&(t+=String.fromCharCode(s));return t}var kr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),wc=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function dl(e){return kr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function fP(e){return kr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var pi=function(t){return kr?wc(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function jc(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Ik(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return Ik(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Zo=kr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:wc(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function rle(e){for(var t=[],r=0,a=e.length+250,s=dl(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>a&&(t.push(s.slice(0,r)),r=0,s=dl(65535),a=65530)}return t.push(s.slice(0,r)),Zo(t)}var Qa=/\u0000/g,ph=/[\u0001-\u0006]/g;function Nd(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function yi(e,t){var r=""+e;return r.length>=t?r:Nn("0",t-r.length)+r}function Dk(e,t){var r=""+e;return r.length>=t?r:Nn(" ",t-r.length)+r}function Kp(e,t){var r=""+e;return r.length>=t?r:r+Nn(" ",t-r.length)}function nle(e,t){var r=""+Math.round(e);return r.length>=t?r:Nn("0",t-r.length)+r}function ale(e,t){var r=""+e;return r.length>=t?r:Nn("0",t-r.length)+r}var mP=Math.pow(2,32);function ad(e,t){if(e>mP||e<-mP)return nle(e,t);var r=Math.round(e);return ale(r,t)}function Vp(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var pP=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],G1=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function sle(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var lr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},gP={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},ile={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Gp(e,t,r){for(var a=e<0?-1:1,s=e*a,i=0,o=1,l=0,d=1,u=0,f=0,m=Math.floor(s);u<t&&(m=Math.floor(s),l=m*o+i,f=m*u+d,!(s-m<5e-8));)s=1/(s-m),i=o,o=l,d=u,u=f;if(f>t&&(u>t?(f=d,l=i):(f=u,l=o)),!r)return[0,a*l,f];var p=Math.floor(a*l/f);return[p,a*l-p*f,f]}function Xl(e,t,r){if(e>2958465||e<0)return null;var a=e|0,s=Math.floor(86400*(e-a)),i=0,o=[],l={D:a,T:s,u:86400*(e-a)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(a+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++a,++l.D)),a===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var d=new Date(1900,0,1);d.setDate(d.getDate()+a-1),o=[d.getFullYear(),d.getMonth()+1,d.getDate()],i=d.getDay(),a<60&&(i=(i+6)%7),r&&(i=hle(d,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var r$=new Date(1899,11,31,0,0,0),ole=r$.getTime(),lle=new Date(1900,2,1,0,0,0);function n$(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=lle&&(r+=1440*60*1e3),(r-(ole+(e.getTimezoneOffset()-r$.getTimezoneOffset())*6e4))/(1440*60*1e3)}function Mk(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function cle(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function dle(e){var t=e<0?12:11,r=Mk(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function ule(e){var t=Mk(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Of(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=dle(e):t===10?r=e.toFixed(10).substr(0,12):r=ule(e),Mk(cle(r.toUpperCase()))}function uc(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Of(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Ys(14,n$(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function hle(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function fle(e,t,r,a){var s="",i=0,o=0,l=r.y,d,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:d=l%100,u=2;break;default:d=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:d=r.m,u=t.length;break;case 3:return G1[r.m-1][1];case 5:return G1[r.m-1][0];default:return G1[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:d=r.d,u=t.length;break;case 3:return pP[r.q][0];default:return pP[r.q][1]}break;case 104:switch(t.length){case 1:case 2:d=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:d=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:d=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?yi(r.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=yi(i,2+a),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":d=r.D*24+r.H;break;case"[m]":case"[mm]":d=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":d=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:d=l,u=1;break}var f=u>0?yi(d,u):"";return f}function nl(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var a$=/%/g;function mle(e,t,r){var a=t.replace(a$,""),s=t.length-a.length;return bo(e,a,r*Math.pow(10,2*s))+Nn("%",s)}function ple(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return bo(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function s$(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+s$(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,d,u,f){return d+u+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var i$=/# (\?+)( ?)\/( ?)(\d+)/;function gle(e,t,r){var a=parseInt(e[4],10),s=Math.round(t*a),i=Math.floor(s/a),o=s-i*a,l=a;return r+(i===0?"":""+i)+" "+(o===0?Nn(" ",e[1].length+1+e[4].length):Dk(o,e[1].length)+e[2]+"/"+e[3]+yi(l,e[4].length))}function xle(e,t,r){return r+(t===0?"":""+t)+Nn(" ",e[1].length+2+e[4].length)}var o$=/^#*0*\.([0#]+)/,l$=/\).*[0#]/,c$=/\(###\) ###\\?-####/;function Ka(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function xP(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function yP(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function yle(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function vle(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Hs(e,t,r){if(e.charCodeAt(0)===40&&!t.match(l$)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Hs("n",a,r):"("+Hs("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return ple(e,t,r);if(t.indexOf("%")!==-1)return mle(e,t,r);if(t.indexOf("E")!==-1)return s$(t,r);if(t.charCodeAt(0)===36)return"$"+Hs(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,d=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+ad(d,t.length);if(t.match(/^[#?]+$/))return s=ad(r,0),s==="0"&&(s=""),s.length>t.length?s:Ka(t.substr(0,t.length-s.length))+s;if(i=t.match(i$))return gle(i,d,u);if(t.match(/^#+0+$/))return u+ad(d,t.length-t.indexOf("0"));if(i=t.match(o$))return s=xP(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Ka(i[1])).replace(/\.$/,"."+Ka(i[1])).replace(/\.(\d*)$/,function(v,y){return"."+y+Nn("0",Ka(i[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+xP(d,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+nl(ad(d,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Hs(e,t,-r):nl(""+(Math.floor(r)+yle(r,i[1].length)))+"."+yi(yP(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Hs(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Nd(Hs(e,t.replace(/[\\-]/g,""),r)),o=0,Nd(Nd(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<s.length?s.charAt(o++):v==="0"?"0":""}));if(t.match(c$))return s=Hs(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Gp(d,Math.pow(10,o)-1,!1),s=""+u,f=bo("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=Kp(l[2],o),f.length<i[4].length&&(f=Ka(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Gp(d,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Dk(l[1],o)+i[2]+"/"+i[3]+Kp(l[2],o):Nn(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=ad(r,0),t.length<=s.length?s:Ka(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var m=t.indexOf(".")-o,p=t.length-s.length-m;return Ka(t.substr(0,m)+s+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=yP(r,i[1].length),r<0?"-"+Hs(e,t,-r):nl(vle(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?yi(0,3-v.length):"")+v})+"."+yi(o,i[1].length);switch(t){case"###,##0.00":return Hs(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=nl(ad(d,0));return g!=="0"?u+g:"";case"###,###.00":return Hs(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Hs(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function ble(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return bo(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function wle(e,t,r){var a=t.replace(a$,""),s=t.length-a.length;return bo(e,a,r*Math.pow(10,2*s))+Nn("%",s)}function d$(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+d$(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,d,u,f){return d+u+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Oi(e,t,r){if(e.charCodeAt(0)===40&&!t.match(l$)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Oi("n",a,r):"("+Oi("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return ble(e,t,r);if(t.indexOf("%")!==-1)return wle(e,t,r);if(t.indexOf("E")!==-1)return d$(t,r);if(t.charCodeAt(0)===36)return"$"+Oi(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,d=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+yi(d,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Ka(t.substr(0,t.length-s.length))+s;if(i=t.match(i$))return xle(i,d,u);if(t.match(/^#+0+$/))return u+yi(d,t.length-t.indexOf("0"));if(i=t.match(o$))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Ka(i[1])).replace(/\.$/,"."+Ka(i[1])),s=s.replace(/\.(\d*)$/,function(v,y){return"."+y+Nn("0",Ka(i[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+d).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+nl(""+d);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Oi(e,t,-r):nl(""+r)+"."+Nn("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Oi(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Nd(Oi(e,t.replace(/[\\-]/g,""),r)),o=0,Nd(Nd(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<s.length?s.charAt(o++):v==="0"?"0":""}));if(t.match(c$))return s=Oi(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Gp(d,Math.pow(10,o)-1,!1),s=""+u,f=bo("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=Kp(l[2],o),f.length<i[4].length&&(f=Ka(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Gp(d,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Dk(l[1],o)+i[2]+"/"+i[3]+Kp(l[2],o):Nn(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Ka(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var m=t.indexOf(".")-o,p=t.length-s.length-m;return Ka(t.substr(0,m)+s+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Oi(e,t,-r):nl(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?yi(0,3-v.length):"")+v})+"."+yi(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var g=nl(""+d);return g!=="0"?u+g:"";default:if(t.match(/\.[0#?]*$/))return Oi(e,t.slice(0,t.lastIndexOf(".")),r)+Ka(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function bo(e,t,r){return(r|0)===r?Oi(e,t,r):Hs(e,t,r)}function jle(e){for(var t=[],r=!1,a=0,s=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(s,a-s),s=a+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var u$=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function gu(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":Vp(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(u$))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Nle(e,t,r,a){for(var s=[],i="",o=0,l="",d="t",u,f,m,p="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!Vp(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(m=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(m);s[s.length]={t:"t",v:i},++o;break;case"\\":var g=e.charAt(++o),v=g==="("||g===")"?g:"t";s[s.length]={t:v,v:g},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=Xl(t,r,e.charAt(o+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},d=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Xl(t,r),u==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&d.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=p),s[s.length]={t:l,v:i},d=l;break;case"A":case"a":case"":var y={t:l,v:l};if(u==null&&(u=Xl(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",p="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",o+=5,p="h"):e.substr(o,5).toUpperCase()==="/"?(u!=null&&(y.v=u.H>=12?"":""),y.t="T",o+=5,p="h"):(y.t="t",++o),u==null&&y.t==="T")return"";s[s.length]=y,d=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(u$)){if(u==null&&(u=Xl(t,r),u==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},d=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",gu(e)||(s[s.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},d=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:a===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var w=0,k=0,N;for(o=s.length-1,d="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=p,d="h",w<1&&(w=1);break;case"s":(N=s[o].v.match(/\.0+$/))&&(k=Math.max(k,N[0].length-1)),w<3&&(w=3);case"d":case"y":case"M":case"e":d=s[o].t;break;case"m":d==="s"&&(s[o].t="M",w<2&&(w=2));break;case"X":break;case"Z":w<1&&s[o].v.match(/[Hh]/)&&(w=1),w<2&&s[o].v.match(/[Mm]/)&&(w=2),w<3&&s[o].v.match(/[Ss]/)&&(w=3)}switch(w){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",A;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=fle(s[o].t.charCodeAt(0),s[o].v,u,k),s[o].t="t";break;case"n":case"?":for(A=o+1;s[A]!=null&&((l=s[A].t)==="?"||l==="D"||(l===" "||l==="t")&&s[A+1]!=null&&(s[A+1].t==="?"||s[A+1].t==="t"&&s[A+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[A].v==="/"||s[A].v===" "&&s[A+1]!=null&&s[A+1].t=="?"));)s[o].v+=s[A].v,s[A]={v:"",t:";"},++A;b+=s[o].v,o=A-1;break;case"G":s[o].t="t",s[o].v=uc(t,r);break}var E="",S,_;if(b.length>0){b.charCodeAt(0)==40?(S=t<0&&b.charCodeAt(0)===45?-t:t,_=bo("n",b,S)):(S=t<0&&a>1?-t:t,_=bo("n",b,S),S<0&&s[0]&&s[0].t=="t"&&(_=_.substr(1),s[0].v="-"+s[0].v)),A=_.length-1;var C=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){C=o;break}var P=s.length;if(C===s.length&&_.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(A>=s[o].v.length-1?(A-=s[o].v.length,s[o].v=_.substr(A+1,s[o].v.length)):A<0?s[o].v="":(s[o].v=_.substr(0,A+1),A=-1),s[o].t="t",P=o);A>=0&&P<s.length&&(s[P].v=_.substr(0,A+1)+s[P].v)}else if(C!==s.length&&_.indexOf("E")===-1){for(A=_.indexOf(".")-1,o=C;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(f=s[o].v.indexOf(".")>-1&&o===C?s[o].v.indexOf(".")-1:s[o].v.length-1,E=s[o].v.substr(f+1);f>=0;--f)A>=0&&(s[o].v.charAt(f)==="0"||s[o].v.charAt(f)==="#")&&(E=_.charAt(A--)+E);s[o].v=E,s[o].t="t",P=o}for(A>=0&&P<s.length&&(s[P].v=_.substr(0,A+1)+s[P].v),A=_.indexOf(".")+1,o=C;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==C)){for(f=s[o].v.indexOf(".")>-1&&o===C?s[o].v.indexOf(".")+1:0,E=s[o].v.substr(0,f);f<s[o].v.length;++f)A<_.length&&(E+=_.charAt(A++));s[o].v=E,s[o].t="t",P=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(S=a>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=bo(s[o].t,s[o].v,S),s[o].t="t");var B="";for(o=0;o!==s.length;++o)s[o]!=null&&(B+=s[o].v);return B}var vP=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function bP(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function kle(e,t){var r=jle(e),a=r.length,s=r[a-1].indexOf("@");if(a<4&&s>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(vP),l=r[1].match(vP);return bP(t,o)?[a,r[0]]:bP(t,l)?[a,r[1]]:[a,r[o!=null&&l!=null?2:1]]}return[a,i]}function Ys(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:lr)[e],a==null&&(a=r.table&&r.table[gP[e]]||lr[gP[e]]),a==null&&(a=ile[e]||"General");break}if(Vp(a,0))return uc(t,r);t instanceof Date&&(t=n$(t,r.date1904));var s=kle(a,t);if(Vp(s[1]))return uc(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Nle(s[1],t,r,s[0])}function ec(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(lr[r]==null){t<0&&(t=r);continue}if(lr[r]==e){t=r;break}}t<0&&(t=391)}return lr[t]=e,t}function h$(){lr=sle()}var Sle={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},f$=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function _le(e){var t=typeof e=="number"?lr[e]:e;return t=t.replace(f$,"(\\d+)"),new RegExp("^"+t+"$")}function Ele(e,t,r){var a=-1,s=-1,i=-1,o=-1,l=-1,d=-1;(t.match(f$)||[]).forEach(function(m,p){var g=parseInt(r[p+1],10);switch(m.toLowerCase().charAt(0)){case"y":a=g;break;case"d":i=g;break;case"h":o=g;break;case"s":d=g;break;case"m":o>=0?l=g:s=g;break}}),d>=0&&l==-1&&s>=0&&(l=s,s=-1);var u=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var f=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2);return o==-1&&l==-1&&d==-1?u:a==-1&&s==-1&&i==-1?f:u+"T"+f}var Cle=(function(){var e={};e.version="1.2.0";function t(){for(var _=0,C=new Array(256),P=0;P!=256;++P)_=P,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,C[P]=_;return typeof Int32Array<"u"?new Int32Array(C):C}var r=t();function a(_){var C=0,P=0,B=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)F[B]=_[B];for(B=0;B!=256;++B)for(P=_[B],C=256+B;C<4096;C+=256)P=F[C]=P>>>8^_[P&255];var O=[];for(B=1;B!=16;++B)O[B-1]=typeof Int32Array<"u"?F.subarray(B*256,B*256+256):F.slice(B*256,B*256+256);return O}var s=a(r),i=s[0],o=s[1],l=s[2],d=s[3],u=s[4],f=s[5],m=s[6],p=s[7],g=s[8],v=s[9],y=s[10],w=s[11],k=s[12],N=s[13],b=s[14];function A(_,C){for(var P=C^-1,B=0,F=_.length;B<F;)P=P>>>8^r[(P^_.charCodeAt(B++))&255];return~P}function E(_,C){for(var P=C^-1,B=_.length-15,F=0;F<B;)P=b[_[F++]^P&255]^N[_[F++]^P>>8&255]^k[_[F++]^P>>16&255]^w[_[F++]^P>>>24]^y[_[F++]]^v[_[F++]]^g[_[F++]]^p[_[F++]]^m[_[F++]]^f[_[F++]]^u[_[F++]]^d[_[F++]]^l[_[F++]]^o[_[F++]]^i[_[F++]]^r[_[F++]];for(B+=15;F<B;)P=P>>>8^r[(P^_[F++])&255];return~P}function S(_,C){for(var P=C^-1,B=0,F=_.length,O=0,R=0;B<F;)O=_.charCodeAt(B++),O<128?P=P>>>8^r[(P^O)&255]:O<2048?(P=P>>>8^r[(P^(192|O>>6&31))&255],P=P>>>8^r[(P^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,R=_.charCodeAt(B++)&1023,P=P>>>8^r[(P^(240|O>>8&7))&255],P=P>>>8^r[(P^(128|O>>2&63))&255],P=P>>>8^r[(P^(128|R>>6&15|(O&3)<<4))&255],P=P>>>8^r[(P^(128|R&63))&255]):(P=P>>>8^r[(P^(224|O>>12&15))&255],P=P>>>8^r[(P^(128|O>>6&63))&255],P=P>>>8^r[(P^(128|O&63))&255]);return~P}return e.table=r,e.bstr=A,e.buf=E,e.str=S,e})(),Er=(function(){var t={};t.version="1.2.1";function r(U,oe){for(var ne=U.split("/"),Y=oe.split("/"),q=0,W=0,ie=Math.min(ne.length,Y.length);q<ie;++q){if(W=ne[q].length-Y[q].length)return W;if(ne[q]!=Y[q])return ne[q]<Y[q]?-1:1}return ne.length-Y.length}function a(U){if(U.charAt(U.length-1)=="/")return U.slice(0,-1).indexOf("/")===-1?U:a(U.slice(0,-1));var oe=U.lastIndexOf("/");return oe===-1?U:U.slice(0,oe+1)}function s(U){if(U.charAt(U.length-1)=="/")return s(U.slice(0,-1));var oe=U.lastIndexOf("/");return oe===-1?U:U.slice(oe+1)}function i(U,oe){typeof oe=="string"&&(oe=new Date(oe));var ne=oe.getHours();ne=ne<<6|oe.getMinutes(),ne=ne<<5|oe.getSeconds()>>>1,U.write_shift(2,ne);var Y=oe.getFullYear()-1980;Y=Y<<4|oe.getMonth()+1,Y=Y<<5|oe.getDate(),U.write_shift(2,Y)}function o(U){var oe=U.read_shift(2)&65535,ne=U.read_shift(2)&65535,Y=new Date,q=ne&31;ne>>>=5;var W=ne&15;ne>>>=4,Y.setMilliseconds(0),Y.setFullYear(ne+1980),Y.setMonth(W-1),Y.setDate(q);var ie=oe&31;oe>>>=5;var he=oe&63;return oe>>>=6,Y.setHours(oe),Y.setMinutes(he),Y.setSeconds(ie<<1),Y}function l(U){wa(U,0);for(var oe={},ne=0;U.l<=U.length-4;){var Y=U.read_shift(2),q=U.read_shift(2),W=U.l+q,ie={};switch(Y){case 21589:ne=U.read_shift(1),ne&1&&(ie.mtime=U.read_shift(4)),q>5&&(ne&2&&(ie.atime=U.read_shift(4)),ne&4&&(ie.ctime=U.read_shift(4))),ie.mtime&&(ie.mt=new Date(ie.mtime*1e3));break}U.l=W,oe[Y]=ie}return oe}var d;function u(){return d||(d={})}function f(U,oe){if(U[0]==80&&U[1]==75)return $t(U,oe);if((U[0]|32)==109&&(U[1]|32)==105)return _n(U,oe);if(U.length<512)throw new Error("CFB file size "+U.length+" < 512");var ne=3,Y=512,q=0,W=0,ie=0,he=0,K=0,ue=[],fe=U.slice(0,512);wa(fe,0);var Me=m(fe);switch(ne=Me[0],ne){case 3:Y=512;break;case 4:Y=4096;break;case 0:if(Me[1]==0)return $t(U,oe);default:throw new Error("Major Version: Expected 3 or 4 saw "+ne)}Y!==512&&(fe=U.slice(0,Y),wa(fe,28));var we=U.slice(0,Y);p(fe,ne);var lt=fe.read_shift(4,"i");if(ne===3&&lt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+lt);fe.l+=4,ie=fe.read_shift(4,"i"),fe.l+=4,fe.chk("00100000","Mini Stream Cutoff Size: "),he=fe.read_shift(4,"i"),q=fe.read_shift(4,"i"),K=fe.read_shift(4,"i"),W=fe.read_shift(4,"i");for(var Ge=-1,Ze=0;Ze<109&&(Ge=fe.read_shift(4,"i"),!(Ge<0));++Ze)ue[Ze]=Ge;var jt=g(U,Y);w(K,W,jt,Y,ue);var Gt=N(jt,ie,ue,Y);Gt[ie].name="!Directory",q>0&&he!==R&&(Gt[he].name="!MiniFAT"),Gt[ue[0]].name="!FAT",Gt.fat_addrs=ue,Gt.ssz=Y;var ar={},Nr=[],vn=[],Tr=[];b(ie,Gt,jt,Nr,q,ar,vn,he),v(vn,Tr,Nr),Nr.shift();var Dn={FileIndex:vn,FullPaths:Tr};return oe&&oe.raw&&(Dn.raw={header:we,sectors:jt}),Dn}function m(U){if(U[U.l]==80&&U[U.l+1]==75)return[0,0];U.chk(Q,"Header Signature: "),U.l+=16;var oe=U.read_shift(2,"u");return[U.read_shift(2,"u"),oe]}function p(U,oe){var ne=9;switch(U.l+=2,ne=U.read_shift(2)){case 9:if(oe!=3)throw new Error("Sector Shift: Expected 9 saw "+ne);break;case 12:if(oe!=4)throw new Error("Sector Shift: Expected 12 saw "+ne);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ne)}U.chk("0600","Mini Sector Shift: "),U.chk("000000000000","Reserved: ")}function g(U,oe){for(var ne=Math.ceil(U.length/oe)-1,Y=[],q=1;q<ne;++q)Y[q-1]=U.slice(q*oe,(q+1)*oe);return Y[ne-1]=U.slice(ne*oe),Y}function v(U,oe,ne){for(var Y=0,q=0,W=0,ie=0,he=0,K=ne.length,ue=[],fe=[];Y<K;++Y)ue[Y]=fe[Y]=Y,oe[Y]=ne[Y];for(;he<fe.length;++he)Y=fe[he],q=U[Y].L,W=U[Y].R,ie=U[Y].C,ue[Y]===Y&&(q!==-1&&ue[q]!==q&&(ue[Y]=ue[q]),W!==-1&&ue[W]!==W&&(ue[Y]=ue[W])),ie!==-1&&(ue[ie]=Y),q!==-1&&Y!=ue[Y]&&(ue[q]=ue[Y],fe.lastIndexOf(q)<he&&fe.push(q)),W!==-1&&Y!=ue[Y]&&(ue[W]=ue[Y],fe.lastIndexOf(W)<he&&fe.push(W));for(Y=1;Y<K;++Y)ue[Y]===Y&&(W!==-1&&ue[W]!==W?ue[Y]=ue[W]:q!==-1&&ue[q]!==q&&(ue[Y]=ue[q]));for(Y=1;Y<K;++Y)if(U[Y].type!==0){if(he=Y,he!=ue[he])do he=ue[he],oe[Y]=oe[he]+"/"+oe[Y];while(he!==0&&ue[he]!==-1&&he!=ue[he]);ue[Y]=-1}for(oe[0]+="/",Y=1;Y<K;++Y)U[Y].type!==2&&(oe[Y]+="/")}function y(U,oe,ne){for(var Y=U.start,q=U.size,W=[],ie=Y;ne&&q>0&&ie>=0;)W.push(oe.slice(ie*O,ie*O+O)),q-=O,ie=ql(ne,ie*4);return W.length===0?ea(0):Zo(W).slice(0,U.size)}function w(U,oe,ne,Y,q){var W=R;if(U===R){if(oe!==0)throw new Error("DIFAT chain shorter than expected")}else if(U!==-1){var ie=ne[U],he=(Y>>>2)-1;if(!ie)return;for(var K=0;K<he&&(W=ql(ie,K*4))!==R;++K)q.push(W);w(ql(ie,Y-4),oe-1,ne,Y,q)}}function k(U,oe,ne,Y,q){var W=[],ie=[];q||(q=[]);var he=Y-1,K=0,ue=0;for(K=oe;K>=0;){q[K]=!0,W[W.length]=K,ie.push(U[K]);var fe=ne[Math.floor(K*4/Y)];if(ue=K*4&he,Y<4+ue)throw new Error("FAT boundary crossed: "+K+" 4 "+Y);if(!U[fe])break;K=ql(U[fe],ue)}return{nodes:W,data:TP([ie])}}function N(U,oe,ne,Y){var q=U.length,W=[],ie=[],he=[],K=[],ue=Y-1,fe=0,Me=0,we=0,lt=0;for(fe=0;fe<q;++fe)if(he=[],we=fe+oe,we>=q&&(we-=q),!ie[we]){K=[];var Ge=[];for(Me=we;Me>=0;){Ge[Me]=!0,ie[Me]=!0,he[he.length]=Me,K.push(U[Me]);var Ze=ne[Math.floor(Me*4/Y)];if(lt=Me*4&ue,Y<4+lt)throw new Error("FAT boundary crossed: "+Me+" 4 "+Y);if(!U[Ze]||(Me=ql(U[Ze],lt),Ge[Me]))break}W[we]={nodes:he,data:TP([K])}}return W}function b(U,oe,ne,Y,q,W,ie,he){for(var K=0,ue=Y.length?2:0,fe=oe[U].data,Me=0,we=0,lt;Me<fe.length;Me+=128){var Ge=fe.slice(Me,Me+128);wa(Ge,64),we=Ge.read_shift(2),lt=Bk(Ge,0,we-ue),Y.push(lt);var Ze={name:lt,type:Ge.read_shift(1),color:Ge.read_shift(1),L:Ge.read_shift(4,"i"),R:Ge.read_shift(4,"i"),C:Ge.read_shift(4,"i"),clsid:Ge.read_shift(16),state:Ge.read_shift(4,"i"),start:0,size:0},jt=Ge.read_shift(2)+Ge.read_shift(2)+Ge.read_shift(2)+Ge.read_shift(2);jt!==0&&(Ze.ct=A(Ge,Ge.l-8));var Gt=Ge.read_shift(2)+Ge.read_shift(2)+Ge.read_shift(2)+Ge.read_shift(2);Gt!==0&&(Ze.mt=A(Ge,Ge.l-8)),Ze.start=Ge.read_shift(4,"i"),Ze.size=Ge.read_shift(4,"i"),Ze.size<0&&Ze.start<0&&(Ze.size=Ze.type=0,Ze.start=R,Ze.name=""),Ze.type===5?(K=Ze.start,q>0&&K!==R&&(oe[K].name="!StreamData")):Ze.size>=4096?(Ze.storage="fat",oe[Ze.start]===void 0&&(oe[Ze.start]=k(ne,Ze.start,oe.fat_addrs,oe.ssz)),oe[Ze.start].name=Ze.name,Ze.content=oe[Ze.start].data.slice(0,Ze.size)):(Ze.storage="minifat",Ze.size<0?Ze.size=0:K!==R&&Ze.start!==R&&oe[K]&&(Ze.content=y(Ze,oe[K].data,(oe[he]||{}).data))),Ze.content&&wa(Ze.content,0),W[lt]=Ze,ie.push(Ze)}}function A(U,oe){return new Date((Ns(U,oe+4)/1e7*Math.pow(2,32)+Ns(U,oe)/1e7-11644473600)*1e3)}function E(U,oe){return u(),f(d.readFileSync(U),oe)}function S(U,oe){var ne=oe&&oe.type;switch(ne||kr&&Buffer.isBuffer(U)&&(ne="buffer"),ne||"base64"){case"file":return E(U,oe);case"base64":return f(pi(As(U)),oe);case"binary":return f(pi(U),oe)}return f(U,oe)}function _(U,oe){var ne=oe||{},Y=ne.root||"Root Entry";if(U.FullPaths||(U.FullPaths=[]),U.FileIndex||(U.FileIndex=[]),U.FullPaths.length!==U.FileIndex.length)throw new Error("inconsistent CFB structure");U.FullPaths.length===0&&(U.FullPaths[0]=Y+"/",U.FileIndex[0]={name:Y,type:5}),ne.CLSID&&(U.FileIndex[0].clsid=ne.CLSID),C(U)}function C(U){var oe="Sh33tJ5";if(!Er.find(U,"/"+oe)){var ne=ea(4);ne[0]=55,ne[1]=ne[3]=50,ne[2]=54,U.FileIndex.push({name:oe,type:2,content:ne,size:4,L:69,R:69,C:69}),U.FullPaths.push(U.FullPaths[0]+oe),P(U)}}function P(U,oe){_(U);for(var ne=!1,Y=!1,q=U.FullPaths.length-1;q>=0;--q){var W=U.FileIndex[q];switch(W.type){case 0:Y?ne=!0:(U.FileIndex.pop(),U.FullPaths.pop());break;case 1:case 2:case 5:Y=!0,isNaN(W.R*W.L*W.C)&&(ne=!0),W.R>-1&&W.L>-1&&W.R==W.L&&(ne=!0);break;default:ne=!0;break}}if(!(!ne&&!oe)){var ie=new Date(1987,1,19),he=0,K=Object.create?Object.create(null):{},ue=[];for(q=0;q<U.FullPaths.length;++q)K[U.FullPaths[q]]=!0,U.FileIndex[q].type!==0&&ue.push([U.FullPaths[q],U.FileIndex[q]]);for(q=0;q<ue.length;++q){var fe=a(ue[q][0]);Y=K[fe],Y||(ue.push([fe,{name:s(fe).replace("/",""),type:1,clsid:J,ct:ie,mt:ie,content:null}]),K[fe]=!0)}for(ue.sort(function(lt,Ge){return r(lt[0],Ge[0])}),U.FullPaths=[],U.FileIndex=[],q=0;q<ue.length;++q)U.FullPaths[q]=ue[q][0],U.FileIndex[q]=ue[q][1];for(q=0;q<ue.length;++q){var Me=U.FileIndex[q],we=U.FullPaths[q];if(Me.name=s(we).replace("/",""),Me.L=Me.R=Me.C=-(Me.color=1),Me.size=Me.content?Me.content.length:0,Me.start=0,Me.clsid=Me.clsid||J,q===0)Me.C=ue.length>1?1:-1,Me.size=0,Me.type=5;else if(we.slice(-1)=="/"){for(he=q+1;he<ue.length&&a(U.FullPaths[he])!=we;++he);for(Me.C=he>=ue.length?-1:he,he=q+1;he<ue.length&&a(U.FullPaths[he])!=a(we);++he);Me.R=he>=ue.length?-1:he,Me.type=1}else a(U.FullPaths[q+1]||"")==a(we)&&(Me.R=q+1),Me.type=2}}}function B(U,oe){var ne=oe||{};if(ne.fileType=="mad")return dr(U,ne);switch(P(U),ne.fileType){case"zip":return hr(U,ne)}var Y=(function(lt){for(var Ge=0,Ze=0,jt=0;jt<lt.FileIndex.length;++jt){var Gt=lt.FileIndex[jt];if(Gt.content){var ar=Gt.content.length;ar>0&&(ar<4096?Ge+=ar+63>>6:Ze+=ar+511>>9)}}for(var Nr=lt.FullPaths.length+3>>2,vn=Ge+7>>3,Tr=Ge+127>>7,Dn=vn+Ze+Nr+Tr,Fr=Dn+127>>7,Ea=Fr<=109?0:Math.ceil((Fr-109)/127);Dn+Fr+Ea+127>>7>Fr;)Ea=++Fr<=109?0:Math.ceil((Fr-109)/127);var Lr=[1,Ea,Fr,Tr,Nr,Ze,Ge,0];return lt.FileIndex[0].size=Ge<<6,Lr[7]=(lt.FileIndex[0].start=Lr[0]+Lr[1]+Lr[2]+Lr[3]+Lr[4]+Lr[5])+(Lr[6]+7>>3),Lr})(U),q=ea(Y[7]<<9),W=0,ie=0;{for(W=0;W<8;++W)q.write_shift(1,V[W]);for(W=0;W<8;++W)q.write_shift(2,0);for(q.write_shift(2,62),q.write_shift(2,3),q.write_shift(2,65534),q.write_shift(2,9),q.write_shift(2,6),W=0;W<3;++W)q.write_shift(2,0);for(q.write_shift(4,0),q.write_shift(4,Y[2]),q.write_shift(4,Y[0]+Y[1]+Y[2]+Y[3]-1),q.write_shift(4,0),q.write_shift(4,4096),q.write_shift(4,Y[3]?Y[0]+Y[1]+Y[2]-1:R),q.write_shift(4,Y[3]),q.write_shift(-4,Y[1]?Y[0]-1:R),q.write_shift(4,Y[1]),W=0;W<109;++W)q.write_shift(-4,W<Y[2]?Y[1]+W:-1)}if(Y[1])for(ie=0;ie<Y[1];++ie){for(;W<236+ie*127;++W)q.write_shift(-4,W<Y[2]?Y[1]+W:-1);q.write_shift(-4,ie===Y[1]-1?R:ie+1)}var he=function(lt){for(ie+=lt;W<ie-1;++W)q.write_shift(-4,W+1);lt&&(++W,q.write_shift(-4,R))};for(ie=W=0,ie+=Y[1];W<ie;++W)q.write_shift(-4,ae.DIFSECT);for(ie+=Y[2];W<ie;++W)q.write_shift(-4,ae.FATSECT);he(Y[3]),he(Y[4]);for(var K=0,ue=0,fe=U.FileIndex[0];K<U.FileIndex.length;++K)fe=U.FileIndex[K],fe.content&&(ue=fe.content.length,!(ue<4096)&&(fe.start=ie,he(ue+511>>9)));for(he(Y[6]+7>>3);q.l&511;)q.write_shift(-4,ae.ENDOFCHAIN);for(ie=W=0,K=0;K<U.FileIndex.length;++K)fe=U.FileIndex[K],fe.content&&(ue=fe.content.length,!(!ue||ue>=4096)&&(fe.start=ie,he(ue+63>>6)));for(;q.l&511;)q.write_shift(-4,ae.ENDOFCHAIN);for(W=0;W<Y[4]<<2;++W){var Me=U.FullPaths[W];if(!Me||Me.length===0){for(K=0;K<17;++K)q.write_shift(4,0);for(K=0;K<3;++K)q.write_shift(4,-1);for(K=0;K<12;++K)q.write_shift(4,0);continue}fe=U.FileIndex[W],W===0&&(fe.start=fe.size?fe.start-1:R);var we=W===0&&ne.root||fe.name;if(ue=2*(we.length+1),q.write_shift(64,we,"utf16le"),q.write_shift(2,ue),q.write_shift(1,fe.type),q.write_shift(1,fe.color),q.write_shift(-4,fe.L),q.write_shift(-4,fe.R),q.write_shift(-4,fe.C),fe.clsid)q.write_shift(16,fe.clsid,"hex");else for(K=0;K<4;++K)q.write_shift(4,0);q.write_shift(4,fe.state||0),q.write_shift(4,0),q.write_shift(4,0),q.write_shift(4,0),q.write_shift(4,0),q.write_shift(4,fe.start),q.write_shift(4,fe.size),q.write_shift(4,0)}for(W=1;W<U.FileIndex.length;++W)if(fe=U.FileIndex[W],fe.size>=4096)if(q.l=fe.start+1<<9,kr&&Buffer.isBuffer(fe.content))fe.content.copy(q,q.l,0,fe.size),q.l+=fe.size+511&-512;else{for(K=0;K<fe.size;++K)q.write_shift(1,fe.content[K]);for(;K&511;++K)q.write_shift(1,0)}for(W=1;W<U.FileIndex.length;++W)if(fe=U.FileIndex[W],fe.size>0&&fe.size<4096)if(kr&&Buffer.isBuffer(fe.content))fe.content.copy(q,q.l,0,fe.size),q.l+=fe.size+63&-64;else{for(K=0;K<fe.size;++K)q.write_shift(1,fe.content[K]);for(;K&63;++K)q.write_shift(1,0)}if(kr)q.l=q.length;else for(;q.l<q.length;)q.write_shift(1,0);return q}function F(U,oe){var ne=U.FullPaths.map(function(K){return K.toUpperCase()}),Y=ne.map(function(K){var ue=K.split("/");return ue[ue.length-(K.slice(-1)=="/"?2:1)]}),q=!1;oe.charCodeAt(0)===47?(q=!0,oe=ne[0].slice(0,-1)+oe):q=oe.indexOf("/")!==-1;var W=oe.toUpperCase(),ie=q===!0?ne.indexOf(W):Y.indexOf(W);if(ie!==-1)return U.FileIndex[ie];var he=!W.match(ph);for(W=W.replace(Qa,""),he&&(W=W.replace(ph,"!")),ie=0;ie<ne.length;++ie)if((he?ne[ie].replace(ph,"!"):ne[ie]).replace(Qa,"")==W||(he?Y[ie].replace(ph,"!"):Y[ie]).replace(Qa,"")==W)return U.FileIndex[ie];return null}var O=64,R=-2,Q="d0cf11e0a1b11ae1",V=[208,207,17,224,161,177,26,225],J="00000000000000000000000000000000",ae={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:R,FREESECT:-1,HEADER_SIGNATURE:Q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:J,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function L(U,oe,ne){u();var Y=B(U,ne);d.writeFileSync(oe,Y)}function H(U){for(var oe=new Array(U.length),ne=0;ne<U.length;++ne)oe[ne]=String.fromCharCode(U[ne]);return oe.join("")}function ce(U,oe){var ne=B(U,oe);switch(oe&&oe.type||"buffer"){case"file":return u(),d.writeFileSync(oe.filename,ne),ne;case"binary":return typeof ne=="string"?ne:H(ne);case"base64":return hP(typeof ne=="string"?ne:H(ne));case"buffer":if(kr)return Buffer.isBuffer(ne)?ne:wc(ne);case"array":return typeof ne=="string"?pi(ne):ne}return ne}var z;function I(U){try{var oe=U.InflateRaw,ne=new oe;if(ne._processChunk(new Uint8Array([3,0]),ne._finishFlushFlag),ne.bytesRead)z=U;else throw new Error("zlib does not expose bytesRead")}catch(Y){console.error("cannot use native zlib: "+(Y.message||Y))}}function Z(U,oe){if(!z)return rt(U,oe);var ne=z.InflateRaw,Y=new ne,q=Y._processChunk(U.slice(U.l),Y._finishFlushFlag);return U.l+=Y.bytesRead,q}function te(U){return z?z.deflateRawSync(U):nt(U)}var se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],be=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ee=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function _e(U){var oe=(U<<1|U<<11)&139536|(U<<5|U<<15)&558144;return(oe>>16|oe>>8|oe)&255}for(var me=typeof Uint8Array<"u",ye=me?new Uint8Array(256):[],qe=0;qe<256;++qe)ye[qe]=_e(qe);function G(U,oe){var ne=ye[U&255];return oe<=8?ne>>>8-oe:(ne=ne<<8|ye[U>>8&255],oe<=16?ne>>>16-oe:(ne=ne<<8|ye[U>>16&255],ne>>>24-oe))}function He(U,oe){var ne=oe&7,Y=oe>>>3;return(U[Y]|(ne<=6?0:U[Y+1]<<8))>>>ne&3}function Ke(U,oe){var ne=oe&7,Y=oe>>>3;return(U[Y]|(ne<=5?0:U[Y+1]<<8))>>>ne&7}function ut(U,oe){var ne=oe&7,Y=oe>>>3;return(U[Y]|(ne<=4?0:U[Y+1]<<8))>>>ne&15}function ze(U,oe){var ne=oe&7,Y=oe>>>3;return(U[Y]|(ne<=3?0:U[Y+1]<<8))>>>ne&31}function Pe(U,oe){var ne=oe&7,Y=oe>>>3;return(U[Y]|(ne<=1?0:U[Y+1]<<8))>>>ne&127}function ke(U,oe,ne){var Y=oe&7,q=oe>>>3,W=(1<<ne)-1,ie=U[q]>>>Y;return ne<8-Y||(ie|=U[q+1]<<8-Y,ne<16-Y)||(ie|=U[q+2]<<16-Y,ne<24-Y)||(ie|=U[q+3]<<24-Y),ie&W}function Xe(U,oe,ne){var Y=oe&7,q=oe>>>3;return Y<=5?U[q]|=(ne&7)<<Y:(U[q]|=ne<<Y&255,U[q+1]=(ne&7)>>8-Y),oe+3}function We(U,oe,ne){var Y=oe&7,q=oe>>>3;return ne=(ne&1)<<Y,U[q]|=ne,oe+1}function ct(U,oe,ne){var Y=oe&7,q=oe>>>3;return ne<<=Y,U[q]|=ne&255,ne>>>=8,U[q+1]=ne,oe+8}function Wt(U,oe,ne){var Y=oe&7,q=oe>>>3;return ne<<=Y,U[q]|=ne&255,ne>>>=8,U[q+1]=ne&255,U[q+2]=ne>>>8,oe+16}function Ut(U,oe){var ne=U.length,Y=2*ne>oe?2*ne:oe+5,q=0;if(ne>=oe)return U;if(kr){var W=fP(Y);if(U.copy)U.copy(W);else for(;q<U.length;++q)W[q]=U[q];return W}else if(me){var ie=new Uint8Array(Y);if(ie.set)ie.set(U);else for(;q<ne;++q)ie[q]=U[q];return ie}return U.length=Y,U}function Vt(U){for(var oe=new Array(U),ne=0;ne<U;++ne)oe[ne]=0;return oe}function Ar(U,oe,ne){var Y=1,q=0,W=0,ie=0,he=0,K=U.length,ue=me?new Uint16Array(32):Vt(32);for(W=0;W<32;++W)ue[W]=0;for(W=K;W<ne;++W)U[W]=0;K=U.length;var fe=me?new Uint16Array(K):Vt(K);for(W=0;W<K;++W)ue[q=U[W]]++,Y<q&&(Y=q),fe[W]=0;for(ue[0]=0,W=1;W<=Y;++W)ue[W+16]=he=he+ue[W-1]<<1;for(W=0;W<K;++W)he=U[W],he!=0&&(fe[W]=ue[he+16]++);var Me=0;for(W=0;W<K;++W)if(Me=U[W],Me!=0)for(he=G(fe[W],Y)>>Y-Me,ie=(1<<Y+4-Me)-1;ie>=0;--ie)oe[he|ie<<Me]=Me&15|W<<4;return Y}var ln=me?new Uint16Array(512):Vt(512),Xr=me?new Uint16Array(32):Vt(32);if(!me){for(var Ft=0;Ft<512;++Ft)ln[Ft]=0;for(Ft=0;Ft<32;++Ft)Xr[Ft]=0}(function(){for(var U=[],oe=0;oe<32;oe++)U.push(5);Ar(U,Xr,32);var ne=[];for(oe=0;oe<=143;oe++)ne.push(8);for(;oe<=255;oe++)ne.push(9);for(;oe<=279;oe++)ne.push(7);for(;oe<=287;oe++)ne.push(8);Ar(ne,ln,288)})();var ir=(function(){for(var oe=me?new Uint8Array(32768):[],ne=0,Y=0;ne<Ee.length-1;++ne)for(;Y<Ee[ne+1];++Y)oe[Y]=ne;for(;Y<32768;++Y)oe[Y]=29;var q=me?new Uint8Array(259):[];for(ne=0,Y=0;ne<be.length-1;++ne)for(;Y<be[ne+1];++Y)q[Y]=ne;function W(he,K){for(var ue=0;ue<he.length;){var fe=Math.min(65535,he.length-ue),Me=ue+fe==he.length;for(K.write_shift(1,+Me),K.write_shift(2,fe),K.write_shift(2,~fe&65535);fe-- >0;)K[K.l++]=he[ue++]}return K.l}function ie(he,K){for(var ue=0,fe=0,Me=me?new Uint16Array(32768):[];fe<he.length;){var we=Math.min(65535,he.length-fe);if(we<10){for(ue=Xe(K,ue,+(fe+we==he.length)),ue&7&&(ue+=8-(ue&7)),K.l=ue/8|0,K.write_shift(2,we),K.write_shift(2,~we&65535);we-- >0;)K[K.l++]=he[fe++];ue=K.l*8;continue}ue=Xe(K,ue,+(fe+we==he.length)+2);for(var lt=0;we-- >0;){var Ge=he[fe];lt=(lt<<5^Ge)&32767;var Ze=-1,jt=0;if((Ze=Me[lt])&&(Ze|=fe&-32768,Ze>fe&&(Ze-=32768),Ze<fe))for(;he[Ze+jt]==he[fe+jt]&&jt<250;)++jt;if(jt>2){Ge=q[jt],Ge<=22?ue=ct(K,ue,ye[Ge+1]>>1)-1:(ct(K,ue,3),ue+=5,ct(K,ue,ye[Ge-23]>>5),ue+=3);var Gt=Ge<8?0:Ge-4>>2;Gt>0&&(Wt(K,ue,jt-be[Ge]),ue+=Gt),Ge=oe[fe-Ze],ue=ct(K,ue,ye[Ge]>>3),ue-=3;var ar=Ge<4?0:Ge-2>>1;ar>0&&(Wt(K,ue,fe-Ze-Ee[Ge]),ue+=ar);for(var Nr=0;Nr<jt;++Nr)Me[lt]=fe&32767,lt=(lt<<5^he[fe])&32767,++fe;we-=jt-1}else Ge<=143?Ge=Ge+48:ue=We(K,ue,1),ue=ct(K,ue,ye[Ge]),Me[lt]=fe&32767,++fe}ue=ct(K,ue,0)-1}return K.l=(ue+7)/8|0,K.l}return function(K,ue){return K.length<8?W(K,ue):ie(K,ue)}})();function nt(U){var oe=ea(50+Math.floor(U.length*1.1)),ne=ir(U,oe);return oe.slice(0,ne)}var Bt=me?new Uint16Array(32768):Vt(32768),$e=me?new Uint16Array(32768):Vt(32768),De=me?new Uint16Array(128):Vt(128),re=1,le=1;function Oe(U,oe){var ne=ze(U,oe)+257;oe+=5;var Y=ze(U,oe)+1;oe+=5;var q=ut(U,oe)+4;oe+=4;for(var W=0,ie=me?new Uint8Array(19):Vt(19),he=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],K=1,ue=me?new Uint8Array(8):Vt(8),fe=me?new Uint8Array(8):Vt(8),Me=ie.length,we=0;we<q;++we)ie[se[we]]=W=Ke(U,oe),K<W&&(K=W),ue[W]++,oe+=3;var lt=0;for(ue[0]=0,we=1;we<=K;++we)fe[we]=lt=lt+ue[we-1]<<1;for(we=0;we<Me;++we)(lt=ie[we])!=0&&(he[we]=fe[lt]++);var Ge=0;for(we=0;we<Me;++we)if(Ge=ie[we],Ge!=0){lt=ye[he[we]]>>8-Ge;for(var Ze=(1<<7-Ge)-1;Ze>=0;--Ze)De[lt|Ze<<Ge]=Ge&7|we<<3}var jt=[];for(K=1;jt.length<ne+Y;)switch(lt=De[Pe(U,oe)],oe+=lt&7,lt>>>=3){case 16:for(W=3+He(U,oe),oe+=2,lt=jt[jt.length-1];W-- >0;)jt.push(lt);break;case 17:for(W=3+Ke(U,oe),oe+=3;W-- >0;)jt.push(0);break;case 18:for(W=11+Pe(U,oe),oe+=7;W-- >0;)jt.push(0);break;default:jt.push(lt),K<lt&&(K=lt);break}var Gt=jt.slice(0,ne),ar=jt.slice(ne);for(we=ne;we<286;++we)Gt[we]=0;for(we=Y;we<30;++we)ar[we]=0;return re=Ar(Gt,Bt,286),le=Ar(ar,$e,30),oe}function Le(U,oe){if(U[0]==3&&!(U[1]&3))return[dl(oe),2];for(var ne=0,Y=0,q=fP(oe||1<<18),W=0,ie=q.length>>>0,he=0,K=0;(Y&1)==0;){if(Y=Ke(U,ne),ne+=3,Y>>>1)Y>>1==1?(he=9,K=5):(ne=Oe(U,ne),he=re,K=le);else{ne&7&&(ne+=8-(ne&7));var ue=U[ne>>>3]|U[(ne>>>3)+1]<<8;if(ne+=32,ue>0)for(!oe&&ie<W+ue&&(q=Ut(q,W+ue),ie=q.length);ue-- >0;)q[W++]=U[ne>>>3],ne+=8;continue}for(;;){!oe&&ie<W+32767&&(q=Ut(q,W+32767),ie=q.length);var fe=ke(U,ne,he),Me=Y>>>1==1?ln[fe]:Bt[fe];if(ne+=Me&15,Me>>>=4,(Me>>>8&255)===0)q[W++]=Me;else{if(Me==256)break;Me-=257;var we=Me<8?0:Me-4>>2;we>5&&(we=0);var lt=W+be[Me];we>0&&(lt+=ke(U,ne,we),ne+=we),fe=ke(U,ne,K),Me=Y>>>1==1?Xr[fe]:$e[fe],ne+=Me&15,Me>>>=4;var Ge=Me<4?0:Me-2>>1,Ze=Ee[Me];for(Ge>0&&(Ze+=ke(U,ne,Ge),ne+=Ge),!oe&&ie<lt&&(q=Ut(q,lt+100),ie=q.length);W<lt;)q[W]=q[W-Ze],++W}}}return oe?[q,ne+7>>>3]:[q.slice(0,W),ne+7>>>3]}function rt(U,oe){var ne=U.slice(U.l||0),Y=Le(ne,oe);return U.l+=Y[1],Y[0]}function Ot(U,oe){if(U)typeof console<"u"&&console.error(oe);else throw new Error(oe)}function $t(U,oe){var ne=U;wa(ne,0);var Y=[],q=[],W={FileIndex:Y,FullPaths:q};_(W,{root:oe.root});for(var ie=ne.length-4;(ne[ie]!=80||ne[ie+1]!=75||ne[ie+2]!=5||ne[ie+3]!=6)&&ie>=0;)--ie;ne.l=ie+4,ne.l+=4;var he=ne.read_shift(2);ne.l+=6;var K=ne.read_shift(4);for(ne.l=K,ie=0;ie<he;++ie){ne.l+=20;var ue=ne.read_shift(4),fe=ne.read_shift(4),Me=ne.read_shift(2),we=ne.read_shift(2),lt=ne.read_shift(2);ne.l+=8;var Ge=ne.read_shift(4),Ze=l(ne.slice(ne.l+Me,ne.l+Me+we));ne.l+=Me+we+lt;var jt=ne.l;ne.l=Ge+4,bt(ne,ue,fe,W,Ze),ne.l=jt}return W}function bt(U,oe,ne,Y,q){U.l+=2;var W=U.read_shift(2),ie=U.read_shift(2),he=o(U);if(W&8257)throw new Error("Unsupported ZIP encryption");for(var K=U.read_shift(4),ue=U.read_shift(4),fe=U.read_shift(4),Me=U.read_shift(2),we=U.read_shift(2),lt="",Ge=0;Ge<Me;++Ge)lt+=String.fromCharCode(U[U.l++]);if(we){var Ze=l(U.slice(U.l,U.l+we));(Ze[21589]||{}).mt&&(he=Ze[21589].mt),((q||{})[21589]||{}).mt&&(he=q[21589].mt)}U.l+=we;var jt=U.slice(U.l,U.l+ue);switch(ie){case 8:jt=Z(U,fe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ie)}var Gt=!1;W&8&&(K=U.read_shift(4),K==134695760&&(K=U.read_shift(4),Gt=!0),ue=U.read_shift(4),fe=U.read_shift(4)),ue!=oe&&Ot(Gt,"Bad compressed size: "+oe+" != "+ue),fe!=ne&&Ot(Gt,"Bad uncompressed size: "+ne+" != "+fe),tt(Y,lt,jt,{unsafe:!0,mt:he})}function hr(U,oe){var ne=oe||{},Y=[],q=[],W=ea(1),ie=ne.compression?8:0,he=0,K=0,ue=0,fe=0,Me=0,we=U.FullPaths[0],lt=we,Ge=U.FileIndex[0],Ze=[],jt=0;for(K=1;K<U.FullPaths.length;++K)if(lt=U.FullPaths[K].slice(we.length),Ge=U.FileIndex[K],!(!Ge.size||!Ge.content||lt=="Sh33tJ5")){var Gt=fe,ar=ea(lt.length);for(ue=0;ue<lt.length;++ue)ar.write_shift(1,lt.charCodeAt(ue)&127);ar=ar.slice(0,ar.l),Ze[Me]=Cle.buf(Ge.content,0);var Nr=Ge.content;ie==8&&(Nr=te(Nr)),W=ea(30),W.write_shift(4,67324752),W.write_shift(2,20),W.write_shift(2,he),W.write_shift(2,ie),Ge.mt?i(W,Ge.mt):W.write_shift(4,0),W.write_shift(-4,Ze[Me]),W.write_shift(4,Nr.length),W.write_shift(4,Ge.content.length),W.write_shift(2,ar.length),W.write_shift(2,0),fe+=W.length,Y.push(W),fe+=ar.length,Y.push(ar),fe+=Nr.length,Y.push(Nr),W=ea(46),W.write_shift(4,33639248),W.write_shift(2,0),W.write_shift(2,20),W.write_shift(2,he),W.write_shift(2,ie),W.write_shift(4,0),W.write_shift(-4,Ze[Me]),W.write_shift(4,Nr.length),W.write_shift(4,Ge.content.length),W.write_shift(2,ar.length),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(4,0),W.write_shift(4,Gt),jt+=W.l,q.push(W),jt+=ar.length,q.push(ar),++Me}return W=ea(22),W.write_shift(4,101010256),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(2,Me),W.write_shift(2,Me),W.write_shift(4,jt),W.write_shift(4,fe),W.write_shift(2,0),Zo([Zo(Y),Zo(q),W])}var ht={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Rr(U,oe){if(U.ctype)return U.ctype;var ne=U.name||"",Y=ne.match(/\.([^\.]+)$/);return Y&&ht[Y[1]]||oe&&(Y=(ne=oe).match(/[\.\\]([^\.\\])+$/),Y&&ht[Y[1]])?ht[Y[1]]:"application/octet-stream"}function cr(U){for(var oe=hP(U),ne=[],Y=0;Y<oe.length;Y+=76)ne.push(oe.slice(Y,Y+76));return ne.join(`\r
`)+`\r
`}function fr(U){var oe=U.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ue){var fe=ue.charCodeAt(0).toString(16).toUpperCase();return"="+(fe.length==1?"0"+fe:fe)});oe=oe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),oe.charAt(0)==`
`&&(oe="=0D"+oe.slice(1)),oe=oe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ne=[],Y=oe.split(`\r
`),q=0;q<Y.length;++q){var W=Y[q];if(W.length==0){ne.push("");continue}for(var ie=0;ie<W.length;){var he=76,K=W.slice(ie,ie+he);K.charAt(he-1)=="="?he--:K.charAt(he-2)=="="?he-=2:K.charAt(he-3)=="="&&(he-=3),K=W.slice(ie,ie+he),ie+=he,ie<W.length&&(K+="="),ne.push(K)}}return ne.join(`\r
`)}function Jr(U){for(var oe=[],ne=0;ne<U.length;++ne){for(var Y=U[ne];ne<=U.length&&Y.charAt(Y.length-1)=="=";)Y=Y.slice(0,Y.length-1)+U[++ne];oe.push(Y)}for(var q=0;q<oe.length;++q)oe[q]=oe[q].replace(/[=][0-9A-Fa-f]{2}/g,function(W){return String.fromCharCode(parseInt(W.slice(1),16))});return pi(oe.join(`\r
`))}function Kn(U,oe,ne){for(var Y="",q="",W="",ie,he=0;he<10;++he){var K=oe[he];if(!K||K.match(/^\s*$/))break;var ue=K.match(/^(.*?):\s*([^\s].*)$/);if(ue)switch(ue[1].toLowerCase()){case"content-location":Y=ue[2].trim();break;case"content-type":W=ue[2].trim();break;case"content-transfer-encoding":q=ue[2].trim();break}}switch(++he,q.toLowerCase()){case"base64":ie=pi(As(oe.slice(he).join("")));break;case"quoted-printable":ie=Jr(oe.slice(he));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+q)}var fe=tt(U,Y.slice(ne.length),ie,{unsafe:!0});W&&(fe.ctype=W)}function _n(U,oe){if(H(U.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ne=oe&&oe.root||"",Y=(kr&&Buffer.isBuffer(U)?U.toString("binary"):H(U)).split(`\r
`),q=0,W="";for(q=0;q<Y.length;++q)if(W=Y[q],!!/^Content-Location:/i.test(W)&&(W=W.slice(W.indexOf("file")),ne||(ne=W.slice(0,W.lastIndexOf("/")+1)),W.slice(0,ne.length)!=ne))for(;ne.length>0&&(ne=ne.slice(0,ne.length-1),ne=ne.slice(0,ne.lastIndexOf("/")+1),W.slice(0,ne.length)!=ne););var ie=(Y[1]||"").match(/boundary="(.*?)"/);if(!ie)throw new Error("MAD cannot find boundary");var he="--"+(ie[1]||""),K=[],ue=[],fe={FileIndex:K,FullPaths:ue};_(fe);var Me,we=0;for(q=0;q<Y.length;++q){var lt=Y[q];lt!==he&&lt!==he+"--"||(we++&&Kn(fe,Y.slice(Me,q),ne),Me=q)}return fe}function dr(U,oe){var ne=oe||{},Y=ne.boundary||"SheetJS";Y="------="+Y;for(var q=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Y.slice(2)+'"',"","",""],W=U.FullPaths[0],ie=W,he=U.FileIndex[0],K=1;K<U.FullPaths.length;++K)if(ie=U.FullPaths[K].slice(W.length),he=U.FileIndex[K],!(!he.size||!he.content||ie=="Sh33tJ5")){ie=ie.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(jt){return"_x"+jt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(jt){return"_u"+jt.charCodeAt(0).toString(16)+"_"});for(var ue=he.content,fe=kr&&Buffer.isBuffer(ue)?ue.toString("binary"):H(ue),Me=0,we=Math.min(1024,fe.length),lt=0,Ge=0;Ge<=we;++Ge)(lt=fe.charCodeAt(Ge))>=32&&lt<128&&++Me;var Ze=Me>=we*4/5;q.push(Y),q.push("Content-Location: "+(ne.root||"file:///C:/SheetJS/")+ie),q.push("Content-Transfer-Encoding: "+(Ze?"quoted-printable":"base64")),q.push("Content-Type: "+Rr(he,ie)),q.push(""),q.push(Ze?fr(fe):cr(fe))}return q.push(Y+`--\r
`),q.join(`\r
`)}function ve(U){var oe={};return _(oe,U),oe}function tt(U,oe,ne,Y){var q=Y&&Y.unsafe;q||_(U);var W=!q&&Er.find(U,oe);if(!W){var ie=U.FullPaths[0];oe.slice(0,ie.length)==ie?ie=oe:(ie.slice(-1)!="/"&&(ie+="/"),ie=(ie+oe).replace("//","/")),W={name:s(oe),type:2},U.FileIndex.push(W),U.FullPaths.push(ie),q||Er.utils.cfb_gc(U)}return W.content=ne,W.size=ne?ne.length:0,Y&&(Y.CLSID&&(W.clsid=Y.CLSID),Y.mt&&(W.mt=Y.mt),Y.ct&&(W.ct=Y.ct)),W}function at(U,oe){_(U);var ne=Er.find(U,oe);if(ne){for(var Y=0;Y<U.FileIndex.length;++Y)if(U.FileIndex[Y]==ne)return U.FileIndex.splice(Y,1),U.FullPaths.splice(Y,1),!0}return!1}function pt(U,oe,ne){_(U);var Y=Er.find(U,oe);if(Y){for(var q=0;q<U.FileIndex.length;++q)if(U.FileIndex[q]==Y)return U.FileIndex[q].name=s(ne),U.FullPaths[q]=ne,!0}return!1}function ft(U){P(U,!0)}return t.find=F,t.read=S,t.parse=f,t.write=ce,t.writeFile=L,t.utils={cfb_new:ve,cfb_add:tt,cfb_del:at,cfb_mov:pt,cfb_gc:ft,ReadShift:Ch,CheckField:M$,prep_blob:wa,bconcat:Zo,use_zlib:I,_deflateRaw:nt,_inflateRaw:rt,consts:ae},t})();function Ale(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function Ui(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function Rk(e){for(var t=[],r=Ui(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}var Yp=new Date(1899,11,30,0,0,0);function Za(e,t){var r=e.getTime(),a=Yp.getTime()+(e.getTimezoneOffset()-Yp.getTimezoneOffset())*6e4;return(r-a)/(1440*60*1e3)}var m$=new Date,Tle=Yp.getTime()+(m$.getTimezoneOffset()-Yp.getTimezoneOffset())*6e4,wP=m$.getTimezoneOffset();function Qg(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Tle),t.getTimezoneOffset()!==wP&&t.setTime(t.getTime()+(t.getTimezoneOffset()-wP)*6e4),t}function Ole(e){var t=0,r=0,a=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(a=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var jP=new Date("2017-02-19T19:06:09.000Z"),p$=isNaN(jP.getFullYear())?new Date("2/19/17"):jP,Ple=p$.getFullYear()==2017;function fa(e,t){var r=new Date(e);if(Ple)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(p$.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function hc(e,t){if(kr&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return xh(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return xh(t$(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return xh(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return xh(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var a=[],s=0;s!=e.length;++s)a.push(String.fromCharCode(e[s]));return a.join("")}function Sa(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Sa(e[r]));return t}function Nn(e,t){for(var r="";r.length<t;)r+=e;return r}function ji(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(a)))?t/r:t}var Ile=["january","february","march","april","may","june","july","august","september","october","november","december"];function Qd(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&Ile.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return a<0||a>8099?r:(s>0||i>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var Dle=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,a,s){if(e||typeof a=="string")return r.split(a);for(var i=r.split(a),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}})();function g$(e){return e?e.content&&e.type?hc(e.content,!0):e.data?mh(e.data):e.asNodeBuffer&&kr?mh(e.asNodeBuffer().toString("binary")):e.asBinary?mh(e.asBinary()):e._data&&e._data.getContent?mh(hc(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function x$(e){if(!e)return null;if(e.data)return dP(e.data);if(e.asNodeBuffer&&kr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?dP(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function Mle(e){return e&&e.name.slice(-4)===".bin"?x$(e):g$(e)}function zs(e,t){for(var r=e.FullPaths||Ui(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),s=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function Fk(e,t){var r=zs(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ln(e,t,r){if(!r)return Mle(Fk(e,t));if(!t)return null;try{return Ln(e,t)}catch{return null}}function _s(e,t,r){if(!r)return g$(Fk(e,t));if(!t)return null;try{return _s(e,t)}catch{return null}}function Rle(e,t,r){return x$(Fk(e,t))}function NP(e){for(var t=e.FullPaths||Ui(e.files),r=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&r.push(t[a].replace(/^Root Entry[\/]/,""));return r.sort()}function Fle(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return kr?a=wc(r):a=rle(r),Er.utils.cfb_add(e,t,a)}Er.utils.cfb_add(e,t,r)}else e.file(t,r)}function y$(e,t){switch(t.type){case"base64":return Er.read(e,{type:"base64"});case"binary":return Er.read(e,{type:"binary"});case"buffer":case"array":return Er.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function gh(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var a=e.split("/");a.length!==0;){var s=a.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var v$=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,$le=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,kP=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Lle=/<[^>]*>/g,Ua=v$.match(kP)?kP:Lle,Ble=/<\w*:/,Ule=/<(\/?)\w+:/;function er(e,t,r){for(var a={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(a[0]=e.slice(0,s)),s===e.length)return a;var o=e.match($le),l=0,d="",u=0,f="",m="",p=1;if(o)for(u=0;u!=o.length;++u){for(m=o[u],i=0;i!=m.length&&m.charCodeAt(i)!==61;++i);for(f=m.slice(0,i).trim();m.charCodeAt(i+1)==32;)++i;for(p=(s=m.charCodeAt(i+1))==34||s==39?1:0,d=m.slice(i+1+p,m.length-p),l=0;l!=f.length&&f.charCodeAt(l)!==58;++l);if(l===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),a[f]=d,a[f.toLowerCase()]=d;else{var g=(l===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(l+1);if(a[g]&&f.slice(l-3,l)=="ext")continue;a[g]=d,a[g.toLowerCase()]=d}}return a}function Wi(e){return e.replace(Ule,"<$1")}var b$={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Hle=Rk(b$),Pr=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(a){var s=a+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,d){return b$[l]||String.fromCharCode(parseInt(d,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,d){return String.fromCharCode(parseInt(d,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}})(),qle=/[&<>'"]/g,zle=/[\u0000-\u001f]/g;function $k(e){var t=e+"";return t.replace(qle,function(r){return Hle[r]}).replace(/\n/g,"<br/>").replace(zle,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var SP=(function(){var e=/&#(\d+);/g;function t(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}})();function un(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Y1(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(s=e.charCodeAt(r++),a>191&&a<224){o=(a&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function _P(e){var t=dl(2*e.length),r,a,s=1,i=0,o=0,l;for(a=0;a<e.length;a+=s)s=1,(l=e.charCodeAt(a))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(a+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function EP(e){return wc(e,"binary").toString("utf8")}var Sm="foo bar baz",rn=kr&&(EP(Sm)==Y1(Sm)&&EP||_P(Sm)==Y1(Sm)&&_P)||Y1,xh=kr?function(e){return wc(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,s=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,s=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},Pf=(function(){var e={};return function(r,a){var s=r+"|"+(a||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}})(),w$=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)a=a.replace(e[s][0],e[s][1]);return a}})(),Wle=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),Kle=/<\/?(?:vt:)?variant>/g,Vle=/<(?:vt:)([^>]*)>([\s\S]*)</;function CP(e,t){var r=er(e),a=e.match(Wle(r.baseType))||[],s=[];if(a.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return s}return a.forEach(function(i){var o=i.replace(Kle,"").match(Vle);o&&s.push({v:rn(o[2]),t:o[1]})}),s}var Gle=/(^\s|\s$|\n)/;function Yle(e){return Ui(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Xle(e,t,r){return"<"+e+(r!=null?Yle(r):"")+(t!=null?(t.match(Gle)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Lk(e){if(kr&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return rn(jc(Ik(e)));throw new Error("Bad input format: expected Buffer or string")}var If=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Jle={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},Qle=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function Zle(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return a==2047?s==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,s+=Math.pow(2,52)),r*Math.pow(2,a-52)*s)}function ece(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=a?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|a}var AP=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var s=0,i=e[0][a].length;s<i;s+=r)t.push.apply(t,e[0][a].slice(s,s+r));return t},TP=kr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:wc(t)})):AP(e)}:AP,OP=function(e,t,r){for(var a=[],s=t;s<r;s+=2)a.push(String.fromCharCode(go(e,s)));return a.join("").replace(Qa,"")},Bk=kr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Qa,""):OP(e,t,r)}:OP,PP=function(e,t,r){for(var a=[],s=t;s<t+r;++s)a.push(("0"+e[s].toString(16)).slice(-2));return a.join("")},j$=kr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):PP(e,t,r)}:PP,IP=function(e,t,r){for(var a=[],s=t;s<r;s++)a.push(String.fromCharCode(dd(e,s)));return a.join("")},Qf=kr?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):IP(t,r,a)}:IP,N$=function(e,t){var r=Ns(e,t);return r>0?Qf(e,t+4,t+4+r-1):""},k$=N$,S$=function(e,t){var r=Ns(e,t);return r>0?Qf(e,t+4,t+4+r-1):""},_$=S$,E$=function(e,t){var r=2*Ns(e,t);return r>0?Qf(e,t+4,t+4+r-1):""},C$=E$,A$=function(t,r){var a=Ns(t,r);return a>0?Bk(t,r+4,r+4+a):""},T$=A$,O$=function(e,t){var r=Ns(e,t);return r>0?Qf(e,t+4,t+4+r):""},P$=O$,I$=function(e,t){return Zle(e,t)},Xp=I$,D$=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};kr&&(k$=function(t,r){if(!Buffer.isBuffer(t))return N$(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},_$=function(t,r){if(!Buffer.isBuffer(t))return S$(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},C$=function(t,r){if(!Buffer.isBuffer(t))return E$(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},T$=function(t,r){if(!Buffer.isBuffer(t))return A$(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},P$=function(t,r){if(!Buffer.isBuffer(t))return O$(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},Xp=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):I$(t,r)},D$=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var dd=function(e,t){return e[t]},go=function(e,t){return e[t+1]*256+e[t]},tce=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Ns=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},ql=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},rce=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Ch(e,t){var r="",a,s,i=[],o,l,d,u;switch(t){case"dbcs":if(u=this.l,kr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(d=0;d<e;++d)r+=String.fromCharCode(go(this,u)),u+=2;e*=2;break;case"utf8":r=Qf(this,this.l,this.l+e);break;case"utf16le":e*=2,r=Bk(this,this.l,this.l+e);break;case"wstr":return Ch.call(this,e,"dbcs");case"lpstr-ansi":r=k$(this,this.l),e=4+Ns(this,this.l);break;case"lpstr-cp":r=_$(this,this.l),e=4+Ns(this,this.l);break;case"lpwstr":r=C$(this,this.l),e=4+2*Ns(this,this.l);break;case"lpp4":e=4+Ns(this,this.l),r=T$(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Ns(this,this.l),r=P$(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=dd(this,this.l+e++))!==0;)i.push(km(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=go(this,this.l+e))!==0;)i.push(km(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,d=0;d<e;++d){if(this.lens&&this.lens.indexOf(u)!==-1)return o=dd(this,u),this.l=u+1,l=Ch.call(this,e-d,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(km(go(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,d=0;d!=e;++d){if(this.lens&&this.lens.indexOf(u)!==-1)return o=dd(this,u),this.l=u+1,l=Ch.call(this,e-d,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(km(dd(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return a=dd(this,this.l),this.l++,a;case 2:return a=(t==="i"?tce:go)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?ql:rce)(this,this.l),this.l+=4,a):(s=Ns(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=Xp(this,this.l):s=Xp([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=j$(this,this.l,e);break}}return this.l+=e,r}var nce=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},ace=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},sce=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function ice(e,t,r){var a=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)sce(this,t.charCodeAt(s),this.l+2*s);a=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;a=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,nce(this,t,this.l);break;case 8:if(a=8,r==="f"){ece(this,t,this.l);break}case 16:break;case-4:a=4,ace(this,t,this.l);break}return this.l+=a,this}function M$(e,t){var r=j$(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function wa(e,t){e.l=t,e.read_shift=Ch,e.chk=M$,e.write_shift=ice}function Ba(e,t){e.l+=t}function ea(e){var t=dl(e);return wa(t,0),t}function Oo(e,t,r){if(e){var a,s,i;wa(e,e.l||0);for(var o=e.length,l=0,d=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=rg[l]||rg[65535];for(a=e.read_shift(1),i=a&127,s=1;s<4&&a&128;++s)i+=((a=e.read_shift(1))&127)<<7*s;d=e.l+i;var f=u.f&&u.f(e,i,r);if(e.l=d,t(f,u,l))return}}}function XN(){var e=[],t=kr?256:2048,r=function(u){var f=ea(u);return wa(f,0),f},a=r(t),s=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},i=function(u){return a&&u<a.length-a.l?a:(s(),a=r(Math.max(u+1,t)))},o=function(){return s(),Zo(e)},l=function(u){s(),a=u,a.l==null&&(a.l=a.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function Ah(e,t,r){var a=Sa(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function DP(e,t,r){var a=Sa(e);return a.s=Ah(a.s,t.s,r),a.e=Ah(a.e,t.s,r),a}function Th(e,t){if(e.cRel&&e.c<0)for(e=Sa(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Sa(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=or(e);return!e.cRel&&e.cRel!=null&&(r=cce(r)),!e.rRel&&e.rRel!=null&&(r=oce(r)),r}function X1(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+aa(e.s.c)+":"+(e.e.cRel?"":"$")+aa(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+_a(e.s.r)+":"+(e.e.rRel?"":"$")+_a(e.e.r):Th(e.s,t.biff)+":"+Th(e.e,t.biff)}function Uk(e){return parseInt(lce(e),10)-1}function _a(e){return""+(e+1)}function oce(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function lce(e){return e.replace(/\$(\d+)$/,"$1")}function Hk(e){for(var t=dce(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function aa(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function cce(e){return e.replace(/^([A-Z])/,"$$$1")}function dce(e){return e.replace(/^\$([A-Z])/,"$1")}function uce(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ja(e){for(var t=0,r=0,a=0;a<e.length;++a){var s=e.charCodeAt(a);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function or(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function xu(e){var t=e.indexOf(":");return t==-1?{s:Ja(e),e:Ja(e)}:{s:Ja(e.slice(0,t)),e:Ja(e.slice(t+1))}}function Cr(e,t){return typeof t>"u"||typeof t=="number"?Cr(e.s,e.e):(typeof e!="string"&&(e=or(e)),typeof t!="string"&&(t=or(t)),e==t?e:e+":"+t)}function Sn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,s=0,i=e.length;for(r=0;a<i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.s.c=--r,r=0;a<i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;if(t.s.r=--r,a===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.e.c=--r,r=0;a!=i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;return t.e.r=--r,t}function MP(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Ys(e.z,r?Za(t):t)}catch{}try{return e.w=Ys((e.XF||{}).numFmtId||(r?14:0),r?Za(t):t)}catch{return""+t}}function _o(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Sc[e.v]||e.v:t==null?MP(e,e.v):MP(e,t))}function xl(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function R$(e,t,r){var a=r||{},s=e?Array.isArray(e):a.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var d=typeof a.origin=="string"?Ja(a.origin):a.origin;o=d.r,l=d.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var f=Sn(i["!ref"]);u.s.c=f.s.c,u.s.r=f.s.r,u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),o==-1&&(u.e.r=o=f.e.r+1)}for(var m=0;m!=t.length;++m)if(t[m]){if(!Array.isArray(t[m]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=t[m].length;++p)if(!(typeof t[m][p]>"u")){var g={v:t[m][p]},v=o+m,y=l+p;if(u.s.r>v&&(u.s.r=v),u.s.c>y&&(u.s.c=y),u.e.r<v&&(u.e.r=v),u.e.c<y&&(u.e.c=y),t[m][p]&&typeof t[m][p]=="object"&&!Array.isArray(t[m][p])&&!(t[m][p]instanceof Date))g=t[m][p];else if(Array.isArray(g.v)&&(g.f=t[m][p][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(a.nullError)g.t="e",g.v=0;else if(a.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=a.dateNF||lr[14],a.cellDates?(g.t="d",g.w=Ys(g.z,Za(g.v))):(g.t="n",g.v=Za(g.v),g.w=Ys(g.z,g.v))):g.t="s";if(s)i[v]||(i[v]=[]),i[v][y]&&i[v][y].z&&(g.z=i[v][y].z),i[v][y]=g;else{var w=or({c:y,r:v});i[w]&&i[w].z&&(g.z=i[w].z),i[w]=g}}}return u.s.c<1e7&&(i["!ref"]=Cr(u)),i}function yu(e,t){return R$(null,e,t)}function hce(e){return e.read_shift(4,"i")}function La(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function fce(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function qk(e,t){var r=e.l,a=e.read_shift(1),s=La(e),i=[],o={t:s,h:s};if((a&1)!==0){for(var l=e.read_shift(4),d=0;d!=l;++d)i.push(fce(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}var mce=qk;function Js(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Nc(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var pce=La;function zk(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var gce=La,JN=zk;function Wk(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var s=a===0?Xp([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):ql(t,0)>>2;return r?s/100:s}function F$(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var kc=F$;function Ra(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function xce(e){var t={},r=e.read_shift(1),a=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),d=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=s;var u=tc[s];u&&(t.rgb=Mf(u));break;case 2:t.rgb=Mf([o,l,d]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function yce(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function $$(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function vce(e){return $$(e,1)}function bce(e){return $$(e,2)}var Kk=2,is=3,_m=11,RP=12,Jp=19,Em=64,wce=65,jce=71,Nce=4108,kce=4126,ua=80,L$=81,Sce=[ua,L$],_ce={1:{n:"CodePage",t:Kk},2:{n:"Category",t:ua},3:{n:"PresentationFormat",t:ua},4:{n:"ByteCount",t:is},5:{n:"LineCount",t:is},6:{n:"ParagraphCount",t:is},7:{n:"SlideCount",t:is},8:{n:"NoteCount",t:is},9:{n:"HiddenCount",t:is},10:{n:"MultimediaClipCount",t:is},11:{n:"ScaleCrop",t:_m},12:{n:"HeadingPairs",t:Nce},13:{n:"TitlesOfParts",t:kce},14:{n:"Manager",t:ua},15:{n:"Company",t:ua},16:{n:"LinksUpToDate",t:_m},17:{n:"CharacterCount",t:is},19:{n:"SharedDoc",t:_m},22:{n:"HyperlinksChanged",t:_m},23:{n:"AppVersion",t:is,p:"version"},24:{n:"DigSig",t:wce},26:{n:"ContentType",t:ua},27:{n:"ContentStatus",t:ua},28:{n:"Language",t:ua},29:{n:"Version",t:ua},255:{},2147483648:{n:"Locale",t:Jp},2147483651:{n:"Behavior",t:Jp},1919054434:{}},Ece={1:{n:"CodePage",t:Kk},2:{n:"Title",t:ua},3:{n:"Subject",t:ua},4:{n:"Author",t:ua},5:{n:"Keywords",t:ua},6:{n:"Comments",t:ua},7:{n:"Template",t:ua},8:{n:"LastAuthor",t:ua},9:{n:"RevNumber",t:ua},10:{n:"EditTime",t:Em},11:{n:"LastPrinted",t:Em},12:{n:"CreatedDate",t:Em},13:{n:"ModifiedDate",t:Em},14:{n:"PageCount",t:is},15:{n:"WordCount",t:is},16:{n:"CharCount",t:is},17:{n:"Thumbnail",t:jce},18:{n:"Application",t:ua},19:{n:"DocSecurity",t:is},255:{},2147483648:{n:"Locale",t:Jp},2147483651:{n:"Behavior",t:Jp},1919054434:{}},FP={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Cce=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Ace(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Tce=Ace([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),tc=Sa(Tce),Sc={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},B$={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},$P={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function Oce(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Pce(e){var t=Oce();if(!e||!e.match)return t;var r={};if((e.match(Ua)||[]).forEach(function(a){var s=er(a);switch(s[0].replace(Ble,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[$P[s.ContentType]]!==void 0&&t[$P[s.ContentType]].push(s.PartName);break}}),t.xmlns!==Jle.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}var xd={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function QN(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Oh(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(Ua)||[]).forEach(function(s){var i=er(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:gh(i.Target,t);r[l]=o,a[i.Id]=o}}),r["!id"]=a,r}var Ice="application/vnd.oasis.opendocument.spreadsheet";function Dce(e,t){for(var r=Lk(e),a,s;a=If.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(s=er(a[0],!1),s.path=="/"&&s.type!==Ice)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}var Ph=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Mce=(function(){for(var e=new Array(Ph.length),t=0;t<Ph.length;++t){var r=Ph[t],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e})();function U$(e){var t={};e=rn(e);for(var r=0;r<Ph.length;++r){var a=Ph[r],s=e.match(Mce[r]);s!=null&&s.length>0&&(t[a[1]]=Pr(s[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=fa(t[a[1]]))}return t}var Rce=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function H$(e,t,r,a){var s=[];if(typeof e=="string")s=CP(e,a);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(f){return{v:f}}));var o=typeof t=="string"?CP(t,a).map(function(f){return f.v}):t,l=0,d=0;if(o.length>0)for(var u=0;u!==s.length;u+=2){switch(d=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=d,r.SheetNames=o.slice(l,l+d);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=d,r.DefinedNames=o.slice(l,l+d);break;case"Charts":case"Diagramme":r.Chartsheets=d,r.ChartNames=o.slice(l,l+d);break}l+=d}}function Fce(e,t,r){var a={};return t||(t={}),e=rn(e),Rce.forEach(function(s){var i=(e.match(Pf(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=Pr(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(a[s[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&H$(a.HeadingPairs,a.TitlesOfParts,t,r),t}var $ce=/<[^>]+>[^<]*/g;function Lce(e,t){var r={},a="",s=e.match($ce);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=er(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":a=Pr(l.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var d=o.split(">"),u=d[0].slice(4),f=d[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[a]=Pr(f);break;case"bool":r[a]=un(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(f);break;case"filetime":case"date":r[a]=fa(f);break;case"cy":case"error":r[a]=Pr(f);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,d)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}var Bce={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},J1;function Uce(e,t,r){J1||(J1=Rk(Bce)),t=J1[t]||t,e[t]=r}function Vk(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function q$(e,t,r){var a=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-a&3;)++e.l;return s}function z$(e,t,r){var a=e.read_shift(0,"lpwstr");return a}function W$(e,t,r){return t===31?z$(e):q$(e,t,r)}function ZN(e,t,r){return W$(e,t,r===!1?0:4)}function Hce(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return W$(e,t,0)}function qce(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a){var s=e.l;r[a]=e.read_shift(0,"lpwstr").replace(Qa,""),e.l-s&2&&(e.l+=2)}return r}function zce(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a)r[a]=e.read_shift(0,"lpstr-cp").replace(Qa,"");return r}function Wce(e){var t=e.l,r=Qp(e,L$);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=Qp(e,is);return[r,a]}function Kce(e){for(var t=e.read_shift(4),r=[],a=0;a<t/2;++a)r.push(Wce(e));return r}function LP(e,t){for(var r=e.read_shift(4),a={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);a[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Qa,"").replace(ph,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),a}function K$(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function Vce(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Qp(e,t,r){var a=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==RP&&a!==t&&Sce.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===RP?a:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return q$(e,a,4).replace(Qa,"");case 31:return z$(e);case 64:return Vk(e);case 65:return K$(e);case 71:return Vce(e);case 80:return ZN(e,a,!i.raw).replace(Qa,"");case 81:return Hce(e,a).replace(Qa,"");case 4108:return Kce(e);case 4126:case 4127:return a==4127?qce(e):zce(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function BP(e,t){var r=e.l,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,d=-1,u={};for(o=0;o!=s;++o){var f=e.read_shift(4),m=e.read_shift(4);i[o]=[f,m+r]}i.sort(function(N,b){return N[1]-b[1]});var p={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var g=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,g=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],g=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],g=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(g=!1,e.l=i[o][1]),g)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var v=t[i[o][0]];if(p[v.n]=Qp(e,v.t,{raw:!0}),v.p==="version"&&(p[v.n]=String(p[v.n]>>16)+"."+("0000"+String(p[v.n]&65535)).slice(-4)),v.n=="CodePage")switch(p[v.n]){case 0:p[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:xi(l=p[v.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[v.n])}}else if(i[o][0]===1){if(l=p.CodePage=Qp(e,Kk),xi(l),d!==-1){var y=e.l;e.l=i[d][1],u=LP(e,l),e.l=y}}else if(i[o][0]===0){if(l===0){d=o,e.l=i[o+1][1];continue}u=LP(e,l)}else{var w=u[i[o][0]],k;switch(e[e.l]){case 65:e.l+=4,k=K$(e);break;case 30:e.l+=4,k=ZN(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,k=ZN(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,k=e.read_shift(4,"i");break;case 19:e.l+=4,k=e.read_shift(4);break;case 5:e.l+=4,k=e.read_shift(8,"f");break;case 11:e.l+=4,k=An(e,4);break;case 64:e.l+=4,k=fa(Vk(e));break;default:throw new Error("unparsed value: "+e[e.l])}p[w]=k}}return e.l=r+a,p}function UP(e,t,r){var a=e.content;if(!a)return{};wa(a,0);var s,i,o,l,d=0;a.chk("feff","Byte Order: "),a.read_shift(2);var u=a.read_shift(4),f=a.read_shift(16);if(f!==Er.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(s=a.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=a.read_shift(16),l=a.read_shift(4),s===1&&l!==a.l)throw new Error("Length mismatch: "+l+" !== "+a.l);s===2&&(o=a.read_shift(16),d=a.read_shift(4));var m=BP(a,t),p={SystemIdentifier:u};for(var g in m)p[g]=m[g];if(p.FMTID=i,s===1)return p;if(d-a.l==2&&(a.l+=2),a.l!==d)throw new Error("Length mismatch 2: "+a.l+" !== "+d);var v;try{v=BP(a,null)}catch{}for(g in v)p[g]=v[g];return p.FMTID=[i,o],p}function Vo(e,t){return e.read_shift(t),null}function Gce(e,t,r){for(var a=[],s=e.l+t;e.l<s;)a.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return a}function An(e,t){return e.read_shift(t)===1}function Bn(e){return e.read_shift(2,"u")}function V$(e,t){return Gce(e,t,Bn)}function Yce(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Zf(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=a?e.read_shift(a,s):"";return o}function Xce(e){var t=e.read_shift(2),r=e.read_shift(1),a=r&4,s=r&8,i=1+(r&1),o=0,l,d={};s&&(o=e.read_shift(2)),a&&(l=e.read_shift(4));var u=i==2?"dbcs-cont":"sbcs-cont",f=t===0?"":e.read_shift(t,u);return s&&(e.l+=4*o),a&&(e.l+=l),d.t=f,s||(d.raw="<t>"+d.t+"</t>",d.r=d.t),d}function fc(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function e0(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):fc(e,a,r)}function _c(e,t,r){if(r.biff>5)return e0(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Jce(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Qce(e){var t=e.read_shift(4),r=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=r);var s=e.read_shift((a?t-24:t)>>1,"utf16le").replace(Qa,"");return a&&(e.l+=24),s}function Zce(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+a.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(Qa,"");return r+o}function ede(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Qce(e);case"0303000000000000c000000000000046":return Zce(e);default:throw new Error("Unsupported Moniker "+r)}}function Cm(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Qa,""):"";return r}function tde(e,t){var r=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var s=e.read_shift(2);e.l+=2;var i,o,l,d,u="",f,m;s&16&&(i=Cm(e,r-e.l)),s&128&&(o=Cm(e,r-e.l)),(s&257)===257&&(l=Cm(e,r-e.l)),(s&257)===1&&(d=ede(e,r-e.l)),s&8&&(u=Cm(e,r-e.l)),s&32&&(f=e.read_shift(16)),s&64&&(m=Vk(e)),e.l=r;var p=o||l||d||"";p&&u&&(p+="#"+u),p||(p="#"+u),s&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var g={Target:p};return f&&(g.guid=f),m&&(g.time=m),i&&(g.Tooltip=i),g}function G$(e){var t=e.read_shift(1),r=e.read_shift(1),a=e.read_shift(1),s=e.read_shift(1);return[t,r,a,s]}function Y$(e,t){var r=G$(e);return r[3]=0,r}function Ki(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return{r:t,c:r,ixfe:a}}function rde(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function nde(e,t,r){return t===0?"":_c(e,t,r)}function ade(e,t,r){var a=r.biff>8?4:2,s=e.read_shift(a),i=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[s,i,o]}function X$(e){var t=e.read_shift(2),r=Wk(e);return[t,r]}function sde(e,t,r){e.l+=4,t-=4;var a=e.l+t,s=Zf(e,t,r),i=e.read_shift(2);if(a-=e.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return e.l+=i,s}function Zg(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);return{s:{c:a,r:t},e:{c:s,r}}}function J$(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1);return{s:{c:a,r:t},e:{c:s,r}}}var ide=J$;function Q$(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[r,t,a]}function ode(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function lde(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Pa(e){e.l+=2,e.l+=e.read_shift(2)}var cde={0:Pa,4:Pa,5:Pa,6:Pa,7:lde,8:Pa,9:Pa,10:Pa,11:Pa,12:Pa,13:ode,14:Pa,15:Pa,16:Pa,17:Pa,18:Pa,19:Pa,20:Pa,21:Q$};function dde(e,t){for(var r=e.l+t,a=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{a.push(cde[s](e,r-e.l))}catch{return e.l=r,a}}return e.l!=r&&(e.l=r),a}function Am(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function ude(e,t){return t===0||e.read_shift(2),1200}function hde(e,t,r){if(r.enc)return e.l+=t,"";var a=e.l,s=_c(e,0,r);return e.read_shift(t+a-e.l),s}function fde(e,t,r){var a=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function mde(e,t,r){var a=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=Zf(e,0,r);return o.length===0&&(o="Sheet1"),{pos:a,hs:s,dt:i,name:o}}function pde(e,t){for(var r=e.l+t,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(Xce(e));return i.Count=a,i.Unique=s,i}function gde(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function xde(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=r/20),t}function yde(e){var t=rde(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function vde(e){return e.read_shift(2),e.read_shift(4)}function HP(e,t,r){var a=0;r&&r.biff==2||(a=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(a=1-(s>>15),s&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,s]}function bde(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),d=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[a,s],Flags:i,CurTab:o,FirstTab:l,Selected:d,TabRatio:u}}function wde(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function jde(){}function Nde(e,t,r){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=Zf(e,0,r),a}function kde(e){var t=Ki(e);return t.isst=e.read_shift(4),t}function Sde(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=e.l+t,s=Ki(e);r.biff==2&&e.l++;var i=e0(e,a-e.l,r);return s.val=i,s}function _de(e,t,r){var a=e.read_shift(2),s=_c(e,0,r);return[a,s]}var Ede=_c;function qP(e,t,r){var a=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),d=e.read_shift(2);return e.l=a,{s:{r:i,c:l},e:{r:o,c:d}}}function Cde(e){var t=e.read_shift(2),r=e.read_shift(2),a=X$(e);return{r:t,c:r,ixfe:a[0],rknum:a[1]}}function Ade(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(X$(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:a,c:s,C:o,rkrec:i}}function Tde(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:a,c:s,C:o,ixfe:i}}function Ode(e,t,r,a){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),d=e.read_shift(2);return s.patternType=Cce[l>>26],a.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=d&127,s.icvBack=d>>7&127,s.fsxButton=d>>14&1),s}function Pde(e,t,r){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=Ode(e,t,a.fStyle,r),a}function Ide(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function zP(e,t,r){var a=Ki(e);(r.biff==2||t==9)&&++e.l;var s=Yce(e);return a.val=s,a.t=s===!0||s===!1?"b":"e",a}function Dde(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=Ki(e),s=Ra(e);return a.val=s,a}var WP=nde;function Mde(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=fc(e,i),l=[];a>e.l;)l.push(e0(e));return[i,s,o,l]}function KP(e,t,r){var a=e.read_shift(2),s,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(s=sde(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var Rde=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function VP(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),d=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),d=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=fc(e,o,r);s&32&&(u=Rde[u.charCodeAt(0)]);var f=a-e.l;r&&r.biff==2&&--f;var m=a==e.l||l===0||!(f>0)?[]:x0e(e,f,r,l);return{chKey:i,Name:u,itab:d,rgce:m}}function Z$(e,t,r){if(r.biff<8)return Fde(e,t,r);for(var a=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)a.push(ade(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return a}function Fde(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=Zf(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function $de(e,t,r){if(r.biff<8){e.l+=t;return}var a=e.read_shift(2),s=e.read_shift(2),i=fc(e,a,r),o=fc(e,s,r);return[i,o]}function Lde(e,t,r){var a=J$(e);e.l++;var s=e.read_shift(1);return t-=8,[y0e(e,t,r),s,a]}function GP(e,t,r){var a=ide(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,p0e(e,t,r)]}function Bde(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,a=e.read_shift(4);return[t,r,a]}function Ude(e,t,r){if(!(r.biff<8)){var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=_c(e,0,r);return r.biff<8&&e.read_shift(1),[{r:a,c:s},l,o,i]}}function Hde(e,t,r){return Ude(e,t,r)}function qde(e,t){for(var r=[],a=e.read_shift(2);a--;)r.push(Zg(e));return r}function zde(e,t,r){if(r&&r.biff<8)return Kde(e,t,r);var a=Q$(e),s=dde(e,t-22,a[1]);return{cmo:a,ft:s}}var Wde={8:function(e,t){var r=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:a}}};function Kde(e,t,r){e.l+=4;var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((Wde[a]||Ba)(e,t,r)),{cmo:[s,a,i],ft:o}}function Vde(e,t,r){var a=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=Jce(e,6,r);var l=e.read_shift(2);e.read_shift(2),Bn(e,2);var d=e.read_shift(2);e.l+=d;for(var u=1;u<e.lens.length-1;++u){if(e.l-a!=e.lens[u])throw new Error("TxO: bad continue record");var f=e[e.l],m=fc(e,e.lens[u+1]-e.lens[u]-1);if(s+=m,s.length>=(f?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=a+t,{t:s}}catch{return e.l=a+t,{t:s}}}function Gde(e,t){var r=Zg(e);e.l+=16;var a=tde(e,t-24);return[r,a]}function Yde(e,t){e.read_shift(2);var r=Zg(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(Qa,""),[r,a]}function Xde(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=FP[r]||r,r=e.read_shift(2),t[1]=FP[r]||r,t}function Jde(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Y$(e));return r}function Qde(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Y$(e));return r}function Zde(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function e8(e,t,r){if(!r.cellStyles)return Ba(e,t);var a=r&&r.biff>=12?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(a),d=e.read_shift(2);a==2&&(e.l+=2);var u={s,e:i,w:o,ixfe:l,flags:d};return(r.biff>=5||!r.biff)&&(u.level=d>>8&7),u}function eue(e,t){var r={};return t<32||(e.l+=16,r.header=Ra(e),r.footer=Ra(e),e.l+=2),r}function tue(e,t,r){var a={area:!1};if(r.biff!=5)return e.l+=t,a;var s=e.read_shift(1);return e.l+=3,s&16&&(a.area=!0),a}var rue=Ki,nue=V$,aue=e0;function sue(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s={fmt:t,env:r,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,s}function iue(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=Ki(e);++e.l;var s=_c(e,t-7,r);return a.t="str",a.val=s,a}function oue(e){var t=Ki(e);++e.l;var r=Ra(e);return t.t="n",t.val=r,t}function lue(e){var t=Ki(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function cue(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function due(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function uue(e,t,r){var a=e.l+t,s=Ki(e),i=e.read_shift(2),o=fc(e,i,r);return e.l=a,s.t="str",s.val=o,s}var hue=[2,3,48,49,131,139,140,245],YP=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Rk({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,d){var u=[],f=dl(1);switch(d.type){case"base64":f=pi(As(l));break;case"binary":f=pi(l);break;case"buffer":case"array":f=l;break}wa(f,0);var m=f.read_shift(1),p=!!(m&136),g=!1,v=!1;switch(m){case 2:break;case 3:break;case 48:g=!0,p=!0;break;case 49:g=!0,p=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+m.toString(16))}var y=0,w=521;m==2&&(y=f.read_shift(2)),f.l+=3,m!=2&&(y=f.read_shift(4)),y>1048576&&(y=1e6),m!=2&&(w=f.read_shift(2));var k=f.read_shift(2),N=d.codepage||1252;m!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(N=e[f[f.l]]),f.l+=1,f.l+=2),v&&(f.l+=36);for(var b=[],A={},E=Math.min(f.length,m==2?521:w-10-(g?264:0)),S=v?32:11;f.l<E&&f[f.l]!=13;)switch(A={},A.name=Tf.utils.decode(N,f.slice(f.l,f.l+S)).replace(/[\u0000\r\n].*$/g,""),f.l+=S,A.type=String.fromCharCode(f.read_shift(1)),m!=2&&!v&&(A.offset=f.read_shift(4)),A.len=f.read_shift(1),m==2&&(A.offset=f.read_shift(2)),A.dec=f.read_shift(1),A.name.length&&b.push(A),m!=2&&(f.l+=v?13:14),A.type){case"B":(!g||A.len!=8)&&d.WTF&&console.log("Skipping "+A.name+":"+A.type);break;case"G":case"P":d.WTF&&console.log("Skipping "+A.name+":"+A.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+A.type)}if(f[f.l]!==13&&(f.l=w-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=w;var _=0,C=0;for(u[0]=[],C=0;C!=b.length;++C)u[0][C]=b[C].name;for(;y-- >0;){if(f[f.l]===42){f.l+=k;continue}for(++f.l,u[++_]=[],C=0,C=0;C!=b.length;++C){var P=f.slice(f.l,f.l+b[C].len);f.l+=b[C].len,wa(P,0);var B=Tf.utils.decode(N,P);switch(b[C].type){case"C":B.trim().length&&(u[_][C]=B.replace(/\s+$/,""));break;case"D":B.length===8?u[_][C]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):u[_][C]=B;break;case"F":u[_][C]=parseFloat(B.trim());break;case"+":case"I":u[_][C]=v?P.read_shift(-4,"i")^2147483648:P.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":u[_][C]=!0;break;case"N":case"F":u[_][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+m.toString(16));u[_][C]="##MEMO##"+(v?parseInt(B.trim(),10):P.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(u[_][C]=+B||0);break;case"@":u[_][C]=new Date(P.read_shift(-8,"f")-621356832e5);break;case"T":u[_][C]=new Date((P.read_shift(4)-2440588)*864e5+P.read_shift(4));break;case"Y":u[_][C]=P.read_shift(4,"i")/1e4+P.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[_][C]=-P.read_shift(-8,"f");break;case"B":if(g&&b[C].len==8){u[_][C]=P.read_shift(8,"f");break}case"G":case"P":P.l+=b[C].len;break;case"0":if(b[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[C].type)}}}if(m!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return d&&d.sheetRows&&(u=u.slice(0,d.sheetRows)),d.DBF=b,u}function a(l,d){var u=d||{};u.dateNF||(u.dateNF="yyyymmdd");var f=yu(r(l,u),u);return f["!cols"]=u.DBF.map(function(m){return{wch:m.len,DBF:m}}),delete u.DBF,f}function s(l,d){try{return xl(a(l,d),d)}catch(u){if(d&&d.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,d){var u=d||{};if(+u.codepage>=0&&xi(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var f=XN(),m=i2(l,{header:1,raw:!0,cellDates:!0}),p=m[0],g=m.slice(1),v=l["!cols"]||[],y=0,w=0,k=0,N=1;for(y=0;y<p.length;++y){if(((v[y]||{}).DBF||{}).name){p[y]=v[y].DBF.name,++k;continue}if(p[y]!=null){if(++k,typeof p[y]=="number"&&(p[y]=p[y].toString(10)),typeof p[y]!="string")throw new Error("DBF Invalid column name "+p[y]+" |"+typeof p[y]+"|");if(p.indexOf(p[y])!==y){for(w=0;w<1024;++w)if(p.indexOf(p[y]+"_"+w)==-1){p[y]+="_"+w;break}}}}var b=Sn(l["!ref"]),A=[],E=[],S=[];for(y=0;y<=b.e.c-b.s.c;++y){var _="",C="",P=0,B=[];for(w=0;w<g.length;++w)g[w][y]!=null&&B.push(g[w][y]);if(B.length==0||p[y]==null){A[y]="?";continue}for(w=0;w<B.length;++w){switch(typeof B[w]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=B[w]instanceof Date?"D":"C";break;default:C="C"}P=Math.max(P,String(B[w]).length),_=_&&_!=C?"C":C}P>250&&(P=250),C=((v[y]||{}).DBF||{}).type,C=="C"&&v[y].DBF.len>P&&(P=v[y].DBF.len),_=="B"&&C=="N"&&(_="N",S[y]=v[y].DBF.dec,P=v[y].DBF.len),E[y]=_=="C"||C=="N"?P:i[_]||0,N+=E[y],A[y]=_}var F=f.next(32);for(F.write_shift(4,318902576),F.write_shift(4,g.length),F.write_shift(2,296+32*k),F.write_shift(2,N),y=0;y<4;++y)F.write_shift(4,0);for(F.write_shift(4,0|(+t[ZF]||3)<<8),y=0,w=0;y<p.length;++y)if(p[y]!=null){var O=f.next(32),R=(p[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,R,"sbcs"),O.write_shift(1,A[y]=="?"?"C":A[y],"sbcs"),O.write_shift(4,w),O.write_shift(1,E[y]||i[A[y]]||0),O.write_shift(1,S[y]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),w+=E[y]||i[A[y]]||0}var Q=f.next(264);for(Q.write_shift(4,13),y=0;y<65;++y)Q.write_shift(4,0);for(y=0;y<g.length;++y){var V=f.next(N);for(V.write_shift(1,0),w=0;w<p.length;++w)if(p[w]!=null)switch(A[w]){case"L":V.write_shift(1,g[y][w]==null?63:g[y][w]?84:70);break;case"B":V.write_shift(8,g[y][w]||0,"f");break;case"N":var J="0";for(typeof g[y][w]=="number"&&(J=g[y][w].toFixed(S[w]||0)),k=0;k<E[w]-J.length;++k)V.write_shift(1,32);V.write_shift(1,J,"sbcs");break;case"D":g[y][w]?(V.write_shift(4,("0000"+g[y][w].getFullYear()).slice(-4),"sbcs"),V.write_shift(2,("00"+(g[y][w].getMonth()+1)).slice(-2),"sbcs"),V.write_shift(2,("00"+g[y][w].getDate()).slice(-2),"sbcs")):V.write_shift(8,"00000000","sbcs");break;case"C":var ae=String(g[y][w]!=null?g[y][w]:"").slice(0,E[w]);for(V.write_shift(1,ae,"sbcs"),k=0;k<E[w]-ae.length;++k)V.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:s,to_sheet:a,from_sheet:o}})(),fue=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ui(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,g){var v=e[g];return typeof v=="number"?uP(v):v},a=function(p,g,v){var y=g.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return y==59?p:uP(y)};e["|"]=254;function s(p,g){switch(g.type){case"base64":return i(As(p),g);case"binary":return i(p,g);case"buffer":return i(kr&&Buffer.isBuffer(p)?p.toString("binary"):jc(p),g);case"array":return i(hc(p),g)}throw new Error("Unrecognized type "+g.type)}function i(p,g){var v=p.split(/[\n\r]+/),y=-1,w=-1,k=0,N=0,b=[],A=[],E=null,S={},_=[],C=[],P=[],B=0,F;for(+g.codepage>=0&&xi(+g.codepage);k!==v.length;++k){B=0;var O=v[k].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),R=O.replace(/;;/g,"\0").split(";").map(function(se){return se.replace(/\u0000/g,";")}),Q=R[0],V;if(O.length>0)switch(Q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":R[1].charAt(0)=="P"&&A.push(O.slice(3).replace(/;;/g,";"));break;case"C":var J=!1,ae=!1,L=!1,H=!1,ce=-1,z=-1;for(N=1;N<R.length;++N)switch(R[N].charAt(0)){case"A":break;case"X":w=parseInt(R[N].slice(1))-1,ae=!0;break;case"Y":for(y=parseInt(R[N].slice(1))-1,ae||(w=0),F=b.length;F<=y;++F)b[F]=[];break;case"K":V=R[N].slice(1),V.charAt(0)==='"'?V=V.slice(1,V.length-1):V==="TRUE"?V=!0:V==="FALSE"?V=!1:isNaN(ji(V))?isNaN(Qd(V).getDate())||(V=fa(V)):(V=ji(V),E!==null&&gu(E)&&(V=Qg(V))),J=!0;break;case"E":H=!0;var I=kd(R[N].slice(1),{r:y,c:w});b[y][w]=[b[y][w],I];break;case"S":L=!0,b[y][w]=[b[y][w],"S5S"];break;case"G":break;case"R":ce=parseInt(R[N].slice(1))-1;break;case"C":z=parseInt(R[N].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+O)}if(J&&(b[y][w]&&b[y][w].length==2?b[y][w][0]=V:b[y][w]=V,E=null),L){if(H)throw new Error("SYLK shared formula cannot have own formula");var Z=ce>-1&&b[ce][z];if(!Z||!Z[1])throw new Error("SYLK shared formula cannot find base");b[y][w][1]=d8(Z[1],{r:y-ce,c:w-z})}break;case"F":var te=0;for(N=1;N<R.length;++N)switch(R[N].charAt(0)){case"X":w=parseInt(R[N].slice(1))-1,++te;break;case"Y":for(y=parseInt(R[N].slice(1))-1,F=b.length;F<=y;++F)b[F]=[];break;case"M":B=parseInt(R[N].slice(1))/20;break;case"F":break;case"G":break;case"P":E=A[parseInt(R[N].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(P=R[N].slice(1).split(" "),F=parseInt(P[0],10);F<=parseInt(P[1],10);++F)B=parseInt(P[2],10),C[F-1]=B===0?{hidden:!0}:{wch:B},Zd(C[F-1]);break;case"C":w=parseInt(R[N].slice(1))-1,C[w]||(C[w]={});break;case"R":y=parseInt(R[N].slice(1))-1,_[y]||(_[y]={}),B>0?(_[y].hpt=B,_[y].hpx=Rf(B)):B===0&&(_[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+O)}te<1&&(E=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+O)}}return _.length>0&&(S["!rows"]=_),C.length>0&&(S["!cols"]=C),g&&g.sheetRows&&(b=b.slice(0,g.sheetRows)),[b,S]}function o(p,g){var v=s(p,g),y=v[0],w=v[1],k=yu(y,g);return Ui(w).forEach(function(N){k[N]=w[N]}),k}function l(p,g){return xl(o(p,g),g)}function d(p,g,v,y){var w="C;Y"+(v+1)+";X"+(y+1)+";K";switch(p.t){case"n":w+=p.v||0,p.f&&!p.F&&(w+=";E"+Zhe(p.f,{r:v,c:y}));break;case"b":w+=p.v?"TRUE":"FALSE";break;case"e":w+=p.w||p.v;break;case"d":w+='"'+(p.w||p.v)+'"';break;case"s":w+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return w}function u(p,g){g.forEach(function(v,y){var w="F;W"+(y+1)+" "+(y+1)+" ";v.hidden?w+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=eg(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=tg(v.wpx)),typeof v.wch=="number"&&(w+=Math.round(v.wch))),w.charAt(w.length-1)!=" "&&p.push(w)})}function f(p,g){g.forEach(function(v,y){var w="F;";v.hidden?w+="M0;":v.hpt?w+="M"+20*v.hpt+";":v.hpx&&(w+="M"+20*o8(v.hpx)+";"),w.length>2&&p.push(w+"R"+(y+1))})}function m(p,g){var v=["ID;PWXL;N;E"],y=[],w=Sn(p["!ref"]),k,N=Array.isArray(p),b=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),p["!cols"]&&u(v,p["!cols"]),p["!rows"]&&f(v,p["!rows"]),v.push("B;Y"+(w.e.r-w.s.r+1)+";X"+(w.e.c-w.s.c+1)+";D"+[w.s.c,w.s.r,w.e.c,w.e.r].join(" "));for(var A=w.s.r;A<=w.e.r;++A)for(var E=w.s.c;E<=w.e.c;++E){var S=or({r:A,c:E});k=N?(p[A]||[])[E]:p[S],!(!k||k.v==null&&(!k.f||k.F))&&y.push(d(k,p,A,E))}return v.join(b)+b+y.join(b)+b+"E"+b}return{to_workbook:l,to_sheet:o,from_sheet:m}})(),mue=(function(){function e(i,o){switch(o.type){case"base64":return t(As(i),o);case"binary":return t(i,o);case"buffer":return t(kr&&Buffer.isBuffer(i)?i.toString("binary"):jc(i),o);case"array":return t(hc(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),d=-1,u=-1,f=0,m=[];f!==l.length;++f){if(l[f].trim()==="BOT"){m[++d]=[],u=0;continue}if(!(d<0)){var p=l[f].trim().split(","),g=p[0],v=p[1];++f;for(var y=l[f]||"";(y.match(/["]/g)||[]).length&1&&f<l.length-1;)y+=`
`+l[++f];switch(y=y.trim(),+g){case-1:if(y==="BOT"){m[++d]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?m[d][u]=!0:y==="FALSE"?m[d][u]=!1:isNaN(ji(v))?isNaN(Qd(v).getDate())?m[d][u]=v:m[d][u]=fa(v):m[d][u]=ji(v),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),m[d][u++]=y!==""?y:null;break}if(y==="EOD")break}}return o&&o.sheetRows&&(m=m.slice(0,o.sheetRows)),m}function r(i,o){return yu(e(i,o),o)}function a(i,o){return xl(r(i,o),o)}var s=(function(){var i=function(d,u,f,m,p){d.push(u),d.push(f+","+m),d.push('"'+p.replace(/"/g,'""')+'"')},o=function(d,u,f,m){d.push(u+","+f),d.push(u==1?'"'+m.replace(/"/g,'""')+'"':m)};return function(d){var u=[],f=Sn(d["!ref"]),m,p=Array.isArray(d);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,f.e.r-f.s.r+1,""),i(u,"TUPLES",0,f.e.c-f.s.c+1,""),i(u,"DATA",0,0,"");for(var g=f.s.r;g<=f.e.r;++g){o(u,-1,0,"BOT");for(var v=f.s.c;v<=f.e.c;++v){var y=or({r:g,c:v});if(m=p?(d[g]||[])[v]:d[y],!m){o(u,1,0,"");continue}switch(m.t){case"n":var w=m.w;!w&&m.v!=null&&(w=m.v),w==null?m.f&&!m.F?o(u,1,0,"="+m.f):o(u,1,0,""):o(u,0,w,"V");break;case"b":o(u,0,m.v?1:0,m.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(m.v)?m.v:'="'+m.v+'"');break;case"d":m.w||(m.w=Ys(m.z||lr[14],Za(fa(m.v)))),o(u,0,m.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var k=`\r
`,N=u.join(k);return N}})();return{to_workbook:a,to_sheet:r,from_sheet:s}})(),pue=(function(){function e(m){return m.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(m){return m.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(m,p){for(var g=m.split(`
`),v=-1,y=-1,w=0,k=[];w!==g.length;++w){var N=g[w].trim().split(":");if(N[0]==="cell"){var b=Ja(N[1]);if(k.length<=b.r)for(v=k.length;v<=b.r;++v)k[v]||(k[v]=[]);switch(v=b.r,y=b.c,N[2]){case"t":k[v][y]=e(N[3]);break;case"v":k[v][y]=+N[3];break;case"vtf":var A=N[N.length-1];case"vtc":switch(N[3]){case"nl":k[v][y]=!!+N[4];break;default:k[v][y]=+N[4];break}N[2]=="vtf"&&(k[v][y]=[k[v][y],A])}}}return p&&p.sheetRows&&(k=k.slice(0,p.sheetRows)),k}function a(m,p){return yu(r(m,p),p)}function s(m,p){return xl(a(m,p),p)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),d="--SocialCalcSpreadsheetControlSave--";function u(m){if(!m||!m["!ref"])return"";for(var p=[],g=[],v,y="",w=xu(m["!ref"]),k=Array.isArray(m),N=w.s.r;N<=w.e.r;++N)for(var b=w.s.c;b<=w.e.c;++b)if(y=or({r:N,c:b}),v=k?(m[N]||[])[b]:m[y],!(!v||v.v==null||v.t==="z")){switch(g=["cell",y,"t"],v.t){case"s":case"str":g.push(t(v.v));break;case"n":v.f?(g[2]="vtf",g[3]="n",g[4]=v.v,g[5]=t(v.f)):(g[2]="v",g[3]=v.v);break;case"b":g[2]="vt"+(v.f?"f":"c"),g[3]="nl",g[4]=v.v?"1":"0",g[5]=t(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var A=Za(fa(v.v));g[2]="vtc",g[3]="nd",g[4]=""+A,g[5]=v.w||Ys(v.z||lr[14],A);break;case"e":continue}p.push(g.join(":"))}return p.push("sheet:c:"+(w.e.c-w.s.c+1)+":r:"+(w.e.r-w.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function f(m){return[i,o,l,o,u(m),d].join(`
`)}return{to_workbook:s,to_sheet:a,from_sheet:f}})(),Df=(function(){function e(f,m,p,g,v){v.raw?m[p][g]=f:f===""||(f==="TRUE"?m[p][g]=!0:f==="FALSE"?m[p][g]=!1:isNaN(ji(f))?isNaN(Qd(f).getDate())?m[p][g]=f:m[p][g]=fa(f):m[p][g]=ji(f))}function t(f,m){var p=m||{},g=[];if(!f||f.length===0)return g;for(var v=f.split(/[\r\n]/),y=v.length-1;y>=0&&v[y].length===0;)--y;for(var w=10,k=0,N=0;N<=y;++N)k=v[N].indexOf(" "),k==-1?k=v[N].length:k++,w=Math.max(w,k);for(N=0;N<=y;++N){g[N]=[];var b=0;for(e(v[N].slice(0,w).trim(),g,N,b,p),b=1;b<=(v[N].length-w)/10+1;++b)e(v[N].slice(w+(b-1)*10,w+b*10).trim(),g,N,b,p)}return p.sheetRows&&(g=g.slice(0,p.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function s(f){for(var m={},p=!1,g=0,v=0;g<f.length;++g)(v=f.charCodeAt(g))==34?p=!p:!p&&v in r&&(m[v]=(m[v]||0)+1);v=[];for(g in m)Object.prototype.hasOwnProperty.call(m,g)&&v.push([m[g],g]);if(!v.length){m=a;for(g in m)Object.prototype.hasOwnProperty.call(m,g)&&v.push([m[g],g])}return v.sort(function(y,w){return y[0]-w[0]||a[y[1]]-a[w[1]]}),r[v.pop()[1]]||44}function i(f,m){var p=m||{},g="",v=p.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(g=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(g=f.charAt(4),f=f.slice(6)):g=s(f.slice(0,1024)):p&&p.FS?g=p.FS:g=s(f.slice(0,1024));var w=0,k=0,N=0,b=0,A=0,E=g.charCodeAt(0),S=!1,_=0,C=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var P=p.dateNF!=null?_le(p.dateNF):null;function B(){var F=f.slice(b,A),O={};if(F.charAt(0)=='"'&&F.charAt(F.length-1)=='"'&&(F=F.slice(1,-1).replace(/""/g,'"')),F.length===0)O.t="z";else if(p.raw)O.t="s",O.v=F;else if(F.trim().length===0)O.t="s",O.v=F;else if(F.charCodeAt(0)==61)F.charCodeAt(1)==34&&F.charCodeAt(F.length-1)==34?(O.t="s",O.v=F.slice(2,-1).replace(/""/g,'"')):tfe(F)?(O.t="n",O.f=F.slice(1)):(O.t="s",O.v=F);else if(F=="TRUE")O.t="b",O.v=!0;else if(F=="FALSE")O.t="b",O.v=!1;else if(!isNaN(N=ji(F)))O.t="n",p.cellText!==!1&&(O.w=F),O.v=N;else if(!isNaN(Qd(F).getDate())||P&&F.match(P)){O.z=p.dateNF||lr[14];var R=0;P&&F.match(P)&&(F=Ele(F,p.dateNF,F.match(P)||[]),R=1),p.cellDates?(O.t="d",O.v=fa(F,R)):(O.t="n",O.v=Za(fa(F,R))),p.cellText!==!1&&(O.w=Ys(O.z,O.v instanceof Date?Za(O.v):O.v)),p.cellNF||delete O.z}else O.t="s",O.v=F;if(O.t=="z"||(p.dense?(v[w]||(v[w]=[]),v[w][k]=O):v[or({c:k,r:w})]=O),b=A+1,C=f.charCodeAt(b),y.e.c<k&&(y.e.c=k),y.e.r<w&&(y.e.r=w),_==E)++k;else if(k=0,++w,p.sheetRows&&p.sheetRows<=w)return!0}e:for(;A<f.length;++A)switch(_=f.charCodeAt(A)){case 34:C===34&&(S=!S);break;case E:case 10:case 13:if(!S&&B())break e;break}return A-b>0&&B(),v["!ref"]=Cr(y),v}function o(f,m){return!(m&&m.PRN)||m.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?i(f,m):yu(t(f,m),m)}function l(f,m){var p="",g=m.type=="string"?[0,0,0,0]:tS(f,m);switch(m.type){case"base64":p=As(f);break;case"binary":p=f;break;case"buffer":m.codepage==65001?p=f.toString("utf8"):m.codepage&&typeof Tf<"u"||(p=kr&&Buffer.isBuffer(f)?f.toString("binary"):jc(f));break;case"array":p=hc(f);break;case"string":p=f;break;default:throw new Error("Unrecognized type "+m.type)}return g[0]==239&&g[1]==187&&g[2]==191?p=rn(p.slice(3)):m.type!="string"&&m.type!="buffer"&&m.codepage==65001?p=rn(p):m.type=="binary"&&typeof Tf<"u",p.slice(0,19)=="socialcalc:version:"?pue.to_sheet(m.type=="string"?p:rn(p),m):o(p,m)}function d(f,m){return xl(l(f,m),m)}function u(f){for(var m=[],p=Sn(f["!ref"]),g,v=Array.isArray(f),y=p.s.r;y<=p.e.r;++y){for(var w=[],k=p.s.c;k<=p.e.c;++k){var N=or({r:y,c:k});if(g=v?(f[y]||[])[k]:f[N],!g||g.v==null){w.push("          ");continue}for(var b=(g.w||(_o(g),g.w)||"").slice(0,10);b.length<10;)b+=" ";w.push(b+(k===0?" ":""))}m.push(w.join(""))}return m.join(`
`)}return{to_workbook:d,to_sheet:l,from_sheet:u}})();function gue(e,t){var r=t||{},a=!!r.WTF;r.WTF=!0;try{var s=fue.to_workbook(e,r);return r.WTF=a,s}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return Df.to_workbook(e,t)}}var Ih=(function(){function e(I,Z,te){if(I){wa(I,I.l||0);for(var se=te.Enum||ce;I.l<I.length;){var be=I.read_shift(2),Ee=se[be]||se[65535],_e=I.read_shift(2),me=I.l+_e,ye=Ee.f&&Ee.f(I,_e,te);if(I.l=me,Z(ye,Ee,be))return}}}function t(I,Z){switch(Z.type){case"base64":return r(pi(As(I)),Z);case"binary":return r(pi(I),Z);case"buffer":case"array":return r(I,Z)}throw"Unsupported type "+Z.type}function r(I,Z){if(!I)return I;var te=Z||{},se=te.dense?[]:{},be="Sheet1",Ee="",_e=0,me={},ye=[],qe=[],G={s:{r:0,c:0},e:{r:0,c:0}},He=te.sheetRows||0;if(I[2]==0&&(I[3]==8||I[3]==9)&&I.length>=16&&I[14]==5&&I[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(I[2]==2)te.Enum=ce,e(I,function(Pe,ke,Xe){switch(Xe){case 0:te.vers=Pe,Pe>=4096&&(te.qpro=!0);break;case 6:G=Pe;break;case 204:Pe&&(Ee=Pe);break;case 222:Ee=Pe;break;case 15:case 51:te.qpro||(Pe[1].v=Pe[1].v.slice(1));case 13:case 14:case 16:Xe==14&&(Pe[2]&112)==112&&(Pe[2]&15)>1&&(Pe[2]&15)<15&&(Pe[1].z=te.dateNF||lr[14],te.cellDates&&(Pe[1].t="d",Pe[1].v=Qg(Pe[1].v))),te.qpro&&Pe[3]>_e&&(se["!ref"]=Cr(G),me[be]=se,ye.push(be),se=te.dense?[]:{},G={s:{r:0,c:0},e:{r:0,c:0}},_e=Pe[3],be=Ee||"Sheet"+(_e+1),Ee="");var We=te.dense?(se[Pe[0].r]||[])[Pe[0].c]:se[or(Pe[0])];if(We){We.t=Pe[1].t,We.v=Pe[1].v,Pe[1].z!=null&&(We.z=Pe[1].z),Pe[1].f!=null&&(We.f=Pe[1].f);break}te.dense?(se[Pe[0].r]||(se[Pe[0].r]=[]),se[Pe[0].r][Pe[0].c]=Pe[1]):se[or(Pe[0])]=Pe[1];break}},te);else if(I[2]==26||I[2]==14)te.Enum=z,I[2]==14&&(te.qpro=!0,I.l=0),e(I,function(Pe,ke,Xe){switch(Xe){case 204:be=Pe;break;case 22:Pe[1].v=Pe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Pe[3]>_e&&(se["!ref"]=Cr(G),me[be]=se,ye.push(be),se=te.dense?[]:{},G={s:{r:0,c:0},e:{r:0,c:0}},_e=Pe[3],be="Sheet"+(_e+1)),He>0&&Pe[0].r>=He)break;te.dense?(se[Pe[0].r]||(se[Pe[0].r]=[]),se[Pe[0].r][Pe[0].c]=Pe[1]):se[or(Pe[0])]=Pe[1],G.e.c<Pe[0].c&&(G.e.c=Pe[0].c),G.e.r<Pe[0].r&&(G.e.r=Pe[0].r);break;case 27:Pe[14e3]&&(qe[Pe[14e3][0]]=Pe[14e3][1]);break;case 1537:qe[Pe[0]]=Pe[1],Pe[0]==_e&&(be=Pe[1]);break}},te);else throw new Error("Unrecognized LOTUS BOF "+I[2]);if(se["!ref"]=Cr(G),me[Ee||be]=se,ye.push(Ee||be),!qe.length)return{SheetNames:ye,Sheets:me};for(var Ke={},ut=[],ze=0;ze<qe.length;++ze)me[ye[ze]]?(ut.push(qe[ze]||ye[ze]),Ke[qe[ze]]=me[qe[ze]]||me[ye[ze]]):(ut.push(qe[ze]),Ke[qe[ze]]={"!ref":"A1"});return{SheetNames:ut,Sheets:Ke}}function a(I,Z){var te=Z||{};if(+te.codepage>=0&&xi(+te.codepage),te.type=="string")throw new Error("Cannot write WK1 to JS string");var se=XN(),be=Sn(I["!ref"]),Ee=Array.isArray(I),_e=[];ii(se,0,i(1030)),ii(se,6,d(be));for(var me=Math.min(be.e.r,8191),ye=be.s.r;ye<=me;++ye)for(var qe=_a(ye),G=be.s.c;G<=be.e.c;++G){ye===be.s.r&&(_e[G]=aa(G));var He=_e[G]+qe,Ke=Ee?(I[ye]||[])[G]:I[He];if(!(!Ke||Ke.t=="z"))if(Ke.t=="n")(Ke.v|0)==Ke.v&&Ke.v>=-32768&&Ke.v<=32767?ii(se,13,g(ye,G,Ke.v)):ii(se,14,y(ye,G,Ke.v));else{var ut=_o(Ke);ii(se,15,m(ye,G,ut.slice(0,239)))}}return ii(se,1),se.end()}function s(I,Z){var te=Z||{};if(+te.codepage>=0&&xi(+te.codepage),te.type=="string")throw new Error("Cannot write WK3 to JS string");var se=XN();ii(se,0,o(I));for(var be=0,Ee=0;be<I.SheetNames.length;++be)(I.Sheets[I.SheetNames[be]]||{})["!ref"]&&ii(se,27,H(I.SheetNames[be],Ee++));var _e=0;for(be=0;be<I.SheetNames.length;++be){var me=I.Sheets[I.SheetNames[be]];if(!(!me||!me["!ref"])){for(var ye=Sn(me["!ref"]),qe=Array.isArray(me),G=[],He=Math.min(ye.e.r,8191),Ke=ye.s.r;Ke<=He;++Ke)for(var ut=_a(Ke),ze=ye.s.c;ze<=ye.e.c;++ze){Ke===ye.s.r&&(G[ze]=aa(ze));var Pe=G[ze]+ut,ke=qe?(me[Ke]||[])[ze]:me[Pe];if(!(!ke||ke.t=="z"))if(ke.t=="n")ii(se,23,B(Ke,ze,_e,ke.v));else{var Xe=_o(ke);ii(se,22,_(Ke,ze,_e,Xe.slice(0,239)))}}++_e}}return ii(se,1),se.end()}function i(I){var Z=ea(2);return Z.write_shift(2,I),Z}function o(I){var Z=ea(26);Z.write_shift(2,4096),Z.write_shift(2,4),Z.write_shift(4,0);for(var te=0,se=0,be=0,Ee=0;Ee<I.SheetNames.length;++Ee){var _e=I.SheetNames[Ee],me=I.Sheets[_e];if(!(!me||!me["!ref"])){++be;var ye=xu(me["!ref"]);te<ye.e.r&&(te=ye.e.r),se<ye.e.c&&(se=ye.e.c)}}return te>8191&&(te=8191),Z.write_shift(2,te),Z.write_shift(1,be),Z.write_shift(1,se),Z.write_shift(2,0),Z.write_shift(2,0),Z.write_shift(1,1),Z.write_shift(1,2),Z.write_shift(4,0),Z.write_shift(4,0),Z}function l(I,Z,te){var se={s:{c:0,r:0},e:{c:0,r:0}};return Z==8&&te.qpro?(se.s.c=I.read_shift(1),I.l++,se.s.r=I.read_shift(2),se.e.c=I.read_shift(1),I.l++,se.e.r=I.read_shift(2),se):(se.s.c=I.read_shift(2),se.s.r=I.read_shift(2),Z==12&&te.qpro&&(I.l+=2),se.e.c=I.read_shift(2),se.e.r=I.read_shift(2),Z==12&&te.qpro&&(I.l+=2),se.s.c==65535&&(se.s.c=se.e.c=se.s.r=se.e.r=0),se)}function d(I){var Z=ea(8);return Z.write_shift(2,I.s.c),Z.write_shift(2,I.s.r),Z.write_shift(2,I.e.c),Z.write_shift(2,I.e.r),Z}function u(I,Z,te){var se=[{c:0,r:0},{t:"n",v:0},0,0];return te.qpro&&te.vers!=20768?(se[0].c=I.read_shift(1),se[3]=I.read_shift(1),se[0].r=I.read_shift(2),I.l+=2):(se[2]=I.read_shift(1),se[0].c=I.read_shift(2),se[0].r=I.read_shift(2)),se}function f(I,Z,te){var se=I.l+Z,be=u(I,Z,te);if(be[1].t="s",te.vers==20768){I.l++;var Ee=I.read_shift(1);return be[1].v=I.read_shift(Ee,"utf8"),be}return te.qpro&&I.l++,be[1].v=I.read_shift(se-I.l,"cstr"),be}function m(I,Z,te){var se=ea(7+te.length);se.write_shift(1,255),se.write_shift(2,Z),se.write_shift(2,I),se.write_shift(1,39);for(var be=0;be<se.length;++be){var Ee=te.charCodeAt(be);se.write_shift(1,Ee>=128?95:Ee)}return se.write_shift(1,0),se}function p(I,Z,te){var se=u(I,Z,te);return se[1].v=I.read_shift(2,"i"),se}function g(I,Z,te){var se=ea(7);return se.write_shift(1,255),se.write_shift(2,Z),se.write_shift(2,I),se.write_shift(2,te,"i"),se}function v(I,Z,te){var se=u(I,Z,te);return se[1].v=I.read_shift(8,"f"),se}function y(I,Z,te){var se=ea(13);return se.write_shift(1,255),se.write_shift(2,Z),se.write_shift(2,I),se.write_shift(8,te,"f"),se}function w(I,Z,te){var se=I.l+Z,be=u(I,Z,te);if(be[1].v=I.read_shift(8,"f"),te.qpro)I.l=se;else{var Ee=I.read_shift(2);A(I.slice(I.l,I.l+Ee),be),I.l+=Ee}return be}function k(I,Z,te){var se=Z&32768;return Z&=-32769,Z=(se?I:0)+(Z>=8192?Z-16384:Z),(se?"":"$")+(te?aa(Z):_a(Z))}var N={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function A(I,Z){wa(I,0);for(var te=[],se=0,be="",Ee="",_e="",me="";I.l<I.length;){var ye=I[I.l++];switch(ye){case 0:te.push(I.read_shift(8,"f"));break;case 1:Ee=k(Z[0].c,I.read_shift(2),!0),be=k(Z[0].r,I.read_shift(2),!1),te.push(Ee+be);break;case 2:{var qe=k(Z[0].c,I.read_shift(2),!0),G=k(Z[0].r,I.read_shift(2),!1);Ee=k(Z[0].c,I.read_shift(2),!0),be=k(Z[0].r,I.read_shift(2),!1),te.push(qe+G+":"+Ee+be)}break;case 3:if(I.l<I.length){console.error("WK1 premature formula end");return}break;case 4:te.push("("+te.pop()+")");break;case 5:te.push(I.read_shift(2));break;case 6:{for(var He="";ye=I[I.l++];)He+=String.fromCharCode(ye);te.push('"'+He.replace(/"/g,'""')+'"')}break;case 8:te.push("-"+te.pop());break;case 23:te.push("+"+te.pop());break;case 22:te.push("NOT("+te.pop()+")");break;case 20:case 21:me=te.pop(),_e=te.pop(),te.push(["AND","OR"][ye-20]+"("+_e+","+me+")");break;default:if(ye<32&&b[ye])me=te.pop(),_e=te.pop(),te.push(_e+b[ye]+me);else if(N[ye]){if(se=N[ye][1],se==69&&(se=I[I.l++]),se>te.length){console.error("WK1 bad formula parse 0x"+ye.toString(16)+":|"+te.join("|")+"|");return}var Ke=te.slice(-se);te.length-=se,te.push(N[ye][0]+"("+Ke.join(",")+")")}else return ye<=7?console.error("WK1 invalid opcode "+ye.toString(16)):ye<=24?console.error("WK1 unsupported op "+ye.toString(16)):ye<=30?console.error("WK1 invalid opcode "+ye.toString(16)):ye<=115?console.error("WK1 unsupported function opcode "+ye.toString(16)):console.error("WK1 unrecognized opcode "+ye.toString(16))}}te.length==1?Z[1].f=""+te[0]:console.error("WK1 bad formula parse |"+te.join("|")+"|")}function E(I){var Z=[{c:0,r:0},{t:"n",v:0},0];return Z[0].r=I.read_shift(2),Z[3]=I[I.l++],Z[0].c=I[I.l++],Z}function S(I,Z){var te=E(I);return te[1].t="s",te[1].v=I.read_shift(Z-4,"cstr"),te}function _(I,Z,te,se){var be=ea(6+se.length);be.write_shift(2,I),be.write_shift(1,te),be.write_shift(1,Z),be.write_shift(1,39);for(var Ee=0;Ee<se.length;++Ee){var _e=se.charCodeAt(Ee);be.write_shift(1,_e>=128?95:_e)}return be.write_shift(1,0),be}function C(I,Z){var te=E(I);te[1].v=I.read_shift(2);var se=te[1].v>>1;if(te[1].v&1)switch(se&7){case 0:se=(se>>3)*5e3;break;case 1:se=(se>>3)*500;break;case 2:se=(se>>3)/20;break;case 3:se=(se>>3)/200;break;case 4:se=(se>>3)/2e3;break;case 5:se=(se>>3)/2e4;break;case 6:se=(se>>3)/16;break;case 7:se=(se>>3)/64;break}return te[1].v=se,te}function P(I,Z){var te=E(I),se=I.read_shift(4),be=I.read_shift(4),Ee=I.read_shift(2);if(Ee==65535)return se===0&&be===3221225472?(te[1].t="e",te[1].v=15):se===0&&be===3489660928?(te[1].t="e",te[1].v=42):te[1].v=0,te;var _e=Ee&32768;return Ee=(Ee&32767)-16446,te[1].v=(1-_e*2)*(be*Math.pow(2,Ee+32)+se*Math.pow(2,Ee)),te}function B(I,Z,te,se){var be=ea(14);if(be.write_shift(2,I),be.write_shift(1,te),be.write_shift(1,Z),se==0)return be.write_shift(4,0),be.write_shift(4,0),be.write_shift(2,65535),be;var Ee=0,_e=0,me=0,ye=0;return se<0&&(Ee=1,se=-se),_e=Math.log2(se)|0,se/=Math.pow(2,_e-31),ye=se>>>0,(ye&2147483648)==0&&(se/=2,++_e,ye=se>>>0),se-=ye,ye|=2147483648,ye>>>=0,se*=Math.pow(2,32),me=se>>>0,be.write_shift(4,me),be.write_shift(4,ye),_e+=16383+(Ee?32768:0),be.write_shift(2,_e),be}function F(I,Z){var te=P(I);return I.l+=Z-14,te}function O(I,Z){var te=E(I),se=I.read_shift(4);return te[1].v=se>>6,te}function R(I,Z){var te=E(I),se=I.read_shift(8,"f");return te[1].v=se,te}function Q(I,Z){var te=R(I);return I.l+=Z-10,te}function V(I,Z){return I[I.l+Z-1]==0?I.read_shift(Z,"cstr"):""}function J(I,Z){var te=I[I.l++];te>Z-1&&(te=Z-1);for(var se="";se.length<te;)se+=String.fromCharCode(I[I.l++]);return se}function ae(I,Z,te){if(!(!te.qpro||Z<21)){var se=I.read_shift(1);I.l+=17,I.l+=1,I.l+=2;var be=I.read_shift(Z-21,"cstr");return[se,be]}}function L(I,Z){for(var te={},se=I.l+Z;I.l<se;){var be=I.read_shift(2);if(be==14e3){for(te[be]=[0,""],te[be][0]=I.read_shift(2);I[I.l];)te[be][1]+=String.fromCharCode(I[I.l]),I.l++;I.l++}}return te}function H(I,Z){var te=ea(5+I.length);te.write_shift(2,14e3),te.write_shift(2,Z);for(var se=0;se<I.length;++se){var be=I.charCodeAt(se);te[te.l++]=be>127?95:be}return te[te.l++]=0,te}var ce={0:{n:"BOF",f:Bn},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:v},15:{n:"LABEL",f},16:{n:"FORMULA",f:w},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:V},222:{n:"SHEETNAMELP",f:J},65535:{n:""}},z={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:S},23:{n:"NUMBER17",f:P},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:F},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:L},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:R},40:{n:"FORMULA28",f:Q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:V},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ae},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:s,to_workbook:t}})();function xue(e){var t={},r=e.match(Ua),a=0,s=!1;if(r)for(;a!=r.length;++a){var i=er(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=Ok[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var yue=(function(){var e=Pf("t"),t=Pf("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Pr(o[1])},d=i.match(t);return d&&(l.s=xue(d[1])),l}var a=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(s).map(r).filter(function(l){return l.v})}})(),vue=(function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var d=s.valign||"";return d=="superscript"||d=="super"?d="sup":d=="subscript"&&(d="sub"),d!=""&&(i.push("<"+d+">"),o.push("</"+d+">")),o.push("</span>"),s}function a(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}})(),bue=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,wue=/<(?:\w+:)?r>/,jue=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function Gk(e,t){var r=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=Pr(rn(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=rn(e),r&&(a.h=$k(a.t))):e.match(wue)&&(a.r=rn(e),a.t=Pr(rn((e.replace(jue,"").match(bue)||[]).join("").replace(Ua,""))),r&&(a.h=vue(yue(a.r)))),a):{t:""}}var Nue=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,kue=/<(?:\w+:)?(?:si|sstItem)>/g,Sue=/<\/(?:\w+:)?(?:si|sstItem)>/;function _ue(e,t){var r=[],a="";if(!e)return r;var s=e.match(Nue);if(s){a=s[2].replace(kue,"").split(Sue);for(var i=0;i!=a.length;++i){var o=Gk(a[i].trim(),t);o!=null&&(r[r.length]=o)}s=er(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}function Eue(e){return[e.read_shift(4),e.read_shift(4)]}function Cue(e,t){var r=[],a=!1;return Oo(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function t8(e){for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function wo(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Aue(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=wo(e,4),t.U=wo(e,4),t.W=wo(e,4),t}function Tue(e){for(var t=e.read_shift(4),r=e.l+t-4,a={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return a}function Oue(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(Tue(e));return t}function Pue(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function Iue(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=wo(e,4),t.U=wo(e,4),t.W=wo(e,4),t}function Due(e){var t=Iue(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function r8(e,t){var r=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var s=!1;switch(a.AlgID){case 26126:case 26127:case 26128:s=a.Flags==36;break;case 26625:s=a.Flags==4;break;case 0:s=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,a}function n8(e,t){var r={},a=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,a),e.l=a,r}function Mue(e){var t=wo(e);switch(t.Minor){case 2:return[t.Minor,Rue(e)];case 3:return[t.Minor,Fue()];case 4:return[t.Minor,$ue(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Rue(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),a=r8(e,r),s=n8(e,e.length-e.l);return{t:"Std",h:a,v:s}}function Fue(){throw new Error("File is password-protected: ECMA-376 Extensible")}function $ue(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),a={};return r.replace(Ua,function(i){var o=er(i);switch(Wi(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){a[l]=o[l]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function Lue(e,t){var r={},a=r.EncryptionVersionInfo=wo(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=r8(e,s),t-=s,r.EncryptionVerifier=n8(e,t),r}function Bue(e){var t={},r=t.EncryptionVersionInfo=wo(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function Uue(e){var t=0,r,a=t8(e),s=a.length+1,i,o,l,d,u;for(r=dl(s),r[0]=a.length,i=1;i!=s;++i)r[i]=a[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,d=t<<1&32767,u=l|d,t=u^o;return t^52811}var a8=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},s=function(o,l){return a(o^l)},i=function(o){for(var l=t[o.length-1],d=104,u=o.length-1;u>=0;--u)for(var f=o[u],m=0;m!=7;++m)f&64&&(l^=r[d]),f*=2,--d;return l};return function(o){for(var l=t8(o),d=i(l),u=l.length,f=dl(16),m=0;m!=16;++m)f[m]=0;var p,g,v;for((u&1)===1&&(p=d>>8,f[u]=s(e[0],p),--u,p=d&255,g=l[l.length-1],f[u]=s(g,p));u>0;)--u,p=d>>8,f[u]=s(l[u],p),--u,p=d&255,f[u]=s(l[u],p);for(u=15,v=15-l.length;v>0;)p=d>>8,f[u]=s(e[v],p),--u,--v,p=d&255,f[u]=s(l[u],p),--u,--v;return f}})(),Hue=function(e,t,r,a,s){s||(s=t),a||(a=a8(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=a[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,a]},que=function(e){var t=0,r=a8(e);return function(a){var s=Hue("",a,t,r);return t=s[1],s[0]}};function zue(e,t,r,a){var s={key:Bn(e),verificationBytes:Bn(e)};return r.password&&(s.verifier=Uue(r.password)),a.valid=s.verificationBytes===s.verifier,a.valid&&(a.insitu=que(r.password)),s}function Wue(e,t,r){var a=r||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=Bue(e):a.Data=Lue(e,t),a}function Kue(e,t,r){var a={Type:r.biff>=8?e.read_shift(2):0};return a.Type?Wue(e,t-2,a):zue(e,r.biff>=8?t:t-2,r,a),a}var Vue=(function(){function e(s,i){switch(i.type){case"base64":return t(As(s),i);case"binary":return t(s,i);case"buffer":return t(kr&&Buffer.isBuffer(s)?s.toString("binary"):jc(s),i);case"array":return t(hc(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},d=s.match(/\\trowd.*?\\row\b/g);if(!d.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:d.length-1}};return d.forEach(function(f,m){Array.isArray(l)&&(l[m]=[]);for(var p=/\\\w+\b/g,g=0,v,y=-1;v=p.exec(f);){switch(v[0]){case"\\cell":var w=f.slice(g,p.lastIndex-v[0].length);if(w[0]==" "&&(w=w.slice(1)),++y,w.length){var k={v:w,t:"s"};Array.isArray(l)?l[m][y]=k:l[or({r:m,c:y})]=k}break}g=p.lastIndex}y>u.e.c&&(u.e.c=y)}),l["!ref"]=Cr(u),l}function r(s,i){return xl(e(s,i),i)}function a(s){for(var i=["{\\rtf1\\ansi"],o=Sn(s["!ref"]),l,d=Array.isArray(s),u=o.s.r;u<=o.e.r;++u){i.push("\\trowd\\trautofit1");for(var f=o.s.c;f<=o.e.c;++f)i.push("\\cellx"+(f+1));for(i.push("\\pard\\intbl"),f=o.s.c;f<=o.e.c;++f){var m=or({r:u,c:f});l=d?(s[u]||[])[f]:s[m],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(_o(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}})();function Gue(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Mf(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Yue(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,s=Math.max(t,r,a),i=Math.min(t,r,a),o=s-i;if(o===0)return[0,0,t];var l=0,d=0,u=s+i;switch(d=o/(u>1?2-u:u),s){case t:l=((r-a)/o+6)%6;break;case r:l=(a-t)/o+2;break;case a:l=(t-r)/o+4;break}return[l/6,d,u/2]}function Xue(e){var t=e[0],r=e[1],a=e[2],s=r*2*(a<.5?a:1-a),i=a-s/2,o=[i,i,i],l=6*t,d;if(r!==0)switch(l|0){case 0:case 6:d=s*l,o[0]+=s,o[1]+=d;break;case 1:d=s*(2-l),o[0]+=d,o[1]+=s;break;case 2:d=s*(l-2),o[1]+=s,o[2]+=d;break;case 3:d=s*(4-l),o[1]+=d,o[2]+=s;break;case 4:d=s*(l-4),o[2]+=s,o[0]+=d;break;case 5:d=s*(6-l),o[2]+=d,o[0]+=s;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function Zp(e,t){if(t===0)return e;var r=Yue(Gue(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Mf(Xue(r))}var s8=6,Jue=15,Que=1,Va=s8;function eg(e){return Math.floor((e+Math.round(128/Va)/256)*Va)}function tg(e){return Math.floor((e-5)/Va*100+.5)/100}function e2(e){return Math.round((e*Va+5)/Va*256)/256}function Q1(e){return e2(tg(eg(e)))}function Yk(e){var t=Math.abs(e-Q1(e)),r=Va;if(t>.005)for(Va=Que;Va<Jue;++Va)Math.abs(e-Q1(e))<=t&&(t=Math.abs(e-Q1(e)),r=Va);Va=r}function Zd(e){e.width?(e.wpx=eg(e.width),e.wch=tg(e.wpx),e.MDW=Va):e.wpx?(e.wch=tg(e.wpx),e.width=e2(e.wch),e.MDW=Va):typeof e.wch=="number"&&(e.width=e2(e.wch),e.wpx=eg(e.width),e.MDW=Va),e.customWidth&&delete e.customWidth}var Zue=96,i8=Zue;function o8(e){return e*96/i8}function Rf(e){return e*i8/96}var ehe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function the(e,t,r,a){t.Borders=[];var s={},i=!1;(e[0].match(Ua)||[]).forEach(function(o){var l=er(o);switch(Wi(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=un(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=un(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function rhe(e,t,r,a){t.Fills=[];var s={},i=!1;(e[0].match(Ua)||[]).forEach(function(o){var l=er(o);switch(Wi(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function nhe(e,t,r,a){t.Fonts=[];var s={},i=!1;(e[0].match(Ua)||[]).forEach(function(o){var l=er(o);switch(Wi(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=rn(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?un(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?un(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?un(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?un(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?un(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?un(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?un(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=Ok[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=un(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var d=tc[s.color.index];s.color.index==81&&(d=tc[1]),d||(d=tc[1]),s.color.rgb=d[0].toString(16)+d[1].toString(16)+d[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Zp(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function ahe(e,t,r){t.NumberFmt=[];for(var a=Ui(lr),s=0;s<a.length;++s)t.NumberFmt[a[s]]=lr[a[s]];var i=e[0].match(Ua);if(i)for(s=0;s<i.length;++s){var o=er(i[s]);switch(Wi(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Pr(rn(o.formatCode)),d=parseInt(o.numFmtId,10);if(t.NumberFmt[d]=l,d>0){if(d>392){for(d=392;d>60&&t.NumberFmt[d]!=null;--d);t.NumberFmt[d]=l}ec(l,d)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}var Tm=["numFmtId","fillId","fontId","borderId","xfId"],Om=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function she(e,t,r){t.CellXf=[];var a,s=!1;(e[0].match(Ua)||[]).forEach(function(i){var o=er(i),l=0;switch(Wi(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],l=0;l<Tm.length;++l)a[Tm[l]]&&(a[Tm[l]]=parseInt(a[Tm[l]],10));for(l=0;l<Om.length;++l)a[Om[l]]&&(a[Om[l]]=un(a[Om[l]]));if(t.NumberFmt&&a.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[l]){a.numFmtId=l;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var d={};o.vertical&&(d.vertical=o.vertical),o.horizontal&&(d.horizontal=o.horizontal),o.textRotation!=null&&(d.textRotation=o.textRotation),o.indent&&(d.indent=o.indent),o.wrapText&&(d.wrapText=un(o.wrapText)),a.alignment=d;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}var ihe=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,d,u){var f={};if(!l)return f;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var m;return(m=l.match(t))&&ahe(m,f,u),(m=l.match(s))&&nhe(m,f,d,u),(m=l.match(a))&&rhe(m,f,d,u),(m=l.match(i))&&the(m,f,d,u),(m=l.match(r))&&she(m,f,u),f}})();function ohe(e,t){var r=e.read_shift(2),a=La(e);return[r,a]}function lhe(e,t,r){var a={};a.sz=e.read_shift(2)/20;var s=yce(e);s.fItalic&&(a.italic=1),s.fCondense&&(a.condense=1),s.fExtend&&(a.extend=1),s.fShadow&&(a.shadow=1),s.fOutline&&(a.outline=1),s.fStrikeout&&(a.strike=1);var i=e.read_shift(2);switch(i===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var l=e.read_shift(1);l>0&&(a.family=l);var d=e.read_shift(1);switch(d>0&&(a.charset=d),e.l++,a.color=xce(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=La(e),a}var che=Ba;function dhe(e,t){var r=e.l+t,a=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:s}}var uhe=Ba;function hhe(e,t,r){var a={};a.NumberFmt=[];for(var s in lr)a.NumberFmt[s]=lr[s];a.CellXf=[],a.Fonts=[];var i=[],o=!1;return Oo(e,function(d,u,f){switch(f){case 44:a.NumberFmt[d[0]]=d[1],ec(d[1],d[0]);break;case 43:a.Fonts.push(d),d.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(d.color.rgb=Zp(t.themeElements.clrScheme[d.color.theme].rgb,d.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(d);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(f),o=!0;break;case 38:i.pop(),o=!1;break;default:if(u.T>0)i.push(f);else if(u.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),a}var fhe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function mhe(e,t,r){t.themeElements.clrScheme=[];var a={};(e[0].match(Ua)||[]).forEach(function(s){var i=er(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[fhe.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function phe(){}function ghe(){}var xhe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,yhe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,vhe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function bhe(e,t,r){t.themeElements={};var a;[["clrScheme",xhe,mhe],["fontScheme",yhe,phe],["fmtScheme",vhe,ghe]].forEach(function(s){if(!(a=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](a,t,r)})}var whe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function l8(e,t){(!e||e.length===0)&&(e=jhe());var r,a={};if(!(r=e.match(whe)))throw new Error("themeElements not found in theme");return bhe(r[0],a,t),a.raw=e,a}function jhe(e,t){var r=[v$];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Nhe(e,t,r){var a=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=a;return}var i=e.slice(e.l);e.l=a;var o;try{o=y$(i,{type:"array"})}catch{return}var l=_s(o,"theme/theme/theme1.xml",!0);if(l)return l8(l,r)}}function khe(e){return e.read_shift(4)}function She(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=_he(e,4);break;case 2:t.xclrValue=G$(e);break;case 3:t.xclrValue=khe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function _he(e,t){return Ba(e,t)}function Ehe(e,t){return Ba(e,t)}function Che(e){var t=e.read_shift(2),r=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=She(e);break;case 6:a[1]=Ehe(e,r);break;case 14:case 15:a[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return a}function Ahe(e,t){var r=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(Che(e,r-e.l));return{ixfe:a,ext:i}}function The(e,t){t.forEach(function(r){r[0]})}function Ohe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:La(e)}}function Phe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function Ihe(e){return e.l+=4,e.read_shift(4)!=0}function Dhe(e,t,r){var a={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return Oo(e,function(d,u,f){switch(f){case 335:a.Types.push({name:d.name});break;case 51:d.forEach(function(m){l==1?a.Cell.push({type:a.Types[m[0]-1].name,index:m[1]}):l==0&&a.Value.push({type:a.Types[m[0]-1].name,index:m[1]})});break;case 337:l=d?1:0;break;case 338:l=2;break;case 35:i.push(f),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!u.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),a}function Mhe(e,t,r){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var s=!1,i=2,o;return e.replace(Ua,function(l){var d=er(l);switch(Wi(d[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:d.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<a.Types.length;++u)a.Types[u].name==d.name&&(o=a.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[d.t-1].name,index:+d.v}):i==0&&a.Value.push({type:a.Types[d.t-1].name,index:+d.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+d.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+d[0]+" in metadata")}return l}),a}function Rhe(e){var t=[];if(!e)return t;var r=1;return(e.match(Ua)||[]).forEach(function(a){var s=er(a);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function Fhe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=or(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function $he(e,t,r){var a=[];return Oo(e,function(i,o,l){switch(l){case 63:a.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),a}function Lhe(e,t,r,a){if(!e)return e;var s=a||{},i=!1;Oo(e,function(l,d,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!d.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function Bhe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}function XP(e,t,r,a){var s=Array.isArray(e),i;t.forEach(function(o){var l=Ja(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var d=Sn(e["!ref"]||"BDWGO1000001:A1");d.s.r>l.r&&(d.s.r=l.r),d.e.r<l.r&&(d.e.r=l.r),d.s.c>l.c&&(d.s.c=l.c),d.e.c<l.c&&(d.e.c=l.c);var u=Cr(d);u!==e["!ref"]&&(e["!ref"]=u)}i.c||(i.c=[]);var f={a:o.author,t:o.t,r:o.r,T:r};o.h&&(f.h=o.h);for(var m=i.c.length-1;m>=0;--m){if(!r&&i.c[m].T)return;r&&!i.c[m].T&&i.c.splice(m,1)}if(r&&a){for(m=0;m<a.length;++m)if(f.a==a[m].id){f.a=a[m].name||f.a;break}}i.c.push(f)})}function Uhe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var d=er(l[0]),u={author:d.authorId&&r[d.authorId]||"sheetjsghost",ref:d.ref,guid:d.guid},f=Ja(d.ref);if(!(t.sheetRows&&t.sheetRows<=f.r)){var m=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!m&&!!m[1]&&Gk(m[1])||{r:"",t:"",h:""};u.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),u.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=p.h),a.push(u)}}}}),a}function Hhe(e,t){var r=[],a=!1,s={},i=0;return e.replace(Ua,function(l,d){var u=er(l);switch(Wi(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=d+l.length;break;case"</text>":s.t=e.slice(i,d).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function qhe(e,t){var r=[],a=!1;return e.replace(Ua,function(i){var o=er(i);switch(Wi(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function zhe(e){var t={};t.iauthor=e.read_shift(4);var r=kc(e);return t.rfx=r.s,t.ref=or(r.s),e.l+=16,t}var Whe=La;function Khe(e,t){var r=[],a=[],s={},i=!1;return Oo(e,function(l,d,u){switch(u){case 632:a.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=a[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!d.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}var Vhe="application/vnd.ms-office.vbaProject";function Ghe(e){var t=Er.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Er.utils.cfb_add(t,s,e.FileIndex[a].content)}}),Er.write(t)}function Yhe(){return{"!type":"dialog"}}function Xhe(){return{"!type":"dialog"}}function Jhe(){return{"!type":"macro"}}function Qhe(){return{"!type":"macro"}}var kd=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,s,i,o){var l=!1,d=!1;i.length==0?d=!0:i.charAt(0)=="["&&(d=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,f=o.length>0?parseInt(o,10)|0:0;return l?f+=t.c:--f,d?u+=t.r:--u,s+(l?"":"$")+aa(f)+(d?"":"$")+_a(u)}return function(s,i){return t=i,s.replace(e,r)}})(),c8=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Zhe=(function(){return function(t,r){return t.replace(c8,function(a,s,i,o,l,d){var u=Hk(o)-(i?0:r.c),f=Uk(d)-(l?0:r.r),m=f==0?"":l?f+1:"["+f+"]",p=u==0?"":i?u+1:"["+u+"]";return s+"R"+m+"C"+p})}})();function d8(e,t){return e.replace(c8,function(r,a,s,i,o,l){return a+(s=="$"?s+i:aa(Hk(i)+t.c))+(o=="$"?o+l:_a(Uk(l)+t.r))})}function efe(e,t,r){var a=xu(t),s=a.s,i=Ja(r),o={r:i.r-s.r,c:i.c-s.c};return d8(e,o)}function tfe(e){return e.length!=1}function JP(e){return e.replace(/_xlfn\./g,"")}function Fn(e){e.l+=1}function ul(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function u8(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return h8(e);r.biff==12&&(a=4)}var s=e.read_shift(a),i=e.read_shift(a),o=ul(e),l=ul(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function h8(e){var t=ul(e),r=ul(e),a=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function rfe(e,t,r){if(r.biff<8)return h8(e);var a=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=ul(e),o=ul(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function f8(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return nfe(e);var a=e.read_shift(r&&r.biff==12?4:2),s=ul(e);return{r:a,c:s[0],cRel:s[1],rRel:s[2]}}function nfe(e){var t=ul(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function afe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function sfe(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return ife(e);var s=e.read_shift(a>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function ife(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:a}}function ofe(e,t,r){var a=(e[e.l++]&96)>>5,s=u8(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,s]}function lfe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=u8(e,i,r);return[a,s,o]}function cfe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function dfe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[a,s]}function ufe(e,t,r){var a=(e[e.l++]&96)>>5,s=rfe(e,t-1,r);return[a,s]}function hfe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function QP(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function ffe(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=a;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function mfe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function pfe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function gfe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function xfe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function m8(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function yfe(e){return e.read_shift(2),m8(e)}function vfe(e){return e.read_shift(2),m8(e)}function bfe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=f8(e,0,r);return[a,s]}function wfe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=sfe(e,0,r);return[a,s]}function jfe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=f8(e,0,r);return[a,s,i]}function Nfe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[k0e[s],x8[s],a]}function kfe(e,t,r){var a=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:Sfe(e);return[s,(i[0]===0?x8:N0e)[i[1]]]}function Sfe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function _fe(e,t,r){e.l+=r&&r.biff==2?3:4}function Efe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function Cfe(e){return e.l++,Sc[e.read_shift(1)]}function Afe(e){return e.l++,e.read_shift(2)}function Tfe(e){return e.l++,e.read_shift(1)!==0}function Ofe(e){return e.l++,Ra(e)}function Pfe(e,t,r){return e.l++,Zf(e,t-1,r)}function Ife(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=An(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Sc[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Ra(e);break;case 2:r[1]=_c(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Dfe(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=a;++i)s.push((r.biff==12?kc:Zg)(e));return s}function Mfe(e,t,r){var a=0,s=0;r.biff==12?(a=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--s==0&&(s=256));for(var i=0,o=[];i!=a&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=Ife(e,r.biff);return o}function Rfe(e,t,r){var a=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,i]}function Ffe(e,t,r){if(r.biff==5)return $fe(e);var a=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[a,s,i]}function $fe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function Lfe(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function Bfe(e,t,r){var a=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function Ufe(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function Hfe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[a,s]}var qfe=Ba,zfe=Ba,Wfe=Ba;function t0(e,t,r){return e.l+=2,[afe(e)]}function Xk(e){return e.l+=6,[]}var Kfe=t0,Vfe=Xk,Gfe=Xk,Yfe=t0;function p8(e){return e.l+=2,[Bn(e),e.read_shift(2)&1]}var Xfe=t0,Jfe=p8,Qfe=Xk,Zfe=t0,e0e=t0,t0e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function r0e(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=t0e[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:a,c:s,C:i}}function n0e(e){return e.l+=2,[e.read_shift(4)]}function a0e(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function s0e(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function i0e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function o0e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function l0e(e){return e.l+=4,[0,0]}var ZP={1:{n:"PtgExp",f:Efe},2:{n:"PtgTbl",f:Wfe},3:{n:"PtgAdd",f:Fn},4:{n:"PtgSub",f:Fn},5:{n:"PtgMul",f:Fn},6:{n:"PtgDiv",f:Fn},7:{n:"PtgPower",f:Fn},8:{n:"PtgConcat",f:Fn},9:{n:"PtgLt",f:Fn},10:{n:"PtgLe",f:Fn},11:{n:"PtgEq",f:Fn},12:{n:"PtgGe",f:Fn},13:{n:"PtgGt",f:Fn},14:{n:"PtgNe",f:Fn},15:{n:"PtgIsect",f:Fn},16:{n:"PtgUnion",f:Fn},17:{n:"PtgRange",f:Fn},18:{n:"PtgUplus",f:Fn},19:{n:"PtgUminus",f:Fn},20:{n:"PtgPercent",f:Fn},21:{n:"PtgParen",f:Fn},22:{n:"PtgMissArg",f:Fn},23:{n:"PtgStr",f:Pfe},26:{n:"PtgSheet",f:a0e},27:{n:"PtgEndSheet",f:s0e},28:{n:"PtgErr",f:Cfe},29:{n:"PtgBool",f:Tfe},30:{n:"PtgInt",f:Afe},31:{n:"PtgNum",f:Ofe},32:{n:"PtgArray",f:hfe},33:{n:"PtgFunc",f:Nfe},34:{n:"PtgFuncVar",f:kfe},35:{n:"PtgName",f:Rfe},36:{n:"PtgRef",f:bfe},37:{n:"PtgArea",f:ofe},38:{n:"PtgMemArea",f:Lfe},39:{n:"PtgMemErr",f:qfe},40:{n:"PtgMemNoMem",f:zfe},41:{n:"PtgMemFunc",f:Bfe},42:{n:"PtgRefErr",f:Ufe},43:{n:"PtgAreaErr",f:cfe},44:{n:"PtgRefN",f:wfe},45:{n:"PtgAreaN",f:ufe},46:{n:"PtgMemAreaN",f:i0e},47:{n:"PtgMemNoMemN",f:o0e},57:{n:"PtgNameX",f:Ffe},58:{n:"PtgRef3d",f:jfe},59:{n:"PtgArea3d",f:lfe},60:{n:"PtgRefErr3d",f:Hfe},61:{n:"PtgAreaErr3d",f:dfe},255:{}},c0e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},d0e={1:{n:"PtgElfLel",f:p8},2:{n:"PtgElfRw",f:Zfe},3:{n:"PtgElfCol",f:Kfe},6:{n:"PtgElfRwV",f:e0e},7:{n:"PtgElfColV",f:Yfe},10:{n:"PtgElfRadical",f:Xfe},11:{n:"PtgElfRadicalS",f:Qfe},13:{n:"PtgElfColS",f:Vfe},15:{n:"PtgElfColSV",f:Gfe},16:{n:"PtgElfRadicalLel",f:Jfe},25:{n:"PtgList",f:r0e},29:{n:"PtgSxName",f:n0e},255:{}},u0e={0:{n:"PtgAttrNoop",f:l0e},1:{n:"PtgAttrSemi",f:xfe},2:{n:"PtgAttrIf",f:pfe},4:{n:"PtgAttrChoose",f:ffe},8:{n:"PtgAttrGoto",f:mfe},16:{n:"PtgAttrSum",f:_fe},32:{n:"PtgAttrBaxcel",f:QP},33:{n:"PtgAttrBaxcel",f:QP},64:{n:"PtgAttrSpace",f:yfe},65:{n:"PtgAttrSpaceSemi",f:vfe},128:{n:"PtgAttrIfError",f:gfe},255:{}};function r0(e,t,r,a){if(a.biff<8)return Ba(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=Mfe(e,0,a),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=Dfe(e,r[o][1],a),i.push(r[o][2]);break;case"PtgExp":a&&a.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(Ba(e,t)),i}function n0(e,t,r){for(var a=e.l+t,s,i,o=[];a!=e.l;)t=a-e.l,i=e[e.l],s=ZP[i]||ZP[c0e[i]],(i===24||i===25)&&(s=(i===24?d0e:u0e)[e[e.l+1]]),!s||!s.f?Ba(e,t):o.push([s.n,s.f(e,t,r)]);return o}function h0e(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],s=[],i=0;i<a.length;++i){var o=a[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var f0e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function m0e(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function g8(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[a[0]][0]){case 357:return s=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return s=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[a[0]][0][3]?(s=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?s:s+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function eI(e,t,r){var a=g8(e,t,r);return a=="#REF"?a:m0e(a,r)}function Da(e,t,r,a,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],d,u,f,m=0,p=0,g,v="";if(!e[0]||!e[0][0])return"";for(var y=-1,w="",k=0,N=e[0].length;k<N;++k){var b=e[0][k];switch(b[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(d=l.pop(),u=l.pop(),y>=0){switch(e[0][y][1][0]){case 0:w=Nn(" ",e[0][y][1][1]);break;case 1:w=Nn("\r",e[0][y][1][1]);break;default:if(w="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}u=u+w,y=-1}l.push(u+f0e[b[0]]+d);break;case"PtgIsect":d=l.pop(),u=l.pop(),l.push(u+" "+d);break;case"PtgUnion":d=l.pop(),u=l.pop(),l.push(u+","+d);break;case"PtgRange":d=l.pop(),u=l.pop(),l.push(u+":"+d);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=Ah(b[1][1],o,s),l.push(Th(f,i));break;case"PtgRefN":f=r?Ah(b[1][1],r,s):b[1][1],l.push(Th(f,i));break;case"PtgRef3d":m=b[1][1],f=Ah(b[1][2],o,s),v=eI(a,m,s),l.push(v+"!"+Th(f,i));break;case"PtgFunc":case"PtgFuncVar":var A=b[1][0],E=b[1][1];A||(A=0),A&=127;var S=A==0?[]:l.slice(-A);l.length-=A,E==="User"&&(E=S.shift()),l.push(E+"("+S.join(",")+")");break;case"PtgBool":l.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(b[1]);break;case"PtgNum":l.push(String(b[1]));break;case"PtgStr":l.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(b[1]);break;case"PtgAreaN":g=DP(b[1][1],r?{s:r}:o,s),l.push(X1(g,s));break;case"PtgArea":g=DP(b[1][1],o,s),l.push(X1(g,s));break;case"PtgArea3d":m=b[1][1],g=b[1][2],v=eI(a,m,s),l.push(v+"!"+X1(g,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=b[1][2];var _=(a.names||[])[p-1]||(a[0]||[])[p],C=_?_.Name:"SH33TJSNAME"+String(p);C&&C.slice(0,6)=="_xlfn."&&!s.xlfn&&(C=C.slice(6)),l.push(C);break;case"PtgNameX":var P=b[1][1];p=b[1][2];var B;if(s.biff<=5)P<0&&(P=-P),a[P]&&(B=a[P][p]);else{var F="";if(((a[P]||[])[0]||[])[0]==14849||(((a[P]||[])[0]||[])[0]==1025?a[P][p]&&a[P][p].itab>0&&(F=a.SheetNames[a[P][p].itab-1]+"!"):F=a.SheetNames[p-1]+"!"),a[P]&&a[P][p])F+=a[P][p].Name;else if(a[0]&&a[0][p])F+=a[0][p].Name;else{var O=(g8(a,P,s)||"").split(";;");O[p-1]?F=O[p-1]:F+="SH33TJSERRX"}l.push(F);break}B||(B={Name:"SH33TJSERRY"}),l.push(B.Name);break;case"PtgParen":var R="(",Q=")";if(y>=0){switch(w="",e[0][y][1][0]){case 2:R=Nn(" ",e[0][y][1][1])+R;break;case 3:R=Nn("\r",e[0][y][1][1])+R;break;case 4:Q=Nn(" ",e[0][y][1][1])+Q;break;case 5:Q=Nn("\r",e[0][y][1][1])+Q;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}l.push(R+l.pop()+Q);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":f={c:b[1][1],r:b[1][0]};var V={c:r.c,r:r.r};if(a.sharedf[or(f)]){var J=a.sharedf[or(f)];l.push(Da(J,o,V,a,s))}else{var ae=!1;for(d=0;d!=a.arrayf.length;++d)if(u=a.arrayf[d],!(f.c<u[0].s.c||f.c>u[0].e.c)&&!(f.r<u[0].s.r||f.r>u[0].e.r)){l.push(Da(u[1],o,V,a,s)),ae=!0;break}ae||l.push(b[1])}break;case"PtgArray":l.push("{"+h0e(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=k;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var L=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&L.indexOf(e[0][k][0])==-1){b=e[0][y];var H=!0;switch(b[1][0]){case 4:H=!1;case 0:w=Nn(" ",b[1][1]);break;case 5:H=!1;case 1:w=Nn("\r",b[1][1]);break;default:if(w="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}l.push((H?w:"")+l.pop()+(H?"":w)),y=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function p0e(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Ba(e,t-2)];var l=n0(e,o,r);return t!==o+s&&(i=r0(e,t-o-s,l,r)),e.l=a,[l,i]}function g0e(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Ba(e,t-2)];var l=n0(e,o,r);return t!==o+s&&(i=r0(e,t-o-s,l,r)),e.l=a,[l,i]}function x0e(e,t,r,a){var s=e.l+t,i=n0(e,a,r),o;return s!==e.l&&(o=r0(e,s-e.l,i,r)),[i,o]}function y0e(e,t,r){var a=e.l+t,s,i=e.read_shift(2),o=n0(e,i,r);return i==65535?[[],Ba(e,t-2)]:(t!==i+2&&(s=r0(e,a-i-2,o,r)),[o,s])}function v0e(e){var t;if(go(e,e.l+6)!==65535)return[Ra(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Z1(e,t,r){var a=e.l+t,s=Ki(e);r.biff==2&&++e.l;var i=v0e(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=g0e(e,a-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function ex(e,t,r){var a=e.read_shift(4),s=n0(e,a,r),i=e.read_shift(4),o=i>0?r0(e,i,s,r):null;return[s,o]}var b0e=ex,tx=ex,w0e=ex,j0e=ex,N0e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},x8={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},k0e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function tI(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function ej(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var Dh={},Sd={};function Mh(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function y8(e,t,r,a,s,i){try{a.cellNF&&(e.z=lr[t])}catch(l){if(a.WTF)throw l}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=fa(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(lr[t]==null&&ec(Sle[t]||"General",t),e.t==="e")e.w=e.w||Sc[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Of(e.v);else if(e.t==="d"){var o=Za(e.v);(o|0)===o?e.w=o.toString(10):e.w=Of(o)}else{if(e.v===void 0)return"";e.w=uc(e.v,Sd)}else e.t==="d"?e.w=Ys(t,Za(e.v),Sd):e.w=Ys(t,e.v,Sd)}catch(l){if(a.WTF)throw l}if(a.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Zp(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Zp(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(a.WTF&&i.Fills)throw l}}}function S0e(e,t){var r=Sn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Cr(r))}var _0e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,E0e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,C0e=/<(?:\w:)?hyperlink [^>]*>/mg,A0e=/"(\w*:\w*)"/,T0e=/<(?:\w:)?col\b[^>]*[\/]?>/g,O0e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,P0e=/<(?:\w:)?pageMargins[^>]*\/>/g,v8=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,I0e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,D0e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function M0e(e,t,r,a,s,i,o){if(!e)return e;a||(a={"!id":{}});var l=t.dense?[]:{},d={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",f="",m=e.match(E0e);m?(u=e.slice(0,m.index),f=e.slice(m.index+m[0].length)):u=f=e;var p=u.match(v8);p?Jk(p[0],l,s,r):(p=u.match(I0e))&&R0e(p[0],p[1]||"",l,s,r);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var v=u.slice(g,g+50).match(A0e);v&&S0e(l,v[1])}var y=u.match(D0e);y&&y[1]&&H0e(y[1],s);var w=[];if(t.cellStyles){var k=u.match(T0e);k&&L0e(w,k)}m&&q0e(m[1],l,t,d,i,o);var N=f.match(O0e);N&&(l["!autofilter"]=B0e(N[0]));var b=[],A=f.match(_0e);if(A)for(g=0;g!=A.length;++g)b[g]=Sn(A[g].slice(A[g].indexOf('"')+1));var E=f.match(C0e);E&&F0e(l,E,a);var S=f.match(P0e);if(S&&(l["!margins"]=$0e(er(S[0]))),!l["!ref"]&&d.e.c>=d.s.c&&d.e.r>=d.s.r&&(l["!ref"]=Cr(d)),t.sheetRows>0&&l["!ref"]){var _=Sn(l["!ref"]);t.sheetRows<=+_.e.r&&(_.e.r=t.sheetRows-1,_.e.r>d.e.r&&(_.e.r=d.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>d.e.c&&(_.e.c=d.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Cr(_))}return w.length>0&&(l["!cols"]=w),b.length>0&&(l["!merges"]=b),l}function Jk(e,t,r,a){var s=er(e);r.Sheets[a]||(r.Sheets[a]={}),s.codeName&&(r.Sheets[a].CodeName=Pr(rn(s.codeName)))}function R0e(e,t,r,a,s){Jk(e.slice(0,e.indexOf(">")),r,a,s)}function F0e(e,t,r){for(var a=Array.isArray(e),s=0;s!=t.length;++s){var i=er(rn(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+Pr(i.location))):(i.Target="#"+Pr(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=Sn(i.ref),d=l.s.r;d<=l.e.r;++d)for(var u=l.s.c;u<=l.e.c;++u){var f=or({c:u,r:d});a?(e[d]||(e[d]=[]),e[d][u]||(e[d][u]={t:"z",v:void 0}),e[d][u].l=i):(e[f]||(e[f]={t:"z",v:void 0}),e[f].l=i)}}}function $0e(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function L0e(e,t){for(var r=!1,a=0;a!=t.length;++a){var s=er(t[a],!0);s.hidden&&(s.hidden=un(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,Yk(s.width)),Zd(s);i<=o;)e[i++]=Sa(s)}}function B0e(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var U0e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function H0e(e,t){t.Views||(t.Views=[{}]),(e.match(U0e)||[]).forEach(function(r,a){var s=er(r);t.Views[a]||(t.Views[a]={}),+s.zoomScale&&(t.Views[a].zoom=+s.zoomScale),un(s.rightToLeft)&&(t.Views[a].RTL=!0)})}var q0e=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=Pf("v"),o=Pf("f");return function(d,u,f,m,p,g){for(var v=0,y="",w=[],k=[],N=0,b=0,A=0,E="",S,_,C=0,P=0,B,F,O=0,R=0,Q=Array.isArray(g.CellXf),V,J=[],ae=[],L=Array.isArray(u),H=[],ce={},z=!1,I=!!f.sheetStubs,Z=d.split(t),te=0,se=Z.length;te!=se;++te){y=Z[te].trim();var be=y.length;if(be!==0){var Ee=0;e:for(v=0;v<be;++v)switch(y[v]){case">":if(y[v-1]!="/"){++v;break e}if(f&&f.cellStyles){if(_=er(y.slice(Ee,v),!0),C=_.r!=null?parseInt(_.r,10):C+1,P=-1,f.sheetRows&&f.sheetRows<C)continue;ce={},z=!1,_.ht&&(z=!0,ce.hpt=parseFloat(_.ht),ce.hpx=Rf(ce.hpt)),_.hidden=="1"&&(z=!0,ce.hidden=!0),_.outlineLevel!=null&&(z=!0,ce.level=+_.outlineLevel),z&&(H[C-1]=ce)}break;case"<":Ee=v;break}if(Ee>=v)break;if(_=er(y.slice(Ee,v),!0),C=_.r!=null?parseInt(_.r,10):C+1,P=-1,!(f.sheetRows&&f.sheetRows<C)){m.s.r>C-1&&(m.s.r=C-1),m.e.r<C-1&&(m.e.r=C-1),f&&f.cellStyles&&(ce={},z=!1,_.ht&&(z=!0,ce.hpt=parseFloat(_.ht),ce.hpx=Rf(ce.hpt)),_.hidden=="1"&&(z=!0,ce.hidden=!0),_.outlineLevel!=null&&(z=!0,ce.level=+_.outlineLevel),z&&(H[C-1]=ce)),w=y.slice(v).split(e);for(var _e=0;_e!=w.length&&w[_e].trim().charAt(0)=="<";++_e);for(w=w.slice(_e),v=0;v!=w.length;++v)if(y=w[v].trim(),y.length!==0){if(k=y.match(r),N=v,b=0,A=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,k!=null&&k.length===2){for(N=0,E=k[1],b=0;b!=E.length&&!((A=E.charCodeAt(b)-64)<1||A>26);++b)N=26*N+A;--N,P=N}else++P;for(b=0;b!=y.length&&y.charCodeAt(b)!==62;++b);if(++b,_=er(y.slice(0,b),!0),_.r||(_.r=or({r:C-1,c:P})),E=y.slice(b),S={t:""},(k=E.match(i))!=null&&k[1]!==""&&(S.v=Pr(k[1])),f.cellFormula){if((k=E.match(o))!=null&&k[1]!==""){if(S.f=Pr(rn(k[1])).replace(/\r\n/g,`
`),f.xlfn||(S.f=JP(S.f)),k[0].indexOf('t="array"')>-1)S.F=(E.match(s)||[])[1],S.F.indexOf(":")>-1&&J.push([Sn(S.F),S.F]);else if(k[0].indexOf('t="shared"')>-1){F=er(k[0]);var me=Pr(rn(k[1]));f.xlfn||(me=JP(me)),ae[parseInt(F.si,10)]=[F,me,_.r]}}else(k=E.match(/<f[^>]*\/>/))&&(F=er(k[0]),ae[F.si]&&(S.f=efe(ae[F.si][1],ae[F.si][2],_.r)));var ye=Ja(_.r);for(b=0;b<J.length;++b)ye.r>=J[b][0].s.r&&ye.r<=J[b][0].e.r&&ye.c>=J[b][0].s.c&&ye.c<=J[b][0].e.c&&(S.F=J[b][1])}if(_.t==null&&S.v===void 0)if(S.f||S.F)S.v=0,S.t="n";else if(I)S.t="z";else continue;else S.t=_.t||"n";switch(m.s.c>P&&(m.s.c=P),m.e.c<P&&(m.e.c=P),S.t){case"n":if(S.v==""||S.v==null){if(!I)continue;S.t="z"}else S.v=parseFloat(S.v);break;case"s":if(typeof S.v>"u"){if(!I)continue;S.t="z"}else B=Dh[parseInt(S.v,10)],S.v=B.t,S.r=B.r,f.cellHTML&&(S.h=B.h);break;case"str":S.t="s",S.v=S.v!=null?rn(S.v):"",f.cellHTML&&(S.h=$k(S.v));break;case"inlineStr":k=E.match(a),S.t="s",k!=null&&(B=Gk(k[1]))?(S.v=B.t,f.cellHTML&&(S.h=B.h)):S.v="";break;case"b":S.v=un(S.v);break;case"d":f.cellDates?S.v=fa(S.v,1):(S.v=Za(fa(S.v,1)),S.t="n");break;case"e":(!f||f.cellText!==!1)&&(S.w=S.v),S.v=B$[S.v];break}if(O=R=0,V=null,Q&&_.s!==void 0&&(V=g.CellXf[_.s],V!=null&&(V.numFmtId!=null&&(O=V.numFmtId),f.cellStyles&&V.fillId!=null&&(R=V.fillId))),y8(S,O,R,f,p,g),f.cellDates&&Q&&S.t=="n"&&gu(lr[O])&&(S.t="d",S.v=Qg(S.v)),_.cm&&f.xlmeta){var qe=(f.xlmeta.Cell||[])[+_.cm-1];qe&&qe.type=="XLDAPR"&&(S.D=!0)}if(L){var G=Ja(_.r);u[G.r]||(u[G.r]=[]),u[G.r][G.c]=S}else u[_.r]=S}}}}H.length>0&&(u["!rows"]=H)}})();function z0e(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}var W0e=kc;function K0e(){}function V0e(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=pce(e),r}function G0e(e){var t=Js(e);return[t]}function Y0e(e){var t=Nc(e);return[t]}function X0e(e){var t=Js(e),r=e.read_shift(1);return[t,r,"b"]}function J0e(e){var t=Nc(e),r=e.read_shift(1);return[t,r,"b"]}function Q0e(e){var t=Js(e),r=e.read_shift(1);return[t,r,"e"]}function Z0e(e){var t=Nc(e),r=e.read_shift(1);return[t,r,"e"]}function eme(e){var t=Js(e),r=e.read_shift(4);return[t,r,"s"]}function tme(e){var t=Nc(e),r=e.read_shift(4);return[t,r,"s"]}function rme(e){var t=Js(e),r=Ra(e);return[t,r,"n"]}function b8(e){var t=Nc(e),r=Ra(e);return[t,r,"n"]}function nme(e){var t=Js(e),r=Wk(e);return[t,r,"n"]}function ame(e){var t=Nc(e),r=Wk(e);return[t,r,"n"]}function sme(e){var t=Js(e),r=qk(e);return[t,r,"is"]}function ime(e){var t=Js(e),r=La(e);return[t,r,"str"]}function ome(e){var t=Nc(e),r=La(e);return[t,r,"str"]}function lme(e,t,r){var a=e.l+t,s=Js(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=tx(e,a-e.l,r);o[3]=Da(l,null,s,r.supbooks,r)}else e.l=a;return o}function cme(e,t,r){var a=e.l+t,s=Js(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=tx(e,a-e.l,r);o[3]=Da(l,null,s,r.supbooks,r)}else e.l=a;return o}function dme(e,t,r){var a=e.l+t,s=Js(e);s.r=r["!row"];var i=Ra(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=tx(e,a-e.l,r);o[3]=Da(l,null,s,r.supbooks,r)}else e.l=a;return o}function ume(e,t,r){var a=e.l+t,s=Js(e);s.r=r["!row"];var i=La(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=tx(e,a-e.l,r);o[3]=Da(l,null,s,r.supbooks,r)}else e.l=a;return o}var hme=kc;function fme(e,t){var r=e.l+t,a=kc(e),s=zk(e),i=La(e),o=La(e),l=La(e);e.l=r;var d={rfx:a,relId:s,loc:i,display:l};return o&&(d.Tooltip=o),d}function mme(){}function pme(e,t,r){var a=e.l+t,s=F$(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=b0e(e,a-e.l,r);o[1]=l}else e.l=a;return o}function gme(e,t,r){var a=e.l+t,s=kc(e),i=[s];if(r.cellFormula){var o=j0e(e,a-e.l,r);i[1]=o,e.l=a}else e.l=a;return i}var xme=["left","right","top","bottom","header","footer"];function yme(e){var t={};return xme.forEach(function(r){t[r]=Ra(e)}),t}function vme(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function bme(){}function wme(){}function jme(e,t,r,a,s,i,o){if(!e)return e;var l=t||{};a||(a={"!id":{}});var d=l.dense?[]:{},u,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},m=!1,p=!1,g,v,y,w,k,N,b,A,E,S=[];l.biff=12,l["!row"]=0;var _=0,C=!1,P=[],B={},F=l.supbooks||s.supbooks||[[]];if(F.sharedf=B,F.arrayf=P,F.SheetNames=s.SheetNames||s.Sheets.map(function(L){return L.name}),!l.supbooks&&(l.supbooks=F,s.Names))for(var O=0;O<s.Names.length;++O)F[0][O+1]=s.Names[O];var R=[],Q=[],V=!1;rg[16]={n:"BrtShortReal",f:b8};var J;if(Oo(e,function(H,ce,z){if(!p)switch(z){case 148:u=H;break;case 0:g=H,l.sheetRows&&l.sheetRows<=g.r&&(p=!0),A=_a(w=g.r),l["!row"]=g.r,(H.hidden||H.hpt||H.level!=null)&&(H.hpt&&(H.hpx=Rf(H.hpt)),Q[H.r]=H);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(v={t:H[2]},H[2]){case"n":v.v=H[1];break;case"s":b=Dh[H[1]],v.v=b.t,v.r=b.r;break;case"b":v.v=!!H[1];break;case"e":v.v=H[1],l.cellText!==!1&&(v.w=Sc[v.v]);break;case"str":v.t="s",v.v=H[1];break;case"is":v.t="s",v.v=H[1].t;break}if((y=o.CellXf[H[0].iStyleRef])&&y8(v,y.numFmtId,null,l,i,o),k=H[0].c==-1?k+1:H[0].c,l.dense?(d[w]||(d[w]=[]),d[w][k]=v):d[aa(k)+A]=v,l.cellFormula){for(C=!1,_=0;_<P.length;++_){var I=P[_];g.r>=I[0].s.r&&g.r<=I[0].e.r&&k>=I[0].s.c&&k<=I[0].e.c&&(v.F=Cr(I[0]),C=!0)}!C&&H.length>3&&(v.f=H[3])}if(f.s.r>g.r&&(f.s.r=g.r),f.s.c>k&&(f.s.c=k),f.e.r<g.r&&(f.e.r=g.r),f.e.c<k&&(f.e.c=k),l.cellDates&&y&&v.t=="n"&&gu(lr[y.numFmtId])){var Z=Xl(v.v);Z&&(v.t="d",v.v=new Date(Z.y,Z.m-1,Z.d,Z.H,Z.M,Z.S,Z.u))}J&&(J.type=="XLDAPR"&&(v.D=!0),J=void 0);break;case 1:case 12:if(!l.sheetStubs||m)break;v={t:"z",v:void 0},k=H[0].c==-1?k+1:H[0].c,l.dense?(d[w]||(d[w]=[]),d[w][k]=v):d[aa(k)+A]=v,f.s.r>g.r&&(f.s.r=g.r),f.s.c>k&&(f.s.c=k),f.e.r<g.r&&(f.e.r=g.r),f.e.c<k&&(f.e.c=k),J&&(J.type=="XLDAPR"&&(v.D=!0),J=void 0);break;case 176:S.push(H);break;case 49:J=((l.xlmeta||{}).Cell||[])[H-1];break;case 494:var te=a["!id"][H.relId];for(te?(H.Target=te.Target,H.loc&&(H.Target+="#"+H.loc),H.Rel=te):H.relId==""&&(H.Target="#"+H.loc),w=H.rfx.s.r;w<=H.rfx.e.r;++w)for(k=H.rfx.s.c;k<=H.rfx.e.c;++k)l.dense?(d[w]||(d[w]=[]),d[w][k]||(d[w][k]={t:"z",v:void 0}),d[w][k].l=H):(N=or({c:k,r:w}),d[N]||(d[N]={t:"z",v:void 0}),d[N].l=H);break;case 426:if(!l.cellFormula)break;P.push(H),E=l.dense?d[w][k]:d[aa(k)+A],E.f=Da(H[1],f,{r:g.r,c:k},F,l),E.F=Cr(H[0]);break;case 427:if(!l.cellFormula)break;B[or(H[0].s)]=H[1],E=l.dense?d[w][k]:d[aa(k)+A],E.f=Da(H[1],f,{r:g.r,c:k},F,l);break;case 60:if(!l.cellStyles)break;for(;H.e>=H.s;)R[H.e--]={width:H.w/256,hidden:!!(H.flags&1),level:H.level},V||(V=!0,Yk(H.w/256)),Zd(R[H.e+1]);break;case 161:d["!autofilter"]={ref:Cr(H)};break;case 476:d["!margins"]=H;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),H.name&&(s.Sheets[r].CodeName=H.name),(H.above||H.left)&&(d["!outline"]={above:H.above,left:H.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),H.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:m=!0;break;case 36:m=!1;break;case 37:m=!0;break;case 38:m=!1;break;default:if(!ce.T){if(!m||l.WTF)throw new Error("Unexpected record 0x"+z.toString(16))}}},l),delete l.supbooks,delete l["!row"],!d["!ref"]&&(f.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(d["!ref"]=Cr(u||f)),l.sheetRows&&d["!ref"]){var ae=Sn(d["!ref"]);l.sheetRows<=+ae.e.r&&(ae.e.r=l.sheetRows-1,ae.e.r>f.e.r&&(ae.e.r=f.e.r),ae.e.r<ae.s.r&&(ae.s.r=ae.e.r),ae.e.c>f.e.c&&(ae.e.c=f.e.c),ae.e.c<ae.s.c&&(ae.s.c=ae.e.c),d["!fullref"]=d["!ref"],d["!ref"]=Cr(ae))}return S.length>0&&(d["!merges"]=S),R.length>0&&(d["!cols"]=R),Q.length>0&&(d["!rows"]=Q),d}function Nme(e){var t=[],r=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=Pr((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[t,s,a]}function kme(e,t,r,a,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,d=0,u="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(m){var p=Nme(m);f.s.r=f.s.c=0,f.e.c=l,u=aa(l),p[0].forEach(function(g,v){o[u+_a(v)]={t:"n",v:g,z:p[1]},d=v}),f.e.r<d&&(f.e.r=d),++l}),l>0&&(o["!ref"]=Cr(f)),o}function Sme(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(v8);return l&&Jk(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function _me(e,t){e.l+=10;var r=La(e);return{name:r}}function Eme(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Oo(e,function(d,u,f){switch(f){case 550:i["!rel"]=d;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),d.name&&(s.Sheets[r].CodeName=d.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},t),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var w8=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Cme=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Ame=[],Tme=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function rI(e,t){for(var r=0;r!=e.length;++r)for(var a=e[r],s=0;s!=t.length;++s){var i=t[s];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=un(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function nI(e,t){for(var r=0;r!=t.length;++r){var a=t[r];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=un(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function j8(e){nI(e.WBProps,w8),nI(e.CalcPr,Tme),rI(e.WBView,Cme),rI(e.Sheets,Ame),Sd.date1904=un(e.WBProps.date1904)}var Ome="][*?/\\".split("");function Pme(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Ome.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var Ime=/<\w+:workbook/;function Dme(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,s="xmlns",i={},o=0;if(e.replace(Ua,function(d,u){var f=er(d);switch(Wi(f[0])){case"<?xml":break;case"<workbook":d.match(Ime)&&(s="xmlns"+d.match(/<(\w+):/)[1]),r.xmlns=f[s];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":w8.forEach(function(m){if(f[m[0]]!=null)switch(m[2]){case"bool":r.WBProps[m[0]]=un(f[m[0]]);break;case"int":r.WBProps[m[0]]=parseInt(f[m[0]],10);break;default:r.WBProps[m[0]]=f[m[0]]}}),f.codeName&&(r.WBProps.CodeName=rn(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=Pr(rn(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=rn(f.name),f.comment&&(i.Comment=f.comment),f.localSheetId&&(i.Sheet=+f.localSheetId),un(f.hidden||"0")&&(i.Hidden=!0),o=u+d.length;break;case"</definedName>":i.Ref=Pr(rn(e.slice(o,u))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return d}),Qle.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return j8(r),r}function Mme(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=JN(e),r.name=La(e),r}function Rme(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?La(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function Fme(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function $me(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=gce(e),o=w0e(e,0,r),l=zk(e);e.l=a;var d={Name:i,Ptg:o};return s<268435455&&(d.Sheet=s),l&&(d.Comment=l),d}function Lme(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],rg[16]={n:"BrtFRTArchID$",f:Fme},Oo(e,function(d,u,f){switch(f){case 156:o.SheetNames.push(d.name),r.Sheets.push(d);break;case 153:r.WBProps=d;break;case 39:d.Sheet!=null&&(t.SID=d.Sheet),d.Ref=Da(d.Ptg,null,null,o,t),delete t.SID,delete d.Ptg,i.push(d);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([f,d]):o[0]=[f,d],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(d),o.XTI=o.XTI.concat(d);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(f),s=!0;break;case 36:a.pop(),s=!1;break;case 37:a.push(f),s=!0;break;case 38:a.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},t),j8(r),r.Names=i,r.supbooks=o,r}function Bme(e,t,r){return t.slice(-4)===".bin"?Lme(e,r):Dme(e,r)}function Ume(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?jme(e,a,r,s,i,o,l):M0e(e,a,r,s,i,o,l)}function Hme(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?Eme(e,a,r,s,i):Sme(e,a,r,s,i)}function qme(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?Jhe():Qhe()}function zme(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?Yhe():Xhe()}function Wme(e,t,r,a){return t.slice(-4)===".bin"?hhe(e,r,a):ihe(e,r,a)}function Kme(e,t,r){return l8(e,r)}function Vme(e,t,r){return t.slice(-4)===".bin"?Cue(e,r):_ue(e,r)}function Gme(e,t,r){return t.slice(-4)===".bin"?Khe(e,r):Uhe(e,r)}function Yme(e,t,r){return t.slice(-4)===".bin"?$he(e):Rhe(e)}function Xme(e,t,r,a){return r.slice(-4)===".bin"?Lhe(e,t,r,a):void 0}function Jme(e,t,r){return t.slice(-4)===".bin"?Dhe(e,t,r):Mhe(e,t,r)}var N8=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,k8=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function si(e,t){var r=e.split(/\s+/),a=[];if(a[0]=r[0],r.length===1)return a;var s=e.match(N8),i,o,l,d;if(s)for(d=0;d!=s.length;++d)i=s[d].match(k8),(o=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),a[l]=i[2].slice(1,i[2].length-1));return a}function Qme(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var a=e.match(N8),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(k8),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var Rh;function Zme(e,t){var r=Rh[e]||Pr(e);return r==="General"?uc(t):Ys(r,t)}function epe(e,t,r,a){var s=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=un(a);break;case"i2":case"int":s=parseInt(a,10);break;case"r4":case"float":s=parseFloat(a);break;case"date":case"dateTime.tz":s=fa(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Pr(t)]=s}function tpe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Sc[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Of(e.v):e.w=uc(e.v):e.w=Zme(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var a=Rh[t]||t||"General";if(r.cellNF&&(e.z=a),r.cellDates&&e.t=="n"&&gu(a)){var s=Xl(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function rpe(e,t,r){if(r.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=ehe[a.Pattern]||a.Pattern)}e[t.ID]=t}function npe(e,t,r,a,s,i,o,l,d,u){var f="General",m=a.StyleID,p={};u=u||{};var g=[],v=0;for(m===void 0&&l&&(m=l.StyleID),m===void 0&&o&&(m=o.StyleID);i[m]!==void 0&&(i[m].nf&&(f=i[m].nf),i[m].Interior&&g.push(i[m].Interior),!!i[m].Parent);)m=i[m].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=un(e);break;case"String":a.t="s",a.r=SP(Pr(e)),a.v=e.indexOf("<")>-1?Pr(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(fa(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),a.v!==a.v?a.v=Pr(e):a.v<60&&(a.v=a.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=B$[e],u.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=SP(t||e));break}if(tpe(a,f,u),u.cellFormula!==!1)if(a.Formula){var y=Pr(a.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),a.f=kd(y,s),delete a.Formula,a.ArrayRange=="RC"?a.F=kd("RC:RC",s):a.ArrayRange&&(a.F=kd(a.ArrayRange,s),d.push([Sn(a.F),a.F]))}else for(v=0;v<d.length;++v)s.r>=d[v][0].s.r&&s.r<=d[v][0].e.r&&s.c>=d[v][0].s.c&&s.c<=d[v][0].e.c&&(a.F=d[v][1]);u.cellStyles&&(g.forEach(function(w){!p.patternType&&w.patternType&&(p.patternType=w.patternType)}),a.s=p),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function ape(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function tj(e,t){var r=t||{};h$();var a=mh(Lk(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(a=rn(a));var s=a.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=Sa(r);return o.type="string",Df.to_workbook(a,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ke){s.indexOf("<"+ke)>=0&&(i=!0)}),i)return fpe(a,r);Rh={"General Number":"General","General Date":lr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":lr[15],"Short Date":lr[14],"Long Time":lr[19],"Medium Time":lr[18],"Short Time":lr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:lr[2],Standard:lr[4],Percent:lr[10],Scientific:lr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,d=[],u,f={},m=[],p=r.dense?[]:{},g="",v={},y={},w=si('<Data ss:Type="String">'),k=0,N=0,b=0,A={s:{r:2e6,c:2e6},e:{r:0,c:0}},E={},S={},_="",C=0,P=[],B={},F={},O=0,R=[],Q=[],V={},J=[],ae,L=!1,H=[],ce=[],z={},I=0,Z=0,te={Sheets:[],WBProps:{date1904:!1}},se={};If.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var be="";l=If.exec(a);)switch(l[3]=(be=l[3]).toLowerCase()){case"data":if(be=="data"){if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&d.push([l[3],!0]);break}if(d[d.length-1][1])break;l[1]==="/"?npe(a.slice(k,l.index),_,w,d[d.length-1][0]=="comment"?V:v,{c:N,r:b},E,J[N],y,H,r):(_="",w=si(l[0]),k=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(Q.length>0&&(v.c=Q),(!r.sheetRows||r.sheetRows>b)&&v.v!==void 0&&(r.dense?(p[b]||(p[b]=[]),p[b][N]=v):p[aa(N)+_a(b)]=v),v.HRef&&(v.l={Target:Pr(v.HRef)},v.HRefScreenTip&&(v.l.Tooltip=v.HRefScreenTip),delete v.HRef,delete v.HRefScreenTip),(v.MergeAcross||v.MergeDown)&&(I=N+(parseInt(v.MergeAcross,10)|0),Z=b+(parseInt(v.MergeDown,10)|0),P.push({s:{c:N,r:b},e:{c:I,r:Z}})),!r.sheetStubs)v.MergeAcross?N=I+1:++N;else if(v.MergeAcross||v.MergeDown){for(var Ee=N;Ee<=I;++Ee)for(var _e=b;_e<=Z;++_e)(Ee>N||_e>b)&&(r.dense?(p[_e]||(p[_e]=[]),p[_e][Ee]={t:"z"}):p[aa(Ee)+_a(_e)]={t:"z"});N=I+1}else++N;else v=Qme(l[0]),v.Index&&(N=+v.Index-1),N<A.s.c&&(A.s.c=N),N>A.e.c&&(A.e.c=N),l[0].slice(-2)==="/>"&&++N,Q=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(b<A.s.r&&(A.s.r=b),b>A.e.r&&(A.e.r=b),l[0].slice(-2)==="/>"&&(y=si(l[0]),y.Index&&(b=+y.Index-1)),N=0,++b):(y=si(l[0]),y.Index&&(b=+y.Index-1),z={},(y.AutoFitHeight=="0"||y.Height)&&(z.hpx=parseInt(y.Height,10),z.hpt=o8(z.hpx),ce[b]=z),y.Hidden=="1"&&(z.hidden=!0,ce[b]=z));break;case"worksheet":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));m.push(g),A.s.r<=A.e.r&&A.s.c<=A.e.c&&(p["!ref"]=Cr(A),r.sheetRows&&r.sheetRows<=A.e.r&&(p["!fullref"]=p["!ref"],A.e.r=r.sheetRows-1,p["!ref"]=Cr(A))),P.length&&(p["!merges"]=P),J.length>0&&(p["!cols"]=J),ce.length>0&&(p["!rows"]=ce),f[g]=p}else A={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=N=0,d.push([l[3],!1]),u=si(l[0]),g=Pr(u.Name),p=r.dense?[]:{},P=[],H=[],ce=[],se={name:g,Hidden:0},te.Sheets.push(se);break;case"table":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;d.push([l[3],!1]),J=[],L=!1}break;case"style":l[1]==="/"?rpe(E,S,r):S=si(l[0]);break;case"numberformat":S.nf=Pr(si(l[0]).Format||"General"),Rh[S.nf]&&(S.nf=Rh[S.nf]);for(var me=0;me!=392&&lr[me]!=S.nf;++me);if(me==392){for(me=57;me!=392;++me)if(lr[me]==null){ec(S.nf,me);break}}break;case"column":if(d[d.length-1][0]!=="table")break;if(ae=si(l[0]),ae.Hidden&&(ae.hidden=!0,delete ae.Hidden),ae.Width&&(ae.wpx=parseInt(ae.Width,10)),!L&&ae.wpx>10){L=!0,Va=s8;for(var ye=0;ye<J.length;++ye)J[ye]&&Zd(J[ye])}L&&Zd(ae),J[ae.Index-1||J.length]=ae;for(var qe=0;qe<+ae.Span;++qe)J[J.length]=Sa(ae);break;case"namedrange":if(l[1]==="/")break;te.Names||(te.Names=[]);var G=er(l[0]),He={Name:G.Name,Ref:kd(G.RefersTo.slice(1),{r:0,c:0})};te.Sheets.length>0&&(He.Sheet=te.Sheets.length-1),te.Names.push(He);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?_+=a.slice(C,l.index):C=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;S.Interior=si(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?Uce(B,be,a.slice(O,l.index)):O=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else d.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));ape(V),Q.push(V)}else d.push([l[3],!1]),u=si(l[0]),V={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Ke=si(l[0]);p["!autofilter"]={ref:kd(Ke.Range).replace(/\$/g,"")},d.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&d.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&d.push([l[3],!0]);break;case"null":break;default:if(d.length==0&&l[3]=="document"||d.length==0&&l[3]=="uof")return cI(a,r);var ut=!0;switch(d[d.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ut=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ut=!1}break;case"excelworkbook":switch(l[3]){case"date1904":te.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ut=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ut=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(a.slice(O,l.index)){case"SheetHidden":se.Hidden=1;break;case"SheetVeryHidden":se.Hidden=2;break}else O=l.index+l[0].length;break;case"header":p["!margins"]||Mh(p["!margins"]={},"xlml"),isNaN(+er(l[0]).Margin)||(p["!margins"].header=+er(l[0]).Margin);break;case"footer":p["!margins"]||Mh(p["!margins"]={},"xlml"),isNaN(+er(l[0]).Margin)||(p["!margins"].footer=+er(l[0]).Margin);break;case"pagemargins":var ze=er(l[0]);p["!margins"]||Mh(p["!margins"]={},"xlml"),isNaN(+ze.Top)||(p["!margins"].top=+ze.Top),isNaN(+ze.Left)||(p["!margins"].left=+ze.Left),isNaN(+ze.Right)||(p["!margins"].right=+ze.Right),isNaN(+ze.Bottom)||(p["!margins"].bottom=+ze.Bottom);break;case"displayrighttoleft":te.Views||(te.Views=[]),te.Views[0]||(te.Views[0]={}),te.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ut=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ut=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ut=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ut=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ut=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ut=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ut=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ut=!1}break;case"smarttags":break;default:ut=!1;break}if(ut||l[3].match(/!\[CDATA/))break;if(!d[d.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+d.join("|");if(d[d.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?epe(F,be,R,a.slice(O,l.index)):(R=l,O=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+d.join("|")}var Pe={};return!r.bookSheets&&!r.bookProps&&(Pe.Sheets=f),Pe.SheetNames=m,Pe.Workbook=te,Pe.SSF=Sa(lr),Pe.Props=B,Pe.Custprops=F,Pe}function t2(e,t){switch(eS(t=t||{}),t.type||"base64"){case"base64":return tj(As(e),t);case"binary":case"buffer":case"file":return tj(e,t);case"array":return tj(jc(e),t)}}function spe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=vce(r),r.length-r.l<=4)return t;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=bce(r),a=r.read_shift(4),a==0||a>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var ipe=[60,1084,2066,2165,2175];function ope(e,t,r,a,s){var i=a,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var d=go(r,r.l),u=r2[d],f=0;u!=null&&ipe.indexOf(d)>-1;)i=go(r,r.l+2),f=r.l+4,d==2066?f+=4:(d==2165||d==2175)&&(f+=12),l=r.slice(f,r.l+4+i),o.push(l),r.l+=4+i,u=r2[d=go(r,r.l)];var m=Zo(o);wa(m,0);var p=0;m.lens=[];for(var g=0;g<o.length;++g)m.lens.push(p),p+=o[g].length;if(m.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+m.length+" < "+a;return t.f(m,m.length,s)}function Ai(e,t,r){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=lr[a])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Sc[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Of(e.v):e.w=uc(e.v):e.w=Ys(a,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&a&&e.t=="n"&&gu(lr[a]||String(a))){var s=Xl(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Pm(e,t,r){return{v:e,ixfe:t,t:r}}function lpe(e,t){var r={opts:{}},a={},s=t.dense?[]:{},i={},o={},l=null,d=[],u="",f={},m,p="",g,v,y,w,k={},N=[],b,A,E=[],S=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},C={},P=function(nt){return nt<8?tc[nt]:nt<64&&S[nt-8]||tc[nt]},B=function(nt,Bt,$e){var De=Bt.XF.data;if(!(!De||!De.patternType||!$e||!$e.cellStyles)){Bt.s={},Bt.s.patternType=De.patternType;var re;(re=Mf(P(De.icvFore)))&&(Bt.s.fgColor={rgb:re}),(re=Mf(P(De.icvBack)))&&(Bt.s.bgColor={rgb:re})}},F=function(nt,Bt,$e){if(!(z>1)&&!($e.sheetRows&&nt.r>=$e.sheetRows)){if($e.cellStyles&&Bt.XF&&Bt.XF.data&&B(nt,Bt,$e),delete Bt.ixfe,delete Bt.XF,m=nt,p=or(nt),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),nt.r<o.s.r&&(o.s.r=nt.r),nt.c<o.s.c&&(o.s.c=nt.c),nt.r+1>o.e.r&&(o.e.r=nt.r+1),nt.c+1>o.e.c&&(o.e.c=nt.c+1),$e.cellFormula&&Bt.f){for(var De=0;De<N.length;++De)if(!(N[De][0].s.c>nt.c||N[De][0].s.r>nt.r)&&!(N[De][0].e.c<nt.c||N[De][0].e.r<nt.r)){Bt.F=Cr(N[De][0]),(N[De][0].s.c!=nt.c||N[De][0].s.r!=nt.r)&&delete Bt.f,Bt.f&&(Bt.f=""+Da(N[De][1],o,nt,H,O));break}}$e.dense?(s[nt.r]||(s[nt.r]=[]),s[nt.r][nt.c]=Bt):s[p]=Bt}},O={enc:!1,sbcch:0,snames:[],sharedf:k,arrayf:N,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(O.password=t.password);var R,Q=[],V=[],J=[],ae=[],L=!1,H=[];H.SheetNames=O.snames,H.sharedf=O.sharedf,H.arrayf=O.arrayf,H.names=[],H.XTI=[];var ce=0,z=0,I=0,Z=[],te=[],se;O.codepage=1200,xi(1200);for(var be=!1;e.l<e.length-1;){var Ee=e.l,_e=e.read_shift(2);if(_e===0&&ce===10)break;var me=e.l===e.length?0:e.read_shift(2),ye=r2[_e];if(ye&&ye.f){if(t.bookSheets&&ce===133&&_e!==133)break;if(ce=_e,ye.r===2||ye.r==12){var qe=e.read_shift(2);if(me-=2,!O.enc&&qe!==_e&&((qe&255)<<8|qe>>8)!==_e)throw new Error("rt mismatch: "+qe+"!="+_e);ye.r==12&&(e.l+=10,me-=10)}var G={};if(_e===10?G=ye.f(e,me,O):G=ope(_e,ye,e,me,O),z==0&&[9,521,1033,2057].indexOf(ce)===-1)continue;switch(_e){case 34:r.opts.Date1904=_.WBProps.date1904=G;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(O.enc||(e.l=0),O.enc=G,!t.password)throw new Error("File is password-protected");if(G.valid==null)throw new Error("Encryption scheme unsupported");if(!G.valid)throw new Error("Password is incorrect");break;case 92:O.lastuser=G;break;case 66:var He=Number(G);switch(He){case 21010:He=1200;break;case 32768:He=1e4;break;case 32769:He=1252;break}xi(O.codepage=He),be=!0;break;case 317:O.rrtabid=G;break;case 25:O.winlocked=G;break;case 439:r.opts.RefreshAll=G;break;case 12:r.opts.CalcCount=G;break;case 16:r.opts.CalcDelta=G;break;case 17:r.opts.CalcIter=G;break;case 13:r.opts.CalcMode=G;break;case 14:r.opts.CalcPrecision=G;break;case 95:r.opts.CalcSaveRecalc=G;break;case 15:O.CalcRefMode=G;break;case 2211:r.opts.FullCalc=G;break;case 129:G.fDialog&&(s["!type"]="dialog"),G.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),G.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:E.push(G);break;case 430:H.push([G]),H[H.length-1].XTI=[];break;case 35:case 547:H[H.length-1].push(G);break;case 24:case 536:se={Name:G.Name,Ref:Da(G.rgce,o,null,H,O)},G.itab>0&&(se.Sheet=G.itab-1),H.names.push(se),H[0]||(H[0]=[],H[0].XTI=[]),H[H.length-1].push(G),G.Name=="_xlnm._FilterDatabase"&&G.itab>0&&G.rgce&&G.rgce[0]&&G.rgce[0][0]&&G.rgce[0][0][0]=="PtgArea3d"&&(te[G.itab-1]={ref:Cr(G.rgce[0][0][1][2])});break;case 22:O.ExternCount=G;break;case 23:H.length==0&&(H[0]=[],H[0].XTI=[]),H[H.length-1].XTI=H[H.length-1].XTI.concat(G),H.XTI=H.XTI.concat(G);break;case 2196:if(O.biff<8)break;se!=null&&(se.Comment=G[1]);break;case 18:s["!protect"]=G;break;case 19:G!==0&&O.WTF&&console.error("Password verifier: "+G);break;case 133:i[G.pos]=G,O.snames.push(G.name);break;case 10:{if(--z)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=Cr(o),t.sheetRows&&t.sheetRows<=o.e.r){var Ke=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Cr(o),o.e.r=Ke}o.e.r++,o.e.c++}Q.length>0&&(s["!merges"]=Q),V.length>0&&(s["!objects"]=V),J.length>0&&(s["!cols"]=J),ae.length>0&&(s["!rows"]=ae),_.Sheets.push(C)}u===""?f=s:a[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(O.biff===8&&(O.biff={9:2,521:3,1033:4}[_e]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[G.BIFFVer]||8),O.biffguess=G.BIFFVer==0,G.BIFFVer==0&&G.dt==4096&&(O.biff=5,be=!0,xi(O.codepage=28591)),O.biff==8&&G.BIFFVer==0&&G.dt==16&&(O.biff=2),z++)break;if(s=t.dense?[]:{},O.biff<8&&!be&&(be=!0,xi(O.codepage=t.codepage||1252)),O.biff<5||G.BIFFVer==0&&G.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ut={pos:e.l-me,name:u};i[ut.pos]=ut,O.snames.push(u)}else u=(i[Ee]||{name:""}).name;G.dt==32&&(s["!type"]="chart"),G.dt==64&&(s["!type"]="macro"),Q=[],V=[],O.arrayf=N=[],J=[],ae=[],L=!1,C={Hidden:(i[Ee]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[G.r]||[])[G.c]:s[or({c:G.c,r:G.r})])&&++G.c,b={ixfe:G.ixfe,XF:E[G.ixfe]||{},v:G.val,t:"n"},I>0&&(b.z=Z[b.ixfe>>8&63]),Ai(b,t,r.opts.Date1904),F({c:G.c,r:G.r},b,t);break;case 5:case 517:b={ixfe:G.ixfe,XF:E[G.ixfe],v:G.val,t:G.t},I>0&&(b.z=Z[b.ixfe>>8&63]),Ai(b,t,r.opts.Date1904),F({c:G.c,r:G.r},b,t);break;case 638:b={ixfe:G.ixfe,XF:E[G.ixfe],v:G.rknum,t:"n"},I>0&&(b.z=Z[b.ixfe>>8&63]),Ai(b,t,r.opts.Date1904),F({c:G.c,r:G.r},b,t);break;case 189:for(var ze=G.c;ze<=G.C;++ze){var Pe=G.rkrec[ze-G.c][0];b={ixfe:Pe,XF:E[Pe],v:G.rkrec[ze-G.c][1],t:"n"},I>0&&(b.z=Z[b.ixfe>>8&63]),Ai(b,t,r.opts.Date1904),F({c:ze,r:G.r},b,t)}break;case 6:case 518:case 1030:{if(G.val=="String"){l=G;break}if(b=Pm(G.val,G.cell.ixfe,G.tt),b.XF=E[b.ixfe],t.cellFormula){var ke=G.formula;if(ke&&ke[0]&&ke[0][0]&&ke[0][0][0]=="PtgExp"){var Xe=ke[0][0][1][0],We=ke[0][0][1][1],ct=or({r:Xe,c:We});k[ct]?b.f=""+Da(G.formula,o,G.cell,H,O):b.F=((t.dense?(s[Xe]||[])[We]:s[ct])||{}).F}else b.f=""+Da(G.formula,o,G.cell,H,O)}I>0&&(b.z=Z[b.ixfe>>8&63]),Ai(b,t,r.opts.Date1904),F(G.cell,b,t),l=G}break;case 7:case 519:if(l)l.val=G,b=Pm(G,l.cell.ixfe,"s"),b.XF=E[b.ixfe],t.cellFormula&&(b.f=""+Da(l.formula,o,l.cell,H,O)),I>0&&(b.z=Z[b.ixfe>>8&63]),Ai(b,t,r.opts.Date1904),F(l.cell,b,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{N.push(G);var Wt=or(G[0].s);if(g=t.dense?(s[G[0].s.r]||[])[G[0].s.c]:s[Wt],t.cellFormula&&g){if(!l||!Wt||!g)break;g.f=""+Da(G[1],o,G[0],H,O),g.F=Cr(G[0])}}break;case 1212:{if(!t.cellFormula)break;if(p){if(!l)break;k[or(l.cell)]=G[0],g=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[or(l.cell)],(g||{}).f=""+Da(G[0],o,m,H,O)}}break;case 253:b=Pm(d[G.isst].t,G.ixfe,"s"),d[G.isst].h&&(b.h=d[G.isst].h),b.XF=E[b.ixfe],I>0&&(b.z=Z[b.ixfe>>8&63]),Ai(b,t,r.opts.Date1904),F({c:G.c,r:G.r},b,t);break;case 513:t.sheetStubs&&(b={ixfe:G.ixfe,XF:E[G.ixfe],t:"z"},I>0&&(b.z=Z[b.ixfe>>8&63]),Ai(b,t,r.opts.Date1904),F({c:G.c,r:G.r},b,t));break;case 190:if(t.sheetStubs)for(var Ut=G.c;Ut<=G.C;++Ut){var Vt=G.ixfe[Ut-G.c];b={ixfe:Vt,XF:E[Vt],t:"z"},I>0&&(b.z=Z[b.ixfe>>8&63]),Ai(b,t,r.opts.Date1904),F({c:Ut,r:G.r},b,t)}break;case 214:case 516:case 4:b=Pm(G.val,G.ixfe,"s"),b.XF=E[b.ixfe],I>0&&(b.z=Z[b.ixfe>>8&63]),Ai(b,t,r.opts.Date1904),F({c:G.c,r:G.r},b,t);break;case 0:case 512:z===1&&(o=G);break;case 252:d=G;break;case 1054:if(O.biff==4){Z[I++]=G[1];for(var Ar=0;Ar<I+163&&lr[Ar]!=G[1];++Ar);Ar>=163&&ec(G[1],I+163)}else ec(G[1],G[0]);break;case 30:{Z[I++]=G;for(var ln=0;ln<I+163&&lr[ln]!=G;++ln);ln>=163&&ec(G,I+163)}break;case 229:Q=Q.concat(G);break;case 93:V[G.cmo[0]]=O.lastobj=G;break;case 438:O.lastobj.TxO=G;break;case 127:O.lastobj.ImData=G;break;case 440:for(w=G[0].s.r;w<=G[0].e.r;++w)for(y=G[0].s.c;y<=G[0].e.c;++y)g=t.dense?(s[w]||[])[y]:s[or({c:y,r:w})],g&&(g.l=G[1]);break;case 2048:for(w=G[0].s.r;w<=G[0].e.r;++w)for(y=G[0].s.c;y<=G[0].e.c;++y)g=t.dense?(s[w]||[])[y]:s[or({c:y,r:w})],g&&g.l&&(g.l.Tooltip=G[1]);break;case 28:{if(O.biff<=5&&O.biff>=2)break;g=t.dense?(s[G[0].r]||[])[G[0].c]:s[or(G[0])];var Xr=V[G[2]];g||(t.dense?(s[G[0].r]||(s[G[0].r]=[]),g=s[G[0].r][G[0].c]={t:"z"}):g=s[or(G[0])]={t:"z"},o.e.r=Math.max(o.e.r,G[0].r),o.s.r=Math.min(o.s.r,G[0].r),o.e.c=Math.max(o.e.c,G[0].c),o.s.c=Math.min(o.s.c,G[0].c)),g.c||(g.c=[]),v={a:G[1],t:Xr.TxO.t},g.c.push(v)}break;case 2173:The(E[G.ixfe],G.ext);break;case 125:{if(!O.cellStyles)break;for(;G.e>=G.s;)J[G.e--]={width:G.w/256,level:G.level||0,hidden:!!(G.flags&1)},L||(L=!0,Yk(G.w/256)),Zd(J[G.e+1])}break;case 520:{var Ft={};G.level!=null&&(ae[G.r]=Ft,Ft.level=G.level),G.hidden&&(ae[G.r]=Ft,Ft.hidden=!0),G.hpt&&(ae[G.r]=Ft,Ft.hpt=G.hpt,Ft.hpx=Rf(G.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Mh(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[_e]]=G;break;case 161:s["!margins"]||Mh(s["!margins"]={}),s["!margins"].header=G.header,s["!margins"].footer=G.footer;break;case 574:G.RTL&&(_.Views[0].RTL=!0);break;case 146:S=G;break;case 2198:R=G;break;case 140:A=G;break;case 442:u?C.CodeName=G||C.name:_.WBProps.CodeName=G||"ThisWorkbook";break}}else ye||console.error("Missing Info for XLS Record 0x"+_e.toString(16)),e.l+=me}return r.SheetNames=Ui(i).sort(function(ir,nt){return Number(ir)-Number(nt)}).map(function(ir){return i[ir].name}),t.bookSheets||(r.Sheets=a),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&te.forEach(function(ir,nt){r.Sheets[r.SheetNames[nt]]["!autofilter"]=ir}),r.Strings=d,r.SSF=Sa(lr),O.enc&&(r.Encryption=O.enc),R&&(r.Themes=R),r.Metadata={},A!==void 0&&(r.Metadata.Country=A),H.names.length>0&&(_.Names=H.names),r.Workbook=_,r}var aI={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function cpe(e,t,r){var a=Er.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var s=UP(a,_ce,aI.DSI);for(var i in s)t[i]=s[i]}catch(u){if(r.WTF)throw u}var o=Er.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=UP(o,Ece,aI.SI);for(var d in l)t[d]==null&&(t[d]=l[d])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(H$(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function S8(e,t){t||(t={}),eS(t),e$(),t.codepage&&Pk(t.codepage);var r,a;if(e.FullPaths){if(Er.find(e,"/encryption"))throw new Error("File is password-protected");r=Er.find(e,"!CompObj"),a=Er.find(e,"/Workbook")||Er.find(e,"/Book")}else{switch(t.type){case"base64":e=pi(As(e));break;case"binary":e=pi(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}wa(e,0),a={content:e}}var s,i;if(r&&spe(r),t.bookProps&&!t.bookSheets)s={};else{var o=kr?"buffer":"array";if(a&&a.content)s=lpe(a.content,t);else if((i=Er.find(e,"PerfectOffice_MAIN"))&&i.content)s=Ih.to_workbook(i.content,(t.type=o,t));else if((i=Er.find(e,"NativeContent_MAIN"))&&i.content)s=Ih.to_workbook(i.content,(t.type=o,t));else throw(i=Er.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Er.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=Ghe(e))}var l={};return e.FullPaths&&cpe(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}var rg={0:{f:z0e},1:{f:G0e},2:{f:nme},3:{f:Q0e},4:{f:X0e},5:{f:rme},6:{f:ime},7:{f:eme},8:{f:ume},9:{f:dme},10:{f:lme},11:{f:cme},12:{f:Y0e},13:{f:ame},14:{f:Z0e},15:{f:J0e},16:{f:b8},17:{f:ome},18:{f:tme},19:{f:qk},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:$me},40:{},42:{},43:{f:lhe},44:{f:ohe},45:{f:che},46:{f:uhe},47:{f:dhe},48:{},49:{f:hce},50:{},51:{f:Phe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:e8},62:{f:sme},63:{f:Fhe},64:{f:bme},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ba,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:vme},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:V0e},148:{f:W0e,p:16},151:{f:mme},152:{},153:{f:Rme},154:{},155:{},156:{f:Mme},157:{},158:{},159:{T:1,f:Eue},160:{T:-1},161:{T:1,f:kc},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:hme},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Ohe},336:{T:-1},337:{f:Ihe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:JN},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Z$},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:pme},427:{f:gme},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:yme},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:K0e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:fme},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:JN},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Whe},633:{T:1},634:{T:-1},635:{T:1,f:zhe},636:{T:-1},637:{f:mce},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:_me},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:wme},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},r2={6:{f:Z1},10:{f:Vo},12:{f:Bn},13:{f:Bn},14:{f:An},15:{f:An},16:{f:Ra},17:{f:An},18:{f:An},19:{f:Bn},20:{f:WP},21:{f:WP},23:{f:Z$},24:{f:VP},25:{f:An},26:{},27:{},28:{f:Hde},29:{},34:{f:An},35:{f:KP},38:{f:Ra},39:{f:Ra},40:{f:Ra},41:{f:Ra},42:{f:An},43:{f:An},47:{f:Kue},49:{f:Nde},51:{f:Bn},60:{},61:{f:bde},64:{f:An},65:{f:jde},66:{f:Bn},77:{},80:{},81:{},82:{},85:{f:Bn},89:{},90:{},91:{},92:{f:hde},93:{f:zde},94:{},95:{f:An},96:{},97:{},99:{f:An},125:{f:e8},128:{f:Ide},129:{f:fde},130:{f:Bn},131:{f:An},132:{f:An},133:{f:mde},134:{},140:{f:Xde},141:{f:Bn},144:{},146:{f:Qde},151:{},152:{},153:{},154:{},155:{},156:{f:Bn},157:{},158:{},160:{f:nue},161:{f:eue},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Ade},190:{f:Tde},193:{f:Vo},197:{},198:{},199:{},200:{},201:{},202:{f:An},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Bn},220:{},221:{f:An},222:{},224:{f:Pde},225:{f:ude},226:{f:Vo},227:{},229:{f:qde},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:pde},253:{f:kde},255:{f:gde},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:V$},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:An},353:{f:Vo},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Mde},431:{f:An},432:{},433:{},434:{},437:{},438:{f:Vde},439:{f:An},440:{f:Gde},441:{},442:{f:e0},443:{},444:{f:Bn},445:{},446:{},448:{f:Vo},449:{f:vde,r:2},450:{f:Vo},512:{f:qP},513:{f:rue},515:{f:Dde},516:{f:Sde},517:{f:zP},519:{f:aue},520:{f:xde},523:{},545:{f:GP},549:{f:HP},566:{},574:{f:wde},638:{f:Cde},659:{},1048:{},1054:{f:_de},1084:{},1212:{f:Lde},2048:{f:Yde},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Am},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Vo},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Zde,r:12},2173:{f:Ahe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:An,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:$de,r:12},2197:{},2198:{f:Nhe,r:12},2199:{},2200:{},2201:{},2202:{f:Bde,r:12},2203:{f:Vo},2204:{},2205:{},2206:{},2207:{},2211:{f:yde},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Bn},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:tue},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Jde},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:qP},1:{},2:{f:lue},3:{f:oue},4:{f:iue},5:{f:zP},7:{f:cue},8:{},9:{f:Am},11:{},22:{f:Bn},30:{f:Ede},31:{},32:{},33:{f:GP},36:{},37:{f:HP},50:{f:due},62:{},52:{},67:{},68:{f:Bn},69:{},86:{},126:{},127:{f:sue},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:uue},223:{},234:{},354:{},421:{},518:{f:Z1},521:{f:Am},536:{f:VP},547:{f:KP},561:{},579:{},1030:{f:Z1},1033:{f:Am},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function ii(e,t,r,a){var s=t;if(!isNaN(s)){var i=(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&D$(r)&&e.push(r)}}function sI(e,t){var r=t||{},a=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,d=Dle(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,f=0,m=0,p=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},v=[];for(o=0;o<d.length;++o){var y=d[o].trim(),w=y.slice(0,3).toLowerCase();if(w=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}f=0;continue}if(!(w!="<td"&&w!="<th")){var k=y.split(/<\/t[dh]>/i);for(l=0;l<k.length;++l){var N=k[l].trim();if(N.match(/<t[dh]/i)){for(var b=N,A=0;b.charAt(0)=="<"&&(A=b.indexOf(">"))>-1;)b=b.slice(A+1);for(var E=0;E<v.length;++E){var S=v[E];S.s.c==f&&S.s.r<u&&u<=S.e.r&&(f=S.e.c+1,E=-1)}var _=er(N.slice(0,N.indexOf(">")));p=_.colspan?+_.colspan:1,((m=+_.rowspan)>1||p>1)&&v.push({s:{r:u,c:f},e:{r:u+(m||1)-1,c:f+p-1}});var C=_.t||_["data-t"]||"";if(!b.length){f+=p;continue}if(b=w$(b),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>f&&(g.s.c=f),g.e.c<f&&(g.e.c=f),!b.length){f+=p;continue}var P={t:"s",v:b};r.raw||!b.trim().length||C=="s"||(b==="TRUE"?P={t:"b",v:!0}:b==="FALSE"?P={t:"b",v:!1}:isNaN(ji(b))?isNaN(Qd(b).getDate())||(P={t:"d",v:fa(b)},r.cellDates||(P={t:"n",v:Za(P.v)}),P.z=r.dateNF||lr[14]):P={t:"n",v:ji(b)}),r.dense?(a[u]||(a[u]=[]),a[u][f]=P):a[or({r:u,c:f})]=P,f+=p}}}}return a["!ref"]=Cr(g),v.length&&(a["!merges"]=v),a}function dpe(e,t,r,a){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,d=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>o)&&!(s[u].e.r<r||s[u].e.c<o)){if(s[u].s.r<r||s[u].s.c<o){l=-1;break}l=s[u].e.r-s[u].s.r+1,d=s[u].e.c-s[u].s.c+1;break}if(!(l<0)){var f=or({r,c:o}),m=a.dense?(e[r]||[])[o]:e[f],p=m&&m.v!=null&&(m.h||$k(m.w||(_o(m),m.w)||""))||"",g={};l>1&&(g.rowspan=l),d>1&&(g.colspan=d),a.editable?p='<span contenteditable="true">'+p+"</span>":m&&(g["data-t"]=m&&m.t||"z",m.v!=null&&(g["data-v"]=m.v),m.z!=null&&(g["data-z"]=m.z),m.l&&(m.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+m.l.Target+'">'+p+"</a>")),g.id=(a.id||"sjs")+"-"+f,i.push(Xle("td",p,g))}}var v="<tr>";return v+i.join("")+"</tr>"}var upe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',hpe="</body></html>";function fpe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return xl(sI(r[0],t),t);var a=rS();return r.forEach(function(s,i){nS(a,sI(s,t),"Sheet"+(i+1))}),a}function mpe(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function ppe(e,t){var r=t||{},a=r.header!=null?r.header:upe,s=r.footer!=null?r.footer:hpe,i=[a],o=xu(e["!ref"]);r.dense=Array.isArray(e),i.push(mpe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(dpe(e,o,l,r));return i.push("</table>"+s),i.join("")}function _8(e,t,r){var a=r||{},s=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")s=a.origin;else{var o=typeof a.origin=="string"?Ja(a.origin):a.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),d=Math.min(a.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var f=xu(e["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),s==-1&&(u.e.r=s=f.e.r+1)}var m=[],p=0,g=e["!rows"]||(e["!rows"]=[]),v=0,y=0,w=0,k=0,N=0,b=0;for(e["!cols"]||(e["!cols"]=[]);v<l.length&&y<d;++v){var A=l[v];if(iI(A)){if(a.display)continue;g[y]={hidden:!0}}var E=A.children;for(w=k=0;w<E.length;++w){var S=E[w];if(!(a.display&&iI(S))){var _=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):w$(S.innerHTML),C=S.getAttribute("data-z")||S.getAttribute("z");for(p=0;p<m.length;++p){var P=m[p];P.s.c==k+i&&P.s.r<y+s&&y+s<=P.e.r&&(k=P.e.c+1-i,p=-1)}b=+S.getAttribute("colspan")||1,((N=+S.getAttribute("rowspan")||1)>1||b>1)&&m.push({s:{r:y+s,c:k+i},e:{r:y+s+(N||1)-1,c:k+i+(b||1)-1}});var B={t:"s",v:_},F=S.getAttribute("data-t")||S.getAttribute("t")||"";_!=null&&(_.length==0?B.t=F||"z":a.raw||_.trim().length==0||F=="s"||(_==="TRUE"?B={t:"b",v:!0}:_==="FALSE"?B={t:"b",v:!1}:isNaN(ji(_))?isNaN(Qd(_).getDate())||(B={t:"d",v:fa(_)},a.cellDates||(B={t:"n",v:Za(B.v)}),B.z=a.dateNF||lr[14]):B={t:"n",v:ji(_)})),B.z===void 0&&C!=null&&(B.z=C);var O="",R=S.getElementsByTagName("A");if(R&&R.length)for(var Q=0;Q<R.length&&!(R[Q].hasAttribute("href")&&(O=R[Q].getAttribute("href"),O.charAt(0)!="#"));++Q);O&&O.charAt(0)!="#"&&(B.l={Target:O}),a.dense?(e[y+s]||(e[y+s]=[]),e[y+s][k+i]=B):e[or({c:k+i,r:y+s})]=B,u.e.c<k+i&&(u.e.c=k+i),k+=b}}++y}return m.length&&(e["!merges"]=(e["!merges"]||[]).concat(m)),u.e.r=Math.max(u.e.r,y-1+s),e["!ref"]=Cr(u),y>=d&&(e["!fullref"]=Cr((u.e.r=l.length-v+y-1+s,u))),e}function E8(e,t){var r=t||{},a=r.dense?[]:{};return _8(a,e,t)}function gpe(e,t){return xl(E8(e,t),t)}function iI(e){var t="",r=xpe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function xpe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function ype(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Pr(t.replace(/<[^>]*>/g,""));return[r]}var oI={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function C8(e,t){var r=t||{},a=Lk(e),s=[],i,o,l={name:""},d="",u=0,f,m,p={},g=[],v=r.dense?[]:{},y,w,k={value:""},N="",b=0,A=[],E=-1,S=-1,_={s:{r:1e6,c:1e7},e:{r:0,c:0}},C=0,P={},B=[],F={},O=0,R=0,Q=[],V=1,J=1,ae=[],L={Names:[]},H={},ce=["",""],z=[],I={},Z="",te=0,se=!1,be=!1,Ee=0;for(If.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=If.exec(a);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(_.e.c>=_.s.c&&_.e.r>=_.s.r?v["!ref"]=Cr(_):v["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=_.e.r&&(v["!fullref"]=v["!ref"],_.e.r=r.sheetRows-1,v["!ref"]=Cr(_)),B.length&&(v["!merges"]=B),Q.length&&(v["!rows"]=Q),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),g.push(f.name),p[f.name]=v,be=!1):y[0].charAt(y[0].length-2)!=="/"&&(f=er(y[0],!1),E=S=-1,_.s.r=_.s.c=1e7,_.e.r=_.e.c=0,v=r.dense?[]:{},B=[],Q=[],be=!0);break;case"table-row-group":y[1]==="/"?--C:++C;break;case"table-row":case"":if(y[1]==="/"){E+=V,V=1;break}if(m=er(y[0],!1),m.?E=m.-1:E==-1&&(E=0),V=+m["number-rows-repeated"]||1,V<10)for(Ee=0;Ee<V;++Ee)C>0&&(Q[E+Ee]={level:C});S=-1;break;case"covered-table-cell":y[1]!=="/"&&++S,r.sheetStubs&&(r.dense?(v[E]||(v[E]=[]),v[E][S]={t:"z"}):v[or({r:E,c:S})]={t:"z"}),N="",A=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++S,k=er(y[0],!1),J=parseInt(k["number-columns-repeated"]||"1",10),w={t:"z",v:null},k.formula&&r.cellFormula!=!1&&(w.f=tI(Pr(k.formula))),(k.||k["value-type"])=="string"&&(w.t="s",w.v=Pr(k["string-value"]||""),r.dense?(v[E]||(v[E]=[]),v[E][S]=w):v[or({r:E,c:S})]=w),S+=J-1;else if(y[1]!=="/"){++S,N="",b=0,A=[],J=1;var _e=V?E+V-1:E;if(S>_.e.c&&(_.e.c=S),S<_.s.c&&(_.s.c=S),E<_.s.r&&(_.s.r=E),_e>_.e.r&&(_.e.r=_e),k=er(y[0],!1),z=[],I={},w={t:k.||k["value-type"],v:null},r.cellFormula)if(k.formula&&(k.formula=Pr(k.formula)),k["number-matrix-columns-spanned"]&&k["number-matrix-rows-spanned"]&&(O=parseInt(k["number-matrix-rows-spanned"],10)||0,R=parseInt(k["number-matrix-columns-spanned"],10)||0,F={s:{r:E,c:S},e:{r:E+O-1,c:S+R-1}},w.F=Cr(F),ae.push([F,w.F])),k.formula)w.f=tI(k.formula);else for(Ee=0;Ee<ae.length;++Ee)E>=ae[Ee][0].s.r&&E<=ae[Ee][0].e.r&&S>=ae[Ee][0].s.c&&S<=ae[Ee][0].e.c&&(w.F=ae[Ee][1]);switch((k["number-columns-spanned"]||k["number-rows-spanned"])&&(O=parseInt(k["number-rows-spanned"],10)||0,R=parseInt(k["number-columns-spanned"],10)||0,F={s:{r:E,c:S},e:{r:E+O-1,c:S+R-1}},B.push(F)),k["number-columns-repeated"]&&(J=parseInt(k["number-columns-repeated"],10)),w.t){case"boolean":w.t="b",w.v=un(k["boolean-value"]);break;case"float":w.t="n",w.v=parseFloat(k.value);break;case"percentage":w.t="n",w.v=parseFloat(k.value);break;case"currency":w.t="n",w.v=parseFloat(k.value);break;case"date":w.t="d",w.v=fa(k["date-value"]),r.cellDates||(w.t="n",w.v=Za(w.v)),w.z="m/d/yy";break;case"time":w.t="n",w.v=Ole(k["time-value"])/86400,r.cellDates&&(w.t="d",w.v=Qg(w.v)),w.z="HH:MM:SS";break;case"number":w.t="n",w.v=parseFloat(k.);break;default:if(w.t==="string"||w.t==="text"||!w.t)w.t="s",k["string-value"]!=null&&(N=Pr(k["string-value"]),A=[]);else throw new Error("Unsupported value type "+w.t)}}else{if(se=!1,w.t==="s"&&(w.v=N||"",A.length&&(w.R=A),se=b==0),H.Target&&(w.l=H),z.length>0&&(w.c=z,z=[]),N&&r.cellText!==!1&&(w.w=N),se&&(w.t="z",delete w.v),(!se||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=E))for(var me=0;me<V;++me){if(J=parseInt(k["number-columns-repeated"]||"1",10),r.dense)for(v[E+me]||(v[E+me]=[]),v[E+me][S]=me==0?w:Sa(w);--J>0;)v[E+me][S+J]=Sa(w);else for(v[or({r:E+me,c:S})]=w;--J>0;)v[or({r:E+me,c:S+J})]=Sa(w);_.e.c<=S&&(_.e.c=S)}J=parseInt(k["number-columns-repeated"]||"1",10),S+=J-1,J=0,w={},N="",A=[]}H={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i;I.t=N,A.length&&(I.R=A),I.a=Z,z.push(I)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);Z="",te=0,N="",b=0,A=[];break;case"creator":y[1]==="/"?Z=a.slice(te,y.index):te=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);N="",b=0,A=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(P[l.name]=d,(i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&(d="",l=er(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=er(y[0],!1),d+=oI[y[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=er(y[0],!1),d+=oI[y[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":d+=a.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":o=er(y[0],!1),ce=ej(o["cell-range-address"]);var ye={Name:o.name,Ref:ce[0]+"!"+ce[1]};be&&(ye.Sheet=g.length),L.Names.push(ye);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!k||!k["string-value"])){var qe=ype(a.slice(b,y.index));N=(N.length>0?N+`
`:"")+qe[0]}else er(y[0],!1),b=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{ce=ej(er(y[0])["target-range-address"]),p[ce[0]]["!autofilter"]={ref:ce[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(H=er(y[0],!1),!H.href)break;H.Target=Pr(H.href),delete H.href,H.Target.charAt(0)=="#"&&H.Target.indexOf(".")>-1?(ce=ej(H.Target.slice(1)),H.Target="#"+ce[0]+"!"+ce[1]):H.Target.match(/^\.\.[\\\/]/)&&(H.Target=H.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var G={Sheets:p,SheetNames:g,Workbook:L};return r.bookSheets&&delete G.Sheets,G}function lI(e,t){t=t||{},zs(e,"META-INF/manifest.xml")&&Dce(Ln(e,"META-INF/manifest.xml"),t);var r=_s(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=C8(rn(r),t);return zs(e,"meta.xml")&&(a.Props=U$(Ln(e,"meta.xml"))),a}function cI(e,t){return C8(e,t)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Qk(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function n2(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):rn(jc(e))}function a2(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(s){r.set(s,a),a+=s.length}),r}function dI(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function vpe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,s=t+13;s>=t;--s)a=a*256+e[s];return(e[t+15]&128?-a:a)*Math.pow(10,r-6176)}function Ff(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function sa(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function $a(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],s=Ff(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var d=r[0];e[r[0]++]>=128;);l=e.slice(d,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=Ff(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var u={data:l,type:i};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function Zk(e,t){return e?.map(function(r){return t(r.data)})||[]}function bpe(e){for(var t,r=[],a=[0];a[0]<e.length;){var s=Ff(e,a),i=$a(e.slice(a[0],a[0]+s));a[0]+=s;var o={id:sa(i[1][0].data),messages:[]};i[2].forEach(function(l){var d=$a(l.data),u=sa(d[3][0].data);o.messages.push({meta:d,data:e.slice(a[0],a[0]+u)}),a[0]+=u}),(t=i[3])!=null&&t[0]&&(o.merge=sa(i[3][0].data)>>>0>0),r.push(o)}return r}function wpe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=Ff(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var d=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,d=(t[r[0]++]&224)<<3,d|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(d=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(d=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[a2(s)],d==0)throw new Error("Invalid offset 0");if(d>s[0].length)throw new Error("Invalid offset beyond length");if(u>=d)for(s.push(s[0].slice(-d)),u-=d;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-d,-d+u))}}var f=a2(s);if(f.length!=a)throw new Error("Unexpected length: ".concat(f.length," != ").concat(a));return f}function jpe(e){for(var t=[],r=0;r<e.length;){var a=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(wpe(a,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return a2(t)}function Npe(e,t,r,a){var s=Qk(e),i=s.getUint32(4,!0),o=(a>1?12:8)+dI(i&(a>1?3470:398))*4,l=-1,d=-1,u=NaN,f=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=dI(i&(a>1?12288:4096))*4,i&16&&(d=s.getUint32(o,!0),o+=4),i&32&&(u=s.getFloat64(o,!0),o+=8),i&64&&(f.setTime(f.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var m;switch(e[2]){case 0:break;case 2:m={t:"n",v:u};break;case 3:m={t:"s",v:t[d]};break;case 5:m={t:"d",v:f};break;case 6:m={t:"b",v:u>0};break;case 7:m={t:"n",v:u/86400};break;case 8:m={t:"e",v:0};break;case 9:if(l>-1)m={t:"s",v:r[l]};else if(d>-1)m={t:"s",v:t[d]};else if(!isNaN(u))m={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return m}function kpe(e,t,r){var a=Qk(e),s=a.getUint32(8,!0),i=12,o=-1,l=-1,d=NaN,u=NaN,f=new Date(2001,0,1);s&1&&(d=vpe(e,i),i+=16),s&2&&(u=a.getFloat64(i,!0),i+=8),s&4&&(f.setTime(f.getTime()+a.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=a.getUint32(i,!0),i+=4),s&16&&(o=a.getUint32(i,!0),i+=4);var m;switch(e[1]){case 0:break;case 2:m={t:"n",v:d};break;case 3:m={t:"s",v:t[l]};break;case 5:m={t:"d",v:f};break;case 6:m={t:"b",v:u>0};break;case 7:m={t:"n",v:u/86400};break;case 8:m={t:"e",v:0};break;case 9:if(o>-1)m={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:m={t:"n",v:d};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return m}function Spe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Npe(e,t,r,e[0]);case 5:return kpe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function ll(e){var t=$a(e);return Ff(t[1][0].data)}function uI(e,t){var r=$a(t.data),a=sa(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=$a(o.data),d=sa(l[1][0].data)>>>0;switch(a){case 1:i[d]=n2(l[3][0].data);break;case 8:{var u=e[ll(l[9][0].data)][0],f=$a(u.data),m=e[ll(f[1][0].data)][0],p=sa(m.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var g=$a(m.data);i[d]=g[3].map(function(v){return n2(v.data)}).join("")}break}}),i}function _pe(e,t){var r,a,s,i,o,l,d,u,f,m,p,g,v,y,w=$a(e),k=sa(w[1][0].data)>>>0,N=sa(w[2][0].data)>>>0,b=((a=(r=w[8])==null?void 0:r[0])==null?void 0:a.data)&&sa(w[8][0].data)>0||!1,A,E;if((i=(s=w[7])==null?void 0:s[0])!=null&&i.data&&t!=0)A=(l=(o=w[7])==null?void 0:o[0])==null?void 0:l.data,E=(u=(d=w[6])==null?void 0:d[0])==null?void 0:u.data;else if((m=(f=w[4])==null?void 0:f[0])!=null&&m.data&&t!=1)A=(g=(p=w[4])==null?void 0:p[0])==null?void 0:g.data,E=(y=(v=w[3])==null?void 0:v[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var S=b?4:1,_=Qk(A),C=[],P=0;P<A.length/2;++P){var B=_.getUint16(P*2,!0);B<65535&&C.push([P,B])}if(C.length!=N)throw"Expected ".concat(N," cells, found ").concat(C.length);var F=[];for(P=0;P<C.length-1;++P)F[C[P][0]]=E.subarray(C[P][1]*S,C[P+1][1]*S);return C.length>=1&&(F[C[C.length-1][0]]=E.subarray(C[C.length-1][1]*S)),{R:k,cells:F}}function Epe(e,t){var r,a=$a(t.data),s=(r=a?.[7])!=null&&r[0]?sa(a[7][0].data)>>>0>0?1:0:-1,i=Zk(a[5],function(o){return _pe(o,s)});return{nrows:sa(a[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(d,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=d}),o},[])}}function Cpe(e,t,r){var a,s=$a(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(sa(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(sa(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=Cr(i);var o=$a(s[4][0].data),l=uI(e,e[ll(o[4][0].data)][0]),d=(a=o[17])!=null&&a[0]?uI(e,e[ll(o[17][0].data)][0]):[],u=$a(o[3][0].data),f=0;u[1].forEach(function(m){var p=$a(m.data),g=e[ll(p[2][0].data)][0],v=sa(g.meta[1][0].data);if(v!=6002)throw new Error("6001 unexpected reference to ".concat(v));var y=Epe(e,g);y.data.forEach(function(w,k){w.forEach(function(N,b){var A=or({r:f+k,c:b}),E=Spe(N,l,d);E&&(r[A]=E)})}),f+=y.nrows})}function Ape(e,t){var r=$a(t.data),a={"!ref":"A1"},s=e[ll(r[2][0].data)],i=sa(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Cpe(e,s[0],a),a}function Tpe(e,t){var r,a=$a(t.data),s={name:(r=a[1])!=null&&r[0]?n2(a[1][0].data):"",sheets:[]},i=Zk(a[2],ll);return i.forEach(function(o){e[o].forEach(function(l){var d=sa(l.meta[1][0].data);d==6e3&&s.sheets.push(Ape(e,l))})}),s}function Ope(e,t){var r=rS(),a=$a(t.data),s=Zk(a[1],ll);if(s.forEach(function(i){e[i].forEach(function(o){var l=sa(o.meta[1][0].data);if(l==2){var d=Tpe(e,o);d.sheets.forEach(function(u,f){nS(r,u,f==0?d.name:d.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function rj(e){var t,r,a,s,i={},o=[];if(e.FullPaths.forEach(function(d){if(d.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(d){if(d.name.match(/\.iwa$/)){var u;try{u=jpe(d.content)}catch(m){return console.log("?? "+d.content.length+" "+(m.message||m))}var f;try{f=bpe(u)}catch(m){return console.log("## "+(m.message||m))}f.forEach(function(m){i[m.id]=m.messages,o.push(m.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(a=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:s[0].data)&&sa(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(d){i[d].forEach(function(u){var f=sa(u.meta[1][0].data)>>>0;if(f==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return Ope(i,l)}function Ppe(e){return function(r){for(var a=0;a!=e.length;++a){var s=e[a];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function eS(e){Ppe([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function Ipe(e){return xd.WS.indexOf(e)>-1?"sheet":e==xd.CS?"chart":e==xd.DS?"dialog":e==xd.MS?"macro":e&&e.length?e:"sheet"}function Dpe(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,Ipe(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function Mpe(e,t,r,a,s,i,o,l,d,u,f,m){try{i[a]=Oh(_s(e,r,!0),t);var p=Ln(e,t),g;switch(l){case"sheet":g=Ume(p,t,s,d,i[a],u,f,m);break;case"chart":if(g=Hme(p,t,s,d,i[a],u,f,m),!g||!g["!drawel"])break;var v=gh(g["!drawel"].Target,t),y=QN(v),w=Bhe(_s(e,v,!0),Oh(_s(e,y,!0),v)),k=gh(w,v),N=QN(k);g=kme(_s(e,k,!0),k,d,Oh(_s(e,N,!0),k),u,g);break;case"macro":g=qme(p,t,s,d,i[a],u,f,m);break;case"dialog":g=zme(p,t,s,d,i[a],u,f,m);break;default:throw new Error("Unrecognized sheet type "+l)}o[a]=g;var b=[];i&&i[a]&&Ui(i[a]).forEach(function(A){var E="";if(i[a][A].Type==xd.CMNT){E=gh(i[a][A].Target,t);var S=Gme(Ln(e,E,!0),E,d);if(!S||!S.length)return;XP(g,S,!1)}i[a][A].Type==xd.TCMNT&&(E=gh(i[a][A].Target,t),b=b.concat(Hhe(Ln(e,E,!0),d)))}),b&&b.length&&XP(g,b,!0,d.people||[])}catch(A){if(d.WTF)throw A}}function Us(e){return e.charAt(0)=="/"?e.slice(1):e}function Rpe(e,t){if(h$(),t=t||{},eS(t),zs(e,"META-INF/manifest.xml")||zs(e,"objectdata.xml"))return lI(e,t);if(zs(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof rj<"u"){if(e.FileIndex)return rj(e);var r=Er.utils.cfb_new();return NP(e).forEach(function(Q){Fle(r,Q,Rle(e,Q))}),rj(r)}throw new Error("Unsupported NUMBERS file")}if(!zs(e,"[Content_Types].xml"))throw zs(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):zs(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=NP(e),s=Pce(_s(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",Ln(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!Ln(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var d={},u={};if(!t.bookSheets&&!t.bookProps){if(Dh=[],s.sst)try{Dh=Vme(Ln(e,Us(s.sst)),s.sst,t)}catch(Q){if(t.WTF)throw Q}t.cellStyles&&s.themes.length&&(d=Kme(_s(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=Wme(Ln(e,Us(s.style)),s.style,d,t))}s.links.map(function(Q){try{var V=Oh(_s(e,QN(Us(Q))),Q);return Xme(Ln(e,Us(Q)),V,Q,t)}catch{}});var f=Bme(Ln(e,Us(s.workbooks[0])),s.workbooks[0],t),m={},p="";s.coreprops.length&&(p=Ln(e,Us(s.coreprops[0]),!0),p&&(m=U$(p)),s.extprops.length!==0&&(p=Ln(e,Us(s.extprops[0]),!0),p&&Fce(p,m,t)));var g={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(p=_s(e,Us(s.custprops[0]),!0),p&&(g=Lce(p,t)));var v={};if((t.bookSheets||t.bookProps)&&(f.Sheets?o=f.Sheets.map(function(V){return V.name}):m.Worksheets&&m.SheetNames.length>0&&(o=m.SheetNames),t.bookProps&&(v.Props=m,v.Custprops=g),t.bookSheets&&typeof o<"u"&&(v.SheetNames=o),t.bookSheets?v.SheetNames:t.bookProps))return v;o={};var y={};t.bookDeps&&s.calcchain&&(y=Yme(Ln(e,Us(s.calcchain)),s.calcchain));var w=0,k={},N,b;{var A=f.Sheets;m.Worksheets=A.length,m.SheetNames=[];for(var E=0;E!=A.length;++E)m.SheetNames[E]=A[E].name}var S=i?"bin":"xml",_=s.workbooks[0].lastIndexOf("/"),C=(s.workbooks[0].slice(0,_+1)+"_rels/"+s.workbooks[0].slice(_+1)+".rels").replace(/^\//,"");zs(e,C)||(C="xl/_rels/workbook."+S+".rels");var P=Oh(_s(e,C,!0),C.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=Jme(Ln(e,Us(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=qhe(Ln(e,Us(s.people[0])),t)),P&&(P=Dpe(P,f.Sheets));var B=Ln(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(w=0;w!=m.Worksheets;++w){var F="sheet";if(P&&P[w]?(N="xl/"+P[w][1].replace(/[\/]?xl\//,""),zs(e,N)||(N=P[w][1]),zs(e,N)||(N=C.replace(/_rels\/.*$/,"")+P[w][1]),F=P[w][2]):(N="xl/worksheets/sheet"+(w+1-B)+"."+S,N=N.replace(/sheet0\./,"sheet.")),b=N.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(w!=t.sheets)continue e;break;case"string":if(m.SheetNames[w].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var O=!1,R=0;R!=t.sheets.length;++R)typeof t.sheets[R]=="number"&&t.sheets[R]==w&&(O=1),typeof t.sheets[R]=="string"&&t.sheets[R].toLowerCase()==m.SheetNames[w].toLowerCase()&&(O=1);if(!O)continue e}}Mpe(e,N,b,m.SheetNames[w],w,k,o,F,t,f,d,u)}return v={Directory:s,Workbook:f,Props:m,Custprops:g,Deps:y,Sheets:o,SheetNames:m.SheetNames,Strings:Dh,Styles:u,Themes:d,SSF:Sa(lr)},t&&t.bookFiles&&(e.files?(v.keys=a,v.files=e.files):(v.keys=[],v.files={},e.FullPaths.forEach(function(Q,V){Q=Q.replace(/^Root Entry[\/]/,""),v.keys.push(Q),v.files[Q]=e.FileIndex[V]}))),t&&t.bookVBA&&(s.vba.length>0?v.vbaraw=Ln(e,Us(s.vba[0]),!0):s.defaults&&s.defaults.bin===Vhe&&(v.vbaraw=Ln(e,"xl/vbaProject.bin",!0))),v}function Fpe(e,t){var r=t||{},a="Workbook",s=Er.find(e,a);try{if(a="/!DataSpaces/Version",s=Er.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(Aue(s.content),a="/!DataSpaces/DataSpaceMap",s=Er.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=Oue(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Er.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=Pue(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Er.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);Due(s.content)}catch{}if(a="/EncryptionInfo",s=Er.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=Mue(s.content);if(a="/EncryptedPackage",s=Er.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function tS(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=As(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function $pe(e,t){return Er.find(e,"EncryptedPackage")?Fpe(e,t):S8(e,t)}function Lpe(e,t){var r,a=e,s=t||{};return s.type||(s.type=kr&&Buffer.isBuffer(e)?"buffer":"base64"),r=y$(a,s),Rpe(r,s)}function A8(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return t2(e.slice(r),t);default:break e}return Df.to_workbook(e,t)}function Bpe(e,t){var r="",a=tS(e,t);switch(t.type){case"base64":r=As(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=hc(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=rn(r)),t.type="binary",A8(r,t)}function Upe(e,t){var r=e;return t.type=="base64"&&(r=As(r)),r=Tf.utils.decode(1200,r.slice(2),"str"),t.type="binary",A8(r,t)}function Hpe(e){return e.match(/[^\x00-\x7F]/)?xh(e):e}function nj(e,t,r,a){return a?(r.type="string",Df.to_workbook(e,r)):Df.to_workbook(t,r)}function s2(e,t){e$();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return s2(new Uint8Array(e),(r=Sa(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Sd={},r.dateNF&&(Sd.dateNF=r.dateNF),r.type||(r.type=kr&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=kr?"buffer":"binary",a=Ale(e),typeof Uint8Array<"u"&&!kr&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=Hpe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Sa(r),r.type="array",s2(Ik(a),r)}switch((s=tS(a,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return $pe(Er.read(a,r),r);break;case 9:if(s[1]<=8)return S8(a,r);break;case 60:return t2(a,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return gue(a,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return mue.to_workbook(a,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Lpe(a,r):nj(e,a,r,i);case 239:return s[3]===60?t2(a,r):nj(e,a,r,i);case 255:if(s[1]===254)return Upe(a,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Ih.to_workbook(a,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Ih.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return YP.to_workbook(a,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return Vue.to_workbook(a,r);break;case 10:case 13:case 32:return Bpe(a,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return hue.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?YP.to_workbook(a,r):nj(e,a,r,i)}function qpe(e,t,r,a,s,i,o,l){var d=_a(r),u=l.defval,f=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),m=!0,p=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!o||e[r])for(var g=t.s.c;g<=t.e.c;++g){var v=o?e[r][g]:e[a[g]+d];if(v===void 0||v.t===void 0){if(u===void 0)continue;i[g]!=null&&(p[i[g]]=u);continue}var y=v.v;switch(v.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(i[g]!=null){if(y==null)if(v.t=="e"&&y===null)p[i[g]]=null;else if(u!==void 0)p[i[g]]=u;else if(f&&y===null)p[i[g]]=null;else continue;else p[i[g]]=f&&(v.t!=="n"||v.t==="n"&&l.rawNumbers!==!1)?y:_o(v,y,l);y!=null&&(m=!1)}}return{row:p,isempty:m}}function i2(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,s=1,i=[],o=0,l="",d={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},f=u.range!=null?u.range:e["!ref"];switch(u.header===1?a=1:u.header==="A"?a=2:Array.isArray(u.header)?a=3:u.header==null&&(a=0),typeof f){case"string":d=Sn(f);break;case"number":d=Sn(e["!ref"]),d.s.r=f;break;default:d=f}a>0&&(s=0);var m=_a(d.s.r),p=[],g=[],v=0,y=0,w=Array.isArray(e),k=d.s.r,N=0,b={};w&&!e[k]&&(e[k]=[]);var A=u.skipHidden&&e["!cols"]||[],E=u.skipHidden&&e["!rows"]||[];for(N=d.s.c;N<=d.e.c;++N)if(!(A[N]||{}).hidden)switch(p[N]=aa(N),r=w?e[k][N]:e[p[N]+m],a){case 1:i[N]=N-d.s.c;break;case 2:i[N]=p[N];break;case 3:i[N]=u.header[N-d.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=_o(r,null,u),y=b[o]||0,!y)b[o]=1;else{do l=o+"_"+y++;while(b[l]);b[o]=y,b[l]=1}i[N]=l}for(k=d.s.r+s;k<=d.e.r;++k)if(!(E[k]||{}).hidden){var S=qpe(e,d,k,p,a,i,w,u);(S.isempty===!1||(a===1?u.blankrows!==!1:u.blankrows))&&(g[v++]=S.row)}return g.length=v,g}var hI=/"/g;function zpe(e,t,r,a,s,i,o,l){for(var d=!0,u=[],f="",m=_a(r),p=t.s.c;p<=t.e.c;++p)if(a[p]){var g=l.dense?(e[r]||[])[p]:e[a[p]+m];if(g==null)f="";else if(g.v!=null){d=!1,f=""+(l.rawNumbers&&g.t=="n"?g.v:_o(g,null,l));for(var v=0,y=0;v!==f.length;++v)if((y=f.charCodeAt(v))===s||y===i||y===34||l.forceQuotes){f='"'+f.replace(hI,'""')+'"';break}f=="ID"&&(f='"ID"')}else g.f!=null&&!g.F?(d=!1,f="="+g.f,f.indexOf(",")>=0&&(f='"'+f.replace(hI,'""')+'"')):f="";u.push(f)}return l.blankrows===!1&&d?null:u.join(o)}function T8(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var s=Sn(e["!ref"]),i=a.FS!==void 0?a.FS:",",o=i.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,d=l.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),f="",m=[];a.dense=Array.isArray(e);for(var p=a.skipHidden&&e["!cols"]||[],g=a.skipHidden&&e["!rows"]||[],v=s.s.c;v<=s.e.c;++v)(p[v]||{}).hidden||(m[v]=aa(v));for(var y=0,w=s.s.r;w<=s.e.r;++w)(g[w]||{}).hidden||(f=zpe(e,s,w,m,o,d,i,a),f!=null&&(a.strip&&(f=f.replace(u,"")),(f||a.blankrows!==!1)&&r.push((y++?l:"")+f)));return delete a.dense,r.join("")}function Wpe(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=T8(e,t);return r}function Kpe(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var s=Sn(e["!ref"]),i="",o=[],l,d=[],u=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=aa(l);for(var f=s.s.r;f<=s.e.r;++f)for(i=_a(f),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=u?(e[f]||[])[l]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}d[d.length]=t+"="+a}return d}function O8(e,t,r){var a=r||{},s=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var d=typeof a.origin=="string"?Ja(a.origin):a.origin;o=d.r,l=d.c}var u,f={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var m=Sn(i["!ref"]);f.e.c=Math.max(f.e.c,m.e.c),f.e.r=Math.max(f.e.r,m.e.r),o==-1&&(o=m.e.r+1,f.e.r=o+t.length-1+s)}else o==-1&&(o=0,f.e.r=t.length-1+s);var p=a.header||[],g=0;t.forEach(function(y,w){Ui(y).forEach(function(k){(g=p.indexOf(k))==-1&&(p[g=p.length]=k);var N=y[k],b="z",A="",E=or({c:l+g,r:o+w+s});u=$f(i,E),N&&typeof N=="object"&&!(N instanceof Date)?i[E]=N:(typeof N=="number"?b="n":typeof N=="boolean"?b="b":typeof N=="string"?b="s":N instanceof Date?(b="d",a.cellDates||(b="n",N=Za(N)),A=a.dateNF||lr[14]):N===null&&a.nullError&&(b="e",N=0),u?(u.t=b,u.v=N,delete u.w,delete u.R,A&&(u.z=A)):i[E]=u={t:b,v:N},A&&(u.z=A))})}),f.e.c=Math.max(f.e.c,l+p.length-1);var v=_a(o);if(s)for(g=0;g<p.length;++g)i[aa(g+l)+v]={t:"s",v:p[g]};return i["!ref"]=Cr(f),i}function Vpe(e,t){return O8(null,e,t)}function $f(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=Ja(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?$f(e,or(t)):$f(e,or({r:t,c:r||0}))}function Gpe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function rS(){return{SheetNames:[],Sheets:{}}}function nS(e,t,r,a){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(Pme(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Ype(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=Gpe(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function Xpe(e,t){return e.z=t,e}function P8(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function Jpe(e,t,r){return P8(e,"#"+t,r)}function Qpe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function Zpe(e,t,r,a){for(var s=typeof t!="string"?t:Sn(t),i=typeof t=="string"?t:Cr(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var d=$f(e,o,l);d.t="n",d.F=i,delete d.v,o==s.s.r&&l==s.s.c&&(d.f=r,a&&(d.D=!0))}return e}var ege={encode_col:aa,encode_row:_a,encode_cell:or,encode_range:Cr,decode_col:Hk,decode_row:Uk,split_cell:uce,decode_cell:Ja,decode_range:xu,format_cell:_o,sheet_add_aoa:R$,sheet_add_json:O8,sheet_add_dom:_8,aoa_to_sheet:yu,json_to_sheet:Vpe,table_to_sheet:E8,table_to_book:gpe,sheet_to_csv:T8,sheet_to_txt:Wpe,sheet_to_json:i2,sheet_to_html:ppe,sheet_to_formulae:Kpe,sheet_to_row_object_array:i2,sheet_get_cell:$f,book_new:rS,book_append_sheet:nS,book_set_sheet_visibility:Ype,cell_set_number_format:Xpe,cell_set_hyperlink:P8,cell_set_internal_link:Jpe,cell_add_comment:Qpe,sheet_set_array_formula:Zpe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const tge={"Chicken Momos":6,"Chicken Cheese Momos":6,"Veg Momos":6,"Paneer Momos":6,"Corn Cheese Momos":6,"Chicken Kurkure Momos":6,"Veg Kurkure Momos":6};function rge({context:e,selectedStoreId:t}){const[r,a]=M.useState([]),[s,i]=M.useState(!0),[o,l]=M.useState(!1),[d,u]=M.useState(new Date().toISOString().split("T")[0]),[f,m]=M.useState("daily"),[p,g]=M.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),[v,y]=M.useState(new Date().getDay()),[w,k]=M.useState(!1),[N,b]=M.useState(tge),A=t||e.user?.storeId||null;M.useEffect(()=>{const R=localStorage.getItem("momoPlateConfig");if(R)try{b(JSON.parse(R))}catch(Q){console.error("Failed to load plate config:",Q)}},[]);const E=(R,Q)=>{const V={...N,[R]:Q};b(V),localStorage.setItem("momoPlateConfig",JSON.stringify(V))};M.useEffect(()=>{S()},[A]);const S=async()=>{try{i(!0);let Q=(await gg(e.user?.accessToken||"")).data||[];Q=Q.filter(V=>!!V&&!!V.storeId),A&&(Q=Q.filter(V=>V.storeId===A)),Q.sort((V,J)=>new Date(J.date).getTime()-new Date(V.date).getTime()),a(Q)}catch(R){console.error("Error loading sales data:",R),Zt.error("Failed to load sales data")}finally{i(!1)}},_=R=>new Promise((Q,V)=>{const J=new FileReader;J.onload=ae=>{try{const L=ae.target?.result,H=s2(L,{type:"binary"}),ce=H.SheetNames[0],z=H.Sheets[ce],I=ege.sheet_to_json(z),Z=C(I);Q(Z)}catch(L){V(L)}},J.onerror=()=>V(new Error("Failed to read file")),J.readAsBinaryString(R)}),C=R=>{const Q={"Chicken Momos":0,"Chicken Cheese Momos":0,"Veg Momos":0,"Paneer Momos":0,"Corn Cheese Momos":0,"Chicken Kurkure Momos":0,"Veg Kurkure Momos":0};return R.forEach(V=>{const J=String(V.Item||""),ae=Number(V["Total Quantity"]||V["Total Qua"]||0);if(!ae||ae===0||!J)return;const L=J.toLowerCase();if(L.includes("mania")&&L.includes("combo"))return;if(L.includes("platter")){L.includes("non veg")?(Q["Chicken Momos"]+=6*ae,Q["Chicken Cheese Momos"]+=6*ae):L.includes("veg")&&(Q["Paneer Momos"]+=4*ae,Q["Veg Momos"]+=4*ae,Q["Corn Cheese Momos"]+=4*ae);return}let H=6;if(L.includes("burger")){let Z=1;const te=J.match(/(\d+)\s*(?:pcs|pieces|piece)/i);te&&(Z=parseInt(te[1])),H=Z*2}else{const I=J.match(/(\d+)\s*(?:pcs|pieces|piece)/i);if(I){let Z=parseInt(I[1]);const te=J.match(/pack of\s*(\d+)/i);te&&(Z*=parseInt(te[1])),H=Z}}const ce=ae*H;if(["drink","cola","campa","water","beverage","soup"].some(I=>L.includes(I)))return;let z="Other";L.includes("kurkure")?L.includes("chicken")?z="Chicken Kurkure Momos":L.includes("veg")&&(z="Veg Kurkure Momos"):L.includes("paneer")?z="Paneer Momos":L.includes("corn")&&L.includes("cheese")?z="Corn Cheese Momos":L.includes("chicken")&&L.includes("cheese")?z="Chicken Cheese Momos":L.includes("chicken")?z="Chicken Momos":L.includes("veg")&&(z="Veg Momos"),z in Q&&(Q[z]+=ce)}),Q},P=async R=>{const Q=R.target.files?.[0];if(!Q)return;if(!Q.name.endsWith(".xlsx")&&!Q.name.endsWith(".xls")&&!Q.name.endsWith(".csv")){Zt.error("Please upload an Excel (.xlsx, .xls) or CSV file");return}let V=d;const J=/_(\d{2})_(\d{2})_(\d{4})-\d{2}_\d{2}_\d{4}\./,ae=Q.name.match(J);if(ae){const[,L,H,ce]=ae;V=`${ce}-${H}-${L}`,console.log(` Extracted date from filename: ${Q.name} -> ${V}`),u(V)}else console.warn(" Could not extract date from filename, using manually selected date:",d);if(!V){Zt.error("Please select a date or use a filename with date format: StoreName_DD_MM_YYYY-DD_MM_YYYY.xlsx");return}if(!A){Zt.error("Store ID not found");return}try{l(!0),Zt.info("Processing file...",{duration:2e3});const L=await _(Q);Zt.info("Uploading to server...",{duration:2e3});const H=e.stores?.find(z=>z.id===A)?.name||"Unknown Store",ce={id:`SALES-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,date:V,storeId:A,storeName:H,data:L,uploadedBy:e.user?.name||"Unknown",uploadedAt:new Date().toISOString()};await e5(ce,e.user?.accessToken||""),Zt.success(` Sales data uploaded for ${V}!`),await S(),R.target.value=""}catch(L){console.error("Error uploading file:",L),Zt.error(`Failed to process file: ${L instanceof Error?L.message:"Unknown error"}`)}finally{l(!1)}},B=async R=>{if(window.confirm("Are you sure you want to delete this sales record?"))try{await t5(R,e.user?.accessToken||""),Zt.success("Sales record deleted"),await S()}catch(Q){console.error("Error deleting record:",Q),Zt.error("Failed to delete record")}},F=R=>Object.values(R).reduce((Q,V)=>Q+V,0),O=R=>{const Q=["#ef4444","#f97316","#22c55e","#3b82f6","#eab308","#8b5cf6","#06b6d4"];return Q[R%Q.length]};return s?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading sales data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl shadow-lg p-6 border border-purple-100",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[n.jsx(Fm,{className:"w-7 h-7 text-purple-600"}),"Daily Sales Data"]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Upload daily sales XLSX files to track momo sales by category"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx(ds,{value:d,onChange:u,max:new Date().toISOString().split("T")[0]}),n.jsxs("button",{onClick:()=>k(!w),className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105",children:[n.jsx(Ii,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Plate Config"})]}),n.jsxs("label",{className:`px-6 py-2.5 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 cursor-pointer flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105 ${o?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx(zl,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:o?"Uploading...":"Upload XLSX"}),n.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:P,disabled:o,className:"hidden"})]})]})]}),n.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-900",children:[n.jsx("p",{className:"font-medium mb-1",children:"File Format Requirements:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-800",children:[n.jsxs("li",{children:["Must contain columns: ",n.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Item"})," and ",n.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Total Quantity"})]}),n.jsx("li",{children:'Item names should include momo type (e.g., "Chicken Pan-Fried Momos (8 pcs)")'}),n.jsx("li",{children:"Quantity should be the number of plates/items sold"})]})]})]})})]}),w&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white rounded-t-2xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Plate Configuration"}),n.jsx("p",{className:"text-sm text-blue-100",children:"Set how many pieces are in each plate for each momo type"})]}),n.jsx("button",{onClick:()=>k(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(xr,{className:"w-6 h-6"})})]})}),n.jsx("div",{className:"p-6 space-y-4",children:Object.keys(N).map((R,Q)=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl border-2 border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:O(Q)}}),n.jsx("label",{className:"text-gray-900 font-medium",children:R})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:"1",max:"20",value:N[R],onChange:V=>E(R,parseInt(V.target.value)||6),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-center font-semibold"}),n.jsx("span",{className:"text-gray-600 text-sm",children:"pieces/plate"})]})]},R))}),n.jsx("div",{className:"p-6 bg-blue-50 border-t-2 border-blue-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(zt,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-900",children:[n.jsx("p",{className:"font-medium mb-1",children:"How it works:"}),n.jsxs("p",{children:["This configuration determines how pieces are converted to plates in the display. For example, if Chicken Momos has 6 pieces/plate and you sold 262 pieces, it will show as ",n.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded",children:"262 pcs / 44 plates"}),"."]})]})]})}),n.jsx("div",{className:"p-4 bg-gray-50 rounded-b-2xl flex justify-end",children:n.jsx("button",{onClick:()=>k(!1),className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg",children:"Done"})})]})}),r.length>0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[n.jsx(II,{className:"w-7 h-7 text-teal-600"}),"Sales Trends by Category"]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Analyze momo sales patterns across different time periods"})]}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:["daily","weekly","monthly","yearly","custom"].map(R=>n.jsx("button",{onClick:()=>m(R),className:`px-4 py-2 rounded-xl text-sm transition-all duration-300 transform hover:scale-105 ${f===R?"bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:R.charAt(0).toUpperCase()+R.slice(1)},R))})]}),f==="custom"&&n.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-xl p-4",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsx(ds,{label:"From Date",value:p.from,onChange:R=>g({...p,from:R})}),n.jsx(ds,{label:"To Date",value:p.to,onChange:R=>g({...p,to:R})})]})}),n.jsx(Zn,{width:"100%",height:500,children:n.jsxs(mi,{data:(()=>{let R=[...r];if(f==="custom")R=R.filter(J=>J.date>=p.from&&J.date<=p.to);else{const J=new Date,ae=new Date;f==="daily"?ae.setDate(J.getDate()-5):f==="weekly"?ae.setDate(J.getDate()-35):f==="monthly"?ae.setMonth(J.getMonth()-5):f==="yearly"&&ae.setFullYear(J.getFullYear()-5),R=R.filter(L=>new Date(L.date)>=ae)}const Q=new Map;return R.forEach(J=>{let ae=J.date,L=J.date;if(f==="weekly"){const ce=new Date(J.date),z=new Date(ce.setDate(ce.getDate()-ce.getDay())),I=new Date(z);I.setDate(I.getDate()+6),ae=z.toISOString().split("T")[0],L=`${z.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${I.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else f==="monthly"?(ae=J.date.substring(0,7),L=new Date(J.date).toLocaleDateString("en-US",{year:"numeric",month:"short"})):f==="yearly"?(ae=J.date.substring(0,4),L=ae):f==="daily"&&(L=new Date(J.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}));Q.has(ae)||Q.set(ae,{period:L,"Chicken Momos":0,"Chicken Cheese Momos":0,"Veg Momos":0,"Paneer Momos":0,"Corn Cheese Momos":0,"Chicken Kurkure Momos":0,"Veg Kurkure Momos":0});const H=Q.get(ae);Object.entries(J.data).forEach(([ce,z])=>{H[ce]+=z})}),Array.from(Q.values()).sort((J,ae)=>{const L=R.find(ce=>{if(f==="weekly"){const z=new Date(ce.date),I=new Date(z.setDate(z.getDate()-z.getDay()));return J.period.includes(I.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}else return f==="monthly"?J.period===new Date(ce.date).toLocaleDateString("en-US",{year:"numeric",month:"short"}):f==="yearly"?J.period===ce.date.substring(0,4):J.period===new Date(ce.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})?.date||J.period,H=R.find(ce=>{if(f==="weekly"){const z=new Date(ce.date),I=new Date(z.setDate(z.getDate()-z.getDay()));return ae.period.includes(I.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}else return f==="monthly"?ae.period===new Date(ce.date).toLocaleDateString("en-US",{year:"numeric",month:"short"}):f==="yearly"?ae.period===ce.date.substring(0,4):ae.period===new Date(ce.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})?.date||ae.period;return new Date(L).getTime()-new Date(H).getTime()}).slice(-5)})(),children:[n.jsx(ba,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),n.jsx(Hn,{dataKey:"period",tick:{fontSize:12},angle:-15,textAnchor:"end",height:80}),n.jsx(Tn,{tick:{fontSize:12}}),n.jsx(Gr,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}}),n.jsx(ka,{wrapperStyle:{paddingTop:"20px"},iconType:"rect"}),n.jsx(wr,{dataKey:"Chicken Momos",fill:"#ef4444",radius:[8,8,0,0]}),n.jsx(wr,{dataKey:"Chicken Cheese Momos",fill:"#f97316",radius:[8,8,0,0]}),n.jsx(wr,{dataKey:"Veg Momos",fill:"#22c55e",radius:[8,8,0,0]}),n.jsx(wr,{dataKey:"Paneer Momos",fill:"#3b82f6",radius:[8,8,0,0]}),n.jsx(wr,{dataKey:"Corn Cheese Momos",fill:"#eab308",radius:[8,8,0,0]}),n.jsx(wr,{dataKey:"Chicken Kurkure Momos",fill:"#8b5cf6",radius:[8,8,0,0]}),n.jsx(wr,{dataKey:"Veg Kurkure Momos",fill:"#06b6d4",radius:[8,8,0,0]})]})}),n.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{const R={"Chicken Momos":0,"Chicken Cheese Momos":0,"Veg Momos":0,"Paneer Momos":0,"Corn Cheese Momos":0,"Chicken Kurkure Momos":0,"Veg Kurkure Momos":0};let Q=[...r];if(f==="custom")Q=Q.filter(ae=>ae.date>=p.from&&ae.date<=p.to);else{const ae=new Date,L=new Date;f==="daily"?L.setDate(ae.getDate()-5):f==="weekly"?L.setDate(ae.getDate()-35):f==="monthly"?L.setMonth(ae.getMonth()-5):f==="yearly"&&L.setFullYear(ae.getFullYear()-5),Q=Q.filter(H=>new Date(H.date)>=L)}Q.forEach(ae=>{Object.entries(ae.data).forEach(([L,H])=>{R[L]+=H})});const V=Object.values(R).reduce((ae,L)=>ae+L,0),J=Object.entries(R).sort((ae,L)=>L[1]-ae[1])[0];return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-xl p-4 border-2 border-teal-200",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Sales"}),n.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:V.toLocaleString()}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"pieces"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border-2 border-purple-200",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Top Category"}),n.jsx("p",{className:"text-lg text-gray-900",style:{fontWeight:"600"},children:J?.[0]?.split(" ")[0]||"N/A"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[J?.[1]?.toLocaleString()||0," pcs"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-4 border-2 border-pink-200",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg per Period"}),n.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:Q.length>0?Math.round(V/Q.length).toLocaleString():0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"pieces"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border-2 border-blue-200",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Data Points"}),n.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:Q.length}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"records"})]})]})})()})]}),r.length>0&&(()=>{const R={0:{dayName:"Sunday",counts:{}},1:{dayName:"Monday",counts:{}},2:{dayName:"Tuesday",counts:{}},3:{dayName:"Wednesday",counts:{}},4:{dayName:"Thursday",counts:{}},5:{dayName:"Friday",counts:{}},6:{dayName:"Saturday",counts:{}}},Q=["Chicken Momos","Chicken Cheese Momos","Veg Momos","Paneer Momos","Corn Cheese Momos","Chicken Kurkure Momos","Veg Kurkure Momos"];Object.keys(R).forEach(H=>{Q.forEach(ce=>{R[H].counts[ce]=[]})}),r.forEach(H=>{const z=new Date(H.date).getDay().toString();Object.entries(H.data).forEach(([I,Z])=>{R[z].counts[I]&&R[z].counts[I].push(Z)})});const V=Object.entries(R).map(([H,ce])=>{const z={day:ce.dayName,dayNum:parseInt(H)};return Q.forEach(I=>{const Z=ce.counts[I],te=Z.length>0?Math.round(Z.reduce((se,be)=>se+be,0)/Z.length):0;z[I]=te}),z}),J=V.find(H=>H.dayNum===v),ae=J?Q.map((H,ce)=>({category:H,average:J[H],fill:O(ce)})):[],L=[{num:0,name:"Sun",fullName:"Sunday"},{num:1,name:"Mon",fullName:"Monday"},{num:2,name:"Tue",fullName:"Tuesday"},{num:3,name:"Wed",fullName:"Wednesday"},{num:4,name:"Thu",fullName:"Thursday"},{num:5,name:"Fri",fullName:"Friday"},{num:6,name:"Sat",fullName:"Saturday"}];return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[n.jsx(hn,{className:"w-7 h-7 text-indigo-600"}),"Weekly Pattern Analysis"]}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Average momo sales by day of the week across all records"}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:L.map(H=>n.jsx("button",{onClick:()=>y(H.num),className:`px-4 py-2 rounded-xl text-sm transition-all duration-300 transform hover:scale-105 ${v===H.num?"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:H.name},H.num))})]}),n.jsx(Zn,{width:"100%",height:500,children:n.jsxs(mi,{data:ae,children:[n.jsx(ba,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),n.jsx(Hn,{dataKey:"category",tick:{fontSize:11},angle:-15,textAnchor:"end",height:100}),n.jsx(Tn,{tick:{fontSize:12}}),n.jsx(Gr,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},formatter:H=>[`${H} pcs (avg)`,"Average"],labelFormatter:H=>H}),n.jsx(wr,{dataKey:"average",radius:[8,8,0,0],children:ae.map((H,ce)=>n.jsx(ic,{fill:H.fill},`cell-${ce}`))})]})}),n.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(()=>{Q.forEach(se=>{let be=0;V.forEach(Ee=>{Ee[se]>be&&(be=Ee[se],Ee.day)})});const H=V.reduce((se,be)=>{const Ee=Q.reduce((me,ye)=>me+(se[ye]||0),0);return Q.reduce((me,ye)=>me+(be[ye]||0),0)>Ee?be:se}),ce=Q.reduce((se,be)=>se+(H[be]||0),0),z=V.reduce((se,be)=>{const Ee=Q.reduce((me,ye)=>me+(se[ye]||0),0);return Q.reduce((me,ye)=>me+(be[ye]||0),0)<Ee?be:se}),I=Q.reduce((se,be)=>se+(z[be]||0),0),Z=V.find(se=>se.dayNum===v),te=Z?Object.entries(Z).filter(([se])=>Q.includes(se)).sort((se,be)=>be[1]-se[1])[0]:null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border-2 border-green-200",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" Busiest Day"}),n.jsx("p",{className:"text-xl text-gray-900",style:{fontWeight:"700"},children:H.day}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ce.toLocaleString()," pcs avg"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 border-2 border-orange-200",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" Quietest Day"}),n.jsx("p",{className:"text-xl text-gray-900",style:{fontWeight:"700"},children:z.day}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[I.toLocaleString()," pcs avg"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border-2 border-purple-200",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" Top Seller Today"}),n.jsx("p",{className:"text-base text-gray-900",style:{fontWeight:"600"},children:te?.[0]||"N/A"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:te?`${te[1].toLocaleString()} pcs avg`:"No data"})]})]})})()})]})})(),r.length===0?n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center border border-gray-100",children:[n.jsx(Fm,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Sales Data Yet"}),n.jsx("p",{className:"text-gray-600",children:"Upload your first sales file to get started"})]}):n.jsx("div",{className:"space-y-4",children:r.map((R,Q)=>{const V=F(R.data),J=new Date(R.date),ae=R.storeName&&R.storeName!=="Unknown Store"?R.storeName:e.stores?.find(L=>L.id===R.storeId)?.name||R.storeName||"Unknown Store";return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-4 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Dr,{className:"w-5 h-5"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:J.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),n.jsxs("p",{className:"text-sm text-purple-100",children:[ae,"  Total: ",V.toLocaleString()," pieces"]})]})]}),n.jsx("button",{onClick:()=>B(R.id),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Delete record",children:n.jsx(ls,{className:"w-5 h-5"})})]})}),n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(R.data).map(([L,H],ce)=>{const z=H||0,I=V>0?(z/V*100).toFixed(1):"0",Z=O(ce),te=N[L]||6,se=Math.floor(z/te);return n.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border-2 border-gray-200 hover:shadow-md transition-all duration-300 hover:scale-105",style:{borderLeftColor:Z,borderLeftWidth:"4px"},children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx(rr,{className:"w-5 h-5 text-gray-400"}),n.jsxs("span",{className:"text-xs font-semibold text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[I,"%"]})]}),n.jsx("h4",{className:"text-sm text-gray-600 mb-1",children:L}),n.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:z.toLocaleString()}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"pieces"}),n.jsx("span",{className:"text-xs text-gray-400",children:""}),n.jsxs("p",{className:"text-xs text-gray-600 font-semibold",children:[se," plates"]})]})]},L)})}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:[n.jsxs("span",{children:["Uploaded by ",R.uploadedBy]}),n.jsx("span",{children:new Date(R.uploadedAt).toLocaleString()})]})]})]},R.id)})})]})}function fI({context:e,selectedStoreId:t,onOpenRecalibration:r,locationType:a}){const s=e.user?.role==="cluster_head",i=e.user?.role==="manager",o=e.user?.designation==="production_incharge",l=e.user?.designation==="store_incharge",d=(s||i)&&!o&&!l,u=d?"pending":"history",[f,m]=M.useState(u),[p,g]=M.useState([]),[v,y]=M.useState([]),[w,k]=M.useState(null),[N,b]=M.useState(!1),[A,E]=M.useState(new Date().toISOString().substring(0,7)),[S,_]=M.useState(null),[C,P]=M.useState(!1),B=s&&!t||s&&a==="production_house"?"all-cluster-locations":t||e.user?.storeId;console.log(" RecalibrationReports - ID Debug:"),console.log("  - selectedStoreId (prop):",t),console.log("  - context.user?.storeId:",e.user?.storeId),console.log("  - effectiveStoreId (computed):",B),console.log("  - locationType:",a),console.log("  - isClusterHead:",s),console.log("  - Production Houses:",e.productionHouses?.map(L=>({id:L.id,name:L.name}))),M.useEffect(()=>{f==="pending"&&d?F():f==="history"?O():f==="wastage"&&R()},[f,A,B,s,i,o,l]);async function F(){try{b(!0);const L=await p5(e.user?.accessToken||"");g(L.recalibrations||[])}catch(L){console.error("Error fetching pending recalibrations:",L),Zt.error("Failed to fetch pending recalibrations")}finally{b(!1)}}async function O(){if(B)try{b(!0),console.log(" Fetching recalibration history:"),console.log("  - effectiveStoreId:",B),console.log("  - selectedStoreId:",t),console.log("  - locationType:",a),console.log("  - isClusterHead:",s),console.log("  - user.storeId:",e.user?.storeId);const L=await qm(e.user?.accessToken||"",B,a);console.log(" History response:",L),console.log(" History records found:",L?.history?.length||0),L?.history?.length>0&&console.log(" Sample record locationIds:",L.history.slice(0,3).map(H=>H.locationId)),y(L.history||[])}catch(L){console.error("Error fetching recalibration history:",L),Zt.error("Failed to fetch recalibration history")}finally{b(!1)}}async function R(){try{b(!0),console.log(" Fetching wastage report:"),console.log("  - month:",A),console.log("  - effectiveStoreId:",B),console.log("  - selectedStoreId:",t),console.log("  - locationType:",a),console.log("  - isClusterHead:",s);const L=await b5(e.user?.accessToken||"",A,B,a);console.log(" Wastage response:",L),console.log(" Wastage items found:",L?.items?.length||0),L?.items?.length>0&&console.log(" Sample item locationIds:",L.items.slice(0,3).map(H=>H.locationId)),k(L)}catch(L){console.error("Error fetching wastage report:",L),Zt.error("Failed to fetch wastage report")}finally{b(!1)}}async function Q(L){try{await g5(e.user?.accessToken||"",L),Zt.success("Recalibration approved successfully"),F()}catch(H){console.error("Error approving recalibration:",H),Zt.error("Failed to approve recalibration")}}async function V(L){const H=prompt("Please enter reason for rejection:");if(H)try{await x5(e.user?.accessToken||"",L,H),Zt.success("Recalibration rejected"),F()}catch(ce){console.error("Error rejecting recalibration:",ce),Zt.error("Failed to reject recalibration")}}function J(L){_(L),P(!0)}const ae=L=>new Date(L).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white flex-1",children:[n.jsx("h2",{className:"text-2xl mb-2",children:"Stock Recalibration Reports"}),n.jsxs("p",{className:"text-purple-100",children:[f==="pending"&&"Review and approve monthly stock recalibrations",f==="history"&&"View historical recalibration records",f==="wastage"&&"Analyze monthly wastage and counting errors"]})]}),r&&f==="history"&&a!=="production_house"&&n.jsxs("button",{onClick:r,className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-xl hover:from-emerald-700 hover:to-green-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(Dr,{className:"w-5 h-5"}),"New Recalibration"]})]}),n.jsxs("div",{className:"flex gap-2 bg-white rounded-lg p-2 shadow-sm",children:[d&&n.jsx("button",{onClick:()=>m("pending"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${f==="pending"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pending Approval"}),n.jsx("button",{onClick:()=>m("history"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${f==="history"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"History"}),n.jsx("button",{onClick:()=>m("wastage"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${f==="wastage"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Wastage Report"})]}),f==="wastage"&&n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Month"}),n.jsx("input",{type:"month",value:A,onChange:L=>E(L.target.value),className:"px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"})]}),N?n.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[n.jsx(gi,{className:"w-12 h-12 text-purple-600 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]}):n.jsxs(n.Fragment,{children:[f==="pending"&&n.jsx("div",{className:"space-y-4",children:p.length===0?n.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[n.jsx(zt,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"No pending recalibrations"})]}):p.map(L=>n.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border-2 border-gray-200 hover:border-purple-300 transition-all",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-1",children:L.locationName}),n.jsxs("p",{className:"text-sm text-gray-500",children:[ae(L.date),"  ",L.locationType==="production_house"?"Production House":"Store"]})]}),n.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:"Pending Approval"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[n.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Wastage Items"}),n.jsx("p",{className:"text-xl text-red-700",children:L.items?.filter(H=>H.adjustmentType==="wastage").length||0})]}),n.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-orange-600 mb-1",children:"Counting Errors"}),n.jsx("p",{className:"text-xl text-orange-700",children:L.items?.filter(H=>H.adjustmentType==="counting_error").length||0})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Total Items"}),n.jsx("p",{className:"text-xl text-blue-700",children:L.items?.length||0})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>J(L),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[n.jsx(lo,{className:"w-4 h-4"}),"View Details"]}),n.jsxs("button",{onClick:()=>Q(L.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(zt,{className:"w-4 h-4"}),"Approve"]}),n.jsxs("button",{onClick:()=>V(L.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[n.jsx(Na,{className:"w-4 h-4"}),"Reject"]})]})]},L.id))}),f==="history"&&n.jsx("div",{className:"space-y-4",children:v.length===0?n.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[n.jsx(Dr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"No recalibration history found"})]}):v.map(L=>n.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border-2 border-gray-200",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-1",children:L.locationName}),n.jsx("p",{className:"text-sm text-gray-500",children:ae(L.date)})]}),n.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${L.status==="approved"?"bg-green-100 text-green-700":L.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:L.status?.charAt(0).toUpperCase()+L.status?.slice(1)||"Pending"})]}),n.jsxs("button",{onClick:()=>J(L),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:[n.jsx(lo,{className:"w-4 h-4"}),"View Details"]})]},L.id))}),f==="wastage"&&n.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:!w||w.items?.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(p2,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"No wastage data for selected month"})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-lg p-4 text-white",children:[n.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Wastage"}),n.jsx("p",{className:"text-2xl",children:w.summary?.totalWastage||0}),n.jsx("p",{className:"text-xs opacity-75 mt-1",children:"items"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-4 text-white",children:[n.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Counting Errors"}),n.jsx("p",{className:"text-2xl",children:w.summary?.totalCountingErrors||0}),n.jsx("p",{className:"text-xs opacity-75 mt-1",children:"items"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-4 text-white",children:[n.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Recalibrations"}),n.jsx("p",{className:"text-2xl",children:w.summary?.totalRecalibrations||0}),n.jsx("p",{className:"text-xs opacity-75 mt-1",children:"this month"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-4 text-white",children:[n.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Locations"}),n.jsx("p",{className:"text-2xl",children:w.summary?.uniqueLocations||0}),n.jsx("p",{className:"text-xs opacity-75 mt-1",children:"stores/houses"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Wastage & Error Details"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Item Name"}),n.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Location"}),n.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"System Qty"}),n.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Actual Qty"}),n.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Difference"}),n.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Type"}),n.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Notes"})]})}),n.jsx("tbody",{children:w.items?.map((L,H)=>n.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[n.jsx("td",{className:"p-3 text-sm text-gray-900",children:L.itemName}),n.jsx("td",{className:"p-3 text-sm text-gray-600",children:L.locationName}),n.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[L.systemQuantity," ",L.unit]}),n.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[L.actualQuantity," ",L.unit]}),n.jsxs("td",{className:`p-3 text-sm text-center ${L.difference<0?"text-red-600":"text-green-600"}`,children:[L.difference>0?"+":"",L.difference]}),n.jsx("td",{className:"p-3 text-center",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${L.adjustmentType==="wastage"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:L.adjustmentType==="wastage"?"Wastage":"Counting Error"})}),n.jsx("td",{className:"p-3 text-sm text-gray-600",children:L.notes||"-"})]},H))})]})})]})]})})]}),C&&S&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 text-white",children:[n.jsx("h3",{className:"text-xl mb-1",children:S.locationName}),n.jsxs("p",{className:"text-purple-100 text-sm",children:[ae(S.date),"  ",S.locationType==="production_house"?"Production House":"Store"]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Item"}),n.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"System Qty"}),n.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Actual Qty"}),n.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Difference"}),n.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Type"}),n.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Notes"})]})}),n.jsx("tbody",{children:S.items?.map((L,H)=>n.jsxs("tr",{className:"border-b border-gray-200",children:[n.jsxs("td",{className:"p-3 text-sm text-gray-900",children:[L.itemName,n.jsx("span",{className:"text-xs text-gray-500 block",children:L.category})]}),n.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[L.systemQuantity," ",L.unit]}),n.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[L.actualQuantity," ",L.unit]}),n.jsxs("td",{className:`p-3 text-sm text-center ${L.difference<0?"text-red-600":L.difference>0?"text-green-600":"text-gray-600"}`,children:[L.difference>0?"+":"",L.difference]}),n.jsx("td",{className:"p-3 text-center",children:L.adjustmentType?n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${L.adjustmentType==="wastage"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:L.adjustmentType==="wastage"?"Wastage":"Counting Error"}):n.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),n.jsx("td",{className:"p-3 text-sm text-gray-600",children:L.notes||"-"})]},H))})]})})}),n.jsx("div",{className:"p-6 border-t border-gray-200",children:n.jsx("button",{onClick:()=>P(!1),className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})})]})}const nge=localStorage.getItem("DEBUG_MODE")==="true",Ti=nge,gs={info:"",debug:"",warn:"",error:"",success:"",api:"",db:"",user:"",store:"",production:"",inventory:"",sales:"",analytics:""};class age{info(t,...r){console.log(`${gs.info} ${t}`,...r)}success(t,...r){console.log(`${gs.success} ${t}`,...r)}warn(t,...r){console.warn(`${gs.warn} ${t}`,...r)}error(t,r,...a){console.error(`${gs.error} ${t}`,r,...a)}debug(t,...r){Ti&&console.log(`${gs.debug} ${t}`,...r)}debugUser(t,...r){Ti&&console.log(`${gs.user} ${t}`,...r)}debugStore(t,...r){Ti&&console.log(`${gs.store} ${t}`,...r)}debugProduction(t,...r){Ti&&console.log(`${gs.production} ${t}`,...r)}debugInventory(t,...r){Ti&&console.log(`${gs.inventory} ${t}`,...r)}debugSales(t,...r){Ti&&console.log(`${gs.sales} ${t}`,...r)}debugAnalytics(t,...r){Ti&&console.log(`${gs.analytics} ${t}`,...r)}debugApi(t,...r){Ti&&console.log(`${gs.api} ${t}`,...r)}debugDb(t,...r){Ti&&console.log(`${gs.db} ${t}`,...r)}enableDebug(){localStorage.setItem("DEBUG_MODE","true"),console.log(" Debug mode enabled. Refresh the page to see debug logs.")}disableDebug(){localStorage.removeItem("DEBUG_MODE"),console.log(" Debug mode disabled. Refresh the page.")}isDebugEnabled(){return Ti}}const Wr=new age;typeof window<"u"&&(window.logger=Wr);function sge(e,t){if(e.length===0)return"";const r=Object.keys(e[0]),a=r.join(","),s=e.map(i=>r.map(o=>{let l=i[o];return typeof l=="object"&&l!==null&&(l=JSON.stringify(l)),typeof l=="string"&&(l=l.replace(/"/g,'""'),(l.includes(",")||l.includes(`
`)||l.includes('"'))&&(l=`"${l}"`)),l??""}).join(","));return[a,...s].join(`
`)}function rx(e,t,r){const a=sge(t),s=new Blob([a],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),o=URL.createObjectURL(s);i.setAttribute("href",o),i.setAttribute("download",`${e}_${new Date().toISOString().split("T")[0]}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)}function ige(e,t){const r=JSON.stringify(t,null,2),a=new Blob([r],{type:"application/json;charset=utf-8;"}),s=document.createElement("a"),i=URL.createObjectURL(a);s.setAttribute("href",i),s.setAttribute("download",`${e}_${new Date().toISOString().split("T")[0]}.json`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}function oge(e,t){const r=e.map(a=>({Date:a.date,Store:a.storeName||t||"N/A","Cash Amount":a.cashAmount||0,"Paytm Amount":a.paytmAmount||0,"Online Sales":a.onlineSales||0,"Total Revenue":(a.cashAmount||0)+(a.paytmAmount||0)+(a.onlineSales||0),"Created By":a.createdBy||"N/A","Created At":a.createdAt?new Date(a.createdAt).toLocaleString():"N/A"}));rx("sales_report",r)}function lge(e,t){const r=e.map(a=>({Date:a.date,Store:a.storeName||t||"N/A",Category:a.category,Item:a.itemName,Quantity:a.quantity,Unit:a.unit||"N/A","Unit Cost":a.unitCost||0,"Total Cost":a.totalCost||0,Vendor:a.vendor||"N/A","Created By":a.createdBy||"N/A","Created At":a.createdAt?new Date(a.createdAt).toLocaleString():"N/A"}));rx("inventory_report",r)}function cge(e,t){const r=e.map(a=>({Date:a.date,Store:a.storeName||t||"N/A",Category:a.category,Description:a.description||"N/A",Amount:a.amount,"Payment Mode":a.paymentMode||"N/A","Created By":a.createdBy||"N/A","Created At":a.createdAt?new Date(a.createdAt).toLocaleString():"N/A"}));rx("overhead_report",r)}function dge(e,t){const r=e.map(a=>({Date:a.date,Store:a.storeName||t||"N/A","Approval Status":a.approvalStatus||"pending","Chicken Momos":a.chickenMomos?.final||0,"Chicken Cheese Momos":a.chickenCheeseMomos?.final||0,"Veg Momos":a.vegMomos?.final||0,"Cheese Corn Momos":a.cheeseCornMomos?.final||0,"Paneer Momos":a.paneerMomos?.final||0,"Veg Kurkure Momos":a.vegKurkureMomos?.final||0,"Chicken Kurkure Momos":a.chickenKurkureMomos?.final||0,"Total Production":(a.chickenMomos?.final||0)+(a.chickenCheeseMomos?.final||0)+(a.vegMomos?.final||0)+(a.cheeseCornMomos?.final||0)+(a.paneerMomos?.final||0)+(a.vegKurkureMomos?.final||0)+(a.chickenKurkureMomos?.final||0),"Dough Wastage":a.wastage?.dough||0,"Stuffing Wastage":a.wastage?.stuffing||0,"Batter Wastage":a.wastage?.batter||0,"Coating Wastage":a.wastage?.coating||0,"Total Wastage":(a.wastage?.dough||0)+(a.wastage?.stuffing||0)+(a.wastage?.batter||0)+(a.wastage?.coating||0),"Created By":a.createdBy||"N/A","Approved By":a.approvedBy||"N/A"}));rx("production_report",r)}function uge(e){const t={generatedAt:new Date().toISOString(),storeName:e.storeName||"All Stores",dateRange:e.dateRange,summary:{totalRevenue:e.metrics.totalRevenue,totalExpenses:e.metrics.totalExpenses,netProfit:e.metrics.netProfit,profitMargin:e.metrics.profitMargin,salesRecords:e.salesData.length,inventoryRecords:e.inventoryData.length,overheadRecords:e.overheadData.length,productionRecords:e.productionData?.length||0},salesData:e.salesData,inventoryData:e.inventoryData,overheadData:e.overheadData,productionData:e.productionData||[]};ige("analytics_report",t)}function hge(e){e.salesData.length>0&&oge(e.salesData,e.storeName),e.inventoryData.length>0&&setTimeout(()=>lge(e.inventoryData,e.storeName),100),e.overheadData.length>0&&setTimeout(()=>cge(e.overheadData,e.storeName),200),e.productionData&&e.productionData.length>0&&setTimeout(()=>dge(e.productionData,e.storeName),300)}const aj=({active:e,payload:t,label:r})=>e&&t&&t.length?n.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[n.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((a,s)=>n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),n.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[a.name,":"]}),n.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:["",a.value.toLocaleString()]})]},s))]}):null,fge=({active:e,payload:t})=>{if(e&&t&&t.length){const r=t[0];return n.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:r.payload.fill}}),n.jsx("p",{className:"text-gray-900",style:{fontSize:"14px",fontWeight:"600"},children:r.name})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex justify-between gap-4",children:[n.jsx("span",{className:"text-gray-600",style:{fontSize:"13px"},children:"Amount:"}),n.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:["",r.value.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between gap-4",children:[n.jsx("span",{className:"text-gray-600",style:{fontSize:"13px"},children:"Percentage:"}),n.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[r.payload.percentage,"%"]})]})]})]})}return null},mge=({active:e,payload:t,label:r})=>e&&t&&t.length?n.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[n.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((a,s)=>n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),n.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[a.name,":"]}),n.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[a.value.toLocaleString()," pcs"]})]},s))]}):null,pge=({active:e,payload:t,label:r})=>e&&t&&t.length?n.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[n.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((a,s)=>n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),n.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[a.name,":"]}),n.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[a.value.toFixed(2)," kg"]})]},s))]}):null;function o2({context:e,selectedStoreId:t,highlightRequestId:r,onNavigateToManageItems:a}){const s=e.user?.role==="cluster_head",i=e.user?.role==="manager",o=e.user?.role==="audit",l=e.user?.designation==="production_incharge",d=e.user?.designation==="store_incharge",[u,f]=M.useState(l?"production":"store"),[m,p]=M.useState(t||(s||i||l||o?null:e.user?.storeId)||null),g=u==="store"?m:null;Wr.debugStore("Analytics effectiveStoreId:",g),Wr.debugStore("Analytics mode:",u),console.log(" Local selected store ID:",m),console.log(" All stores in context:",e.stores),console.log(" Number of stores:",e.stores?.length);const[v,y]=M.useState(r?"production-requests":"profit");M.useEffect(()=>{Wr.debugAnalytics("activeView changed to:",v)},[v]),M.useEffect(()=>{u==="production"&&v!=="production"&&v!=="recalibration-reports"&&v!=="production-requests"?y("production"):(v==="production"||v==="recalibration-reports"||v==="production-requests")&&u==="store"?y("profit"):v==="store-recalibration"&&u==="production"&&y("production")},[u]);const[w,k]=M.useState("revenue"),[N,b]=M.useState("monthly"),[A,E]=M.useState("monthly"),[S,_]=M.useState({from:"2025-03-01",to:"2025-12-25"}),[C,P]=M.useState(0),[B,F]=M.useState([]),[O,R]=M.useState(!1),[Q,V]=M.useState(!0),[J,ae]=M.useState([]),[L,H]=M.useState([]),[ce,z]=M.useState(!1),[I,Z]=M.useState([]),[te,se]=M.useState(null),[be,Ee]=M.useState(null),[_e,me]=M.useState({chickenMomos:{dough:25,stuffing:15},chickenCheeseMomos:{dough:25,stuffing:18},vegMomos:{dough:25,stuffing:12},cheeseCornMomos:{dough:25,stuffing:16},paneerMomos:{dough:25,stuffing:14},vegKurkure:{dough:28,stuffing:12,batter:10,coating:5},chickenKurkure:{dough:28,stuffing:15,batter:10,coating:5}}),[ye,qe]=M.useState(!1),[G,He]=M.useState(null),[Ke,ut]=M.useState(5),[ze,Pe]=M.useState(5),[ke,Xe]=M.useState({chicken:{high:1200,medium:600,low:300},chickenCheese:{high:600,medium:300,low:150},veg:{high:600,medium:300,low:150},cheeseCorn:{high:600,medium:300,low:150},paneer:{high:600,medium:300,low:150},vegKurkure:{high:400,medium:200,low:100},chickenKurkure:{high:400,medium:200,low:100}}),[We,ct]=M.useState(!1),[Wt,Ut]=M.useState({}),[Vt,Ar]=M.useState(()=>{const ee=localStorage.getItem("momosPerPlate");return ee?parseInt(ee,10):6}),[ln,Xr]=M.useState(!1),[Ft,ir]=M.useState(6),[nt,Bt]=M.useState(l&&e.user?.storeId||null),$e=e.salesData,De=e.inventory,re=e.overheads,le=e.fixedCosts,Oe=e.productionData,[Le,rt]=M.useState(()=>{const ee=Oe.map(Ce=>Ce.date).filter((Ce,pe,de)=>de.indexOf(Ce)===pe).sort((Ce,pe)=>pe.localeCompare(Ce));return ee.length>0?ee[0]:os()}),[Ot,$t]=M.useState(()=>{const ee=Oe.filter(Ce=>Ce.approvalStatus==="approved").map(Ce=>Ce.date).filter((Ce,pe,de)=>de.indexOf(Ce)===pe).sort((Ce,pe)=>pe.localeCompare(Ce));return ee.length>0?ee[0]:os()}),[bt,hr]=M.useState("month"),[ht,Rr]=M.useState(""),[cr,fr]=M.useState(""),Jr=()=>{const ee=new Date;ee.setHours(0,0,0,0);const Ce=Ae=>{const Te=Ae.getFullYear(),Ne=String(Ae.getMonth()+1).padStart(2,"0"),Ue=String(Ae.getDate()).padStart(2,"0");return`${Te}-${Ne}-${Ue}`};let pe,de;switch(bt){case"today":pe=new Date(ee),de=new Date(ee);break;case"week":pe=new Date(ee);const Ae=pe.getDay(),Te=Ae===0?-6:1-Ae;pe.setDate(pe.getDate()+Te),de=new Date(pe),de.setDate(pe.getDate()+6);break;case"month":pe=new Date(ee.getFullYear(),ee.getMonth(),1),de=new Date(ee.getFullYear(),ee.getMonth()+1,0);break;case"year":pe=new Date(ee.getFullYear(),0,1),de=new Date(ee.getFullYear(),11,31);break;case"custom":ht&&cr?(pe=new Date(ht+"T00:00:00"),de=new Date(cr+"T00:00:00")):(pe=new Date(ee),de=new Date(ee));break;default:pe=new Date(ee),de=new Date(ee)}return{startDate:Ce(pe),endDate:Ce(de)}};M.useEffect(()=>{const ee=nt,Ce=Oe.filter(pe=>{if(!ee)return!0;const de=pe.storeId===ee,Ae=pe.productionHouseId===ee,Te=pe.productionHouseId||pe.storeId;return de||Ae||Te===ee}).map(pe=>pe.date).filter((pe,de,Ae)=>Ae.indexOf(pe)===de).sort((pe,de)=>de.localeCompare(pe));Ce.length>0?rt(Ce[0]):rt(os())},[nt,Oe]),M.useEffect(()=>{console.log(" Carry-Forward useEffect triggered:",{analyticsMode:u,selectedProductionHouseId:nt,hasProductionData:!!e.productionData?.length,hasProductionRequests:!!e.productionRequests?.length}),u==="production"&&nt?(console.log(" Conditions met - fetching opening balance..."),Kn()):console.log(" Conditions not met for carry-forward")},[nt,u,e.productionData,e.productionRequests]),M.useEffect(()=>{if((s||i||o)&&u==="production"&&!nt&&e.productionHouses&&e.productionHouses.length>0){const ee=e.productionHouses[0];console.log(" Auto-selecting first production house for Cluster Head/Manager:",ee.id,ee.name),Bt(ee.id)}},[u,s,i,e.productionHouses]);async function Kn(){try{const ee=new Date().toISOString().substring(0,7);console.log(" Starting opening balance calculation:"),console.log("   Current month:",ee),console.log("   Selected production house ID:",nt),console.log("   Available production data records:",Oe.length),console.log("   Available production requests:",e.productionRequests?.length||0),console.log("   Available stores (local):",I.length);const Ce=I.length>0?I:e.stores||[];let pe=nt;if(nt&&nt.startsWith("STORE-")){const Ne=Ce.find(Ue=>Ue.id===nt);Ne?.productionHouseId&&(pe=Ne.productionHouseId,console.log("   Resolved production house UUID:",pe))}if(!pe){console.log("    No production house UUID available, skipping recalibration fetch"),se(null),Ee(null);return}let de=await Sj(e.user?.accessToken||"",pe,"production_house");if(!de?.record&&pe){console.log("   No recalibration found with UUID, checking with mapped store ID...");const Ne=Ce.filter(Ue=>Ue.productionHouseId===pe);if(console.log("   Stores mapped to this production house:",Ne.map(Ue=>({id:Ue.id,name:Ue.name}))),Ne&&Ne.length>0)for(const Ue of Ne){console.log("   Trying to fetch recalibration with store ID:",Ue.id);const Ve=await Sj(e.user?.accessToken||"",Ue.id,"production_house");if(Ve?.record){console.log("    Found recalibration using store ID:",Ue.id),de=Ve;break}}}console.log(" Recalibration Response:",de);let Ae=null,Te=null;if(de?.record){const Ne=de.record.date.substring(0,7),Ue=parseInt(de.record.date.substring(8,10));console.log(" Recalibration date comparison:",{recalDate:Ne,recalDay:Ue,currentMonth:ee,isFirstOfMonth:Ue===1,match:Ne===ee}),Ne===ee?Ue===1?(console.log(" Recalibration on 1st of month - using as opening balance (RESET)"),console.log("   Recalibration items:",de.record.items),Ae={},de.record.items.forEach(Ve=>{const et=e.inventoryItems?.find(Ye=>Ye.id===Ve.itemId||Ye.name===Ve.itemId);if(et){const Pt=et.name.replace(/_([a-z])/g,It=>It[1].toUpperCase()).replace(/Momo(s)?$/i,"");Ae[Pt]=Ve.actualQuantity,console.log(`   Opening balance (1st of month): ${Ve.itemId} -> ${Pt} = ${Ve.actualQuantity}`)}else Ae[Ve.itemId]=Ve.actualQuantity,console.log(`   Opening balance item not found in inventory: ${Ve.itemId}, using as-is`)}),console.log("   Parsed opening balance:",Ae)):(console.log(" Mid-month recalibration detected - keeping opening balance from previous month"),console.log(`   Recalibration date: ${de.record.date} (day ${Ue})`),Ae=dr(pe),Te={},de.record.items.forEach(Ve=>{const et=e.inventoryItems?.find(Ye=>Ye.id===Ve.itemId||Ye.name===Ve.itemId);if(et){const Pt=et.name.replace(/_([a-z])/g,It=>It[1].toUpperCase()).replace(/Momo(s)?$/i,"");Te[Pt]=Ve.actualQuantity,console.log(`   Mid-month stock override: ${Ve.itemId} -> ${Pt} = ${Ve.actualQuantity}`)}else Te[Ve.itemId]=Ve.actualQuantity}),console.log("   Mid-month recalibration stock:",Te),console.log("   Opening balance (from previous month):",Ae)):(console.log(" Recalibration from previous month, calculating forward..."),Ae=_n(de.record,ee))}else console.log(" No recalibration found, calculating from previous month..."),Ae=dr(pe);se(de?.record||null),Ee(Ae),Te?(window.__midMonthRecalibration=Te,console.log(" Stored mid-month recalibration for stock override:",Te)):delete window.__midMonthRecalibration,console.log(" Opening Balance Calculated:",Ae)}catch(ee){console.error("Error fetching recalibration:",ee)}}function _n(ee,Ce){const pe=ee.date.substring(0,7),de={};ee.items.forEach(Ue=>{const Ve=e.inventoryItems?.find(et=>et.id===Ue.itemId||et.name===Ue.itemId);if(Ve){const Ye=Ve.name.replace(/_([a-z])/g,Pt=>Pt[1].toUpperCase()).replace(/Momo(s)?$/i,"");de[Ye]=Ue.actualQuantity,console.log(`   Recalibration item mapping: ${Ue.itemId} -> ${Ye} = ${Ue.actualQuantity}`)}else de[Ue.itemId]=Ue.actualQuantity,console.log(`   Recalibration item not found in inventory: ${Ue.itemId}, using as-is`)});const Ae=new Date(pe+"-01"),Te=new Date(Ce+"-01");let Ne=new Date(Ae);for(Ne.setMonth(Ne.getMonth()+1);Ne<Te;){const Ue=Ne.toISOString().substring(0,7),Ve=ve(nt,Ue),et=tt(nt,Ue);["chicken","chickenCheese","veg","cheeseCorn","paneer","vegKurkure","chickenKurkure"].forEach(Ye=>{de[Ye]=(de[Ye]||0)+(Ve[Ye]||0)-(et[Ye]||0)}),Ne.setMonth(Ne.getMonth()+1)}return de}function dr(ee){const Ce=new Date().toISOString().substring(0,7),[pe,de]=Ce.split("-").map(Number);let Ae=pe,Te=de-1;Te===0&&(Te=12,Ae=pe-1);const Ne=`${Ae}-${String(Te).padStart(2,"0")}`;console.log(" Calculating previous month closing stock for:",Ne),console.log("   Current month:",Ce," Previous month:",Ne);const Ue=ve(ee,Ne),Ve=tt(ee,Ne),et={};return["chicken","chickenCheese","veg","cheeseCorn","paneer","vegKurkure","chickenKurkure"].forEach(Ye=>{et[Ye]=(Ue[Ye]||0)-(Ve[Ye]||0)}),console.log("  Previous month production:",Ue),console.log("  Previous month deliveries:",Ve),console.log("  Calculated closing stock:",et),et}function ve(ee,Ce){if(!ee)return console.log(" getMonthProduction called with null phId"),{};console.log(` Getting production for phId: ${ee}, month: ${Ce}`),console.log(`   Total production records available: ${Oe.length}`);const pe=Oe.filter(de=>{if(!de.date.startsWith(Ce))return!1;const Ae=de.storeId===ee,Te=de.productionHouseId===ee;let Ne=de.productionHouseId;(!Ne||Ne.startsWith("STORE-"))&&de.storeId&&(Ne=(I.length>0?I:e.stores||[]).find(Ye=>Ye.id===de.storeId)?.productionHouseId||null);const Ue=Ne||de.storeId;return Ae||Te||Ue===ee});return console.log(`   Filtered production records: ${pe.length}`),pe.reduce((de,Ae)=>({chicken:de.chicken+(Ae.chickenMomos?.final||0),chickenCheese:de.chickenCheese+(Ae.chickenCheeseMomos?.final||0),veg:de.veg+(Ae.vegMomos?.final||0),cheeseCorn:de.cheeseCorn+(Ae.cheeseCornMomos?.final||0),paneer:de.paneer+(Ae.paneerMomos?.final||0),vegKurkure:de.vegKurkure+(Ae.vegKurkureMomos?.final||0),chickenKurkure:de.chickenKurkure+(Ae.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}function tt(ee,Ce){if(!ee)return console.log(" getMonthDeliveries called with null phId"),{};console.log(` Getting deliveries for phId: ${ee}, month: ${Ce}`),console.log(`   Total production requests available: ${e.productionRequests?.length||0}`);const pe=I.length>0?I:e.stores||[];let de=ee;if(ee&&ee.startsWith("STORE-")){const Te=pe.find(Ne=>Ne.id===ee);Te?.productionHouseId&&(de=Te.productionHouseId,console.log(`   Resolved UUID: ${de}`))}const Ae=(e.productionRequests||[]).filter(Te=>{if(Te.status!=="delivered")return!1;const Ne=Te.deliveredDate||Te.requestDate||Te.createdAt;return!Ne||!Ne.startsWith(Ce)?!1:pe.find(Ve=>Ve.id===Te.storeId)?.productionHouseId===de});return console.log(`   Filtered delivered requests: ${Ae.length}`),Ae.reduce((Te,Ne)=>({chicken:Te.chicken+(Ne.chickenMomos||0),chickenCheese:Te.chickenCheese+(Ne.chickenCheeseMomos||0),veg:Te.veg+(Ne.vegMomos||0),cheeseCorn:Te.cheeseCorn+(Ne.cheeseCornMomos||0),paneer:Te.paneer+(Ne.paneerMomos||0),vegKurkure:Te.vegKurkure+(Ne.vegKurkureMomos||0),chickenKurkure:Te.chickenKurkure+(Ne.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}Wr.isDebugEnabled()&&(Wr.debugAnalytics("Production Data Debug:"),Wr.debugAnalytics("  - Total production records:",Oe.length),Wr.debugAnalytics("  - Production data records:",Oe.map(ee=>({id:ee.id,date:ee.date,storeId:ee.storeId,productionHouseId:ee.productionHouseId,approvalStatus:ee.approvalStatus,chickenMomos:ee.chickenMomos?.final||0,totalProduction:(ee.chickenMomos?.final||0)+(ee.vegMomos?.final||0)+(ee.chickenCheeseMomos?.final||0)+(ee.cheeseCornMomos?.final||0)+(ee.paneerMomos?.final||0)+(ee.vegKurkureMomos?.final||0)+(ee.chickenKurkureMomos?.final||0)}))),Wr.debugAnalytics("  - Selected production house ID:",nt),Wr.debugAnalytics("  - Analytics mode:",u),Wr.debugAnalytics("  - User storeId:",e.user?.storeId),Wr.debugAnalytics("  - User designation:",e.user?.designation),Wr.debugAnalytics("  - Is Production Incharge:",l),Wr.debugAnalytics("  - Available production houses:",e.productionHouses.map(ee=>({id:ee.id,name:ee.name}))),Wr.debugAnalytics("  - Available stores:",e.stores?.map(ee=>({id:ee.id,name:ee.name,productionHouseId:ee.productionHouseId}))),Wr.debugAnalytics("  - Production Incharge Specific:"),Wr.debugAnalytics("     - User storeId (should be production house ID):",e.user?.storeId),Wr.debugAnalytics("     - Does user storeId match any production house?",e.productionHouses.find(ee=>ee.id===e.user?.storeId)),Wr.debugAnalytics("     - Production data storeIds:",[...new Set(Oe.map(ee=>ee.storeId))]),Wr.debugAnalytics("     - Production data productionHouseIds:",[...new Set(Oe.map(ee=>ee.productionHouseId))]),Wr.debugAnalytics("     - Stores that map to user production house:",e.stores?.filter(ee=>ee.productionHouseId===e.user?.storeId).map(ee=>({id:ee.id,name:ee.name}))));const at=(ee,Ce="date")=>{const pe=new Date,de=new Date(pe.getFullYear(),pe.getMonth(),pe.getDate());return ee.filter(Ae=>{const Te=new Date(Ae[Ce]),Ne=new Date(Te.getFullYear(),Te.getMonth(),Te.getDate());switch(N){case"daily":const Ue=new Date(de);return Ue.setDate(Ue.getDate()-10),Ne>=Ue&&Ne<=de;case"weekly":const Ve=new Date(de);return Ve.setDate(Ve.getDate()-70),Ne>=Ve&&Ne<=de;case"monthly":const et=new Date(de);return et.setMonth(et.getMonth()-10),Ne>=et&&Ne<=de;case"yearly":const Ye=new Date(de);return Ye.setFullYear(Ye.getFullYear()-5),Ne>=Ye&&Ne<=de;case"custom":const Pt=new Date(S.from),It=new Date(S.to);return Ne>=Pt&&Ne<=It;default:return!0}})},pt=at($e),ft=at(De),U=at(re),oe=at(le),ne=at(J,"payoutDate"),Y=M.useMemo(()=>{Wr.debugSales("=== SALES DATA FILTERING ==="),Wr.debugSales("Total sales records (time-filtered):",pt.length),Wr.debugSales("effectiveStoreId:",g),console.log("User role:",e.user?.role),console.log("All sales storeIds:",pt.map(de=>de.storeId)),console.log("User storeId:",e.user?.storeId);const ee=pt.filter(de=>{const Ae=new Date(de.date);return Ae.getDate()===28&&Ae.getMonth()===11});if(console.log("December 28th sales found:",ee.length),ee.forEach(de=>{console.log(`  - Date: ${de.date}, StoreId: ${de.storeId}, Revenue: ${(de.paytmAmount||0)+(de.cashAmount||0)+(de.onlineSales||0)}`)}),!g)return console.log("No store filter - returning all",pt.length,"sales"),pt;const Ce=pt.filter(de=>de.storeId===g);console.log("After store filtering (exact match only):",Ce.length,"sales"),console.log("Filtered sales details:",Ce.map(de=>({date:de.date,storeId:de.storeId,total:(de.offlineSales||0)+(de.onlineSales||0)})));const pe=pt.filter(de=>de.storeId!==g);return console.log("Filtered out (all non-matching storeIds):",pe.length,"sales"),pe.length>0&&console.log("Sample filtered out sales storeIds:",pe.slice(0,5).map(de=>de.storeId)),console.log(" === END DEBUG ==="),Ce},[pt,g]),q=M.useMemo(()=>{console.log(" === INVENTORY DATA FILTERING DEBUG ==="),console.log("Total inventory records (time-filtered):",ft.length),console.log("effectiveStoreId:",g);const ee=ft.filter(pe=>{const de=new Date(pe.date);return de.getDate()===28&&de.getMonth()===11});if(console.log("December 28th inventory found:",ee.length),ee.forEach(pe=>{console.log(`  - Date: ${pe.date}, StoreId: ${pe.storeId}, Cost: ${pe.totalCost||0}`)}),!g)return console.log("No store filter - returning all",ft.length,"inventory items"),ft;const Ce=ft.filter(pe=>pe.storeId===g);return console.log("After store filtering (exact match only):",Ce.length,"inventory items"),console.log(" === END INVENTORY DEBUG ==="),Ce},[ft,g]),W=M.useMemo(()=>{console.log(" === OVERHEAD DATA FILTERING DEBUG ==="),console.log("Total overhead records (time-filtered):",U.length),console.log("effectiveStoreId:",g);const ee=U.filter(pe=>{const de=new Date(pe.date);return de.getDate()===28&&de.getMonth()===11});if(console.log("December 28th overhead found:",ee.length),ee.forEach(pe=>{console.log(`  - Date: ${pe.date}, StoreId: ${pe.storeId}, Amount: ${pe.amount||0}`)}),!g)return console.log("No store filter - returning all",U.length,"overhead items"),U;const Ce=U.filter(pe=>pe.storeId===g);return console.log("After store filtering (exact match only):",Ce.length,"overhead items"),console.log("Filtered overhead storeIds:",Ce.map(pe=>({date:pe.date,storeId:pe.storeId,amount:pe.amount}))),console.log(" === END OVERHEAD DEBUG ==="),Ce},[U,g]),ie=M.useMemo(()=>g?oe.filter(ee=>ee.storeId===g):oe,[oe,g]),he=M.useMemo(()=>g?L.filter(ee=>ee.storeId===g):L,[L,g]),K=M.useMemo(()=>{let ee=ne;if(g){const Ce=he.map(pe=>pe.id);ee=ee.filter(pe=>Ce.includes(pe.employeeId))}return ee},[ne,he,g]);M.useEffect(()=>{(async()=>{try{const[Ce,pe]=await Promise.all([il(),cl()]);ae(Ce||[]),H(pe||[])}catch(Ce){console.error("Error loading payouts and employees:",Ce),ae([]),H([])}})()},[]),M.useEffect(()=>{(async()=>{if(console.log(" Store Loading Check:",{isClusterHead:s,analyticsMode:u,shouldLoad:s||u==="production"}),!(!s&&u!=="production"))try{const Ce=await nu();Z(Ce),console.log(" Loaded stores for analytics:",Ce.length,"stores"),console.log(" Store details:",Ce.map(pe=>({id:pe.id,name:pe.name,productionHouseId:pe.productionHouseId})))}catch(Ce){console.error(" Error loading stores:",Ce)}})()},[s,u]);const ue=async()=>{try{const ee=tu(),{data:{session:Ce}}=await ee.auth.getSession();return Ce?.access_token||null}catch(ee){return console.error("Error getting fresh token:",ee),null}};M.useEffect(()=>{(async()=>{if(e.user)try{V(!0);const Ce=await ue();if(!Ce){console.error("No valid access token available");return}const pe=os();if(e.user.role==="cluster_head"){const Ae=(await WD(Ce)).filter(Ue=>Ue.leaveDate===pe&&Ue.status==="approved"),Te=await Ks(Ce),Ne=new Map(Te.map(Ue=>[Ue.employeeId,Ue]));if(e.user.storeId){const Ue=Te.filter(Ye=>Ye.storeId===e.user.storeId||Ye.storeId===null||Ye.storeId===void 0).map(Ye=>Ye.employeeId),Ve=Ae.filter(Ye=>Ue.includes(Ye.employeeId)),et=Ve.map(Ye=>({...Ye,employeeName:Ne.get(Ye.employeeId)?.name||"Unknown",storeId:Ne.get(Ye.employeeId)?.storeId||"N/A",storeName:Ne.get(Ye.employeeId)?.storeName||"N/A"}));P(Ve.length),F(et)}else{const Ue=Ae.map(Ve=>({...Ve,employeeName:Ne.get(Ve.employeeId)?.name||"Unknown",storeId:Ne.get(Ve.employeeId)?.storeId||"N/A",storeName:Ne.get(Ve.employeeId)?.storeName||"N/A"}));P(Ae.length),F(Ue)}}else if(e.user.role==="manager"&&e.user.employeeId){const de=await nc(e.user.employeeId,Ce),Ae=new Map(de.map(Ne=>[Ne.employeeId,Ne]));let Te=[];for(const Ne of de){const et=(await au(Ne.employeeId,Ce)).filter(Ye=>Ye.leaveDate===pe&&Ye.status==="approved").map(Ye=>({...Ye,employeeName:Ae.get(Ye.employeeId)?.name||"Unknown",storeId:Ae.get(Ye.employeeId)?.storeId||"N/A",storeName:Ae.get(Ye.employeeId)?.storeName||"N/A"}));Te.push(...et)}P(Te.length),F(Te)}else P(0),F([])}catch(Ce){console.error("Error loading today's leaves:",Ce),P(0)}finally{V(!1)}})()},[e.user]),M.useEffect(()=>{console.log(" Analytics - highlightRequestId changed:",r),r&&(console.log(" Analytics - Switching to production-requests tab"),y("production-requests"))},[r]);const fe=()=>{switch(N){case"daily":return"Last 10 days";case"weekly":return"Last 10 weeks";case"monthly":return"Last 10 months";case"yearly":return"Last 5 years";case"custom":return`${S.from} to ${S.to}`;default:return"Current period"}},Me=()=>{console.log(" === METRICS CALCULATION DEBUG ==="),console.log("Time filter:",N),console.log("Filtered sales data count:",Y.length),console.log("Filtered inventory data count:",q.length),console.log("Filtered overhead data count:",W.length),console.log("Filtered fixed costs data count:",ie.length);const ee=Y.reduce((yt,vt)=>yt+(vt.paytmAmount||0)+(vt.cashAmount||0)+(vt.onlineSales||0),0);console.log("Total revenue calculated:",ee);const Ce=Y.reduce((yt,vt)=>yt+(vt.onlineSales||0),0),pe=Y.reduce((yt,vt)=>yt+(vt.paytmAmount||0)+(vt.cashAmount||0),0),de=q.reduce((yt,vt)=>yt+(vt.totalCost||0),0);console.log("Inventory expenses:",de);const Ae=W.reduce((yt,vt)=>yt+(vt.amount||0),0),Te=W.filter(yt=>yt.category==="commission").reduce((yt,vt)=>yt+(vt.amount||0),0);console.log("Total commission (as expense):",Te);const Ne=ie.filter(yt=>yt.category==="electricity").reduce((yt,vt)=>yt+(vt.amount||0),0),Ue=ie.filter(yt=>yt.category==="rent").reduce((yt,vt)=>yt+(vt.amount||0),0),Ve=Y.reduce((yt,vt)=>yt+(vt.employeeSalary||0),0);let et=0;if(N==="monthly"||N==="yearly"||N==="custom"){let yt=K;if(g){const vt=he.map(ur=>ur.id);yt=yt.filter(ur=>vt.includes(ur.employeeId))}et=yt.reduce((vt,ur)=>{const vr=he.find(Ct=>Ct.id===ur.employeeId);return vr&&vr.type==="fulltime"?vt+(ur.amount||0):vt},0)}const Ye=Ve+et,Pt=Ne+Ue+Ye,It=de+Ae+Pt,_r=ee-It,nn=ee>0?_r/ee*100:0;return console.log("Total expenses:",It),console.log("Net profit:",_r),console.log(" === END METRICS DEBUG ==="),{totalRevenue:ee,onlineRevenue:Ce,offlineRevenue:pe,commissionExpenses:Te,totalExpenses:It,inventoryExpenses:de,overheadExpenses:Ae,fixedCostsTotal:Pt,electricityExpenses:Ne,rentExpenses:Ue,salaryExpenses:Ye,contractWorkerExpenses:Ve,permanentEmployeeExpenses:et,netProfit:_r,profitMargin:nn}},we=M.useMemo(()=>Me(),[Y,q,W,ie,K,N]),lt=()=>{const ee={};return Y.forEach(Ce=>{const de=new Date(Ce.date).toLocaleString("default",{month:"short"});ee[de]||(ee[de]={month:de,revenue:0,expenses:0,profit:0});const Ae=(Ce.paytmAmount||0)+(Ce.cashAmount||0)+(Ce.onlineSales||0);ee[de].revenue+=Ae}),q.forEach(Ce=>{const de=new Date(Ce.date).toLocaleString("default",{month:"short"});ee[de]||(ee[de]={month:de,revenue:0,expenses:0,profit:0}),ee[de].expenses+=Ce.totalCost||0}),W.forEach(Ce=>{const de=new Date(Ce.date).toLocaleString("default",{month:"short"});ee[de]||(ee[de]={month:de,revenue:0,expenses:0,profit:0}),ee[de].expenses+=Ce.amount||0}),Object.keys(ee).forEach(Ce=>{ee[Ce].profit=ee[Ce].revenue-ee[Ce].expenses}),Object.values(ee)},Ge=M.useMemo(()=>lt(),[Y,q,W]),Ze=()=>{const ee=new Date,Ce=[];if(N==="daily")for(let pe=9;pe>=0;pe--){const de=new Date(ee);de.setDate(de.getDate()-pe);const Ae=de.toISOString().split("T")[0],Te=de.toLocaleDateString("default",{month:"short",day:"numeric"}),Ne=Y.filter(Ye=>Ye.date===Ae),Ue=Ne.reduce((Ye,Pt)=>Ye+(Pt.onlineSales||0),0),Ve=Ne.reduce((Ye,Pt)=>Ye+(Pt.paytmAmount||0)+(Pt.cashAmount||0),0),et=Ue+Ve;et>0&&Ce.push({period:Te,online:Ue,offline:Ve,total:et})}else if(N==="weekly")for(let pe=9;pe>=0;pe--){const de=new Date(ee);de.setDate(de.getDate()-pe*7);const Ae=new Date(de);Ae.setDate(Ae.getDate()-6);const Te=Ae.toLocaleDateString("default",{month:"short",day:"numeric"}),Ne=de.toLocaleDateString("default",{month:"short",day:"numeric"}),Ue=`${Te} - ${Ne}`,Ve=Y.filter(It=>{const _r=new Date(It.date);return _r>=Ae&&_r<=de}),et=Ve.reduce((It,_r)=>It+(_r.onlineSales||0),0),Ye=Ve.reduce((It,_r)=>It+(_r.paytmAmount||0)+(_r.cashAmount||0),0),Pt=et+Ye;Pt>0&&Ce.push({period:Ue,online:et,offline:Ye,total:Pt})}else if(N==="monthly")for(let pe=9;pe>=0;pe--){const de=new Date(ee);de.setMonth(de.getMonth()-pe);const Ae=de.toLocaleDateString("default",{month:"short",year:"2-digit"}),Te=de.toLocaleString("default",{month:"short"}),Ne=de.getFullYear().toString(),Ue=Y.filter(Pt=>{const It=new Date(Pt.date);return It.toLocaleString("default",{month:"short"})===Te&&It.getFullYear().toString()===Ne}),Ve=Ue.reduce((Pt,It)=>Pt+(It.onlineSales||0),0),et=Ue.reduce((Pt,It)=>Pt+(It.paytmAmount||0)+(It.cashAmount||0),0),Ye=Ve+et;Ye>0&&Ce.push({period:Ae,online:Ve,offline:et,total:Ye})}else if(N==="yearly")for(let pe=4;pe>=0;pe--){const de=ee.getFullYear()-pe,Ae=Y.filter(Ve=>new Date(Ve.date).getFullYear()===de),Te=Ae.reduce((Ve,et)=>Ve+(et.onlineSales||0),0),Ne=Ae.reduce((Ve,et)=>Ve+(et.paytmAmount||0)+(et.cashAmount||0),0),Ue=Te+Ne;Ue>0&&Ce.push({period:de.toString(),online:Te,offline:Ne,total:Ue})}else if(N==="custom"){const pe={};return Y.forEach(de=>{const Te=new Date(de.date).toLocaleDateString("default",{month:"short",year:"2-digit"});pe[Te]||(pe[Te]={period:Te,online:0,offline:0,total:0});const Ne=de.onlineSales||0,Ue=(de.paytmAmount||0)+(de.cashAmount||0);pe[Te].online+=Ne,pe[Te].offline+=Ue,pe[Te].total+=Ne+Ue}),Object.values(pe)}return Ce},jt=M.useMemo(()=>Ze(),[Y,N]),Gt=()=>{const ee=new Date,Ce=[];if(N==="daily")for(let pe=4;pe>=0;pe--){const de=new Date(ee);de.setDate(de.getDate()-pe);const Ae=de.toISOString().split("T")[0],Te=de.toLocaleDateString("default",{month:"short",day:"numeric"}),Ne=(Y||[]).filter(vt=>vt.date===Ae),Ue=Ne.reduce((vt,ur)=>vt+(ur.paytmAmount||0)+(ur.cashAmount||0)+(ur.onlineSales||0),0),Ve=Ne.reduce((vt,ur)=>vt+(ur.onlineSalesCommission||0),0),et=Ue-Ve,Ye=(q||[]).filter(vt=>vt.date===Ae),Pt=(W||[]).filter(vt=>vt.date===Ae),It=Ye.reduce((vt,ur)=>vt+(ur.totalCost||0),0),_r=Pt.reduce((vt,ur)=>vt+(ur.amount||0),0),nn=Ne.reduce((vt,ur)=>vt+(ur.employeeSalary||0),0),yt=It+_r+nn;Ce.push({period:Te,revenue:et,expenses:yt,profit:et-yt})}else if(N==="weekly")for(let pe=4;pe>=0;pe--){const de=new Date(ee);de.setDate(de.getDate()-pe*7);const Ae=new Date(de);Ae.setDate(Ae.getDate()-6);const Te=Ae.toLocaleDateString("default",{month:"short",day:"numeric"}),Ne=de.toLocaleDateString("default",{month:"short",day:"numeric"}),Ue=`${Te} - ${Ne}`,Ve=(Y||[]).filter(vr=>{const Ct=new Date(vr.date);return Ct>=Ae&&Ct<=de}),et=Ve.reduce((vr,Ct)=>vr+(Ct.paytmAmount||0)+(Ct.cashAmount||0)+(Ct.onlineSales||0),0),Ye=Ve.reduce((vr,Ct)=>vr+(Ct.onlineSalesCommission||0),0),Pt=et-Ye,It=(q||[]).filter(vr=>{const Ct=new Date(vr.date);return Ct>=Ae&&Ct<=de}),_r=(W||[]).filter(vr=>{const Ct=new Date(vr.date);return Ct>=Ae&&Ct<=de}),nn=It.reduce((vr,Ct)=>vr+(Ct.totalCost||0),0),yt=_r.reduce((vr,Ct)=>vr+(Ct.amount||0),0),vt=Ve.reduce((vr,Ct)=>vr+(Ct.employeeSalary||0),0),ur=nn+yt+vt;Ce.push({period:Ue,revenue:Pt,expenses:ur,profit:Pt-ur})}else if(N==="monthly")for(let pe=4;pe>=0;pe--){const de=new Date(ee);de.setMonth(de.getMonth()-pe);const Ae=de.toLocaleDateString("default",{month:"short",year:"2-digit"}),Te=de.getMonth(),Ne=de.getFullYear(),Ue=(Y||[]).filter(br=>{const Re=new Date(br.date);return Re.getMonth()===Te&&Re.getFullYear()===Ne}),Ve=Ue.reduce((br,Re)=>br+(Re.paytmAmount||0)+(Re.cashAmount||0)+(Re.onlineSales||0),0),et=Ue.reduce((br,Re)=>br+(Re.onlineSalesCommission||0),0),Ye=Ve-et,Pt=(q||[]).filter(br=>{const Re=new Date(br.date);return Re.getMonth()===Te&&Re.getFullYear()===Ne}),It=(W||[]).filter(br=>{const Re=new Date(br.date);return Re.getMonth()===Te&&Re.getFullYear()===Ne}),_r=(ie||[]).filter(br=>{const Re=new Date(br.date);return Re.getMonth()===Te&&Re.getFullYear()===Ne}),nn=Pt.reduce((br,Re)=>br+(Re.totalCost||0),0),yt=It.reduce((br,Re)=>br+(Re.amount||0),0),vt=_r.reduce((br,Re)=>br+(Re.amount||0),0),ur=Ue.reduce((br,Re)=>br+(Re.employeeSalary||0),0);let vr=0,Ct=J.filter(br=>{const Re=new Date(br.month+"-01");return Re.getMonth()===Te&&Re.getFullYear()===Ne});if(g){const br=he.map(Re=>Re.id);Ct=Ct.filter(Re=>br.includes(Re.employeeId))}vr=Ct.reduce((br,Re)=>{const Lt=he.find(jr=>jr.id===Re.employeeId);return Lt&&Lt.type==="fulltime"?br+(Re.amount||0):br},0);const mr=nn+yt+vt+ur+vr;Ce.push({period:Ae,revenue:Ye,expenses:mr,profit:Ye-mr})}else if(N==="yearly")for(let pe=4;pe>=0;pe--){const de=ee.getFullYear()-pe,Ae=(Y||[]).filter(Ct=>new Date(Ct.date).getFullYear()===de),Te=Ae.reduce((Ct,mr)=>Ct+(mr.paytmAmount||0)+(mr.cashAmount||0)+(mr.onlineSales||0),0),Ne=Ae.reduce((Ct,mr)=>Ct+(mr.onlineSalesCommission||0),0),Ue=Te-Ne,Ve=(q||[]).filter(Ct=>new Date(Ct.date).getFullYear()===de),et=(W||[]).filter(Ct=>new Date(Ct.date).getFullYear()===de),Ye=(ie||[]).filter(Ct=>new Date(Ct.date).getFullYear()===de),Pt=Ve.reduce((Ct,mr)=>Ct+(mr.totalCost||0),0),It=et.reduce((Ct,mr)=>Ct+(mr.amount||0),0),_r=Ye.reduce((Ct,mr)=>Ct+(mr.amount||0),0),nn=Ae.reduce((Ct,mr)=>Ct+(mr.employeeSalary||0),0);let yt=0,vt=J;if(g){const Ct=he.map(mr=>mr.id);vt=vt.filter(mr=>Ct.includes(mr.employeeId))}yt=vt.reduce((Ct,mr)=>{const br=he.find(Re=>Re.id===mr.employeeId);return br&&br.type==="fulltime"?Ct+(mr.amount||0):Ct},0)*12;const vr=Pt+It+_r+nn+yt;Ce.push({period:de.toString(),revenue:Ue,expenses:vr,profit:Ue-vr})}else if(N==="custom")return Ge;return Ce},ar=M.useMemo(()=>Gt(),[Y,q,W,N]),vn=(()=>{const ee={};return q.forEach(pe=>{const de=pe.category||"Other";ee[de]||(ee[de]=0),ee[de]+=pe.totalCost||0}),W.forEach(pe=>{const de=pe.category||"Other",Ae=u2[de]||de;ee[Ae]||(ee[Ae]=0),ee[Ae]+=pe.amount||0}),ie.forEach(pe=>{const de=pe.category||"Other",Ae=h2[de]||de;ee[Ae]||(ee[Ae]=0),ee[Ae]+=pe.amount||0}),we.salaryExpenses>0&&(ee[" Salaries"]=we.salaryExpenses),Object.keys(ee).map(pe=>({name:sg[pe]||pe,value:ee[pe],percentage:(ee[pe]/we.totalExpenses*100).toFixed(1)})).sort((pe,de)=>de.value-pe.value)})(),Tr=["#ec4899","#a78bfa","#fbbf24","#34d399","#60a5fa","#f87171","#fb923c","#8b5cf6","#10b981","#f59e0b"],Fr=Y.filter(Ce=>Ce.approvalRequired===!1&&Ce.approvedBy).reduce((Ce,pe)=>{const de=pe.salesDiscrepancy!==void 0?pe.salesDiscrepancy:pe.cashOffset||0;return Ce+(de<0?Math.abs(de):0)},0),Ea=we.netProfit,Lr=Ea-Fr;return n.jsxs("div",{className:"min-h-screen bg-gray-50 p-3 sm:p-6",children:[n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-4 sm:mb-8 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl sm:text-3xl text-gray-900 mb-1 sm:mb-2",children:"Analytics Dashboard"}),n.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Track revenue, expenses, and profitability"})]}),s&&!1]}),!Q&&(e.user?.role==="cluster_head"||e.user?.role==="manager")&&n.jsx("div",{onClick:()=>R(!0),className:`mb-4 sm:mb-6 rounded-lg shadow-sm border-2 p-4 transition-all cursor-pointer hover:shadow-md ${C===0?"bg-green-50 border-green-200 hover:bg-green-100":"bg-orange-50 border-orange-200 hover:bg-orange-100"}`,children:n.jsx("div",{className:"flex items-center gap-3",children:C===0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(kn,{className:"w-5 h-5 text-green-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-green-900",children:[n.jsx("span",{className:"text-green-600",children:""})," Everyone is working today"]}),n.jsx("p",{className:"text-sm text-green-700 mt-0.5",children:e.user.storeId?"No employees on leave in this store":"No employees on leave across all stores"})]}),n.jsx("div",{className:"text-green-600 text-sm",children:"Click to view"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:n.jsx(FE,{className:"w-5 h-5 text-orange-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-orange-900",children:[n.jsx("span",{className:"text-orange-700",children:C})," ",C===1?"person is":"people are"," on leave today"]}),n.jsx("p",{className:"text-sm text-orange-700 mt-0.5",children:e.user.storeId?"In this store":"Across all stores"})]}),n.jsx("div",{className:"text-orange-600 text-sm",children:"Click to view details"})]})})}),(s||i||l||d||o)&&n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl shadow-lg mb-6 p-4 border border-purple-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-purple-900",style:{fontSize:"16px",fontWeight:"700"},children:d?"Store Analytics Dashboard":o?"Audit Analytics Dashboard":"Analytics Dashboard"}),!d&&n.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-1 shadow-sm",children:[n.jsx("button",{onClick:()=>f("store"),className:`px-4 py-2 rounded-md transition-all duration-200 ${u==="store"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md":"text-gray-600 hover:text-gray-900"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(id,{className:"w-4 h-4"}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"600"},children:"Store Analytics"})]})}),n.jsx("button",{onClick:()=>f("production"),className:`px-4 py-2 rounded-md transition-all duration-200 ${u==="production"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md":"text-gray-600 hover:text-gray-900"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pn,{className:"w-4 h-4"}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"600"},children:"Production Analytics"})]})})]})]}),n.jsx("p",{className:"text-purple-700 text-sm",children:u==="store"?"Track revenue, expenses, and profitability across stores":"Monitor production metrics, wastage, and SOP compliance"})]}),u==="store"&&n.jsx(n.Fragment,{children:s||i||l||o?n.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Store Selection"}),n.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Select a store to view its analytics data"})]}),n.jsxs("select",{value:m||"",onChange:ee=>p(ee.target.value||null),className:"px-4 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"14px",fontWeight:"600"},children:[n.jsx("option",{value:"",children:"All Stores"}),e.stores?.map(ee=>n.jsxs("option",{value:ee.id,children:[ee.name," (ID: ",ee.id,")"]},ee.id))]})]})}):e.user?.storeId&&n.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(id,{className:"w-6 h-6 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Your Store Analytics"}),n.jsxs("p",{className:"text-blue-700 text-sm mt-1",children:["Viewing data for: ",e.stores?.find(ee=>ee.id===e.user?.storeId)?.name||"Your Store"]})]})]})})}),u==="production"&&n.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl shadow-lg mb-6 p-4 border border-orange-200",children:s||i||o?n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-orange-900",style:{fontSize:"16px",fontWeight:"700"},children:"Production House Selection"}),n.jsx("p",{className:"text-orange-700 text-sm mt-1",children:"View production metrics and recalibration data for a specific production house"})]}),n.jsxs("select",{value:nt||"",onChange:ee=>{const Ce=ee.target.value||null;console.log(" Production Analytics - Production House Selector Changed:",Ce),Bt(Ce)},className:"px-4 py-2 bg-white border-2 border-orange-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500",style:{fontSize:"14px",fontWeight:"600"},children:[!nt&&n.jsx("option",{value:"",children:"Select Production House"}),e.productionHouses?.map(ee=>n.jsxs("option",{value:ee.id,children:[ee.name," (ID: ",ee.id,")"]},ee.id))]})]}):l&&e.user?.storeId?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Pn,{className:"w-6 h-6 text-orange-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-orange-900",style:{fontSize:"16px",fontWeight:"700"},children:"Your Production House Analytics"}),n.jsxs("p",{className:"text-orange-700 text-sm mt-1",children:["Viewing data for: ",(()=>{const ee=e.stores?.find(pe=>pe.id===e.user?.storeId);return e.productionHouses?.find(pe=>pe.id===ee?.productionHouseId)?.name||"Your Production House"})()]})]})]}):null}),n.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl shadow-lg mb-6 p-2 border border-gray-200",children:u==="store"?n.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-2",children:[n.jsxs("button",{onClick:()=>y("profit"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${v==="profit"?"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-lg shadow-emerald-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(hn,{className:`w-6 h-6 ${v==="profit"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),n.jsx("span",{className:"font-semibold text-sm",children:"Profit Analysis"})]}),v==="profit"&&n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-emerald-500 rounded-full"})]}),n.jsxs("button",{onClick:()=>y("expense"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${v==="expense"?"bg-gradient-to-br from-rose-500 to-rose-600 text-white shadow-lg shadow-rose-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(qn,{className:`w-6 h-6 ${v==="expense"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),n.jsx("span",{className:"font-semibold text-sm",children:"Expenses"})]}),v==="expense"&&n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-rose-500 rounded-full"})]}),n.jsxs("button",{onClick:()=>y("sales"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${v==="sales"?"bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(id,{className:`w-6 h-6 ${v==="sales"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),n.jsx("span",{className:"font-semibold text-sm",children:"Sales"})]}),v==="sales"&&n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-blue-500 rounded-full"})]}),n.jsxs("button",{onClick:()=>y("datacapture"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${v==="datacapture"?"bg-gradient-to-br from-purple-500 to-purple-600 text-white shadow-lg shadow-purple-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(rr,{className:`w-6 h-6 ${v==="datacapture"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),n.jsx("span",{className:"font-semibold text-sm",children:"Data Capture"})]}),v==="datacapture"&&n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-purple-500 rounded-full"})]}),n.jsxs("button",{onClick:()=>y("production-requests"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${v==="production-requests"?"bg-gradient-to-br from-indigo-500 to-indigo-600 text-white shadow-lg shadow-indigo-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(h9,{className:`w-6 h-6 ${v==="production-requests"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),n.jsx("span",{className:"font-semibold text-sm",children:"Stock Requests"})]}),v==="production-requests"&&n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-indigo-500 rounded-full"})]}),n.jsxs("button",{onClick:()=>y("store-recalibration"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${v==="store-recalibration"?"bg-gradient-to-br from-teal-500 to-teal-600 text-white shadow-lg shadow-teal-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(zt,{className:`w-6 h-6 ${v==="store-recalibration"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),n.jsx("span",{className:"font-semibold text-sm",children:"Recalibration"})]}),v==="store-recalibration"&&n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-teal-500 rounded-full"})]})]}):n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("button",{onClick:()=>y("production"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${v==="production"?"bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(Pn,{className:`w-6 h-6 ${v==="production"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),n.jsx("span",{className:"font-semibold text-sm",children:"Production"})]}),v==="production"&&n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-orange-500 rounded-full"})]}),n.jsxs("button",{onClick:()=>{console.log(" Recalibration button clicked!"),y("recalibration-reports")},className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${v==="recalibration-reports"?"bg-gradient-to-br from-teal-500 to-teal-600 text-white shadow-lg shadow-teal-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(zt,{className:`w-6 h-6 ${v==="recalibration-reports"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),n.jsx("span",{className:"font-semibold text-sm",children:"Recalibration"})]}),v==="recalibration-reports"&&n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-teal-500 rounded-full"})]})]})}),v==="profit"&&n.jsx("div",{children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Profit Analysis"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Revenue, expenses, and profit breakdown"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[n.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:["daily","weekly","monthly","yearly","custom"].map(ee=>n.jsx("button",{onClick:()=>b(ee),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${N===ee?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:ee.charAt(0).toUpperCase()+ee.slice(1)},ee))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>{const ee=e.stores?.find(Ce=>Ce.id===t)?.name||"All_Stores";uge({salesData:Y,inventoryData:q,overheadData:W,metrics:we,storeName:ee,dateRange:N==="custom"?S:void 0}),Zt.success("Analytics report exported!")},className:"px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-1.5 text-xs sm:text-sm whitespace-nowrap",children:[n.jsx(ws,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Export"}),n.jsx("span",{className:"sm:hidden",children:"JSON"})]}),n.jsxs("button",{onClick:()=>{const ee=e.stores?.find(Ce=>Ce.id===t)?.name||"All_Stores";hge({salesData:Y,inventoryData:q,overheadData:W,storeName:ee}),Zt.success("Data exported as CSV files!")},className:"px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-1.5 text-xs sm:text-sm whitespace-nowrap",children:[n.jsx(vi,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"CSV"})]})]})]})]}),N==="custom"&&n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dr,{className:"w-4 h-4 text-gray-500"}),n.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),n.jsx("input",{type:"date",value:S.from,onChange:ee=>_({...S,from:ee.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),n.jsx("input",{type:"date",value:S.to,onChange:ee=>_({...S,to:ee.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"bg-blue-100 rounded-lg p-3 sm:p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Revenue"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",we.totalRevenue.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-600",children:fe()})]}),n.jsxs("div",{className:"bg-red-100 rounded-lg p-3 sm:p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Expenses"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",we.totalExpenses.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-600",children:fe()})]}),n.jsxs("div",{className:"bg-orange-100 rounded-lg p-3 sm:p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Aggregator Commission"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",we.commissionExpenses.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-600",children:we.onlineRevenue>0?`${(we.commissionExpenses/we.onlineRevenue*100).toFixed(1)}% of online`:"No data"})]}),n.jsxs("div",{className:"bg-green-100 rounded-lg p-3 sm:p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Net Profit"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",Lr.toLocaleString()]}),we.totalRevenue>0?n.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[n.jsx(hn,{className:"w-3 h-3"}),"Includes commission"]}):n.jsx("div",{className:"text-xs text-gray-600",children:"No data yet"})]}),n.jsxs("div",{className:"bg-yellow-100 rounded-lg p-3 sm:p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Profit Margin"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:[we.profitMargin.toFixed(1),"%"]}),n.jsx("div",{className:"text-xs text-gray-600",children:"Of total revenue"})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8 border-2 border-indigo-200",children:[n.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(hn,{className:"w-5 h-5 text-indigo-600"}),"Profit Breakdown"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"Unrealized Profit"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-indigo-600 mb-2",children:["",Ea.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-500",children:"Before cash discrepancies"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"Cash Discrepancy (Loss)"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-red-600 mb-2",children:["-",Fr.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-500",children:"Approved losses"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border-2 border-green-300",children:[n.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 mb-2 flex items-center gap-1",children:["Realized Profit",n.jsx("span",{className:"text-xs text-green-600",children:"(Actual)"})]}),n.jsxs("div",{className:"text-xl sm:text-2xl text-green-600 mb-2",children:["",Lr.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-500",children:we.totalRevenue>0?`${(Lr/we.totalRevenue*100).toFixed(1)}% margin`:"No data yet"})]})]}),Fr>0&&n.jsx("div",{className:"mt-4 bg-amber-50 border border-amber-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(xr,{className:"w-4 h-4 text-amber-600 mt-0.5"}),n.jsxs("div",{className:"text-xs text-amber-800",children:[n.jsx("strong",{children:"Impact:"})," Cash discrepancies represent actual cash shortages that have been approved by management and reduce the realized profit by ",Fr.toLocaleString(),"."]})]})})]}),n.jsxs("div",{className:"mb-6 sm:mb-8 overflow-x-auto",children:[n.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:["Profit Trend - ",N==="daily"?"Last 5 Days":N==="weekly"?"Last 5 Weeks":N==="monthly"?"Last 5 Months":N==="yearly"?"Last 5 Years":"Custom Range"]}),n.jsx("div",{className:"min-w-[300px]",children:n.jsx(Zn,{width:"100%",height:250,children:n.jsxs(mi,{data:ar,barGap:8,barCategoryGap:"20%",children:[n.jsx(ba,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),n.jsx(Hn,{dataKey:"period",stroke:"#666",tick:{fontSize:12}}),n.jsx(Tn,{stroke:"#666",tick:{fontSize:12}}),n.jsx(Gr,{content:n.jsx(aj,{})}),n.jsx(ka,{wrapperStyle:{fontSize:"12px"}}),n.jsx(wr,{dataKey:"revenue",fill:"#a5b4fc",name:"Revenue",radius:[8,8,0,0],maxBarSize:60}),n.jsx(wr,{dataKey:"expenses",fill:"#fca5a5",name:"Expenses",radius:[8,8,0,0],maxBarSize:60}),n.jsx(wr,{dataKey:"profit",fill:"#86efac",name:"Profit",radius:[8,8,0,0],maxBarSize:60})]})})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[n.jsx(qn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"}),n.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Revenue Breakdown"})]}),n.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center bg-green-50 p-3 sm:p-4 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Online Sales"}),n.jsxs("div",{className:"text-lg sm:text-xl text-gray-900",children:["",we.onlineRevenue.toLocaleString()]})]}),n.jsxs("div",{className:"text-xs sm:text-sm text-green-600",children:[(we.onlineRevenue/we.totalRevenue*100).toFixed(0),"%"]})]}),n.jsxs("div",{className:"flex justify-between items-center bg-blue-50 p-3 sm:p-4 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Offline Sales"}),n.jsxs("div",{className:"text-lg sm:text-xl text-gray-900",children:["",we.offlineRevenue.toLocaleString()]})]}),n.jsxs("div",{className:"text-xs sm:text-sm text-blue-600",children:[(we.offlineRevenue/we.totalRevenue*100).toFixed(0),"%"]})]})]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[n.jsx(hn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600"}),n.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Key Metrics"})]}),n.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.jsxs("div",{className:"bg-purple-50 p-3 sm:p-4 rounded-lg",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Cost-to-Revenue Ratio"}),n.jsx("div",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:we.totalRevenue>0?`${(we.totalExpenses/we.totalRevenue*100).toFixed(1)}%`:"N/A"}),n.jsx("div",{className:"text-xs text-gray-600",children:we.totalRevenue>0&&we.totalExpenses/we.totalRevenue<.7?" Healthy ratio":we.totalRevenue>0?" High expense ratio":"No sales yet"})]}),n.jsxs("div",{className:"bg-green-50 p-3 sm:p-4 rounded-lg",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Profit per 100 Revenue"}),n.jsx("div",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:we.totalRevenue>0?`${(we.netProfit/we.totalRevenue*100).toFixed(1)}`:"N/A"}),n.jsx("div",{className:"text-xs text-gray-600",children:we.totalRevenue>0&&we.profitMargin>30?" Excellent margins":we.totalRevenue>0&&we.profitMargin>15?" Good margins":we.totalRevenue>0&&we.profitMargin>0?" Thin margins":we.totalRevenue>0?" Operating at loss":"No sales yet"})]})]})]})]})]})}),v==="expense"&&n.jsx("div",{children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Expense Breakdown"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Detailed analysis of all expenses by category"})]}),n.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:["daily","weekly","monthly","yearly","custom"].map(ee=>n.jsx("button",{onClick:()=>b(ee),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${N===ee?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:ee.charAt(0).toUpperCase()+ee.slice(1)},ee))})]}),N==="custom"&&n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dr,{className:"w-4 h-4 text-gray-500"}),n.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),n.jsx("input",{type:"date",value:S.from,onChange:ee=>_({...S,from:ee.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),n.jsx("input",{type:"date",value:S.to,onChange:ee=>_({...S,to:ee.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-red-100 to-red-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Expenses"}),n.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",we.totalExpenses.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-pink-100 to-pink-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Inventory Costs"}),n.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",we.inventoryExpenses.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[(we.inventoryExpenses/we.totalExpenses*100).toFixed(1),"% of total"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Salary Costs"}),n.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",we.salaryExpenses.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[(we.salaryExpenses/we.totalExpenses*100).toFixed(1),"% of total"]})]})]}),n.jsxs("div",{className:"mb-6 sm:mb-8",children:[n.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Expense Distribution"}),n.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-center",children:[n.jsxs("div",{className:"w-full lg:w-1/2 relative",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl blur-xl opacity-50"}),n.jsx("div",{className:"relative bg-white rounded-2xl p-6 shadow-lg",children:n.jsx(Zn,{width:"100%",height:320,children:n.jsxs(JF,{children:[n.jsx("defs",{children:Tr.map((ee,Ce)=>n.jsxs("linearGradient",{id:`gradient-${Ce}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:ee,stopOpacity:.9}),n.jsx("stop",{offset:"100%",stopColor:ee,stopOpacity:.7})]},`gradient-${Ce}`))}),n.jsx(zi,{data:vn,cx:"50%",cy:"50%",labelLine:{stroke:"#666",strokeWidth:1,strokeDasharray:"3 3"},label:({percentage:ee})=>`${ee}%`,outerRadius:110,innerRadius:40,fill:"#8884d8",dataKey:"value",paddingAngle:2,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:vn.map((ee,Ce)=>n.jsx(ic,{fill:`url(#gradient-${Ce%Tr.length})`,stroke:"#fff",strokeWidth:3},`cell-${Ce}`))}),n.jsx(Gr,{content:n.jsx(fge,{})})]})})})]}),n.jsx("div",{className:"w-full lg:w-1/2 space-y-3",children:vn.map((ee,Ce)=>n.jsxs("div",{className:"group relative border border-gray-200 rounded-xl p-4 hover:shadow-lg hover:border-gray-300 transition-all duration-300 cursor-pointer bg-white overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${Tr[Ce%Tr.length]}40, ${Tr[Ce%Tr.length]}10)`}}),n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-5 h-5 rounded-full shadow-md group-hover:scale-110 transition-transform duration-300",style:{background:`linear-gradient(135deg, ${Tr[Ce%Tr.length]}, ${Tr[(Ce+1)%Tr.length]})`}}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:ee.name})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("span",{className:"text-sm font-semibold text-gray-600 bg-gray-100 px-2 py-1 rounded-lg",children:[ee.percentage,"%"]})})]}),n.jsxs("div",{className:"text-xl font-semibold text-gray-900 group-hover:text-gray-700 transition-colors",children:["",ee.value.toLocaleString()]}),n.jsx("div",{className:"mt-3 h-1.5 bg-gray-100 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full rounded-full transition-all duration-700 ease-out",style:{width:`${ee.percentage}%`,background:`linear-gradient(90deg, ${Tr[Ce%Tr.length]}, ${Tr[(Ce+1)%Tr.length]})`}})})]})]},ee.name))})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[n.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Salary Breakdown"}),(N==="monthly"||N==="yearly"||N==="custom")&&we.permanentEmployeeExpenses>0&&n.jsx("div",{className:"mb-3 bg-blue-50 border border-blue-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(xr,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("p",{className:"text-xs text-blue-800",children:[n.jsx("strong",{children:"Note:"})," Permanent employee salaries (",we.permanentEmployeeExpenses.toLocaleString(),") are monthly payouts and included in this view. Contract worker wages are date-filtered."]})]})}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Contract Workers"}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",we.contractWorkerExpenses.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Daily wages from sales data"})]}),n.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Permanent Employees"}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",we.permanentEmployeeExpenses.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-600 mt-1",children:N==="monthly"||N==="yearly"||N==="custom"?"Total monthly salary payouts (all periods)":"Only shown in monthly/yearly views"})]})]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[n.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Overhead Costs"}),n.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Total Overheads"}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",we.overheadExpenses.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[(we.overheadExpenses/we.totalExpenses*100).toFixed(1),"% of total expenses"]}),n.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Fuel, travel, marketing, and other variable costs"})]})]})]}),n.jsxs("div",{className:"mt-6 sm:mt-8 border border-gray-200 rounded-lg p-4 sm:p-6",children:[n.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Fixed Costs Breakdown"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-4",children:"Monthly fixed expenses breakdown"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Fixed Costs"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",we.fixedCostsTotal.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[(we.fixedCostsTotal/we.totalExpenses*100).toFixed(1),"% of total"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Electricity"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",we.electricityExpenses.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[we.fixedCostsTotal>0?(we.electricityExpenses/we.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Rent"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",we.rentExpenses.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[we.fixedCostsTotal>0?(we.rentExpenses/we.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Salaries"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",we.salaryExpenses.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[we.fixedCostsTotal>0?(we.salaryExpenses/we.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsx("div",{className:"min-w-[300px]",children:n.jsx(Zn,{width:"100%",height:280,children:n.jsxs(mi,{data:[{name:" Electricity",amount:we.electricityExpenses,fill:"#fbbf24"},{name:" Rent",amount:we.rentExpenses,fill:"#fb923c"},{name:" Salaries",amount:we.salaryExpenses,fill:"#a78bfa"}],barCategoryGap:"30%",children:[n.jsx(ba,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),n.jsx(Hn,{dataKey:"name",stroke:"#666",tick:{fontSize:12}}),n.jsx(Tn,{stroke:"#666",tick:{fontSize:12}}),n.jsx(Gr,{content:n.jsx(aj,{})}),n.jsx(wr,{dataKey:"amount",name:"Amount",radius:[8,8,0,0],maxBarSize:80,children:[{name:" Electricity",amount:we.electricityExpenses,fill:"#fbbf24"},{name:" Rent",amount:we.rentExpenses,fill:"#fb923c"},{name:" Salaries",amount:we.salaryExpenses,fill:"#a78bfa"}].map((ee,Ce)=>n.jsx(ic,{fill:ee.fill},`cell-${Ce}`))})]})})})})]})]})}),v==="sales"&&n.jsxs("div",{children:[n.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-2 mb-6 border border-gray-200",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>k("revenue"),className:`flex-1 px-6 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 ${w==="revenue"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(id,{className:"w-5 h-5"}),n.jsx("span",{className:"font-semibold",children:"Revenue Tracking"})]})}),n.jsx("button",{onClick:()=>k("category"),className:`flex-1 px-6 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 ${w==="category"?"bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow-lg":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(Fm,{className:"w-5 h-5"}),n.jsx("span",{className:"font-semibold",children:"Category Sales"})]})})]})}),w==="revenue"&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Revenue Analytics"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Track daily revenue from Paytm, Cash, and Online sales"})]}),n.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:["daily","weekly","monthly","yearly","custom"].map(ee=>n.jsx("button",{onClick:()=>b(ee),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${N===ee?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:ee.charAt(0).toUpperCase()+ee.slice(1)},ee))})]}),N==="custom"&&n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dr,{className:"w-4 h-4 text-gray-500"}),n.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),n.jsx("input",{type:"date",value:S.from,onChange:ee=>_({...S,from:ee.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),n.jsx("input",{type:"date",value:S.to,onChange:ee=>_({...S,to:ee.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Sales"}),n.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",we.totalRevenue.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-600",children:fe()})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Online Sales"}),n.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",we.onlineRevenue.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[(we.onlineRevenue/we.totalRevenue*100).toFixed(0),"% of total"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Offline Sales"}),n.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",we.offlineRevenue.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[(we.offlineRevenue/we.totalRevenue*100).toFixed(0),"% of total"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Transactions"}),n.jsx("div",{className:"text-2xl sm:text-3xl text-gray-900",children:Y.length}),n.jsx("div",{className:"text-xs text-gray-600",children:"Sales records"})]})]}),n.jsxs("div",{className:"mb-6 sm:mb-8",children:[n.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:["Sales Trend - ",N==="daily"?"Last 10 Days":N==="weekly"?"Last 10 Weeks":N==="monthly"?"Last 10 Months":N==="yearly"?"Last 5 Years":"Custom Range"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsx("div",{className:"min-w-[300px]",children:n.jsx(Zn,{width:"100%",height:300,children:n.jsxs(mi,{data:jt,barCategoryGap:"25%",children:[n.jsx(ba,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),n.jsx(Hn,{dataKey:"period",stroke:"#666",tick:{fontSize:12}}),n.jsx(Tn,{stroke:"#666",tick:{fontSize:12}}),n.jsx(Gr,{content:n.jsx(aj,{})}),n.jsx(ka,{wrapperStyle:{fontSize:"12px"}}),n.jsx(wr,{dataKey:"online",stackId:"a",fill:"#60a5fa",name:"Online Sales",radius:[0,0,0,0],maxBarSize:80}),n.jsx(wr,{dataKey:"offline",stackId:"a",fill:"#a78bfa",name:"Offline Sales",radius:[8,8,0,0],maxBarSize:80})]})})})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(id,{className:"w-5 h-5 text-green-600"}),n.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Payment Methods"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Online Payments"}),n.jsxs("span",{className:"text-sm text-green-600",children:[(we.onlineRevenue/we.totalRevenue*100).toFixed(1),"%"]})]}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",we.onlineRevenue.toLocaleString()]})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Cash & Paytm"}),n.jsxs("span",{className:"text-sm text-blue-600",children:[(we.offlineRevenue/we.totalRevenue*100).toFixed(1),"%"]})]}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",we.offlineRevenue.toLocaleString()]})]})]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(hn,{className:"w-5 h-5 text-purple-600"}),n.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Performance Metrics"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Average Transaction"}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",Y.length>0?(we.totalRevenue/Y.length).toFixed(0):0]}),n.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Per sale"})]}),n.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Profit per Sale"}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",Y.length>0?(we.netProfit/Y.length).toFixed(0):0]}),n.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Average margin"})]})]})]})]})]}),w==="category"&&n.jsx(rge,{context:e,selectedStoreId:t})]}),v==="datacapture"&&n.jsx("div",{children:n.jsx(Xoe,{context:e,selectedStoreId:t})}),v==="production"&&n.jsxs("div",{children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Production Date Range"}),n.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"View production data for a selected time period"})]}),n.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:n.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"year",label:"This Year"},{value:"custom",label:"Custom Range"}].map(ee=>n.jsx("button",{onClick:()=>hr(ee.value),className:`px-4 py-2 rounded-lg text-sm border-2 transition-all ${bt===ee.value?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-blue-300 hover:border-blue-500"}`,style:{fontSize:"14px",fontWeight:"600"},children:ee.label},ee.value))})}),bt==="custom"&&n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 bg-white/50 p-3 rounded-lg border border-blue-200",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-xs text-blue-700 block mb-1",children:"Start Date"}),n.jsx("input",{type:"date",value:ht,onChange:ee=>Rr(ee.target.value),className:"w-full px-3 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-xs text-blue-700 block mb-1",children:"End Date"}),n.jsx("input",{type:"date",value:cr,onChange:ee=>fr(ee.target.value),className:"w-full px-3 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"bg-white/70 rounded-lg p-3 border border-blue-200",children:[n.jsx("div",{className:"text-xs text-blue-700 mb-1",children:"Selected Range:"}),n.jsx("div",{className:"text-sm text-blue-900 font-semibold",children:(()=>{const{startDate:ee,endDate:Ce}=Jr(),pe=ta(ee),de=ta(Ce);return ee===Ce?pe:`${pe} - ${de}`})()})]})]})}),n.jsx("div",{className:"hidden",children:n.jsx("select",{value:Le||"",onChange:ee=>rt(ee.target.value||null),className:"px-4 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"14px",fontWeight:"600"},children:(()=>{const ee=nt;return Oe.filter(pe=>{if(!ee)return!0;const de=pe.storeId===ee,Ae=pe.productionHouseId===ee,Te=pe.productionHouseId||pe.storeId;return de||Ae||Te===ee}).map(pe=>pe.date).filter((pe,de,Ae)=>Ae.indexOf(pe)===de).sort((pe,de)=>de.localeCompare(pe)).map(pe=>n.jsx("option",{value:pe,children:ta(pe)},pe))})()})}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:(()=>{const ee=nt;console.log(" Production Summary Cards Filter Debug:"),console.log("  - analyticsMode:",u),console.log("  - selectedProductionHouseId:",nt),console.log("  - effectiveStoreId:",g),console.log("  - filterById:",ee),console.log("  - Total production records:",Oe.length);const Ce=ee?e.productionHouses?.find(et=>et.id===ee):null;console.log("  - Selected production house object:",Ce);const{startDate:pe,endDate:de}=Jr();console.log(" Date Range Filter:",{rangeType:bt,startDate:pe,endDate:de,customStart:ht,customEnd:cr});const Ae=Oe.filter(et=>{if(et.date<pe||et.date>de)return console.log(" Date filter excluded record:",{date:et.date,startDate:pe,endDate:de}),!1;if(!ee)return!0;console.log(" Filtering production record:",{recordStoreId:et.storeId,recordProductionHouseId:et.productionHouseId,filterById:ee,date:et.date});const Ye=et.storeId===ee,Pt=et.productionHouseId===ee;let It=et.productionHouseId;if((!It||It.startsWith("STORE-"))&&et.storeId){const yt=I.length>0?I:e.stores||[],vt=yt.find(ur=>ur.id===et.storeId);console.log("     Production Summary - Store lookup:",{pStoreId:et.storeId,localStoresCount:I.length,contextStoresCount:e.stores?.length||0,allStoresCount:yt.length,foundStore:vt?{id:vt.id,name:vt.name,productionHouseId:vt.productionHouseId}:null}),It=vt?.productionHouseId||null}const _r=It||et.storeId;return console.log("   Checking record:",{recordId:et.id.slice(0,8),recordStoreId:et.storeId,recordProductionHouseId:et.productionHouseId,resolvedProductionHouseId:It,phId:_r,filterById:ee,matchesStoreId:Ye,matchesProductionHouseId:Pt,localStores:I.length,match:Ye||Pt||_r===ee}),Ye||Pt||_r===ee});console.log("  - Filtered production records:",Ae.length);const Te=Ae.reduce((et,Ye)=>et+(Ye.chickenMomos?.final||0)+(Ye.chickenCheeseMomos?.final||0)+(Ye.vegMomos?.final||0)+(Ye.cheeseCornMomos?.final||0)+(Ye.paneerMomos?.final||0)+(Ye.vegKurkureMomos?.final||0)+(Ye.chickenKurkureMomos?.final||0),0),Ne=Ae.reduce((et,Ye)=>et+(Ye.wastage?.dough||0)+(Ye.wastage?.stuffing||0)+(Ye.wastage?.batter||0)+(Ye.wastage?.coating||0),0),Ue=Ae.filter(et=>et.approvalStatus==="approved").length,Ve=Ae.filter(et=>et.approvalStatus==="pending").length;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Pn,{className:"w-6 h-6 text-orange-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total Production"})]}),n.jsx("p",{className:"text-3xl text-gray-900",children:Te.toLocaleString()}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"pieces"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ls,{className:"w-6 h-6 text-red-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total Wastage"})]}),n.jsx("p",{className:"text-3xl text-gray-900",children:Ne.toFixed(2)}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"kg"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(DE,{className:"w-6 h-6 text-green-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Approved Entries"})]}),n.jsx("p",{className:"text-3xl text-gray-900",children:Ue}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"records"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(xr,{className:"w-6 h-6 text-yellow-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Pending Approval"})]}),n.jsx("p",{className:"text-3xl text-gray-900",children:Ve}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"records"})]})]})})()}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6 border-2 border-orange-200",children:[n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl text-gray-900 mb-1 flex items-center gap-2",children:[n.jsx(rr,{className:"w-6 h-6 text-orange-600"}),"Production House Stock Status"]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Opening balance + This month produced - Sent to stores (delivered requests)"})]}),u==="production"&&(i||l)&&n.jsxs("div",{className:"flex gap-2 items-start",children:[n.jsxs("button",{onClick:()=>{Ut(JSON.parse(JSON.stringify(ke))),ct(!0)},className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-lg hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 shadow-lg",title:"Configure Stock Alert Thresholds",children:[n.jsx(Ii,{className:"w-5 h-5"}),"Alert Settings"]}),n.jsxs("button",{onClick:()=>{ir(Vt),Xr(!0)},className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-lg hover:from-blue-700 hover:to-blue-600 transition-all flex items-center gap-2 shadow-lg",title:"Configure Momos Per Plate",children:[n.jsx(Ii,{className:"w-5 h-5"}),"Plate Settings"]}),l&&n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg font-semibold",title:"Recalibrate production house stock (available on 1st of each month)",children:[n.jsx(Dr,{className:"w-5 h-5"}),"Recalibrate Stock"]}),te&&te.date&&n.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Last recalibrated: ",ta(te.date)," IST"]}),be&&!te&&n.jsx("p",{className:"text-xs text-blue-600 text-center",children:" Using auto carry-forward from previous month"})]}),(i||s)&&a&&n.jsxs("button",{onClick:()=>{console.log(" Manage Items button clicked in Analytics"),a()},className:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg font-semibold",title:"Manage inventory items",children:[n.jsx(rr,{className:"w-5 h-5"}),"Manage Items"]})]}),u==="store"&&e.user?.role==="cluster_head"&&e.productionHouses&&e.productionHouses.length>0&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Production House:"}),n.jsxs("select",{value:nt||"all",onChange:ee=>{const Ce=ee.target.value==="all"?null:ee.target.value;console.log(" Production House Selector Changed:",Ce),Bt(Ce)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"all",children:"All Production Houses"}),e.productionHouses.map(ee=>n.jsxs("option",{value:ee.id,children:[ee.name," (ID: ",ee.id,")"]},ee.id))]})]})]})}),(()=>{const ee=nt;console.log(" Production House Stock Status Filter Debug:"),console.log("  - analyticsMode:",u),console.log("  - selectedProductionHouseId:",nt),console.log("  - effectiveProductionHouseId:",ee);const Ce=ee?e.productionHouses?.find(Re=>Re.id===ee):null;console.log("  - Selected production house for stock:",Ce),console.log("  - Total production records available:",Oe.length),Oe.length>0&&Oe.length<=3&&console.log("  - All production records:",Oe.map(Re=>({id:Re.id,storeId:Re.storeId,productionHouseId:Re.productionHouseId,date:Re.date})));const pe=Oe.filter(Re=>{if(!ee)return!0;const Lt=Re.storeId===ee,jr=Re.productionHouseId===ee;let Dt=Re.productionHouseId;(!Dt||Dt.startsWith("STORE-"))&&Re.storeId&&(Dt=(I.length>0?I:e.stores||[]).find(cn=>cn.id===Re.storeId)?.productionHouseId||null);const pr=Dt||Re.storeId;return Lt||jr||pr===ee});console.log("  - Filtered production for stock status:",pe.length),pe.length>0&&console.log("  - Sample production record:",{id:pe[0].id,storeId:pe[0].storeId,productionHouseId:pe[0].productionHouseId,date:pe[0].date});const de=new Date().toISOString().substring(0,7),Ae=pe.filter(Re=>Re.date.startsWith(de));console.log("  - Monthly filtered production:",Ae.length,"for month:",de),Ae.length>0&&console.log("  - Sample monthly production record:",Ae[0]);const Te=e.inventoryItems?.filter(Re=>Re.category==="finished_product"&&Re.isActive&&(Re.linkedEntityType==="global"||Re.linkedEntityType==="production_house"&&Re.linkedEntityId===ee))||[],Ne=Re=>Re.replace(/_([a-z])/g,Lt=>Lt[1].toUpperCase()),Ue=Re=>{const Lt=Re.replace(/_momo(s)?$/i,"");return Ne(Lt)},Ve={};Te.forEach(Re=>{const Lt=Ue(Re.name);Ve[Lt]=0}),Ae.filter(Re=>Re.approvalStatus==="approved").forEach(Re=>{Te.forEach(Lt=>{const jr=Ue(Lt.name),Dt=Re.data?.[Lt.name];let pr=0;if(Dt!=null)pr=typeof Dt=="object"?Dt.final||Dt.quantity||0:Dt;else{const pn=Re[jr+"Momos"],zr=Re[jr];pn?pr=typeof pn=="object"?pn.final||0:pn:zr&&(pr=typeof zr=="object"?zr.final||0:zr)}Ve[jr]=(Ve[jr]||0)+pr})});let et=ee;if(ee&&ee.startsWith("STORE-")){const Re=e.stores?.find(Lt=>Lt.id===ee);Re?.productionHouseId&&(et=Re.productionHouseId,console.log(" Resolved production house UUID:",{userStoreId:ee,resolvedUUID:et}))}const Ye=e.productionRequests?.filter(Re=>{if(Re.status!=="delivered")return!1;const Lt=Re.deliveredDate||Re.requestDate||Re.createdAt;if(!Lt||!Lt.startsWith(de))return console.log(" Filtered out request - wrong month:",{requestId:Re.id.slice(0,8),requestDate:Lt,currentMonth:de,matches:Lt?.startsWith(de)}),!1;const jr=I.length>0?I:e.stores||[],Dt=jr.find(pr=>pr.id===Re.storeId);if(et){const pr=Dt?.productionHouseId===et;return console.log(" Checking production request:",{requestId:Re.id.slice(0,8),storeId:Re.storeId,storeName:Dt?.name,storeProductionHouseId:Dt?.productionHouseId,productionHouseUUID:et,deliveredDate:Re.deliveredDate,availableStores:jr.length,matches:pr}),pr}return!0})||[];console.log(" Production Stock Calculation:",{effectiveProductionHouseId:ee,isProductionIncharge:e.user?.designation==="production_incharge",totalProductionRequests:e.productionRequests?.length||0,deliveredRequests:e.productionRequests?.filter(Re=>Re.status==="delivered").length||0,fulfilledRequestsCount:Ye.length,stores:e.stores?.map(Re=>({id:Re.id,name:Re.name,productionHouseId:Re.productionHouseId}))||[],filteredProductionRecords:pe.length,allProductionData:Oe.map(Re=>({id:Re.id.slice(0,8),date:Re.date,productionHouseId:Re.productionHouseId,storeId:Re.storeId,resolvedId:Re.productionHouseId||Re.storeId})),sampleRequest:Ye[0],sampleRequestData:Ye[0]?{id:Ye[0].id,storeId:Ye[0].storeId,requestDate:Ye[0].requestDate,status:Ye[0].status,chickenMomos:Ye[0].chickenMomos,vegMomos:Ye[0].vegMomos}:null});const Pt={};Te.forEach(Re=>{const Lt=Ue(Re.name);Pt[Lt]=0}),Ye.forEach(Re=>{Te.forEach(Lt=>{const jr=Ue(Lt.name),Dt=Re[jr+"Momos"]||Re[jr]||0;Pt[jr]=(Pt[jr]||0)+Dt})});const It={};Te.forEach(Re=>{const Lt=Ue(Re.name);It[Lt]=be?.[Lt]||be?.[Re.name]||be?.[Re.id]||0}),console.log(" Stock Calculation with Carry-Forward:"),console.log("  previousMonthStock (raw):",be),console.log("  Opening Balance (processed):",It),console.log("  Current Month Production (APPROVED ONLY):",Ve),console.log("  Current Month Deliveries:",Pt),console.log("   Production Records Debug:"),console.log("    Total monthly production records:",Ae.length),console.log("    Approved monthly production records:",Ae.filter(Re=>Re.approvalStatus==="approved").length),console.log("    Sample production records:",Ae.slice(0,3).map(Re=>({id:Re.id.slice(0,8),date:Re.date,approvalStatus:Re.approvalStatus,hasData:!!Re.data,dataKeys:Re.data?Object.keys(Re.data):[],sampleValue:Re.data?Re.data[Object.keys(Re.data)[0]]:null})));const _r=window.__midMonthRecalibration,nn=te?.date,yt=_r&&nn;yt&&(console.log("   Mid-Month Recalibration Detected:"),console.log("    Recalibration date:",nn),console.log("    Recalibration stock:",_r));const vt={};if(yt){const Re=nn;console.log("    Recalibration date (date only):",Re.substring(0,10));const Lt={};Te.forEach(Dt=>{const pr=Ue(Dt.name);Lt[pr]=0}),pe.filter(Dt=>Dt.approvalStatus==="approved").forEach(Dt=>{const pr=Re.substring(0,10),pn=Dt.date>pr;console.log("   Checking production after recalibration:",{id:Dt.id.slice(0,8),date:Dt.date,recalDateOnly:pr,isAfter:pn,hasData:!!Dt.data,dataKeys:Dt.data?Object.keys(Dt.data):[],approvalStatus:Dt.approvalStatus}),pn&&Te.forEach(zr=>{const cn=Ue(zr.name),En=Dt.data?.[zr.name];let Ha=0;if(En!=null)Ha=typeof En=="object"?En.final||En.quantity||0:En;else{const Mn=Dt[cn+"Momos"],Vi=Dt[cn];Mn?Ha=typeof Mn=="object"?Mn.final||0:Mn:Vi&&(Ha=typeof Vi=="object"?Vi.final||0:Vi)}Ha>0&&console.log(`     Adding production after recalibration: ${zr.name} (${cn}) = ${Ha}`),Lt[cn]=(Lt[cn]||0)+Ha})});const jr={};Te.forEach(Dt=>{const pr=Ue(Dt.name);jr[pr]=0}),Ye.forEach(Dt=>{const pr=Dt.deliveredDate||Dt.requestDate||Dt.createdAt;pr&&pr>Re&&Te.forEach(pn=>{const zr=Ue(pn.name),cn=Dt[zr+"Momos"]||Dt[zr]||0;jr[zr]=(jr[zr]||0)+cn})}),console.log("    Production AFTER recalibration:",Lt),console.log("    Deliveries AFTER recalibration:",jr),Te.forEach(Dt=>{const pr=Ue(Dt.name),pn=_r[pr]||0,zr=Lt[pr]||0,cn=jr[pr]||0;vt[pr]=pn+zr-cn,console.log(`    ${pr}: ${pn} (recal) + ${zr} (prod after) - ${cn} (del after) = ${vt[pr]}`)})}else Te.forEach(Re=>{const Lt=Ue(Re.name);vt[Lt]=(It[Lt]||0)+(Ve[Lt]||0)-(Pt[Lt]||0)});console.log("  Final Stock:",vt),window.__currentProductionHouseStock=vt;const ur=e.inventoryItems?.filter(Re=>Re.category==="finished_product"&&Re.isActive&&(Re.linkedEntityType==="global"||Re.linkedEntityType==="production_house"&&Re.linkedEntityId===ee))||[];console.log(" Finished Products for Stock Display:",ur.map(Re=>{const Lt=Ue(Re.name);return{name:Re.name,displayName:Re.displayName,stock:vt[Lt]}}));const vr=Re=>Re.replace(/_([a-z])/g,Lt=>Lt[1].toUpperCase()),Ct={chicken:"purple",chickenCheese:"pink",chicken_cheese:"pink",veg:"green",cheeseCorn:"yellow",cheese_corn:"yellow",paneer:"blue",vegKurkure:"teal",veg_kurkure:"teal",chickenKurkure:"red",chicken_kurkure:"red"},mr=ur.map(Re=>{const Lt=Re.name.replace(/_momo(s)?$/i,""),jr=vr(Lt);return{key:Re.name,camelKey:jr,label:Re.displayName,color:Ct[Lt]||Ct[jr]||"indigo",unit:Re.unit}}),br=Object.values(It).some(Re=>Re>0);return pe.length===0&&!br?n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[n.jsx(rr,{className:"w-12 h-12 text-blue-400 mx-auto mb-3"}),n.jsx("h3",{className:"text-lg text-gray-900 mb-2",children:"No Production Data"}),n.jsx("p",{className:"text-sm text-gray-600",children:ee?"No production records found for the selected production house.":"No production records found. Start logging production to see stock status."})]}):n.jsxs(n.Fragment,{children:[It&&Object.values(It).some(Re=>Re>0)&&n.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4 rounded",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(zt,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-blue-900",children:"Automatic Stock Carry-Forward Active"}),n.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["Stock calculation: ",n.jsx("span",{className:"font-mono",children:"Opening Balance + This Month's Production - Deliveries"})]}),n.jsx("p",{className:"text-xs text-blue-600 mt-1",children:te&&te.date?`Opening balance from recalibration on ${ta(te.date)} (IST)`:"Opening balance auto-calculated from previous month's closing stock"})]})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:mr.map(({key:Re,camelKey:Lt,label:jr,color:Dt,unit:pr})=>{const pn=It[Lt]||It[Re]||0,zr=Ve[Lt]||Ve[Re]||0,cn=Pt[Lt]||Pt[Re]||0,En=vt[Lt]||vt[Re]||0,Ha=pn>0||zr>0||cn>0||En!==void 0,Mn=ke[Lt]??ke[Re]??{high:600,medium:300,low:150},Vi=En<Mn.low,wu=En>=Mn.low&&En<Mn.medium,yl=En>=Mn.medium&&En<Mn.high,ju=En>=Mn.high;let Gi="",Ts="",Os="";En<0?(Gi=" Over-distributed",Ts="bg-red-100 border-red-300 text-red-800",Os="text-red-600"):Ha&&Vi?(Gi=" Critical: Below Low Threshold",Ts="bg-red-100 border-red-300 text-red-800",Os="text-red-600"):Ha&&wu?(Gi=" Low: Between Low & Medium",Ts="bg-orange-100 border-orange-300 text-orange-800",Os="text-orange-600"):Ha&&yl?(Gi=" Medium: Between Medium & High",Ts="bg-yellow-100 border-yellow-300 text-yellow-800",Os="text-yellow-700"):Ha&&ju&&(Gi=" Healthy: Above High Threshold",Ts="bg-green-100 border-green-300 text-green-800",Os="text-green-600");const Yi=zr>0?(En/zr*100).toFixed(0):"0";return n.jsxs("div",{className:`bg-gradient-to-br from-${Dt}-50 to-${Dt}-100 border-2 border-${Dt}-200 rounded-xl p-4 hover:shadow-lg transition-all duration-300`,children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:jr}),n.jsx("div",{className:"space-y-2",children:Ha?n.jsxs(n.Fragment,{children:[pn>0&&n.jsxs("div",{className:"flex justify-between items-center bg-blue-100 px-3 py-2 rounded-lg",children:[n.jsx("span",{className:"text-sm text-blue-700 font-semibold",children:"Opening Balance:"}),n.jsx("span",{className:"text-xl font-bold text-blue-800",children:pn})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"This Month Produced:"}),n.jsx("span",{className:`text-lg font-bold text-${Dt}-600`,children:zr})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"Sent to Stores:"}),n.jsx("span",{className:`text-lg font-bold text-${Dt}-700`,children:cn})]}),n.jsxs("div",{className:"border-t-2 border-gray-300 pt-2 mt-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Stock Available:"}),n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:`text-2xl font-bold ${Os||`text-${Dt}-800`}`,children:[En," pcs / ",Math.round(En/Vt)," plates"]})})]}),zr>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:n.jsxs("span",{children:[Yi,"% remaining"]})}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full ${Vi||En<0?"bg-red-500":wu?"bg-orange-500":yl?"bg-yellow-500":ju?"bg-green-500":`bg-${Dt}-500`}`,style:{width:`${Math.min(100,Math.max(0,Number(Yi)))}%`}})})]})]}),Gi&&n.jsx("div",{className:`border rounded-lg px-2 py-1 mt-2 ${Ts}`,children:n.jsx("p",{className:"text-xs font-semibold",children:Gi})}),n.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg px-2 py-1 mt-2",children:n.jsxs("div",{className:"grid grid-cols-3 gap-1 text-xs",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-600",children:"Low"}),n.jsx("div",{className:"font-semibold text-red-600",children:Mn.low})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-600",children:"Med"}),n.jsx("div",{className:"font-semibold text-yellow-600",children:Mn.medium})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-600",children:"High"}),n.jsx("div",{className:"font-semibold text-green-600",children:Mn.high})]})]})})]}):n.jsxs("div",{className:"bg-white/80 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Current Stock"}),n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsx("span",{className:"text-2xl font-bold text-gray-400",children:"0"}),n.jsx("span",{className:"text-xs text-gray-500",children:pr||"pieces"})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg px-2 py-1 mt-2",children:n.jsx("p",{className:"text-xs text-yellow-800",children:" Track in production logging to see stock"})})]})})]},Re)})})]})})()]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Momo Production Analysis"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Daily, weekly, monthly, and yearly production trends"})]}),n.jsx("div",{className:"flex gap-2",children:["daily","weekly","monthly","yearly","custom"].map(ee=>n.jsx("button",{onClick:()=>b(ee),className:`px-4 py-2 rounded-lg text-sm transition-colors ${N===ee?"bg-orange-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:ee.charAt(0).toUpperCase()+ee.slice(1)},ee))})]}),N==="custom"&&n.jsx("div",{className:"mb-6 bg-blue-50 p-4 rounded-lg",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"From Date"}),n.jsx("input",{type:"date",value:S.from,onChange:ee=>_({...S,from:ee.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"To Date"}),n.jsx("input",{type:"date",value:S.to,onChange:ee=>_({...S,to:ee.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})}),n.jsx(Zn,{width:"100%",height:400,children:n.jsxs(mi,{data:(()=>{const ee=u==="production"?nt:e.user?.designation==="production_incharge"?g:nt;ee&&e.productionHouses?.find(de=>de.id===ee||de.storeId===ee);const Ce=Oe.filter(de=>{if(ee){const Ae=de.storeId===ee,Te=de.productionHouseId===ee;let Ne=de.productionHouseId;(!Ne||Ne.startsWith("STORE-"))&&de.storeId&&(Ne=e.stores?.find(Ye=>Ye.id===de.storeId)?.productionHouseId||null);const Ue=Ne||de.storeId;if(!(Ae||Te||Ue===ee))return!1}return N==="custom"?de.date>=S.from&&de.date<=S.to:!0}),pe=new Map;return Ce.forEach(de=>{let Ae=de.date,Te=de.date;if(N==="weekly"){const Ue=new Date(de.date),Ve=new Date(Ue.setDate(Ue.getDate()-Ue.getDay())),et=new Date(Ve);et.setDate(et.getDate()+6),Ae=Ve.toISOString().split("T")[0],Te=`${Ve.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${et.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else N==="monthly"?(Ae=de.date.substring(0,7),Te=Ae):N==="yearly"&&(Ae=de.date.substring(0,4),Te=Ae);pe.has(Ae)||pe.set(Ae,{period:Te,chickenMomos:0,chickenCheeseMomos:0,vegMomos:0,cheeseCornMomos:0,paneerMomos:0,vegKurkure:0,chickenKurkure:0});const Ne=pe.get(Ae);Ne.chickenMomos+=de.chickenMomos?.final||0,Ne.chickenCheeseMomos+=de.chickenCheeseMomos?.final||0,Ne.vegMomos+=de.vegMomos?.final||0,Ne.cheeseCornMomos+=de.cheeseCornMomos?.final||0,Ne.paneerMomos+=de.paneerMomos?.final||0,Ne.vegKurkure+=de.vegKurkureMomos?.final||0,Ne.chickenKurkure+=de.chickenKurkureMomos?.final||0}),Array.from(pe.values()).sort((de,Ae)=>de.period.localeCompare(Ae.period))})(),children:[n.jsx(ba,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),n.jsx(Hn,{dataKey:"period",tick:{fontSize:12},stroke:"#666",angle:N==="weekly"?-15:0,textAnchor:N==="weekly"?"end":"middle",height:N==="weekly"?60:30}),n.jsx(Tn,{tick:{fontSize:12},stroke:"#666",label:{value:"Pieces",angle:-90,position:"insideLeft"}}),n.jsx(Gr,{content:n.jsx(mge,{})}),n.jsx(ka,{}),n.jsx(wr,{dataKey:"chickenMomos",name:"Chicken Momos",fill:"#ef4444"}),n.jsx(wr,{dataKey:"chickenCheeseMomos",name:"Chicken Cheese",fill:"#f97316"}),n.jsx(wr,{dataKey:"vegMomos",name:"Veg Momos",fill:"#10b981"}),n.jsx(wr,{dataKey:"cheeseCornMomos",name:"Cheese Corn",fill:"#fbbf24"}),n.jsx(wr,{dataKey:"paneerMomos",name:"Paneer Momos",fill:"#3b82f6"}),n.jsx(wr,{dataKey:"vegKurkure",name:"Veg Kurkure",fill:"#84cc16"}),n.jsx(wr,{dataKey:"chickenKurkure",name:"Chicken Kurkure",fill:"#f59e0b"})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[n.jsx("div",{className:"flex justify-between items-center mb-6",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Wastage Analysis"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Track and minimize production wastage"})]})}),(()=>{const ee=u==="production"?nt:e.user?.designation==="production_incharge"?g:nt,Ce=ee?I.filter(Ne=>Ne.productionHouseId===ee).map(Ne=>Ne.id):[],pe=Ne=>{if(!ee)return!0;const Ue=Ne.storeId===ee,Ve=Ne.productionHouseId===ee,et=Ne.productionHouseId||Ne.storeId,Ye=Ce.includes(Ne.storeId)||Ce.includes(Ne.productionHouseId);return Ue||Ve||et===ee||Ye};window.wastageFilterHelper={matchesProductionHouse:pe,mappedStoreIds:Ce,filterById:ee};const de=Oe.filter(pe),Ae=de.reduce((Ne,Ue)=>Ne+(Ue.wastage?.dough||0)+(Ue.wastage?.stuffing||0)+(Ue.wastage?.batter||0)+(Ue.wastage?.coating||0),0),Te=de.filter(Ne=>(Ne.wastage?.dough||0)>0||(Ne.wastage?.stuffing||0)>0||(Ne.wastage?.batter||0)>0||(Ne.wastage?.coating||0)>0);return console.log(" Wastage Analysis Debug:",{analyticsMode:u,selectedProductionHouseId:nt,filterById:ee,mappedStoreIds:Ce,totalProductionRecords:Oe.length,filteredProductionRecords:de.length,recordsWithWastage:Te.length,totalWastageAllTime:Ae,sampleWastageData:de.slice(0,3).map(Ne=>({date:Ne.date,storeId:Ne.storeId,productionHouseId:Ne.productionHouseId,wastage:Ne.wastage}))}),de.length===0?n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[n.jsx("p",{className:"text-yellow-800 font-medium",children:" No production data found"}),n.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Please select a production house or ensure production data has been logged."})]}):Te.length===0&&de.length>0?n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[n.jsx("p",{className:"text-blue-800 font-medium",children:" No wastage data recorded"}),n.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Found ",de.length," production record(s), but no wastage has been logged yet. Wastage values can be entered in the Production Management section."]})]}):null})(),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-3",children:"Daily Wastage Trend"}),n.jsx(Zn,{width:"100%",height:250,children:n.jsxs(Eh,{data:(()=>{const ee=[];for(let Ce=4;Ce>=0;Ce--){const pe=new Date;pe.setDate(pe.getDate()-Ce);const de=pe.toISOString().split("T")[0],Ae=window.wastageFilterHelper,Ne=Oe.filter(Ue=>Ae.matchesProductionHouse(Ue)&&Ue.date===de).reduce((Ue,Ve)=>Ue+(Ve.wastage?.dough||0)+(Ve.wastage?.stuffing||0)+(Ve.wastage?.batter||0)+(Ve.wastage?.coating||0),0);ee.push({date:de.substring(5),wastage:Ne})}return ee})(),children:[n.jsx(ba,{strokeDasharray:"3 3",stroke:"#fca5a5"}),n.jsx(Hn,{dataKey:"date",tick:{fontSize:10}}),n.jsx(Tn,{tick:{fontSize:10}}),n.jsx(Gr,{}),n.jsx(wi,{type:"monotone",dataKey:"wastage",stroke:"#dc2626",strokeWidth:2})]})})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-3",children:"Weekly Wastage Trend"}),n.jsx(Zn,{width:"100%",height:250,children:n.jsxs(Eh,{data:(()=>{const ee=[];for(let Ce=4;Ce>=0;Ce--){const pe=new Date;pe.setDate(pe.getDate()-Ce*7);const de=new Date(pe.setDate(pe.getDate()-pe.getDay())),Ae=new Date(de);Ae.setDate(Ae.getDate()+6);const Te=window.wastageFilterHelper,Ue=Oe.filter(Ve=>Te.matchesProductionHouse(Ve)&&Ve.date>=de.toISOString().split("T")[0]&&Ve.date<=Ae.toISOString().split("T")[0]).reduce((Ve,et)=>Ve+(et.wastage?.dough||0)+(et.wastage?.stuffing||0)+(et.wastage?.batter||0)+(et.wastage?.coating||0),0);ee.push({week:`W${5-Ce}`,wastage:Ue})}return ee})(),children:[n.jsx(ba,{strokeDasharray:"3 3",stroke:"#fed7aa"}),n.jsx(Hn,{dataKey:"week",tick:{fontSize:10}}),n.jsx(Tn,{tick:{fontSize:10}}),n.jsx(Gr,{}),n.jsx(wi,{type:"monotone",dataKey:"wastage",stroke:"#ea580c",strokeWidth:2})]})})]}),n.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-3",children:"Monthly Wastage Trend"}),n.jsx(Zn,{width:"100%",height:250,children:n.jsxs(Eh,{data:(()=>{const ee=[];for(let Ce=4;Ce>=0;Ce--){const pe=new Date;pe.setMonth(pe.getMonth()-Ce);const de=pe.toISOString().substring(0,7),Ae=window.wastageFilterHelper,Ne=Oe.filter(Ue=>Ae.matchesProductionHouse(Ue)&&Ue.date.startsWith(de)).reduce((Ue,Ve)=>Ue+(Ve.wastage?.dough||0)+(Ve.wastage?.stuffing||0)+(Ve.wastage?.batter||0)+(Ve.wastage?.coating||0),0);ee.push({month:de.substring(5),wastage:Ne})}return ee})(),children:[n.jsx(ba,{strokeDasharray:"3 3",stroke:"#fde68a"}),n.jsx(Hn,{dataKey:"month",tick:{fontSize:10}}),n.jsx(Tn,{tick:{fontSize:10}}),n.jsx(Gr,{}),n.jsx(wi,{type:"monotone",dataKey:"wastage",stroke:"#ca8a04",strokeWidth:2})]})})]})]}),n.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h3",{className:"text-xl text-gray-900",children:"Wastage Breakdown by Type"}),n.jsx("div",{className:"flex gap-2",children:["daily","weekly","monthly","yearly","custom"].map(ee=>n.jsx("button",{onClick:()=>E(ee),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${A===ee?"bg-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:ee.charAt(0).toUpperCase()+ee.slice(1)},ee))})]}),n.jsx(Zn,{width:"100%",height:400,children:n.jsxs(mi,{data:(()=>{const ee=window.wastageFilterHelper,Ce=Oe.filter(de=>{if(!ee.matchesProductionHouse(de))return!1;if(A==="custom")return de.date>=S.from&&de.date<=S.to;const Ae=new Date,Te=new Date(de.date);if(A==="daily"){const Ne=new Date(Ae);return Ne.setDate(Ne.getDate()-5),Te>=Ne}else if(A==="weekly"){const Ne=new Date(Ae);return Ne.setDate(Ne.getDate()-35),Te>=Ne}else if(A==="monthly"){const Ne=new Date(Ae);return Ne.setMonth(Ne.getMonth()-5),Te>=Ne}else if(A==="yearly"){const Ne=new Date(Ae);return Ne.setFullYear(Ne.getFullYear()-5),Te>=Ne}return!0}),pe=new Map;return Ce.forEach(de=>{let Ae=de.date,Te=de.date;if(A==="weekly"){const Ue=new Date(de.date),Ve=new Date(Ue.setDate(Ue.getDate()-Ue.getDay())),et=new Date(Ve);et.setDate(et.getDate()+6),Ae=Ve.toISOString().split("T")[0],Te=`${Ve.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${et.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else A==="monthly"?(Ae=de.date.substring(0,7),Te=Ae):A==="yearly"&&(Ae=de.date.substring(0,4),Te=Ae);pe.has(Ae)||pe.set(Ae,{period:Te,dough:0,stuffing:0,batter:0,coating:0});const Ne=pe.get(Ae);Ne.dough+=de.wastage?.dough||0,Ne.stuffing+=de.wastage?.stuffing||0,Ne.batter+=de.wastage?.batter||0,Ne.coating+=de.wastage?.coating||0}),Array.from(pe.values()).sort((de,Ae)=>de.period.localeCompare(Ae.period))})(),children:[n.jsx(ba,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),n.jsx(Hn,{dataKey:"period",tick:{fontSize:12},angle:A==="weekly"?-15:0,textAnchor:A==="weekly"?"end":"middle",height:A==="weekly"?60:30}),n.jsx(Tn,{tick:{fontSize:12},label:{value:"kg",angle:-90,position:"insideLeft"}}),n.jsx(Gr,{content:n.jsx(pge,{})}),n.jsx(ka,{}),n.jsx(wr,{dataKey:"dough",name:"Dough",fill:"#dc2626"}),n.jsx(wr,{dataKey:"stuffing",name:"Stuffing",fill:"#f97316"}),n.jsx(wr,{dataKey:"batter",name:"Batter",fill:"#fbbf24"}),n.jsx(wr,{dataKey:"coating",name:"Coating",fill:"#a855f7"})]})})]}),s&&n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg border-2 border-blue-200 p-6 mt-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl text-gray-900 flex items-center gap-2",children:[n.jsx(DE,{className:"w-6 h-6 text-blue-600"}),"SOP Maintenance - Threshold Limits"]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set standard ingredient usage per piece (in grams)"})]}),ye?n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>{me(G),ut(ze),qe(!1),Zt.success("SOP thresholds and diversion limit updated successfully")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[n.jsx(ho,{className:"w-4 h-4"}),"Save"]}),n.jsxs("button",{onClick:()=>{qe(!1),He(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors flex items-center gap-2",children:[n.jsx(Kr,{className:"w-4 h-4"}),"Cancel"]})]}):n.jsxs("button",{onClick:()=>{He(JSON.parse(JSON.stringify(_e))),Pe(Ke),qe(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[n.jsx(uj,{className:"w-4 h-4"}),"Edit SOP"]})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"text-gray-900 font-semibold flex items-center gap-2",children:[n.jsx(xr,{className:"w-5 h-5 text-yellow-600"}),"Maximum Allowed Diversion from SOP"]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set the acceptable deviation range (%) from SOP standards. Using too little OR too much is non-compliant."})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("label",{className:"text-sm text-gray-700",children:"Max Diversion:"}),n.jsx("input",{type:"number",min:"0",max:"20",step:"1",value:ye?ze:Ke,onChange:ee=>{ye&&Pe(Number(ee.target.value))},disabled:!ye,className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"}),n.jsx("span",{className:"text-gray-700",children:"%"})]})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(ye?G:_e).map(([ee,Ce])=>{const pe={chickenMomos:"Chicken Momos",chickenCheeseMomos:"Chicken Cheese Momos",vegMomos:"Veg Momos",cheeseCornMomos:"Cheese Corn Momos",paneerMomos:"Paneer Momos",vegKurkure:"Veg Kurkure",chickenKurkure:"Chicken Kurkure"};return n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[n.jsx("h4",{className:"text-gray-900 mb-3",children:pe[ee]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Dough (g/pc)"}),n.jsx("input",{type:"number",value:Ce.dough,disabled:!ye,onChange:de=>{ye&&He({...G,[ee]:{...G[ee],dough:Number(de.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${ye?"bg-white":"bg-gray-100"}`})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Stuffing (g/pc)"}),n.jsx("input",{type:"number",value:Ce.stuffing,disabled:!ye,onChange:de=>{ye&&He({...G,[ee]:{...G[ee],stuffing:Number(de.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${ye?"bg-white":"bg-gray-100"}`})]}),Ce.batter!==void 0&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Batter (g/pc)"}),n.jsx("input",{type:"number",value:Ce.batter,disabled:!ye,onChange:de=>{ye&&He({...G,[ee]:{...G[ee],batter:Number(de.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${ye?"bg-white":"bg-gray-100"}`})]}),Ce.coating!==void 0&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Coating (g/pc)"}),n.jsx("input",{type:"number",value:Ce.coating,disabled:!ye,onChange:de=>{ye&&He({...G,[ee]:{...G[ee],coating:Number(de.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${ye?"bg-white":"bg-gray-100"}`})]})]})]},ee)})})]}),n.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6 mt-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"text-xl text-gray-900 flex items-center gap-2",children:[n.jsx(hn,{className:"w-6 h-6 text-indigo-600"}),"Daily Ingredient Usage & SOP Compliance"]}),n.jsx(ds,{label:"Date:",value:Ot,onChange:$t})]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Regular momos only - Actual usage per piece vs SOP limits with diversion %"})]}),n.jsx("div",{className:"space-y-6",children:(()=>{const ee=u==="production"?nt:e.user?.designation==="production_incharge"?g:nt;console.log(" SOP Compliance Filter - analyticsMode:",u),console.log(" SOP Compliance Filter - selectedProductionHouseId:",nt),console.log(" SOP Compliance Filter - effectiveStoreId:",g),console.log(" SOP Compliance Filter - filterById:",ee),console.log(" SOP Compliance Filter - user designation:",e.user?.designation),console.log(" SOP Compliance Filter - sopComplianceDate:",Ot),console.log(" SOP Compliance Filter - All production dates:",[...new Set(Oe.map(de=>de.date))]),console.log(" SOP Compliance Filter - Total production records:",Oe.length),console.log(" SOP Compliance Filter - Approved production records:",Oe.filter(de=>de.approvalStatus==="approved").length);const Ce=[Ot],pe=[];for(const de of Ce){const Ae=Oe.filter(Ue=>{const Ve=u==="production"?nt:e.user?.designation==="production_incharge"?g:nt,Ye=(I.length>0?I:e.stores||[]).filter(mr=>mr.productionHouseId===Ve).map(mr=>mr.id),Pt=Ue.storeId===Ve,It=Ue.productionHouseId===Ve,nn=(Ue.productionHouseId||Ue.storeId)===Ve,yt=Ue.storeId&&Ye.includes(Ue.storeId),vt=Ue.date===de,ur=Ue.approvalStatus==="approved",vr=Pt||It||nn||yt,Ct=vr&&vt&&ur;return console.log(" SOP Compliance - Checking production record:",{date:Ue.date,storeId:Ue.storeId,productionHouseId:Ue.productionHouseId,approvalStatus:Ue.approvalStatus,filterById:Ve,mappedStoreIds:Ye,matchesStoreId:Pt,matchesProductionHouseId:It,matchesFallback:nn,matchesMappedStore:yt,matchesDate:vt,isApproved:ur,passesFilter:vr,finalResult:Ct}),Ve&&!vr?!1:vt&&ur});if(console.log(` SOP Compliance - Date ${de}: Found ${Ae.length} production records`),Ae.length===0)continue;const Te={chickenMomos:"chickenMomos",chickenCheeseMomos:"chickenCheeseMomos",vegMomos:"vegMomos",cheeseCornMomos:"cheeseCornMomos",paneerMomos:"paneerMomos",vegKurkureMomos:"vegKurkure",chickenKurkureMomos:"chickenKurkure"},Ne={};Ae.forEach(Ue=>{["chickenMomos","chickenCheeseMomos","vegMomos","cheeseCornMomos","paneerMomos"].forEach(Ve=>{const et=Ue[Ve];if(et&&et.final>0){const Ye=Te[Ve];Ne[Ye]||(Ne[Ye]={quantity:0,totalDough:0,totalStuffing:0,totalBatter:0,totalCoating:0}),Ne[Ye].quantity+=et.final,Ne[Ye].totalDough+=et.dough||0,Ne[Ye].totalStuffing+=et.stuffing||0}}),["vegKurkureMomos","chickenKurkureMomos"].forEach(Ve=>{const et=Ue[Ve];if(et&&et.final>0){const Ye=Te[Ve];Ne[Ye]||(Ne[Ye]={quantity:0,totalDough:0,totalStuffing:0,totalBatter:0,totalCoating:0}),Ne[Ye].quantity+=et.final,Ne[Ye].totalBatter+=et.batter||0,Ne[Ye].totalCoating+=et.coating||0}})}),pe.push({date:de,usage:Ne})}return pe.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500",children:[n.jsx(xr,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),n.jsxs("p",{children:["No approved production data found for ",ta(Ot)]}),n.jsx("p",{className:"text-sm mt-1",children:"Production entries must be approved to appear here"})]}):pe.map(({date:de,usage:Ae})=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsx("h4",{className:"text-gray-900 mb-4",children:ta(de)}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(Ae).map(([Te,Ne])=>{if(Ne.quantity===0||Te==="vegKurkure"||Te==="chickenKurkure")return null;const Ue={chickenMomos:"Chicken Momos",chickenCheeseMomos:"Chicken Cheese",vegMomos:"Veg Momos",cheeseCornMomos:"Cheese Corn",paneerMomos:"Paneer Momos",vegKurkure:"Veg Kurkure",chickenKurkure:"Chicken Kurkure"},Ve=Ne.quantity>0?Ne.totalDough*1e3/Ne.quantity:0,et=Ne.quantity>0?Ne.totalStuffing*1e3/Ne.quantity:0,Ye=Ne.quantity>0?Ne.totalBatter*1e3/Ne.quantity:0,Pt=Ne.quantity>0?Ne.totalCoating*1e3/Ne.quantity:0,It=_e[Te].dough>0?(Ve-_e[Te].dough)/_e[Te].dough*100:0,_r=_e[Te].stuffing>0?(et-_e[Te].stuffing)/_e[Te].stuffing*100:0,nn=_e[Te].batter>0?(Ye-_e[Te].batter)/_e[Te].batter*100:0,yt=_e[Te].coating>0?(Pt-_e[Te].coating)/_e[Te].coating*100:0,vt=1-Ke/100,ur=1+Ke/100,vr=Ve>=_e[Te].dough*vt&&Ve<=_e[Te].dough*ur,Ct=et>=_e[Te].stuffing*vt&&et<=_e[Te].stuffing*ur,mr=!_e[Te].batter||Ye>=_e[Te].batter*vt&&Ye<=_e[Te].batter*ur,br=!_e[Te].coating||Pt>=_e[Te].coating*vt&&Pt<=_e[Te].coating*ur,Re=vr&&Ct&&mr&&br;return n.jsxs("div",{className:`p-3 rounded-lg border-2 ${Re?"bg-green-50 border-green-300":"bg-red-50 border-red-300"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-sm text-gray-900",children:Ue[Te]}),Re?n.jsx(ho,{className:"w-5 h-5 text-green-600"}):n.jsx(xr,{className:"w-5 h-5 text-red-600"})]}),n.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["Qty: ",Ne.quantity," pcs"]}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:`flex justify-between items-center ${vr?"text-gray-700":"text-red-700 font-semibold"}`,children:[n.jsx("span",{children:"Dough:"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{children:[Ve.toFixed(1),"g / ",_e[Te].dough,"g"]}),n.jsxs("div",{className:`text-[10px] ${Math.abs(It)>Ke?"text-red-600":"text-green-600"}`,children:[It>0?"+":"",It.toFixed(1),"%"]})]})]}),n.jsxs("div",{className:`flex justify-between items-center ${Ct?"text-gray-700":"text-red-700 font-semibold"}`,children:[n.jsx("span",{children:"Stuffing:"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{children:[et.toFixed(1),"g / ",_e[Te].stuffing,"g"]}),n.jsxs("div",{className:`text-[10px] ${Math.abs(_r)>Ke?"text-red-600":"text-green-600"}`,children:[_r>0?"+":"",_r.toFixed(1),"%"]})]})]}),_e[Te].batter&&n.jsxs("div",{className:`flex justify-between items-center ${mr?"text-gray-700":"text-red-700 font-semibold"}`,children:[n.jsx("span",{children:"Batter:"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{children:[Ye.toFixed(1),"g / ",_e[Te].batter,"g"]}),n.jsxs("div",{className:`text-[10px] ${Math.abs(nn)>Ke?"text-red-600":"text-green-600"}`,children:[nn>0?"+":"",nn.toFixed(1),"%"]})]})]}),_e[Te].coating&&n.jsxs("div",{className:`flex justify-between items-center ${br?"text-gray-700":"text-red-700 font-semibold"}`,children:[n.jsx("span",{children:"Coating:"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{children:[Pt.toFixed(1),"g / ",_e[Te].coating,"g"]}),n.jsxs("div",{className:`text-[10px] ${Math.abs(yt)>Ke?"text-red-600":"text-green-600"}`,children:[yt>0?"+":"",yt.toFixed(1),"%"]})]})]})]})]},Te)})})]},de))})()})]})]})]}),v==="production-requests"&&n.jsx("div",{children:n.jsx(Qoe,{context:e,highlightRequestId:r||null,selectedStoreId:m,onNavigateToManageItems:a})}),v==="recalibration-reports"&&n.jsx("div",{children:n.jsx(fI,{context:e,selectedStoreId:u==="production"?nt:t,onOpenRecalibration:()=>z(!0),locationType:"production_house"})}),v==="store-recalibration"&&n.jsx("div",{children:n.jsx(fI,{context:e,selectedStoreId:g,locationType:"store"})})]}),ce&&n.jsx(_2,{context:e,selectedStoreId:u==="production"?nt:g,currentCalculatedStock:u==="production"?window.__currentProductionHouseStock:void 0,onClose:()=>{z(!1),u==="production"&&(console.log(" Recalibration modal closed - refreshing data..."),Ee(null),se(null),setTimeout(()=>{console.log(" Timeout complete - fetching latest recalibration..."),Kn()},1500))},onSaveSuccess:()=>{console.log(" Recalibration saved successfully - triggering immediate refresh!"),Ee(null),se(null),window.__currentProductionHouseStock=null,setTimeout(()=>{Kn()},500)},isProductionHouse:u==="production"}),We&&n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 p-6 rounded-t-2xl",children:[n.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),n.jsxs("div",{className:"relative flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center border-2 border-white/30",children:n.jsx(Ii,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl text-white",children:"Stock Alert Thresholds"}),n.jsx("p",{className:"text-white/80 text-sm",children:"Customize alert levels for each momo type"})]})]}),n.jsx("button",{onClick:()=>{ct(!1),Ut({})},className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-all",children:n.jsx(Kr,{className:"w-6 h-6 text-white"})})]})]}),n.jsxs("div",{className:"p-6 bg-blue-50 border-b-2 border-blue-200",children:[n.jsx("h3",{className:"text-gray-900 font-semibold mb-2",children:"How it works:"}),n.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Set three threshold levels for each momo type. When stock falls below these levels, color-coded alerts will appear on the stock cards."}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-green-200",children:[n.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"High: Stock above high threshold"})]}),n.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-yellow-200",children:[n.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Medium: Between medium and high"})]}),n.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-orange-200",children:[n.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Low: Between low and medium"})]}),n.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-red-200",children:[n.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Critical: Below low threshold or zero"})]})]})]}),n.jsx("div",{className:"p-6 space-y-6",children:(e.inventoryItems?.filter(pe=>pe.category==="finished_product"&&pe.isActive)||[]).map(pe=>{const de=pe.name.replace(/_([a-z])/g,Ae=>Ae[1].toUpperCase());return{key:pe.name,camelKey:de,label:pe.displayName}}).map(({key:pe,camelKey:de,label:Ae})=>{const Te=Wt[de]??ke[de]??{high:600,medium:300,low:150};return n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4",children:[n.jsx("h3",{className:"text-gray-900 font-semibold mb-3",children:Ae}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-green-700 font-semibold mb-1 block",children:"High Threshold (plates)"}),n.jsx("input",{type:"number",value:Te.high,onChange:Ne=>{Ut({...Wt,[de]:{...Te,high:Number(Ne.target.value)}})},className:"w-full px-3 py-2 border-2 border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-green-50",placeholder:"e.g., 1200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-yellow-700 font-semibold mb-1 block",children:"Medium Threshold (plates)"}),n.jsx("input",{type:"number",value:Te.medium,onChange:Ne=>{Ut({...Wt,[de]:{...Te,medium:Number(Ne.target.value)}})},className:"w-full px-3 py-2 border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-yellow-50",placeholder:"e.g., 600"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-red-700 font-semibold mb-1 block",children:"Low Threshold (plates)"}),n.jsx("input",{type:"number",value:Te.low,onChange:Ne=>{Ut({...Wt,[de]:{...Te,low:Number(Ne.target.value)}})},className:"w-full px-3 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent bg-red-50",placeholder:"e.g., 300"})]})]})]},de)})}),n.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl border-t-2 border-gray-200 flex justify-between items-center",children:[n.jsx("button",{onClick:()=>{ct(!1),Ut({})},className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),n.jsxs("button",{onClick:()=>{Xe(Wt),ct(!1),Ut({}),Zt.success("Stock alert thresholds updated successfully")},className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2",children:[n.jsx(ho,{className:"w-5 h-5"}),"Save Thresholds"]})]})]})}),ln&&n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full",children:[n.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-600 via-blue-500 to-blue-600 p-6 rounded-t-2xl",children:[n.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),n.jsxs("div",{className:"relative flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center border-2 border-white/30",children:n.jsx(Ii,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl text-white",children:"Plate Conversion Settings"}),n.jsx("p",{className:"text-white/80 text-sm",children:"Configure momos per plate"})]})]}),n.jsx("button",{onClick:()=>{Xr(!1),ir(Vt)},className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-all",children:n.jsx(Kr,{className:"w-6 h-6 text-white"})})]})]}),n.jsxs("div",{className:"p-6 bg-blue-50 border-b-2 border-blue-200",children:[n.jsx("h3",{className:"text-gray-900 font-semibold mb-2",children:"How it works:"}),n.jsxs("p",{className:"text-sm text-gray-700",children:["Stock will be displayed as both pieces and plates. For example, if you have 170 momos and each plate contains 6 momos, it will show as ",n.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded",children:"170 pcs / 28 plates"}),"."]})]}),n.jsxs("div",{className:"p-6",children:[n.jsx("label",{className:"text-gray-900 font-semibold mb-3 block",children:"Momos Per Plate"}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-300 rounded-xl p-4",children:[n.jsx("input",{type:"number",min:"1",max:"20",value:Ft,onChange:ee=>{const Ce=Number(ee.target.value);Ce>=1&&Ce<=20&&ir(Ce)},className:"w-full px-4 py-3 border-2 border-blue-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-center text-2xl font-bold",placeholder:"6"}),n.jsx("p",{className:"text-xs text-blue-700 mt-2 text-center",children:"Enter a number between 1 and 20"})]}),n.jsxs("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Preview:"}),n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Stock Available:"}),n.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["170 pcs / ",Math.round(170/Ft)," plates"]})]})]})]}),n.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl border-t-2 border-gray-200 flex justify-between items-center",children:[n.jsx("button",{onClick:()=>{Xr(!1),ir(Vt)},className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),n.jsxs("button",{onClick:()=>{Ar(Ft),localStorage.setItem("momosPerPlate",Ft.toString()),Xr(!1),Zt.success(`Plate conversion updated: ${Ft} momos per plate`)},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl hover:from-blue-700 hover:to-blue-600 transition-all flex items-center gap-2",children:[n.jsx(ho,{className:"w-5 h-5"}),"Save Settings"]})]})]})}),O&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(FE,{className:"w-6 h-6"}),n.jsx("h3",{className:"text-xl",children:"Leave Details - Today"})]}),n.jsx("button",{onClick:()=>R(!1),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-colors",children:n.jsx(Kr,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-80px)]",children:C===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(kn,{className:"w-8 h-8 text-green-600"})}),n.jsx("p",{className:"text-lg text-gray-900 mb-2",children:"Everyone is working today! "}),n.jsx("p",{className:"text-sm text-gray-600",children:e.user?.storeId?"No employees on leave in this store":"No employees on leave across all stores"})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("p",{className:"text-gray-700",children:[n.jsx("span",{className:"text-xl font-bold text-orange-600",children:C})," ",C===1?"employee":"employees"," on leave"]})}),n.jsx("div",{className:"space-y-3",children:B.map((ee,Ce)=>n.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:n.jsx(kn,{className:"w-5 h-5 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-900 font-semibold",children:ee.employeeName}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Employee ID: ",ee.employeeId]})]})]}),n.jsxs("div",{className:"ml-12 space-y-1",children:[ee.storeName&&ee.storeName!=="N/A"&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(rr,{className:"w-4 h-4 text-gray-500"}),n.jsx("span",{className:"text-gray-700",children:ee.storeName}),ee.storeId&&ee.storeId!=="N/A"&&n.jsxs("span",{className:"text-gray-500",children:["(",ee.storeId,")"]})]}),ee.reason&&n.jsxs("div",{className:"flex items-start gap-2 text-sm mt-2",children:[n.jsx(vi,{className:"w-4 h-4 text-gray-500 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 font-medium",children:"Reason:"}),n.jsx("p",{className:"text-gray-700",children:ee.reason})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm mt-2",children:[n.jsx(Dr,{className:"w-4 h-4 text-gray-500"}),n.jsxs("span",{className:"text-gray-600",children:["Date: ",ta(ee.leaveDate)]})]})]})]}),n.jsx("div",{className:"ml-4",children:n.jsx("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Approved"})})]})},ee.id||Ce))})]})}),n.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end border-t border-gray-200",children:n.jsx("button",{onClick:()=>R(!1),className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})})]})}function mI({userRole:e,selectedStoreId:t,currentUserId:r}){const[a,s]=M.useState("today"),[i,o]=M.useState(""),[l,d]=M.useState(""),[u,f]=M.useState("csv"),[m,p]=M.useState(!1),[g,v]=M.useState(!1),[y,w]=M.useState(null),[k,N]=M.useState(null),b=tu();M.useEffect(()=>{(async()=>{const{data:{session:O}}=await b.auth.getSession();O?.access_token&&N(O.access_token)})()},[]);const A=()=>{const F=new Date;let O,R;switch(a){case"today":O=F.toISOString().split("T")[0],R=O;break;case"weekly":const Q=new Date(F);Q.setDate(F.getDate()-7),O=Q.toISOString().split("T")[0],R=F.toISOString().split("T")[0];break;case"monthly":const V=new Date(F.getFullYear(),F.getMonth(),1),J=new Date(F.getFullYear(),F.getMonth()+1,0);O=V.toISOString().split("T")[0],R=J.toISOString().split("T")[0];break;case"custom":O=i,R=l;break}return{startDate:O,endDate:R}},E=async()=>{const{startDate:F,endDate:O}=A();if(!F||!O)return alert("Please select a valid date range"),null;if(!k)return alert("Not authenticated. Please log in again."),null;try{p(!0);const[R,Q,V,J,ae,L]=await Promise.all([dg(k),ru(k),y2(k),cl(),il(),ug()]),H=(me,ye="date")=>me.filter(qe=>{const G=qe[ye],He=G>=F&&G<=O;if(t){const ut=qe.storeId===t;return He&&ut}return He}),ce=H(R),z=H(Q),I=H(V),Z=H(ae),te=H(L);console.log("Export Data Debug:",{selectedStoreId:t,totalInventory:R.length,filteredInventory:ce.length,totalSales:V.length,filteredSales:I.length,totalOverheads:Q.length,filteredOverheads:z.length,sampleSalesStoreIds:V.slice(0,3).map(me=>({date:me.date,storeId:me.storeId})),sampleOverheadStoreIds:Q.slice(0,3).map(me=>({date:me.date,storeId:me.storeId}))});const se=ce.reduce((me,ye)=>me+(ye.totalCost||0),0),be=z.reduce((me,ye)=>me+(ye.amount||0),0),Ee=I.reduce((me,ye)=>me+(ye.offlineSales||0)+(ye.onlineSales||0),0),_e=Z.reduce((me,ye)=>me+(ye.amount||0),0);return{startDate:F,endDate:O,storeId:t,inventory:ce,overheads:z,sales:I,employees:J,payouts:Z,production:te,summary:{totalInventorySpend:se,totalOverheadSpend:be,totalSales:Ee,totalPayouts:_e}}}catch(R){return console.error("Error fetching export data:",R),alert("Failed to fetch data for export"),null}finally{p(!1)}},S=async()=>{const F=await E();F&&(w(F),v(!0))},_=F=>{let O=`Data Export Report
`;return O+=`Period: ${F.startDate} to ${F.endDate}
`,F.storeId&&(O+=`Store ID: ${F.storeId}
`),O+=`Generated on: ${new Date().toLocaleString()}

`,O+=`SUMMARY
`,O+=`Total Inventory Spend,${F.summary.totalInventorySpend.toLocaleString()}
`,O+=`Total Overhead Spend,${F.summary.totalOverheadSpend.toLocaleString()}
`,O+=`Total Sales,${F.summary.totalSales.toLocaleString()}
`,O+=`Total Payouts,${F.summary.totalPayouts.toLocaleString()}
`,O+=`Net Profit/Loss,${(F.summary.totalSales-F.summary.totalInventorySpend-F.summary.totalOverheadSpend-F.summary.totalPayouts).toLocaleString()}

`,O+=`
INVENTORY ITEMS
`,O+=`Date,Category,Item Name,Quantity,Unit,Price per Unit,Total Cost
`,F.inventory.forEach(R=>{O+=`${R.date},"${R.category}","${R.itemName}",${R.quantity},"${R.unit}",${R.price||0},${R.totalCost}
`}),F.production&&F.production.length>0&&(O+=`
PRODUCTION DATA
`,O+=`Date,Chicken Momos,Chicken Cheese,Veg Momos,Cheese Corn,Paneer,Veg Kurkure,Chicken Kurkure,Wastage (kg)
`,F.production.forEach(R=>{O+=`${R.date},${R.chickenMomos?.final||0},${R.chickenCheeseMomos?.final||0},${R.vegMomos?.final||0},${R.cheeseCornMomos?.final||0},${R.paneerMomos?.final||0},${R.vegKurkureMomos?.final||0},${R.chickenKurkureMomos?.final||0},${R.wastage?.total||0}
`})),O+=`
OVERHEAD EXPENSES
`,O+=`Date,Category,Description,Amount
`,F.overheads.forEach(R=>{O+=`${R.date},"${R.category}","${R.description||"-"}",${R.amount}
`}),O+=`
SALES DATA
`,O+=`Date,Offline Sales (Paytm),Offline Sales (Cash),Online Sales,Employee Salaries,Cash in Hand,Cash Offset,Status
`,F.sales.forEach(R=>{O+=`${R.date},${R.paytmAmount||0},${R.cashAmount||0},${R.onlineSales||0},${R.employeeSalary||0},${R.actualCashInHand||0},${R.cashOffset||0},"${R.approvalRequired?"Pending Approval":"Approved"}"
`}),O+=`
EMPLOYEE PAYOUTS
`,O+=`Date,Employee Name,Employee ID,Amount
`,F.payouts.forEach(R=>{const Q=F.employees.find(V=>V.id===R.employeeId);O+=`${R.date},"${R.employeeName}","${Q?.employeeId||"-"}",${R.amount}
`}),O+=`
EMPLOYEE MASTER LIST
`,O+=`Employee ID,Name,Type,Role,Phone,Daily Rate
`,F.employees.forEach(R=>{O+=`"${R.employeeId}","${R.name}","${R.type}","${R.role||"-"}","${R.phone}",${R.dailyRate||"-"}
`}),O},C=F=>_(F),P=F=>`
      <html>
        <head>
          <title>Data Export Report</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; }
            h1 { color: #333; border-bottom: 2px solid #4F46E5; padding-bottom: 10px; }
            h2 { color: #4F46E5; margin-top: 30px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #4F46E5; color: white; }
            .summary { background-color: #f0f9ff; padding: 15px; border-radius: 8px; margin: 20px 0; }
            .summary-item { display: flex; justify-content: space-between; padding: 5px 0; }
          </style>
        </head>
        <body>
          <h1>Data Export Report</h1>
          <p><strong>Period:</strong> ${F.startDate} to ${F.endDate}</p>
          ${F.storeId?`<p><strong>Store ID:</strong> ${F.storeId}</p>`:""}
          <p><strong>Generated on:</strong> ${new Date().toLocaleString()}</p>
          
          <div class="summary">
            <h2>Summary</h2>
            <div class="summary-item"><span>Total Inventory Spend:</span><span>${F.summary.totalInventorySpend.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Overhead Spend:</span><span>${F.summary.totalOverheadSpend.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Sales:</span><span>${F.summary.totalSales.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Payouts:</span><span>${F.summary.totalPayouts.toLocaleString()}</span></div>
            <div class="summary-item"><strong>Net Profit/Loss:</strong><strong>${(F.summary.totalSales-F.summary.totalInventorySpend-F.summary.totalOverheadSpend-F.summary.totalPayouts).toLocaleString()}</strong></div>
          </div>

          <h2>Inventory Items</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Category</th><th>Item Name</th><th>Quantity</th><th>Unit</th><th>Price/Unit</th><th>Total Cost</th></tr>
            </thead>
            <tbody>
              ${F.inventory.map(R=>`
                <tr>
                  <td>${R.date}</td>
                  <td>${R.category}</td>
                  <td>${R.itemName}</td>
                  <td>${R.quantity}</td>
                  <td>${R.unit}</td>
                  <td>${R.price||0}</td>
                  <td>${R.totalCost}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          ${F.production&&F.production.length>0?`
          <h2>Production Data</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Chicken Momos</th><th>Chicken Cheese</th><th>Veg Momos</th><th>Cheese Corn</th><th>Paneer</th><th>Veg Kurkure</th><th>Chicken Kurkure</th><th>Wastage (kg)</th></tr>
            </thead>
            <tbody>
              ${F.production.map(R=>`
                <tr>
                  <td>${R.date}</td>
                  <td>${R.chickenMomos?.final||0}</td>
                  <td>${R.chickenCheeseMomos?.final||0}</td>
                  <td>${R.vegMomos?.final||0}</td>
                  <td>${R.cheeseCornMomos?.final||0}</td>
                  <td>${R.paneerMomos?.final||0}</td>
                  <td>${R.vegKurkureMomos?.final||0}</td>
                  <td>${R.chickenKurkureMomos?.final||0}</td>
                  <td>${R.wastage?.total||0}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
          `:""}

          <h2>Overhead Expenses</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Category</th><th>Description</th><th>Amount</th></tr>
            </thead>
            <tbody>
              ${F.overheads.map(R=>`
                <tr>
                  <td>${R.date}</td>
                  <td>${R.category}</td>
                  <td>${R.description||"-"}</td>
                  <td>${R.amount}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <h2>Sales Data</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Offline (Paytm)</th><th>Offline (Cash)</th><th>Online</th><th>Salaries</th><th>Cash in Hand</th><th>Cash Offset</th><th>Status</th></tr>
            </thead>
            <tbody>
              ${F.sales.map(R=>`
                <tr>
                  <td>${R.date}</td>
                  <td>${R.paytmAmount||0}</td>
                  <td>${R.cashAmount||0}</td>
                  <td>${R.onlineSales||0}</td>
                  <td>${R.employeeSalary||0}</td>
                  <td>${R.actualCashInHand||0}</td>
                  <td>${R.cashOffset||0}</td>
                  <td>${R.approvalRequired?"Pending":"Approved"}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <h2>Employee Payouts</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Employee Name</th><th>Employee ID</th><th>Amount</th></tr>
            </thead>
            <tbody>
              ${F.payouts.map(R=>{const Q=F.employees.find(V=>V.id===R.employeeId);return`
                  <tr>
                    <td>${R.date}</td>
                    <td>${R.employeeName}</td>
                    <td>${Q?.employeeId||"-"}</td>
                    <td>${R.amount}</td>
                  </tr>
                `}).join("")}
            </tbody>
          </table>

          <h2>Employee Master List</h2>
          <table>
            <thead>
              <tr><th>Employee ID</th><th>Name</th><th>Type</th><th>Role</th><th>Phone</th><th>Daily Rate</th></tr>
            </thead>
            <tbody>
              ${F.employees.map(R=>`
                <tr>
                  <td>${R.employeeId}</td>
                  <td>${R.name}</td>
                  <td>${R.type}</td>
                  <td>${R.role||"-"}</td>
                  <td>${R.phone}</td>
                  <td>${R.dailyRate?""+R.dailyRate:"-"}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        </body>
      </html>
    `,B=async()=>{const F=await E();if(!F)return;let O,R,Q;const V=`${F.startDate}_to_${F.endDate}`;switch(u){case"csv":O=_(F),R="text/csv",Q=`export_${V}.csv`;break;case"excel":O=C(F),R="application/vnd.ms-excel",Q=`export_${V}.xls`;break;case"pdf":O=P(F),R="text/html",Q=`export_${V}.html`;break;default:return}const J=new Blob([O],{type:R}),ae=URL.createObjectURL(J),L=document.createElement("a");L.href=ae,L.download=Q,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(ae),alert(`Data exported successfully as ${Q}`)};return n.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Export Data"}),n.jsx("p",{className:"text-gray-600",children:"Download comprehensive reports in multiple formats"}),t&&n.jsxs("div",{className:"mt-2 inline-block bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm",children:["Store: ",t]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h2",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(Dr,{className:"w-5 h-5 text-purple-600"}),"Select Date Range"]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[n.jsxs("button",{onClick:()=>s("today"),className:`p-4 rounded-lg border-2 transition-all ${a==="today"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[n.jsx("div",{className:"font-medium",children:"Today"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Current day"})]}),n.jsxs("button",{onClick:()=>s("weekly"),className:`p-4 rounded-lg border-2 transition-all ${a==="weekly"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[n.jsx("div",{className:"font-medium",children:"Last 7 Days"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Weekly data"})]}),n.jsxs("button",{onClick:()=>s("monthly"),className:`p-4 rounded-lg border-2 transition-all ${a==="monthly"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[n.jsx("div",{className:"font-medium",children:"This Month"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Monthly data"})]}),n.jsxs("button",{onClick:()=>s("custom"),className:`p-4 rounded-lg border-2 transition-all ${a==="custom"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[n.jsx("div",{className:"font-medium",children:"Custom"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Select range"})]})]}),a==="custom"&&n.jsx("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Start Date"}),n.jsx("input",{type:"date",value:i,onChange:F=>o(F.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"End Date"}),n.jsx("input",{type:"date",value:l,onChange:F=>d(F.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]})})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("h2",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(vi,{className:"w-5 h-5 text-blue-600"}),"Select Export Format"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsxs("button",{onClick:()=>f("csv"),className:`p-4 rounded-lg border-2 transition-all ${u==="csv"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[n.jsx(jB,{className:"w-8 h-8 mx-auto mb-2"}),n.jsx("div",{className:"font-medium",children:"CSV"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Excel compatible"})]}),n.jsxs("button",{onClick:()=>f("excel"),className:`p-4 rounded-lg border-2 transition-all ${u==="excel"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[n.jsx(Fm,{className:"w-8 h-8 mx-auto mb-2"}),n.jsx("div",{className:"font-medium",children:"Excel"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"XLS format"})]}),n.jsxs("button",{onClick:()=>f("pdf"),className:`p-4 rounded-lg border-2 transition-all ${u==="pdf"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[n.jsx(vi,{className:"w-8 h-8 mx-auto mb-2"}),n.jsx("div",{className:"font-medium",children:"PDF/HTML"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Print ready"})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-[#E8D5F2] to-[#D4B5F0] rounded-lg p-4 mb-6",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Export Will Include:"}),n.jsxs("ul",{className:"space-y-1 text-sm text-gray-700",children:[n.jsx("li",{children:" Complete Inventory Items with quantities and costs"}),n.jsx("li",{children:" Production Data with all momo types and wastage"}),n.jsx("li",{children:" All Overhead Expenses categorized"}),n.jsx("li",{children:" Sales Data with payment breakdowns"}),n.jsx("li",{children:" Employee Payouts with detailed records"}),n.jsx("li",{children:" Employee Master List"}),n.jsx("li",{children:" Financial Summary with profit/loss calculations"})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:S,disabled:m,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 border-2 border-purple-600 text-purple-700 rounded-lg hover:bg-purple-50 transition-colors disabled:opacity-50",children:[n.jsx(vi,{className:"w-5 h-5"}),"Preview Data"]}),n.jsxs("button",{onClick:B,disabled:m,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-colors disabled:opacity-50",children:[n.jsx(ws,{className:"w-5 h-5"}),m?"Generating...":"Export Data"]})]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-white text-sm",children:""})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Export Tips"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" CSV files can be opened in Excel, Google Sheets, or any spreadsheet application"}),n.jsx("li",{children:" PDF/HTML exports are best for printing or sharing reports"}),n.jsx("li",{children:" Custom date ranges allow you to export specific time periods"}),n.jsx("li",{children:" All monetary values are in Indian Rupees ()"})]})]})]})}),e==="cluster_head"&&n.jsx("div",{className:"mt-6 bg-red-50 border-2 border-red-200 rounded-lg p-6",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-full flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-white text-lg",children:""})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Production Data Cleanup"}),n.jsxs("p",{className:"text-sm text-red-800 mb-4",children:["Remove ALL transactional data (inventory logs, sales, stock requests, production data, notifications, etc.) to prepare for production launch.",n.jsx("strong",{className:"block mt-2",children:" This will DELETE:"})]}),n.jsxs("ul",{className:"text-sm text-red-800 space-y-1 ml-4 mb-3",children:[n.jsx("li",{children:" All inventory purchase logs"}),n.jsx("li",{children:" All sales records"}),n.jsx("li",{children:" All production logs & requests"}),n.jsx("li",{children:" All stock requests & recalibrations"}),n.jsx("li",{children:" All overhead & fixed costs"}),n.jsx("li",{children:" All notifications"})]}),n.jsx("p",{className:"text-sm text-green-800 mb-4",children:n.jsx("strong",{className:"block mt-2",children:" This will PRESERVE:"})}),n.jsxs("ul",{className:"text-sm text-green-800 space-y-1 ml-4 mb-4",children:[n.jsx("li",{children:" Inventory Items (product metadata)"}),n.jsx("li",{children:" Employee Master Data"}),n.jsx("li",{children:" Employee Payouts, Timesheets & Leaves"}),n.jsx("li",{children:" Stores & Production Houses"})]}),n.jsxs("button",{onClick:async()=>{if(confirm(` CRITICAL WARNING: This will PERMANENTLY remove ALL transactional data:

 Inventory logs, Sales, Production data, Stock requests, Overheads, Fixed costs, Notifications

 PRESERVED: Inventory items metadata, Employee master data, Payouts, Timesheets, Leaves, Stores, Production houses

This action CANNOT be undone!

Are you absolutely sure you want to proceed?`))try{p(!0);const F=await wD();alert(` ${F.message}

 Total Deleted: ${F.totalDeleted} records

 Breakdown:
- Inventory Logs: ${F.stats.inventory}
- Sales: ${F.stats.sales}
- Item Sales: ${F.stats.itemSales}
- Overheads: ${F.stats.overheads}
- Fixed Costs: ${F.stats.fixedCosts}
- Stock Requests: ${F.stats.stockRequests}
- Stock Recalibrations: ${F.stats.stockRecalibrations}
- Production Data: ${F.stats.productionData}
- Production Requests: ${F.stats.productionRequests}
- Notifications: ${F.stats.notifications}`),window.location.reload()}catch(F){console.error("Error during cleanup:",F),alert(` Failed to cleanup production data: ${F.message}`)}finally{p(!1)}},disabled:m,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:[n.jsx("span",{children:""}),m?"Cleaning up...":"Cleanup Production Data"]}),n.jsx("p",{className:"text-xs text-red-700 mt-3",children:" This action cannot be undone. Make sure you have exported all necessary data first."})]})]})})]}),g&&y&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[n.jsx("h2",{className:"text-xl text-gray-900",children:"Data Preview"}),n.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(Kr,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-6 mb-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Summary"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Inventory"}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalInventorySpend.toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Overheads"}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalOverheadSpend.toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Sales"}),n.jsxs("div",{className:"text-xl text-green-600",children:["",y.summary.totalSales.toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Payouts"}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalPayouts.toLocaleString()]})]})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-purple-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium text-gray-900",children:"Net Profit/Loss:"}),n.jsxs("span",{className:`text-xl font-bold ${y.summary.totalSales-y.summary.totalInventorySpend-y.summary.totalOverheadSpend-y.summary.totalPayouts>=0?"text-green-600":"text-red-600"}`,children:["",(y.summary.totalSales-y.summary.totalInventorySpend-y.summary.totalOverheadSpend-y.summary.totalPayouts).toLocaleString()]})]})})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Inventory Items"}),n.jsx("div",{className:"text-2xl text-gray-900",children:y.inventory.length})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Production Logs"}),n.jsx("div",{className:"text-2xl text-gray-900",children:y.production?.length||0})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Overhead Entries"}),n.jsx("div",{className:"text-2xl text-gray-900",children:y.overheads.length})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Sales Records"}),n.jsx("div",{className:"text-2xl text-gray-900",children:y.sales.length})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Payout Records"}),n.jsx("div",{className:"text-2xl text-gray-900",children:y.payouts.length})]})]}),n.jsxs("div",{className:"text-sm text-gray-600 text-center",children:[n.jsxs("p",{children:["Period: ",y.startDate," to ",y.endDate]}),y.storeId&&n.jsxs("p",{children:["Store ID: ",y.storeId]}),n.jsx("p",{className:"mt-2",children:'Click "Export Data" to download the complete report'})]})]})]})})]})}const gge=(e,t,r,a,s,i)=>{const o=s.reduce((u,f)=>u+f.amount,0),l=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>Payslip - ${r} ${a}</title>
      <style>
        body {
          font-family: 'Arial', sans-serif;
          margin: 0;
          padding: 20px;
          color: #333;
        }
        .payslip-container {
          max-width: 800px;
          margin: 0 auto;
          border: 2px solid #9333ea;
          padding: 30px;
          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
        }
        .header {
          text-align: center;
          border-bottom: 3px solid #9333ea;
          padding-bottom: 20px;
          margin-bottom: 30px;
        }
        .company-name {
          font-size: 32px;
          font-weight: bold;
          color: #9333ea;
          margin-bottom: 5px;
        }
        .company-tagline {
          font-size: 14px;
          color: #666;
          font-style: italic;
        }
        .payslip-title {
          font-size: 24px;
          color: #9333ea;
          margin: 20px 0 10px 0;
          font-weight: bold;
        }
        .payslip-period {
          font-size: 16px;
          color: #666;
          margin-bottom: 20px;
        }
        .info-section {
          display: table;
          width: 100%;
          margin-bottom: 30px;
        }
        .info-row {
          display: table-row;
        }
        .info-label {
          display: table-cell;
          padding: 10px 0;
          font-weight: bold;
          color: #9333ea;
          width: 40%;
        }
        .info-value {
          display: table-cell;
          padding: 10px 0;
          color: #333;
        }
        .payment-table {
          width: 100%;
          border-collapse: collapse;
          margin: 20px 0;
          background: white;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .payment-table th {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 12px;
          text-align: left;
          font-weight: bold;
        }
        .payment-table td {
          padding: 12px;
          border-bottom: 1px solid #e5e7eb;
        }
        .payment-table tr:last-child td {
          border-bottom: none;
        }
        .payment-table tr:nth-child(even) {
          background: #faf5ff;
        }
        .total-section {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 20px;
          margin-top: 30px;
          border-radius: 8px;
          text-align: center;
        }
        .total-label {
          font-size: 18px;
          margin-bottom: 10px;
        }
        .total-amount {
          font-size: 36px;
          font-weight: bold;
        }
        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 2px solid #9333ea;
          text-align: center;
          font-size: 12px;
          color: #666;
        }
        .signature-section {
          margin-top: 60px;
          display: flex;
          justify-content: space-between;
        }
        .signature-box {
          text-align: center;
          width: 45%;
        }
        .signature-line {
          border-top: 2px solid #9333ea;
          margin-top: 50px;
          padding-top: 10px;
          font-weight: bold;
          color: #9333ea;
        }
        @media print {
          body {
            padding: 0;
          }
          .payslip-container {
            border: none;
            box-shadow: none;
          }
        }
      </style>
    </head>
    <body>
      <div class="payslip-container">
        <div class="header">
          <div class="company-name">BHANDAR-IMS</div>
          <div class="company-tagline">Food Business Inventory Management System</div>
          <div class="payslip-title">SALARY SLIP</div>
          <div class="payslip-period">For the Month of ${r} ${a}</div>
        </div>
        
        <div class="info-section">
          <div class="info-row">
            <div class="info-label">Employee Name:</div>
            <div class="info-value">${e}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee ID:</div>
            <div class="info-value">${t}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee Type:</div>
            <div class="info-value">${i==="fulltime"?"Permanent":"Contract"}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Payment Date:</div>
            <div class="info-value">${new Date().toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})}</div>
          </div>
        </div>

        <table class="payment-table">
          <thead>
            <tr>
              <th>Payment Date</th>
              <th>Description</th>
              <th style="text-align: right;">Amount ()</th>
            </tr>
          </thead>
          <tbody>
            ${s.map(u=>`
              <tr>
                <td>${new Date(u.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}</td>
                <td>${i==="fulltime"?"Salary Payment":"Daily Wage Payment"}</td>
                <td style="text-align: right;">${u.amount.toLocaleString("en-IN")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="total-section">
          <div class="total-label">Net ${i==="fulltime"?"Salary":"Payment"} for ${r} ${a}</div>
          <div class="total-amount">${o.toLocaleString("en-IN")}</div>
        </div>

        <div class="signature-section">
          <div class="signature-box">
            <div class="signature-line">Employee Signature</div>
          </div>
          <div class="signature-box">
            <div class="signature-line">Authorized Signatory</div>
          </div>
        </div>

        <div class="footer">
          <p>This is a computer-generated payslip and does not require a signature.</p>
          <p> ${a} Bhandar-IMS. All rights reserved.</p>
        </div>
      </div>
    </body>
    </html>
  `,d=window.open("","_blank");d&&(d.document.write(l),d.document.close(),d.onload=()=>{d.print()})};function pI({employeeId:e}){const[t,r]=M.useState(null),[a,s]=M.useState([]),[i,o]=M.useState(!0),[l,d]=M.useState("payouts"),[u,f]=M.useState(()=>{const V=new Date;return`${V.getFullYear()}-${String(V.getMonth()+1).padStart(2,"0")}`}),[m,p]=M.useState(null),[g,v]=M.useState(null),[y,w]=M.useState([]),[k,N]=M.useState(!1),[b,A]=M.useState("");M.useEffect(()=>{E()},[e]);const E=async()=>{try{o(!0);const V=await cl(),J=V.find(ae=>ae.employeeId===e);if(J){r(J);const L=(await il()).filter(z=>z.employeeId===J.id);s(L);const ce=(await j2()).filter(z=>z.employeeId===J.id);if(w(ce),J.inchargeId){const z=V.find(I=>I.id===J.inchargeId);if(z&&(p(z),z.inchargeId)){const I=V.find(Z=>Z.id===z.inchargeId);I&&v(I)}}}}catch(V){console.error("Error loading employee data:",V)}finally{o(!1)}},S=async()=>{try{const V=parseFloat(b);if(!V||V<=0){alert("Please enter a valid amount");return}if(!t.monthlySalary){alert("Your salary information is not available. Please contact HR.");return}if(V>t.monthlySalary){alert("Advance amount cannot exceed your monthly salary");return}if(y.find(te=>te.status==="pending"||te.status==="approved"&&te.remainingAmount>0)){alert("You already have an active or pending salary advance. Please wait for it to be processed or completed.");return}const ae=V/4,L=new Date,H=`${L.getFullYear()}-${String(L.getMonth()+1).padStart(2,"0")}`,ce=[];for(let te=0;te<4;te++){const se=new Date(L.getFullYear(),L.getMonth()+te,1),be=`${se.getFullYear()}-${String(se.getMonth()+1).padStart(2,"0")}`;ce.push({month:be,amount:ae,deducted:!1})}const z=new Date(L.getFullYear(),L.getMonth()+3,1),I=`${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}`,Z={employeeId:t.id,employeeName:t.name,employeeEmployeeId:t.employeeId,amount:V,requestDate:new Date().toISOString(),status:"pending",installments:4,monthlyDeduction:ae,remainingAmount:V,startMonth:H,endMonth:I,deductions:ce};await N2(Z),alert("Salary advance request submitted successfully! Your request will be reviewed by the Cluster Head."),N(!1),A(""),E()}catch(V){console.error("Error applying for salary advance:",V),alert("Failed to submit salary advance request. Please try again.")}},C=(()=>{if(!u)return a;const[V,J]=u.split("-");return a.filter(ae=>{const L=new Date(ae.date);return L.getFullYear()===parseInt(V)&&L.getMonth()+1===parseInt(J)})})(),P=C.reduce((V,J)=>V+J.amount,0),B=(V,J)=>!V&&!J?"N/A":V?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",operations_manager:"Operations Manager",store_ops:"Store Operations",production_ops:"Production Operations"}[V]||V:{cluster_head:"Cluster Head",manager:"Manager",employee:"Employee"}[J||""]||J||"N/A",F=V=>["January","February","March","April","May","June","July","August","September","October","November","December"][V],R=(()=>{const V=new Date,J=[];for(let ae=0;ae<12;ae++){const L=new Date(V.getFullYear(),V.getMonth()-ae,1),H=F(L.getMonth()),ce=L.getFullYear().toString(),z=a.filter(se=>{const be=new Date(se.date);return be.getMonth()===L.getMonth()&&be.getFullYear()===L.getFullYear()}),I=z.reduce((se,be)=>se+be.amount,0),Z=new Date(L.getFullYear(),L.getMonth()+1,5),te=V>=Z;J.push({month:H,year:ce,payouts:z,total:I,isAvailable:te})}return J})(),Q=()=>{const V=[],J=new Date;for(let ae=0;ae<12;ae++){const L=new Date(J.getFullYear(),J.getMonth()-ae,1),H=`${L.getFullYear()}-${String(L.getMonth()+1).padStart(2,"0")}`;V.push({value:H,label:L.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}return V};return i?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading your data..."})]})}):t?n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Welcome, ",t.name,"!"]}),n.jsx("p",{className:"text-gray-600",children:"View your payout history and employee details"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl shadow-sm p-6 mb-6",children:[n.jsx("h2",{className:"text-lg text-gray-900 mb-4",children:"Employee Information"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Employee ID"}),n.jsx("div",{className:"font-medium text-gray-900",children:t.employeeId})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Name"}),n.jsx("div",{className:"font-medium text-gray-900",children:t.name})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Type"}),n.jsx("div",{className:"font-medium text-gray-900",children:t.type==="fulltime"?" Permanent":" Contract"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Role"}),n.jsx("div",{className:"font-medium text-gray-900",children:t.role||"N/A"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Phone"}),n.jsx("div",{className:"font-medium text-gray-900",children:t.phone})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Email"}),n.jsx("div",{className:"font-medium text-gray-900",children:t.email||"N/A"})]}),t.dailyRate&&n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Daily Rate"}),n.jsxs("div",{className:"font-medium text-gray-900",children:["",t.dailyRate]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200",children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"My Details"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>d("payouts"),className:`px-6 py-2 rounded-lg transition-colors ${l==="payouts"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(co,{className:"w-4 h-4"}),n.jsx("span",{children:"My Payouts"})]})}),n.jsx("button",{onClick:()=>d("advance"),className:`px-6 py-2 rounded-lg transition-colors ${l==="advance"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(yd,{className:"w-4 h-4"}),n.jsx("span",{children:"Salary Advance"})]})}),n.jsx("button",{onClick:()=>d("manager"),className:`px-6 py-2 rounded-lg transition-colors ${l==="manager"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fa,{className:"w-4 h-4"}),n.jsx("span",{children:"My Manager"})]})})]})]}),n.jsxs("div",{className:"p-6",children:[l==="payouts"&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("h3",{className:"text-lg text-gray-900 flex items-center gap-2",children:[n.jsx(Dr,{className:"w-5 h-5 text-blue-600"}),"Select Month"]})}),n.jsx("select",{value:u,onChange:V=>f(V.target.value),className:"w-full md:w-auto px-4 py-2 border border-gray-300 rounded-lg",children:Q().map(V=>n.jsx("option",{value:V.value,children:V.label},V.value))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-6 border border-green-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Total Payouts"}),n.jsx(qn,{className:"w-5 h-5 text-green-600"})]}),n.jsxs("div",{className:"text-2xl text-gray-900",children:["",P.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[C.length," payment",C.length!==1?"s":""]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg p-6 border border-blue-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Average Payout"}),n.jsx(hn,{className:"w-5 h-5 text-blue-600"})]}),n.jsxs("div",{className:"text-2xl text-gray-900",children:["",C.length>0?Math.round(P/C.length).toLocaleString():0]}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Per payment"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-6 border border-purple-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Payment Days"}),n.jsx(co,{className:"w-5 h-5 text-purple-600"})]}),n.jsx("div",{className:"text-2xl text-gray-900",children:C.length}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"This month"})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-xl overflow-hidden mb-6",children:[n.jsx("div",{className:"p-4 bg-white border-b border-gray-200",children:n.jsx("h3",{className:"text-lg text-gray-900",children:"Payout History"})}),C.length===0?n.jsxs("div",{className:"p-12 text-center bg-white",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(co,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h4",{className:"text-lg text-gray-900 mb-2",children:"No Payouts Yet"}),n.jsx("p",{className:"text-gray-600",children:"No payouts recorded for the selected month."})]}):n.jsx("div",{className:"overflow-x-auto bg-white",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Status"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:C.sort((V,J)=>new Date(J.date).getTime()-new Date(V.date).getTime()).map(V=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:new Date(V.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),n.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-green-600",children:["",V.amount.toLocaleString()]}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:t.type==="fulltime"?"Salary":"Daily Wage"}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:" Paid"})})]},V.id))})]})})]}),n.jsxs("div",{className:"bg-gray-50 rounded-xl overflow-hidden",children:[n.jsxs("div",{className:"p-4 bg-white border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(vi,{className:"w-5 h-5 text-purple-600"}),n.jsx("h3",{className:"text-lg text-gray-900",children:"Monthly Payslips"})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Payslips are available for download after the 4th of each month"})]}),n.jsx("div",{className:"p-6 bg-white",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:R.map((V,J)=>n.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${V.isAvailable&&V.payouts.length>0?"border-purple-300 bg-gradient-to-br from-purple-50 to-pink-50 hover:shadow-lg":"border-gray-200 bg-gray-50 opacity-60"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"text-gray-900 font-semibold",children:[V.month," ",V.year]}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[V.payouts.length," payment",V.payouts.length!==1?"s":""]})]}),V.isAvailable&&V.payouts.length>0?n.jsxs("button",{onClick:()=>gge(t.name,t.employeeId,V.month,V.year,V.payouts,t.type),className:"flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",title:"Download Payslip",children:[n.jsx(ws,{className:"w-4 h-4"}),"Download"]}):n.jsx("div",{className:"px-3 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm cursor-not-allowed",children:V.payouts.length===0?"No Data":"Not Available"})]}),n.jsxs("div",{className:"pt-3 border-t border-gray-300",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Amount"}),n.jsxs("p",{className:"text-xl text-gray-900 font-semibold",children:["",V.total.toLocaleString("en-IN")]})]})]},J))})})]})]}),l==="advance"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg text-gray-900 font-semibold",children:"Salary Advance"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Apply for salary advance with automatic 4-month recovery"})]}),t.type==="fulltime"&&n.jsxs("button",{onClick:()=>N(!0),disabled:y.some(V=>V.status==="pending"||V.status==="approved"&&V.remainingAmount>0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(yd,{className:"w-5 h-5"}),n.jsx("span",{children:"Apply for Advance"})]})]}),t.type!=="fulltime"&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-yellow-800 font-medium",children:"Not Available"}),n.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Salary advance is only available for permanent employees"})]})]})}),y.length>0?n.jsx("div",{className:"space-y-4",children:y.map(V=>n.jsxs("div",{className:`border-2 rounded-xl p-6 ${V.status==="pending"?"border-yellow-300 bg-yellow-50":V.status==="approved"?"border-green-300 bg-green-50":"border-red-300 bg-red-50"}`,children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["",V.amount.toLocaleString("en-IN")," Advance"]}),V.status==="pending"&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200",children:[n.jsx(fn,{className:"w-3 h-3"}),"Pending Approval"]}),V.status==="approved"&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:[n.jsx(zt,{className:"w-3 h-3"}),"Approved"]}),V.status==="rejected"&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 border border-red-200",children:[n.jsx(Na,{className:"w-3 h-3"}),"Rejected"]})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Applied on ",new Date(V.requestDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]})}),V.status==="rejected"&&V.rejectionReason&&n.jsxs("div",{className:"bg-red-100 border border-red-200 rounded-lg p-3 mb-4",children:[n.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:"Rejection Reason:"}),n.jsx("p",{className:"text-sm text-red-700",children:V.rejectionReason})]}),V.status==="approved"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Monthly Deduction"}),n.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",V.monthlyDeduction.toLocaleString("en-IN")]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Remaining Balance"}),n.jsxs("p",{className:"text-lg font-semibold text-orange-600",children:["",V.remainingAmount.toLocaleString("en-IN")]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Start Month"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:(()=>{const[J,ae]=V.startMonth.split("-");return new Date(parseInt(J),parseInt(ae)-1,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})()})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"End Month"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:(()=>{const[J,ae]=V.endMonth.split("-");return new Date(parseInt(J),parseInt(ae)-1,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})()})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4",children:[n.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Deduction Schedule"}),n.jsx("div",{className:"space-y-2",children:V.deductions.map((J,ae)=>n.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${J.deducted?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[J.deducted?n.jsx(zt,{className:"w-5 h-5 text-green-600"}):n.jsx(fn,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(J.month+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}),J.deducted&&J.deductedDate&&n.jsxs("p",{className:"text-xs text-gray-600",children:["Deducted on ",new Date(J.deductedDate).toLocaleDateString("en-IN")]})]})]}),n.jsxs("p",{className:`text-sm font-semibold ${J.deducted?"text-green-700":"text-gray-700"}`,children:["",J.amount.toLocaleString("en-IN")]})]},ae))})]})]})]},V.id))}):n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[n.jsx(yd,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-600 font-medium mb-1",children:"No Salary Advances Yet"}),n.jsx("p",{className:"text-sm text-gray-500",children:t.type==="fulltime"?'Click "Apply for Advance" to request a salary advance':"Salary advance is only available for permanent employees"})]})]}),l==="manager"&&n.jsx("div",{children:m?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl flex-shrink-0",children:m.name.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-2xl text-gray-900 mb-1",children:m.name}),n.jsx("p",{className:"text-sm text-purple-700 font-medium mb-3",children:"Your Manager / Incharge"}),n.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:m.type==="fulltime"?"Permanent Employee":"Contract Employee"})]})]})}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[n.jsxs("h4",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(am,{className:"w-5 h-5 text-blue-600"}),"Contact Information"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(am,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Phone Number"}),n.jsx("div",{className:"font-medium text-gray-900",children:m.phone||"N/A"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(Fh,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Email Address"}),n.jsx("div",{className:"font-medium text-gray-900",children:m.email||"N/A"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(Rm,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Role / Position"}),n.jsx("div",{className:"font-medium text-gray-900",children:B(m.designation,m.role)||"N/A"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(Fa,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Employee ID"}),n.jsx("div",{className:"font-medium text-gray-900",children:m.employeeId||"N/A"})]})]})]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-white text-sm",children:""})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Manager"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Your manager is responsible for processing your payouts and leave requests"}),n.jsx("li",{children:" For any work-related queries or concerns, please contact your manager"}),n.jsx("li",{children:" Your manager has been assigned by the cluster head to oversee your work"})]})]})]})}),g&&n.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl flex-shrink-0",children:g.name.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-2xl text-gray-900 mb-1",children:g.name}),n.jsx("p",{className:"text-sm text-purple-700 font-medium mb-3",children:"Senior Manager / Incharge"}),n.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:g.type==="fulltime"?"Permanent Employee":"Contract Employee"})]})]})}),g&&n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[n.jsxs("h4",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(am,{className:"w-5 h-5 text-blue-600"}),"Contact Information"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(am,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Phone Number"}),n.jsx("div",{className:"font-medium text-gray-900",children:g.phone||"N/A"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(Fh,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Email Address"}),n.jsx("div",{className:"font-medium text-gray-900",children:g.email||"N/A"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(Rm,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Role / Position"}),n.jsx("div",{className:"font-medium text-gray-900",children:B(g.designation,g.role)||"N/A"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(Fa,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Employee ID"}),n.jsx("div",{className:"font-medium text-gray-900",children:g.employeeId||"N/A"})]})]})]})]}),g&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-white text-sm",children:""})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Senior Manager"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Your senior manager is responsible for processing your payouts and leave requests"}),n.jsx("li",{children:" For any work-related queries or concerns, please contact your senior manager"}),n.jsx("li",{children:" Your senior manager has been assigned by the cluster head to oversee your work"})]})]})]})})]}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Fa,{className:"w-10 h-10 text-gray-400"})}),n.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Manager Assigned"}),n.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"You don't have a manager or incharge assigned yet. Please contact your cluster head for more information."})]})})]})]}),l==="payouts"&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-white text-sm",children:""})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Payouts"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" All payouts are processed and recorded by your manager or cluster head"}),n.jsx("li",{children:" This dashboard shows only your personal payout history"}),n.jsx("li",{children:" For any discrepancies, please contact your manager"}),n.jsx("li",{children:" Payment history is available for the last 12 months"})]})]})]})}),k&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Apply for Salary Advance"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Amount will be deducted over 4 months"})]}),n.jsx("button",{onClick:()=>{N(!1),A("")},className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Na,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-purple-700 mb-1",children:"Your Monthly Salary"}),n.jsxs("p",{className:"text-2xl font-semibold text-purple-900",children:["",t.monthlySalary?.toLocaleString("en-IN")||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Advance Amount ()"}),n.jsx("input",{type:"number",value:b,onChange:V=>A(V.target.value),placeholder:"Enter amount",max:t.monthlySalary||0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum: ",t.monthlySalary?.toLocaleString("en-IN")]})]}),b&&parseFloat(b)>0&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Deduction Schedule:"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-blue-800",children:"Monthly Deduction:"}),n.jsxs("span",{className:"font-semibold text-blue-900",children:["",(parseFloat(b)/4).toLocaleString("en-IN")]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-blue-800",children:"Duration:"}),n.jsx("span",{className:"font-semibold text-blue-900",children:"4 Months"})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-blue-800",children:"Total Amount:"}),n.jsxs("span",{className:"font-semibold text-blue-900",children:["",parseFloat(b).toLocaleString("en-IN")]})]})]})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(xr,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-sm text-yellow-800",children:[n.jsx("p",{className:"font-medium mb-1",children:"Important:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[n.jsx("li",{children:"Your request will be sent to Cluster Head for approval"}),n.jsx("li",{children:"The amount will be deducted equally over 4 months"}),n.jsx("li",{children:"Deductions will start from your next salary payment"}),n.jsx("li",{children:"You cannot apply for another advance until this one is recovered"})]})]})]})})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{N(!1),A("")},className:"flex-1 px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),n.jsx("button",{onClick:S,disabled:!b||parseFloat(b)<=0||parseFloat(b)>(t.monthlySalary||0),className:"flex-1 px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:"Submit Request"})]})]})})]})}):n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 max-w-md w-full text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("span",{className:"text-3xl",children:""})}),n.jsx("h2",{className:"text-xl text-gray-900 mb-2",children:"Employee Not Found"}),n.jsx("p",{className:"text-gray-600",children:"Your employee profile hasn't been set up yet. Please contact your manager or cluster head."})]})})}function l2({context:e,selectedStoreId:t}){const[r,a]=M.useState(new Date().toISOString().split("T")[0]),[s,i]=M.useState("entry"),[o,l]=M.useState(!1),[d,u]=M.useState(!1),[f,m]=M.useState(!1),p=e.user?.designation==="production_incharge",g=e.user?.role==="manager"&&e.user?.designation!=="store_incharge"&&e.user?.designation!=="production_incharge",v=e.user?.role==="cluster_head",y=p,w=g,k=g||v,N=M.useMemo(()=>{const C=t||e.user?.storeId;Wr.debugProduction("ProductionManagement - effectiveStoreId:",C),Wr.debugProduction("ProductionManagement - selectedStoreId prop:",t),Wr.debugProduction("ProductionManagement - user storeId:",e.user?.storeId);const P=C?e.productionData.filter(B=>B.storeId===C):e.productionData;return Wr.debugProduction("ProductionManagement - filtered production count:",P.length),P.find(B=>B.date===r)},[e.productionData,r,t,e.user?.storeId]),[b,A]=M.useState({date:r,chickenMomos:{dough:0,stuffing:0,final:0},chickenCheeseMomos:{dough:0,stuffing:0,final:0},vegMomos:{dough:0,stuffing:0,final:0},cheeseCornMomos:{dough:0,stuffing:0,final:0},paneerMomos:{dough:0,stuffing:0,final:0},vegKurkureMomos:{batter:0,coating:0,final:0},chickenKurkureMomos:{batter:0,coating:0,final:0},wastage:{dough:0,stuffing:0,batter:0,coating:0},sauces:{panfriedSauce:0,chilliChickenSauce:0,spicyKoreanSauce:0,hotGarlicSauce:0,tandooriSauce:0,soupPremix:0,greenMayoChutney:0,spicyRedChutney:0}});M.useEffect(()=>{A(N?{date:N.date,chickenMomos:N.chickenMomos,chickenCheeseMomos:N.chickenCheeseMomos,vegMomos:N.vegMomos,cheeseCornMomos:N.cheeseCornMomos,paneerMomos:N.paneerMomos,vegKurkureMomos:N.vegKurkureMomos,chickenKurkureMomos:N.chickenKurkureMomos,wastage:N.wastage,sauces:N.sauces}:{date:r,chickenMomos:{dough:0,stuffing:0,final:0},chickenCheeseMomos:{dough:0,stuffing:0,final:0},vegMomos:{dough:0,stuffing:0,final:0},cheeseCornMomos:{dough:0,stuffing:0,final:0},paneerMomos:{dough:0,stuffing:0,final:0},vegKurkureMomos:{batter:0,coating:0,final:0},chickenKurkureMomos:{batter:0,coating:0,final:0},wastage:{dough:0,stuffing:0,batter:0,coating:0},sauces:{panfriedSauce:0,chilliChickenSauce:0,spicyKoreanSauce:0,hotGarlicSauce:0,tandooriSauce:0,soupPremix:0,greenMayoChutney:0,spicyRedChutney:0}})},[r,N]);const E=async C=>{if(C.preventDefault(),o){Wr.warn("Submission already in progress, ignoring duplicate request");return}const P={...b,date:r,createdBy:e.user?.employeeId||e.user?.email||"unknown",approvalStatus:"pending",approvedBy:null,approvedAt:null,storeId:e.user?.storeId||void 0,productionHouseId:e.user?.storeId||void 0};console.log(" Saving Production Data:"),console.log("  - User storeId:",e.user?.storeId),console.log("  - Production data storeId:",P.storeId),console.log("  - Production data productionHouseId:",P.productionHouseId),console.log("  - Full production data:",P);try{l(!0),N?(await e.updateProductionData(N.id,P),alert("Production data updated successfully!")):(await e.addProductionData(P),alert("Production data saved successfully!"))}catch(B){console.error("Error saving production data:",B),alert("Failed to save production data. Please try again.")}finally{l(!1)}},S=async()=>{if(N){if(d){console.log(" Approval already in progress, ignoring duplicate request");return}try{u(!0),await e.approveProductionData(N.id);const C=e.productionHouses.find(P=>P.productionHeadId===e.user?.employeeId);if(C&&N){const P={...C.inventory},B=N;Object.entries({chickenMomos:"chicken",chickenCheeseMomos:"chickenCheese",vegMomos:"veg",cheeseCornMomos:"cheeseCorn",paneerMomos:"paneer",vegKurkureMomos:"vegKurkure",chickenKurkureMomos:"chickenKurkure"}).forEach(([O,R])=>{const Q=B[O]?.final||0;Q>0&&(P[R]=(P[R]||0)+Q,console.log(`   Added ${Q} ${R} from ${O}`))}),B.items&&Object.entries(B.items).forEach(([O,R])=>{const Q=R?.final||0;Q>0&&(P[O]=(P[O]||0)+Q,console.log(`   Added ${Q} ${O} from dynamic items`))}),await e.updateProductionHouseInventory(C.id,P),console.log(" Production house inventory updated after approval:",P)}alert("Production data approved successfully! Inventory updated.")}catch(C){console.error("Error approving production:",C),alert("Failed to approve production data. Please try again.")}finally{u(!1)}}},_=async()=>{if(confirm("This will remove duplicate pending production entries, keeping only the original entry for each date. Continue?")){m(!0);try{const C=await bD();C.success&&(Zt.success(C.message),C.duplicatesFound>0?(console.log(" Cleanup Details:",C.details),Zt.info("Refreshing data...",{duration:2e3}),setTimeout(()=>{window.location.reload()},2e3)):(Zt.info("No duplicate entries found!"),m(!1)))}catch(C){console.error("Error cleaning up duplicates:",C),Zt.error("Failed to clean up duplicates. Please try again."),m(!1)}}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[n.jsx(Pn,{className:"w-8 h-8 text-orange-600"}),"Production Management"]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Log daily production data for momos, sauces, and track wastage"})]}),v&&s==="approvals"&&n.jsxs("button",{onClick:_,disabled:f,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg",children:[n.jsx(w9,{className:"w-4 h-4"}),f?"Cleaning...":"Clean Duplicates"]})]}),k&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-1 mb-6 flex gap-2",children:[n.jsx("button",{onClick:()=>i("entry"),className:`flex-1 px-6 py-3 rounded-lg transition-all ${s==="entry"?"bg-orange-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:"Production Entry"}),n.jsxs("button",{onClick:()=>i("approvals"),className:`flex-1 px-6 py-3 rounded-lg transition-all flex items-center justify-center gap-2 ${s==="approvals"?"bg-orange-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["Pending Approvals",(()=>{const C=e.productionData.filter(P=>P.approvalStatus==="pending"&&(!e.user?.storeId||P.storeId===e.user.storeId)).length;return C>0&&n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s==="approvals"?"bg-white text-orange-600":"bg-orange-600 text-white"}`,children:C})})()]})]}),s==="approvals"&&k&&n.jsx("div",{className:"space-y-4",children:(()=>{const C=e.productionData.filter(P=>P.approvalStatus==="pending"&&(!e.user?.storeId||P.storeId===e.user.storeId)).sort((P,B)=>new Date(B.date).getTime()-new Date(P.date).getTime());return C.length===0?n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[n.jsx(zt,{className:"w-16 h-16 mx-auto text-green-500 mb-4"}),n.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"All Caught Up!"}),n.jsx("p",{className:"text-gray-600",children:"No pending production approvals at this time."})]}):C.map(P=>{const B=P.chickenMomos.final+P.chickenCheeseMomos.final+P.vegMomos.final+P.cheeseCornMomos.final+P.paneerMomos.final+P.vegKurkureMomos.final+P.chickenKurkureMomos.final,F=P.wastage.dough+P.wastage.stuffing+P.wastage.batter+P.wastage.coating;return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-yellow-300",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(yn,{className:"w-5 h-5 text-yellow-600"}),n.jsx("h3",{className:"text-xl text-gray-900",children:new Date(P.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Submitted by: ",P.createdBy]})]}),n.jsxs("button",{onClick:async()=>{try{await e.approveProductionData(P.id),alert("Production data approved successfully!")}catch{alert("Failed to approve production data. Please try again.")}},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[n.jsx(js,{className:"w-5 h-5"}),"Approve"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Production"}),n.jsxs("p",{className:"text-2xl text-gray-900",children:[B," pcs"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Wastage"}),n.jsxs("p",{className:"text-2xl text-gray-900",children:[F.toFixed(2)," kg"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Kurkure Production"}),n.jsxs("p",{className:"text-2xl text-gray-900",children:[P.vegKurkureMomos.final+P.chickenKurkureMomos.final," pcs"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Regular Momos"}),n.jsxs("p",{className:"text-2xl text-gray-900",children:[P.chickenMomos.final+P.chickenCheeseMomos.final+P.vegMomos.final+P.cheeseCornMomos.final+P.paneerMomos.final," ","pcs"]})]})]}),n.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[n.jsx("h4",{className:"text-sm text-gray-700 mb-3",children:"Production Breakdown:"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2 text-xs",children:[P.chickenMomos.final>0&&n.jsxs("div",{className:"bg-red-50 p-2 rounded",children:[n.jsx("p",{className:"text-gray-600",children:"Chicken"}),n.jsxs("p",{className:"text-gray-900",children:[P.chickenMomos.final," pcs"]})]}),P.chickenCheeseMomos.final>0&&n.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[n.jsx("p",{className:"text-gray-600",children:"Chk Cheese"}),n.jsxs("p",{className:"text-gray-900",children:[P.chickenCheeseMomos.final," pcs"]})]}),P.vegMomos.final>0&&n.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[n.jsx("p",{className:"text-gray-600",children:"Veg"}),n.jsxs("p",{className:"text-gray-900",children:[P.vegMomos.final," pcs"]})]}),P.cheeseCornMomos.final>0&&n.jsxs("div",{className:"bg-amber-50 p-2 rounded",children:[n.jsx("p",{className:"text-gray-600",children:"Cheese Corn"}),n.jsxs("p",{className:"text-gray-900",children:[P.cheeseCornMomos.final," pcs"]})]}),P.paneerMomos.final>0&&n.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[n.jsx("p",{className:"text-gray-600",children:"Paneer"}),n.jsxs("p",{className:"text-gray-900",children:[P.paneerMomos.final," pcs"]})]}),P.vegKurkureMomos.final>0&&n.jsxs("div",{className:"bg-lime-50 p-2 rounded",children:[n.jsx("p",{className:"text-gray-600",children:"Veg Kurkure"}),n.jsxs("p",{className:"text-gray-900",children:[P.vegKurkureMomos.final," pcs"]})]}),P.chickenKurkureMomos.final>0&&n.jsxs("div",{className:"bg-orange-50 p-2 rounded",children:[n.jsx("p",{className:"text-gray-600",children:"Chk Kurkure"}),n.jsxs("p",{className:"text-gray-900",children:[P.chickenKurkureMomos.final," pcs"]})]})]})]})]},P.id)})})()}),s==="entry"&&n.jsxs(n.Fragment,{children:[n.jsx(xg,{selectedDate:r,onDateChange:a}),N&&N.approvalStatus==="pending"&&n.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-xl p-4 mb-6",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(yn,{className:"w-5 h-5 text-yellow-600"}),n.jsxs("p",{className:"text-gray-900",children:["Production data for ",new Date(r).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," is awaiting approval from Operations Manager."]})]})}),N&&N.approvalStatus==="approved"&&n.jsx("div",{className:"bg-green-50 border-2 border-green-300 rounded-xl p-4 mb-6",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zt,{className:"w-5 h-5 text-green-600"}),n.jsxs("p",{className:"text-gray-900",children:[" Production data approved by ",N.approvedBy]})]})}),w&&N&&N.approvalStatus==="pending"&&n.jsxs("div",{className:"bg-blue-50 border-2 border-blue-300 rounded-xl p-6 mb-6",children:[n.jsxs("h2",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(js,{className:"w-6 h-6 text-blue-600"}),"Approval Required"]}),n.jsxs("p",{className:"text-gray-700 mb-4",children:["Production data submitted by ",N.createdBy," is awaiting your approval."]}),n.jsxs("button",{onClick:S,disabled:d,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(js,{className:"w-5 h-5"}),d?"Approving...":"Approve Production Data"]})]}),n.jsxs("form",{onSubmit:E,className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[n.jsx(Z7,{className:"w-6 h-6 text-orange-600"}),"Regular Momos (Dough + Stuffing)"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Momos"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.chickenMomos.dough,onChange:C=>A({...b,chickenMomos:{...b.chickenMomos,dough:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.chickenMomos.stuffing,onChange:C=>A({...b,chickenMomos:{...b.chickenMomos,stuffing:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),n.jsx("input",{type:"number",value:b.chickenMomos.final,onChange:C=>A({...b,chickenMomos:{...b.chickenMomos,final:parseInt(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Cheese Momos"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.chickenCheeseMomos.dough,onChange:C=>A({...b,chickenCheeseMomos:{...b.chickenCheeseMomos,dough:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.chickenCheeseMomos.stuffing,onChange:C=>A({...b,chickenCheeseMomos:{...b.chickenCheeseMomos,stuffing:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),n.jsx("input",{type:"number",value:b.chickenCheeseMomos.final,onChange:C=>A({...b,chickenCheeseMomos:{...b.chickenCheeseMomos,final:parseInt(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Veg Momos"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.vegMomos.dough,onChange:C=>A({...b,vegMomos:{...b.vegMomos,dough:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.vegMomos.stuffing,onChange:C=>A({...b,vegMomos:{...b.vegMomos,stuffing:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),n.jsx("input",{type:"number",value:b.vegMomos.final,onChange:C=>A({...b,vegMomos:{...b.vegMomos,final:parseInt(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Cheese Corn Momos"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.cheeseCornMomos.dough,onChange:C=>A({...b,cheeseCornMomos:{...b.cheeseCornMomos,dough:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.cheeseCornMomos.stuffing,onChange:C=>A({...b,cheeseCornMomos:{...b.cheeseCornMomos,stuffing:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),n.jsx("input",{type:"number",value:b.cheeseCornMomos.final,onChange:C=>A({...b,cheeseCornMomos:{...b.cheeseCornMomos,final:parseInt(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Paneer Momos"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.paneerMomos.dough,onChange:C=>A({...b,paneerMomos:{...b.paneerMomos,dough:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.paneerMomos.stuffing,onChange:C=>A({...b,paneerMomos:{...b.paneerMomos,stuffing:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),n.jsx("input",{type:"number",value:b.paneerMomos.final,onChange:C=>A({...b,paneerMomos:{...b.paneerMomos,final:parseInt(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[n.jsx(Pn,{className:"w-6 h-6 text-purple-600"}),"Kurkure Momos (Batter + Coating)"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-lime-50 to-lime-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Veg Kurkure Momos"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batter (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.vegKurkureMomos.batter,onChange:C=>A({...b,vegKurkureMomos:{...b.vegKurkureMomos,batter:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coating Mix (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.vegKurkureMomos.coating,onChange:C=>A({...b,vegKurkureMomos:{...b.vegKurkureMomos,coating:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Kurkure (pcs)"}),n.jsx("input",{type:"number",value:b.vegKurkureMomos.final,onChange:C=>A({...b,vegKurkureMomos:{...b.vegKurkureMomos,final:parseInt(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Kurkure Momos"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batter (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.chickenKurkureMomos.batter,onChange:C=>A({...b,chickenKurkureMomos:{...b.chickenKurkureMomos,batter:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coating Mix (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.chickenKurkureMomos.coating,onChange:C=>A({...b,chickenKurkureMomos:{...b.chickenKurkureMomos,coating:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Kurkure (pcs)"}),n.jsx("input",{type:"number",value:b.chickenKurkureMomos.final,onChange:C=>A({...b,chickenKurkureMomos:{...b.chickenKurkureMomos,final:parseInt(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[n.jsx(ls,{className:"w-6 h-6 text-red-600"}),"Wastage Tracking"]}),n.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Dough Wastage (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.wastage.dough,onChange:C=>A({...b,wastage:{...b.wastage,dough:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Stuffing Wastage (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.wastage.stuffing,onChange:C=>A({...b,wastage:{...b.wastage,stuffing:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Batter Wastage (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.wastage.batter,onChange:C=>A({...b,wastage:{...b.wastage,batter:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Coating Wastage (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:b.wastage.coating,onChange:C=>A({...b,wastage:{...b.wastage,coating:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[n.jsx(xB,{className:"w-6 h-6 text-pink-600"}),"Sauces & Chutneys"]}),n.jsx("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-lg p-4",children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Panfried Sauce (L)"}),n.jsx("input",{type:"number",step:"0.01",value:b.sauces.panfriedSauce,onChange:C=>A({...b,sauces:{...b.sauces,panfriedSauce:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chilli Chicken Sauce (L)"}),n.jsx("input",{type:"number",step:"0.01",value:b.sauces.chilliChickenSauce,onChange:C=>A({...b,sauces:{...b.sauces,chilliChickenSauce:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Spicy Korean Sauce (L)"}),n.jsx("input",{type:"number",step:"0.01",value:b.sauces.spicyKoreanSauce,onChange:C=>A({...b,sauces:{...b.sauces,spicyKoreanSauce:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Hot Garlic Sauce (L)"}),n.jsx("input",{type:"number",step:"0.01",value:b.sauces.hotGarlicSauce,onChange:C=>A({...b,sauces:{...b.sauces,hotGarlicSauce:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Tandoori Sauce (L)"}),n.jsx("input",{type:"number",step:"0.01",value:b.sauces.tandooriSauce,onChange:C=>A({...b,sauces:{...b.sauces,tandooriSauce:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Soup Premix (L)"}),n.jsx("input",{type:"number",step:"0.01",value:b.sauces.soupPremix,onChange:C=>A({...b,sauces:{...b.sauces,soupPremix:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Green Mayo Chutney (L)"}),n.jsx("input",{type:"number",step:"0.01",value:b.sauces.greenMayoChutney,onChange:C=>A({...b,sauces:{...b.sauces,greenMayoChutney:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Spicy Red Chutney (L)"}),n.jsx("input",{type:"number",step:"0.01",value:b.sauces.spicyRedChutney,onChange:C=>A({...b,sauces:{...b.sauces,spicyRedChutney:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]})]})})]}),y&&n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"submit",disabled:o,className:"px-8 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Submitting...":N?"Update Production Data":"Save Production Data"})})]})]})]})}function xge({user:e,inventory:t,overheads:r,fixedCosts:a,salesData:s,categorySalesData:i,productionData:o,productionHouses:l,stockRequests:d,productionRequests:u,employees:f,stores:m,inventoryItems:p,onLogout:g,onDataUpdate:v}){const[y,w]=M.useState("analytics"),[k,N]=M.useState(null),[b,A]=M.useState(new Date().toISOString().split("T")[0]),E={inventory:t,overheads:r,fixedCosts:a,salesData:s,categorySalesData:i,productionData:o,productionHouses:l,stockRequests:d,productionRequests:u,employees:f,stores:m,managedStoreIds:[],managedProductionHouseIds:[],inventoryItems:p,loadInventoryItems:async()=>{},addInventoryItem:async()=>{},addOverheadItem:async()=>{},addFixedCostItem:async()=>{},updateInventoryItem:async()=>{},updateOverheadItem:async()=>{},updateFixedCostItem:async()=>{},deleteInventoryItem:async()=>{},deleteOverheadItem:async()=>{},deleteFixedCostItem:async()=>{},addSalesData:async()=>{},updateSalesData:async()=>{},approveSalesData:async()=>{},requestSalesApproval:async()=>{},approveDiscrepancy:async()=>{},rejectDiscrepancy:async()=>{},addProductionData:async()=>{},updateProductionData:async()=>{},approveProductionData:async()=>{},addProductionHouse:async()=>{},updateProductionHouse:async()=>{},updateProductionHouseInventory:async()=>{},deleteProductionHouse:async()=>{},setProductionHouses:()=>{},createStockRequest:async()=>{},fulfillStockRequest:async()=>{},cancelStockRequest:async()=>{},isManager:!1,user:e},S=[{id:"analytics",label:"Analytics",icon:II},{id:"inventory",label:"Inventory",icon:rr},{id:"sales",label:"Sales",icon:qn},{id:"production",label:"Production",icon:Pn},{id:"payroll",label:"Payroll",icon:kn}];return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("nav",{className:"bg-gradient-to-r from-slate-600 via-slate-700 to-slate-800 shadow-xl sticky top-0 z-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white/20 rounded-lg backdrop-blur-sm",children:n.jsx(uB,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-white text-lg font-bold",children:"Bhandar-IMS"}),n.jsx("p",{className:"text-xs text-slate-200",children:"Audit Dashboard"})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-right hidden sm:block",children:[n.jsx("p",{className:"text-sm font-medium text-white",children:e.name}),n.jsxs("p",{className:"text-xs text-slate-200 flex items-center justify-end gap-1",children:[n.jsx(lo,{className:"w-3 h-3"}),"Read-Only Access"]})]}),n.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all backdrop-blur-sm",children:[n.jsx(lh,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]}),n.jsx("div",{className:"flex gap-2 pb-3 overflow-x-auto",children:S.map(_=>n.jsxs("button",{onClick:()=>w(_.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all whitespace-nowrap ${y===_.id?"bg-white text-slate-800 shadow-lg":"text-white hover:bg-white/10"}`,children:[n.jsx(_.icon,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:_.label})]},_.id))})]})}),n.jsx("div",{className:"bg-amber-50 border-b border-amber-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 text-amber-800",children:[n.jsx(lo,{className:"w-5 h-5 flex-shrink-0"}),n.jsxs("p",{className:"text-sm",children:[n.jsx("strong",{children:"Audit Mode:"})," You have read-only access to all data. You cannot create, edit, or delete any records."]})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[y==="analytics"&&n.jsx(o2,{context:E,selectedStoreId:k}),y==="inventory"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Inventory View"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View-only access to inventory data"})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg",children:[n.jsx(lo,{className:"w-4 h-4 text-gray-600"}),n.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Read-Only"})]})]}),n.jsx(Ej,{context:E,selectedStoreId:k})]}),y==="sales"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Sales Data"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View-only access to sales records"})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg",children:[n.jsx(lo,{className:"w-4 h-4 text-gray-600"}),n.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Read-Only"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Date"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Store"}),n.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Offline Sales"}),n.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Online Sales"}),n.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Cash"}),n.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Paytm"}),n.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Status"})]})}),n.jsx("tbody",{children:s.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-12 text-gray-500",children:"No sales data available"})}):s.sort((_,C)=>new Date(C.date).getTime()-new Date(_.date).getTime()).slice(0,50).map(_=>{const C=m.find(P=>P.id===_.storeId);return n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:new Date(_.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),n.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:C?.name||"Unknown Store"}),n.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:["",_.offlineSales.toLocaleString("en-IN")]}),n.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:["",_.onlineSales.toLocaleString("en-IN")]}),n.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:["",_.cashAmount.toLocaleString("en-IN")]}),n.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:["",_.paytmAmount.toLocaleString("en-IN")]}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${_.approvalStatus==="approved"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:_.approvalStatus==="approved"?"Approved":"Pending"})})]},_.id)})})]})})]}),y==="production"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Production Data"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View-only access to production records"})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg",children:[n.jsx(lo,{className:"w-4 h-4 text-gray-600"}),n.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Read-Only"})]})]}),n.jsx(l2,{context:E,selectedStoreId:k})]}),y==="payroll"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Payroll Data"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View-only access to payroll records"})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg",children:[n.jsx(lo,{className:"w-4 h-4 text-gray-600"}),n.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Read-Only"})]})]}),n.jsx(Tk,{userRole:"audit",selectedDate:b,userName:e.name,userEmail:e.email,employees:f,stores:m})]})]})]})}function yge({onLogin:e,onSignup:t,error:r}){const[a,s]=M.useState(!1),[i,o]=M.useState({email:"",password:"",name:"",role:"employee",employeeId:""}),[l,d]=M.useState(!1),u=async f=>{if(f.preventDefault(),l){console.log(" Submission already in progress, ignoring duplicate request");return}d(!0);try{a?await t(i.email,i.password,i.name,i.role):await e(i.email,i.password)}finally{d(!1)}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 sm:p-8",children:[n.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 bg-blue-600 rounded-full mb-3 sm:mb-4",children:n.jsx(rr,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})}),n.jsx("h1",{className:"text-gray-900 mb-2",children:"Inventory Management"}),n.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:a?"Create your account":"Sign in to your account"})]}),r&&n.jsx("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsx("p",{className:"text-xs sm:text-sm text-red-600",children:r})}),n.jsxs("form",{onSubmit:u,className:"space-y-3 sm:space-y-4",children:[a&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Full Name"}),n.jsx("input",{type:"text",value:i.name,onChange:f=>o({...i,name:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your name",required:a})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Role"}),n.jsxs("select",{value:i.role,onChange:f=>o({...i,role:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",required:a,children:[n.jsx("option",{value:"employee",children:"Employee (View your payouts)"}),n.jsx("option",{value:"manager",children:"Manager (Manage inventory)"}),n.jsx("option",{value:"cluster_head",children:"Cluster Head (View & approve)"}),n.jsx("option",{value:"audit",children:"Audit (View reports)"})]})]}),i.role==="employee"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Employee ID"}),n.jsx("input",{type:"text",value:i.employeeId,onChange:f=>o({...i,employeeId:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your Employee ID",required:a&&i.role==="employee"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must match the ID created by your manager"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Email"}),n.jsx("input",{type:"email",value:i.email,onChange:f=>o({...i,email:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your email",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Password"}),n.jsx("input",{type:"password",value:i.password,onChange:f=>o({...i,password:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your password",required:!0,minLength:6}),a&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters"})]}),n.jsx("button",{type:"submit",disabled:l,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-base touch-manipulation",children:l?n.jsxs(n.Fragment,{children:[n.jsx(pc,{className:"w-5 h-5 animate-spin"}),n.jsx("span",{children:"Processing..."})]}):n.jsxs(n.Fragment,{children:[a?n.jsx(Di,{className:"w-5 h-5"}):n.jsx(q9,{className:"w-5 h-5"}),a?"Create Account":"Sign In"]})})]}),n.jsx("div",{className:"mt-4 sm:mt-6 text-center",children:n.jsx("button",{onClick:()=>{s(!a),o({email:"",password:"",name:"",role:"employee",employeeId:""})},className:"text-sm text-blue-600 hover:text-blue-700 active:text-blue-800 touch-manipulation",children:a?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})}function vge({user:e}){const[t,r]=M.useState(u(new Date)),[a,s]=M.useState([]),[i,o]=M.useState(!1),[l,d]=M.useState([]);M.useEffect(()=>{m(),p()},[t]);function u(C){const P=new Date(C),B=P.getDay(),F=P.getDate()-B+(B===0?-6:1);return new Date(P.setDate(F))}function f(C){const P=[];for(let B=0;B<7;B++){const F=new Date(C);F.setDate(C.getDate()+B),P.push(F)}return P}const m=async()=>{try{o(!0);const C=await zh(e.employeeId);s(C)}catch(C){console.error("Error loading timesheet:",C)}finally{o(!1)}},p=async()=>{try{const C=await au(e.employeeId);d(C.filter(P=>P.status==="approved"||P.status==="pending"))}catch(C){console.error("Error loading leaves:",C)}},g=C=>{const P=C.toISOString().split("T")[0];return l.some(B=>B.leaveDate===P)},v=C=>{const P=C.toISOString().split("T")[0],B=a.find(F=>F.date===P);return B||{employeeId:e.employeeId,date:P,startTime:"",endTime:"",totalHours:0,status:"pending",isLeave:g(C)}},y=(C,P)=>{if(!C||!P)return 0;const[B,F]=C.split(":").map(Number),[O,R]=P.split(":").map(Number),Q=B*60+F;return(O*60+R-Q)/60},w=(C,P,B)=>{const F=C.toISOString().split("T")[0],O=a.find(V=>V.date===F);let R;O?R={...O,[P]:B}:R={employeeId:e.employeeId,date:F,startTime:P==="startTime"?B:"",endTime:P==="endTime"?B:"",totalHours:0,status:"pending",isLeave:!1},R.totalHours=y(R.startTime,R.endTime);const Q=a.filter(V=>V.date!==F);s([...Q,R])},k=async C=>{const P=v(C);if(!P.startTime||!P.endTime){alert("Please enter both start and end times");return}if(P.totalHours<4){alert("For half day, minimum 4 hours required");return}try{o(!0),await(void 0)(P),await m(),alert("Timesheet saved successfully")}catch(B){console.error("Error saving timesheet:",B),alert("Error saving timesheet")}finally{o(!1)}},N=async()=>{const P=f(t).map(B=>v(B)).filter(B=>B.startTime&&B.endTime);if(P.length===0){alert("Please enter timesheet data for at least one day");return}for(const B of P)if(B.totalHours<4){alert(`${B.date}: Minimum 4 hours required for half day`);return}try{o(!0),await(void 0)(P),await m(),alert("Week timesheet saved successfully")}catch(B){console.error("Error saving week timesheet:",B),alert("Error saving week timesheet")}finally{o(!1)}},b=()=>{const C=new Date(t);C.setDate(C.getDate()-7),r(C)},A=()=>{const C=new Date(t);C.setDate(C.getDate()+7),r(C)},E=async()=>{try{o(!0);const C=new Date(t);C.setDate(C.getDate()-7);const P=f(C),B=await zh(e.employeeId),F=P.map(V=>{const J=V.toISOString().split("T")[0];return B.find(ae=>ae.date===J)}).filter(Boolean);if(F.length===0){alert("No timesheet data found in previous week to copy"),o(!1);return}const O=f(t),R=[];if(O.forEach((V,J)=>{const ae=V.toISOString().split("T")[0],L=F[J],H=a.find(z=>z.date===ae);!g(V)&&L&&L.startTime&&L.endTime&&(!H||H.status!=="approved")&&R.push({employeeId:e.employeeId,date:ae,startTime:L.startTime,endTime:L.endTime,totalHours:L.totalHours,status:"pending",isLeave:!1})}),R.length===0){alert("All days in current week are either on leave or already have approved entries"),o(!1);return}const Q=[...a];R.forEach(V=>{const J=Q.findIndex(ae=>ae.date===V.date);J>=0?Q[J]=V:Q.push(V)}),s(Q),alert(`Copied ${R.length} day(s) from previous week! Don't forget to save.`)}catch(C){console.error("Error copying from previous week:",C),alert("Error copying data from previous week")}finally{o(!1)}},S=f(t),_=new Date(t);return _.setDate(_.getDate()+6),n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"My Timesheet"}),n.jsx("p",{className:"text-gray-600",children:"Track your daily working hours"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:[n.jsx(cj,{className:"w-4 h-4"}),"Previous Week"]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center gap-2 justify-center mb-1",children:[n.jsx(Dr,{className:"w-5 h-5 text-purple-600"}),n.jsxs("span",{className:"text-lg text-gray-900",children:[t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," - ",_.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Week View"})]}),n.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:["Next Week",n.jsx(sl,{className:"w-4 h-4"})]})]}),n.jsx("div",{className:"flex justify-center pt-2 border-t border-gray-200",children:n.jsxs("button",{onClick:E,disabled:i,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg hover:from-blue-600 hover:to-cyan-600 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(p9,{className:"w-4 h-4"}),"Copy from Previous Week"]})})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left",children:"Date"}),n.jsx("th",{className:"px-6 py-4 text-left",children:"Day"}),n.jsx("th",{className:"px-6 py-4 text-left",children:"Start Time"}),n.jsx("th",{className:"px-6 py-4 text-left",children:"End Time"}),n.jsx("th",{className:"px-6 py-4 text-left",children:"Total Hours"}),n.jsx("th",{className:"px-6 py-4 text-left",children:"Status"}),n.jsx("th",{className:"px-6 py-4 text-left",children:"Action"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:S.map((C,P)=>{const B=v(C),F=g(C);return n.jsxs("tr",{className:F?"bg-yellow-50":P%2===0?"bg-gray-50":"bg-white",children:[n.jsx("td",{className:"px-6 py-4 text-gray-900",children:C.toLocaleDateString("en-US",{month:"short",day:"numeric"})}),n.jsx("td",{className:"px-6 py-4 text-gray-700",children:C.toLocaleDateString("en-US",{weekday:"short"})}),n.jsx("td",{className:"px-6 py-4",children:F?n.jsx("span",{className:"text-yellow-700 text-sm",children:"On Leave"}):n.jsx("input",{type:"time",value:B.startTime,onChange:O=>w(C,"startTime",O.target.value),disabled:B.status==="approved",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100"})}),n.jsx("td",{className:"px-6 py-4",children:F?n.jsx("span",{className:"text-yellow-700 text-sm",children:"On Leave"}):n.jsx("input",{type:"time",value:B.endTime,onChange:O=>w(C,"endTime",O.target.value),disabled:B.status==="approved",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100"})}),n.jsx("td",{className:"px-6 py-4",children:F?n.jsx("span",{className:"text-yellow-700",children:"-"}):n.jsx("span",{className:`${B.totalHours>=4?"text-green-700":B.totalHours>0?"text-red-700":"text-gray-500"}`,children:B.totalHours>0?`${B.totalHours.toFixed(2)} hrs`:"-"})}),n.jsx("td",{className:"px-6 py-4",children:F?n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[n.jsx(xr,{className:"w-4 h-4"}),"Leave"]}):B.status==="approved"?n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:[n.jsx(zt,{className:"w-4 h-4"}),"Approved"]}):B.status==="rejected"?n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm",children:[n.jsx(Na,{className:"w-4 h-4"}),"Rejected"]}):B.startTime&&B.endTime?n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[n.jsx(fn,{className:"w-4 h-4"}),"Pending"]}):n.jsx("span",{className:"text-gray-400 text-sm",children:"Not filled"})}),n.jsx("td",{className:"px-6 py-4",children:!F&&B.status!=="approved"&&n.jsxs("button",{onClick:()=>k(C),disabled:i||!B.startTime||!B.endTime,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:[n.jsx(rc,{className:"w-4 h-4"}),"Save"]})})]},P)})})]})})}),n.jsx("div",{className:"mt-6 flex justify-end",children:n.jsxs("button",{onClick:N,disabled:i,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg disabled:opacity-50",children:[n.jsx(rc,{className:"w-5 h-5"}),"Save Entire Week"]})})]})})}function bge({user:e}){const[t,r]=M.useState([]),[a,s]=M.useState(0),[i,o]=M.useState(0),[l,d]=M.useState(!1),[u,f]=M.useState(!1),[m,p]=M.useState({leaveDate:"",leaveType:"full",isAdvanceLeave:!1,reason:""});M.useEffect(()=>{g(),v()},[]),M.useEffect(()=>{y()},[t,a]);const g=async()=>{try{d(!0);const b=await au(e.employeeId);r(b)}catch(b){console.error("Error loading leaves:",b)}finally{d(!1)}},v=async()=>{try{const b=await VD(e.employeeId,e.joiningDate||"2024-01-01");s(b)}catch(b){console.error("Error calculating leave balance:",b)}},y=()=>{const A=t.filter(E=>E.status==="pending").reduce((E,S)=>{const _=S.leaveType||"full";return E+(_==="half"?.5:1)},0);o(a-A)},w=async()=>{if(!m.leaveDate||!m.reason){alert("Please fill all fields");return}if(t.find(E=>E.leaveDate===m.leaveDate)){alert("Leave already applied for this date");return}const A=m.leaveType==="half"?.5:1;if(m.isAdvanceLeave){const E=new Date,S=E.getMonth(),_=E.getFullYear(),P=t.filter(F=>{const O=new Date(F.leaveDate);return F.isAdvanceLeave&&F.status==="approved"&&O.getMonth()===S&&O.getFullYear()===_}).reduce((F,O)=>{const R=O.leaveType||"full";return F+(R==="half"?.5:1)},0);if(P+A>2){alert(`You can only take maximum 2 days of advance leave per month. You have already used ${P} day(s).`);return}if(t.filter(F=>{const O=new Date(F.leaveDate);return F.status==="approved"&&O.getMonth()===S&&O.getFullYear()===_}).reduce((F,O)=>{const R=O.leaveType||"full";return F+(R==="half"?.5:1)},0)+A>5){alert("Maximum 5 days of leave allowed per month (including advance leave).");return}}else if(a<A){alert(`Insufficient leave balance. You have ${a} day(s) remaining. Consider applying for advance leave (max 2 days).`);return}try{d(!0);const E={employeeId:e.employeeId,leaveDate:m.leaveDate,leaveType:m.leaveType,isAdvanceLeave:m.isAdvanceLeave,reason:m.reason,status:"pending",appliedAt:new Date().toISOString()};await KD(E),await g(),await v(),p({leaveDate:"",leaveType:"full",isAdvanceLeave:!1,reason:""}),f(!1),alert("Leave application submitted successfully")}catch(E){console.error("Error applying leave:",E),alert("Error applying leave")}finally{d(!1)}},k=b=>{switch(b){case"approved":return n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:[n.jsx(zt,{className:"w-4 h-4"}),"Approved"]});case"rejected":return n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm",children:[n.jsx(Na,{className:"w-4 h-4"}),"Rejected"]});default:return n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[n.jsx(fn,{className:"w-4 h-4"}),"Pending"]})}},N=[...t].sort((b,A)=>new Date(A.leaveDate).getTime()-new Date(b.leaveDate).getTime());return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Leave Management"}),n.jsx("p",{className:"text-gray-600",children:"Apply for leaves and track your leave balance"})]}),n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"text-lg mb-4 opacity-90",children:"Leave Balance"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"text-sm opacity-75 mb-1",children:"Current Balance"}),n.jsxs("div",{className:`text-5xl mb-1 ${a<0?"text-red-200":""}`,children:[a,a<0&&n.jsx("span",{className:"text-sm ml-2 bg-red-500/30 px-2 py-1 rounded",children:"Negative"})]}),n.jsx("p",{className:"text-xs opacity-75",children:a<0?"You have taken advance leave - will be deducted next month":"approved leaves deducted"})]}),i!==a&&n.jsxs("div",{className:"pt-4 border-t border-white/20",children:[n.jsx("div",{className:"text-sm opacity-75 mb-1",children:"Projected Balance"}),n.jsx("div",{className:`text-3xl mb-1 ${i<0?"text-red-200":""}`,children:i}),n.jsx("p",{className:"text-xs opacity-75",children:"if all pending leaves are approved"})]}),n.jsx("p",{className:"text-sm opacity-75 mt-4",children:"3 leaves/month  max 5 days (3 regular + 2 advance)"})]}),n.jsx("div",{className:"bg-white/20 rounded-full p-6",children:n.jsx(Dr,{className:"w-16 h-16"})})]})}),n.jsx("div",{className:"mb-6",children:n.jsxs("button",{onClick:()=>f(!u),className:"flex items-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors shadow-md",children:[n.jsx(xo,{className:"w-5 h-5"}),"Apply for Leave"]})}),u&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Apply for Leave"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Leave Date"}),n.jsx("input",{type:"date",value:m.leaveDate,onChange:b=>p({...m,leaveDate:b.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Leave Type"}),n.jsxs("select",{value:m.leaveType,onChange:b=>p({...m,leaveType:b.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"full",children:"Full Day"}),n.jsx("option",{value:"half",children:"Half Day"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Reason"}),n.jsx("input",{type:"text",value:m.reason,onChange:b=>p({...m,reason:b.target.value}),placeholder:"Enter reason for leave",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),n.jsx("div",{className:"mb-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:m.isAdvanceLeave,onChange:b=>p({...m,isAdvanceLeave:b.target.checked}),className:"mt-1 w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:"Apply as Advance Leave"}),n.jsxs("div",{className:"text-xs text-gray-600",children:[n.jsx(xr,{className:"w-4 h-4 inline mr-1"}),"You can take up to 2 days advance leave per month. This will make your balance negative and will be deducted from next month's quota.",n.jsx("br",{}),n.jsx("span",{className:"font-medium",children:"Maximum total: 5 days/month (3 regular + 2 advance)"})]})]})]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:w,disabled:l,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-300",children:"Submit Application"}),n.jsx("button",{onClick:()=>f(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:n.jsx("h3",{className:"text-lg text-gray-900",children:"Leave History"})}),l?n.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):N.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(Dr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No leave applications yet"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Leave Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Reason"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Applied On"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Approved By"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:N.map((b,A)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(b.leaveDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(b.leaveType||"full")==="full"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:(b.leaveType||"full")==="full"?"Full Day":"Half Day"}),b.isAdvanceLeave&&n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Advance"})]})}),n.jsx("td",{className:"px-6 py-4 text-gray-700",children:b.reason}),n.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:b.appliedAt?new Date(b.appliedAt).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"-"}),n.jsx("td",{className:"px-6 py-4",children:k(b.status)}),n.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:b.approvedBy||"-"})]},A))})]})})]}),n.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-sm text-blue-900",children:[n.jsx("p",{className:"mb-2",children:n.jsx("strong",{children:"Leave Policy:"})}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"3 leaves are credited on the 1st of each month (Jan: 3, Feb: 6, Mar: 9, etc.)"}),n.jsx("li",{children:"Unused leaves carry forward within the year"}),n.jsx("li",{children:"All unused leaves lapse on December 31st (reset to 0)"}),n.jsx("li",{children:"New year starts fresh with 3 leaves on January 1st"}),n.jsx("li",{children:"All leave applications require manager approval"}),n.jsx("li",{children:"Approved leaves will prevent timesheet entry for that day"})]})]})]})})]})})}function wge({managerId:e}){const[t,r]=M.useState(!1),[a,s]=M.useState(null),i=async()=>{r(!0),s(null);const o={serverVersion:null,managerRoute:null,allEmployees:null};try{console.log("Testing server health...");const l=await fetch(`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees`,{headers:{Authorization:`Bearer ${zn}`}});o.allEmployees={status:l.status,ok:l.ok,data:l.ok?await l.json():await l.text()},console.log("Testing manager route with ID:",e);const d=`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees/manager/${e}`;console.log("Full URL:",d);const u=await fetch(d,{headers:{Authorization:`Bearer ${zn}`}});console.log("Manager route status:",u.status);const f=await u.text();console.log("Manager route response:",f),o.managerRoute={url:d,status:u.status,ok:u.ok,data:f?JSON.parse(f):null},s(o)}catch(l){console.error("Route test error:",l),s({error:l instanceof Error?l.message:String(l),tests:o})}finally{r(!1)}};return n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(PE,{className:"w-6 h-6 text-yellow-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Route Debugger"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Test if the manager route is working"})]})]}),n.jsx("button",{onClick:i,disabled:t,className:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:t?n.jsxs(n.Fragment,{children:[n.jsx(B9,{className:"w-4 h-4 animate-spin"}),"Testing Routes..."]}):n.jsxs(n.Fragment,{children:[n.jsx(PE,{className:"w-4 h-4"}),"Test Routes"]})}),a&&n.jsxs("div",{className:"mt-4 space-y-3",children:[a.error&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:n.jsxs("p",{className:"text-sm text-red-800",children:[n.jsx("strong",{children:"Error:"})," ",a.error]})}),a.allEmployees&&n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.allEmployees.ok?n.jsx(zt,{className:"w-4 h-4 text-green-600"}):n.jsx(Na,{className:"w-4 h-4 text-red-600"}),n.jsxs("span",{className:"font-medium text-sm",children:["GET /unified-employees - ",a.allEmployees.status]})]}),n.jsx("pre",{className:"text-xs bg-gray-50 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(a.allEmployees.data,null,2)})]}),a.managerRoute&&n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.managerRoute.ok?n.jsx(zt,{className:"w-4 h-4 text-green-600"}):n.jsx(Na,{className:"w-4 h-4 text-red-600"}),n.jsxs("span",{className:"font-medium text-sm",children:["GET /unified-employees/manager/",e," - ",a.managerRoute.status]})]}),n.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:["URL: ",a.managerRoute.url]}),n.jsx("pre",{className:"text-xs bg-gray-50 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(a.managerRoute.data,null,2)})]})]})]})}function jge({managerId:e,role:t,selectedStoreId:r,isIncharge:a=!1,inchargeDesignation:s=null}){const[i,o]=M.useState([]),[l,d]=M.useState(""),[u,f]=M.useState([]),[m,p]=M.useState(!1);console.log("ApproveTimesheets: managerId prop =",e),console.log("ApproveTimesheets: role prop =",t),console.log("ApproveTimesheets: isIncharge =",a),console.log("ApproveTimesheets: inchargeDesignation =",s);const g=M.useMemo(()=>{let S=i;return r&&(S=S.filter(_=>_.storeId===r||_.storeId===null||_.storeId===void 0)),a&&e&&(S=S.filter(_=>_.inchargeId===e)),S},[i,r,a,e]);M.useEffect(()=>{v()},[]),M.useEffect(()=>{g.length>0&&!g.find(S=>S.employeeId===l)?d(g[0].employeeId):g.length===0&&d("")},[g]),M.useEffect(()=>{l&&y()},[l]);const v=async()=>{try{console.log("ApproveTimesheets: Loading employees/managers for role:",t,"isIncharge:",a);let S;t==="cluster_head"?(console.log("ApproveTimesheets: Calling getManagersByClusterHead with clusterHeadId:",e),S=await hg(e),console.log("ApproveTimesheets: Received managers:",S),S.length>0&&(console.log(" MANAGERS RETURNED:"),S.forEach(_=>{console.log(`  - ${_.employeeId} (${_.name}) - clusterHeadId: ${_.clusterHeadId}, role: ${_.role}`)}))):a?(console.log("ApproveTimesheets: Calling getEmployeesByIncharge with inchargeId:",e),S=await b2(e),console.log("ApproveTimesheets: Received employees under incharge:",S)):(console.log("ApproveTimesheets: Calling getEmployeesByManager with managerId:",e),S=await nc(e),console.log("ApproveTimesheets: Received employees:",S)),o(S),S.length>0?d(S[0].employeeId):console.log("ApproveTimesheets: No employees/managers found")}catch(S){console.error("Error loading employees:",S)}},y=async()=>{try{p(!0);const S=await zh(l);f(S.filter(_=>_.status==="pending"))}catch(S){console.error("Error loading timesheets:",S)}finally{p(!1)}},w=async S=>{try{p(!0),await(void 0)(S,e),await y(),alert("Timesheet approved successfully")}catch(_){console.error("Error approving timesheet:",_),alert("Error approving timesheet")}finally{p(!1)}},k=async S=>{const _=prompt("Enter rejection reason:");if(_)try{p(!0),await(void 0)(S,e,_),await y(),alert("Timesheet rejected")}catch(C){console.error("Error rejecting timesheet:",C),alert("Error rejecting timesheet")}finally{p(!1)}},N=u.length,b=i.find(S=>S.employeeId===l),A=t==="cluster_head"?"Operations Manager":"Employee",E=t==="cluster_head"?"Operations Managers":"Employees";return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Approve ",A," Timesheets"]}),n.jsx("p",{className:"text-gray-600",children:t==="cluster_head"?"Review and approve manager timesheet entries. Contract workers are paid per day worked and do not require attendance approval.":"Review and approve employee timesheet entries"})]}),!e&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-red-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-red-900 font-medium",children:"Manager ID Not Found"}),n.jsx("p",{className:"text-sm text-red-700",children:"Your account doesn't have an employee ID set. Please contact the administrator or log out and log back in."})]})]})}),e&&i.length===0&&n.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-blue-600"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-blue-900 font-medium",children:["No ",E," Found"]}),n.jsx("p",{className:"text-sm text-blue-700",children:t==="cluster_head"?`No managers are assigned to you (${e}). To fix this:`:"You don't have any employees assigned to you yet."}),t==="cluster_head"&&n.jsxs("ul",{className:"text-xs text-blue-700 mt-2 ml-4 space-y-1",children:[n.jsxs("li",{children:[" Go to ",n.jsx("strong",{children:"Employee Management"}),"  ",n.jsx("strong",{children:"Hierarchy Management"})," tab"]}),n.jsxs("li",{children:[" Click ",n.jsx("strong",{children:"Edit"})," on each manager (e.g., BM004)"]}),n.jsxs("li",{children:[" Make sure ",n.jsx("strong",{children:"Cluster Head ID"})," is set to your ID: ",n.jsx("strong",{children:e})]}),n.jsxs("li",{children:[" Click ",n.jsx("strong",{children:"Save Changes"})]})]}),n.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["Your ID: ",e]})]})]})}),e&&i.length===0&&n.jsx(wge,{managerId:e}),N>0&&n.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-yellow-600"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-yellow-900 font-medium",children:[N," timesheet",N>1?"s":""," pending approval"]}),n.jsx("p",{className:"text-sm text-yellow-700",children:"Review and take action on pending requests"})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[n.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",A]}),n.jsxs("select",{value:l,onChange:S=>d(S.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsxs("option",{value:"",children:["-- Select ",A," --"]}),g.map(S=>n.jsxs("option",{value:S.employeeId,children:[S.name," (",S.employeeId,")"]},S.employeeId))]}),t==="cluster_head"&&i.length>0&&n.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsxs("p",{className:"text-xs text-blue-900 font-medium mb-2",children:[" Debug: ",i.length," manager",i.length>1?"s":""," with clusterHeadId = ",e]}),n.jsx("div",{className:"space-y-1",children:i.map(S=>n.jsxs("div",{className:"text-xs text-blue-800 flex items-center gap-2",children:[n.jsx("span",{className:"px-2 py-0.5 bg-blue-100 rounded",children:S.employeeId}),n.jsx("span",{children:S.name}),n.jsxs("span",{className:"text-blue-600",children:["(",S.role,")"]})]},S.employeeId))}),n.jsxs("p",{className:"text-xs text-blue-700 mt-2",children:[" If you see unexpected managers here, go to ",n.jsx("strong",{children:"Employee Management  Hierarchy"})," and check their Cluster Head ID"]})]})]}),b&&n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx(Fa,{className:"w-8 h-8"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl mb-1",children:b.name}),n.jsxs("p",{className:"text-sm opacity-90",children:["Employee ID: ",b.employeeId]}),n.jsxs("p",{className:"text-sm opacity-90",children:["Email: ",b.email]})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:n.jsx("h3",{className:"text-lg text-gray-900",children:"Pending Timesheets"})}),m?n.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):u.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(fn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No pending timesheets for this employee"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Day"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Start Time"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"End Time"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Total Hours"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map((S,_)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(S.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),n.jsx("td",{className:"px-6 py-4 text-gray-700",children:new Date(S.date).toLocaleDateString("en-US",{weekday:"short"})}),n.jsx("td",{className:"px-6 py-4 text-gray-900",children:S.startTime}),n.jsx("td",{className:"px-6 py-4 text-gray-900",children:S.endTime}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:`${S.totalHours>=8?"text-green-700":S.totalHours>=4?"text-yellow-700":"text-red-700"}`,children:[S.totalHours.toFixed(2)," hrs"]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[n.jsx(fn,{className:"w-4 h-4"}),"Pending"]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>w(S.id),disabled:m,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50",children:[n.jsx(zt,{className:"w-4 h-4"}),"Approve"]}),n.jsxs("button",{onClick:()=>k(S.id),disabled:m,className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm disabled:opacity-50",children:[n.jsx(Na,{className:"w-4 h-4"}),"Reject"]})]})})]},_))})]})})]})]})})}function Nge({managerId:e,managerName:t,role:r,selectedStoreId:a,isIncharge:s=!1,inchargeDesignation:i=null}){const[o,l]=M.useState([]),[d,u]=M.useState(""),[f,m]=M.useState([]),[p,g]=M.useState(!1);console.log("ApproveLeaves: managerId prop =",e),console.log("ApproveLeaves: role prop =",r),console.log("ApproveLeaves: isIncharge =",s),console.log("ApproveLeaves: inchargeDesignation =",i);const v=M.useMemo(()=>{let _=o;return a&&(_=_.filter(C=>C.storeId===a||C.storeId===null||C.storeId===void 0)),s&&e&&(_=_.filter(C=>C.inchargeId===e)),_},[o,a,s,e]);M.useEffect(()=>{y()},[]),M.useEffect(()=>{v.length>0&&!v.find(_=>_.employeeId===d)?u(v[0].employeeId):v.length===0&&u("")},[v]),M.useEffect(()=>{d&&w()},[d]);const y=async()=>{try{console.log("ApproveLeaves: Loading employees/managers for role:",r,"isIncharge:",s);let _;r==="cluster_head"?(console.log("ApproveLeaves: Calling getManagersByClusterHead with clusterHeadId:",e),_=await hg(e),console.log("ApproveLeaves: Received managers:",_)):s?(console.log("ApproveLeaves: Calling getEmployeesByIncharge with inchargeId:",e),_=await b2(e),console.log("ApproveLeaves: Received employees under incharge:",_)):(console.log("ApproveLeaves: Calling getEmployeesByManager with managerId:",e),_=await nc(e),console.log("ApproveLeaves: Received employees:",_)),l(_),_.length>0?u(_[0].employeeId):console.log("ApproveLeaves: No employees/managers found")}catch(_){console.error("Error loading employees:",_)}},w=async()=>{try{g(!0);const _=await au(d);m(_.filter(C=>C.status==="pending"))}catch(_){console.error("Error loading leaves:",_)}finally{g(!1)}},k=async _=>{try{g(!0),console.log("Attempting to approve leave:",_),console.log("api.approveLeave function exists?",typeof kj),console.log("Available API functions:",Object.keys(_q).filter(C=>C.includes("Leave"))),await kj(_,e,t),await w(),alert("Leave approved successfully")}catch(C){console.error("Error approving leave:",C),alert("Error approving leave")}finally{g(!1)}},N=async _=>{const C=prompt("Enter rejection reason:");if(C)try{g(!0),await GD(_,e,t,C),await w(),alert("Leave rejected")}catch(P){console.error("Error rejecting leave:",P),alert("Error rejecting leave")}finally{g(!1)}},b=f.length,A=o.find(_=>_.employeeId===d),E=r==="cluster_head"?"Operations Manager":"Employee",S=r==="cluster_head"?"Operations Managers":"Employees";return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Approve ",E," Leaves"]}),n.jsx("p",{className:"text-gray-600",children:r==="cluster_head"?"Review and approve manager leave applications. Contract workers do not require leave approval.":"Review and approve employee leave applications"})]}),b>0&&n.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-yellow-600"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-yellow-900 font-medium",children:[b," leave application",b>1?"s":""," pending approval"]}),n.jsx("p",{className:"text-sm text-yellow-700",children:"Review and take action on pending requests"})]})]})}),e&&o.length===0&&n.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-blue-600"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-blue-900 font-medium",children:["No ",S," Found"]}),n.jsx("p",{className:"text-sm text-blue-700",children:r==="cluster_head"?`No managers are assigned to you (${e}). To fix this:`:"You don't have any employees assigned to you yet."}),r==="cluster_head"&&n.jsxs("ul",{className:"text-xs text-blue-700 mt-2 ml-4 space-y-1",children:[n.jsxs("li",{children:[" Go to ",n.jsx("strong",{children:"Employee Management"}),"  ",n.jsx("strong",{children:"Hierarchy Management"})," tab"]}),n.jsxs("li",{children:[" Click ",n.jsx("strong",{children:"Edit"})," on each manager (e.g., BM004)"]}),n.jsxs("li",{children:[" Make sure ",n.jsx("strong",{children:"Cluster Head ID"})," is set to your ID: ",n.jsx("strong",{children:e})]}),n.jsxs("li",{children:[" Click ",n.jsx("strong",{children:"Save Changes"})]})]}),n.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["Your ID: ",e]})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[n.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",E]}),n.jsxs("select",{value:d,onChange:_=>u(_.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsxs("option",{value:"",children:["-- Select ",E," --"]}),v.map(_=>n.jsxs("option",{value:_.employeeId,children:[_.name," (",_.employeeId,")"]},_.employeeId))]})]}),A&&n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx(Fa,{className:"w-8 h-8"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl mb-1",children:A.name}),n.jsxs("p",{className:"text-sm opacity-90",children:["Employee ID: ",A.employeeId]}),n.jsxs("p",{className:"text-sm opacity-90",children:["Email: ",A.email]})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:n.jsx("h3",{className:"text-lg text-gray-900",children:"Pending Leave Applications"})}),p?n.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):f.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(Dr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No pending leave applications for this employee"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Leave Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Leave Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Reason"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Applied On"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map((_,C)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(_.leaveDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(_.leaveType||"full")==="full"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:(_.leaveType||"full")==="full"?"Full Day":"Half Day"})}),n.jsx("td",{className:"px-6 py-4 text-gray-700",children:_.reason}),n.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:_.appliedAt?new Date(_.appliedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>k(_.id),disabled:p,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50",children:[n.jsx(zt,{className:"w-4 h-4"}),"Approve"]}),n.jsxs("button",{onClick:()=>N(_.id),disabled:p,className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm disabled:opacity-50",children:[n.jsx(Na,{className:"w-4 h-4"}),"Reject"]})]})})]},C))})]})})]})]})})}function kge({managerId:e,role:t}){const[r,a]=M.useState([]),[s,i]=M.useState([]),[o,l]=M.useState(!1),[d,u]=M.useState({});M.useEffect(()=>{f()},[]);const f=async()=>{try{if(l(!0),t==="manager"){const m=await nc(e);a(m);const p={};for(const g of m){const[v,y]=await Promise.all([zh(g.employeeId),au(g.employeeId)]);p[g.employeeId]={pendingTimesheets:v.filter(w=>w.status==="pending").length,pendingLeaves:y.filter(w=>w.status==="pending").length,approvedTimesheets:v.filter(w=>w.status==="approved").length,totalLeaves:y.filter(w=>w.status==="approved").length}}u(p)}else{const m=await hg(e);i(m);const p={};for(const g of m){const v=await nc(g.employeeId);p[g.employeeId]={employeeCount:v.length,...g.stats}}u(p)}}catch(m){if(m instanceof Error&&(m.message==="Not authenticated"||m.message==="Unauthorized"))return;console.error("Error loading data:",m)}finally{l(!1)}};return o?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6 flex items-center justify-center",children:n.jsx("div",{className:"text-gray-500",children:"Loading..."})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:t==="manager"?"My Team":"Manager Overview"}),n.jsx("p",{className:"text-gray-600",children:t==="manager"?"View all employees under your management":"View all managers and their team performance"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx(kn,{className:"w-12 h-12 opacity-80"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-3xl",children:t==="manager"?r.length:s.length}),n.jsx("div",{className:"text-sm opacity-90",children:t==="manager"?"Total Employees":"Total Managers"})]})]})}),n.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx(fn,{className:"w-12 h-12 opacity-80"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-3xl",children:Object.values(d).reduce((m,p)=>m+(p.pendingTimesheets||0),0)}),n.jsx("div",{className:"text-sm opacity-90",children:"Pending Timesheets"})]})]})}),n.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx(Dr,{className:"w-12 h-12 opacity-80"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-3xl",children:Object.values(d).reduce((m,p)=>m+(p.pendingLeaves||0),0)}),n.jsx("div",{className:"text-sm opacity-90",children:"Pending Leaves"})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:n.jsx("h3",{className:"text-lg text-gray-900",children:t==="manager"?"Employee List":"Manager List"})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:(t==="manager"?r:s).map(m=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-xl",children:m.name.charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg text-gray-900",children:m.name}),n.jsx("p",{className:"text-sm text-gray-600",children:m.employeeId})]})]}),n.jsxs("div",{className:"space-y-2 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(Fh,{className:"w-4 h-4"}),m.email]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(Dr,{className:"w-4 h-4"}),"Joined: ",m.joiningDate?new Date(m.joiningDate).toLocaleDateString():"N/A"]})]}),d[m.employeeId]&&n.jsx("div",{className:"border-t border-gray-200 pt-4",children:n.jsx("div",{className:"grid grid-cols-2 gap-3",children:t==="manager"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Pending Timesheets"}),n.jsx("div",{className:"text-xl text-yellow-700",children:d[m.employeeId].pendingTimesheets})]}),n.jsxs("div",{className:"bg-pink-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Pending Leaves"}),n.jsx("div",{className:"text-xl text-pink-700",children:d[m.employeeId].pendingLeaves})]}),n.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Approved Timesheets"}),n.jsx("div",{className:"text-xl text-green-700",children:d[m.employeeId].approvedTimesheets})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Total Leaves"}),n.jsx("div",{className:"text-xl text-blue-700",children:d[m.employeeId].totalLeaves})]})]}):n.jsx(n.Fragment,{children:n.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 col-span-2",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Employees"}),n.jsx("div",{className:"text-2xl text-purple-700",children:d[m.employeeId].employeeCount})]})})})})]},m.employeeId))}),(t==="manager"?r:s).length===0&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(Fa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:t==="manager"?"No employees found":"No managers found"})]})]})]})})}function I8({employee:e,onClose:t,onSave:r,clusterHeadId:a}){const[s,i]=M.useState({role:e.role,designation:e.designation||null,department:e.department||null,clusterHeadId:e.clusterHeadId||"",storeId:e.storeId||""}),[o,l]=M.useState(!1),[d,u]=M.useState([]);M.useEffect(()=>{f()},[]);const f=async()=>{try{const p=await nu();u(p)}catch(p){console.error("Error loading stores:",p)}},m=async()=>{try{l(!0);const p={role:s.role,designation:s.designation,department:s.department,storeId:s.storeId||null};s.role==="manager"&&(p.clusterHeadId=s.clusterHeadId||null),await mg(e.employeeId,p),alert("Employee details updated successfully!"),r(),t()}catch(p){console.error("Error updating employee:",p),alert("Failed to update employee details")}finally{l(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:n.jsx(Fa,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold",children:"Edit Employee Details"}),n.jsxs("p",{className:"text-sm text-purple-100",children:[e.name," (",e.employeeId,")"]})]})]}),n.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Kr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[n.jsx(Fa,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Name:"}),n.jsx("span",{children:e.name})]}),n.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[n.jsx(Fh,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Email:"}),n.jsx("span",{children:e.email})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Rm,{className:"w-4 h-4 inline mr-2"}),"Role (System Permission Level)"]}),n.jsxs("select",{value:s.role,onChange:p=>i({...s,role:p.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"employee",children:"Employee"}),n.jsx("option",{value:"manager",children:"Manager"}),n.jsx("option",{value:"cluster_head",children:"Cluster Head"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Role determines system permissions (who can manage whom)"})]}),s.role==="manager"&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(kn,{className:"w-4 h-4 inline mr-2"}),"Cluster Head ID (Optional)"]}),n.jsx("input",{type:"text",value:s.clusterHeadId,onChange:p=>i({...s,clusterHeadId:p.target.value}),placeholder:"e.g., BM005 (leave empty if reporting to another manager)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only for top-level managers. Leave empty if this manager reports to another manager (set via Hierarchy tab instead)."})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Rm,{className:"w-4 h-4 inline mr-2"}),"Designation (Job Title)"]}),n.jsxs("select",{value:s.designation||"",onChange:p=>i({...s,designation:p.target.value||null}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"No Designation"}),n.jsx("option",{value:"operations_incharge",children:"Operations Incharge"}),n.jsx("option",{value:"store_incharge",children:"Store Incharge"}),n.jsx("option",{value:"production_incharge",children:"Production Incharge"}),n.jsx("option",{value:"store_ops",children:"Store Operations"}),n.jsx("option",{value:"production_ops",children:"Production Operations"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Designation is the job title (appears in organization chart)"})]}),(s.designation==="store_incharge"||s.designation==="store_ops")&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(al,{className:"w-4 h-4 inline mr-2"}),"Store Assignment"]}),n.jsxs("select",{value:s.storeId||"",onChange:p=>i({...s,storeId:p.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"No Store"}),d.map(p=>n.jsx("option",{value:p.id,children:p.name},p.id))]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Assign to a specific store location"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(al,{className:"w-4 h-4 inline mr-2"}),"Department"]}),n.jsxs("select",{value:s.department||"",onChange:p=>i({...s,department:p.target.value||null}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"No Department"}),n.jsx("option",{value:"store_operations",children:"Store Operations"}),n.jsx("option",{value:"production",children:"Production"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Department determines which operations they can manage"})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Understanding Role vs Designation:"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Role"})," = System permission level (employee/manager/cluster_head)"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Designation"})," = Job title (Store Incharge, Operations Manager, etc.)"]}),n.jsx("li",{children:' Example: BM008 can have role="manager" + designation="store_incharge"'}),n.jsx("li",{children:' This allows them to manage employees while having "Store Incharge" as their title'})]})]})]}),n.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex items-center justify-end gap-3 rounded-b-2xl border-t",children:[n.jsx("button",{onClick:t,className:"px-6 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:m,disabled:o,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[n.jsx(rc,{className:"w-4 h-4"}),o?"Saving...":"Save Changes"]})]})]})})}function Sge({clusterHeadId:e}){const[t,r]=M.useState([]),[a,s]=M.useState([]),[i,o]=M.useState([]),[l,d]=M.useState(!1),[u,f]=M.useState(null),[m,p]=M.useState({}),[g,v]=M.useState(null),[y,w]=M.useState(null);M.useEffect(()=>{k()},[]);const k=async()=>{try{d(!0);const B=await Ks();console.log("All employees loaded:",B),console.log("Current cluster head ID:",e);const F=B.filter(V=>(V.role==="employee"||V.role==="manager")&&V.role!=="cluster_head");r(F),console.log("Filtered employees and managers:",F);const O=B.filter(V=>V.role==="manager"&&V.clusterHeadId===e);s(O);const R=B.filter(V=>V.role==="cluster_head");o(R),console.log("Available managers (role=manager, clusterHeadId="+e+"):",O),console.log("Available cluster heads:",R);const Q={};F.forEach(V=>{V.managerId&&(Q[V.employeeId]=V.managerId)}),p(Q)}catch(B){if(B instanceof Error&&(B.message==="Not authenticated"||B.message==="Unauthorized"))return;console.error("Error loading data:",B),alert("Failed to load data")}finally{d(!1)}},N=(B,F)=>{p(O=>({...O,[B]:F}))},b=async B=>{try{f(B);const F=m[B];if(!F){alert("Please select a manager");return}await fg(B,F),alert("Manager assigned successfully!"),await k()}catch(F){console.error("Error assigning manager:",F),alert("Failed to assign manager")}finally{f(null)}},A=async(B,F)=>{if(confirm(`Are you sure you want to promote ${F} to Manager? This will:

1. Change their role from Employee to Manager
2. Set their cluster head to ${e}
3. Allow them to manage other employees

Continue?`))try{v(B),await mg(B,{role:"manager",clusterHeadId:e}),alert(`${F} has been promoted to Manager!`),await k()}catch(O){console.error("Error promoting to manager:",O),alert("Failed to promote employee to manager")}finally{v(null)}},E=t.filter(B=>!B.managerId),S=t.filter(B=>B.managerId),_=B=>{if(!B)return"Unassigned";const F=a.find(R=>R.employeeId===B);if(F)return F.name;const O=i.find(R=>R.employeeId===B);return O?`${O.name} (Cluster Head)`:"Unknown Manager"},C=B=>{const F=[];return B.role==="manager"?(F.push(...i),F.push(...a.filter(O=>O.employeeId!==B.employeeId))):F.push(...a.filter(O=>O.employeeId!==B.employeeId)),F},P=B=>{if(!B)return n.jsx("span",{className:"text-gray-400 italic",children:"No designation"});const F={operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",store_ops:"Store Operations",production_ops:"Production Operations"};return n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:F[B]||B})};return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-gray-500",children:"Loading..."})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Assign Managers to Employees"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Manage employee-manager relationships across your organization"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx(kn,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Employees"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:n.jsx(zt,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Assigned"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.length})]})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:n.jsx(xr,{className:"w-6 h-6 text-red-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Unassigned"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.length})]})]})})]}),a.length===0?n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 text-center",children:[n.jsx(xr,{className:"w-12 h-12 text-yellow-600 mx-auto mb-3"}),n.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-2",children:"No Managers Available"}),n.jsx("p",{className:"text-yellow-700",children:"You need to create managers first before assigning them to employees."})]}):n.jsxs(n.Fragment,{children:[E.length>0&&n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-t-xl px-6 py-4",children:[n.jsxs("h2",{className:"text-lg font-semibold text-red-900 flex items-center gap-2",children:[n.jsx(xr,{className:"w-5 h-5"}),"Unassigned Employees (",E.length,")"]}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:"These employees need to be assigned to a manager"})]}),n.jsx("div",{className:"bg-white rounded-b-xl shadow-sm border border-gray-200 overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assign Manager"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(B=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.name}),n.jsx("div",{className:"text-sm text-gray-500",children:B.email})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:B.employeeId}),B.role==="employee"&&n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Employee"}),B.role==="manager"&&n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Manager"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:P(B.designation)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("select",{value:m[B.employeeId]||"",onChange:F=>N(B.employeeId,F.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[n.jsx("option",{value:"",children:"Select a manager..."}),C(B).map(F=>n.jsxs("option",{value:F.employeeId,children:[F.name," (",F.employeeId,")"]},F.employeeId))]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>b(B.employeeId),disabled:!m[B.employeeId]||u===B.employeeId,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[n.jsx(rc,{className:"w-4 h-4"}),u===B.employeeId?"Saving...":"Assign"]}),B.role==="employee"&&n.jsxs("button",{onClick:()=>A(B.employeeId,B.name),disabled:g===B.employeeId,className:"inline-flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[n.jsx(IE,{className:"w-4 h-4"}),g===B.employeeId?"Promoting...":"Promote"]}),n.jsxs("button",{onClick:()=>w(B),className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[n.jsx(uj,{className:"w-4 h-4"}),"Edit"]})]})})]},B.employeeId))})]})})]}),S.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-t-xl px-6 py-4",children:[n.jsxs("h2",{className:"text-lg font-semibold text-green-900 flex items-center gap-2",children:[n.jsx(zt,{className:"w-5 h-5"}),"Assigned Employees (",S.length,")"]}),n.jsx("p",{className:"text-sm text-green-700 mt-1",children:"These employees are already assigned to managers"})]}),n.jsx("div",{className:"bg-white rounded-b-xl shadow-sm border border-gray-200 overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Manager"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reassign Manager"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(B=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.name}),n.jsx("div",{className:"text-sm text-gray-500",children:B.email})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:B.employeeId}),B.role==="employee"&&n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Employee"}),B.role==="manager"&&n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Manager"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:P(B.designation)}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx("div",{className:"text-sm text-gray-900",children:_(B.managerId)}),B.managerId&&n.jsx("div",{className:"text-xs text-gray-500",children:B.managerId})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("select",{value:m[B.employeeId]||B.managerId||"",onChange:F=>N(B.employeeId,F.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[n.jsx("option",{value:"",children:"Select a manager..."}),C(B).map(F=>n.jsxs("option",{value:F.employeeId,children:[F.name," (",F.employeeId,")"]},F.employeeId))]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>b(B.employeeId),disabled:!m[B.employeeId]||m[B.employeeId]===B.managerId||u===B.employeeId,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[n.jsx(rc,{className:"w-4 h-4"}),u===B.employeeId?"Saving...":"Update"]}),B.role==="employee"&&n.jsxs("button",{onClick:()=>A(B.employeeId,B.name),disabled:g===B.employeeId,className:"inline-flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[n.jsx(IE,{className:"w-4 h-4"}),g===B.employeeId?"Promoting...":"Promote"]}),n.jsxs("button",{onClick:()=>w(B),className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[n.jsx(uj,{className:"w-4 h-4"}),"Edit"]})]})})]},B.employeeId))})]})})]}),t.length===0&&n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-12 text-center",children:[n.jsx(kn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Employees Found"}),n.jsx("p",{className:"text-gray-600",children:"There are no employees in the system yet. Create employees first through the Employee Management tab."})]})]}),y&&n.jsx(I8,{employee:y,onClose:()=>w(null),onSave:k,clusterHeadId:e})]})}function gI({currentUser:e}){const[t,r]=M.useState([]),[a,s]=M.useState(!0);M.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const f=await Ks(),m=f.find(k=>k.employeeId===e.employeeId);if(!m){s(!1);return}console.log("[Hierarchy Debug] Current user record:",m);const p=[m];let g=m,v=0;const y=10;for(;g&&v<y;){const k=g.clusterHeadId||g.managerId||g.inchargeId;if(console.log("[Hierarchy Debug] Looking for superior ID:",k,"for",g.name),!k)break;const N=f.find(b=>b.employeeId===k);if(console.log("[Hierarchy Debug] Found superior:",N),N){if(p.some(b=>b.employeeId===N.employeeId)){console.log("[Hierarchy Debug] Circular reference detected, breaking");break}if(p.push(N),g=N,N.role==="cluster_head"){console.log("[Hierarchy Debug] Reached cluster head");break}}else break;v++}const w=p.reverse();console.log("[Hierarchy Debug] Final reporting chain (top to bottom):",w),r(w)}catch(f){console.error("Error loading hierarchy:",f)}finally{s(!1)}},o=f=>f.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2),l=(f,m)=>!f&&!m?"N/A":f?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",operations_manager:"Operations Manager",store_ops:"Store Operations",production_ops:"Production Operations"}[f]||f:{cluster_head:"Cluster Head",manager:"Manager",employee:"Employee"}[m||""]||m||"N/A",d=(f,m)=>m?"bg-gradient-to-br from-purple-500 to-pink-500 ring-4 ring-purple-200":f.role==="cluster_head"?"bg-gradient-to-br from-blue-500 to-indigo-500":f.role==="manager"||f.designation?.includes("incharge")||f.designation==="operations_manager"?"bg-gradient-to-br from-green-400 to-emerald-500":"bg-gradient-to-br from-gray-400 to-gray-500",u=(f,m)=>m?"bg-gradient-to-r from-purple-100 to-pink-100 border-purple-300":f.role==="cluster_head"?"bg-gradient-to-r from-blue-100 to-indigo-100 border-blue-300":f.role==="manager"||f.designation?.includes("incharge")||f.designation==="operations_manager"?"bg-gradient-to-r from-green-100 to-emerald-100 border-green-300":"bg-gray-100 border-gray-300";return a?n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsx("div",{className:"text-gray-500",children:"Loading hierarchy..."})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Employee Hierarchy"}),n.jsx("p",{className:"text-gray-600",children:"View your reporting chain from top to bottom"})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8",children:t.length>0?n.jsx("div",{className:"flex flex-col items-center",children:t.map((f,m)=>{const p=f.employeeId===e.employeeId,g=m===t.length-1;return n.jsxs("div",{className:"w-full flex flex-col items-center",children:[n.jsx("div",{className:"text-center",children:n.jsxs("div",{className:"inline-block",children:[n.jsx("div",{className:`w-28 h-28 rounded-2xl flex items-center justify-center mb-4 ${d(f,p)}`,children:n.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-xl text-gray-700",children:o(f.name)})})}),n.jsxs("div",{className:`px-6 py-3 rounded-lg border-2 ${u(f,p)}`,children:[n.jsx("p",{className:"font-semibold text-gray-900",children:f.name}),n.jsx("p",{className:"text-sm text-gray-700",children:l(f.designation,f.role)}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:f.employeeId}),p&&n.jsx("p",{className:"text-xs text-purple-600 mt-1 font-semibold",children:"(You)"})]})]})}),!g&&n.jsxs("div",{className:"flex flex-col items-center my-6",children:[n.jsx("div",{className:"w-px h-8 bg-gray-300"}),n.jsx(Uf,{className:"w-6 h-6 text-gray-400"}),n.jsx("div",{className:"w-px h-8 bg-gray-300"})]})]},f.employeeId)})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(al,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg text-gray-600 mb-2",children:"No Hierarchy Found"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Your organizational hierarchy hasn't been set up yet."})]})}),n.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-sm p-6",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Legend"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 ring-4 ring-purple-200 rounded-lg"}),n.jsx("span",{className:"text-sm text-gray-700",children:"You (Current User)"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-lg"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Cluster Head"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-emerald-500 rounded-lg"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Manager / Incharge"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-400 to-gray-500 rounded-lg"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Employee"})]})]})]})]})})}function D8({user:e,selectedStoreId:t,isIncharge:r=!1,inchargeDesignation:a=null}){const[s,i]=M.useState(()=>e.role==="employee"||e.role==="manager"?"timesheet":e.role==="cluster_head"?"approve-timesheet":"timesheet"),[o,l]=M.useState(0),[d,u]=M.useState(!1),f=e.role==="employee",m=e.role==="manager",p=e.role==="cluster_head";return console.log("AttendancePortal: user =",e),n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50",children:[(m||p)&&!e.employeeId&&n.jsx("div",{className:"bg-red-50 border-b border-red-200 p-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-sm",children:"!"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-red-900 font-medium",children:"Employee ID Not Found"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Your account doesn't have an employee ID associated with it. This means:"}),n.jsxs("ul",{className:"text-sm text-red-700 mt-2 list-disc list-inside space-y-1",children:[n.jsx("li",{children:"You won't be able to see employees assigned to you"}),n.jsx("li",{children:"Approval workflows won't work properly"}),n.jsx("li",{children:"Employees you create won't be linked to your account"})]}),n.jsxs("p",{className:"text-sm text-red-800 mt-2 font-medium",children:[n.jsx("strong",{children:"Solution:"})," Log out and log back in. If the problem persists, your account needs to be recreated through the Employee Management system."]}),n.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Debug Info: email=",e.email,", role=",e.role,", employeeId=",e.employeeId||"NULL"]})]})]})})}),n.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-40",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center overflow-x-auto py-4 gap-2 scrollbar-hide",children:[f&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>i("timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(fn,{className:"w-4 h-4"}),"Update Timesheet"]}),n.jsxs("button",{onClick:()=>i("leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(Dr,{className:"w-4 h-4"}),"Apply for Leave"]}),n.jsxs("button",{onClick:()=>i("hierarchy"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="hierarchy"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(MI,{className:"w-4 h-4"}),"Hierarchy"]})]}),m&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>i("timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(fn,{className:"w-4 h-4"}),"My Timesheet"]}),n.jsxs("button",{onClick:()=>i("leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(Dr,{className:"w-4 h-4"}),"My Leave"]}),n.jsxs("button",{onClick:()=>i("approve-timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(js,{className:"w-4 h-4"}),"Approve Timesheets"]}),n.jsxs("button",{onClick:()=>i("approve-leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(js,{className:"w-4 h-4"}),"Approve Leaves"]}),n.jsxs("button",{onClick:()=>i("team"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="team"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(kn,{className:"w-4 h-4"}),"My Team"]})]}),p&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>i("approve-timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(js,{className:"w-4 h-4"}),"Approve Manager Timesheets"]}),n.jsxs("button",{onClick:()=>i("approve-leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(js,{className:"w-4 h-4"}),"Approve Manager Leaves"]}),n.jsxs("button",{onClick:()=>i("managers"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="managers"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(kn,{className:"w-4 h-4"}),"Manager Overview"]}),n.jsxs("button",{onClick:()=>i("assign-managers"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="assign-managers"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(PB,{className:"w-4 h-4"}),"Assign Managers"]})]})]})})}),n.jsxs("div",{children:[s==="timesheet"&&n.jsx(vge,{user:{employeeId:e.employeeId||"",name:e.name,email:e.email}}),s==="leave"&&n.jsx(bge,{user:{employeeId:e.employeeId||"",name:e.name,email:e.email,joiningDate:e.joiningDate}}),s==="approve-timesheet"&&(m||p||r)&&n.jsx(jge,{managerId:e.employeeId||"",role:e.role,selectedStoreId:t,isIncharge:r,inchargeDesignation:a}),s==="approve-leave"&&(m||p||r)&&n.jsx(Nge,{managerId:e.employeeId||"",managerName:e.name,role:e.role,selectedStoreId:t,isIncharge:r,inchargeDesignation:a}),s==="team"&&m&&n.jsx(kge,{managerId:e.employeeId||"",role:"manager"},o),s==="hierarchy"&&f&&n.jsx(gI,{currentUser:{employeeId:e.employeeId||"",role:e.role,email:e.email,name:e.name}},o),s==="managers"&&p&&n.jsx(gI,{currentUser:{employeeId:e.employeeId||"",role:e.role,email:e.email,name:e.name}},o),s==="assign-managers"&&p&&n.jsx(Sge,{clusterHeadId:e.employeeId||""},o)]})]})}function M8({manager:e,level:t=0}){const r=e.managers&&e.managers.length>0||e.employees&&e.employees.length>0,a=s=>s?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",store_ops:"Store Operations",production_ops:"Production Operations"}[s]||s:"Manager";return n.jsxs("div",{className:"mb-4 last:mb-0 border border-gray-200 rounded-lg bg-white",children:[n.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(sl,{className:"w-5 h-5 text-gray-400"}),n.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white",children:n.jsx(hi,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"text-gray-900",children:e.name}),n.jsx("span",{className:"px-2 py-1 bg-green-600 text-white text-xs rounded",children:a(e.designation)})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[e.employeeId,"  ",e.email]})]})]})}),r&&n.jsxs("div",{className:"p-4 space-y-4 bg-gray-50",children:[e.managers&&e.managers.length>0&&n.jsx("div",{className:"space-y-3",children:e.managers.map(s=>n.jsx(M8,{manager:s,level:t+1},s.employeeId))}),e.employees&&e.employees.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Direct Reports:"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.employees.map(s=>n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-pink-50 rounded-lg border border-pink-100",children:[n.jsx(sl,{className:"w-4 h-4 text-gray-400"}),n.jsx("div",{className:"w-8 h-8 bg-pink-600 rounded-full flex items-center justify-center text-white text-sm",children:n.jsx(Fa,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-sm text-gray-900 truncate",children:s.name}),n.jsx("div",{className:"text-xs text-gray-600 truncate",children:s.employeeId})]})]},s.employeeId))})]})]})]})}function _ge({userRole:e,selectedStoreId:t,accessToken:r}){const[a,s]=M.useState([]),[i,o]=M.useState([]),[l,d]=M.useState([]),[u,f]=M.useState({totalClusterHeads:0,totalManagers:0,totalEmployees:0}),[m,p]=M.useState(!1),[g,v]=M.useState(!1),[y,w]=M.useState(!1),[k,N]=M.useState(null),[b,A]=M.useState(null),[E,S]=M.useState([]),[_,C]=M.useState([]);M.useEffect(()=>{P()},[t]);const P=async()=>{if(!r){console.error("No access token available");return}try{p(!0);const O=await zD(t);if(console.log("[Hierarchy Frontend] Received data:",{hierarchyCount:O.hierarchy?.length||0,unassignedManagersCount:O.unassignedManagers?.length||0,unassignedEmployeesCount:O.unassignedEmployees?.length||0,stats:O.stats,selectedStoreId:t}),s(O.hierarchy||[]),o(O.unassignedManagers||[]),d(O.unassignedEmployees||[]),f(O.stats||{totalClusterHeads:0,totalManagers:0,totalEmployees:0}),e==="cluster_head")try{const V=await N5(r);S(V)}catch{console.log("User not authorized to view all cluster heads")}const Q=(await Ks()).filter(V=>V.role==="manager");C(Q)}catch(O){console.error("Error loading hierarchy:",O),O instanceof Error&&!O.message.includes("JWT")&&!O.message.includes("Unauthorized")&&alert("Failed to load organizational hierarchy")}finally{p(!1)}},B=async(O,R)=>{try{await(void 0)(O,R),alert("Cluster head assigned successfully!"),v(!1),N(null),await P()}catch(Q){console.error("Error assigning cluster head:",Q),alert("Failed to assign cluster head")}},F=async(O,R)=>{try{await fg(O,R),alert("Manager assigned successfully!"),w(!1),A(null),await P()}catch(Q){console.error("Error assigning manager:",Q),alert("Failed to assign manager")}};return m?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6 flex items-center justify-center",children:n.jsx("div",{className:"text-gray-500",children:"Loading hierarchy..."})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Organizational Hierarchy"}),n.jsx("p",{className:"text-gray-600",children:"Manage reporting relationships across the organization"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(al,{className:"w-12 h-12 opacity-80"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-3xl",children:u.totalClusterHeads}),n.jsx("div",{className:"text-sm opacity-90",children:"Cluster Heads"})]})]})}),n.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(hi,{className:"w-12 h-12 opacity-80"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-3xl",children:u.totalManagers}),n.jsx("div",{className:"text-sm opacity-90",children:"Managers"})]})]})}),n.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(kn,{className:"w-12 h-12 opacity-80"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-3xl",children:u.totalEmployees}),n.jsx("div",{className:"text-sm opacity-90",children:"Employees"})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl text-gray-900",children:"Organizational Structure"}),n.jsx(MI,{className:"w-6 h-6 text-purple-600"})]}),a.length===0&&i.length===0&&l.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(al,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No employees found. Create employees to get started."})]}):n.jsxs(n.Fragment,{children:[a.length>0&&n.jsx("div",{className:"space-y-6 mb-6",children:a.map(O=>n.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white",children:n.jsx(al,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-lg text-gray-900",children:O.name}),n.jsx("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs rounded",children:"Cluster Head"})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[O.employeeId,"  ",O.email]})]})]})}),O.managers&&O.managers.length>0&&n.jsx("div",{className:"p-4 bg-gray-50",children:O.managers.map(R=>n.jsx(M8,{manager:R},R.employeeId))})]},O.employeeId))}),i.length>0&&i.some(O=>O.employees&&O.employees.length>0||O.incharges&&O.incharges.length>0)&&n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsx("h3",{className:"text-lg text-gray-900 font-semibold",children:"Managers and Their Teams"}),i.filter(O=>O.employees&&O.employees.length>0||O.incharges&&O.incharges.length>0).map(O=>n.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center text-white",children:n.jsx(hi,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"text-gray-900",children:O.name}),n.jsx("span",{className:"px-2 py-1 bg-purple-600 text-white text-xs rounded",children:"Manager"})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[O.employeeId,"  ",O.email]})]})]})}),(O.incharges||O.employees)&&n.jsxs("div",{className:"p-4 space-y-4",children:[O.incharges&&O.incharges.length>0&&n.jsx("div",{className:"space-y-3",children:O.incharges.map(R=>n.jsxs("div",{className:"border border-indigo-200 rounded-lg overflow-hidden bg-indigo-50/50",children:[n.jsx("div",{className:"bg-gradient-to-r from-indigo-100 to-indigo-200 p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(sl,{className:"w-4 h-4 text-indigo-400"}),n.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center text-white",children:n.jsx(hi,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-gray-900",children:R.name}),n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs rounded",children:R.designation==="store_incharge"?"Store Incharge":"Production Incharge"})]}),n.jsx("div",{className:"text-xs text-gray-600",children:R.employeeId})]})]})}),R.employees&&R.employees.length>0&&n.jsx("div",{className:"p-3",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:R.employees.map(Q=>n.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded border border-indigo-100",children:[n.jsx(sl,{className:"w-3 h-3 text-gray-300"}),n.jsx("div",{className:"w-6 h-6 bg-pink-500 rounded-full flex items-center justify-center text-white text-xs",children:n.jsx(Fa,{className:"w-3 h-3"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-xs text-gray-900 truncate",children:Q.name}),n.jsx("div",{className:"text-xs text-gray-500 truncate",children:Q.employeeId})]})]},Q.employeeId))})})]},R.employeeId))}),O.employees&&O.employees.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Direct Reports:"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:O.employees.map(R=>n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-pink-50 rounded-lg",children:[n.jsx(sl,{className:"w-4 h-4 text-gray-400"}),n.jsx("div",{className:"w-8 h-8 bg-pink-600 rounded-full flex items-center justify-center text-white text-sm",children:n.jsx(Fa,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-sm text-gray-900 truncate",children:R.name}),n.jsx("div",{className:"text-xs text-gray-600 truncate",children:R.employeeId})]})]},R.employeeId))})]})]})]},O.employeeId))]})]})]}),(i.length>0||l.length>0)&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg text-gray-900",children:"Unassigned Managers"}),n.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 text-sm rounded-full",children:i.length})]}),n.jsx("div",{className:"space-y-3",children:i.map(O=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx(hi,{className:"w-5 h-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:O.name}),n.jsx("div",{className:"text-sm text-gray-600",children:O.employeeId})]})]})}),e==="cluster_head"&&n.jsx("button",{onClick:()=>{N(O),v(!0)},className:"w-full px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:"Assign Cluster Head"})]},O.employeeId))})]}),l.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg text-gray-900",children:"Unassigned Employees"}),n.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 text-sm rounded-full",children:l.length})]}),n.jsx("div",{className:"space-y-3",children:l.map(O=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center",children:n.jsx(Fa,{className:"w-5 h-5 text-pink-600"})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:O.name}),n.jsx("div",{className:"text-sm text-gray-600",children:O.employeeId})]})]})}),(e==="cluster_head"||e==="manager")&&n.jsx("button",{onClick:()=>{A(O),w(!0)},className:"w-full px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:"Assign Manager"})]},O.employeeId))})]})]}),g&&k&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[n.jsx("h3",{className:"text-xl text-gray-900 mb-4",children:"Assign Cluster Head to Manager"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Manager: ",n.jsx("strong",{children:k.name})," (",k.employeeId,")"]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Cluster Head"}),n.jsxs("select",{id:"clusterHeadSelect",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",defaultValue:"",children:[n.jsx("option",{value:"",disabled:!0,children:"Choose a cluster head..."}),E.map(O=>n.jsxs("option",{value:O.employeeId,children:[O.name," (",O.employeeId,")"]},O.employeeId))]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{const O=document.getElementById("clusterHeadSelect");O.value?B(k.employeeId,O.value):alert("Please select a cluster head")},className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:shadow-lg transition-all",children:"Assign"}),n.jsx("button",{onClick:()=>{v(!1),N(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})}),y&&b&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[n.jsx("h3",{className:"text-xl text-gray-900 mb-4",children:"Assign Manager to Employee"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Employee: ",n.jsx("strong",{children:b.name})," (",b.employeeId,")"]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Manager"}),n.jsxs("select",{id:"managerSelect",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",defaultValue:"",children:[n.jsx("option",{value:"",disabled:!0,children:"Choose a manager..."}),_.map(O=>n.jsxs("option",{value:O.employeeId,children:[O.name," (",O.employeeId,")"]},O.employeeId))]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{const O=document.getElementById("managerSelect");O.value?F(b.employeeId,O.value):alert("Please select a manager")},className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:shadow-lg transition-all",children:"Assign"}),n.jsx("button",{onClick:()=>{w(!1),A(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})})]})})}function Ege({user:e,selectedStoreId:t}){const[r,a]=M.useState("employees"),[s,i]=M.useState([]),[o,l]=M.useState([]),[d,u]=M.useState(!1),[f,m]=M.useState([]),[p,g]=M.useState(!1),[v,y]=M.useState(!1),[w,k]=M.useState(!1),[N,b]=M.useState(null),[A,E]=M.useState(""),[S,_]=M.useState(null),[C,P]=M.useState(!1),[B,F]=M.useState(!1),[O,R]=M.useState(null),[Q,V]=M.useState(""),[J,ae]=M.useState(""),[L,H]=M.useState(!1),[ce,z]=M.useState(null),[I,Z]=M.useState(""),[te,se]=M.useState("manager"),[be,Ee]=M.useState([]),[_e,me]=M.useState([]),[ye,qe]=M.useState(!1),[G,He]=M.useState(null),[Ke,ut]=M.useState("employee"),[ze,Pe]=M.useState(!1),[ke,Xe]=M.useState(null),[We,ct]=M.useState(""),[Wt,Ut]=M.useState(!1),[Vt,Ar]=M.useState(null),[ln,Xr]=M.useState(!1),[Ft,ir]=M.useState(null),[nt,Bt]=M.useState("none"),[$e,De]=M.useState(!1),[re,le]=M.useState(null),[Oe,Le]=M.useState(""),[rt,Ot]=M.useState({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""});console.log("EmployeeManagement: Current user:",e),console.log("EmployeeManagement: User employeeId:",e.employeeId),console.log("EmployeeManagement: User role:",e.role);const $t=e.role==="manager",bt=e.role==="cluster_head";M.useEffect(()=>{rt.role==="cluster_head"&&Ot(K=>({...K,employmentType:"fulltime"}))},[rt.role]),M.useEffect(()=>{ht(),bt&&hr()},[t]);const hr=async()=>{try{const K=await nu();m(K)}catch(K){if(K instanceof Error&&(K.message==="Not authenticated"||K.message==="Unauthorized"))return;console.error("Error loading stores:",K)}},ht=async()=>{try{g(!0);let K;$t&&e.employeeId?(console.log(" Loading employees for manager:",e.employeeId),K=await nc(e.employeeId),console.log(" Loaded employees:",K)):bt?(console.log(" Loading all employees for cluster head"),K=await Ks(),t&&(K=K.filter(ue=>ue.storeId===t||ue.storeId===null||ue.storeId===void 0))):K=await Ks(),i(K);try{const ue=await AD();l(ue)}catch(ue){console.error("Error loading archived employees:",ue)}}catch(K){console.error("Error loading employees:",K),alert("Failed to load employees")}finally{g(!1)}},Rr=async()=>{try{const ue=(await Ks()).map(Me=>{const we=Me.employeeId.match(/BM(\d+)/);return we?parseInt(we[1]):0}).filter(Me=>Me>0);return`BM${(ue.length>0?Math.max(...ue)+1:1).toString().padStart(3,"0")}`}catch(K){return console.error("Error generating employee ID:",K),`BM${Date.now().toString().slice(-3)}`}},cr=(K,ue)=>{const fe=K.target.files?.[0];if(!fe)return;const Me=new FileReader;Me.onloadend=()=>{const we=Me.result;ue==="front"?V(we):ae(we)},Me.readAsDataURL(fe)},fr=async()=>{if(!rt.name||!rt.email||!rt.password){alert("Please fill all required fields");return}if($t&&rt.role==="manager"){alert("Only Cluster Heads can create managers");return}try{g(!0);const K=await Rr(),ue={employeeId:K,name:rt.name,email:rt.email,password:rt.password,role:rt.role,employmentType:rt.employmentType,joiningDate:rt.joiningDate,dob:rt.dob,phone:rt.phone,status:"active",createdBy:e.email,createdAt:new Date().toISOString()};rt.role==="employee"?(ue.managerId=e.employeeId,$t&&e.storeId&&(ue.storeId=e.storeId)):rt.role==="manager"&&(ue.clusterHeadId=e.employeeId,rt.storeId&&(ue.storeId=rt.storeId)),Q&&(ue.aadharFront=Q),J&&(ue.aadharBack=J),await TD(ue),alert(` Employee created successfully!
      
Employee ID: ${K}
Name: ${rt.name}
Email: ${rt.email}
Password: ${rt.password}

 IMPORTANT: Save these credentials!
The employee can now login with their email and password.`),Ot({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""}),V(""),ae(""),y(!1),await ht()}catch(K){console.error("Error creating employee:",K),alert("Failed to create employee. Email might already be in use.")}finally{g(!1)}},Jr=async K=>{if(confirm("Are you sure you want to delete this employee?"))try{g(!0),await OD(K),alert("Employee deleted successfully"),await ht()}catch(ue){console.error("Error deleting employee:",ue),alert("Failed to delete employee")}finally{g(!1)}},Kn=K=>{b(K),k(!0)},_n=async()=>{if(!re||!Oe){alert("Please enter a new password");return}try{g(!0);const K=await ID(re.employeeId,Oe);alert(` Password reset successfully!

Employee: ${K.credentials.employeeId} - ${re.name}
Email: ${K.credentials.email}
New Password: ${K.credentials.password}

 IMPORTANT: Save these credentials and share them with the employee!`),De(!1),le(null),Le("")}catch(K){console.error("Error resetting password:",K),alert("Failed to reset password: "+(K instanceof Error?K.message:"Unknown error"))}finally{g(!1)}},dr=async()=>{if(N)try{g(!0);const K={name:N.name,email:N.email,role:N.role,employmentType:N.employmentType,joiningDate:N.joiningDate,dob:N.dob,phone:N.phone,status:N.status};console.log("Updating employee with data:",K),await mg(N.employeeId,K),alert("Employee updated successfully!"),k(!1),b(null),await ht()}catch(K){console.error("Error updating employee - full error:",K),console.error("Error updating employee - error message:",K instanceof Error?K.message:String(K)),alert(`Failed to update employee: ${K instanceof Error?K.message:String(K)}`)}finally{g(!1)}},ve=()=>{const K=s.length,ue=s.filter(lt=>lt.role==="manager").length,fe=s.filter(lt=>lt.employmentType==="fulltime").length,Me=s.filter(lt=>lt.employmentType==="contract").length,we=s.filter(lt=>lt.status==="active").length;return{total:K,managers:ue,fulltime:fe,contract:Me,active:we}},tt=async()=>{if(confirm("This will assign storeIds to all employees based on their manager's store. Continue?"))try{g(!0);const K=await DD();R(K),F(!0),await ht()}catch(K){console.error("Error running migration:",K),alert(`Migration failed: ${K instanceof Error?K.message:String(K)}`)}finally{g(!1)}},at=async()=>{if(confirm("This will sync all employee designations (Store Incharge/Production Incharge) to their auth accounts. This ensures incharges can access their full features when they log in. Continue?"))try{g(!0);const K=await LD();alert(` Successfully synced ${K.synced} employee designations!

${K.skipped>0?`Skipped ${K.skipped} employees (no designation or no auth account)`:""}

 Store incharges should now log out and log back in to see their full features.`),await ht()}catch(K){console.error("Error syncing designations:",K),alert(`Sync failed: ${K instanceof Error?K.message:String(K)}`)}finally{g(!1)}},pt=async K=>{try{const ue=await Ks(),fe=ue.filter(we=>we.role==="manager"),Me=ue.filter(we=>we.designation==="store_incharge"||we.designation==="production_incharge");Ee(fe),me(Me),z(K),K.inchargeId?(se("incharge"),Z(K.inchargeId)):(se("manager"),Z(K.managerId||"")),H(!0)}catch(ue){console.error("Error loading managers:",ue),alert("Failed to load managers")}},ft=async()=>{if(!ce||!I){alert("Please select a supervisor");return}try{g(!0),te==="incharge"?(await $D(ce.employeeId,I),alert("Incharge assigned successfully! Employee has been assigned to their department.")):(await fg(ce.employeeId,I),alert("Operations Manager assigned successfully! Employee's store has been updated to match their new manager.")),H(!1),z(null),Z(""),await ht()}catch(K){console.error("Error assigning supervisor:",K),alert(`Failed to assign supervisor: ${K instanceof Error?K.message:String(K)}`)}finally{g(!1)}},U=K=>{if(!K)return"No manager assigned";const ue=s.find(fe=>fe.employeeId===K);return ue?`${ue.name} (${ue.employeeId})`:`Manager ${K}`},oe=K=>{He(K),ut(K.role),qe(!0)},ne=async()=>{if(G)try{g(!0),await MD(G.employeeId,Ke),alert(`Role updated successfully from "${G.role}" to "${Ke}"!`),qe(!1),He(null),await ht()}catch(K){console.error("Error updating role:",K),alert(`Failed to update role: ${K instanceof Error?K.message:String(K)}`)}finally{g(!1)}},Y=K=>{Xe(K),ct(K.storeId||""),Pe(!0)},q=async()=>{if(!(!ke||!We))try{g(!0),await RD(ke.employeeId,We);const K=f.find(ue=>ue.id===We)?.name||We;alert(`Store updated successfully! ${ke.name} is now assigned to ${K}`),Pe(!1),Xe(null),await ht()}catch(K){console.error("Error updating store:",K),alert(`Failed to update store: ${K instanceof Error?K.message:String(K)}`)}finally{g(!1)}},W=K=>{ir(K),K.designation==="store_incharge"?Bt("store_incharge"):K.designation==="production_incharge"?Bt("production_incharge"):Bt("none"),Xr(!0)},ie=async()=>{if(Ft)try{g(!0);const K=nt==="none"?null:nt,ue=nt==="store_incharge"?"store_operations":nt==="production_incharge"?"production":null;await FD(Ft.employeeId,K,ue);const fe=nt==="store_incharge"?"Store Incharge":nt==="production_incharge"?"Production Incharge":"Regular Employee";alert(`Designation updated! ${Ft.name} is now ${fe}`),Xr(!1),ir(null),await ht()}catch(K){console.error("Error updating designation:",K),alert(`Failed to update designation: ${K instanceof Error?K.message:String(K)}`)}finally{g(!1)}},he=ve();return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Employee Management"}),n.jsx("p",{className:"text-gray-600",children:"Unified employee, manager, and contract worker management"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),n.jsx("p",{className:"text-2xl text-gray-900",children:he.total})]}),n.jsx(kn,{className:"w-8 h-8 text-purple-500"})]})}),bt&&n.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Managers"}),n.jsx("p",{className:"text-2xl text-gray-900",children:he.managers})]}),n.jsx(kn,{className:"w-8 h-8 text-blue-500"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Full-Time"}),n.jsx("p",{className:"text-2xl text-gray-900",children:he.fulltime})]}),n.jsx(vi,{className:"w-8 h-8 text-green-500"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Contract"}),n.jsx("p",{className:"text-2xl text-gray-900",children:he.contract})]}),n.jsx(vi,{className:"w-8 h-8 text-orange-500"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),n.jsx("p",{className:"text-2xl text-gray-900",children:he.active})]}),n.jsx(kn,{className:"w-8 h-8 text-pink-500"})]})})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:n.jsxs("div",{className:"flex border-b border-gray-200",children:[n.jsx("button",{onClick:()=>a("employees"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="employees"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(kn,{className:"w-5 h-5"}),n.jsx("span",{children:"Employee List"})]})}),n.jsx("button",{onClick:()=>a("hierarchy"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="hierarchy"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(kn,{className:"w-5 h-5"}),n.jsx("span",{children:"Hierarchy"})]})}),n.jsx("button",{onClick:()=>a("payroll"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="payroll"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(qn,{className:"w-5 h-5"}),n.jsx("span",{children:"Payroll"})]})}),n.jsx("button",{onClick:()=>a("attendance"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="attendance"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(fn,{className:"w-5 h-5"}),n.jsx("span",{children:"Attendance"})]})})]})}),r==="hierarchy"?n.jsx(_ge,{userRole:e.role,selectedStoreId:t,accessToken:e.accessToken}):r==="payroll"?n.jsx(Tk,{userRole:e.role,selectedDate:new Date().toISOString().split("T")[0],userEmployeeId:e.employeeId,userName:e.name,selectedStoreId:t}):r==="attendance"?n.jsx(D8,{user:{employeeId:e.employeeId,name:e.name,email:e.email,role:e.role},selectedStoreId:t}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(RI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:"Search by name, ID, or email...",value:A,onChange:K=>E(K.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg transition-all",children:[n.jsx(Di,{className:"w-5 h-5"}),"Add ",bt?"Employee/Manager":"Employee"]}),bt&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:[n.jsx(I9,{className:"w-5 h-5"}),"Create Login Accounts"]}),n.jsxs("button",{onClick:tt,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-lg hover:shadow-lg transition-all disabled:opacity-50",title:"Assign store IDs to existing employees based on their manager's store",children:[n.jsx(gi,{className:"w-5 h-5"}),"Migrate Stores"]}),n.jsxs("button",{onClick:at,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:shadow-lg transition-all disabled:opacity-50",title:"Sync employee designations to auth accounts so incharges can access their full features",children:[n.jsx(hi,{className:"w-5 h-5"}),"Sync Designations"]})]})]})]})}),v&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:n.jsxs("h2",{className:"text-2xl",children:["Create New ",bt?"Employee/Manager":"Employee"]})}),n.jsxs("div",{className:"p-6 space-y-4",children:[bt&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role *"}),n.jsxs("select",{value:rt.role,onChange:K=>Ot({...rt,role:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"employee",children:"Employee"}),n.jsx("option",{value:"manager",children:"Manager"}),n.jsx("option",{value:"cluster_head",children:"Cluster Head"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employment Type *"}),n.jsxs("select",{value:rt.employmentType,onChange:K=>Ot({...rt,employmentType:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:rt.role==="cluster_head",children:[n.jsx("option",{value:"fulltime",children:"Full-Time"}),rt.role!=="cluster_head"&&n.jsx("option",{value:"contract",children:"Contract"})]}),rt.role==="cluster_head"&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cluster heads are always full-time employees"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Full Name *"}),n.jsx("input",{type:"text",value:rt.name,onChange:K=>Ot({...rt,name:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter full name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Email *"}),n.jsx("input",{type:"email",value:rt.email,onChange:K=>Ot({...rt,email:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"employee@example.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Password *"}),n.jsx("input",{type:"password",value:rt.password,onChange:K=>Ot({...rt,password:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Create a password"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date of Birth"}),n.jsx("input",{type:"date",value:rt.dob,onChange:K=>Ot({...rt,dob:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone Number"}),n.jsx("input",{type:"tel",value:rt.phone,onChange:K=>Ot({...rt,phone:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"+91 9876543210"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Joining Date *"}),n.jsx("input",{type:"date",value:rt.joiningDate,onChange:K=>Ot({...rt,joiningDate:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),bt&&rt.role==="manager"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Assign to Store *"}),n.jsxs("select",{value:rt.storeId,onChange:K=>Ot({...rt,storeId:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select a store..."}),f.map(K=>n.jsxs("option",{value:K.id,children:[K.name," ",K.location&&`- ${K.location}`]},K.id))]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Manager will be assigned to this store"})]}),$t&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:n.jsx("p",{className:"text-sm text-blue-800",children:" Employee will be assigned to your store automatically"})}),rt.role==="employee"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Front)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[n.jsx(zl,{className:"w-5 h-5"}),Q?"Change Front":"Upload Front",n.jsx("input",{type:"file",accept:"image/*",onChange:K=>cr(K,"front"),className:"hidden"})]}),Q&&n.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Back)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[n.jsx(zl,{className:"w-5 h-5"}),J?"Change Back":"Upload Back",n.jsx("input",{type:"file",accept:"image/*",onChange:K=>cr(K,"back"),className:"hidden"})]}),J&&n.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:fr,disabled:p,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Creating...":"Create Employee"}),n.jsx("button",{onClick:()=>{y(!1),Ot({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""}),V(""),ae("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),w&&N&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:n.jsx("h2",{className:"text-2xl",children:"Edit Employee"})}),n.jsxs("div",{className:"p-6 space-y-4",children:[bt&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role *"}),n.jsxs("select",{value:N.role,onChange:K=>b({...N,role:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"employee",children:"Employee"}),n.jsx("option",{value:"manager",children:"Manager"}),n.jsx("option",{value:"cluster_head",children:"Cluster Head"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employment Type *"}),n.jsxs("select",{value:N.employmentType,onChange:K=>b({...N,employmentType:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"fulltime",children:"Full-Time"}),n.jsx("option",{value:"contract",children:"Contract"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Full Name *"}),n.jsx("input",{type:"text",value:N.name,onChange:K=>b({...N,name:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter full name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Email *"}),n.jsx("input",{type:"email",value:N.email,onChange:K=>b({...N,email:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"employee@example.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date of Birth"}),n.jsx("input",{type:"date",value:N.dob,onChange:K=>b({...N,dob:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone Number"}),n.jsx("input",{type:"tel",value:N.phone,onChange:K=>b({...N,phone:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"+91 9876543210"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Joining Date *"}),n.jsx("input",{type:"date",value:N.joiningDate,onChange:K=>b({...N,joiningDate:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),N.role==="employee"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Front)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[n.jsx(zl,{className:"w-5 h-5"}),Q?"Change Front":"Upload Front",n.jsx("input",{type:"file",accept:"image/*",onChange:K=>cr(K,"front"),className:"hidden"})]}),Q&&n.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Back)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[n.jsx(zl,{className:"w-5 h-5"}),J?"Change Back":"Upload Back",n.jsx("input",{type:"file",accept:"image/*",onChange:K=>cr(K,"back"),className:"hidden"})]}),J&&n.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:dr,disabled:p,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Updating...":"Update Employee"}),n.jsx("button",{onClick:()=>{k(!1),b(null),V(""),ae("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gradient-to-r from-purple-100 to-pink-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Employee ID"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Email"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Role"}),bt&&n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Store"}),bt&&n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Designation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Joining Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p?n.jsx("tr",{children:n.jsx("td",{colSpan:bt?10:8,className:"px-6 py-8 text-center text-gray-500",children:"Loading employees..."})}):(()=>{const K=s.filter(ue=>A===""||ue.employeeId.toLowerCase().includes(A.toLowerCase())||ue.name.toLowerCase().includes(A.toLowerCase())||ue.email.toLowerCase().includes(A.toLowerCase()));return K.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:bt?10:8,className:"px-6 py-8 text-center text-gray-500",children:A?"No employees found matching your search":"No employees found"})}):K.map(ue=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:ue.employeeId})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:ue.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:ue.email}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${ue.role==="manager"?"bg-blue-100 text-blue-700":ue.role==="cluster_head"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:ue.role==="manager"?"Manager":ue.role==="cluster_head"?"Cluster Head":"Employee"})}),bt&&n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ue.storeId?n.jsx("span",{className:"text-sm text-gray-900",children:f.find(fe=>fe.id===ue.storeId)?.name||ue.storeId}):n.jsx("span",{className:"text-sm text-red-600",children:"No Store"})}),bt&&n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ue.designation==="operations_incharge"?n.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:"Operations Incharge"}):ue.designation==="store_incharge"?n.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:"Store Incharge"}):ue.designation==="production_incharge"?n.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:"Production Incharge"}):ue.designation==="store_ops"?n.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 rounded text-xs",children:"Store Ops"}):ue.designation==="production_ops"?n.jsx("span",{className:"px-2 py-1 bg-green-50 text-green-600 rounded text-xs",children:"Production Ops"}):n.jsx("span",{className:"text-sm text-gray-400",children:""})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${ue.employmentType==="fulltime"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:ue.employmentType==="fulltime"?"Full-Time":"Contract"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:new Date(ue.joiningDate).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${ue.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ue.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>_(ue),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:n.jsx(vi,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>Jr(ue.employeeId),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:n.jsx(ls,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>Kn(ue),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit Full Profile",children:n.jsx(Pi,{className:"w-5 h-5"})}),bt&&n.jsx("button",{onClick:()=>{Ar(ue),Ut(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Role & Designation",children:n.jsx(hi,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>{le(ue),De(!0)},className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Reset Password",children:n.jsx(M9,{className:"w-5 h-5"})}),bt&&ue.role==="employee"&&n.jsx("button",{onClick:()=>pt(ue),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Assign Supervisor (Manager or Incharge)",children:n.jsx(hi,{className:"w-5 h-5"})}),bt&&ue.role!=="cluster_head"&&n.jsx("button",{onClick:()=>Y(ue),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Change Store",children:n.jsx(Li,{className:"w-5 h-5"})}),bt&&ue.role==="employee"&&n.jsx("button",{onClick:()=>W(ue),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Assign Designation (Store/Production Incharge)",children:n.jsx(hi,{className:"w-5 h-5"})}),bt&&!["employee","manager","cluster_head"].includes(ue.role)&&n.jsx("button",{onClick:()=>oe(ue),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Fix Role (Invalid Role Detected)",children:n.jsx(xr,{className:"w-5 h-5"})})]})})]},ue.employeeId))})()})]})})}),bt&&o.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fn,{className:"w-6 h-6 text-gray-500"}),n.jsxs("h3",{className:"text-xl text-gray-700",children:["Past Employees (",o.length,")"]})]}),n.jsx("button",{onClick:()=>u(!d),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:d?"Hide":"Show"})]}),d&&n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Employee ID"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Role"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Joining Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Release Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Total Earnings"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Duration"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(K=>{const ue=new Date(K.joiningDate||K.createdAt),fe=new Date(K.releasedAt),Me=fe.getTime()-ue.getTime(),we=Math.floor(Me/(1e3*60*60*24)),lt=Math.floor(we/365),Ge=Math.floor(we%365/30),Ze=we%30;let jt="";return lt>0&&(jt+=`${lt}y `),Ge>0&&(jt+=`${Ge}m `),(Ze>0||jt==="")&&(jt+=`${Ze}d`),n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm",children:K.employeeId})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:K.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${K.role==="manager"?"bg-blue-100 text-blue-700":K.role==="cluster_head"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:K.role==="cluster_head"?"Cluster Head":K.role.charAt(0).toUpperCase()+K.role.slice(1)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:new Date(K.joiningDate||K.createdAt).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:fe.toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("span",{className:"text-green-600",children:["",K.totalEarnings?.toLocaleString()||"0"]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:jt.trim()})]},K.employeeId)})})]})})]}),S&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:n.jsx("h2",{className:"text-2xl",children:"Employee Details"})}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Employee ID"}),n.jsx("p",{className:"text-gray-900",children:S.employeeId})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Name"}),n.jsx("p",{className:"text-gray-900",children:S.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),n.jsx("p",{className:"text-gray-900",children:S.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Role"}),n.jsx("p",{className:"text-gray-900",children:S.role})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Employment Type"}),n.jsx("p",{className:"text-gray-900",children:S.employmentType})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Joining Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(S.joiningDate).toLocaleDateString()})]}),S.dob&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Date of Birth"}),n.jsx("p",{className:"text-gray-900",children:new Date(S.dob).toLocaleDateString()})]}),S.phone&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),n.jsx("p",{className:"text-gray-900",children:S.phone})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),n.jsx("p",{className:"text-gray-900",children:S.status})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Created By"}),n.jsx("p",{className:"text-gray-900",children:S.createdBy})]}),S.designation&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Designation"}),n.jsx("p",{className:"text-gray-900",children:S.designation==="store_incharge"?"Store Incharge":"Production Incharge"})]}),S.department&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Department"}),n.jsx("p",{className:"text-gray-900",children:S.department==="store_operations"?"Store Operations":"Production"})]}),S.managerId&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Reports To (Manager)"}),n.jsx("p",{className:"text-gray-900",children:U(S.managerId)})]}),S.inchargeId&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Reports To (Incharge)"}),n.jsx("p",{className:"text-gray-900",children:U(S.inchargeId)})]})]}),S.aadharFront&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Aadhar Card (Front)"}),n.jsx("img",{src:S.aadharFront,alt:"Aadhar Front",className:"w-full rounded-lg border border-gray-300"})]}),S.aadharBack&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Aadhar Card (Back)"}),n.jsx("img",{src:S.aadharBack,alt:"Aadhar Back",className:"w-full rounded-lg border border-gray-300"})]}),n.jsx("button",{onClick:()=>_(null),className:"w-full bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Close"})]})]})}),C&&n.jsx(QF,{onClose:()=>P(!1),employees:s.filter(K=>K.status==="active")}),B&&O&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-green-600 to-teal-600 text-white p-6 rounded-t-xl",children:n.jsx("h2",{className:"text-2xl",children:"Store Migration Complete"})}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[n.jsx("h3",{className:"text-lg text-green-900 mb-2",children:"Migration Summary"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-green-700",children:"Total Employees"}),n.jsx("p",{className:"text-2xl text-green-900",children:O.summary.total})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-green-700",children:" Updated"}),n.jsx("p",{className:"text-2xl text-green-900",children:O.summary.updated})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-green-700",children:" Skipped"}),n.jsx("p",{className:"text-2xl text-green-900",children:O.summary.skipped})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-yellow-700",children:" Needs Manual"}),n.jsx("p",{className:"text-2xl text-yellow-900",children:O.summary.needsManualAssignment||0})]}),O.summary.errors>0&&n.jsxs("div",{className:"col-span-2",children:[n.jsx("p",{className:"text-sm text-red-700",children:" Errors"}),n.jsx("p",{className:"text-2xl text-red-900",children:O.summary.errors})]})]})]}),O.updates&&O.updates.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Successfully Updated"}),n.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 rounded-lg",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"ID"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Name"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Role"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Store ID"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:O.updates.map((K,ue)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:K.employeeId}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:K.name}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:K.role}),n.jsx("td",{className:"px-4 py-2 text-sm text-blue-600",children:K.assignedStoreId})]},ue))})]})})]}),O.manualAssignmentNeeded&&O.manualAssignmentNeeded.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Needs Manual Store Assignment"}),n.jsx("div",{className:"max-h-60 overflow-y-auto border border-yellow-200 rounded-lg bg-yellow-50",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-yellow-100 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"ID"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Name"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Role"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Reason"})]})}),n.jsx("tbody",{className:"divide-y divide-yellow-200",children:O.manualAssignmentNeeded.map((K,ue)=>n.jsxs("tr",{className:"hover:bg-yellow-100",children:[n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:K.employeeId}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:K.name}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:K.role}),n.jsx("td",{className:"px-4 py-2 text-sm text-yellow-800",children:K.reason})]},ue))})]})}),n.jsx("div",{className:"mt-3 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",n.jsx("strong",{children:"Action Required:"})," Go to Store Management to assign stores to managers, or assign managers to employees who don't have one."]})})]}),O.errorDetails&&O.errorDetails.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Errors"}),n.jsx("div",{className:"max-h-60 overflow-y-auto border border-red-200 rounded-lg bg-red-50",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-red-100 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"ID"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Name"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Role"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Error"})]})}),n.jsx("tbody",{className:"divide-y divide-red-200",children:O.errorDetails.map((K,ue)=>n.jsxs("tr",{className:"hover:bg-red-100",children:[n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:K.employeeId}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:K.name}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:K.role}),n.jsx("td",{className:"px-4 py-2 text-sm text-red-800",children:K.reason})]},ue))})]})})]}),n.jsx("button",{onClick:()=>F(!1),className:"w-full bg-gradient-to-r from-green-600 to-teal-600 text-white py-3 rounded-lg hover:shadow-lg transition-all",children:"Close"})]})]})}),L&&ce&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[n.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[n.jsx("h2",{className:"text-2xl",children:"Assign Supervisor"}),n.jsxs("p",{className:"text-sm text-purple-100 mt-1",children:[ce.name," (",ce.employeeId,")"]})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[(ce.managerId||ce.inchargeId)&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[n.jsx("p",{className:"text-sm text-blue-700 mb-1",children:"Current Supervisor"}),n.jsx("p",{className:"text-blue-900",children:ce.inchargeId?`${U(ce.inchargeId)} (Incharge)`:U(ce.managerId||"")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Supervisor Type *"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"radio",value:"manager",checked:te==="manager",onChange:K=>{se(K.target.value),Z("")},className:"mr-2"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Operations Manager"})]}),n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"radio",value:"incharge",checked:te==="incharge",onChange:K=>{se(K.target.value),Z("")},className:"mr-2"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Store/Production Incharge"})]})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",te==="manager"?"Operations Manager":"Incharge"," *"]}),n.jsxs("select",{value:I,onChange:K=>Z(K.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsxs("option",{value:"",children:["Select ",te==="manager"?"a manager":"an incharge","..."]}),te==="manager"?be.map(K=>n.jsxs("option",{value:K.employeeId,children:[K.name," (",K.employeeId,")",K.storeId?` - Store: ${K.storeId}`:" - No store assigned"]},K.employeeId)):_e.map(K=>n.jsxs("option",{value:K.employeeId,children:[K.name," (",K.employeeId,") - ",K.designation==="store_incharge"?"Store Incharge":"Production Incharge"]},K.employeeId))]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" ",te==="manager"?"Employee's store will be automatically updated to match their manager's store":"Employee will be assigned to the incharge's department"]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:ft,disabled:p||!I,className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Assigning...":"Assign Supervisor"}),n.jsx("button",{onClick:()=>{H(!1),z(null),Z(""),se("manager")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),ye&&G&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[n.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-orange-600 to-red-600 text-white p-6 rounded-t-xl",children:[n.jsx("h2",{className:"text-2xl",children:"Fix Employee Role"}),n.jsxs("p",{className:"text-sm text-orange-100 mt-1",children:[G.name," (",G.employeeId,")"]})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-orange-600 mt-0.5"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-orange-800 mb-1",children:[n.jsx("strong",{children:"Invalid Role Detected:"}),' "',G.role,'"']}),n.jsx("p",{className:"text-xs text-orange-700",children:"This role is not recognized by the system. Please select a valid role below."})]})]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Correct Role *"}),n.jsxs("select",{value:Ke,onChange:K=>ut(K.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[n.jsx("option",{value:"employee",children:"Employee - Regular staff (can be fulltime or contract)"}),n.jsx("option",{value:"manager",children:"Manager - Manages employees and a store"}),n.jsx("option",{value:"cluster_head",children:"Cluster Head - Manages multiple stores"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:' Most workers (kitchen staff, delivery, etc.) should be "Employee"'})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:ne,disabled:p,className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Updating...":"Update Role"}),n.jsx("button",{onClick:()=>{qe(!1),He(null)},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),ze&&ke&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[n.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[n.jsx("h2",{className:"text-2xl",children:"Change Employee Store"}),n.jsxs("p",{className:"text-sm text-blue-100 mt-1",children:[ke.name," (",ke.employeeId,")"]})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Li,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-blue-900 mb-1",children:[n.jsx("strong",{children:"Current Store:"})," ",ke.storeId?f.find(K=>K.id===ke.storeId)?.name||ke.storeId:"No store assigned"]}),n.jsx("p",{className:"text-xs text-blue-700",children:"Select a new store below to reassign this employee."})]})]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select New Store *"}),n.jsxs("select",{value:We,onChange:K=>ct(K.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select a store..."}),f.map(K=>n.jsxs("option",{value:K.id,children:[K.name," - ",K.location]},K.id))]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" This will update the employee's store assignment immediately"})]}),We&&We!==ke.storeId&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:n.jsx("p",{className:"text-xs text-yellow-800",children:" This will move the employee to a different store. Their manager assignment will remain unchanged."})}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:q,disabled:p||!We,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Updating...":"Update Store"}),n.jsx("button",{onClick:()=>{Pe(!1),Xe(null),ct("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),ln&&Ft&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[n.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 rounded-t-xl",children:[n.jsx("h2",{className:"text-2xl",children:"Assign Employee Designation"}),n.jsxs("p",{className:"text-sm text-indigo-100 mt-1",children:[Ft.name," (",Ft.employeeId,")"]})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(hi,{className:"w-5 h-5 text-indigo-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-indigo-900 mb-1",children:n.jsx("strong",{children:"Department Incharge Designations"})}),n.jsx("p",{className:"text-xs text-indigo-700",children:"Assign employees as Store Incharge or Production Incharge. They will manage other employees in their department."})]})]})}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[n.jsxs("p",{className:"text-sm text-blue-900",children:[n.jsx("strong",{children:"Current Designation:"})," ",Ft.designation==="store_incharge"?"Store Incharge":Ft.designation==="production_incharge"?"Production Incharge":"Regular Employee"]}),Ft.department&&n.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["Department: ",Ft.department==="store_operations"?"Store Operations":"Production"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Designation"}),n.jsxs("select",{value:nt,onChange:K=>Bt(K.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[n.jsx("option",{value:"none",children:"Regular Employee (No Designation)"}),n.jsx("option",{value:"store_incharge",children:"Store Incharge - Store Operations Department"}),n.jsx("option",{value:"production_incharge",children:"Production Incharge - Production Department"})]})]}),nt!=="none"&&n.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-xs text-gray-700",children:[nt==="store_incharge"&&n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:"Store Incharge Responsibilities:"}),n.jsx("br",{})," Customer-facing operations and administration",n.jsx("br",{})," Manages Cashier, Kitchen Helper, Store Staff/Assistant",n.jsx("br",{})," Reports to Operations Manager"]}),nt==="production_incharge"&&n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:"Production Incharge Responsibilities:"}),n.jsx("br",{})," Food preparation, quality control, production planning",n.jsx("br",{})," Manages Momo Makers and production team",n.jsx("br",{})," Reports to Operations Manager"]})]})}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:ie,disabled:p,className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Assigning...":"Assign Designation"}),n.jsx("button",{onClick:()=>{Xr(!1),ir(null),Bt("none")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),$e&&re&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[n.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-orange-600 to-red-600 text-white p-6 rounded-t-xl",children:[n.jsx("h2",{className:"text-2xl",children:"Reset Password"}),n.jsxs("p",{className:"text-sm text-orange-100 mt-1",children:[re.name," (",re.employeeId,")"]})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-sm text-yellow-800",children:[n.jsx("strong",{children:" Important:"})," After resetting, save the new credentials and share them securely with the employee."]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Current Email"}),n.jsx("input",{type:"text",value:re.email,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"New Password *"}),n.jsx("input",{type:"text",value:Oe,onChange:K=>Le(K.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter new password",autoFocus:!0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters. Use a strong, memorable password."})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:_n,disabled:p||!Oe,className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Resetting...":"Reset Password"}),n.jsx("button",{onClick:()=>{De(!1),le(null),Le("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),Wt&&Vt&&n.jsx(I8,{employee:Vt,onClose:()=>{Ut(!1),Ar(null)},onSave:()=>{ht()}})]})]})})}function xI({onNavigate:e}){const[t,r]=M.useState([]),[a,s]=M.useState(!1),[i,o]=M.useState(!1);M.useEffect(()=>{l();const g=setInterval(l,3e4);return()=>clearInterval(g)},[]);const l=async()=>{try{const g=await jD();r(g)}catch{r([])}},d=async g=>{try{await ND(g),r(t.map(v=>v.id===g?{...v,read:!0}:v))}catch(v){console.error("Error marking notification as read:",v)}},u=async()=>{o(!0);try{await kD(),r(t.map(g=>({...g,read:!0})))}catch(g){console.error("Error marking all as read:",g)}finally{o(!1)}},f=g=>{if(g.read||d(g.id),e)switch(g.type){case"sales_pending":case"sales_approved":case"sales_rejected":case"discrepancy_request":case"discrepancy_approved":case"discrepancy_rejected":e("sales",g.relatedDate||void 0);break;case"timesheet_pending":case"timesheet_approved":case"timesheet_rejected":e("attendance");break;case"leave_pending":case"leave_approved":case"leave_rejected":e("leave");break;case"production_pending":case"production_approved":e("production",g.relatedDate||void 0);break;case"production_request_new":case"production_request_accepted":case"production_request_in-preparation":case"production_request_prepared":case"production_request_shipped":case"production_request_delivered":e("production-requests",g.relatedDate||void 0,g.relatedId||void 0);break;case"stock_request_new":case"stock_request_fulfilled":case"stock_request_partial":case"stock_request_cancelled":e("stock-requests",g.relatedDate||void 0,g.relatedId||void 0);break;case"stock_request_delayed":e("production-requests",g.relatedDate||void 0,g.relatedId||void 0);break}s(!1)},m=g=>g.includes("approved")?n.jsx(zt,{className:"w-5 h-5 text-green-600"}):g.includes("rejected")?n.jsx(Kr,{className:"w-5 h-5 text-red-600"}):g.includes("pending")||g.includes("request")?n.jsx(fn,{className:"w-5 h-5 text-orange-600"}):g.includes("logged")?n.jsx(zt,{className:"w-5 h-5 text-blue-600"}):n.jsx(yn,{className:"w-5 h-5 text-blue-600"}),p=t.filter(g=>!g.read).length;return n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>s(!a),className:"relative p-2 text-white hover:bg-white/20 rounded-full transition-all backdrop-blur-sm border border-white/30","aria-label":"Notifications",children:[n.jsx(lj,{className:"w-6 h-6"}),p>0&&n.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full animate-pulse shadow-lg",children:p>99?"99+":p})]}),a&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),n.jsxs("div",{className:"fixed md:absolute left-4 right-4 md:left-auto md:right-0 mt-2 md:w-96 bg-white rounded-lg shadow-2xl border border-gray-200 z-50 max-h-[80vh] md:max-h-[600px] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-gray-900",children:"Notifications"}),p>0&&n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[p," unread"]})]}),p>0&&n.jsx("button",{onClick:u,disabled:i,className:"text-sm text-blue-600 hover:text-blue-700 disabled:opacity-50",children:"Mark all read"})]}),n.jsx("div",{className:"overflow-y-auto flex-1",children:t.length===0?n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx(lj,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),n.jsx("p",{children:"No notifications"})]}):n.jsx("div",{className:"divide-y divide-gray-100",children:t.map(g=>n.jsx("button",{onClick:()=>f(g),className:`w-full text-left p-4 hover:bg-gray-50 transition-colors ${g.read?"":"bg-blue-50"}`,children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"flex-shrink-0 mt-1",children:m(g.type)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`text-sm ${g.read?"text-gray-700":"font-medium text-gray-900"}`,children:g.title}),n.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:g.message}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Cge(g.createdAt)})]}),!g.read&&n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})})]})},g.id))})})]})]})]})}function Cge(e){const t=new Date(e),r=new Date,a=r.getTime()-t.getTime(),s=Math.floor(a/6e4),i=Math.floor(a/36e5),o=Math.floor(a/864e5);return s<1?"Just now":s<60?`${s}m ago`:i<24?`${i}h ago`:o<7?`${o}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==r.getFullYear()?"numeric":void 0})}const Age=M.memo(function({stores:t,selectedStoreId:r,onStoreChange:a,showAllStores:s=!0}){const i=t.find(l=>l.id===r),o=!r;return n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-purple-500 to-pink-500 rounded-xl shadow-lg p-[2px]",children:n.jsxs("div",{className:"bg-white rounded-[10px] p-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl flex items-center justify-center",children:n.jsx(Li,{className:"w-6 h-6 text-purple-600"})})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Current Store View"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:r||"all",onChange:l=>a(l.target.value==="all"?null:l.target.value),className:"w-full appearance-none bg-transparent border-none text-base font-semibold text-gray-900 focus:ring-0 focus:outline-none cursor-pointer pr-8",style:{paddingRight:"2rem"},children:[s&&n.jsx("option",{value:"all",children:" All Stores (Combined View)"}),t.map(l=>n.jsxs("option",{value:l.id,children:[" ",l.name," ",l.location&&`- ${l.location}`]},l.id))]}),n.jsx(Uf,{className:"absolute right-0 top-1/2 -translate-y-1/2 w-5 h-5 text-purple-600 pointer-events-none"})]}),i?.location&&n.jsxs("div",{className:"flex items-center gap-1 mt-1 text-sm text-gray-600",children:[n.jsx(f2,{className:"w-3 h-3"}),n.jsx("span",{children:i.location})]})]}),n.jsx("div",{className:"flex-shrink-0",children:n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 px-4 py-2 rounded-lg border border-purple-200",children:[n.jsx("div",{className:"text-xs text-gray-600 text-center",children:"Total Stores"}),n.jsx("div",{className:"text-2xl font-bold text-purple-600 text-center",children:t.length})]})})]}),n.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${o?"bg-blue-500":"bg-green-500"} animate-pulse`}),n.jsx("span",{className:"text-gray-600",children:o?"Viewing all store data":`Viewing ${i?.name||"store"} only`})]}),n.jsxs("span",{className:"text-purple-600 font-medium",children:[o?t.length:1," store",o&&t.length!==1||!o&&!1?"s":""," active"]})]})})]})}),t.length<=5&&n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[s&&n.jsx("button",{onClick:()=>a(null),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${o?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:" All Stores"}),t.map(l=>n.jsxs("button",{onClick:()=>a(l.id),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${r===l.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" ",l.name]},l.id))]})]})});function Tge(){const[e,t]=M.useState(!1),[r,a]=M.useState(!1),[s,i]=M.useState(""),[o,l]=M.useState(null),d=async()=>{try{t(!0),i(""),a(!1);const u=await fetch(`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d/setup-cluster-head`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${zn}`},body:JSON.stringify({email:"subham.tewari@bunnymomos.com",password:"Subham@186",name:"Subham Tewari"})}),f=await u.json();if(!u.ok)throw new Error(f.error||f.details||"Failed to setup account");a(!0),l(f),console.log("Setup successful:",f)}catch(u){console.error("Setup error:",u),i(u instanceof Error?u.message:"Failed to setup account")}finally{t(!1)}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center p-6",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Di,{className:"w-8 h-8 text-white"})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Setup Cluster Head Account"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"This will create a cluster head account for Subham Tewari"})]}),s&&n.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-red-900",children:"Error"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:s})]})]}),r&&o&&n.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[n.jsx(zt,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-green-900",children:"Success!"}),n.jsx("p",{className:"text-sm text-green-700 mt-1",children:o.message})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Email:"}),n.jsx("span",{className:"font-medium text-gray-900",children:o.email})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Employee ID:"}),n.jsx("span",{className:"font-medium text-purple-600",children:o.employeeId})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Password:"}),n.jsx("span",{className:"font-medium text-gray-900",children:"Subham@186"})]})]}),n.jsx("p",{className:"text-xs text-green-700 mt-3",children:"You can now log in with these credentials"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Email:"}),n.jsx("span",{className:"font-medium text-gray-900",children:"subham.tewari@bunnymomos.com"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Password:"}),n.jsx("span",{className:"font-medium text-gray-900",children:"Subham@186"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Name:"}),n.jsx("span",{className:"font-medium text-gray-900",children:"Subham Tewari"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Role:"}),n.jsx("span",{className:"font-medium text-purple-600",children:"Cluster Head"})]})]}),n.jsx("button",{onClick:d,disabled:e||r,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:e?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Setting up..."]}):r?n.jsxs(n.Fragment,{children:[n.jsx(zt,{className:"w-5 h-5"}),"Account Created"]}):n.jsxs(n.Fragment,{children:[n.jsx(Di,{className:"w-5 h-5"}),"Create Cluster Head Account"]})}),r&&n.jsx("a",{href:"/login",className:"block w-full text-center bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all",children:"Go to Login"})]}),n.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("p",{className:"text-xs text-blue-900 font-medium mb-2",children:"What this will do:"}),n.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[n.jsx("li",{children:" Delete any existing account with this email"}),n.jsx("li",{children:" Create a new cluster head account"}),n.jsx("li",{children:" Generate a unique employee ID (e.g., BM001)"}),n.jsx("li",{children:" Set up proper permissions and access"})]})]})]})})}function Oge({onStoreCreated:e,userRole:t}){const[r,a]=M.useState([]),[s,i]=M.useState([]),[o,l]=M.useState([]),[d,u]=M.useState(!0),[f,m]=M.useState(!1),[p,g]=M.useState(null),[v,y]=M.useState(null),[w,k]=M.useState(null),[N,b]=M.useState(""),[A,E]=M.useState(""),[S,_]=M.useState(!1),[C,P]=M.useState(""),[B,F]=M.useState(""),[O,R]=M.useState(!1),[Q,V]=M.useState(""),[J,ae]=M.useState(!1),[L,H]=M.useState(""),[ce,z]=M.useState(!1);M.useEffect(()=>{I(),Z(),te()},[]);const I=async()=>{try{const ke=await nu();a(ke)}catch(ke){if(ke instanceof Error&&(ke.message==="Not authenticated"||ke.message==="Unauthorized"))return;console.error("Error loading stores:",ke)}finally{u(!1)}},Z=async()=>{try{const Xe=(await Ks()).filter(We=>We.role==="manager");i(Xe)}catch(ke){console.error("Error loading managers:",ke)}},te=async()=>{try{const ke=await Wh();l(ke)}catch(ke){console.error("Error loading production houses:",ke)}},se=async ke=>{if(ke.preventDefault(),!N.trim()){alert("Please enter a store name");return}_(!0);try{await v2(N,A),b(""),E(""),m(!1),await I(),e&&e()}catch(Xe){console.error("Error creating store:",Xe),alert(Xe.message||"Failed to create store")}finally{_(!1)}},be=ke=>{g(ke.id),P(ke.name),F(ke.location)},Ee=async ke=>{if(!C.trim()){alert("Please enter a store name");return}R(!0);try{await ED(ke,C,B),g(null),await I()}catch(Xe){console.error("Error updating store:",Xe),alert(Xe.message||"Failed to update store")}finally{R(!1)}},_e=()=>{g(null),P(""),F("")},me=ke=>{y(ke.id),V(ke.managerId||"")},ye=async ke=>{if(!Q){alert("Please select a manager");return}ae(!0);try{await SD(ke,Q),y(null),V(""),await I(),await Z(),alert("Manager assigned successfully!")}catch(Xe){console.error("Error assigning manager:",Xe),alert(Xe.message||"Failed to assign manager")}finally{ae(!1)}},qe=()=>{y(null),V("")},G=async ke=>{if(confirm(`Migrate all existing data (inventory, sales, payroll, employees) to ${ke.name}? This will assign all data without a store to this store.`))try{const Xe=await CD(ke.id);alert(` Migration successful!

Inventory: ${Xe.migratedCount.inventory}
Overheads: ${Xe.migratedCount.overheads}
Sales: ${Xe.migratedCount.sales}
Employees: ${Xe.migratedCount.employees}
Timesheets: ${Xe.migratedCount.timesheets}
Leaves: ${Xe.migratedCount.leaves}
Payouts: ${Xe.migratedCount.payouts}`)}catch(Xe){console.error("Error migrating data:",Xe),alert(Xe.message||"Failed to migrate data")}},He=ke=>{k(ke.id),H(ke.productionHouseId||"")},Ke=async ke=>{if(!L){alert("Please select a production house");return}z(!0);try{await _D(ke,L),k(null),H(""),await I(),await te(),e&&e(),alert("Production house assigned successfully!")}catch(Xe){console.error("Error assigning production house:",Xe),alert(Xe.message||"Failed to assign production house")}finally{z(!1)}},ut=()=>{k(null),H("")},ze=ke=>{if(!ke)return null;const Xe=s.find(We=>We.employeeId===ke);return Xe?`${Xe.name} (${Xe.employeeId})`:"Unknown Manager"},Pe=ke=>{if(!ke)return null;const Xe=o.find(We=>We.id===ke);return Xe?`${Xe.name} (${Xe.id})`:"Unknown Production House"};return d?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"text-gray-500",children:"Loading stores..."})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-gray-900 mb-1",children:" Store Management"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Manage your stores and assign managers"})]}),n.jsxs("button",{onClick:()=>m(!f),className:"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:[n.jsx(xo,{className:"w-5 h-5"}),"Create Store"]})]}),f&&n.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Create New Store"}),n.jsxs("form",{onSubmit:se,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:["Store Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:N,onChange:ke=>b(ke.target.value),placeholder:"e.g., Downtown Branch, Main Street Store",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location (Optional)"}),n.jsx("input",{type:"text",value:A,onChange:ke=>E(ke.target.value),placeholder:"e.g., 123 Main St, City",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"submit",disabled:S,className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-50",children:S?"Creating...":"Create Store"}),n.jsx("button",{type:"button",onClick:()=>{m(!1),b(""),E("")},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.length===0?n.jsxs("div",{className:"col-span-full bg-white rounded-lg border border-gray-200 p-8 text-center",children:[n.jsx(Li,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),n.jsx("p",{className:"text-gray-500 mb-2",children:"No stores yet"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Create your first store to get started"})]}):r.map(ke=>n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:p===ke.id?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Store Name"}),n.jsx("input",{type:"text",value:C,onChange:Xe=>P(Xe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location"}),n.jsx("input",{type:"text",value:B,onChange:Xe=>F(Xe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>Ee(ke.id),disabled:O,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm disabled:opacity-50",children:[n.jsx(ho,{className:"w-4 h-4"}),"Save"]}),n.jsxs("button",{onClick:_e,disabled:O,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[n.jsx(Kr,{className:"w-4 h-4"}),"Cancel"]})]})]}):v===ke.id?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h4",{className:"text-gray-900",children:["Assign Manager to ",ke.name]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Select Manager"}),n.jsxs("select",{value:Q,onChange:Xe=>V(Xe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"Choose a manager..."}),s.filter(Xe=>!Xe.storeId||Xe.storeId===ke.id).map(Xe=>n.jsxs("option",{value:Xe.employeeId,children:[Xe.name," (",Xe.employeeId,")"]},Xe.employeeId))]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only unassigned managers or current manager shown"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>ye(ke.id),disabled:J||!Q,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm disabled:opacity-50",children:[n.jsx(ho,{className:"w-4 h-4"}),J?"Assigning...":"Assign"]}),n.jsxs("button",{onClick:qe,disabled:J,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[n.jsx(Kr,{className:"w-4 h-4"}),"Cancel"]})]})]}):w===ke.id?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h4",{className:"text-gray-900",children:["Assign Production House to ",ke.name]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Select Production House"}),n.jsxs("select",{value:L,onChange:Xe=>H(Xe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"Choose a production house..."}),o.map(Xe=>n.jsx("option",{value:Xe.id,children:Xe.name},Xe.id))]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select which production house will serve this store"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>Ke(ke.id),disabled:ce||!L,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm disabled:opacity-50",children:[n.jsx(ho,{className:"w-4 h-4"}),ce?"Assigning...":"Assign"]}),n.jsxs("button",{onClick:ut,disabled:ce,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[n.jsx(Kr,{className:"w-4 h-4"}),"Cancel"]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Li,{className:"w-5 h-5 text-purple-600"}),n.jsx("h3",{className:"text-gray-900",children:ke.name})]}),n.jsx("button",{onClick:()=>be(ke),className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:n.jsx(Pi,{className:"w-4 h-4"})})]}),ke.location&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[n.jsx(f2,{className:"w-4 h-4"}),n.jsx("span",{children:ke.location})]}),n.jsxs("div",{className:"pt-3 border-t border-gray-200 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Fa,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-gray-600",children:ke.managerId?n.jsx("span",{className:"text-green-600",children:ze(ke.managerId)}):n.jsx("span",{className:"text-orange-600",children:"No Manager Assigned"})})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Pn,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-gray-600",children:ke.productionHouseId?n.jsx("span",{className:"text-green-600",children:Pe(ke.productionHouseId)}):n.jsx("span",{className:"text-orange-600",children:"No Production House Mapped"})})]}),n.jsxs("button",{onClick:()=>me(ke),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:[n.jsx(hi,{className:"w-4 h-4"}),ke.managerId?"Change Manager":"Assign Manager"]}),n.jsxs("button",{onClick:()=>He(ke),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-sm",children:[n.jsx(Pn,{className:"w-4 h-4"}),ke.productionHouseId?"Change Production House":"Assign Production House"]}),t==="cluster_head"&&n.jsxs("button",{onClick:()=>G(ke),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:[n.jsx(ws,{className:"w-4 h-4"}),"Migrate Data"]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["ID: ",ke.id]})]})]})},ke.id))})]})}function Pge({context:e,stores:t,employees:r,onRefreshStores:a}){const[s,i]=M.useState(!1),[o,l]=M.useState(!1),[d,u]=M.useState({name:"",location:"",productionHeadId:""}),[f,m]=M.useState({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}}),p=r.filter(b=>b.designation==="production_incharge"),g=async b=>{b.preventDefault();try{await e.addProductionHouse({name:d.name,location:d.location,productionHeadId:d.productionHeadId||null,inventory:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0},createdBy:e.user?.employeeId||e.user?.email||"unknown"}),alert("Production house created successfully!"),i(!1),u({name:"",location:"",productionHeadId:""})}catch(A){console.error("Error creating production house:",A),alert("Failed to create production house. Please try again.")}},v=async(b,A)=>{try{if(!e.user?.accessToken)return;await s5(e.user.accessToken,b,A),await e.updateProductionHouse(b,{productionHeadId:A}),alert("Production head assigned successfully! Please refresh the page for changes to take effect.")}catch(E){console.error("Error assigning production head:",E),alert("Failed to assign production head. Please try again.")}},y=async(b,A)=>{try{if(!e.user?.accessToken)return;await i5(e.user.accessToken,b,A),alert("Store assigned to production house successfully!"),a()}catch(E){console.error("Error assigning store:",E),alert("Failed to assign store. Please try again.")}},w=async(b,A)=>{if(window.confirm(`Are you sure you want to delete "${A}"?

This action cannot be undone.`))try{await e.deleteProductionHouse(b),alert("Production house deleted successfully!")}catch(S){console.error("Error deleting production house:",S),alert("Failed to delete production house. Please try again.")}},k=async()=>{if(!f.fromHouseId||!f.toHouseId){alert("Please select both source and destination production houses");return}if(f.fromHouseId===f.toHouseId){alert("Source and destination cannot be the same");return}const b=Object.values(f.quantities).reduce((_,C)=>_+C,0);if(b===0){alert("Please enter quantities to transfer");return}const A=e.productionHouses.find(_=>_.id===f.fromHouseId),E=e.productionHouses.find(_=>_.id===f.toHouseId);if(window.confirm(`Transfer ${b} pieces from "${A?.name}" to "${E?.name}"?

This action cannot be undone.`))try{if(!e.user?.accessToken){alert("Not authenticated");return}await c5(e.user.accessToken,f.fromHouseId,f.toHouseId,f.quantities);const _=await Wh(e.user.accessToken);e.setProductionHouses(_),alert("Inventory transferred successfully!"),l(!1),m({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}})}catch(_){console.error("Error transferring inventory:",_),alert(`Failed to transfer inventory: ${_.message||"Unknown error"}`)}},N=()=>{const b=e.productionHouses.find(A=>A.id===f.fromHouseId);if(!b){alert("Please select a source production house first");return}m({...f,quantities:{chicken:b.inventory.chicken,chickenCheese:b.inventory.chickenCheese,veg:b.inventory.veg,cheeseCorn:b.inventory.cheeseCorn,paneer:b.inventory.paneer,vegKurkure:b.inventory.vegKurkure,chickenKurkure:b.inventory.chickenKurkure}})};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[n.jsx(Pn,{className:"w-8 h-8 text-purple-600"}),"Production House Management"]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Manage production houses, inventory, and store mappings"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[n.jsx(rr,{className:"w-5 h-5"}),"Transfer Inventory"]}),n.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[n.jsx(xo,{className:"w-5 h-5"}),"New Production House"]})]})]}),s&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Create New Production House"}),n.jsxs("form",{onSubmit:g,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Name *"}),n.jsx("input",{type:"text",required:!0,value:d.name,onChange:b=>u({...d,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Main Production House"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location *"}),n.jsx("input",{type:"text",required:!0,value:d.location,onChange:b=>u({...d,location:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Sector 21, Dwarka"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Production Head (Optional)"}),n.jsxs("select",{value:d.productionHeadId,onChange:b=>u({...d,productionHeadId:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select Production Head"}),p.map(b=>n.jsxs("option",{value:b.employeeId,children:[b.name," (",b.employeeId,")"]},b.employeeId))]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>{i(!1),u({name:"",location:"",productionHeadId:""})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Create"})]})]})]})}),o&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("h2",{className:"text-2xl text-gray-900 mb-6 flex items-center gap-2",children:[n.jsx(rr,{className:"w-6 h-6 text-blue-600"}),"Transfer Inventory Between Production Houses"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Source Production House *"}),n.jsxs("select",{value:f.fromHouseId,onChange:b=>m({...f,fromHouseId:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select source..."}),e.productionHouses.map(b=>n.jsxs("option",{value:b.id,children:[b.name," - ",b.location]},b.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Destination Production House *"}),n.jsxs("select",{value:f.toHouseId,onChange:b=>m({...f,toHouseId:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select destination..."}),e.productionHouses.filter(b=>b.id!==f.fromHouseId).map(b=>n.jsxs("option",{value:b.id,children:[b.name," - ",b.location]},b.id))]})]})]}),f.fromHouseId&&(()=>{const b=e.productionHouses.find(A=>A.id===f.fromHouseId);return b?n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-2 border-blue-200",children:[n.jsxs("h3",{className:"text-sm text-gray-900 mb-3",children:["Available Stock at ",b.name]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2",children:[n.jsxs("div",{className:"bg-white rounded p-2",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Chicken"}),n.jsx("div",{className:"text-sm text-gray-900",children:b.inventory.chicken})]}),n.jsxs("div",{className:"bg-white rounded p-2",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Chicken Cheese"}),n.jsx("div",{className:"text-sm text-gray-900",children:b.inventory.chickenCheese})]}),n.jsxs("div",{className:"bg-white rounded p-2",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Veg"}),n.jsx("div",{className:"text-sm text-gray-900",children:b.inventory.veg})]}),n.jsxs("div",{className:"bg-white rounded p-2",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Cheese Corn"}),n.jsx("div",{className:"text-sm text-gray-900",children:b.inventory.cheeseCorn})]}),n.jsxs("div",{className:"bg-white rounded p-2",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Paneer"}),n.jsx("div",{className:"text-sm text-gray-900",children:b.inventory.paneer})]}),n.jsxs("div",{className:"bg-white rounded p-2",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Veg Kurkure"}),n.jsx("div",{className:"text-sm text-gray-900",children:b.inventory.vegKurkure})]}),n.jsxs("div",{className:"bg-white rounded p-2",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Chicken Kurkure"}),n.jsx("div",{className:"text-sm text-gray-900",children:b.inventory.chickenKurkure})]})]})]}):null})(),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-sm text-gray-900",children:"Transfer Quantities"}),n.jsx("button",{type:"button",onClick:N,className:"px-3 py-1.5 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition-colors",children:"Transfer All"})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken"}),n.jsx("input",{type:"number",min:"0",value:f.quantities.chicken,onChange:b=>m({...f,quantities:{...f.quantities,chicken:parseInt(b.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken Cheese"}),n.jsx("input",{type:"number",min:"0",value:f.quantities.chickenCheese,onChange:b=>m({...f,quantities:{...f.quantities,chickenCheese:parseInt(b.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Veg"}),n.jsx("input",{type:"number",min:"0",value:f.quantities.veg,onChange:b=>m({...f,quantities:{...f.quantities,veg:parseInt(b.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Cheese Corn"}),n.jsx("input",{type:"number",min:"0",value:f.quantities.cheeseCorn,onChange:b=>m({...f,quantities:{...f.quantities,cheeseCorn:parseInt(b.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Paneer"}),n.jsx("input",{type:"number",min:"0",value:f.quantities.paneer,onChange:b=>m({...f,quantities:{...f.quantities,paneer:parseInt(b.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Veg Kurkure"}),n.jsx("input",{type:"number",min:"0",value:f.quantities.vegKurkure,onChange:b=>m({...f,quantities:{...f.quantities,vegKurkure:parseInt(b.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken Kurkure"}),n.jsx("input",{type:"number",min:"0",value:f.quantities.chickenKurkure,onChange:b=>m({...f,quantities:{...f.quantities,chickenKurkure:parseInt(b.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]})]})]}),n.jsx("div",{className:"bg-green-50 rounded-lg p-4 border-2 border-green-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Total Pieces to Transfer:"}),n.jsx("span",{className:"text-2xl text-green-600",children:Object.values(f.quantities).reduce((b,A)=>b+A,0)})]})}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>{l(!1),m({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"button",onClick:k,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Transfer Inventory"})]})]})]})}),n.jsx("div",{className:"space-y-6",children:e.productionHouses.length===0?n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[n.jsx(Pn,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),n.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Production Houses Yet"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first production house to get started"}),n.jsxs("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors inline-flex items-center gap-2",children:[n.jsx(xo,{className:"w-5 h-5"}),"Create Production House"]})]}):e.productionHouses.map(b=>{const A=p.find(_=>_.employeeId===b.productionHeadId),E=t.filter(_=>_.productionHouseId===b.id),S=Object.values(b.inventory).reduce((_,C)=>_+C,0);return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl text-gray-900 mb-2",children:b.name}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[n.jsx(A9,{className:"w-4 h-4"}),n.jsxs("span",{className:"text-sm font-mono bg-purple-100 text-purple-800 px-2 py-1 rounded",children:["ID: ",b.id]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(f2,{className:"w-4 h-4"}),n.jsx("span",{children:b.location})]}),A&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fa,{className:"w-4 h-4"}),n.jsxs("span",{children:[A.name," (",A.employeeId,")"]})]})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Total Inventory"}),n.jsxs("div",{className:"text-2xl text-purple-600",children:[S," pcs"]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("h4",{className:"text-gray-900 mb-3 flex items-center gap-2",children:[n.jsx(rr,{className:"w-5 h-5 text-purple-600"}),"Current Stock Levels"]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:[n.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken"}),n.jsx("div",{className:"text-lg text-gray-900",children:b.inventory.chicken})]}),n.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken Cheese"}),n.jsx("div",{className:"text-lg text-gray-900",children:b.inventory.chickenCheese})]}),n.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Veg"}),n.jsx("div",{className:"text-lg text-gray-900",children:b.inventory.veg})]}),n.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Cheese Corn"}),n.jsx("div",{className:"text-lg text-gray-900",children:b.inventory.cheeseCorn})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Paneer"}),n.jsx("div",{className:"text-lg text-gray-900",children:b.inventory.paneer})]}),n.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Veg Kurkure"}),n.jsx("div",{className:"text-lg text-gray-900",children:b.inventory.vegKurkure})]}),n.jsxs("div",{className:"bg-pink-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken Kurkure"}),n.jsx("div",{className:"text-lg text-gray-900",children:b.inventory.chickenKurkure})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("label",{className:"block text-sm text-gray-700",children:"Assign Production Head"}),A&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:async()=>{if(e.user?.accessToken)try{const C=await(await fetch("https://xssxnhrzxvtejavoqgwg.supabase.co/functions/v1/make-server-c2dd9b9d/production",{headers:{Authorization:`Bearer ${e.user.accessToken}`}})).json();console.log(" ALL PRODUCTION RECORDS:",C.production);const P=C.production.filter(B=>B.storeId==="STORE-1766938921191-9LCH05"||B.productionHouseId==="STORE-1766938921191-9LCH05"||B.productionHouseId===b.id);console.log(" Records related to this production house:",P),console.log(" Current Production House ID:",b.id),console.log(" Records by productionHouseId:"),P.forEach(B=>{console.log(`  - Record ${B.id.slice(0,8)} (${B.date}): storeId=${B.storeId}, productionHouseId=${B.productionHouseId}`)}),alert(`Found ${P.length} records related to this production house.

Check console for details (F12).`)}catch(_){console.error("Error fetching production data:",_),alert("Failed to fetch data. Check console.")}},className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",title:"Show current production records in console for debugging",children:" Debug Records"}),n.jsx("button",{onClick:async()=>{if(!e.user?.accessToken)return;const _=window.prompt(`Enter the OLD storeId to fix (the wrong ID that production records currently have):

For example: STORE-1766938921191-9LCH05

This will update all production records from that ID to the correct production house ID: ${b.id}`);if(!(!_||_.trim()==="")&&window.confirm(`Fix production records with OLD ID: ${_}?

This will update them to use the correct production house ID: ${b.id}`))try{const C=await o5(e.user.accessToken,b.id,_.trim());alert(` Fixed ${C.updatedCount} production records!

Please refresh the page.`),window.location.reload()}catch(C){console.error("Error fixing records:",C),alert("Failed to fix records. Please try again.")}},className:"px-3 py-1.5 bg-orange-600 text-white text-sm rounded-lg hover:bg-orange-700 transition-colors",title:"Fix old production records that have wrong productionHouseId",children:" Fix Old Records"})]})]}),n.jsxs("select",{value:b.productionHeadId||"",onChange:_=>v(b.id,_.target.value),className:"w-full md:w-96 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"No Production Head Assigned"}),p.map(_=>n.jsxs("option",{value:_.employeeId,children:[_.name," (",_.employeeId,")"]},_.employeeId))]})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-gray-900 mb-3",children:["Mapped Stores (",E.length,")"]}),E.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:E.map(_=>n.jsx("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:_.name}),n.jsx("div",{className:"text-sm text-gray-600",children:_.location})]})},_.id))}):n.jsx("p",{className:"text-gray-500 text-sm",children:"No stores mapped to this production house yet"})]}),n.jsx("div",{className:"mt-4",children:n.jsxs("button",{onClick:()=>w(b.id,b.name),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[n.jsx(ls,{className:"w-5 h-5"}),"Delete Production House"]})})]},b.id)})}),e.productionHouses.length>0&&n.jsxs("div",{className:"mt-8 bg-yellow-50 rounded-xl p-6 border-2 border-yellow-200",children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:" Unmapped Stores"}),t.filter(b=>!b.productionHouseId).length===0?n.jsx("p",{className:"text-gray-600",children:"All stores are mapped to production houses "}):n.jsx("div",{className:"space-y-3",children:t.filter(b=>!b.productionHouseId).map(b=>n.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:b.name}),n.jsx("div",{className:"text-sm text-gray-600",children:b.location})]}),n.jsxs("select",{onChange:A=>A.target.value&&y(b.id,A.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",defaultValue:"",children:[n.jsx("option",{value:"",children:"Assign to Production House"}),e.productionHouses.map(A=>n.jsx("option",{value:A.id,children:A.name},A.id))]})]},b.id))})]})]})}function Ige({context:e}){const[t,r]=M.useState([]),[a,s]=M.useState([]),[i,o]=M.useState(!1),[l,d]=M.useState(!1);M.useEffect(()=>{e.managedStoreIds&&e.managedProductionHouseIds&&(r(e.managedStoreIds),s(e.managedProductionHouseIds))},[e.managedStoreIds,e.managedProductionHouseIds]),M.useEffect(()=>{const g=JSON.stringify([...t].sort())!==JSON.stringify([...e.managedStoreIds||[]].sort()),v=JSON.stringify([...a].sort())!==JSON.stringify([...e.managedProductionHouseIds||[]].sort());d(g||v)},[t,a,e.managedStoreIds,e.managedProductionHouseIds]);const u=g=>{r(v=>v.includes(g)?v.filter(y=>y!==g):[...v,g])},f=g=>{s(v=>v.includes(g)?v.filter(y=>y!==g):[...v,g])},m=async()=>{if(!e.user?.employeeId||!e.user?.accessToken){Zt.error("Employee ID not found");return}o(!0);try{await j5(e.user.accessToken,e.user.employeeId,t,a),Zt.success("Cluster assignments updated successfully! Refreshing..."),setTimeout(()=>{window.location.reload()},1e3)}catch(g){console.error("Error updating cluster assignments:",g),Zt.error("Failed to update cluster assignments")}finally{o(!1)}},p=()=>{r(e.managedStoreIds||[]),s(e.managedProductionHouseIds||[])};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Ii,{className:"w-8 h-8"}),n.jsx("h2",{className:"text-2xl",children:"Cluster Management"})]}),n.jsx("p",{className:"text-purple-100",children:"Assign stores and production houses to your cluster. You'll be able to view reports and analytics for all assigned locations."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:[n.jsx(Li,{className:"w-8 h-8 mb-2 opacity-90"}),n.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Assigned Stores"}),n.jsx("p",{className:"text-3xl",children:t.length}),n.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["of ",e.stores.length," total"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:[n.jsx(al,{className:"w-8 h-8 mb-2 opacity-90"}),n.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Production Houses"}),n.jsx("p",{className:"text-3xl",children:a.length}),n.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["of ",e.productionHouses.length," total"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white",children:[n.jsx(kn,{className:"w-8 h-8 mb-2 opacity-90"}),n.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Locations"}),n.jsx("p",{className:"text-3xl",children:t.length+a.length}),n.jsx("p",{className:"text-xs opacity-75 mt-1",children:"in your cluster"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Li,{className:"w-5 h-5 text-purple-600"}),n.jsx("h3",{className:"text-lg text-gray-900",children:"Stores"}),n.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[t.length," selected"]})]}),e.stores.length===0?n.jsx("p",{className:"text-gray-500 text-center py-8",children:"No stores available"}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.stores.map(g=>{const v=t.includes(g.id);return n.jsxs("button",{onClick:()=>u(g.id),className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all text-left ${v?"border-purple-500 bg-purple-50":"border-gray-200 bg-white hover:border-purple-300"}`,children:[n.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center ${v?"border-purple-500 bg-purple-500":"border-gray-300 bg-white"}`,children:v&&n.jsx(zt,{className:"w-4 h-4 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:g.name}),n.jsx("p",{className:"text-xs text-gray-500",children:g.location})]})]},g.id)})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(al,{className:"w-5 h-5 text-purple-600"}),n.jsx("h3",{className:"text-lg text-gray-900",children:"Production Houses"}),n.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[a.length," selected"]})]}),e.productionHouses.length===0?n.jsx("p",{className:"text-gray-500 text-center py-8",children:"No production houses available"}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.productionHouses.map(g=>{const v=a.includes(g.id);return n.jsxs("button",{onClick:()=>f(g.id),className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all text-left ${v?"border-purple-500 bg-purple-50":"border-gray-200 bg-white hover:border-purple-300"}`,children:[n.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center ${v?"border-purple-500 bg-purple-500":"border-gray-300 bg-white"}`,children:v&&n.jsx(zt,{className:"w-4 h-4 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:g.name}),n.jsx("p",{className:"text-xs text-gray-500",children:g.location})]})]},g.id)})})]}),l&&n.jsx("div",{className:"sticky bottom-0 bg-white border-t-2 border-gray-200 p-4 rounded-lg shadow-lg",children:n.jsxs("div",{className:"flex gap-3 max-w-4xl mx-auto",children:[n.jsx("button",{onClick:p,disabled:i,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50",children:"Cancel Changes"}),n.jsx("button",{onClick:m,disabled:i,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(zt,{className:"w-5 h-5"}),"Save Cluster Assignments"]})})]})})]})}function Dge({context:e,stores:t,employees:r,onRefreshStores:a}){const s=e.user?.role==="cluster_head",[i,o]=M.useState(s?"cluster-management":"stores");return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 rounded-2xl p-8 shadow-xl",children:[n.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center border-2 border-white/30",children:n.jsx(rr,{className:"w-8 h-8 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl text-white mb-1",children:"Assets Management"}),n.jsx("p",{className:"text-white/80 text-sm",children:"Manage your stores and production houses"})]})]}),n.jsxs("div",{className:"flex gap-3",children:[s&&n.jsxs("button",{onClick:()=>o("cluster-management"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="cluster-management"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(Ii,{className:"w-5 h-5"}),n.jsx("span",{children:"Cluster Settings"})]}),n.jsxs("button",{onClick:()=>o("stores"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="stores"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(Li,{className:"w-5 h-5"}),n.jsx("span",{children:"Stores"})]}),n.jsxs("button",{onClick:()=>o("production-houses"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="production-houses"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(Pn,{className:"w-5 h-5"}),n.jsx("span",{children:"Production Houses"})]})]})]})]})}),n.jsx("div",{children:i==="cluster-management"?n.jsx(Ige,{context:e}):i==="stores"?n.jsx(Oge,{onStoreCreated:a,userRole:e.user?.role}):n.jsx(Pge,{context:e,stores:t,employees:r,onRefreshStores:a})})]})}function yI({context:e,stores:t}){const[r,a]=M.useState("my-requests"),[s,i]=M.useState(!1),[o,l]=M.useState({requestId:null,quantities:{},notes:""}),d=e.user?.designation==="store_incharge",u=e.user?.designation==="production_incharge",f=t.find(E=>E.id===e.user?.storeId),m=e.productionHouses.find(E=>E.productionHeadId===e.user?.employeeId),[p,g]=M.useState({chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),v=async E=>{if(E.preventDefault(),!f){alert("You must be assigned to a store to create requests");return}if(!f.productionHouseId){alert("Your store is not mapped to any production house. Contact cluster head.");return}const S=e.productionHouses.find(C=>C.id===f.productionHouseId);if(!S){alert("Production house not found");return}if(!Object.values(p).some(C=>C>0)){alert("Please enter at least one quantity greater than 0");return}try{const C={storeId:f.id,storeName:f.name,productionHouseId:S.id,productionHouseName:S.name,requestedBy:e.user?.employeeId||"",requestedByName:e.user?.name||"",requestDate:new Date().toISOString().split("T")[0],requestedQuantities:p};console.log(" FRONTEND: About to create stock request with data:",C),console.log(" User employeeId:",e.user?.employeeId),console.log(" User name:",e.user?.name),console.log(" Has access token:",!!e.user?.accessToken),await e.createStockRequest(C),console.log(" FRONTEND: Stock request created successfully!"),alert("Stock request created successfully!"),i(!1),g({chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}catch(C){console.error(" FRONTEND: Error creating stock request:",C),console.error(" Error details:",JSON.stringify(C,null,2)),alert("Failed to create stock request. Please try again.")}},y=async E=>{m&&l({requestId:E.id,quantities:{...E.requestedQuantities},notes:""})},w=async E=>{if(E.preventDefault(),!!o.requestId)try{await e.fulfillStockRequest(o.requestId,o.quantities,e.user?.employeeId||"",e.user?.name||"",o.notes||void 0),alert("Stock request fulfilled successfully!"),l({requestId:null,quantities:{},notes:""})}catch(S){console.error("Error fulfilling request:",S),alert("Failed to fulfill request. Please try again.")}},k=d?e.stockRequests.filter(E=>E.storeId===e.user?.storeId):[],N=u&&m?e.stockRequests.filter(E=>E.productionHouseId===m.id&&E.status==="pending"):[],b=E=>{switch(E){case"pending":return"bg-yellow-100 text-yellow-800";case"fulfilled":return"bg-green-100 text-green-800";case"partially_fulfilled":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},A=E=>{switch(E){case"pending":return n.jsx(fn,{className:"w-4 h-4"});case"fulfilled":return n.jsx(zt,{className:"w-4 h-4"});case"partially_fulfilled":return n.jsx(hn,{className:"w-4 h-4"});case"cancelled":return n.jsx(Na,{className:"w-4 h-4"});default:return n.jsx(xr,{className:"w-4 h-4"})}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[n.jsx(rr,{className:"w-8 h-8 text-blue-600"}),"Stock Request Management"]}),n.jsxs("p",{className:"text-gray-600 mt-2",children:[d&&"Request stock from your production house",u&&"Fulfill stock requests from stores"]})]}),d&&n.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[n.jsx($m,{className:"w-5 h-5"}),"New Request"]})]}),d&&f&&!f.productionHouseId&&n.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-red-600"}),n.jsx("p",{className:"text-red-900",children:"Your store is not mapped to any production house. Please contact your cluster head to assign a production house."})]})}),(d||u)&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-1 mb-6 flex gap-2",children:[d&&n.jsxs("button",{onClick:()=>a("my-requests"),className:`flex-1 px-6 py-3 rounded-lg transition-all ${r==="my-requests"?"bg-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["My Requests (",k.length,")"]}),u&&n.jsxs("button",{onClick:()=>a("pending-fulfillment"),className:`flex-1 px-6 py-3 rounded-lg transition-all flex items-center justify-center gap-2 ${r==="pending-fulfillment"?"bg-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["Pending Fulfillment",N.length>0&&n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r==="pending-fulfillment"?"bg-white text-blue-600":"bg-blue-600 text-white"}`,children:N.length})]})]}),s&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Create Stock Request"}),n.jsxs("form",{onSubmit:v,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Momos"}),n.jsx("input",{type:"number",min:"0",value:p.chicken,onChange:E=>g({...p,chicken:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Cheese Momos"}),n.jsx("input",{type:"number",min:"0",value:p.chickenCheese,onChange:E=>g({...p,chickenCheese:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Veg Momos"}),n.jsx("input",{type:"number",min:"0",value:p.veg,onChange:E=>g({...p,veg:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cheese Corn Momos"}),n.jsx("input",{type:"number",min:"0",value:p.cheeseCorn,onChange:E=>g({...p,cheeseCorn:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Paneer Momos"}),n.jsx("input",{type:"number",min:"0",value:p.paneer,onChange:E=>g({...p,paneer:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Veg Kurkure Momos"}),n.jsx("input",{type:"number",min:"0",value:p.vegKurkure,onChange:E=>g({...p,vegKurkure:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Kurkure Momos"}),n.jsx("input",{type:"number",min:"0",value:p.chickenKurkure,onChange:E=>g({...p,chickenKurkure:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Request"})]})]})]})}),o.requestId&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Fulfill Stock Request"}),n.jsxs("form",{onSubmit:w,className:"space-y-4",children:[n.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:n.jsx("p",{className:"text-sm text-blue-900",children:"Adjust quantities based on available inventory. You can fulfill partially if stock is limited."})}),n.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(o.quantities).map(([E,S])=>{const _=m?.inventory[E]||0;return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:[E.replace(/([A-Z])/g," $1").replace(/^./,C=>C.toUpperCase()),n.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(Available: ",_,")"]})]}),n.jsx("input",{type:"number",min:"0",max:_,value:S,onChange:C=>l({...o,quantities:{...o.quantities,[E]:parseInt(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]},E)})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Notes (Optional)"}),n.jsx("textarea",{value:o.notes,onChange:E=>l({...o,notes:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Any notes about this fulfillment..."})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>l({requestId:null,quantities:{},notes:""}),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Fulfill Request"})]})]})]})}),n.jsxs("div",{className:"space-y-4",children:[r==="my-requests"&&k.length===0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[n.jsx(rr,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),n.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Stock Requests Yet"}),n.jsx("p",{className:"text-gray-600",children:"Create your first stock request to get momos from the production house"})]}),r==="pending-fulfillment"&&N.length===0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[n.jsx(zt,{className:"w-16 h-16 mx-auto text-green-500 mb-4"}),n.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"All Caught Up!"}),n.jsx("p",{className:"text-gray-600",children:"No pending stock requests to fulfill"})]}),r==="my-requests"&&k.map(E=>n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsxs("h3",{className:"text-lg text-gray-900",children:["Request to ",E.productionHouseName]}),n.jsxs("span",{className:`px-3 py-1 rounded-full text-xs flex items-center gap-1 ${b(E.status)}`,children:[A(E.status),E.status.replace("_"," ").toUpperCase()]})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Requested on ",new Date(E.requestDate).toLocaleDateString()]})]})}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:Object.entries(E.requestedQuantities).map(([S,_])=>_>0&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:S.replace(/([A-Z])/g," $1").replace(/^./,C=>C.toUpperCase())}),n.jsx("div",{className:"text-lg text-gray-900",children:E.fulfilledQuantities?`${E.fulfilledQuantities[S]} / ${_}`:_})]},S))}),E.notes&&n.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:[n.jsx("div",{className:"text-xs text-blue-900 mb-1",children:"Notes from Production Head:"}),n.jsx("div",{className:"text-sm text-blue-900",children:E.notes})]}),E.fulfilledBy&&n.jsxs("div",{className:"text-sm text-gray-600",children:["Fulfilled by ",E.fulfilledByName," on ",new Date(E.fulfillmentDate).toLocaleDateString()]})]},E.id)),r==="pending-fulfillment"&&N.map(E=>n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-yellow-300",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsxs("h3",{className:"text-lg text-gray-900",children:["Request from ",E.storeName]}),n.jsxs("span",{className:`px-3 py-1 rounded-full text-xs flex items-center gap-1 ${b(E.status)}`,children:[A(E.status),"PENDING"]})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Requested by ",E.requestedByName," on ",new Date(E.requestDate).toLocaleDateString()]})]}),n.jsxs("button",{onClick:()=>y(E),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[n.jsx(zt,{className:"w-4 h-4"}),"Fulfill"]})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(E.requestedQuantities).map(([S,_])=>{const C=m?.inventory[S]||0,P=C>=_;return _>0&&n.jsxs("div",{className:`rounded-lg p-3 ${P?"bg-green-50":"bg-red-50"}`,children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:S.replace(/([A-Z])/g," $1").replace(/^./,B=>B.toUpperCase())}),n.jsx("div",{className:"text-lg text-gray-900",children:_}),n.jsxs("div",{className:`text-xs ${P?"text-green-600":"text-red-600"}`,children:["Available: ",C]})]},S)})})]},E.id))]})]})}const Mge=(e,t)=>{const r=new Array(e.length+t.length);for(let a=0;a<e.length;a++)r[a]=e[a];for(let a=0;a<t.length;a++)r[e.length+a]=t[a];return r},Rge=(e,t)=>({classGroupId:e,validator:t}),R8=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),ng="-",vI=[],Fge="arbitrary..",$ge=e=>{const t=Bge(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return Lge(o);const l=o.split(ng),d=l[0]===""&&l.length>1?1:0;return F8(l,d,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const d=a[o],u=r[o];return d?u?Mge(u,d):d:u||vI}return r[o]||vI}}},F8=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const s=e[t],i=r.nextPart.get(s);if(i){const u=F8(e,t+1,i);if(u)return u}const o=r.validators;if(o===null)return;const l=t===0?e.join(ng):e.slice(t).join(ng),d=o.length;for(let u=0;u<d;u++){const f=o[u];if(f.validator(l))return f.classGroupId}},Lge=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),a=t.slice(0,r);return a?Fge+a:void 0})(),Bge=e=>{const{theme:t,classGroups:r}=e;return Uge(r,t)},Uge=(e,t)=>{const r=R8();for(const a in e){const s=e[a];aS(s,r,a,t)}return r},aS=(e,t,r,a)=>{const s=e.length;for(let i=0;i<s;i++){const o=e[i];Hge(o,t,r,a)}},Hge=(e,t,r,a)=>{if(typeof e=="string"){qge(e,t,r);return}if(typeof e=="function"){zge(e,t,r,a);return}Wge(e,t,r,a)},qge=(e,t,r)=>{const a=e===""?t:$8(t,e);a.classGroupId=r},zge=(e,t,r,a)=>{if(Kge(e)){aS(e(a),t,r,a);return}t.validators===null&&(t.validators=[]),t.validators.push(Rge(r,e))},Wge=(e,t,r,a)=>{const s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[l,d]=s[o];aS(d,$8(t,l),r,a)}},$8=(e,t)=>{let r=e;const a=t.split(ng),s=a.length;for(let i=0;i<s;i++){const o=a[i];let l=r.nextPart.get(o);l||(l=R8(),r.nextPart.set(o,l)),r=l}return r},Kge=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Vge=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),a=Object.create(null);const s=(i,o)=>{r[i]=o,t++,t>e&&(t=0,a=r,r=Object.create(null))};return{get(i){let o=r[i];if(o!==void 0)return o;if((o=a[i])!==void 0)return s(i,o),o},set(i,o){i in r?r[i]=o:s(i,o)}}},c2="!",bI=":",Gge=[],wI=(e,t,r,a,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:a,isExternal:s}),Yge=e=>{const{prefix:t,experimentalParseClassName:r}=e;let a=s=>{const i=[];let o=0,l=0,d=0,u;const f=s.length;for(let y=0;y<f;y++){const w=s[y];if(o===0&&l===0){if(w===bI){i.push(s.slice(d,y)),d=y+1;continue}if(w==="/"){u=y;continue}}w==="["?o++:w==="]"?o--:w==="("?l++:w===")"&&l--}const m=i.length===0?s:s.slice(d);let p=m,g=!1;m.endsWith(c2)?(p=m.slice(0,-1),g=!0):m.startsWith(c2)&&(p=m.slice(1),g=!0);const v=u&&u>d?u-d:void 0;return wI(i,g,p,v)};if(t){const s=t+bI,i=a;a=o=>o.startsWith(s)?i(o.slice(s.length)):wI(Gge,!1,o,void 0,!0)}if(r){const s=a;a=i=>r({className:i,parseClassName:s})}return a},Xge=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,a)=>{t.set(r,1e6+a)}),r=>{const a=[];let s=[];for(let i=0;i<r.length;i++){const o=r[i],l=o[0]==="[",d=t.has(o);l||d?(s.length>0&&(s.sort(),a.push(...s),s=[]),a.push(o)):s.push(o)}return s.length>0&&(s.sort(),a.push(...s)),a}},Jge=e=>({cache:Vge(e.cacheSize),parseClassName:Yge(e),sortModifiers:Xge(e),...$ge(e)}),Qge=/\s+/,Zge=(e,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],l=e.trim().split(Qge);let d="";for(let u=l.length-1;u>=0;u-=1){const f=l[u],{isExternal:m,modifiers:p,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:y}=r(f);if(m){d=f+(d.length>0?" "+d:d);continue}let w=!!y,k=a(w?v.substring(0,y):v);if(!k){if(!w){d=f+(d.length>0?" "+d:d);continue}if(k=a(v),!k){d=f+(d.length>0?" "+d:d);continue}w=!1}const N=p.length===0?"":p.length===1?p[0]:i(p).join(":"),b=g?N+c2:N,A=b+k;if(o.indexOf(A)>-1)continue;o.push(A);const E=s(k,w);for(let S=0;S<E.length;++S){const _=E[S];o.push(b+_)}d=f+(d.length>0?" "+d:d)}return d},exe=(...e)=>{let t=0,r,a,s="";for(;t<e.length;)(r=e[t++])&&(a=L8(r))&&(s&&(s+=" "),s+=a);return s},L8=e=>{if(typeof e=="string")return e;let t,r="";for(let a=0;a<e.length;a++)e[a]&&(t=L8(e[a]))&&(r&&(r+=" "),r+=t);return r},txe=(e,...t)=>{let r,a,s,i;const o=d=>{const u=t.reduce((f,m)=>m(f),e());return r=Jge(u),a=r.cache.get,s=r.cache.set,i=l,l(d)},l=d=>{const u=a(d);if(u)return u;const f=Zge(d,r);return s(d,f),f};return i=o,(...d)=>i(exe(...d))},rxe=[],Xn=e=>{const t=r=>r[e]||rxe;return t.isThemeGetter=!0,t},B8=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,U8=/^\((?:(\w[\w-]*):)?(.+)\)$/i,nxe=/^\d+\/\d+$/,axe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,sxe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ixe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,oxe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,lxe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,sd=e=>nxe.test(e),gr=e=>!!e&&!Number.isNaN(Number(e)),Go=e=>!!e&&Number.isInteger(Number(e)),sj=e=>e.endsWith("%")&&gr(e.slice(0,-1)),so=e=>axe.test(e),cxe=()=>!0,dxe=e=>sxe.test(e)&&!ixe.test(e),H8=()=>!1,uxe=e=>oxe.test(e),hxe=e=>lxe.test(e),fxe=e=>!_t(e)&&!Et(e),mxe=e=>vu(e,W8,H8),_t=e=>B8.test(e),Rl=e=>vu(e,K8,dxe),ij=e=>vu(e,vxe,gr),jI=e=>vu(e,q8,H8),pxe=e=>vu(e,z8,hxe),Im=e=>vu(e,V8,uxe),Et=e=>U8.test(e),ih=e=>bu(e,K8),gxe=e=>bu(e,bxe),NI=e=>bu(e,q8),xxe=e=>bu(e,W8),yxe=e=>bu(e,z8),Dm=e=>bu(e,V8,!0),vu=(e,t,r)=>{const a=B8.exec(e);return a?a[1]?t(a[1]):r(a[2]):!1},bu=(e,t,r=!1)=>{const a=U8.exec(e);return a?a[1]?t(a[1]):r:!1},q8=e=>e==="position"||e==="percentage",z8=e=>e==="image"||e==="url",W8=e=>e==="length"||e==="size"||e==="bg-size",K8=e=>e==="length",vxe=e=>e==="number",bxe=e=>e==="family-name",V8=e=>e==="shadow",wxe=()=>{const e=Xn("color"),t=Xn("font"),r=Xn("text"),a=Xn("font-weight"),s=Xn("tracking"),i=Xn("leading"),o=Xn("breakpoint"),l=Xn("container"),d=Xn("spacing"),u=Xn("radius"),f=Xn("shadow"),m=Xn("inset-shadow"),p=Xn("text-shadow"),g=Xn("drop-shadow"),v=Xn("blur"),y=Xn("perspective"),w=Xn("aspect"),k=Xn("ease"),N=Xn("animate"),b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...A(),Et,_t],S=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto","contain","none"],C=()=>[Et,_t,d],P=()=>[sd,"full","auto",...C()],B=()=>[Go,"none","subgrid",Et,_t],F=()=>["auto",{span:["full",Go,Et,_t]},Go,Et,_t],O=()=>[Go,"auto",Et,_t],R=()=>["auto","min","max","fr",Et,_t],Q=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],V=()=>["start","end","center","stretch","center-safe","end-safe"],J=()=>["auto",...C()],ae=()=>[sd,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],L=()=>[e,Et,_t],H=()=>[...A(),NI,jI,{position:[Et,_t]}],ce=()=>["no-repeat",{repeat:["","x","y","space","round"]}],z=()=>["auto","cover","contain",xxe,mxe,{size:[Et,_t]}],I=()=>[sj,ih,Rl],Z=()=>["","none","full",u,Et,_t],te=()=>["",gr,ih,Rl],se=()=>["solid","dashed","dotted","double"],be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ee=()=>[gr,sj,NI,jI],_e=()=>["","none",v,Et,_t],me=()=>["none",gr,Et,_t],ye=()=>["none",gr,Et,_t],qe=()=>[gr,Et,_t],G=()=>[sd,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[so],breakpoint:[so],color:[cxe],container:[so],"drop-shadow":[so],ease:["in","out","in-out"],font:[fxe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[so],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[so],shadow:[so],spacing:["px",gr],text:[so],"text-shadow":[so],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",sd,_t,Et,w]}],container:["container"],columns:[{columns:[gr,_t,Et,l]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[Go,"auto",Et,_t]}],basis:[{basis:[sd,"full","auto",l,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[gr,sd,"auto","initial","none",_t]}],grow:[{grow:["",gr,Et,_t]}],shrink:[{shrink:["",gr,Et,_t]}],order:[{order:[Go,"first","last","none",Et,_t]}],"grid-cols":[{"grid-cols":B()}],"col-start-end":[{col:F()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":B()}],"row-start-end":[{row:F()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":R()}],"auto-rows":[{"auto-rows":R()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...Q(),"normal"]}],"justify-items":[{"justify-items":[...V(),"normal"]}],"justify-self":[{"justify-self":["auto",...V()]}],"align-content":[{content:["normal",...Q()]}],"align-items":[{items:[...V(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...V(),{baseline:["","last"]}]}],"place-content":[{"place-content":Q()}],"place-items":[{"place-items":[...V(),"baseline"]}],"place-self":[{"place-self":["auto",...V()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:J()}],mx:[{mx:J()}],my:[{my:J()}],ms:[{ms:J()}],me:[{me:J()}],mt:[{mt:J()}],mr:[{mr:J()}],mb:[{mb:J()}],ml:[{ml:J()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:ae()}],w:[{w:[l,"screen",...ae()]}],"min-w":[{"min-w":[l,"screen","none",...ae()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...ae()]}],h:[{h:["screen","lh",...ae()]}],"min-h":[{"min-h":["screen","lh","none",...ae()]}],"max-h":[{"max-h":["screen","lh",...ae()]}],"font-size":[{text:["base",r,ih,Rl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Et,ij]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",sj,_t]}],"font-family":[{font:[gxe,_t,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Et,_t]}],"line-clamp":[{"line-clamp":[gr,"none",Et,ij]}],leading:[{leading:[i,...C()]}],"list-image":[{"list-image":["none",Et,_t]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Et,_t]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:L()}],"text-color":[{text:L()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:[gr,"from-font","auto",Et,Rl]}],"text-decoration-color":[{decoration:L()}],"underline-offset":[{"underline-offset":[gr,"auto",Et,_t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Et,_t]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Et,_t]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:H()}],"bg-repeat":[{bg:ce()}],"bg-size":[{bg:z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Go,Et,_t],radial:["",Et,_t],conic:[Go,Et,_t]},yxe,pxe]}],"bg-color":[{bg:L()}],"gradient-from-pos":[{from:I()}],"gradient-via-pos":[{via:I()}],"gradient-to-pos":[{to:I()}],"gradient-from":[{from:L()}],"gradient-via":[{via:L()}],"gradient-to":[{to:L()}],rounded:[{rounded:Z()}],"rounded-s":[{"rounded-s":Z()}],"rounded-e":[{"rounded-e":Z()}],"rounded-t":[{"rounded-t":Z()}],"rounded-r":[{"rounded-r":Z()}],"rounded-b":[{"rounded-b":Z()}],"rounded-l":[{"rounded-l":Z()}],"rounded-ss":[{"rounded-ss":Z()}],"rounded-se":[{"rounded-se":Z()}],"rounded-ee":[{"rounded-ee":Z()}],"rounded-es":[{"rounded-es":Z()}],"rounded-tl":[{"rounded-tl":Z()}],"rounded-tr":[{"rounded-tr":Z()}],"rounded-br":[{"rounded-br":Z()}],"rounded-bl":[{"rounded-bl":Z()}],"border-w":[{border:te()}],"border-w-x":[{"border-x":te()}],"border-w-y":[{"border-y":te()}],"border-w-s":[{"border-s":te()}],"border-w-e":[{"border-e":te()}],"border-w-t":[{"border-t":te()}],"border-w-r":[{"border-r":te()}],"border-w-b":[{"border-b":te()}],"border-w-l":[{"border-l":te()}],"divide-x":[{"divide-x":te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...se(),"hidden","none"]}],"divide-style":[{divide:[...se(),"hidden","none"]}],"border-color":[{border:L()}],"border-color-x":[{"border-x":L()}],"border-color-y":[{"border-y":L()}],"border-color-s":[{"border-s":L()}],"border-color-e":[{"border-e":L()}],"border-color-t":[{"border-t":L()}],"border-color-r":[{"border-r":L()}],"border-color-b":[{"border-b":L()}],"border-color-l":[{"border-l":L()}],"divide-color":[{divide:L()}],"outline-style":[{outline:[...se(),"none","hidden"]}],"outline-offset":[{"outline-offset":[gr,Et,_t]}],"outline-w":[{outline:["",gr,ih,Rl]}],"outline-color":[{outline:L()}],shadow:[{shadow:["","none",f,Dm,Im]}],"shadow-color":[{shadow:L()}],"inset-shadow":[{"inset-shadow":["none",m,Dm,Im]}],"inset-shadow-color":[{"inset-shadow":L()}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:L()}],"ring-offset-w":[{"ring-offset":[gr,Rl]}],"ring-offset-color":[{"ring-offset":L()}],"inset-ring-w":[{"inset-ring":te()}],"inset-ring-color":[{"inset-ring":L()}],"text-shadow":[{"text-shadow":["none",p,Dm,Im]}],"text-shadow-color":[{"text-shadow":L()}],opacity:[{opacity:[gr,Et,_t]}],"mix-blend":[{"mix-blend":[...be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[gr]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ee()}],"mask-image-linear-from-color":[{"mask-linear-from":L()}],"mask-image-linear-to-color":[{"mask-linear-to":L()}],"mask-image-t-from-pos":[{"mask-t-from":Ee()}],"mask-image-t-to-pos":[{"mask-t-to":Ee()}],"mask-image-t-from-color":[{"mask-t-from":L()}],"mask-image-t-to-color":[{"mask-t-to":L()}],"mask-image-r-from-pos":[{"mask-r-from":Ee()}],"mask-image-r-to-pos":[{"mask-r-to":Ee()}],"mask-image-r-from-color":[{"mask-r-from":L()}],"mask-image-r-to-color":[{"mask-r-to":L()}],"mask-image-b-from-pos":[{"mask-b-from":Ee()}],"mask-image-b-to-pos":[{"mask-b-to":Ee()}],"mask-image-b-from-color":[{"mask-b-from":L()}],"mask-image-b-to-color":[{"mask-b-to":L()}],"mask-image-l-from-pos":[{"mask-l-from":Ee()}],"mask-image-l-to-pos":[{"mask-l-to":Ee()}],"mask-image-l-from-color":[{"mask-l-from":L()}],"mask-image-l-to-color":[{"mask-l-to":L()}],"mask-image-x-from-pos":[{"mask-x-from":Ee()}],"mask-image-x-to-pos":[{"mask-x-to":Ee()}],"mask-image-x-from-color":[{"mask-x-from":L()}],"mask-image-x-to-color":[{"mask-x-to":L()}],"mask-image-y-from-pos":[{"mask-y-from":Ee()}],"mask-image-y-to-pos":[{"mask-y-to":Ee()}],"mask-image-y-from-color":[{"mask-y-from":L()}],"mask-image-y-to-color":[{"mask-y-to":L()}],"mask-image-radial":[{"mask-radial":[Et,_t]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ee()}],"mask-image-radial-from-color":[{"mask-radial-from":L()}],"mask-image-radial-to-color":[{"mask-radial-to":L()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[gr]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ee()}],"mask-image-conic-from-color":[{"mask-conic-from":L()}],"mask-image-conic-to-color":[{"mask-conic-to":L()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:H()}],"mask-repeat":[{mask:ce()}],"mask-size":[{mask:z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Et,_t]}],filter:[{filter:["","none",Et,_t]}],blur:[{blur:_e()}],brightness:[{brightness:[gr,Et,_t]}],contrast:[{contrast:[gr,Et,_t]}],"drop-shadow":[{"drop-shadow":["","none",g,Dm,Im]}],"drop-shadow-color":[{"drop-shadow":L()}],grayscale:[{grayscale:["",gr,Et,_t]}],"hue-rotate":[{"hue-rotate":[gr,Et,_t]}],invert:[{invert:["",gr,Et,_t]}],saturate:[{saturate:[gr,Et,_t]}],sepia:[{sepia:["",gr,Et,_t]}],"backdrop-filter":[{"backdrop-filter":["","none",Et,_t]}],"backdrop-blur":[{"backdrop-blur":_e()}],"backdrop-brightness":[{"backdrop-brightness":[gr,Et,_t]}],"backdrop-contrast":[{"backdrop-contrast":[gr,Et,_t]}],"backdrop-grayscale":[{"backdrop-grayscale":["",gr,Et,_t]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[gr,Et,_t]}],"backdrop-invert":[{"backdrop-invert":["",gr,Et,_t]}],"backdrop-opacity":[{"backdrop-opacity":[gr,Et,_t]}],"backdrop-saturate":[{"backdrop-saturate":[gr,Et,_t]}],"backdrop-sepia":[{"backdrop-sepia":["",gr,Et,_t]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Et,_t]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[gr,"initial",Et,_t]}],ease:[{ease:["linear","initial",k,Et,_t]}],delay:[{delay:[gr,Et,_t]}],animate:[{animate:["none",N,Et,_t]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,Et,_t]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:me()}],"rotate-x":[{"rotate-x":me()}],"rotate-y":[{"rotate-y":me()}],"rotate-z":[{"rotate-z":me()}],scale:[{scale:ye()}],"scale-x":[{"scale-x":ye()}],"scale-y":[{"scale-y":ye()}],"scale-z":[{"scale-z":ye()}],"scale-3d":["scale-3d"],skew:[{skew:qe()}],"skew-x":[{"skew-x":qe()}],"skew-y":[{"skew-y":qe()}],transform:[{transform:[Et,_t,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:G()}],"translate-x":[{"translate-x":G()}],"translate-y":[{"translate-y":G()}],"translate-z":[{"translate-z":G()}],"translate-none":["translate-none"],accent:[{accent:L()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:L()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Et,_t]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Et,_t]}],fill:[{fill:["none",...L()]}],"stroke-w":[{stroke:[gr,ih,Rl,ij]}],stroke:[{stroke:["none",...L()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},jxe=txe(wxe);function G8(...e){return jxe(nr(e))}function On({className:e,...t}){return n.jsx("div",{"data-slot":"card",className:G8("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function kI(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Nxe(...e){return t=>{let r=!1;const a=e.map(s=>{const i=kI(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<a.length;s++){const i=a[s];typeof i=="function"?i():kI(e[s],null)}}}}var kxe=Symbol.for("react.lazy"),ag=R7[" use ".trim().toString()];function Sxe(e){return typeof e=="object"&&e!==null&&"then"in e}function Y8(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===kxe&&"_payload"in e&&Sxe(e._payload)}function _xe(e){const t=Cxe(e),r=M.forwardRef((a,s)=>{let{children:i,...o}=a;Y8(i)&&typeof ag=="function"&&(i=ag(i._payload));const l=M.Children.toArray(i),d=l.find(Txe);if(d){const u=d.props.children,f=l.map(m=>m===d?M.Children.count(u)>1?M.Children.only(null):M.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...o,ref:s,children:M.isValidElement(u)?M.cloneElement(u,void 0,f):null})}return n.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}var Exe=_xe("Slot");function Cxe(e){const t=M.forwardRef((r,a)=>{let{children:s,...i}=r;if(Y8(s)&&typeof ag=="function"&&(s=ag(s._payload)),M.isValidElement(s)){const o=Pxe(s),l=Oxe(i,s.props);return s.type!==M.Fragment&&(l.ref=a?Nxe(a,o):o),M.cloneElement(s,l)}return M.Children.count(s)>1?M.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Axe=Symbol("radix.slottable");function Txe(e){return M.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Axe}function Oxe(e,t){const r={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[a]=s):a==="style"?r[a]={...s,...i}:a==="className"&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function Pxe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const SI=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,_I=nr,Ixe=(e,t)=>r=>{var a;if(t?.variants==null)return _I(e,r?.class,r?.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(u=>{const f=r?.[u],m=i?.[u];if(f===null)return null;const p=SI(f)||SI(m);return s[u][p]}),l=r&&Object.entries(r).reduce((u,f)=>{let[m,p]=f;return p===void 0||(u[m]=p),u},{}),d=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((u,f)=>{let{class:m,className:p,...g}=f;return Object.entries(g).every(v=>{let[y,w]=v;return Array.isArray(w)?w.includes({...i,...l}[y]):{...i,...l}[y]===w})?[...u,m,p]:u},[]);return _I(e,o,d,r?.class,r?.className)},Dxe=Ixe("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Lf({className:e,variant:t,asChild:r=!1,...a}){const s=r?Exe:"span";return n.jsx(s,{"data-slot":"badge",className:G8(Dxe({variant:t}),e),...a})}function Mxe({context:e,stores:t}){const r=M.useMemo(()=>{const s=new Date;s.setDate(s.getDate()-30);const i=e.salesData.filter(y=>new Date(y.date)>=s),o=i.length>0?i.length/30:0,l=e.productionData.filter(y=>new Date(y.date)>=s),d={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};l.forEach(y=>{d.chicken+=y.chickenMomos?.final||0,d.chickenCheese+=y.chickenCheeseMomos?.final||0,d.veg+=y.vegMomos?.final||0,d.cheeseCorn+=y.cheeseCornMomos?.final||0,d.paneer+=y.paneerMomos?.final||0,d.vegKurkure+=y.vegKurkureMomos?.final||0,d.chickenKurkure+=y.chickenKurkureMomos?.final||0});const u=Object.fromEntries(Object.entries(d).map(([y,w])=>[y,l.length>0?w/30:0])),f=7,m=[];for(let y=1;y<=f;y++){const w=new Date;w.setDate(w.getDate()+y);const k=w.getDay(),N=k===0||k===6?1.3:1;m.push({date:w.toISOString().split("T")[0],dayName:w.toLocaleDateString("en-US",{weekday:"short"}),expectedDemand:Math.round(o*N*100),recommendedProduction:Math.round(o*N*110),isWeekend:k===0||k===6})}const p=t.map(y=>{const k=e.stockRequests.filter(S=>S.storeId===y.id&&S.status==="fulfilled").reduce((S,_)=>S+(_.fulfilledQuantities?Object.values(_.fulfilledQuantities).reduce((C,P)=>C+P,0):0),0),b=e.salesData.filter(S=>S.storeId===y.id&&new Date(S.date)>=s).length/30,A=b>0?k/(b*10):99;let E="low";return A<2?E="critical":A<4?E="high":A<7&&(E="medium"),{storeName:y.name,currentStock:k,avgDailySales:Math.round(b*10),daysUntilStockout:Math.round(A),riskLevel:E,recommendedOrder:Math.round(b*10*7)}}),g=Object.entries(u).map(([y,w])=>{const k=w,N=Math.round(k*1.15),b=k>0?85:0;return{product:y.replace(/([A-Z])/g," $1").trim(),current:Math.round(k),recommended:N,efficiency:b,status:k>=N*.9?"optimal":"increase_needed"}}).filter(y=>y.current>0||y.recommended>0),v=[];for(let y=0;y<6;y++){const w=new Date;w.setMonth(w.getMonth()-(5-y));const k=e.salesData.filter(N=>{const b=new Date(N.date);return b.getMonth()===w.getMonth()&&b.getFullYear()===w.getFullYear()}).reduce((N,b)=>N+(b.onlineSales||0)+(b.offlineSales||0),0);v.push({month:w.toLocaleDateString("en-US",{month:"short"}),sales:k})}return{forecast:m,storeRisks:p,optimalSchedule:g,monthlyTrend:v,avgDailyProductionByType:u}},[e,t]),a=s=>{switch(s){case"critical":return"bg-red-100 text-red-800 border-red-300";case"high":return"bg-orange-100 text-orange-800 border-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:n.jsx(m2,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl",children:"Predictive Analytics"}),n.jsx("p",{className:"text-muted-foreground",children:"AI-powered forecasting and recommendations"})]})]}),n.jsxs(On,{className:"p-6",children:[n.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[n.jsx(Dr,{className:"h-5 w-5 text-purple-600"}),"7-Day Demand Forecast"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3",children:r.forecast.map(s=>n.jsxs("div",{className:`p-4 rounded-lg border-2 ${s.isWeekend?"bg-purple-50 border-purple-200":"bg-gray-50 border-gray-200"}`,children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:s.dayName}),n.jsx("p",{className:"text-sm mb-2",children:new Date(s.date).getDate()}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Expected"}),n.jsx("p",{className:"text-lg",children:s.expectedDemand})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-green-600",children:"Recommended"}),n.jsx("p",{className:"text-lg text-green-600",children:s.recommendedProduction})]})]})]},s.date))})]}),n.jsxs(On,{className:"p-6",children:[n.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[n.jsx(xr,{className:"h-5 w-5 text-orange-600"}),"Stock-out Risk by Store"]}),n.jsx("div",{className:"space-y-3",children:r.storeRisks.map(s=>n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h4",{className:"text-sm",children:s.storeName}),n.jsxs(Lf,{className:`${a(s.riskLevel)} border`,children:[s.riskLevel.toUpperCase()," RISK"]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Current Stock"}),n.jsx("p",{className:"text-lg",children:s.currentStock})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Avg Daily Sales"}),n.jsx("p",{className:"text-lg",children:s.avgDailySales})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Days Until Stock-out"}),n.jsx("p",{className:`text-lg ${s.daysUntilStockout<3?"text-red-600":s.daysUntilStockout<7?"text-orange-600":"text-green-600"}`,children:s.daysUntilStockout})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Recommended Order"}),n.jsx("p",{className:"text-lg text-blue-600",children:s.recommendedOrder})]})]})]},s.storeName))})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(On,{className:"p-6",children:[n.jsx("h3",{className:"text-lg mb-4",children:"Weekly Demand Forecast"}),n.jsx(Zn,{width:"100%",height:300,children:n.jsxs(mi,{data:r.forecast,children:[n.jsx(ba,{strokeDasharray:"3 3"}),n.jsx(Hn,{dataKey:"dayName",tick:{fontSize:12}}),n.jsx(Tn,{tick:{fontSize:12}}),n.jsx(Gr,{}),n.jsx(ka,{}),n.jsx(wr,{dataKey:"expectedDemand",fill:"#8b5cf6",name:"Expected"}),n.jsx(wr,{dataKey:"recommendedProduction",fill:"#10b981",name:"Recommended"})]})})]}),n.jsxs(On,{className:"p-6",children:[n.jsx("h3",{className:"text-lg mb-4",children:"6-Month Sales Trend"}),n.jsx(Zn,{width:"100%",height:300,children:n.jsxs(Eh,{data:r.monthlyTrend,children:[n.jsx(ba,{strokeDasharray:"3 3"}),n.jsx(Hn,{dataKey:"month",tick:{fontSize:12}}),n.jsx(Tn,{tick:{fontSize:12}}),n.jsx(Gr,{}),n.jsx(ka,{}),n.jsx(wi,{type:"monotone",dataKey:"sales",stroke:"#ec4899",strokeWidth:2,name:"Sales ()"})]})})]})]}),n.jsxs(On,{className:"p-6",children:[n.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5 text-blue-600"}),"Optimal Production Schedule"]}),n.jsx("div",{className:"space-y-3",children:r.optimalSchedule.map(s=>n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"text-sm capitalize",children:s.product}),n.jsx(Lf,{className:s.status==="optimal"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800",children:s.status==="optimal"?"OPTIMAL":"INCREASE NEEDED"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[n.jsx("span",{className:"text-muted-foreground",children:"Current"}),n.jsxs("span",{children:[s.current,"/day"]})]}),n.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-purple-500",style:{width:`${s.current/s.recommended*100}%`}})})]}),n.jsx(q7,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{className:"w-24 text-right",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Target"}),n.jsx("p",{className:"text-lg text-green-600",children:s.recommended})]})]})]},s.product))})]})]})}function Rxe({context:e,stores:t}){const[r,a]=M.useState("score"),[s,i]=M.useState("30days"),o=M.useMemo(()=>{const f=s==="7days"?7:s==="30days"?30:90,m=new Date;m.setDate(m.getDate()-f);const p=new Date;p.setDate(p.getDate()-f*2);const g=new Date(m),v=t.map(y=>{const w=e.salesData.filter(J=>J.storeId===y.id&&new Date(J.date)>=m).reduce((J,ae)=>J+(ae.onlineSales||0)+(ae.offlineSales||0),0),k=e.salesData.filter(J=>J.storeId===y.id&&new Date(J.date)>=p&&new Date(J.date)<g).reduce((J,ae)=>J+(ae.onlineSales||0)+(ae.offlineSales||0),0),N=k>0?(w-k)/k*100:w>0?100:0,b=e.stockRequests.filter(J=>J.storeId===y.id&&new Date(J.requestDate)>=m),A=b.length,E=b.filter(J=>J.status==="fulfilled"||J.status==="partially_fulfilled"),S=b.reduce((J,ae)=>J+Object.values(ae.requestedQuantities).reduce((L,H)=>L+H,0),0),_=E.reduce((J,ae)=>J+(ae.fulfilledQuantities?Object.values(ae.fulfilledQuantities).reduce((L,H)=>L+H,0):0),0),C=S>0?_/S*100:0,P=A>0?S/A:0,B=_>0?w/_*(C/100):0,F=Math.min(w/1e5*100,100),O=C,R=Math.max(0,Math.min(N+50,100)),Q=Math.min(B,100),V=F*.35+O*.25+R*.25+Q*.15;return{storeId:y.id,storeName:y.name,totalSales:w,totalRequests:A,fulfillmentRate:C,avgRequestSize:P,salesGrowth:N,efficiency:B,overallScore:V,rank:0}});return v.sort((y,w)=>w.overallScore-y.overallScore),v.forEach((y,w)=>{y.rank=w+1}),r==="sales"?v.sort((y,w)=>w.totalSales-y.totalSales):r==="efficiency"&&v.sort((y,w)=>w.efficiency-y.efficiency),v},[e,t,s,r]),l=M.useMemo(()=>{const f=o.slice(0,3);return[{metric:"Sales",...Object.fromEntries(f.map(m=>[m.storeName,Math.min(m.totalSales/1e5*100,100)]))},{metric:"Fulfillment",...Object.fromEntries(f.map(m=>[m.storeName,m.fulfillmentRate]))},{metric:"Growth",...Object.fromEntries(f.map(m=>[m.storeName,Math.max(0,Math.min(m.salesGrowth+50,100))]))},{metric:"Efficiency",...Object.fromEntries(f.map(m=>[m.storeName,Math.min(m.efficiency,100)]))},{metric:"Requests",...Object.fromEntries(f.map(m=>[m.storeName,Math.min(m.totalRequests/10*100,100)]))}]},[o]),d=f=>f===1?{icon:hj,color:"bg-yellow-100 text-yellow-800 border-yellow-300",label:" 1st"}:f===2?{icon:OE,color:"bg-gray-100 text-gray-800 border-gray-300",label:" 2nd"}:f===3?{icon:OE,color:"bg-orange-100 text-orange-800 border-orange-300",label:" 3rd"}:{icon:m2,color:"bg-blue-100 text-blue-800 border-blue-300",label:`#${f}`},u=o.map(f=>({name:f.storeName,sales:f.totalSales,score:f.overallScore}));return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:n.jsx(hj,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl",children:"Store Performance Comparison"}),n.jsx("p",{className:"text-muted-foreground",children:"Compare and rank store performance metrics"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:s,onChange:f=>i(f.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[n.jsx("option",{value:"7days",children:"Last 7 Days"}),n.jsx("option",{value:"30days",children:"Last 30 Days"}),n.jsx("option",{value:"90days",children:"Last 90 Days"})]}),n.jsxs("select",{value:r,onChange:f=>a(f.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[n.jsx("option",{value:"score",children:"Overall Score"}),n.jsx("option",{value:"sales",children:"Total Sales"}),n.jsx("option",{value:"efficiency",children:"Efficiency"})]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.slice(0,3).map((f,m)=>{const p=d(f.rank),g=p.icon;return n.jsxs(On,{className:"p-6 relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-bl-full"}),n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx(Lf,{className:`${p.color} border text-lg px-3 py-1`,children:p.label}),n.jsx(g,{className:"h-8 w-8 text-purple-600"})]}),n.jsx("h3",{className:"text-xl mb-4",children:f.storeName}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Overall Score"}),n.jsxs("span",{className:"text-purple-600",children:[f.overallScore.toFixed(1),"/100"]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Sales"}),n.jsxs("span",{children:["",f.totalSales.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Growth"}),n.jsxs("span",{className:f.salesGrowth>=0?"text-green-600":"text-red-600",children:[f.salesGrowth>=0?n.jsx(DI,{className:"inline h-4 w-4"}):n.jsx(Uf,{className:"inline h-4 w-4"}),Math.abs(f.salesGrowth).toFixed(1),"%"]})]})]})]})]},f.storeId)})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(On,{className:"p-6",children:[n.jsx("h3",{className:"text-lg mb-4",children:"Multi-dimensional Performance (Top 3)"}),n.jsx(Zn,{width:"100%",height:350,children:n.jsxs(Koe,{data:l,children:[n.jsx(JR,{}),n.jsx(mu,{dataKey:"metric",tick:{fontSize:12}}),n.jsx(fu,{angle:90,domain:[0,100],tick:{fontSize:10}}),n.jsx(Zl,{name:o[0]?.storeName,dataKey:o[0]?.storeName,stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6}),o[1]&&n.jsx(Zl,{name:o[1].storeName,dataKey:o[1].storeName,stroke:"#ec4899",fill:"#ec4899",fillOpacity:.6}),o[2]&&n.jsx(Zl,{name:o[2].storeName,dataKey:o[2].storeName,stroke:"#10b981",fill:"#10b981",fillOpacity:.6}),n.jsx(ka,{})]})})]}),n.jsxs(On,{className:"p-6",children:[n.jsx("h3",{className:"text-lg mb-4",children:"Sales & Performance Score"}),n.jsx(Zn,{width:"100%",height:350,children:n.jsxs(mi,{data:u,children:[n.jsx(ba,{strokeDasharray:"3 3"}),n.jsx(Hn,{dataKey:"name",tick:{fontSize:12},angle:-45,textAnchor:"end",height:100}),n.jsx(Tn,{yAxisId:"left",tick:{fontSize:12}}),n.jsx(Tn,{yAxisId:"right",orientation:"right",tick:{fontSize:12}}),n.jsx(Gr,{}),n.jsx(ka,{}),n.jsx(wr,{yAxisId:"left",dataKey:"sales",fill:"#8b5cf6",name:"Sales ()"}),n.jsx(wr,{yAxisId:"right",dataKey:"score",fill:"#ec4899",name:"Score"})]})})]})]}),n.jsxs(On,{className:"p-6",children:[n.jsx("h3",{className:"text-lg mb-4",children:"Detailed Performance Metrics"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left py-3 px-2",children:"Rank"}),n.jsx("th",{className:"text-left py-3 px-2",children:"Store"}),n.jsx("th",{className:"text-right py-3 px-2",children:"Score"}),n.jsx("th",{className:"text-right py-3 px-2",children:"Sales"}),n.jsx("th",{className:"text-right py-3 px-2",children:"Growth"}),n.jsx("th",{className:"text-right py-3 px-2",children:"Requests"}),n.jsx("th",{className:"text-right py-3 px-2",children:"Fulfillment"}),n.jsx("th",{className:"text-right py-3 px-2",children:"Efficiency"})]})}),n.jsx("tbody",{children:o.map(f=>{const m=d(f.rank);return n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-2",children:n.jsx(Lf,{className:`${m.color} border text-xs`,children:m.label})}),n.jsx("td",{className:"py-3 px-2",children:f.storeName}),n.jsx("td",{className:"text-right py-3 px-2",children:n.jsx("span",{className:"text-purple-600",children:f.overallScore.toFixed(1)})}),n.jsxs("td",{className:"text-right py-3 px-2",children:["",f.totalSales.toLocaleString()]}),n.jsx("td",{className:"text-right py-3 px-2",children:n.jsxs("span",{className:f.salesGrowth>=0?"text-green-600":"text-red-600",children:[f.salesGrowth>=0?"+":"",f.salesGrowth.toFixed(1),"%"]})}),n.jsx("td",{className:"text-right py-3 px-2",children:f.totalRequests}),n.jsx("td",{className:"text-right py-3 px-2",children:n.jsxs("span",{className:f.fulfillmentRate>=90?"text-green-600":f.fulfillmentRate>=70?"text-yellow-600":"text-red-600",children:[f.fulfillmentRate.toFixed(1),"%"]})}),n.jsx("td",{className:"text-right py-3 px-2",children:f.efficiency.toFixed(1)})]},f.storeId)})})]})})]})]})}function Fxe({context:e,productionHouses:t,onNavigateToManageItems:r}){const[a,s]=M.useState(new Date().toISOString().split("T")[0]),[i,o]=M.useState(null),[l,d]=M.useState([]),[u,f]=M.useState(!0),[m,p]=M.useState({}),g=async()=>{try{const N=tu(),{data:{session:b}}=await N.auth.getSession();return b?.access_token||null}catch(N){return console.error("Error getting fresh token:",N),null}};M.useEffect(()=>{(async()=>{const b=await g();if(!b){console.error("No access token available"),f(!1);return}try{const A=await pg(b);d(A)}catch(A){console.error("Error loading production requests:",A)}finally{f(!1)}})()},[]),M.useEffect(()=>{const N=async()=>{const b=await g();if(!b)return;console.log(" Loading production house opening balances..."),console.log("  Production houses count:",t.length),console.log("  Inventory items count:",e.inventoryItems?.length||0);const A=new Date().toISOString().substring(0,7),E={};for(const S of t){console.log(`  Fetching recalibration for ${S.name} (${S.id})...`);try{const _=await el(b,S.id,"production_house");if(console.log(`  Recalibration response for ${S.name}:`,_),_?.record){const C=_.record.date.substring(0,7);if(console.log(`  Recalibration date: ${C}, Current month: ${A}`),C===A){const P={};_.record.items.forEach(B=>{const F=e.inventoryItems?.find(O=>O.id===B.itemId||O.name===B.itemId);if(console.log(`    Item ${B.itemId}: ${F?"Found":"NOT FOUND"}`,F),F){const O=F.name.replace(/_([a-z])/g,R=>R[1].toUpperCase());P[O]=B.actualQuantity,console.log(`    Mapped to ${O} = ${B.actualQuantity}`)}}),E[S.id]=P,console.log(` Loaded opening balance for ${S.name}:`,P)}else console.log(`   Recalibration month ${C} doesn't match current month ${A}`)}else console.log(`   No recalibration found for ${S.name}`)}catch(_){console.error(` Error fetching recalibration for ${S.name}:`,_)}}console.log(" Final opening balances:",E),p(E)};t.length>0&&e.inventoryItems&&e.inventoryItems.length>0?N():console.log(" Skipping opening balance load:",{productionHousesCount:t.length,inventoryItemsCount:e.inventoryItems?.length||0})},[t,e.inventoryItems]);const v=M.useMemo(()=>{if(u)return[];const N=[];return console.log(" Production Houses:",t),console.log(" Production Requests:",l),console.log(" Selected Date:",a),t.forEach(b=>{console.log(`
 Processing house: ${b.name} (${b.id})`);const A=e.productionData.filter(H=>H.productionHouseId===b.id&&H.date<=a),E=l?.filter(H=>{if(!H.deliveredAt||H.status!=="delivered")return!1;let ce;if(H.deliveredAt.includes("/")){const te=H.deliveredAt.split(",")[0].split("/");ce=`${te[2]}-${te[1].padStart(2,"0")}-${te[0].padStart(2,"0")}`}else H.deliveredAt.includes("T")?ce=H.deliveredAt.split("T")[0]:ce=H.deliveredAt.split(" ")[0];const z=e.stores.find(te=>te.id===H.storeId),I=z?.productionHouseId===b.id,Z=ce<=a;return console.log(`     Request ${H.id}: storeId=${H.storeId}, store.productionHouseId=${z?.productionHouseId}, houseId=${b.id}, deliveredDate=${ce}, isForThisHouse=${I}, isBeforeOrOnDate=${Z}, status=${H.status}`),I&&Z})||[];console.log(`   Total delivered requests for ${b.name}: ${E.length}`),E.forEach(H=>{console.log(`    - Request: chicken=${H.chickenMomos}, chickenCheese=${H.chickenCheeseMomos}, deliveredAt=${H.deliveredAt}`)});const S=e.productionData.find(H=>H.productionHouseId===b.id&&H.date===a),_=l?.filter(H=>{if(!H.deliveredAt||H.status!=="delivered")return!1;let ce;if(H.deliveredAt.includes("/")){const I=H.deliveredAt.split(",")[0].split("/");ce=`${I[2]}-${I[1].padStart(2,"0")}-${I[0].padStart(2,"0")}`}else H.deliveredAt.includes("T")?ce=H.deliveredAt.split("T")[0]:ce=H.deliveredAt.split(" ")[0];return e.stores.find(I=>I.id===H.storeId)?.productionHouseId===b.id&&ce===a})||[],C={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0,schezwan:0},P=m[b.id]||{},B={chickenMomo:"chicken",chickenCheeseMomo:"chickenCheese",vegMomo:"veg",cheeseCornMomo:"cheeseCorn",paneerMomo:"paneer",vegKurkureMomo:"vegKurkure",chickenKurkureMomo:"chickenKurkure",schezwanMomo:"schezwan"};Object.keys(P).forEach(H=>{const ce=B[H]||H;ce in C&&(C[ce]=P[H],console.log(`   Applied opening balance: ${H} -> ${ce} = ${P[H]}`))}),A.forEach(H=>{C.chicken+=H.chickenMomos?.final||0,C.chickenCheese+=H.chickenCheeseMomos?.final||0,C.veg+=H.vegMomos?.final||0,C.cheeseCorn+=H.cheeseCornMomos?.final||0,C.paneer+=H.paneerMomos?.final||0,C.vegKurkure+=H.vegKurkureMomos?.final||0,C.chickenKurkure+=H.chickenKurkureMomos?.final||0,C.schezwan+=H.schezwanMomos?.final||0});const F={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0,schezwan:0};E.forEach(H=>{F.chicken+=H.chickenMomos||0,F.chickenCheese+=H.chickenCheeseMomos||0,F.veg+=H.vegMomos||0,F.cheeseCorn+=H.cheeseCornMomos||0,F.paneer+=H.paneerMomos||0,F.vegKurkure+=H.vegKurkureMomos||0,F.chickenKurkure+=H.chickenKurkureMomos||0,F.schezwan+=H.schezwanMomos||0});const O={chicken:S?.chickenMomos?.final||0,chickenCheese:S?.chickenCheeseMomos?.final||0,veg:S?.vegMomos?.final||0,cheeseCorn:S?.cheeseCornMomos?.final||0,paneer:S?.paneerMomos?.final||0,vegKurkure:S?.vegKurkureMomos?.final||0,chickenKurkure:S?.chickenKurkureMomos?.final||0,schezwan:S?.schezwanMomos?.final||0},R={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0,schezwan:0};_.forEach(H=>{R.chicken+=H.chickenMomos||0,R.chickenCheese+=H.chickenCheeseMomos||0,R.veg+=H.vegMomos||0,R.cheeseCorn+=H.cheeseCornMomos||0,R.paneer+=H.paneerMomos||0,R.vegKurkure+=H.vegKurkureMomos||0,R.chickenKurkure+=H.chickenKurkureMomos||0,R.schezwan+=H.schezwanMomos||0});const Q={chicken:{produced:O.chicken,sent:R.chicken,available:Math.max(0,C.chicken-F.chicken),percentage:0},chickenCheese:{produced:O.chickenCheese,sent:R.chickenCheese,available:Math.max(0,C.chickenCheese-F.chickenCheese),percentage:0},veg:{produced:O.veg,sent:R.veg,available:Math.max(0,C.veg-F.veg),percentage:0},cheeseCorn:{produced:O.cheeseCorn,sent:R.cheeseCorn,available:Math.max(0,C.cheeseCorn-F.cheeseCorn),percentage:0},paneer:{produced:O.paneer,sent:R.paneer,available:Math.max(0,C.paneer-F.paneer),percentage:0},vegKurkure:{produced:O.vegKurkure,sent:R.vegKurkure,available:Math.max(0,C.vegKurkure-F.vegKurkure),percentage:0},chickenKurkure:{produced:O.chickenKurkure,sent:R.chickenKurkure,available:Math.max(0,C.chickenKurkure-F.chickenKurkure),percentage:0},schezwan:{produced:O.schezwan,sent:R.schezwan,available:Math.max(0,C.schezwan-F.schezwan),percentage:0}};Object.keys(Q).forEach(H=>{const ce=Q[H];C[H]>0?ce.percentage=ce.available/C[H]*100:ce.percentage=0});const V=Object.values(O).reduce((H,ce)=>H+ce,0),J=S?(S.wastage?.dough||0)+(S.wastage?.stuffing||0)+(S.wastage?.batter||0)+(S.wastage?.coating||0):0,ae=e.productionData.filter(H=>H.productionHouseId===b.id&&H.date===a&&H.approvalStatus==="approved").length,L=e.productionData.filter(H=>H.productionHouseId===b.id&&H.date===a&&H.approvalStatus==="pending").length;N.push({productionHouseId:b.id,productionHouseName:b.name,date:a,stock:Q,totalProduced:V,totalWastage:J,approvedEntries:ae,pendingApproval:L}),console.log(`   Stock entry created for ${b.name}:`,{totalProduced:V,totalWastage:J,availableStock:Q,hasOpeningBalance:Object.keys(P).length>0,openingBalance:P})}),console.log(" Final stocks array:",N),N},[e.productionData,e.stores,l,t,a,m]),y=i?v.filter(N=>N.productionHouseId===i):v,w={chicken:"Chicken Momos",chickenCheese:"Chicken Cheese Momos",veg:"Veg Momos",cheeseCorn:"Cheese Corn Momos",paneer:"Paneer Momos",vegKurkure:"Veg Kurkure Momos",chickenKurkure:"Chicken Kurkure Momos",schezwan:"Schezwan Momos"},k=N=>N>=80?{bg:"bg-purple-50",border:"border-purple-200",bar:"bg-purple-500",text:"text-purple-700"}:N>=60?{bg:"bg-pink-50",border:"border-pink-200",bar:"bg-pink-500",text:"text-pink-700"}:N>=40?{bg:"bg-green-50",border:"border-green-200",bar:"bg-green-500",text:"text-green-700"}:N>=20?{bg:"bg-yellow-50",border:"border-yellow-200",bar:"bg-yellow-500",text:"text-yellow-700"}:{bg:"bg-red-50",border:"border-red-200",bar:"bg-red-500",text:"text-red-700"};return n.jsxs("div",{className:"space-y-6",children:[n.jsx(On,{className:"p-4 bg-gradient-to-r from-orange-50 to-amber-50 border-2 border-orange-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(O9,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-orange-900 mb-1",children:"Dynamic Inventory Items"}),n.jsxs("p",{className:"text-sm text-orange-700 mb-2",children:["You can now add custom production items beyond the default 7 momo types! Manage all items from the ",n.jsx("strong",{children:'"Manage Items"'})," page in the navigation."]}),n.jsx("p",{className:"text-xs text-orange-600",children:" Items can be production house-specific or global (available to all facilities)"})]})]})}),n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl",children:"Production House Stock Status"}),n.jsx("p",{className:"text-muted-foreground",children:"Opening balance + This month produced - Sent to stores (delivered requests)"})]}),n.jsxs("div",{className:"flex gap-2 flex-wrap",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dr,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("input",{type:"date",value:a,onChange:N=>s(N.target.value),max:new Date().toISOString().split("T")[0],className:"px-3 py-2 border rounded-lg bg-background"})]}),n.jsxs("select",{value:i||"all",onChange:N=>o(N.target.value==="all"?null:N.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[n.jsx("option",{value:"all",children:"All Production Houses"}),t.map(N=>n.jsx("option",{value:N.id,children:N.name},N.id))]}),r&&(e.user?.role==="manager"||e.user?.role==="cluster_head")&&n.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg",children:[n.jsx(rr,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-semibold",children:"Manage Items"})]})]})]}),y.map(N=>n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs(On,{className:"p-6 bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(rr,{className:"h-5 w-5 text-orange-600"}),n.jsx("p",{className:"text-sm text-orange-800",children:"Total Production"})]}),n.jsx("p",{className:"text-3xl text-orange-900 mb-1",children:N.totalProduced.toLocaleString()}),n.jsx("p",{className:"text-xs text-orange-700",children:"pieces"})]}),n.jsxs(On,{className:"p-6 bg-gradient-to-br from-red-50 to-red-100 border-red-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(p2,{className:"h-5 w-5 text-red-600"}),n.jsx("p",{className:"text-sm text-red-800",children:"Total Wastage"})]}),n.jsx("p",{className:"text-3xl text-red-900 mb-1",children:N.totalWastage.toFixed(2)}),n.jsx("p",{className:"text-xs text-red-700",children:"kg"})]}),n.jsxs(On,{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(hn,{className:"h-5 w-5 text-green-600"}),n.jsx("p",{className:"text-sm text-green-800",children:"Approved Entries"})]}),n.jsx("p",{className:"text-3xl text-green-900 mb-1",children:N.approvedEntries}),n.jsx("p",{className:"text-xs text-green-700",children:"records"})]}),n.jsxs(On,{className:"p-6 bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Dr,{className:"h-5 w-5 text-yellow-600"}),n.jsx("p",{className:"text-sm text-yellow-800",children:"Pending Approval"})]}),n.jsx("p",{className:"text-3xl text-yellow-900 mb-1",children:N.pendingApproval}),n.jsx("p",{className:"text-xs text-yellow-700",children:"records"})]})]}),n.jsxs(On,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Pn,{className:"h-5 w-5 text-orange-600"}),n.jsxs("h3",{className:"text-lg",children:[N.productionHouseName," - Stock Status"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Object.entries(N.stock).map(([b,A])=>{const E=k(A.percentage);return n.jsxs("div",{className:`p-4 rounded-lg border-2 ${E.bg} ${E.border}`,children:[n.jsx("h4",{className:"text-sm mb-3",children:w[b]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-muted-foreground",children:"This Month Produced:"}),n.jsx("span",{className:E.text,children:A.produced})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-muted-foreground",children:"Sent to Stores:"}),n.jsx("span",{className:"text-red-600",children:A.sent})]}),n.jsxs("div",{className:"border-t pt-2",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"",children:"Stock Available:"}),n.jsx("span",{className:`text-lg ${E.text}`,children:A.available})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"flex justify-between text-xs",children:n.jsxs("span",{children:[A.percentage.toFixed(0),"% remaining"]})}),n.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full ${E.bar} transition-all duration-300`,style:{width:`${Math.min(A.percentage,100)}%`}})})]})]})]})]},b)})})]})]},N.productionHouseId)),y.length===0&&n.jsxs(On,{className:"p-12 text-center",children:[n.jsx(Pn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("h3",{className:"text-lg mb-2",children:"No Production Data"}),n.jsx("p",{className:"text-muted-foreground",children:"No production data available for the selected date and production house"})]})]})}function EI({context:e,stores:t,onNavigateToManageItems:r}){const[a,s]=useState("dashboard");return n.jsx("div",{className:"min-h-screen bg-background p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl",children:"Advanced Inventory Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Comprehensive inventory tracking, analytics, and reporting system"})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg",children:n.jsx(rr,{className:"h-6 w-6 text-white"})})})]}),n.jsxs(Tabs,{value:a,onValueChange:i=>s(i),className:"space-y-6",children:[n.jsxs(TabsList,{className:"grid grid-cols-7 w-full",children:[n.jsxs(TabsTrigger,{value:"dashboard",className:"flex items-center gap-2",children:[n.jsx(oj,{className:"h-4 w-4"}),"Dashboard"]}),n.jsxs(TabsTrigger,{value:"stock-status",className:"flex items-center gap-2",children:[n.jsx(rr,{className:"h-4 w-4"}),"Stock"]}),n.jsxs(TabsTrigger,{value:"alerts",className:"flex items-center gap-2",children:[n.jsx(lj,{className:"h-4 w-4"}),"Alerts"]}),n.jsxs(TabsTrigger,{value:"requests",className:"flex items-center gap-2",children:[n.jsx($m,{className:"h-4 w-4"}),"Requests"]}),n.jsxs(TabsTrigger,{value:"reports",className:"flex items-center gap-2",children:[n.jsx(vi,{className:"h-4 w-4"}),"Reports"]}),n.jsxs(TabsTrigger,{value:"predictive",className:"flex items-center gap-2",children:[n.jsx(m2,{className:"h-4 w-4"}),"Forecast"]}),n.jsxs(TabsTrigger,{value:"performance",className:"flex items-center gap-2",children:[n.jsx(hj,{className:"h-4 w-4"}),"Rankings"]})]}),n.jsx(TabsContent,{value:"dashboard",children:n.jsx(InventoryDashboard,{context:e,stores:t})}),n.jsx(TabsContent,{value:"stock-status",children:n.jsx(Fxe,{context:e,productionHouses:e.productionHouses,onNavigateToManageItems:r})}),n.jsx(TabsContent,{value:"alerts",children:n.jsx(InventoryAlerts,{context:e,stores:t})}),n.jsx(TabsContent,{value:"requests",children:n.jsx(EnhancedProductionRequests,{context:e,stores:t})}),n.jsx(TabsContent,{value:"reports",children:n.jsx(ReportsVisualization,{context:e,stores:t})}),n.jsx(TabsContent,{value:"predictive",children:n.jsx(Mxe,{context:e,stores:t})}),n.jsx(TabsContent,{value:"performance",children:n.jsx(Rxe,{context:e,stores:t})})]})]})})}function CI({context:e}){const[t,r]=M.useState([]),[a,s]=M.useState(!0),[i,o]=M.useState(!1),[l,d]=M.useState(null),[u,f]=M.useState(null),[m,p]=M.useState(null),[g,v]=M.useState({displayName:"",category:"finished_product",unit:"pieces",linkedEntityType:"global",linkedEntityId:""}),[y,w]=M.useState("all"),[k,N]=M.useState("all");M.useEffect(()=>{b()},[]);const b=async()=>{try{s(!0);const O=await fetch(`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items`,{headers:{Authorization:`Bearer ${zn}`}});if(!O.ok)throw new Error("Failed to load inventory items");const R=await O.json();r(R.items||[])}catch(O){console.error("Error loading items:",O),f(O instanceof Error?O.message:"Failed to load items")}finally{s(!1)}},A=async O=>{O.preventDefault(),f(null),p(null);try{const Q={name:g.displayName.toLowerCase().replace(/\s+/g,"_"),displayName:g.displayName,category:g.category,unit:g.unit,linkedEntityType:g.linkedEntityType,linkedEntityId:g.linkedEntityType==="global"?void 0:g.linkedEntityId,userId:e.user?.employeeId||"unknown"},V=l?`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items/${l}`:`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items`,J=await fetch(V,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${zn}`},body:JSON.stringify(Q)});if(!J.ok){const ae=await J.json();throw new Error(ae.error||"Failed to save item")}p(l?"Item updated successfully!":"Item created successfully!"),o(!1),d(null),v({displayName:"",category:"finished_product",unit:"pieces",linkedEntityType:"global",linkedEntityId:""}),await b()}catch(R){console.error("Error saving item:",R),f(R instanceof Error?R.message:"Failed to save item")}},E=O=>{d(O.id),v({displayName:O.displayName,category:O.category,unit:O.unit,linkedEntityType:O.linkedEntityType,linkedEntityId:O.linkedEntityId||""}),o(!0)},S=async O=>{if(confirm("Are you sure you want to delete this item?"))try{if(!(await fetch(`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items/${O}`,{method:"DELETE",headers:{Authorization:`Bearer ${zn}`}})).ok)throw new Error("Failed to delete item");p("Item deleted successfully!"),await b()}catch(R){console.error("Error deleting item:",R),f(R instanceof Error?R.message:"Failed to delete item")}},_=async()=>{if(confirm("This will add the 7 default momo types as global items. Continue?"))try{if(s(!0),!(await fetch(`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items/initialize-defaults`,{method:"POST",headers:{Authorization:`Bearer ${zn}`}})).ok)throw new Error("Failed to initialize defaults");p("Default items initialized successfully!"),await b()}catch(O){console.error("Error initializing defaults:",O),f(O instanceof Error?O.message:"Failed to initialize defaults")}finally{s(!1)}},C=()=>{o(!1),d(null),v({displayName:"",category:"finished_product",unit:"pieces",linkedEntityType:"global",linkedEntityId:""})},P=t.filter(O=>!(y!=="all"&&O.category!==y||k!=="all"&&O.linkedEntityType!==k)),B=O=>{switch(O){case"finished_product":return"bg-purple-100 text-purple-800";case"raw_material":return"bg-blue-100 text-blue-800";case"sauce_chutney":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},F=O=>{switch(O){case"store":return n.jsx(Li,{className:"w-4 h-4"});case"production_house":return n.jsx(Pn,{className:"w-4 h-4"});default:return n.jsx(rr,{className:"w-4 h-4"})}};return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Inventory Items Master"}),n.jsx("p",{className:"text-gray-600",children:"Manage all inventory items for stores and production houses"})]}),n.jsxs("div",{className:"flex gap-3",children:[t.length===0&&n.jsx("button",{onClick:_,disabled:a,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all disabled:opacity-50",children:"Initialize Defaults"}),n.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg transition-all",children:[n.jsx(xo,{className:"w-5 h-5"}),"Add New Item"]})]})]}),u&&n.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-red-600"}),n.jsx("p",{className:"text-red-800",children:u}),n.jsx("button",{onClick:()=>f(null),className:"ml-auto",children:n.jsx(Kr,{className:"w-4 h-4 text-red-600"})})]}),m&&n.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-3",children:[n.jsx(ho,{className:"w-5 h-5 text-green-600"}),n.jsx("p",{className:"text-green-800",children:m}),n.jsx("button",{onClick:()=>p(null),className:"ml-auto",children:n.jsx(Kr,{className:"w-4 h-4 text-green-600"})})]}),i&&n.jsxs(On,{className:"p-6 border-2 border-purple-200",children:[n.jsx("h2",{className:"text-xl mb-4",children:l?"Edit Item":"Add New Item"}),n.jsxs("form",{onSubmit:A,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Display Name *"}),n.jsx("input",{type:"text",value:g.displayName,onChange:O=>v({...g,displayName:O.target.value}),placeholder:"e.g., Schezwan Momo",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Category *"}),n.jsxs("select",{value:g.category,onChange:O=>v({...g,category:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"finished_product",children:"Finished Product"}),n.jsx("option",{value:"raw_material",children:"Raw Material"}),n.jsx("option",{value:"sauce_chutney",children:"Sauce/Chutney"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Unit *"}),n.jsxs("select",{value:g.unit,onChange:O=>v({...g,unit:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"pieces",children:"Pieces"}),n.jsx("option",{value:"kg",children:"Kilograms (kg)"}),n.jsx("option",{value:"liters",children:"Liters"}),n.jsx("option",{value:"grams",children:"Grams"}),n.jsx("option",{value:"ml",children:"Milliliters (ml)"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Link To *"}),n.jsxs("select",{value:g.linkedEntityType,onChange:O=>v({...g,linkedEntityType:O.target.value,linkedEntityId:""}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"global",children:"All (Global)"}),n.jsx("option",{value:"store",children:"Specific Store"}),n.jsx("option",{value:"production_house",children:"Specific Production House"})]})]}),g.linkedEntityType==="store"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Select Store *"}),n.jsxs("select",{value:g.linkedEntityId,onChange:O=>v({...g,linkedEntityId:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"",children:"-- Select Store --"}),e.stores?.map(O=>n.jsx("option",{value:O.id,children:O.name},O.id))]})]}),g.linkedEntityType==="production_house"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Select Production House *"}),n.jsxs("select",{value:g.linkedEntityId,onChange:O=>v({...g,linkedEntityId:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"",children:"-- Select Production House --"}),e.productionHouses?.map(O=>n.jsx("option",{value:O.id,children:O.name},O.id))]})]})]}),n.jsxs("div",{className:"flex gap-3 justify-end",children:[n.jsx("button",{type:"button",onClick:C,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg",children:l?"Update Item":"Add Item"})]})]})]}),n.jsx(On,{className:"p-4",children:n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Filter by Category"}),n.jsxs("select",{value:y,onChange:O=>w(O.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[n.jsx("option",{value:"all",children:"All Categories"}),n.jsx("option",{value:"finished_product",children:"Finished Products"}),n.jsx("option",{value:"raw_material",children:"Raw Materials"}),n.jsx("option",{value:"sauce_chutney",children:"Sauces/Chutneys"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Filter by Type"}),n.jsxs("select",{value:k,onChange:O=>N(O.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[n.jsx("option",{value:"all",children:"All Types"}),n.jsx("option",{value:"global",children:"Global Items"}),n.jsx("option",{value:"store",children:"Store Specific"}),n.jsx("option",{value:"production_house",children:"Production House Specific"})]})]})]})}),a?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"inline-block w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading items..."})]}):P.length===0?n.jsxs(On,{className:"p-12 text-center",children:[n.jsx(rr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl text-gray-600 mb-2",children:"No items found"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first inventory item"}),t.length===0&&n.jsx("button",{onClick:_,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg",children:"Initialize Default Items"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(O=>n.jsxs(On,{className:"p-4 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[F(O.linkedEntityType),n.jsx("h3",{className:"font-semibold text-gray-900",children:O.displayName})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>E(O),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:n.jsx(Pi,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>S(O.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:n.jsx(ls,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lf,{className:B(O.category),children:O.category.replace("_"," ").toUpperCase()}),n.jsxs("span",{className:"text-gray-500",children:[" ",O.unit]})]}),n.jsxs("div",{className:"text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Scope:"})," ",O.linkedEntityType==="global"?"All Entities":O.linkedEntityType==="store"?`Store: ${e.stores?.find(R=>R.id===O.linkedEntityId)?.name||"Unknown"}`:`Production House: ${e.productionHouses?.find(R=>R.id===O.linkedEntityId)?.name||"Unknown"}`]}),n.jsxs("div",{className:"text-xs text-gray-400 pt-2 border-t",children:["Created: ",new Date(O.createdAt).toLocaleDateString()]})]})]},O.id))}),n.jsx(On,{className:"p-6 bg-gradient-to-r from-purple-50 to-pink-50",children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl text-purple-600",children:t.filter(O=>O.isActive).length}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total Items"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl text-blue-600",children:t.filter(O=>O.linkedEntityType==="global").length}),n.jsx("div",{className:"text-sm text-gray-600",children:"Global Items"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl text-green-600",children:t.filter(O=>O.linkedEntityType==="store").length}),n.jsx("div",{className:"text-sm text-gray-600",children:"Store Specific"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl text-orange-600",children:t.filter(O=>O.linkedEntityType==="production_house").length}),n.jsx("div",{className:"text-sm text-gray-600",children:"Production House"})]})]})})]})}function AI(){const e=M.useRef(""),t=M.useRef(null);return M.useEffect(()=>{console.log(" Stock Request Reminder Scheduler initialized");const r=async()=>{const a=new Date,s=a.getHours(),i=a.toISOString().split("T")[0];if(s===15&&e.current!==i){console.log(" 3PM - Time to send stock request reminders!");try{const o=await fetch(`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d/send-stock-request-reminders`,{method:"POST",headers:{Authorization:`Bearer ${zn}`,"Content-Type":"application/json"}});if(o.ok){const l=await o.json();console.log(" Stock request reminders sent successfully:",l),e.current=i}else console.error(" Failed to send stock request reminders:",o.statusText)}catch(o){console.error(" Error sending stock request reminders:",o)}}};return t.current=setInterval(r,900*1e3),r(),()=>{t.current&&clearInterval(t.current)}},[]),null}function $xe({context:e}){const[t,r]=M.useState(!1),[a,s]=M.useState(!0),i=e.inventory.filter(l=>!l.storeId);if(!e.user?.storeId||i.length===0||!a)return null;const o=async()=>{const l=[...new Set(i.map(d=>d.date))].sort();if(confirm(`Found ${i.length} inventory items without a store assignment.

Dates: ${l.join(", ")}

Assign them ALL to your current store (${e.user?.storeId})?`)){r(!0);try{const d=e.user?.accessToken;if(!d)throw new Error("No access token");let u=0,f=0;for(const m of i)try{const p=await fetch(`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory/${m.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({...m,storeId:e.user?.storeId})});p.ok?u++:(f++,console.error(`Failed to update item ${m.id}:`,await p.text()))}catch(p){f++,console.error(`Error updating item ${m.id}:`,p)}u>0?(alert(` Successfully assigned ${u} inventory items to your store!

Reloading page...`),window.location.reload()):alert(" Failed to update items. Please try again or contact support.")}catch(d){console.error("Error fixing legacy inventory:",d),alert("Error: "+(d instanceof Error?d.message:"Unknown error"))}finally{r(!1)}}};return n.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50 animate-bounce",children:n.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-4 rounded-lg shadow-2xl border-4 border-yellow-300",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(yn,{className:"w-6 h-6 animate-pulse"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-lg",children:"Legacy Data Found!"}),n.jsxs("p",{className:"text-sm text-yellow-100",children:[i.length," inventory items need store assignment"]})]}),n.jsx("button",{onClick:o,disabled:t,className:"ml-4 bg-white text-orange-600 px-4 py-2 rounded-lg font-bold hover:bg-yellow-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:t?n.jsxs(n.Fragment,{children:[n.jsx(gi,{className:"w-4 h-4 animate-spin"}),"Fixing..."]}):"Fix Now"}),n.jsx("button",{onClick:()=>s(!1),className:"ml-2 text-yellow-100 hover:text-white",children:""})]})})})}function Lxe({context:e}){const[t,r]=M.useState(!1),[a,s]=M.useState(!0),i=e.inventory.filter(l=>!l.itemName||l.itemName.trim()==="");if(i.length===0||!a||!e.user)return null;const o=async()=>{const l=i.map((d,u)=>`${u+1}. Category: ${d.category}, Date: ${d.date}, Cost: ${d.totalCost?.toFixed(2)||"0.00"}`).join(`
`);if(confirm(` Found ${i.length} inventory items with missing names:

${l}

These items cannot be properly displayed or tracked.

 These items will be DELETED because they have no name to identify them.

Continue?`)){r(!0);try{const d=e.user?.accessToken;if(!d)throw new Error("No access token");let u=0,f=0;for(const m of i)try{const p=await fetch(`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory/${m.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${d}`}});p.ok?u++:(f++,console.error(`Failed to delete item ${m.id}:`,await p.text()))}catch(p){f++,console.error(`Error deleting item ${m.id}:`,p)}u>0?(alert(` Successfully removed ${u} invalid inventory items!\\n\\nReloading page...`),window.location.reload()):alert(" Failed to clean up items. Please try again or contact support.")}catch(d){console.error("Error fixing missing item names:",d),alert("Error: "+(d instanceof Error?d.message:"Unknown error"))}finally{r(!1)}}};return n.jsx("div",{className:"fixed top-32 left-1/2 transform -translate-x-1/2 z-50",children:n.jsx("div",{className:"bg-gradient-to-r from-red-500 to-pink-500 text-white px-6 py-4 rounded-lg shadow-2xl border-4 border-red-300",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(yn,{className:"w-6 h-6 animate-pulse"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-lg",children:"Invalid Data Detected!"}),n.jsxs("p",{className:"text-sm text-red-100",children:[i.length," inventory items have missing names"]})]}),n.jsx("button",{onClick:o,disabled:t,className:"ml-4 bg-white text-red-600 px-4 py-2 rounded-lg font-bold hover:bg-red-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:t?n.jsxs(n.Fragment,{children:[n.jsx(gi,{className:"w-4 h-4 animate-spin"}),"Cleaning..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ls,{className:"w-4 h-4"}),"Clean Up Invalid Items"]})}),n.jsx("button",{onClick:()=>s(!1),className:"ml-2 text-white hover:text-red-100 font-bold text-xl",title:"Dismiss",children:""})]})})})}function Bxe({context:e}){const[t,r]=M.useState(!1),[a,s]=M.useState(!0),[i,o]=M.useState({current:0,total:0}),l=e.inventory.filter(u=>{const f=u.costPerUnit.toString().split(".")[1]?.length>2||u.totalCost.toString().split(".")[1]?.length>2||u.quantity.toString().split(".")[1]?.length>2,m=u.costPerUnit.toString().includes("e-")||u.totalCost.toString().includes("e-")||u.quantity.toString().includes("e-")||/\d{10,}/.test(u.costPerUnit.toString())||/\d{10,}/.test(u.totalCost.toString())||/\d{10,}/.test(u.quantity.toString());return f||m});if(l.length===0||!a||!e.user)return null;const d=async()=>{if(confirm(` Found ${l.length} inventory items with floating-point precision issues.

These items have very long decimal values that make them hard to read.

 This will round all numbers to 2 decimal places.

Continue?`)){r(!0),o({current:0,total:l.length});try{const u=e.user?.accessToken;if(!u)throw new Error("No access token");let f=0,m=0;for(let p=0;p<l.length;p++){const g=l[p];o({current:p+1,total:l.length});try{const v={...g,quantity:Math.round(g.quantity*100)/100,costPerUnit:Math.round(g.costPerUnit*100)/100,totalCost:Math.round(g.totalCost*100)/100};console.log(`Fixing item ${g.id}:`,{before:{quantity:g.quantity,costPerUnit:g.costPerUnit,totalCost:g.totalCost},after:{quantity:v.quantity,costPerUnit:v.costPerUnit,totalCost:v.totalCost}});const y=await fetch(`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory/${g.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify(v)});if(y.ok)f++;else{m++;const w=await y.text();console.error(`Failed to fix item ${g.id}:`,w)}}catch(v){m++,console.error(`Error fixing item ${g.id}:`,v)}}f>0?(alert(` Successfully fixed ${f} inventory items!

${m>0?` ${m} items failed to update.

`:""}Reloading page...`),window.location.reload()):alert(" Failed to fix items. Please try again or contact support.")}catch(u){console.error("Error fixing floating point precision:",u),alert("Error: "+(u instanceof Error?u.message:"Unknown error"))}finally{r(!1),o({current:0,total:0})}}};return n.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50 max-w-xl",children:n.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-4 rounded-lg shadow-2xl border-4 border-blue-300",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xr,{className:"w-6 h-6 animate-pulse"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-bold text-lg",children:"Floating-Point Precision Issue Detected!"}),n.jsxs("p",{className:"text-sm text-blue-100",children:[l.length," inventory items have very long decimal values"]}),t&&n.jsxs("div",{className:"mt-2",children:[n.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:n.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${i.current/i.total*100}%`}})}),n.jsxs("p",{className:"text-xs text-blue-100 mt-1",children:["Fixing ",i.current," of ",i.total,"..."]})]})]}),n.jsx("button",{onClick:d,disabled:t,className:"ml-4 bg-white text-blue-600 px-4 py-2 rounded-lg font-bold hover:bg-blue-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap",children:t?n.jsxs(n.Fragment,{children:[n.jsx(gi,{className:"w-4 h-4 animate-spin"}),"Fixing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(UB,{className:"w-4 h-4"}),"Fix Precision Issues"]})}),!t&&n.jsx("button",{onClick:()=>s(!1),className:"ml-2 text-white hover:text-blue-100 font-bold text-xl",title:"Dismiss",children:""})]})})})}function Uxe({context:e}){const[t,r]=M.useState(!1),[a,s]=M.useState(!1),[i,o]=M.useState(null),[l,d]=M.useState(null),[u,f]=M.useState(!1),[m,p]=M.useState(null),g=async()=>{r(!0),o(null);try{const k={exportDate:new Date().toISOString(),exportDateIST:S2(new Date().toISOString()),version:"1.0",data:{inventory:e.inventory||[],overheads:e.overheads||[],fixedCosts:e.fixedCosts||[],sales:e.salesData||[],categorySalesData:e.categorySalesData||[],productionData:e.productionData||[],productionHouses:e.productionHouses||[],stockRequests:e.stockRequests||[],productionRequests:e.productionRequests||[],stores:e.stores||[],inventoryItems:e.inventoryItems||[]},metadata:{totalInventoryItems:(e.inventory||[]).length,totalOverheadItems:(e.overheads||[]).length,totalFixedCostItems:(e.fixedCosts||[]).length,totalSalesRecords:(e.salesData||[]).length,totalCategorySalesData:(e.categorySalesData||[]).length,totalProductionRecords:(e.productionData||[]).length,totalProductionHouses:(e.productionHouses||[]).length,totalStockRequests:(e.stockRequests||[]).length,totalProductionRequests:(e.productionRequests||[]).length,totalStores:(e.stores||[]).length,totalInventoryItemTypes:(e.inventoryItems||[]).length}},N=new Blob([JSON.stringify(k,null,2)],{type:"application/json"}),b=URL.createObjectURL(N),A=document.createElement("a");A.href=b,A.download=`bhandar-ims-backup-${os()}-${Date.now()}.json`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(b),o({type:"success",message:`Backup created successfully! Downloaded ${Object.values(k.metadata).reduce((E,S)=>E+S,0)} total records.`})}catch(k){console.error("Export error:",k),o({type:"error",message:"Failed to export data. Please try again."})}finally{r(!1)}},v=k=>{const N=k.target.files?.[0];if(N){if(N.type!=="application/json"){d({type:"error",message:"Please select a valid JSON backup file."});return}p(N),f(!0),d(null)}},y=async()=>{if(!(!m||!e.user)){s(!0),d(null),f(!1);try{const k=await m.text(),N=JSON.parse(k);if(!N.data||!N.version)throw new Error("Invalid backup file format");let b={inventory:0,overheads:0,fixedCosts:0,sales:0,categorySalesData:0,productionData:0,productionHouses:0,stockRequests:0,productionRequests:0,stores:0,inventoryItems:0};if(N.data.inventory)for(const E of N.data.inventory)try{await e.addInventoryItem(E),b.inventory++}catch(S){console.error("Error importing inventory item:",S)}if(N.data.overheads)for(const E of N.data.overheads)try{await e.addOverheadItem(E),b.overheads++}catch(S){console.error("Error importing overhead:",S)}if(N.data.fixedCosts)for(const E of N.data.fixedCosts)try{await e.addFixedCostItem(E),b.fixedCosts++}catch(S){console.error("Error importing fixed cost:",S)}if(N.data.sales)for(const E of N.data.sales)try{await e.addSalesData(E),b.sales++}catch(S){console.error("Error importing sale:",S)}if(N.data.categorySalesData)for(const E of N.data.categorySalesData)try{await(void 0)(e.user.accessToken,E),b.categorySalesData++}catch(S){console.error("Error importing category sales data:",S)}if(N.data.productionData)for(const E of N.data.productionData)try{await e.addProductionData(E),b.productionData++}catch(S){console.error("Error importing production data:",S)}if(N.data.productionHouses)for(const E of N.data.productionHouses)try{await e.addProductionHouse(E),b.productionHouses++}catch(S){console.error("Error importing production house:",S)}if(N.data.stockRequests)for(const E of N.data.stockRequests)try{const{fulfilledQuantities:S,status:_,fulfilledBy:C,fulfilledByName:P,fulfillmentDate:B,notes:F,...O}=E;await e.createStockRequest(O),b.stockRequests++}catch(S){console.error("Error importing stock request:",S)}if(N.data.productionRequests)for(const E of N.data.productionRequests)try{await k2(e.user.accessToken,E),b.productionRequests++}catch(S){console.error("Error importing production request:",S)}if(N.data.stores)for(const E of N.data.stores)try{await v2(e.user.accessToken,E),b.stores++}catch(S){console.error("Error importing store:",S)}if(N.data.inventoryItems)for(const E of N.data.inventoryItems)try{await(void 0)(e.user.accessToken,E),b.inventoryItems++}catch(S){console.error("Error importing inventory item type:",S)}const A=Object.values(b).reduce((E,S)=>E+S,0);d({type:"success",message:`Successfully imported ${A} records! Page will reload in 3 seconds...`}),setTimeout(()=>{window.location.reload()},3e3)}catch(k){console.error("Import error:",k),d({type:"error",message:`Failed to import data: ${k instanceof Error?k.message:"Unknown error"}`})}finally{s(!1),p(null)}}},w=e.inventory.length+e.overheads.length+e.fixedCosts.length+e.salesData.length+e.categorySalesData.length+e.productionData.length+e.productionHouses.length+e.stockRequests.length+e.productionRequests.length+e.stores.length+e.inventoryItems.length;return n.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(oh,{className:"w-8 h-8"}),n.jsx("h1",{className:"text-2xl font-bold",children:"Backup & Restore"})]}),n.jsx("p",{className:"text-purple-100",children:"Protect your data by creating regular backups. Export your data to JSON files and restore when needed."})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(E9,{className:"w-5 h-5 text-blue-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Current Database"})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Inventory Items"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.inventory.length})]}),n.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Overhead Costs"}),n.jsx("p",{className:"text-2xl font-bold text-orange-600",children:e.overheads.length})]}),n.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Fixed Costs"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.fixedCosts.length})]}),n.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Sales Records"}),n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:e.salesData.length})]}),n.jsxs("div",{className:"bg-pink-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Category Sales Data"}),n.jsx("p",{className:"text-2xl font-bold text-pink-600",children:e.categorySalesData.length})]}),n.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Production Data"}),n.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:e.productionData.length})]}),n.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Production Houses"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:e.productionHouses.length})]}),n.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Stock Requests"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:e.stockRequests.length})]}),n.jsxs("div",{className:"bg-teal-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Production Requests"}),n.jsx("p",{className:"text-2xl font-bold text-teal-600",children:e.productionRequests.length})]}),n.jsxs("div",{className:"bg-cyan-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Stores"}),n.jsx("p",{className:"text-2xl font-bold text-cyan-600",children:e.stores.length})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Inventory Item Types"}),n.jsx("p",{className:"text-2xl font-bold text-gray-600",children:e.inventoryItems.length})]})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:n.jsxs("p",{className:"text-lg text-gray-900",children:[n.jsx("span",{className:"font-semibold",children:"Total Records:"})," ",w.toLocaleString()]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(ws,{className:"w-5 h-5 text-green-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Export Data (Create Backup)"})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsx("p",{className:"font-semibold mb-1",children:" Backup Best Practices:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[n.jsx("li",{children:"Create backups daily or after important data entry"}),n.jsx("li",{children:"Store backup files in multiple locations (Google Drive, external hard drive, etc.)"}),n.jsx("li",{children:"Name files with dates for easy identification"}),n.jsx("li",{children:"Test restoring from backups periodically"})]})]})]})}),n.jsx("button",{onClick:g,disabled:t||w===0,className:"w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-lg font-semibold",children:t?n.jsxs(n.Fragment,{children:[n.jsx(pc,{className:"w-5 h-5 animate-spin"}),"Creating Backup..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ws,{className:"w-5 h-5"}),"Download Backup (",w," records)"]})}),i&&n.jsxs("div",{className:`mt-4 p-4 rounded-lg flex items-start gap-3 ${i.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[i.type==="success"?n.jsx(zt,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}):n.jsx(xr,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:`text-sm ${i.type==="success"?"text-green-800":"text-red-800"}`,children:i.message})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(zl,{className:"w-5 h-5 text-orange-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Import Data (Restore Backup)"})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-yellow-800",children:[n.jsx("p",{className:"font-semibold mb-1",children:" Important Warning:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[n.jsxs("li",{children:["Importing will ",n.jsx("strong",{children:"ADD"})," data from the backup file to your current database"]}),n.jsx("li",{children:"This may create duplicate records if the same data already exists"}),n.jsx("li",{children:"Create a backup of your current data before importing"}),n.jsx("li",{children:"Only use backup files created by this system"})]})]})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("input",{type:"file",accept:".json",onChange:v,disabled:a,className:"w-full px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-orange-400 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),m&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Selected file:"}),n.jsx("p",{className:"text-gray-900 font-medium",children:m.name}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(m.size/1024).toFixed(2)," KB"]})]})]}),l&&n.jsxs("div",{className:`mt-4 p-4 rounded-lg flex items-start gap-3 ${l.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[l.type==="success"?n.jsx(zt,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}):n.jsx(xr,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:`text-sm ${l.type==="success"?"text-green-800":"text-red-800"}`,children:l.message})]})]}),u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(xr,{className:"w-6 h-6 text-orange-600"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Confirm Import"})]}),n.jsxs("div",{className:"space-y-3 mb-6",children:[n.jsx("p",{className:"text-gray-700",children:"Are you sure you want to import data from this backup file?"}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3",children:n.jsxs("p",{className:"text-sm text-yellow-800",children:[n.jsx("strong",{children:"Warning:"})," This will add all records from the backup file to your current database. Make sure you've created a backup of your current data first!"]})}),n.jsx("div",{className:"bg-gray-50 rounded p-3",children:n.jsx("p",{className:"text-sm text-gray-600 font-medium",children:m?.name})})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{f(!1),p(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:y,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center gap-2",children:[n.jsx(zl,{className:"w-4 h-4"}),"Import Data"]})]})]})}),n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl shadow-lg p-6",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Dr,{className:"w-6 h-6 text-purple-600 flex-shrink-0 mt-1"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:" Recommended Backup Schedule"}),n.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-purple-600 font-bold",children:""}),n.jsxs("span",{children:[n.jsx("strong",{children:"Daily:"})," At the end of each business day (especially after sales entry)"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-purple-600 font-bold",children:""}),n.jsxs("span",{children:[n.jsx("strong",{children:"Weekly:"})," Every Sunday for weekly records"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-purple-600 font-bold",children:""}),n.jsxs("span",{children:[n.jsx("strong",{children:"Monthly:"})," On the last day of each month before monthly reports"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-purple-600 font-bold",children:""}),n.jsxs("span",{children:[n.jsx("strong",{children:"Before Major Changes:"})," Always backup before bulk edits or deletions"]})]})]})]})]})})]})}function sS(){return"serviceWorker"in navigator&&"PushManager"in window}const Hxe=`
// Service Worker for Push Notifications
self.addEventListener('install', (event) => {
  console.log('Service Worker installed');
  self.skipWaiting();
});

self.addEventListener('activate', (event) => {
  console.log('Service Worker activated');
  event.waitUntil(clients.claim());
});

self.addEventListener('push', (event) => {
  console.log('Push notification received:', event);
  
  let notificationData = {
    title: 'Bhandar-IMS',
    body: 'You have a new notification',
    icon: '/icon-192x192.png',
    badge: '/badge-72x72.png',
    tag: 'bhandar-notification',
    requireInteraction: false,
  };

  if (event.data) {
    try {
      const data = event.data.json();
      notificationData = {
        ...notificationData,
        title: data.title || notificationData.title,
        body: data.message || data.body || notificationData.body,
        icon: data.icon || notificationData.icon,
        tag: data.tag || notificationData.tag,
        data: data,
      };
    } catch (e) {
      console.error('Error parsing push data:', e);
      notificationData.body = event.data.text();
    }
  }

  event.waitUntil(
    self.registration.showNotification(notificationData.title, {
      body: notificationData.body,
      icon: notificationData.icon,
      badge: notificationData.badge,
      tag: notificationData.tag,
      requireInteraction: notificationData.requireInteraction,
      data: notificationData.data,
    })
  );
});

self.addEventListener('notificationclick', (event) => {
  console.log('Notification clicked:', event);
  event.notification.close();
  event.waitUntil(
    clients.matchAll({ type: 'window', includeUncontrolled: true }).then((clientList) => {
      for (const client of clientList) {
        if (client.url.includes(self.registration.scope) && 'focus' in client) {
          return client.focus();
        }
      }
      if (clients.openWindow) {
        return clients.openWindow('/');
      }
    })
  );
});
`;async function qxe(){if(!sS())return null;try{try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});return console.log(" Service Worker registered successfully from /sw.js"),e}catch{console.log(" /sw.js not found, using inline service worker");const t=new Blob([Hxe],{type:"application/javascript"}),r=URL.createObjectURL(t),a=await navigator.serviceWorker.register(r,{scope:"/"});return console.log(" Service Worker registered successfully (inline)"),a}}catch{return null}}function zxe(e){const t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),a=window.atob(r),s=new Uint8Array(a.length);for(let i=0;i<a.length;++i)s[i]=a.charCodeAt(i);return s}async function Wxe(e,t){try{const r=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zxe(t)});return console.log("Push subscription successful:",r),r}catch(r){return console.error("Failed to subscribe to push notifications:",r),null}}async function TI(e,t){try{if(!(await fetch(`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d/push/subscribe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${zn}`},body:JSON.stringify({subscription:e.toJSON(),userId:t})})).ok)throw new Error("Failed to send subscription to server");return console.log("Subscription sent to server successfully"),!0}catch(r){return console.error("Error sending subscription to server:",r),!1}}async function Kxe(e){try{return await e.pushManager.getSubscription()}catch(t){return console.error("Error getting existing subscription:",t),null}}async function Vxe(e,t){if(!sS())return console.log(" Push notifications not supported in this browser"),!1;try{const r=await qxe();if(!r)return console.log(" Service worker registration failed - push notifications unavailable"),!1;await navigator.serviceWorker.ready;const a=await Kxe(r);if(a)return console.log(" Push notifications already enabled"),await TI(a,e),!0;const s=Notification.permission;if(s==="denied")return console.log(" Push notifications blocked. To enable: Click  icon in address bar  Allow notifications"),!1;if(s==="default")return console.log(" Push notifications available. Click the notification bell to enable."),!1;if(s==="granted"){const i=await Wxe(r,t);return i?(await TI(i,e),console.log(" Push notifications enabled successfully"),!0):(console.log(" Failed to create push subscription"),!1)}return!1}catch(r){return console.log(" Push notifications unavailable:",r instanceof Error?r.message:"Unknown error"),!1}}const mc="bhandar_cache_",Gxe=300*1e3,X8=3600*1e3,Bf=1;function Yxe(e){try{const t=`${mc}${e}`,r=localStorage.getItem(t);if(!r)return null;const a=JSON.parse(r);return a.version!==Bf||Date.now()-a.timestamp>X8?(localStorage.removeItem(t),null):a.data}catch(t){return console.error("Cache read error:",t),null}}function Xxe(e){try{const t=`${mc}${e}`,r=localStorage.getItem(t);if(!r)return!1;const a=JSON.parse(r);return Date.now()-a.timestamp<Gxe&&a.version===Bf}catch{return!1}}function Jxe(e,t){try{const r=`${mc}${e}`,a={data:t,timestamp:Date.now(),version:Bf};localStorage.setItem(r,JSON.stringify(a))}catch(r){if(r instanceof Error&&r.name==="QuotaExceededError"){J8();try{const a=`${mc}${e}`,s={data:t,timestamp:Date.now(),version:Bf};localStorage.setItem(a,JSON.stringify(s))}catch(a){console.error("Cache write error after cleanup:",a)}}else console.error("Cache write error:",r)}}function J8(){try{const e=Date.now(),t=[];for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);if(a&&a.startsWith(mc))try{const s=localStorage.getItem(a);if(s){const i=JSON.parse(s);(e-i.timestamp>X8||i.version!==Bf)&&t.push(a)}}catch{t.push(a)}}t.forEach(r=>localStorage.removeItem(r)),console.log(` Cleared ${t.length} old cache entries`)}catch(e){console.error("Cache cleanup error:",e)}}function Hr(e){try{const t=`${mc}${e}`;localStorage.removeItem(t)}catch(t){console.error("Cache invalidation error:",t)}}function Qxe(){try{const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);r&&r.startsWith(mc)&&e.push(r)}e.forEach(t=>localStorage.removeItem(t)),console.log(` Invalidated all caches (${e.length} entries)`)}catch(e){console.error("Cache invalidation error:",e)}}function Zxe(e){const t=new Map;return e.forEach(r=>{t.set(r,Yxe(r))}),t}function eye(e){e.forEach((t,r)=>{Jxe(r,t)})}function tye(){const[e,t]=M.useState("analytics"),[r,a]=M.useState(null),[s,i]=M.useState(null),[o,l]=M.useState(!0),[d,u]=M.useState(null),[f,m]=M.useState([]),[p,g]=M.useState([]),[v,y]=M.useState([]),[w,k]=M.useState([]),[N,b]=M.useState([]),[A,E]=M.useState([]),[S,_]=M.useState([]),[C,P]=M.useState(!1),[B,F]=M.useState(null),[O,R]=M.useState(!1),[Q,V]=M.useState([]),[J,ae]=M.useState(null),[L,H]=M.useState([]),[ce,z]=M.useState([]),[I,Z]=M.useState([]),[te,se]=M.useState([]),[be,Ee]=M.useState([]),[_e,me]=M.useState([]),[ye,qe]=M.useState([]),G=tu(),Ke=new URLSearchParams(window.location.search).get("setup")==="cluster-head",ut=async()=>{try{const q=await nu();V(q)}catch(q){if(q instanceof Error&&(q.message==="Not authenticated"||q.message==="Unauthorized"))return;console.error("Error loading stores:",q)}},ze=async()=>{try{const q=await Ks();se(q)}catch(q){if(q instanceof Error&&(q.message==="Not authenticated"||q.message==="Unauthorized"))return;console.error("Error loading employees:",q)}},Pe=async q=>{try{const W=await w5(q);W&&(Ee(W.managedStoreIds||[]),me(W.managedProductionHouseIds||[]),console.log(" Cluster assignments loaded:",{stores:W.managedStoreIds?.length||0,productionHouses:W.managedProductionHouseIds?.length||0}))}catch{console.log("No cluster assignments found (this is okay for new cluster heads)")}},ke=async(q,W=!1)=>{const ie=["inventory","overheads","fixedCosts","salesData","categorySales","productionData","productionHouses","stockRequests","productionRequests","inventoryItems"];if(!W){const he=Zxe(ie);if(he.get("inventory")){if(console.log(" Loading from cache - instant display!"),m(he.get("inventory")||[]),g(he.get("overheads")||[]),y(he.get("fixedCosts")||[]),k(he.get("salesData")||[]),b(he.get("categorySales")?.data||[]),_(he.get("productionData")||[]),H(he.get("productionHouses")||[]),z(he.get("stockRequests")||[]),Z(he.get("productionRequests")||[]),qe(he.get("inventoryItems")||[]),ie.every(ue=>Xxe(ue))){console.log(" Cache is fresh - skipping API calls");return}console.log(" Cache loaded, refreshing in background...")}}P(!0),F(null);try{console.log(" Starting loadData - fetching from API...");const[he,K,ue,fe,Me,we,lt,Ge,Ze,jt]=await Promise.all([dg(q),ru(q),iD(q),y2(q),gg(q),ug(),Wh(q),d5(q),pg(q),dh()]);console.log(" Stock Requests API Response:",Ge),console.log(" Stock Requests count:",Ge?.length||0),console.log(" Sample stock request:",Ge?.[0]),console.log(" Loaded Inventory Items:",he.length),console.log(" Loaded Overhead Items:",K.length),console.log(" Loaded Fixed Cost Items:",ue.length);const Gt=Array.from(new Map(he.map(de=>[de.id,de])).values()),ar=Array.from(new Map(K.map(de=>[de.id,de])).values()),Nr=Array.from(new Map(ue.map(de=>[de.id,de])).values()),vn=Array.from(new Map(fe.map(de=>[de.id,de])).values()),Tr=Array.from(new Map(we.map(de=>[de.id,de])).values()),Dn=he.length-Gt.length,Fr=K.length-ar.length,Ea=ue.length-Nr.length,Lr=fe.length-vn.length,ee=we.length-Tr.length,Ce=Dn+Fr+Ea+Lr+ee;console.log(" After deduplication:"),console.log("Inventory: Before:",he.length," After:",Gt.length),console.log("Overheads: Before:",K.length," After:",ar.length),console.log("Fixed Costs: Before:",ue.length," After:",Nr.length),console.log("Sales: Before:",fe.length," After:",vn.length),Ce>0&&(sessionStorage.getItem("db_cleaned")||setTimeout(async()=>{try{const Ae=await G.auth.getUser(q),Te=Ae.data?.user?.user_metadata?.role;if(Ae.data?.user&&Te==="cluster_head"){console.log(" Silently cleaning duplicates in background..."),sessionStorage.setItem("db_cleaned","true");const Ne=await dD(q);console.log(` Cleaned ${Ne.removed} duplicates successfully`)}}catch(Ae){console.log("Auto-cleanup skipped:",Ae instanceof Error?Ae.message:"Unknown error")}},1500)),m(Gt),g(ar),y(Nr),k(vn),b(Me.data||[]),_(Tr),H(lt),console.log(" Loaded Stock Requests from API:",Ge.length,Ge),z(Ge),Z(Ze),qe(jt);const pe=new Map;pe.set("inventory",Gt),pe.set("overheads",ar),pe.set("fixedCosts",Nr),pe.set("salesData",vn),pe.set("categorySales",Me),pe.set("productionData",Tr),pe.set("productionHouses",lt),pe.set("stockRequests",Ge),pe.set("productionRequests",Ze),pe.set("inventoryItems",jt),eye(pe),console.log(" Data cached for instant future loads")}catch(he){if(he instanceof Error&&(he.message==="Not authenticated"||he.message==="Unauthorized"))return;console.error("Error loading data:",he),F("Failed to load inventory data. Please refresh the page.")}finally{P(!1)}},Xe=async()=>{try{const q=await dh();if(q.length===0){console.log(" No inventory items found, initializing defaults...");try{await qD();const W=await dh();qe(W),console.log(` Initialized ${W.length} default inventory items`);return}catch(W){console.error("Error initializing default items:",W),qe([]);return}}qe(q),await We(q)}catch(q){console.error("Error loading inventory items:",q),qe([])}},We=async q=>{const W=[{name:"chicken",displayName:"Chicken Momos",variations:["chicken momo","chicken momos"]},{name:"chickenCheese",displayName:"Chicken Cheese Momos",variations:["chicken cheese momo","chicken cheese momos","chicken cheese"]},{name:"veg",displayName:"Veg Momos",variations:["veg momo","veg momos","vegetable momos"]},{name:"cheeseCorn",displayName:"Cheese Corn Momos",variations:["cheese corn momo","cheese corn momos","corn cheese"]},{name:"paneer",displayName:"Paneer Momos",variations:["paneer momo","paneer momos"]},{name:"vegKurkure",displayName:"Veg Kurkure Momos",variations:["veg kurkure momo","veg kurkure momos","veg kurkure"]},{name:"chickenKurkure",displayName:"Chicken Kurkure Momos",variations:["chicken kurkure momo","chicken kurkure momos","chicken kurkure"]}];try{let ie=!1;for(const he of W){let K=q.find(ue=>ue.name.toLowerCase()===he.name.toLowerCase());K||(K=q.find(ue=>{const fe=ue.displayName.toLowerCase(),Me=he.displayName.toLowerCase();return fe===Me||fe.replace(/\s*momos?\s*/i,"").trim()===Me.replace(/\s*momos?\s*/i,"").trim()?!0:he.variations.some(we=>fe.includes(we.toLowerCase()))})),K?K.name!==he.name&&(console.log(` Updating inventory item name: "${K.displayName}" from "${K.name}" to "${he.name}"`),await HD(K.id,{name:he.name,displayName:he.displayName}),ie=!0):(console.log(` Creating core inventory item: ${he.displayName}`),await UD({name:he.name,displayName:he.displayName,category:"finished_product",unit:"pieces",linkedEntityType:"global",createdBy:"system"}),ie=!0)}if(ie){const he=await dh();qe(he)}}catch(ie){console.error("Error ensuring core momos exist:",ie)}};M.useEffect(()=>{sessionStorage.removeItem("logout_redirect_in_progress"),J8();const q=async()=>{try{const{data:{session:ie}}=await G.auth.getSession();if(!ie){l(!1);return}const{data:{session:he},error:K}=await G.auth.refreshSession();K||!he?(console.warn("Session refresh failed:",K?.message||"No session returned"),ie?.user?await W(ie):(await G.auth.signOut(),l(!1))):await W(he)}catch(ie){console.log("Session check error:",ie)}finally{l(!1)}},W=async ie=>{let he=null,K=ie.user.user_metadata?.designation||null;if(ie.user.user_metadata?.employeeId)try{const Me=(await cl()).find(we=>we.employeeId===ie.user.user_metadata?.employeeId);Me&&(he=Me.storeId||null,K=Me.designation||K)}catch(fe){console.error("Error fetching employee storeId on session check:",fe)}const ue={email:ie.user.email||"",name:ie.user.user_metadata?.name||ie.user.email?.split("@")[0]||"User",role:ie.user.user_metadata?.role||"manager",employeeId:ie.user.user_metadata?.employeeId||null,accessToken:ie.access_token,storeId:he,designation:K};a(ue),await ke(ie.access_token),(ue.role==="cluster_head"||ue.role==="manager"||ue.role==="audit")&&(await ut(),await ze(),ue.role==="cluster_head"&&await Pe(ie.access_token))};q()},[]),M.useEffect(()=>{r&&(async()=>{try{if(!sS()){console.log("Push notifications not supported on this device");return}const W=await fetch(`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d/push/vapid-public-key`,{headers:{Authorization:`Bearer ${zn}`}});if(!W.ok){console.log("Could not fetch VAPID key - push notifications disabled");return}const ie=await W.json();if(!ie.configured||!ie.publicKey){console.log(" Push notifications not configured. To enable, set VAPID_PUBLIC_KEY and VAPID_PRIVATE_KEY environment variables.");return}const he=r.employeeId||r.email;await Vxe(he,ie.publicKey)&&console.log(" Push notifications enabled successfully for user:",he)}catch(W){console.log(" Push notifications setup skipped:",W instanceof Error?W.message:"Unknown error")}})()},[r]);const ct=async(q,W)=>{i(null);try{const{data:ie,error:he}=await G.auth.signInWithPassword({email:q,password:W});if(he){i(he.message);return}if(ie.user&&ie.session){let K=null,ue=ie.user.user_metadata?.designation||null;if(ie.user.user_metadata?.employeeId)try{const we=(await cl()).find(lt=>lt.employeeId===ie.user.user_metadata?.employeeId);we&&(K=we.storeId||null,ue=we.designation||ue)}catch(Me){console.error("Error fetching employee storeId:",Me)}const fe={email:ie.user.email||"",name:ie.user.user_metadata?.name||ie.user.email?.split("@")[0]||"User",role:ie.user.user_metadata?.role||"manager",employeeId:ie.user.user_metadata?.employeeId||null,accessToken:ie.session.access_token,storeId:K,designation:ue};a(fe),await ke(ie.session.access_token),(fe.role==="cluster_head"||fe.role==="manager"||fe.role==="audit")&&(await ut(),await ze())}}catch(ie){console.log("Login error:",ie),i("Failed to sign in. Please try again.")}},Wt=async(q,W,ie,he)=>{i(null);try{const K=await fetch(`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${zn}`},body:JSON.stringify({email:q,password:W,name:ie,role:he,employeeId:he==="cluster_head"?"BM001":he==="audit"?"AUDIT001":null})}),ue=await K.json();if(!K.ok){i(ue.error||"Failed to create account");return}if(!ue.user){i("Failed to create account");return}if(he==="cluster_head"||he==="audit")try{const fe=he==="cluster_head"?"BM001":"AUDIT001";await fetch(`https://${ra}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${zn}`},body:JSON.stringify({employeeId:fe,name:ie,email:q,role:he,employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],createdBy:"system",status:"active",authUserId:ue.user.id})})}catch(fe){console.log("Error creating unified employee record:",fe)}await ct(q,W)}catch(K){console.log("Signup error:",K),i("Failed to create account. Please try again.")}},Ut=async()=>{await G.auth.signOut(),a(null),m([]),g([]),y([]),k([]),t("sales"),Qxe()},Vt=async()=>{r&&(console.log(" Manual refresh triggered"),await ke(r.accessToken,!0))},dr={inventory:f,overheads:p,fixedCosts:v,salesData:w,categorySalesData:N,productionData:S,productionHouses:L,stockRequests:ce,productionRequests:I,stores:Q,managedStoreIds:be,managedProductionHouseIds:_e,inventoryItems:ye,loadInventoryItems:Xe,addInventoryItem:async q=>{if(r)try{const W={...q,storeId:r.storeId||q.storeId};console.log(" Sending inventory item to backend:",W);const ie=await ZI(r.accessToken,W);console.log(" Received inventory item from backend:",ie),m([...f,ie]),Hr("inventory")}catch(W){throw console.error("Error adding inventory item:",W),W}},addOverheadItem:async q=>{if(r)try{const W={...q,storeId:r.storeId||q.storeId},ie=await rD(r.accessToken,W);g([...p,ie]),Hr("overheads")}catch(W){throw console.error("Error adding overhead item:",W),W}},addFixedCostItem:async q=>{if(r)try{const W={...q,storeId:r.storeId||q.storeId},ie=await oD(r.accessToken,W);y([...v,ie]),Hr("fixedCosts")}catch(W){throw console.error("Error adding fixed cost item:",W),W}},updateInventoryItem:async(q,W)=>{if(r)try{const ie={...W,storeId:r.storeId||W.storeId},he=await eD(r.accessToken,q,ie);m(f.map(K=>K.id===q?he:K)),Hr("inventory")}catch(ie){throw console.error("Error updating inventory item:",ie),ie}},updateOverheadItem:async(q,W)=>{if(r)try{const ie={...W,storeId:r.storeId||W.storeId},he=await nD(r.accessToken,q,ie);g(p.map(K=>K.id===q?he:K)),Hr("overheads")}catch(ie){throw console.error("Error updating overhead item:",ie),ie}},updateFixedCostItem:async(q,W)=>{if(r)try{const ie={...W,storeId:r.storeId||W.storeId},he=await lD(r.accessToken,q,ie);y(v.map(K=>K.id===q?he:K)),Hr("fixedCosts")}catch(ie){throw console.error("Error updating fixed cost item:",ie),ie}},deleteInventoryItem:async q=>{if(r)try{await tD(r.accessToken,q),m(f.filter(W=>W.id!==q)),Hr("inventory"),console.log(" Inventory item deleted successfully")}catch(W){if(W?.message?.includes("not found")||W?.message?.includes("already deleted"))console.log(" Item was already deleted, updating UI"),m(f.filter(ie=>ie.id!==q)),Hr("inventory");else throw console.error("Error deleting inventory item:",W),W}},deleteOverheadItem:async q=>{if(r)try{await aD(r.accessToken,q),g(p.filter(W=>W.id!==q)),Hr("overheads"),console.log(" Overhead item deleted successfully")}catch(W){if(W?.message?.includes("not found")||W?.message?.includes("already deleted"))console.log(" Item was already deleted, updating UI"),g(p.filter(ie=>ie.id!==q)),Hr("overheads");else throw console.error("Error deleting overhead item:",W),W}},deleteFixedCostItem:async q=>{if(r)try{await cD(r.accessToken,q),y(v.filter(W=>W.id!==q)),Hr("fixedCosts"),console.log(" Fixed cost item deleted successfully")}catch(W){if(W?.message?.includes("not found")||W?.message?.includes("already deleted"))console.log(" Item was already deleted, updating UI"),y(v.filter(ie=>ie.id!==q)),Hr("fixedCosts");else throw console.error("Error deleting fixed cost item:",W),W}},addSalesData:async q=>{if(r)try{console.log("Frontend - Current user:",r),console.log("Frontend - User role:",r.role),console.log("Frontend - Access token (first 50 chars):",r.accessToken.substring(0,50));const W={...q,storeId:r.storeId||q.storeId},ie=await uD(r.accessToken,W);k([...w,ie]),Hr("salesData"),Hr("categorySales")}catch(W){throw console.error("Error adding sales data:",W),W}},updateSalesData:async(q,W)=>{if(r)try{const ie={...W,storeId:r.storeId||W.storeId},he=await hD(r.accessToken,q,ie);k(w.map(K=>K.id===q?he:K)),Hr("salesData"),Hr("categorySales")}catch(ie){throw console.error("Error updating sales data:",ie),ie}},approveSalesData:async q=>{if(r)try{const W=await fD(r.accessToken,q);k(w.map(ie=>ie.id===q?W:ie)),Hr("salesData")}catch(W){throw console.error("Error approving sales data:",W),W}},requestSalesApproval:async(q,W,ie)=>{if(r)try{const he=await mD(r.accessToken,q,W,ie);k(w.map(K=>K.id===q?he:K)),Hr("salesData")}catch(he){throw console.error("Error requesting sales approval:",he),he}},approveDiscrepancy:async q=>{if(r)try{const W=await pD(r.accessToken,q);k(w.map(ie=>ie.id===q?W:ie)),Hr("salesData")}catch(W){throw console.error("Error approving discrepancy:",W),W}},rejectDiscrepancy:async(q,W)=>{if(r)try{const ie=await gD(r.accessToken,q,W);k(w.map(he=>he.id===q?ie:he)),Hr("salesData")}catch(ie){throw console.error("Error rejecting discrepancy:",ie),ie}},addProductionData:async q=>{if(r)try{const W={...q,storeId:r.storeId||q.storeId},ie=await xD(W);_([...S,ie]),Hr("productionData")}catch(W){throw console.error("Error adding production data:",W),W}},updateProductionData:async(q,W)=>{if(r)try{const ie={...W,storeId:r.storeId||W.storeId},he=await yD(q,ie);_(S.map(K=>K.id===q?he:K)),Hr("productionData")}catch(ie){throw console.error("Error updating production data:",ie),ie}},approveProductionData:async q=>{if(r)try{const W=await vD(q);_(S.map(ie=>ie.id===q?W:ie)),Hr("productionData")}catch(W){throw console.error("Error approving production data:",W),W}},addProductionHouse:async q=>{if(r)try{const W=await r5(r.accessToken,q);H([...L,W]),Hr("productionHouses")}catch(W){throw console.error("Error creating production house:",W),W}},updateProductionHouse:async(q,W)=>{if(r)try{const ie=await n5(r.accessToken,q,W);H(L.map(he=>he.id===q?ie:he)),Hr("productionHouses")}catch(ie){throw console.error("Error updating production house:",ie),ie}},updateProductionHouseInventory:async(q,W)=>{if(r)try{const ie=await a5(r.accessToken,q,W);H(L.map(he=>he.id===q?ie:he))}catch(ie){throw console.error("Error updating production house inventory:",ie),ie}},deleteProductionHouse:async q=>{if(r)try{await l5(r.accessToken,q),H(L.filter(W=>W.id!==q)),Hr("productionHouses")}catch(W){throw console.error("Error deleting production house:",W),W}},setProductionHouses:H,createStockRequest:async q=>{if(r)try{console.log(" Creating stock request:",q);const W=await u5(r.accessToken,q);console.log(" Stock request created successfully:",W),z([...ce,W]),console.log(" Updated stock requests count:",ce.length+1),Hr("stockRequests")}catch(W){throw console.error(" Error creating stock request:",W),W}},fulfillStockRequest:async(q,W,ie,he,K)=>{if(r)try{const ue=await h5(r.accessToken,q,W,ie,he,K);z(ce.map(Me=>Me.id===q?ue:Me));const fe=await Wh(r.accessToken);H(fe),Hr("stockRequests"),Hr("productionHouses")}catch(ue){throw console.error("Error fulfilling stock request:",ue),ue}},cancelStockRequest:async q=>{if(r)try{const W=await f5(r.accessToken,q);z(ce.map(ie=>ie.id===q?W:ie)),Hr("stockRequests")}catch(W){throw console.error("Error cancelling stock request:",W),W}},isManager:r?.role==="manager",user:r};if(o)return n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(rr,{className:"w-12 h-12 text-[#B0A8D8] mx-auto mb-4 animate-pulse"}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(Ke)return n.jsx(Tge,{});if(!r)return n.jsx(yge,{onLogin:ct,onSignup:Wt,error:s});const ve=r.role==="cluster_head",tt=r.role==="employee",at=r.role==="audit",pt=r.role==="employee"&&r.designation==="store_incharge",ft=r.designation==="production_incharge",U=pt||ft,oe=r.role==="manager"&&r.designation!=="store_incharge"&&r.designation!=="production_incharge",ne=r.role==="manager",Y=ft||oe||ve;return console.log(" User Permissions:",{role:r.role,designation:r.designation,isClusterHead:ve,isEmployee:tt,isManager:ne,isStoreIncharge:pt,isProductionIncharge:ft,isOperationsManager:oe,isAnyIncharge:U,canViewProduction:Y}),console.log(" Current activeView:",e),at?n.jsx(xge,{user:r,inventory:f,overheads:p,fixedCosts:v,salesData:w,categorySalesData:N,productionData:S,productionHouses:L,stockRequests:ce,productionRequests:I,employees:te,stores:Q,inventoryItems:ye,onLogout:Ut,onDataUpdate:ke}):tt?n.jsxs(n.Fragment,{children:[n.jsx(AI,{}),n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("nav",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 shadow-xl sticky top-0 z-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex justify-between items-center py-3",children:[n.jsx("div",{className:"flex items-center gap-4",children:n.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/30",children:[n.jsx("h1",{className:"text-xl sm:text-2xl text-white font-bold tracking-wide",children:"Bhandar-IMS"}),n.jsxs("p",{className:"text-xs text-white/90",children:[r.name,"  ",pt?"Store Incharge":ft?"Production Head":"Employee"]})]})}),n.jsx("button",{onClick:()=>R(!O),className:"lg:hidden flex items-center gap-2 px-3 py-2 bg-white/20 backdrop-blur-sm text-white rounded-lg hover:bg-white/30 transition-all border border-white/30",children:O?n.jsx(Kr,{className:"w-5 h-5"}):n.jsx(ME,{className:"w-5 h-5"})}),n.jsxs("div",{className:"hidden lg:flex gap-2",children:[n.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="analytics"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(hn,{className:"w-4 h-4"}),n.jsx("span",{children:"Analytics"})]}),U&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="inventory"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(rr,{className:"w-4 h-4"}),n.jsx("span",{children:"Inventory"})]}),n.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="sales"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(qn,{className:"w-4 h-4"}),n.jsx("span",{children:"Sales"})]})]}),Y&&n.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="production"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(Pn,{className:"w-4 h-4"}),n.jsx("span",{children:"Production"})]}),U&&n.jsxs("button",{onClick:()=>t("stock-requests"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="stock-requests"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(rr,{className:"w-4 h-4"}),n.jsx("span",{children:"Stock Requests"})]}),ne&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>t("advanced-inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="advanced-inventory"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(oj,{className:"w-4 h-4"}),n.jsx("span",{children:"Inventory Analytics"})]}),n.jsxs("button",{onClick:()=>t("inventory-items"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="inventory-items"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(rr,{className:"w-4 h-4"}),n.jsx("span",{children:"Manage Items"})]})]}),n.jsxs("button",{onClick:()=>t("payroll"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="payroll"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(kn,{className:"w-4 h-4"}),n.jsx("span",{children:U?"Payroll":"My Payouts"})]}),n.jsxs("button",{onClick:()=>t("attendance"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="attendance"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(fn,{className:"w-4 h-4"}),n.jsx("span",{children:"Attendance"})]}),U&&n.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="export"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(ws,{className:"w-4 h-4"}),n.jsx("span",{children:"Export"})]}),U&&n.jsx(xI,{onNavigate:(q,W,ie)=>{q==="sales"&&(t("sales"),u(null)),q==="production"&&(t("production"),u(null)),q==="attendance"&&(t("employees"),u(null)),q==="production-requests"&&(console.log(" Production request notification clicked, requestId:",ie),u(null),setTimeout(()=>{u(ie||null),t("analytics")},0))}}),n.jsxs("button",{onClick:Vt,disabled:C,className:"flex items-center gap-2 px-4 py-2 bg-green-500/90 text-white rounded-xl hover:bg-green-600 transition-all backdrop-blur-sm border-2 border-white/30 disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh data",children:[n.jsx(gi,{className:`w-4 h-4 ${C?"animate-spin":""}`}),n.jsx("span",{children:"Refresh"})]}),n.jsxs("button",{onClick:Ut,className:"flex items-center gap-2 px-4 py-2 bg-red-500/90 text-white rounded-xl hover:bg-red-600 transition-all backdrop-blur-sm border-2 border-white/30",children:[n.jsx(lh,{className:"w-4 h-4"}),n.jsx("span",{children:"Logout"})]})]})]}),O&&n.jsxs("div",{className:"lg:hidden border-t border-white/20 py-4 space-y-2",children:[n.jsxs("button",{onClick:()=>{t("analytics"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="analytics"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(hn,{className:"w-5 h-5"}),n.jsx("span",{children:"Analytics"})]}),U&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{t("inventory"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="inventory"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(rr,{className:"w-5 h-5"}),n.jsx("span",{children:"Inventory"})]}),n.jsxs("button",{onClick:()=>{t("sales"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="sales"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(qn,{className:"w-5 h-5"}),n.jsx("span",{children:"Sales"})]})]}),Y&&n.jsxs("button",{onClick:()=>{t("production"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="production"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(Pn,{className:"w-5 h-5"}),n.jsx("span",{children:"Production"})]}),U&&n.jsxs("button",{onClick:()=>{t("stock-requests"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="stock-requests"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(rr,{className:"w-5 h-5"}),n.jsx("span",{children:"Stock Requests"})]}),ne&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{t("advanced-inventory"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="advanced-inventory"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(oj,{className:"w-5 h-5"}),n.jsx("span",{children:"Inventory Analytics"})]}),n.jsxs("button",{onClick:()=>{t("inventory-items"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="inventory-items"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(rr,{className:"w-5 h-5"}),n.jsx("span",{children:"Manage Items"})]})]}),n.jsxs("button",{onClick:()=>{t("payroll"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="payroll"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(kn,{className:"w-5 h-5"}),n.jsx("span",{children:U?"Payroll":"My Payouts"})]}),n.jsxs("button",{onClick:()=>{t("attendance"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="attendance"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(fn,{className:"w-5 h-5"}),n.jsx("span",{children:"Attendance"})]}),U&&n.jsxs("button",{onClick:()=>{t("export"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="export"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(ws,{className:"w-5 h-5"}),n.jsx("span",{children:"Export"})]}),n.jsxs("button",{onClick:()=>{Vt(),R(!1)},disabled:C,className:"w-full flex items-center gap-3 px-4 py-3 bg-green-500/90 text-white rounded-lg hover:bg-green-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(gi,{className:`w-5 h-5 ${C?"animate-spin":""}`}),n.jsx("span",{children:"Refresh Data"})]}),n.jsxs("button",{onClick:Ut,className:"w-full flex items-center gap-3 px-4 py-3 bg-red-500/90 text-white rounded-lg hover:bg-red-600 transition-all",children:[n.jsx(lh,{className:"w-5 h-5"}),n.jsx("span",{children:"Logout"})]})]})]})}),n.jsx("main",{className:"pb-6",children:e==="analytics"?n.jsx(o2,{context:dr,highlightRequestId:d,onNavigateToManageItems:()=>{console.log(" App.tsx: Changing activeView to inventory-items"),t("inventory-items")}}):e==="inventory"&&U?n.jsx(Ej,{context:dr}):e==="sales"&&U?n.jsx(cP,{context:dr,selectedStoreId:J}):e==="production"&&Y?n.jsx(l2,{context:dr,selectedStoreId:J}):e==="payroll"?U?n.jsx(Tk,{userRole:"manager",selectedDate:new Date().toISOString().split("T")[0],userEmployeeId:r.employeeId,userName:r.name,selectedStoreId:r.storeId,isIncharge:!0,inchargeDesignation:r.designation}):n.jsx(pI,{employeeId:r.employeeId||""}):e==="attendance"?n.jsx(D8,{user:{employeeId:r.employeeId,name:r.name,email:r.email,role:r.role},isIncharge:U,inchargeDesignation:r.designation}):e==="export"&&U?n.jsx(mI,{userRole:"manager",selectedStoreId:r.storeId||null,currentUserId:r.email}):e==="stock-requests"&&U?n.jsx(yI,{context:dr,stores:Q}):e==="advanced-inventory"&&ne?n.jsx(EI,{context:dr,stores:Q,onNavigateToManageItems:()=>t("inventory-items")}):e==="inventory-items"&&(ne||U)?(console.log(" Rendering InventoryItemsManagement:",{activeView:e,isManager:ne,isAnyIncharge:U}),n.jsx(CI,{context:dr})):(console.log(" Falling through to EmployeeDashboard:",{activeView:e,isManager:ne,isAnyIncharge:U}),n.jsx(pI,{employeeId:r.employeeId||""}))})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(AI,{}),n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("nav",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 shadow-xl sticky top-0 z-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex justify-between items-center py-3",children:[n.jsx("div",{className:"flex items-center gap-4",children:n.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/30",children:[n.jsx("h1",{className:"text-xl sm:text-2xl text-white font-bold tracking-wide",children:"Bhandar-IMS"}),n.jsxs("p",{className:"text-xs text-white/90",children:[r.name,"  ",r.designation==="store_incharge"?"Store Incharge":r.designation==="production_incharge"?"Production Incharge":r.role==="manager"?"Operations Manager":"Cluster Head"]})]})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xI,{onNavigate:(q,W,ie)=>{q==="sales"?(t("sales"),u(null)):q==="attendance"||q==="leave"?(t("employees"),u(null)):q==="production"?(t("production"),u(null)):q==="production-requests"&&(console.log(" Production request notification clicked (mobile), requestId:",ie),u(null),setTimeout(()=>{u(ie||null),t("analytics")},0))}}),n.jsx("button",{onClick:()=>R(!O),className:"lg:hidden flex items-center gap-2 px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all border border-white/30",children:O?n.jsx(Kr,{className:"w-5 h-5"}):n.jsx(ME,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"hidden lg:flex gap-2 flex-wrap",children:[ve?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="analytics"?"bg-white text-purple-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(hn,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Analytics"})]}),n.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="inventory"?"bg-white text-green-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(rr,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Inventory"})]}),n.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="sales"?"bg-white text-pink-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(qn,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Sales"})]}),Y&&n.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="production"?"bg-white text-amber-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(Pn,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Production"})]}),n.jsxs("button",{onClick:()=>t("employees"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="employees"?"bg-white text-indigo-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(Di,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Employees"})]}),n.jsxs("button",{onClick:()=>t("assets"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="assets"?"bg-white text-rose-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(rr,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Assets"})]}),n.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="export"?"bg-white text-yellow-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(ws,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Export"})]}),n.jsxs("button",{onClick:()=>t("backup"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="backup"?"bg-white text-blue-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(oh,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Backup"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="analytics"?"bg-white text-purple-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(hn,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Analytics"})]}),n.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="sales"?"bg-white text-pink-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(qn,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Sales"})]}),n.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="inventory"?"bg-white text-green-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(rr,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Inventory"})]}),Y&&n.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="production"?"bg-white text-amber-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(Pn,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Production"})]}),n.jsxs("button",{onClick:()=>t("employees"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="employees"?"bg-white text-indigo-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(Di,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Employees"})]}),n.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="export"?"bg-white text-yellow-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(ws,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Export"})]}),n.jsxs("button",{onClick:()=>t("backup"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="backup"?"bg-white text-blue-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(oh,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Backup"})]})]}),n.jsxs("button",{onClick:Vt,disabled:C,className:"flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm text-white rounded-xl hover:bg-green-500 transition-all duration-300 transform hover:scale-105 border border-white/20 disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh data",children:[n.jsx(gi,{className:`w-4 h-4 ${C?"animate-spin":""}`}),n.jsx("span",{className:"hidden xl:inline",children:"Refresh"})]}),n.jsxs("button",{onClick:Ut,className:"flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm text-white rounded-xl hover:bg-red-500 transition-all duration-300 transform hover:scale-105 border border-white/20",children:[n.jsx(lh,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Logout"})]})]})]}),O&&n.jsxs("div",{className:"lg:hidden border-t border-gray-200 py-4 space-y-2",children:[ve?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{t("analytics"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="analytics"?"bg-[#D4A5FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F5F0FF]"}`,children:[n.jsx(hn,{className:"w-5 h-5"}),n.jsx("span",{children:"Analytics"})]}),n.jsxs("button",{onClick:()=>{t("inventory"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="inventory"?"bg-[#C1E1C1] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F0FFF0]"}`,children:[n.jsx(rr,{className:"w-5 h-5"}),n.jsx("span",{children:"Inventory"})]}),n.jsxs("button",{onClick:()=>{t("sales"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="sales"?"bg-[#FFD4E5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5F8]"}`,children:[n.jsx(qn,{className:"w-5 h-5"}),n.jsx("span",{children:"Sales"})]}),Y&&n.jsxs("button",{onClick:()=>{t("production"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="production"?"bg-[#FFE4B5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[n.jsx(Pn,{className:"w-5 h-5"}),n.jsx("span",{children:"Production"})]}),n.jsxs("button",{onClick:()=>{t("employees"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="employees"?"bg-[#E6E6FA] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F8F8FF]"}`,children:[n.jsx(Di,{className:"w-5 h-5"}),n.jsx("span",{children:"Employees"})]}),n.jsxs("button",{onClick:()=>{t("assets"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="assets"?"bg-[#FFE4CC] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5EE]"}`,children:[n.jsx(rr,{className:"w-5 h-5"}),n.jsx("span",{children:"Assets"})]}),n.jsxs("button",{onClick:()=>{t("export"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="export"?"bg-[#FFE5B4] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[n.jsx(ws,{className:"w-5 h-5"}),n.jsx("span",{children:"Export"})]}),n.jsxs("button",{onClick:()=>{t("backup"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="backup"?"bg-[#B4D7FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#E6F2FF]"}`,children:[n.jsx(oh,{className:"w-5 h-5"}),n.jsx("span",{children:"Backup"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{t("analytics"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="analytics"?"bg-[#D4A5FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F5F0FF]"}`,children:[n.jsx(hn,{className:"w-5 h-5"}),n.jsx("span",{children:"Analytics"})]}),n.jsxs("button",{onClick:()=>{t("sales"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="sales"?"bg-[#FFD4E5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5F8]"}`,children:[n.jsx(qn,{className:"w-5 h-5"}),n.jsx("span",{children:"Sales"})]}),n.jsxs("button",{onClick:()=>{t("inventory"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="inventory"?"bg-[#C1E1C1] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F0FFF0]"}`,children:[n.jsx(rr,{className:"w-5 h-5"}),n.jsx("span",{children:"Inventory"})]}),Y&&n.jsxs("button",{onClick:()=>{t("production"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="production"?"bg-[#FFE4B5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[n.jsx(Pn,{className:"w-5 h-5"}),n.jsx("span",{children:"Production"})]}),n.jsxs("button",{onClick:()=>{t("employees"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="employees"?"bg-[#E6E6FA] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F8F8FF]"}`,children:[n.jsx(Di,{className:"w-5 h-5"}),n.jsx("span",{children:"Employees"})]}),n.jsxs("button",{onClick:()=>{t("export"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="export"?"bg-[#FFE5B4] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[n.jsx(ws,{className:"w-5 h-5"}),n.jsx("span",{children:"Export"})]}),n.jsxs("button",{onClick:()=>{t("backup"),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="backup"?"bg-[#B4D7FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#E6F2FF]"}`,children:[n.jsx(oh,{className:"w-5 h-5"}),n.jsx("span",{children:"Backup"})]})]}),n.jsxs("button",{onClick:()=>{Vt(),R(!1)},disabled:C,className:"w-full flex items-center gap-3 px-4 py-3 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(gi,{className:`w-5 h-5 ${C?"animate-spin":""}`}),n.jsx("span",{children:"Refresh Data"})]}),n.jsxs("button",{onClick:Ut,className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[n.jsx(lh,{className:"w-5 h-5"}),n.jsx("span",{children:"Logout"})]})]})]})}),ve&&Q.length>0&&n.jsx("div",{className:"bg-gradient-to-br from-purple-50 via-pink-50 to-purple-50 border-b border-purple-100 px-4 py-6",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsx(Age,{stores:Q,selectedStoreId:J,onStoreChange:ae,showAllStores:!0})})}),B&&n.jsx("div",{className:"bg-red-50 border-b border-red-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 text-red-800",children:[n.jsx(xr,{className:"w-5 h-5"}),n.jsx("p",{className:"text-sm",children:B}),n.jsx("button",{onClick:()=>r&&ke(r.accessToken),className:"ml-auto text-sm text-red-600 hover:text-red-700 underline",children:"Retry"})]})}),C&&n.jsx("div",{className:"bg-blue-50 border-b border-blue-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 text-blue-800",children:[n.jsx(rr,{className:"w-5 h-5 animate-pulse"}),n.jsx("p",{className:"text-sm",children:"Loading inventory data..."})]})}),n.jsx("main",{className:"pb-6",children:e==="sales"?n.jsx(cP,{context:dr,selectedStoreId:J}):e==="inventory"?r.role==="manager"?n.jsx(Hq,{context:dr,selectedStoreId:J,employees:te}):n.jsx(Ej,{context:dr,selectedStoreId:J}):e==="analytics"?n.jsx(o2,{context:dr,selectedStoreId:J,highlightRequestId:d,onNavigateToManageItems:()=>{console.log(" App.tsx: Changing activeView to inventory-items"),t("inventory-items")}}):e==="export"?n.jsx(mI,{userRole:r.role,selectedStoreId:J,currentUserId:r.email}):e==="backup"?n.jsx(Uxe,{context:dr}):e==="employees"?n.jsx(Ege,{user:{role:r.role,email:r.email,employeeId:r.employeeId,name:r.name,storeId:r.storeId,accessToken:r.accessToken},selectedStoreId:J}):e==="assets"?n.jsx(Dge,{context:dr,stores:Q,employees:te,onRefreshStores:ut}):e==="production"&&Y?n.jsx(l2,{context:dr,selectedStoreId:J}):e==="stock-requests"?n.jsx(yI,{context:dr,stores:Q}):e==="advanced-inventory"?n.jsx(EI,{context:dr,stores:Q,onNavigateToManageItems:()=>{console.log(" App.tsx (Manager): Changing activeView to inventory-items"),t("inventory-items")}}):e==="inventory-items"?(console.log(" Rendering InventoryItemsManagement (Manager section):",{activeView:e,isManager:ne}),n.jsx(CI,{context:dr})):n.jsx(Voe,{context:dr})})]}),r&&e==="inventory"&&n.jsx($xe,{context:dr}),r&&e==="inventory"&&n.jsx(Lxe,{context:dr}),r&&e==="inventory"&&n.jsx(Bxe,{context:dr})]})}M7.createRoot(document.getElementById("root")).render(n.jsx(tye,{}));
