function Q7(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var pm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vy={exports:{}},mh={},Gy={exports:{}},$r={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ME;function Z7(){if(ME)return $r;ME=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function p(L){return L===null||typeof L!="object"?null:(L=m&&L[m]||L["@@iterator"],typeof L=="function"?L:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,y={};function v(L,I,G){this.props=L,this.context=I,this.refs=y,this.updater=G||g}v.prototype.isReactComponent={},v.prototype.setState=function(L,I){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,I,"setState")},v.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function k(){}k.prototype=v.prototype;function S(L,I,G){this.props=L,this.context=I,this.refs=y,this.updater=G||g}var w=S.prototype=new k;w.constructor=S,b(w,v.prototype),w.isPureReactComponent=!0;var A=Array.isArray,C=Object.prototype.hasOwnProperty,N={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function _(L,I,G){var V,Z={},ve=null,Ee=null;if(I!=null)for(V in I.ref!==void 0&&(Ee=I.ref),I.key!==void 0&&(ve=""+I.key),I)C.call(I,V)&&!E.hasOwnProperty(V)&&(Z[V]=I[V]);var Te=arguments.length-2;if(Te===1)Z.children=G;else if(1<Te){for(var ue=Array(Te),ge=0;ge<Te;ge++)ue[ge]=arguments[ge+2];Z.children=ue}if(L&&L.defaultProps)for(V in Te=L.defaultProps,Te)Z[V]===void 0&&(Z[V]=Te[V]);return{$$typeof:e,type:L,key:ve,ref:Ee,props:Z,_owner:N.current}}function O(L,I){return{$$typeof:e,type:L.type,key:I,ref:L.ref,props:L.props,_owner:L._owner}}function B(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function F(L){var I={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(G){return I[G]})}var D=/\/+/g;function H(L,I){return typeof L=="object"&&L!==null&&L.key!=null?F(""+L.key):I.toString(36)}function ne(L,I,G,V,Z){var ve=typeof L;(ve==="undefined"||ve==="boolean")&&(L=null);var Ee=!1;if(L===null)Ee=!0;else switch(ve){case"string":case"number":Ee=!0;break;case"object":switch(L.$$typeof){case e:case t:Ee=!0}}if(Ee)return Ee=L,Z=Z(Ee),L=V===""?"."+H(Ee,0):V,A(Z)?(G="",L!=null&&(G=L.replace(D,"$&/")+"/"),ne(Z,I,G,"",function(ge){return ge})):Z!=null&&(B(Z)&&(Z=O(Z,G+(!Z.key||Ee&&Ee.key===Z.key?"":(""+Z.key).replace(D,"$&/")+"/")+L)),I.push(Z)),1;if(Ee=0,V=V===""?".":V+":",A(L))for(var Te=0;Te<L.length;Te++){ve=L[Te];var ue=V+H(ve,Te);Ee+=ne(ve,I,G,ue,Z)}else if(ue=p(L),typeof ue=="function")for(L=ue.call(L),Te=0;!(ve=L.next()).done;)ve=ve.value,ue=V+H(ve,Te++),Ee+=ne(ve,I,G,ue,Z);else if(ve==="object")throw I=String(L),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return Ee}function W(L,I,G){if(L==null)return L;var V=[],Z=0;return ne(L,V,"","",function(ve){return I.call(G,ve,Z++)}),V}function ee(L){if(L._status===-1){var I=L._result;I=I(),I.then(function(G){(L._status===0||L._status===-1)&&(L._status=1,L._result=G)},function(G){(L._status===0||L._status===-1)&&(L._status=2,L._result=G)}),L._status===-1&&(L._status=0,L._result=I)}if(L._status===1)return L._result.default;throw L._result}var re={current:null},Q={transition:null},R={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:Q,ReactCurrentOwner:N};function X(){throw Error("act(...) is not supported in production builds of React.")}return $r.Children={map:W,forEach:function(L,I,G){W(L,function(){I.apply(this,arguments)},G)},count:function(L){var I=0;return W(L,function(){I++}),I},toArray:function(L){return W(L,function(I){return I})||[]},only:function(L){if(!B(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},$r.Component=v,$r.Fragment=r,$r.Profiler=s,$r.PureComponent=S,$r.StrictMode=n,$r.Suspense=d,$r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,$r.act=X,$r.cloneElement=function(L,I,G){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var V=b({},L.props),Z=L.key,ve=L.ref,Ee=L._owner;if(I!=null){if(I.ref!==void 0&&(ve=I.ref,Ee=N.current),I.key!==void 0&&(Z=""+I.key),L.type&&L.type.defaultProps)var Te=L.type.defaultProps;for(ue in I)C.call(I,ue)&&!E.hasOwnProperty(ue)&&(V[ue]=I[ue]===void 0&&Te!==void 0?Te[ue]:I[ue])}var ue=arguments.length-2;if(ue===1)V.children=G;else if(1<ue){Te=Array(ue);for(var ge=0;ge<ue;ge++)Te[ge]=arguments[ge+2];V.children=Te}return{$$typeof:e,type:L.type,key:Z,ref:ve,props:V,_owner:Ee}},$r.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:i,_context:L},L.Consumer=L},$r.createElement=_,$r.createFactory=function(L){var I=_.bind(null,L);return I.type=L,I},$r.createRef=function(){return{current:null}},$r.forwardRef=function(L){return{$$typeof:l,render:L}},$r.isValidElement=B,$r.lazy=function(L){return{$$typeof:f,_payload:{_status:-1,_result:L},_init:ee}},$r.memo=function(L,I){return{$$typeof:u,type:L,compare:I===void 0?null:I}},$r.startTransition=function(L){var I=Q.transition;Q.transition={};try{L()}finally{Q.transition=I}},$r.unstable_act=X,$r.useCallback=function(L,I){return re.current.useCallback(L,I)},$r.useContext=function(L){return re.current.useContext(L)},$r.useDebugValue=function(){},$r.useDeferredValue=function(L){return re.current.useDeferredValue(L)},$r.useEffect=function(L,I){return re.current.useEffect(L,I)},$r.useId=function(){return re.current.useId()},$r.useImperativeHandle=function(L,I,G){return re.current.useImperativeHandle(L,I,G)},$r.useInsertionEffect=function(L,I){return re.current.useInsertionEffect(L,I)},$r.useLayoutEffect=function(L,I){return re.current.useLayoutEffect(L,I)},$r.useMemo=function(L,I){return re.current.useMemo(L,I)},$r.useReducer=function(L,I,G){return re.current.useReducer(L,I,G)},$r.useRef=function(L){return re.current.useRef(L)},$r.useState=function(L){return re.current.useState(L)},$r.useSyncExternalStore=function(L,I,G){return re.current.useSyncExternalStore(L,I,G)},$r.useTransition=function(){return re.current.useTransition()},$r.version="18.3.1",$r}var RE;function S2(){return RE||(RE=1,Gy.exports=Z7()),Gy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function e9(){if(FE)return mh;FE=1;var e=S2(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,d,u){var f,m={},p=null,g=null;u!==void 0&&(p=""+u),d.key!==void 0&&(p=""+d.key),d.ref!==void 0&&(g=d.ref);for(f in d)n.call(d,f)&&!i.hasOwnProperty(f)&&(m[f]=d[f]);if(l&&l.defaultProps)for(f in d=l.defaultProps,d)m[f]===void 0&&(m[f]=d[f]);return{$$typeof:t,type:l,key:p,ref:g,props:m,_owner:s.current}}return mh.Fragment=r,mh.jsx=o,mh.jsxs=o,mh}var $E;function t9(){return $E||($E=1,Vy.exports=e9()),Vy.exports}var a=t9(),gm={},Yy={exports:{}},ys={},Xy={exports:{}},Jy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE;function r9(){return LE||(LE=1,(function(e){function t(Q,R){var X=Q.length;Q.push(R);e:for(;0<X;){var L=X-1>>>1,I=Q[L];if(0<s(I,R))Q[L]=R,Q[X]=I,X=L;else break e}}function r(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var R=Q[0],X=Q.pop();if(X!==R){Q[0]=X;e:for(var L=0,I=Q.length,G=I>>>1;L<G;){var V=2*(L+1)-1,Z=Q[V],ve=V+1,Ee=Q[ve];if(0>s(Z,X))ve<I&&0>s(Ee,Z)?(Q[L]=Ee,Q[ve]=X,L=ve):(Q[L]=Z,Q[V]=X,L=V);else if(ve<I&&0>s(Ee,X))Q[L]=Ee,Q[ve]=X,L=ve;else break e}}return R}function s(Q,R){var X=Q.sortIndex-R.sortIndex;return X!==0?X:Q.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],u=[],f=1,m=null,p=3,g=!1,b=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(Q){for(var R=r(u);R!==null;){if(R.callback===null)n(u);else if(R.startTime<=Q)n(u),R.sortIndex=R.expirationTime,t(d,R);else break;R=r(u)}}function A(Q){if(y=!1,w(Q),!b)if(r(d)!==null)b=!0,ee(C);else{var R=r(u);R!==null&&re(A,R.startTime-Q)}}function C(Q,R){b=!1,y&&(y=!1,k(_),_=-1),g=!0;var X=p;try{for(w(R),m=r(d);m!==null&&(!(m.expirationTime>R)||Q&&!F());){var L=m.callback;if(typeof L=="function"){m.callback=null,p=m.priorityLevel;var I=L(m.expirationTime<=R);R=e.unstable_now(),typeof I=="function"?m.callback=I:m===r(d)&&n(d),w(R)}else n(d);m=r(d)}if(m!==null)var G=!0;else{var V=r(u);V!==null&&re(A,V.startTime-R),G=!1}return G}finally{m=null,p=X,g=!1}}var N=!1,E=null,_=-1,O=5,B=-1;function F(){return!(e.unstable_now()-B<O)}function D(){if(E!==null){var Q=e.unstable_now();B=Q;var R=!0;try{R=E(!0,Q)}finally{R?H():(N=!1,E=null)}}else N=!1}var H;if(typeof S=="function")H=function(){S(D)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,W=ne.port2;ne.port1.onmessage=D,H=function(){W.postMessage(null)}}else H=function(){v(D,0)};function ee(Q){E=Q,N||(N=!0,H())}function re(Q,R){_=v(function(){Q(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_continueExecution=function(){b||g||(b=!0,ee(C))},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(Q){switch(p){case 1:case 2:case 3:var R=3;break;default:R=p}var X=p;p=R;try{return Q()}finally{p=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Q,R){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var X=p;p=Q;try{return R()}finally{p=X}},e.unstable_scheduleCallback=function(Q,R,X){var L=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?L+X:L):X=L,Q){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=X+I,Q={id:f++,callback:R,priorityLevel:Q,startTime:X,expirationTime:I,sortIndex:-1},X>L?(Q.sortIndex=X,t(u,Q),r(d)===null&&Q===r(u)&&(y?(k(_),_=-1):y=!0,re(A,X-L))):(Q.sortIndex=I,t(d,Q),b||g||(b=!0,ee(C))),Q},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(Q){var R=p;return function(){var X=p;p=R;try{return Q.apply(this,arguments)}finally{p=X}}}})(Jy)),Jy}var BE;function a9(){return BE||(BE=1,Xy.exports=r9()),Xy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UE;function n9(){if(UE)return ys;UE=1;var e=S2(),t=a9();function r(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,x=1;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(c,h){o(c,h),o(c+"Capture",h)}function o(c,h){for(s[c]=h,c=0;c<h.length;c++)n.add(h[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(c){return d.call(m,c)?!0:d.call(f,c)?!1:u.test(c)?m[c]=!0:(f[c]=!0,!1)}function g(c,h,x,j){if(x!==null&&x.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return j?!1:x!==null?!x.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function b(c,h,x,j){if(h===null||typeof h>"u"||g(c,h,x,j))return!0;if(j)return!1;if(x!==null)switch(x.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function y(c,h,x,j,T,M,te){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=j,this.attributeNamespace=T,this.mustUseProperty=x,this.propertyName=c,this.type=h,this.sanitizeURL=M,this.removeEmptyString=te}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){v[c]=new y(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var h=c[0];v[h]=new y(h,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){v[c]=new y(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){v[c]=new y(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){v[c]=new y(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){v[c]=new y(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){v[c]=new y(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){v[c]=new y(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){v[c]=new y(c,5,!1,c.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function S(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var h=c.replace(k,S);v[h]=new y(h,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var h=c.replace(k,S);v[h]=new y(h,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var h=c.replace(k,S);v[h]=new y(h,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){v[c]=new y(c,1,!1,c.toLowerCase(),null,!1,!1)}),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){v[c]=new y(c,1,!1,c.toLowerCase(),null,!0,!0)});function w(c,h,x,j){var T=v.hasOwnProperty(h)?v[h]:null;(T!==null?T.type!==0:j||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(b(h,x,T,j)&&(x=null),j||T===null?p(h)&&(x===null?c.removeAttribute(h):c.setAttribute(h,""+x)):T.mustUseProperty?c[T.propertyName]=x===null?T.type===3?!1:"":x:(h=T.attributeName,j=T.attributeNamespace,x===null?c.removeAttribute(h):(T=T.type,x=T===3||T===4&&x===!0?"":""+x,j?c.setAttributeNS(j,h,x):c.setAttribute(h,x))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),N=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),F=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),Q=Symbol.iterator;function R(c){return c===null||typeof c!="object"?null:(c=Q&&c[Q]||c["@@iterator"],typeof c=="function"?c:null)}var X=Object.assign,L;function I(c){if(L===void 0)try{throw Error()}catch(x){var h=x.stack.trim().match(/\n( *(at )?)/);L=h&&h[1]||""}return`
`+L+c}var G=!1;function V(c,h){if(!c||G)return"";G=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Ye){var j=Ye}Reflect.construct(c,[],h)}else{try{h.call()}catch(Ye){j=Ye}c.call(h.prototype)}else{try{throw Error()}catch(Ye){j=Ye}c()}}catch(Ye){if(Ye&&j&&typeof Ye.stack=="string"){for(var T=Ye.stack.split(`
`),M=j.stack.split(`
`),te=T.length-1,Ne=M.length-1;1<=te&&0<=Ne&&T[te]!==M[Ne];)Ne--;for(;1<=te&&0<=Ne;te--,Ne--)if(T[te]!==M[Ne]){if(te!==1||Ne!==1)do if(te--,Ne--,0>Ne||T[te]!==M[Ne]){var Ae=`
`+T[te].replace(" at new "," at ");return c.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",c.displayName)),Ae}while(1<=te&&0<=Ne);break}}}finally{G=!1,Error.prepareStackTrace=x}return(c=c?c.displayName||c.name:"")?I(c):""}function Z(c){switch(c.tag){case 5:return I(c.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return c=V(c.type,!1),c;case 11:return c=V(c.type.render,!1),c;case 1:return c=V(c.type,!0),c;default:return""}}function ve(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case E:return"Fragment";case N:return"Portal";case O:return"Profiler";case _:return"StrictMode";case H:return"Suspense";case ne:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case F:return(c.displayName||"Context")+".Consumer";case B:return(c._context.displayName||"Context")+".Provider";case D:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case W:return h=c.displayName||null,h!==null?h:ve(c.type)||"Memo";case ee:h=c._payload,c=c._init;try{return ve(c(h))}catch{}}return null}function Ee(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(h);case 8:return h===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function Te(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function ue(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function ge(c){var h=ue(c)?"checked":"value",x=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),j=""+c[h];if(!c.hasOwnProperty(h)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var T=x.get,M=x.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return T.call(this)},set:function(te){j=""+te,M.call(this,te)}}),Object.defineProperty(c,h,{enumerable:x.enumerable}),{getValue:function(){return j},setValue:function(te){j=""+te},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function Fe(c){c._valueTracker||(c._valueTracker=ge(c))}function J(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var x=h.getValue(),j="";return c&&(j=ue(c)?c.checked?"true":"false":c.value),c=j,c!==x?(h.setValue(c),!0):!1}function Ze(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function rt(c,h){var x=h.checked;return X({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??c._wrapperState.initialChecked})}function Tt(c,h){var x=h.defaultValue==null?"":h.defaultValue,j=h.checked!=null?h.checked:h.defaultChecked;x=Te(h.value!=null?h.value:x),c._wrapperState={initialChecked:j,initialValue:x,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function ze(c,h){h=h.checked,h!=null&&w(c,"checked",h,!1)}function Re(c,h){ze(c,h);var x=Te(h.value),j=h.type;if(x!=null)j==="number"?(x===0&&c.value===""||c.value!=x)&&(c.value=""+x):c.value!==""+x&&(c.value=""+x);else if(j==="submit"||j==="reset"){c.removeAttribute("value");return}h.hasOwnProperty("value")?Se(c,h.type,x):h.hasOwnProperty("defaultValue")&&Se(c,h.type,Te(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(c.defaultChecked=!!h.defaultChecked)}function Ce(c,h,x){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var j=h.type;if(!(j!=="submit"&&j!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+c._wrapperState.initialValue,x||h===c.value||(c.value=h),c.defaultValue=h}x=c.name,x!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,x!==""&&(c.name=x)}function Se(c,h,x){(h!=="number"||Ze(c.ownerDocument)!==c)&&(x==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+x&&(c.defaultValue=""+x))}var Qe=Array.isArray;function kt(c,h,x,j){if(c=c.options,h){h={};for(var T=0;T<x.length;T++)h["$"+x[T]]=!0;for(x=0;x<c.length;x++)T=h.hasOwnProperty("$"+c[x].value),c[x].selected!==T&&(c[x].selected=T),T&&j&&(c[x].defaultSelected=!0)}else{for(x=""+Te(x),h=null,T=0;T<c.length;T++){if(c[T].value===x){c[T].selected=!0,j&&(c[T].defaultSelected=!0);return}h!==null||c[T].disabled||(h=c[T])}h!==null&&(h.selected=!0)}}function Ct(c,h){if(h.dangerouslySetInnerHTML!=null)throw Error(r(91));return X({},h,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function yr(c,h){var x=h.value;if(x==null){if(x=h.children,h=h.defaultValue,x!=null){if(h!=null)throw Error(r(92));if(Qe(x)){if(1<x.length)throw Error(r(93));x=x[0]}h=x}h==null&&(h=""),x=h}c._wrapperState={initialValue:Te(x)}}function Kt(c,h){var x=Te(h.value),j=Te(h.defaultValue);x!=null&&(x=""+x,x!==c.value&&(c.value=x),h.defaultValue==null&&c.defaultValue!==x&&(c.defaultValue=x)),j!=null&&(c.defaultValue=""+j)}function Rr(c){var h=c.textContent;h===c._wrapperState.initialValue&&h!==""&&h!==null&&(c.value=h)}function Pr(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function da(c,h){return c==null||c==="http://www.w3.org/1999/xhtml"?Pr(h):c==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var ur,Br=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,x,j,T){MSApp.execUnsafeLocalFunction(function(){return c(h,x,j,T)})}:c})(function(c,h){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=h;else{for(ur=ur||document.createElement("div"),ur.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=ur.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;h.firstChild;)c.appendChild(h.firstChild)}});function It(c,h){if(h){var x=c.firstChild;if(x&&x===c.lastChild&&x.nodeType===3){x.nodeValue=h;return}}c.textContent=h}var er={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ir=["Webkit","ms","Moz","O"];Object.keys(er).forEach(function(c){Ir.forEach(function(h){h=h+c.charAt(0).toUpperCase()+c.substring(1),er[h]=er[c]})});function Tr(c,h,x){return h==null||typeof h=="boolean"||h===""?"":x||typeof h!="number"||h===0||er.hasOwnProperty(c)&&er[c]?(""+h).trim():h+"px"}function tr(c,h){c=c.style;for(var x in h)if(h.hasOwnProperty(x)){var j=x.indexOf("--")===0,T=Tr(x,h[x],j);x==="float"&&(x="cssFloat"),j?c.setProperty(x,T):c[x]=T}}var Da=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oa(c,h){if(h){if(Da[c]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(r(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(r(61))}if(h.style!=null&&typeof h.style!="object")throw Error(r(62))}}function He(c,h){if(c.indexOf("-")===-1)return typeof h.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ie=null;function lt(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Ke=null,pt=null,Nt=null;function Rt(c){if(c=Zu(c)){if(typeof Ke!="function")throw Error(r(280));var h=c.stateNode;h&&(h=Tf(h),Ke(c.stateNode,c.type,h))}}function Pt(c){pt?Nt?Nt.push(c):Nt=[c]:pt=c}function Dr(){if(pt){var c=pt,h=Nt;if(Nt=pt=null,Rt(c),h)for(c=0;c<h.length;c++)Rt(h[c])}}function pa(c,h){return c(h)}function oa(){}var ot=!1;function Sr(c,h,x){if(ot)return c(h,x);ot=!0;try{return pa(c,h,x)}finally{ot=!1,(pt!==null||Nt!==null)&&(oa(),Dr())}}function Ot(c,h){var x=c.stateNode;if(x===null)return null;var j=Tf(x);if(j===null)return null;x=j[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(c=c.type,j=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!j;break e;default:c=!1}if(c)return null;if(x&&typeof x!="function")throw Error(r(231,h,typeof x));return x}var xe=!1;if(l)try{var it={};Object.defineProperty(it,"passive",{get:function(){xe=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{xe=!1}function dt(c,h,x,j,T,M,te,Ne,Ae){var Ye=Array.prototype.slice.call(arguments,3);try{h.apply(x,Ye)}catch(yt){this.onError(yt)}}var gt=!1,ft=null,q=!1,oe=null,ae={onError:function(c){gt=!0,ft=c}};function se(c,h,x,j,T,M,te,Ne,Ae){gt=!1,ft=null,dt.apply(ae,arguments)}function K(c,h,x,j,T,M,te,Ne,Ae){if(se.apply(this,arguments),gt){if(gt){var Ye=ft;gt=!1,ft=null}else throw Error(r(198));q||(q=!0,oe=Ye)}}function Y(c){var h=c,x=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(x=h.return),c=h.return;while(c)}return h.tag===3?x:null}function le(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function pe(c){if(Y(c)!==c)throw Error(r(188))}function z(c){var h=c.alternate;if(!h){if(h=Y(c),h===null)throw Error(r(188));return h!==c?null:c}for(var x=c,j=h;;){var T=x.return;if(T===null)break;var M=T.alternate;if(M===null){if(j=T.return,j!==null){x=j;continue}break}if(T.child===M.child){for(M=T.child;M;){if(M===x)return pe(T),c;if(M===j)return pe(T),h;M=M.sibling}throw Error(r(188))}if(x.return!==j.return)x=T,j=M;else{for(var te=!1,Ne=T.child;Ne;){if(Ne===x){te=!0,x=T,j=M;break}if(Ne===j){te=!0,j=T,x=M;break}Ne=Ne.sibling}if(!te){for(Ne=M.child;Ne;){if(Ne===x){te=!0,x=M,j=T;break}if(Ne===j){te=!0,j=M,x=T;break}Ne=Ne.sibling}if(!te)throw Error(r(189))}}if(x.alternate!==j)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?c:h}function ce(c){return c=z(c),c!==null?ye(c):null}function ye(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=ye(c);if(h!==null)return h;c=c.sibling}return null}var $e=t.unstable_scheduleCallback,De=t.unstable_cancelCallback,Ge=t.unstable_shouldYield,Be=t.unstable_requestPaint,qe=t.unstable_now,St=t.unstable_getCurrentPriorityLevel,ie=t.unstable_ImmediatePriority,fe=t.unstable_UserBlockingPriority,_e=t.unstable_NormalPriority,nt=t.unstable_LowPriority,xt=t.unstable_IdlePriority,ut=null,Dt=null;function Wr(c){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(ut,c,void 0,(c.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:Ve,pr=Math.log,rr=Math.LN2;function Ve(c){return c>>>=0,c===0?32:31-(pr(c)/rr|0)|0}var vt=64,Ft=4194304;function ua(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Ws(c,h){var x=c.pendingLanes;if(x===0)return 0;var j=0,T=c.suspendedLanes,M=c.pingedLanes,te=x&268435455;if(te!==0){var Ne=te&~T;Ne!==0?j=ua(Ne):(M&=te,M!==0&&(j=ua(M)))}else te=x&~T,te!==0?j=ua(te):M!==0&&(j=ua(M));if(j===0)return 0;if(h!==0&&h!==j&&(h&T)===0&&(T=j&-j,M=h&-h,T>=M||T===16&&(M&4194240)!==0))return h;if((j&4)!==0&&(j|=x&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=j;0<h;)x=31-Xt(h),T=1<<x,j|=c[x],h&=~T;return j}function Ua(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xo(c,h){for(var x=c.suspendedLanes,j=c.pingedLanes,T=c.expirationTimes,M=c.pendingLanes;0<M;){var te=31-Xt(M),Ne=1<<te,Ae=T[te];Ae===-1?((Ne&x)===0||(Ne&j)!==0)&&(T[te]=Ua(Ne,h)):Ae<=h&&(c.expiredLanes|=Ne),M&=~Ne}}function Sa(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function jr(){var c=vt;return vt<<=1,(vt&4194240)===0&&(vt=64),c}function Jo(c){for(var h=[],x=0;31>x;x++)h.push(c);return h}function es(c,h,x){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-Xt(h),c[h]=x}function Rl(c,h){var x=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var j=c.eventTimes;for(c=c.expirationTimes;0<x;){var T=31-Xt(x),M=1<<T;h[T]=0,j[T]=-1,c[T]=-1,x&=~M}}function Fn(c,h){var x=c.entangledLanes|=h;for(c=c.entanglements;x;){var j=31-Xt(x),T=1<<j;T&h|c[j]&h&&(c[j]|=h),x&=~T}}var U=0;function we(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var he,be,je,me,de,Me=!1,Je=[],ct=null,et=null,Ue=null,bt=new Map,Vt=new Map,gr=[],Lr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hr(c,h){switch(c){case"focusin":case"focusout":ct=null;break;case"dragenter":case"dragleave":et=null;break;case"mouseover":case"mouseout":Ue=null;break;case"pointerover":case"pointerout":bt.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vt.delete(h.pointerId)}}function $t(c,h,x,j,T,M){return c===null||c.nativeEvent!==M?(c={blockedOn:h,domEventName:x,eventSystemFlags:j,nativeEvent:M,targetContainers:[T]},h!==null&&(h=Zu(h),h!==null&&be(h)),c):(c.eventSystemFlags|=j,h=c.targetContainers,T!==null&&h.indexOf(T)===-1&&h.push(T),c)}function Nr(c,h,x,j,T){switch(h){case"focusin":return ct=$t(ct,c,h,x,j,T),!0;case"dragenter":return et=$t(et,c,h,x,j,T),!0;case"mouseover":return Ue=$t(Ue,c,h,x,j,T),!0;case"pointerover":var M=T.pointerId;return bt.set(M,$t(bt.get(M)||null,c,h,x,j,T)),!0;case"gotpointercapture":return M=T.pointerId,Vt.set(M,$t(Vt.get(M)||null,c,h,x,j,T)),!0}return!1}function Or(c){var h=$l(c.target);if(h!==null){var x=Y(h);if(x!==null){if(h=x.tag,h===13){if(h=le(x),h!==null){c.blockedOn=h,de(c.priority,function(){je(x)});return}}else if(h===3&&x.stateNode.current.memoizedState.isDehydrated){c.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}c.blockedOn=null}function ar(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var x=ha(c.domEventName,c.eventSystemFlags,h[0],c.nativeEvent);if(x===null){x=c.nativeEvent;var j=new x.constructor(x.type,x);Ie=j,x.target.dispatchEvent(j),Ie=null}else return h=Zu(x),h!==null&&be(h),c.blockedOn=x,!1;h.shift()}return!0}function zr(c,h,x){ar(c)&&x.delete(h)}function tt(){Me=!1,ct!==null&&ar(ct)&&(ct=null),et!==null&&ar(et)&&(et=null),Ue!==null&&ar(Ue)&&(Ue=null),bt.forEach(zr),Vt.forEach(zr)}function Wt(c,h){c.blockedOn===h&&(c.blockedOn=null,Me||(Me=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,tt)))}function ht(c){function h(T){return Wt(T,c)}if(0<Je.length){Wt(Je[0],c);for(var x=1;x<Je.length;x++){var j=Je[x];j.blockedOn===c&&(j.blockedOn=null)}}for(ct!==null&&Wt(ct,c),et!==null&&Wt(et,c),Ue!==null&&Wt(Ue,c),bt.forEach(h),Vt.forEach(h),x=0;x<gr.length;x++)j=gr[x],j.blockedOn===c&&(j.blockedOn=null);for(;0<gr.length&&(x=gr[0],x.blockedOn===null);)Or(x),x.blockedOn===null&&gr.shift()}var Pe=A.ReactCurrentBatchConfig,wt=!0;function Er(c,h,x,j){var T=U,M=Pe.transition;Pe.transition=null;try{U=1,Fr(c,h,x,j)}finally{U=T,Pe.transition=M}}function ir(c,h,x,j){var T=U,M=Pe.transition;Pe.transition=null;try{U=4,Fr(c,h,x,j)}finally{U=T,Pe.transition=M}}function Fr(c,h,x,j){if(wt){var T=ha(c,h,x,j);if(T===null)Fx(c,h,j,_r,x),hr(c,j);else if(Nr(T,c,h,x,j))j.stopPropagation();else if(hr(c,j),h&4&&-1<Lr.indexOf(c)){for(;T!==null;){var M=Zu(T);if(M!==null&&he(M),M=ha(c,h,x,j),M===null&&Fx(c,h,j,_r,x),M===T)break;T=M}T!==null&&j.stopPropagation()}else Fx(c,h,j,null,x)}}var _r=null;function ha(c,h,x,j){if(_r=null,c=lt(j),c=$l(c),c!==null)if(h=Y(c),h===null)c=null;else if(x=h.tag,x===13){if(c=le(h),c!==null)return c;c=null}else if(x===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null);return _r=c,null}function Kr(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(St()){case ie:return 1;case fe:return 4;case _e:case nt:return 16;case xt:return 536870912;default:return 16}default:return 16}}var Zr=null,zs=null,Fl=null;function Uu(){if(Fl)return Fl;var c,h=zs,x=h.length,j,T="value"in Zr?Zr.value:Zr.textContent,M=T.length;for(c=0;c<x&&h[c]===T[c];c++);var te=x-c;for(j=1;j<=te&&h[x-j]===T[M-j];j++);return Fl=T.slice(c,1<j?1-j:void 0)}function Ks(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function mi(){return!0}function lo(){return!1}function $n(c){function h(x,j,T,M,te){this._reactName=x,this._targetInst=T,this.type=j,this.nativeEvent=M,this.target=te,this.currentTarget=null;for(var Ne in c)c.hasOwnProperty(Ne)&&(x=c[Ne],this[Ne]=x?x(M):M[Ne]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?mi:lo,this.isPropagationStopped=lo,this}return X(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=mi)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=mi)},persist:function(){},isPersistent:mi}),h}var Kc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jx=$n(Kc),Hu=X({},Kc,{view:0,detail:0}),S8=$n(Hu),Nx,kx,qu,jf=X({},Hu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_x,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==qu&&(qu&&c.type==="mousemove"?(Nx=c.screenX-qu.screenX,kx=c.screenY-qu.screenY):kx=Nx=0,qu=c),Nx)},movementY:function(c){return"movementY"in c?c.movementY:kx}}),kS=$n(jf),_8=X({},jf,{dataTransfer:0}),E8=$n(_8),C8=X({},Hu,{relatedTarget:0}),Sx=$n(C8),A8=X({},Kc,{animationName:0,elapsedTime:0,pseudoElement:0}),T8=$n(A8),D8=X({},Kc,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),O8=$n(D8),P8=X({},Kc,{data:0}),SS=$n(P8),I8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F8(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=R8[c])?!!h[c]:!1}function _x(){return F8}var $8=X({},Hu,{key:function(c){if(c.key){var h=I8[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=Ks(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?M8[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_x,charCode:function(c){return c.type==="keypress"?Ks(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Ks(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),L8=$n($8),B8=X({},jf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_S=$n(B8),U8=X({},Hu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_x}),H8=$n(U8),q8=X({},Kc,{propertyName:0,elapsedTime:0,pseudoElement:0}),W8=$n(q8),z8=X({},jf,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),K8=$n(z8),V8=[9,13,27,32],Ex=l&&"CompositionEvent"in window,Wu=null;l&&"documentMode"in document&&(Wu=document.documentMode);var G8=l&&"TextEvent"in window&&!Wu,ES=l&&(!Ex||Wu&&8<Wu&&11>=Wu),CS=" ",AS=!1;function TS(c,h){switch(c){case"keyup":return V8.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DS(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Vc=!1;function Y8(c,h){switch(c){case"compositionend":return DS(h);case"keypress":return h.which!==32?null:(AS=!0,CS);case"textInput":return c=h.data,c===CS&&AS?null:c;default:return null}}function X8(c,h){if(Vc)return c==="compositionend"||!Ex&&TS(c,h)?(c=Uu(),Fl=zs=Zr=null,Vc=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return ES&&h.locale!=="ko"?null:h.data;default:return null}}var J8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OS(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!J8[c.type]:h==="textarea"}function PS(c,h,x,j){Pt(j),h=Ef(h,"onChange"),0<h.length&&(x=new jx("onChange","change",null,x,j),c.push({event:x,listeners:h}))}var zu=null,Ku=null;function Q8(c){JS(c,0)}function Nf(c){var h=Qc(c);if(J(h))return c}function Z8(c,h){if(c==="change")return h}var IS=!1;if(l){var Cx;if(l){var Ax="oninput"in document;if(!Ax){var MS=document.createElement("div");MS.setAttribute("oninput","return;"),Ax=typeof MS.oninput=="function"}Cx=Ax}else Cx=!1;IS=Cx&&(!document.documentMode||9<document.documentMode)}function RS(){zu&&(zu.detachEvent("onpropertychange",FS),Ku=zu=null)}function FS(c){if(c.propertyName==="value"&&Nf(Ku)){var h=[];PS(h,Ku,c,lt(c)),Sr(Q8,h)}}function e7(c,h,x){c==="focusin"?(RS(),zu=h,Ku=x,zu.attachEvent("onpropertychange",FS)):c==="focusout"&&RS()}function t7(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Nf(Ku)}function r7(c,h){if(c==="click")return Nf(h)}function a7(c,h){if(c==="input"||c==="change")return Nf(h)}function n7(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var pi=typeof Object.is=="function"?Object.is:n7;function Vu(c,h){if(pi(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var x=Object.keys(c),j=Object.keys(h);if(x.length!==j.length)return!1;for(j=0;j<x.length;j++){var T=x[j];if(!d.call(h,T)||!pi(c[T],h[T]))return!1}return!0}function $S(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function LS(c,h){var x=$S(c);c=0;for(var j;x;){if(x.nodeType===3){if(j=c+x.textContent.length,c<=h&&j>=h)return{node:x,offset:h-c};c=j}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=$S(x)}}function BS(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?BS(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function US(){for(var c=window,h=Ze();h instanceof c.HTMLIFrameElement;){try{var x=typeof h.contentWindow.location.href=="string"}catch{x=!1}if(x)c=h.contentWindow;else break;h=Ze(c.document)}return h}function Tx(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}function s7(c){var h=US(),x=c.focusedElem,j=c.selectionRange;if(h!==x&&x&&x.ownerDocument&&BS(x.ownerDocument.documentElement,x)){if(j!==null&&Tx(x)){if(h=j.start,c=j.end,c===void 0&&(c=h),"selectionStart"in x)x.selectionStart=h,x.selectionEnd=Math.min(c,x.value.length);else if(c=(h=x.ownerDocument||document)&&h.defaultView||window,c.getSelection){c=c.getSelection();var T=x.textContent.length,M=Math.min(j.start,T);j=j.end===void 0?M:Math.min(j.end,T),!c.extend&&M>j&&(T=j,j=M,M=T),T=LS(x,M);var te=LS(x,j);T&&te&&(c.rangeCount!==1||c.anchorNode!==T.node||c.anchorOffset!==T.offset||c.focusNode!==te.node||c.focusOffset!==te.offset)&&(h=h.createRange(),h.setStart(T.node,T.offset),c.removeAllRanges(),M>j?(c.addRange(h),c.extend(te.node,te.offset)):(h.setEnd(te.node,te.offset),c.addRange(h)))}}for(h=[],c=x;c=c.parentNode;)c.nodeType===1&&h.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<h.length;x++)c=h[x],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var i7=l&&"documentMode"in document&&11>=document.documentMode,Gc=null,Dx=null,Gu=null,Ox=!1;function HS(c,h,x){var j=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Ox||Gc==null||Gc!==Ze(j)||(j=Gc,"selectionStart"in j&&Tx(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),Gu&&Vu(Gu,j)||(Gu=j,j=Ef(Dx,"onSelect"),0<j.length&&(h=new jx("onSelect","select",null,h,x),c.push({event:h,listeners:j}),h.target=Gc)))}function kf(c,h){var x={};return x[c.toLowerCase()]=h.toLowerCase(),x["Webkit"+c]="webkit"+h,x["Moz"+c]="moz"+h,x}var Yc={animationend:kf("Animation","AnimationEnd"),animationiteration:kf("Animation","AnimationIteration"),animationstart:kf("Animation","AnimationStart"),transitionend:kf("Transition","TransitionEnd")},Px={},qS={};l&&(qS=document.createElement("div").style,"AnimationEvent"in window||(delete Yc.animationend.animation,delete Yc.animationiteration.animation,delete Yc.animationstart.animation),"TransitionEvent"in window||delete Yc.transitionend.transition);function Sf(c){if(Px[c])return Px[c];if(!Yc[c])return c;var h=Yc[c],x;for(x in h)if(h.hasOwnProperty(x)&&x in qS)return Px[c]=h[x];return c}var WS=Sf("animationend"),zS=Sf("animationiteration"),KS=Sf("animationstart"),VS=Sf("transitionend"),GS=new Map,YS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qo(c,h){GS.set(c,h),i(h,[c])}for(var Ix=0;Ix<YS.length;Ix++){var Mx=YS[Ix],o7=Mx.toLowerCase(),l7=Mx[0].toUpperCase()+Mx.slice(1);Qo(o7,"on"+l7)}Qo(WS,"onAnimationEnd"),Qo(zS,"onAnimationIteration"),Qo(KS,"onAnimationStart"),Qo("dblclick","onDoubleClick"),Qo("focusin","onFocus"),Qo("focusout","onBlur"),Qo(VS,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c7=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yu));function XS(c,h,x){var j=c.type||"unknown-event";c.currentTarget=x,K(j,h,void 0,c),c.currentTarget=null}function JS(c,h){h=(h&4)!==0;for(var x=0;x<c.length;x++){var j=c[x],T=j.event;j=j.listeners;e:{var M=void 0;if(h)for(var te=j.length-1;0<=te;te--){var Ne=j[te],Ae=Ne.instance,Ye=Ne.currentTarget;if(Ne=Ne.listener,Ae!==M&&T.isPropagationStopped())break e;XS(T,Ne,Ye),M=Ae}else for(te=0;te<j.length;te++){if(Ne=j[te],Ae=Ne.instance,Ye=Ne.currentTarget,Ne=Ne.listener,Ae!==M&&T.isPropagationStopped())break e;XS(T,Ne,Ye),M=Ae}}}if(q)throw c=oe,q=!1,oe=null,c}function wa(c,h){var x=h[qx];x===void 0&&(x=h[qx]=new Set);var j=c+"__bubble";x.has(j)||(QS(h,c,2,!1),x.add(j))}function Rx(c,h,x){var j=0;h&&(j|=4),QS(x,c,j,h)}var _f="_reactListening"+Math.random().toString(36).slice(2);function Xu(c){if(!c[_f]){c[_f]=!0,n.forEach(function(x){x!=="selectionchange"&&(c7.has(x)||Rx(x,!1,c),Rx(x,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[_f]||(h[_f]=!0,Rx("selectionchange",!1,h))}}function QS(c,h,x,j){switch(Kr(h)){case 1:var T=Er;break;case 4:T=ir;break;default:T=Fr}x=T.bind(null,h,x,c),T=void 0,!xe||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(T=!0),j?T!==void 0?c.addEventListener(h,x,{capture:!0,passive:T}):c.addEventListener(h,x,!0):T!==void 0?c.addEventListener(h,x,{passive:T}):c.addEventListener(h,x,!1)}function Fx(c,h,x,j,T){var M=j;if((h&1)===0&&(h&2)===0&&j!==null)e:for(;;){if(j===null)return;var te=j.tag;if(te===3||te===4){var Ne=j.stateNode.containerInfo;if(Ne===T||Ne.nodeType===8&&Ne.parentNode===T)break;if(te===4)for(te=j.return;te!==null;){var Ae=te.tag;if((Ae===3||Ae===4)&&(Ae=te.stateNode.containerInfo,Ae===T||Ae.nodeType===8&&Ae.parentNode===T))return;te=te.return}for(;Ne!==null;){if(te=$l(Ne),te===null)return;if(Ae=te.tag,Ae===5||Ae===6){j=M=te;continue e}Ne=Ne.parentNode}}j=j.return}Sr(function(){var Ye=M,yt=lt(x),jt=[];e:{var mt=GS.get(c);if(mt!==void 0){var Mt=jx,Ut=c;switch(c){case"keypress":if(Ks(x)===0)break e;case"keydown":case"keyup":Mt=L8;break;case"focusin":Ut="focus",Mt=Sx;break;case"focusout":Ut="blur",Mt=Sx;break;case"beforeblur":case"afterblur":Mt=Sx;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Mt=kS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Mt=E8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Mt=H8;break;case WS:case zS:case KS:Mt=T8;break;case VS:Mt=W8;break;case"scroll":Mt=S8;break;case"wheel":Mt=K8;break;case"copy":case"cut":case"paste":Mt=O8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Mt=_S}var zt=(h&4)!==0,Ha=!zt&&c==="scroll",Le=zt?mt!==null?mt+"Capture":null:mt;zt=[];for(var Oe=Ye,We;Oe!==null;){We=Oe;var Et=We.stateNode;if(We.tag===5&&Et!==null&&(We=Et,Le!==null&&(Et=Ot(Oe,Le),Et!=null&&zt.push(Ju(Oe,Et,We)))),Ha)break;Oe=Oe.return}0<zt.length&&(mt=new Mt(mt,Ut,null,x,yt),jt.push({event:mt,listeners:zt}))}}if((h&7)===0){e:{if(mt=c==="mouseover"||c==="pointerover",Mt=c==="mouseout"||c==="pointerout",mt&&x!==Ie&&(Ut=x.relatedTarget||x.fromElement)&&($l(Ut)||Ut[co]))break e;if((Mt||mt)&&(mt=yt.window===yt?yt:(mt=yt.ownerDocument)?mt.defaultView||mt.parentWindow:window,Mt?(Ut=x.relatedTarget||x.toElement,Mt=Ye,Ut=Ut?$l(Ut):null,Ut!==null&&(Ha=Y(Ut),Ut!==Ha||Ut.tag!==5&&Ut.tag!==6)&&(Ut=null)):(Mt=null,Ut=Ye),Mt!==Ut)){if(zt=kS,Et="onMouseLeave",Le="onMouseEnter",Oe="mouse",(c==="pointerout"||c==="pointerover")&&(zt=_S,Et="onPointerLeave",Le="onPointerEnter",Oe="pointer"),Ha=Mt==null?mt:Qc(Mt),We=Ut==null?mt:Qc(Ut),mt=new zt(Et,Oe+"leave",Mt,x,yt),mt.target=Ha,mt.relatedTarget=We,Et=null,$l(yt)===Ye&&(zt=new zt(Le,Oe+"enter",Ut,x,yt),zt.target=We,zt.relatedTarget=Ha,Et=zt),Ha=Et,Mt&&Ut)t:{for(zt=Mt,Le=Ut,Oe=0,We=zt;We;We=Xc(We))Oe++;for(We=0,Et=Le;Et;Et=Xc(Et))We++;for(;0<Oe-We;)zt=Xc(zt),Oe--;for(;0<We-Oe;)Le=Xc(Le),We--;for(;Oe--;){if(zt===Le||Le!==null&&zt===Le.alternate)break t;zt=Xc(zt),Le=Xc(Le)}zt=null}else zt=null;Mt!==null&&ZS(jt,mt,Mt,zt,!1),Ut!==null&&Ha!==null&&ZS(jt,Ha,Ut,zt,!0)}}e:{if(mt=Ye?Qc(Ye):window,Mt=mt.nodeName&&mt.nodeName.toLowerCase(),Mt==="select"||Mt==="input"&&mt.type==="file")var Gt=Z8;else if(OS(mt))if(IS)Gt=a7;else{Gt=t7;var nr=e7}else(Mt=mt.nodeName)&&Mt.toLowerCase()==="input"&&(mt.type==="checkbox"||mt.type==="radio")&&(Gt=r7);if(Gt&&(Gt=Gt(c,Ye))){PS(jt,Gt,x,yt);break e}nr&&nr(c,mt,Ye),c==="focusout"&&(nr=mt._wrapperState)&&nr.controlled&&mt.type==="number"&&Se(mt,"number",mt.value)}switch(nr=Ye?Qc(Ye):window,c){case"focusin":(OS(nr)||nr.contentEditable==="true")&&(Gc=nr,Dx=Ye,Gu=null);break;case"focusout":Gu=Dx=Gc=null;break;case"mousedown":Ox=!0;break;case"contextmenu":case"mouseup":case"dragend":Ox=!1,HS(jt,x,yt);break;case"selectionchange":if(i7)break;case"keydown":case"keyup":HS(jt,x,yt)}var sr;if(Ex)e:{switch(c){case"compositionstart":var vr="onCompositionStart";break e;case"compositionend":vr="onCompositionEnd";break e;case"compositionupdate":vr="onCompositionUpdate";break e}vr=void 0}else Vc?TS(c,x)&&(vr="onCompositionEnd"):c==="keydown"&&x.keyCode===229&&(vr="onCompositionStart");vr&&(ES&&x.locale!=="ko"&&(Vc||vr!=="onCompositionStart"?vr==="onCompositionEnd"&&Vc&&(sr=Uu()):(Zr=yt,zs="value"in Zr?Zr.value:Zr.textContent,Vc=!0)),nr=Ef(Ye,vr),0<nr.length&&(vr=new SS(vr,c,null,x,yt),jt.push({event:vr,listeners:nr}),sr?vr.data=sr:(sr=DS(x),sr!==null&&(vr.data=sr)))),(sr=G8?Y8(c,x):X8(c,x))&&(Ye=Ef(Ye,"onBeforeInput"),0<Ye.length&&(yt=new SS("onBeforeInput","beforeinput",null,x,yt),jt.push({event:yt,listeners:Ye}),yt.data=sr))}JS(jt,h)})}function Ju(c,h,x){return{instance:c,listener:h,currentTarget:x}}function Ef(c,h){for(var x=h+"Capture",j=[];c!==null;){var T=c,M=T.stateNode;T.tag===5&&M!==null&&(T=M,M=Ot(c,x),M!=null&&j.unshift(Ju(c,M,T)),M=Ot(c,h),M!=null&&j.push(Ju(c,M,T))),c=c.return}return j}function Xc(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function ZS(c,h,x,j,T){for(var M=h._reactName,te=[];x!==null&&x!==j;){var Ne=x,Ae=Ne.alternate,Ye=Ne.stateNode;if(Ae!==null&&Ae===j)break;Ne.tag===5&&Ye!==null&&(Ne=Ye,T?(Ae=Ot(x,M),Ae!=null&&te.unshift(Ju(x,Ae,Ne))):T||(Ae=Ot(x,M),Ae!=null&&te.push(Ju(x,Ae,Ne)))),x=x.return}te.length!==0&&c.push({event:h,listeners:te})}var d7=/\r\n?/g,u7=/\u0000|\uFFFD/g;function e_(c){return(typeof c=="string"?c:""+c).replace(d7,`
`).replace(u7,"")}function Cf(c,h,x){if(h=e_(h),e_(c)!==h&&x)throw Error(r(425))}function Af(){}var $x=null,Lx=null;function Bx(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Ux=typeof setTimeout=="function"?setTimeout:void 0,h7=typeof clearTimeout=="function"?clearTimeout:void 0,t_=typeof Promise=="function"?Promise:void 0,f7=typeof queueMicrotask=="function"?queueMicrotask:typeof t_<"u"?function(c){return t_.resolve(null).then(c).catch(m7)}:Ux;function m7(c){setTimeout(function(){throw c})}function Hx(c,h){var x=h,j=0;do{var T=x.nextSibling;if(c.removeChild(x),T&&T.nodeType===8)if(x=T.data,x==="/$"){if(j===0){c.removeChild(T),ht(h);return}j--}else x!=="$"&&x!=="$?"&&x!=="$!"||j++;x=T}while(x);ht(h)}function Zo(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return c}function r_(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var x=c.data;if(x==="$"||x==="$!"||x==="$?"){if(h===0)return c;h--}else x==="/$"&&h++}c=c.previousSibling}return null}var Jc=Math.random().toString(36).slice(2),Bi="__reactFiber$"+Jc,Qu="__reactProps$"+Jc,co="__reactContainer$"+Jc,qx="__reactEvents$"+Jc,p7="__reactListeners$"+Jc,g7="__reactHandles$"+Jc;function $l(c){var h=c[Bi];if(h)return h;for(var x=c.parentNode;x;){if(h=x[co]||x[Bi]){if(x=h.alternate,h.child!==null||x!==null&&x.child!==null)for(c=r_(c);c!==null;){if(x=c[Bi])return x;c=r_(c)}return h}c=x,x=c.parentNode}return null}function Zu(c){return c=c[Bi]||c[co],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Qc(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function Tf(c){return c[Qu]||null}var Wx=[],Zc=-1;function el(c){return{current:c}}function ja(c){0>Zc||(c.current=Wx[Zc],Wx[Zc]=null,Zc--)}function ga(c,h){Zc++,Wx[Zc]=c.current,c.current=h}var tl={},Ln=el(tl),fs=el(!1),Ll=tl;function ed(c,h){var x=c.type.contextTypes;if(!x)return tl;var j=c.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===h)return j.__reactInternalMemoizedMaskedChildContext;var T={},M;for(M in x)T[M]=h[M];return j&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=T),T}function ms(c){return c=c.childContextTypes,c!=null}function Df(){ja(fs),ja(Ln)}function a_(c,h,x){if(Ln.current!==tl)throw Error(r(168));ga(Ln,h),ga(fs,x)}function n_(c,h,x){var j=c.stateNode;if(h=h.childContextTypes,typeof j.getChildContext!="function")return x;j=j.getChildContext();for(var T in j)if(!(T in h))throw Error(r(108,Ee(c)||"Unknown",T));return X({},x,j)}function Of(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||tl,Ll=Ln.current,ga(Ln,c),ga(fs,fs.current),!0}function s_(c,h,x){var j=c.stateNode;if(!j)throw Error(r(169));x?(c=n_(c,h,Ll),j.__reactInternalMemoizedMergedChildContext=c,ja(fs),ja(Ln),ga(Ln,c)):ja(fs),ga(fs,x)}var uo=null,Pf=!1,zx=!1;function i_(c){uo===null?uo=[c]:uo.push(c)}function x7(c){Pf=!0,i_(c)}function rl(){if(!zx&&uo!==null){zx=!0;var c=0,h=U;try{var x=uo;for(U=1;c<x.length;c++){var j=x[c];do j=j(!0);while(j!==null)}uo=null,Pf=!1}catch(T){throw uo!==null&&(uo=uo.slice(c+1)),$e(ie,rl),T}finally{U=h,zx=!1}}return null}var td=[],rd=0,If=null,Mf=0,Vs=[],Gs=0,Bl=null,ho=1,fo="";function Ul(c,h){td[rd++]=Mf,td[rd++]=If,If=c,Mf=h}function o_(c,h,x){Vs[Gs++]=ho,Vs[Gs++]=fo,Vs[Gs++]=Bl,Bl=c;var j=ho;c=fo;var T=32-Xt(j)-1;j&=~(1<<T),x+=1;var M=32-Xt(h)+T;if(30<M){var te=T-T%5;M=(j&(1<<te)-1).toString(32),j>>=te,T-=te,ho=1<<32-Xt(h)+T|x<<T|j,fo=M+c}else ho=1<<M|x<<T|j,fo=c}function Kx(c){c.return!==null&&(Ul(c,1),o_(c,1,0))}function Vx(c){for(;c===If;)If=td[--rd],td[rd]=null,Mf=td[--rd],td[rd]=null;for(;c===Bl;)Bl=Vs[--Gs],Vs[Gs]=null,fo=Vs[--Gs],Vs[Gs]=null,ho=Vs[--Gs],Vs[Gs]=null}var Es=null,Cs=null,_a=!1,gi=null;function l_(c,h){var x=Qs(5,null,null,0);x.elementType="DELETED",x.stateNode=h,x.return=c,h=c.deletions,h===null?(c.deletions=[x],c.flags|=16):h.push(x)}function c_(c,h){switch(c.tag){case 5:var x=c.type;return h=h.nodeType!==1||x.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(c.stateNode=h,Es=c,Cs=Zo(h.firstChild),!0):!1;case 6:return h=c.pendingProps===""||h.nodeType!==3?null:h,h!==null?(c.stateNode=h,Es=c,Cs=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(x=Bl!==null?{id:ho,overflow:fo}:null,c.memoizedState={dehydrated:h,treeContext:x,retryLane:1073741824},x=Qs(18,null,null,0),x.stateNode=h,x.return=c,c.child=x,Es=c,Cs=null,!0):!1;default:return!1}}function Gx(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Yx(c){if(_a){var h=Cs;if(h){var x=h;if(!c_(c,h)){if(Gx(c))throw Error(r(418));h=Zo(x.nextSibling);var j=Es;h&&c_(c,h)?l_(j,x):(c.flags=c.flags&-4097|2,_a=!1,Es=c)}}else{if(Gx(c))throw Error(r(418));c.flags=c.flags&-4097|2,_a=!1,Es=c}}}function d_(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Es=c}function Rf(c){if(c!==Es)return!1;if(!_a)return d_(c),_a=!0,!1;var h;if((h=c.tag!==3)&&!(h=c.tag!==5)&&(h=c.type,h=h!=="head"&&h!=="body"&&!Bx(c.type,c.memoizedProps)),h&&(h=Cs)){if(Gx(c))throw u_(),Error(r(418));for(;h;)l_(c,h),h=Zo(h.nextSibling)}if(d_(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8){var x=c.data;if(x==="/$"){if(h===0){Cs=Zo(c.nextSibling);break e}h--}else x!=="$"&&x!=="$!"&&x!=="$?"||h++}c=c.nextSibling}Cs=null}}else Cs=Es?Zo(c.stateNode.nextSibling):null;return!0}function u_(){for(var c=Cs;c;)c=Zo(c.nextSibling)}function ad(){Cs=Es=null,_a=!1}function Xx(c){gi===null?gi=[c]:gi.push(c)}var y7=A.ReactCurrentBatchConfig;function eh(c,h,x){if(c=x.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(r(309));var j=x.stateNode}if(!j)throw Error(r(147,c));var T=j,M=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===M?h.ref:(h=function(te){var Ne=T.refs;te===null?delete Ne[M]:Ne[M]=te},h._stringRef=M,h)}if(typeof c!="string")throw Error(r(284));if(!x._owner)throw Error(r(290,c))}return c}function Ff(c,h){throw c=Object.prototype.toString.call(h),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function h_(c){var h=c._init;return h(c._payload)}function f_(c){function h(Le,Oe){if(c){var We=Le.deletions;We===null?(Le.deletions=[Oe],Le.flags|=16):We.push(Oe)}}function x(Le,Oe){if(!c)return null;for(;Oe!==null;)h(Le,Oe),Oe=Oe.sibling;return null}function j(Le,Oe){for(Le=new Map;Oe!==null;)Oe.key!==null?Le.set(Oe.key,Oe):Le.set(Oe.index,Oe),Oe=Oe.sibling;return Le}function T(Le,Oe){return Le=dl(Le,Oe),Le.index=0,Le.sibling=null,Le}function M(Le,Oe,We){return Le.index=We,c?(We=Le.alternate,We!==null?(We=We.index,We<Oe?(Le.flags|=2,Oe):We):(Le.flags|=2,Oe)):(Le.flags|=1048576,Oe)}function te(Le){return c&&Le.alternate===null&&(Le.flags|=2),Le}function Ne(Le,Oe,We,Et){return Oe===null||Oe.tag!==6?(Oe=Uy(We,Le.mode,Et),Oe.return=Le,Oe):(Oe=T(Oe,We),Oe.return=Le,Oe)}function Ae(Le,Oe,We,Et){var Gt=We.type;return Gt===E?yt(Le,Oe,We.props.children,Et,We.key):Oe!==null&&(Oe.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===ee&&h_(Gt)===Oe.type)?(Et=T(Oe,We.props),Et.ref=eh(Le,Oe,We),Et.return=Le,Et):(Et=om(We.type,We.key,We.props,null,Le.mode,Et),Et.ref=eh(Le,Oe,We),Et.return=Le,Et)}function Ye(Le,Oe,We,Et){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==We.containerInfo||Oe.stateNode.implementation!==We.implementation?(Oe=Hy(We,Le.mode,Et),Oe.return=Le,Oe):(Oe=T(Oe,We.children||[]),Oe.return=Le,Oe)}function yt(Le,Oe,We,Et,Gt){return Oe===null||Oe.tag!==7?(Oe=Yl(We,Le.mode,Et,Gt),Oe.return=Le,Oe):(Oe=T(Oe,We),Oe.return=Le,Oe)}function jt(Le,Oe,We){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return Oe=Uy(""+Oe,Le.mode,We),Oe.return=Le,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case C:return We=om(Oe.type,Oe.key,Oe.props,null,Le.mode,We),We.ref=eh(Le,null,Oe),We.return=Le,We;case N:return Oe=Hy(Oe,Le.mode,We),Oe.return=Le,Oe;case ee:var Et=Oe._init;return jt(Le,Et(Oe._payload),We)}if(Qe(Oe)||R(Oe))return Oe=Yl(Oe,Le.mode,We,null),Oe.return=Le,Oe;Ff(Le,Oe)}return null}function mt(Le,Oe,We,Et){var Gt=Oe!==null?Oe.key:null;if(typeof We=="string"&&We!==""||typeof We=="number")return Gt!==null?null:Ne(Le,Oe,""+We,Et);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case C:return We.key===Gt?Ae(Le,Oe,We,Et):null;case N:return We.key===Gt?Ye(Le,Oe,We,Et):null;case ee:return Gt=We._init,mt(Le,Oe,Gt(We._payload),Et)}if(Qe(We)||R(We))return Gt!==null?null:yt(Le,Oe,We,Et,null);Ff(Le,We)}return null}function Mt(Le,Oe,We,Et,Gt){if(typeof Et=="string"&&Et!==""||typeof Et=="number")return Le=Le.get(We)||null,Ne(Oe,Le,""+Et,Gt);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case C:return Le=Le.get(Et.key===null?We:Et.key)||null,Ae(Oe,Le,Et,Gt);case N:return Le=Le.get(Et.key===null?We:Et.key)||null,Ye(Oe,Le,Et,Gt);case ee:var nr=Et._init;return Mt(Le,Oe,We,nr(Et._payload),Gt)}if(Qe(Et)||R(Et))return Le=Le.get(We)||null,yt(Oe,Le,Et,Gt,null);Ff(Oe,Et)}return null}function Ut(Le,Oe,We,Et){for(var Gt=null,nr=null,sr=Oe,vr=Oe=0,vn=null;sr!==null&&vr<We.length;vr++){sr.index>vr?(vn=sr,sr=null):vn=sr.sibling;var Jr=mt(Le,sr,We[vr],Et);if(Jr===null){sr===null&&(sr=vn);break}c&&sr&&Jr.alternate===null&&h(Le,sr),Oe=M(Jr,Oe,vr),nr===null?Gt=Jr:nr.sibling=Jr,nr=Jr,sr=vn}if(vr===We.length)return x(Le,sr),_a&&Ul(Le,vr),Gt;if(sr===null){for(;vr<We.length;vr++)sr=jt(Le,We[vr],Et),sr!==null&&(Oe=M(sr,Oe,vr),nr===null?Gt=sr:nr.sibling=sr,nr=sr);return _a&&Ul(Le,vr),Gt}for(sr=j(Le,sr);vr<We.length;vr++)vn=Mt(sr,Le,vr,We[vr],Et),vn!==null&&(c&&vn.alternate!==null&&sr.delete(vn.key===null?vr:vn.key),Oe=M(vn,Oe,vr),nr===null?Gt=vn:nr.sibling=vn,nr=vn);return c&&sr.forEach(function(ul){return h(Le,ul)}),_a&&Ul(Le,vr),Gt}function zt(Le,Oe,We,Et){var Gt=R(We);if(typeof Gt!="function")throw Error(r(150));if(We=Gt.call(We),We==null)throw Error(r(151));for(var nr=Gt=null,sr=Oe,vr=Oe=0,vn=null,Jr=We.next();sr!==null&&!Jr.done;vr++,Jr=We.next()){sr.index>vr?(vn=sr,sr=null):vn=sr.sibling;var ul=mt(Le,sr,Jr.value,Et);if(ul===null){sr===null&&(sr=vn);break}c&&sr&&ul.alternate===null&&h(Le,sr),Oe=M(ul,Oe,vr),nr===null?Gt=ul:nr.sibling=ul,nr=ul,sr=vn}if(Jr.done)return x(Le,sr),_a&&Ul(Le,vr),Gt;if(sr===null){for(;!Jr.done;vr++,Jr=We.next())Jr=jt(Le,Jr.value,Et),Jr!==null&&(Oe=M(Jr,Oe,vr),nr===null?Gt=Jr:nr.sibling=Jr,nr=Jr);return _a&&Ul(Le,vr),Gt}for(sr=j(Le,sr);!Jr.done;vr++,Jr=We.next())Jr=Mt(sr,Le,vr,Jr.value,Et),Jr!==null&&(c&&Jr.alternate!==null&&sr.delete(Jr.key===null?vr:Jr.key),Oe=M(Jr,Oe,vr),nr===null?Gt=Jr:nr.sibling=Jr,nr=Jr);return c&&sr.forEach(function(J7){return h(Le,J7)}),_a&&Ul(Le,vr),Gt}function Ha(Le,Oe,We,Et){if(typeof We=="object"&&We!==null&&We.type===E&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case C:e:{for(var Gt=We.key,nr=Oe;nr!==null;){if(nr.key===Gt){if(Gt=We.type,Gt===E){if(nr.tag===7){x(Le,nr.sibling),Oe=T(nr,We.props.children),Oe.return=Le,Le=Oe;break e}}else if(nr.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===ee&&h_(Gt)===nr.type){x(Le,nr.sibling),Oe=T(nr,We.props),Oe.ref=eh(Le,nr,We),Oe.return=Le,Le=Oe;break e}x(Le,nr);break}else h(Le,nr);nr=nr.sibling}We.type===E?(Oe=Yl(We.props.children,Le.mode,Et,We.key),Oe.return=Le,Le=Oe):(Et=om(We.type,We.key,We.props,null,Le.mode,Et),Et.ref=eh(Le,Oe,We),Et.return=Le,Le=Et)}return te(Le);case N:e:{for(nr=We.key;Oe!==null;){if(Oe.key===nr)if(Oe.tag===4&&Oe.stateNode.containerInfo===We.containerInfo&&Oe.stateNode.implementation===We.implementation){x(Le,Oe.sibling),Oe=T(Oe,We.children||[]),Oe.return=Le,Le=Oe;break e}else{x(Le,Oe);break}else h(Le,Oe);Oe=Oe.sibling}Oe=Hy(We,Le.mode,Et),Oe.return=Le,Le=Oe}return te(Le);case ee:return nr=We._init,Ha(Le,Oe,nr(We._payload),Et)}if(Qe(We))return Ut(Le,Oe,We,Et);if(R(We))return zt(Le,Oe,We,Et);Ff(Le,We)}return typeof We=="string"&&We!==""||typeof We=="number"?(We=""+We,Oe!==null&&Oe.tag===6?(x(Le,Oe.sibling),Oe=T(Oe,We),Oe.return=Le,Le=Oe):(x(Le,Oe),Oe=Uy(We,Le.mode,Et),Oe.return=Le,Le=Oe),te(Le)):x(Le,Oe)}return Ha}var nd=f_(!0),m_=f_(!1),$f=el(null),Lf=null,sd=null,Jx=null;function Qx(){Jx=sd=Lf=null}function Zx(c){var h=$f.current;ja($f),c._currentValue=h}function ey(c,h,x){for(;c!==null;){var j=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,j!==null&&(j.childLanes|=h)):j!==null&&(j.childLanes&h)!==h&&(j.childLanes|=h),c===x)break;c=c.return}}function id(c,h){Lf=c,Jx=sd=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&h)!==0&&(ps=!0),c.firstContext=null)}function Ys(c){var h=c._currentValue;if(Jx!==c)if(c={context:c,memoizedValue:h,next:null},sd===null){if(Lf===null)throw Error(r(308));sd=c,Lf.dependencies={lanes:0,firstContext:c}}else sd=sd.next=c;return h}var Hl=null;function ty(c){Hl===null?Hl=[c]:Hl.push(c)}function p_(c,h,x,j){var T=h.interleaved;return T===null?(x.next=x,ty(h)):(x.next=T.next,T.next=x),h.interleaved=x,mo(c,j)}function mo(c,h){c.lanes|=h;var x=c.alternate;for(x!==null&&(x.lanes|=h),x=c,c=c.return;c!==null;)c.childLanes|=h,x=c.alternate,x!==null&&(x.childLanes|=h),x=c,c=c.return;return x.tag===3?x.stateNode:null}var al=!1;function ry(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g_(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function po(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function nl(c,h,x){var j=c.updateQueue;if(j===null)return null;if(j=j.shared,(Yr&2)!==0){var T=j.pending;return T===null?h.next=h:(h.next=T.next,T.next=h),j.pending=h,mo(c,x)}return T=j.interleaved,T===null?(h.next=h,ty(j)):(h.next=T.next,T.next=h),j.interleaved=h,mo(c,x)}function Bf(c,h,x){if(h=h.updateQueue,h!==null&&(h=h.shared,(x&4194240)!==0)){var j=h.lanes;j&=c.pendingLanes,x|=j,h.lanes=x,Fn(c,x)}}function x_(c,h){var x=c.updateQueue,j=c.alternate;if(j!==null&&(j=j.updateQueue,x===j)){var T=null,M=null;if(x=x.firstBaseUpdate,x!==null){do{var te={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};M===null?T=M=te:M=M.next=te,x=x.next}while(x!==null);M===null?T=M=h:M=M.next=h}else T=M=h;x={baseState:j.baseState,firstBaseUpdate:T,lastBaseUpdate:M,shared:j.shared,effects:j.effects},c.updateQueue=x;return}c=x.lastBaseUpdate,c===null?x.firstBaseUpdate=h:c.next=h,x.lastBaseUpdate=h}function Uf(c,h,x,j){var T=c.updateQueue;al=!1;var M=T.firstBaseUpdate,te=T.lastBaseUpdate,Ne=T.shared.pending;if(Ne!==null){T.shared.pending=null;var Ae=Ne,Ye=Ae.next;Ae.next=null,te===null?M=Ye:te.next=Ye,te=Ae;var yt=c.alternate;yt!==null&&(yt=yt.updateQueue,Ne=yt.lastBaseUpdate,Ne!==te&&(Ne===null?yt.firstBaseUpdate=Ye:Ne.next=Ye,yt.lastBaseUpdate=Ae))}if(M!==null){var jt=T.baseState;te=0,yt=Ye=Ae=null,Ne=M;do{var mt=Ne.lane,Mt=Ne.eventTime;if((j&mt)===mt){yt!==null&&(yt=yt.next={eventTime:Mt,lane:0,tag:Ne.tag,payload:Ne.payload,callback:Ne.callback,next:null});e:{var Ut=c,zt=Ne;switch(mt=h,Mt=x,zt.tag){case 1:if(Ut=zt.payload,typeof Ut=="function"){jt=Ut.call(Mt,jt,mt);break e}jt=Ut;break e;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=zt.payload,mt=typeof Ut=="function"?Ut.call(Mt,jt,mt):Ut,mt==null)break e;jt=X({},jt,mt);break e;case 2:al=!0}}Ne.callback!==null&&Ne.lane!==0&&(c.flags|=64,mt=T.effects,mt===null?T.effects=[Ne]:mt.push(Ne))}else Mt={eventTime:Mt,lane:mt,tag:Ne.tag,payload:Ne.payload,callback:Ne.callback,next:null},yt===null?(Ye=yt=Mt,Ae=jt):yt=yt.next=Mt,te|=mt;if(Ne=Ne.next,Ne===null){if(Ne=T.shared.pending,Ne===null)break;mt=Ne,Ne=mt.next,mt.next=null,T.lastBaseUpdate=mt,T.shared.pending=null}}while(!0);if(yt===null&&(Ae=jt),T.baseState=Ae,T.firstBaseUpdate=Ye,T.lastBaseUpdate=yt,h=T.shared.interleaved,h!==null){T=h;do te|=T.lane,T=T.next;while(T!==h)}else M===null&&(T.shared.lanes=0);zl|=te,c.lanes=te,c.memoizedState=jt}}function y_(c,h,x){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var j=c[h],T=j.callback;if(T!==null){if(j.callback=null,j=x,typeof T!="function")throw Error(r(191,T));T.call(j)}}}var th={},Ui=el(th),rh=el(th),ah=el(th);function ql(c){if(c===th)throw Error(r(174));return c}function ay(c,h){switch(ga(ah,h),ga(rh,c),ga(Ui,th),c=h.nodeType,c){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:da(null,"");break;default:c=c===8?h.parentNode:h,h=c.namespaceURI||null,c=c.tagName,h=da(h,c)}ja(Ui),ga(Ui,h)}function od(){ja(Ui),ja(rh),ja(ah)}function v_(c){ql(ah.current);var h=ql(Ui.current),x=da(h,c.type);h!==x&&(ga(rh,c),ga(Ui,x))}function ny(c){rh.current===c&&(ja(Ui),ja(rh))}var Pa=el(0);function Hf(c){for(var h=c;h!==null;){if(h.tag===13){var x=h.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var sy=[];function iy(){for(var c=0;c<sy.length;c++)sy[c]._workInProgressVersionPrimary=null;sy.length=0}var qf=A.ReactCurrentDispatcher,oy=A.ReactCurrentBatchConfig,Wl=0,Ia=null,nn=null,xn=null,Wf=!1,nh=!1,sh=0,v7=0;function Bn(){throw Error(r(321))}function ly(c,h){if(h===null)return!1;for(var x=0;x<h.length&&x<c.length;x++)if(!pi(c[x],h[x]))return!1;return!0}function cy(c,h,x,j,T,M){if(Wl=M,Ia=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,qf.current=c===null||c.memoizedState===null?N7:k7,c=x(j,T),nh){M=0;do{if(nh=!1,sh=0,25<=M)throw Error(r(301));M+=1,xn=nn=null,h.updateQueue=null,qf.current=S7,c=x(j,T)}while(nh)}if(qf.current=Vf,h=nn!==null&&nn.next!==null,Wl=0,xn=nn=Ia=null,Wf=!1,h)throw Error(r(300));return c}function dy(){var c=sh!==0;return sh=0,c}function Hi(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?Ia.memoizedState=xn=c:xn=xn.next=c,xn}function Xs(){if(nn===null){var c=Ia.alternate;c=c!==null?c.memoizedState:null}else c=nn.next;var h=xn===null?Ia.memoizedState:xn.next;if(h!==null)xn=h,nn=c;else{if(c===null)throw Error(r(310));nn=c,c={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},xn===null?Ia.memoizedState=xn=c:xn=xn.next=c}return xn}function ih(c,h){return typeof h=="function"?h(c):h}function uy(c){var h=Xs(),x=h.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=c;var j=nn,T=j.baseQueue,M=x.pending;if(M!==null){if(T!==null){var te=T.next;T.next=M.next,M.next=te}j.baseQueue=T=M,x.pending=null}if(T!==null){M=T.next,j=j.baseState;var Ne=te=null,Ae=null,Ye=M;do{var yt=Ye.lane;if((Wl&yt)===yt)Ae!==null&&(Ae=Ae.next={lane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),j=Ye.hasEagerState?Ye.eagerState:c(j,Ye.action);else{var jt={lane:yt,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null};Ae===null?(Ne=Ae=jt,te=j):Ae=Ae.next=jt,Ia.lanes|=yt,zl|=yt}Ye=Ye.next}while(Ye!==null&&Ye!==M);Ae===null?te=j:Ae.next=Ne,pi(j,h.memoizedState)||(ps=!0),h.memoizedState=j,h.baseState=te,h.baseQueue=Ae,x.lastRenderedState=j}if(c=x.interleaved,c!==null){T=c;do M=T.lane,Ia.lanes|=M,zl|=M,T=T.next;while(T!==c)}else T===null&&(x.lanes=0);return[h.memoizedState,x.dispatch]}function hy(c){var h=Xs(),x=h.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=c;var j=x.dispatch,T=x.pending,M=h.memoizedState;if(T!==null){x.pending=null;var te=T=T.next;do M=c(M,te.action),te=te.next;while(te!==T);pi(M,h.memoizedState)||(ps=!0),h.memoizedState=M,h.baseQueue===null&&(h.baseState=M),x.lastRenderedState=M}return[M,j]}function b_(){}function w_(c,h){var x=Ia,j=Xs(),T=h(),M=!pi(j.memoizedState,T);if(M&&(j.memoizedState=T,ps=!0),j=j.queue,fy(k_.bind(null,x,j,c),[c]),j.getSnapshot!==h||M||xn!==null&&xn.memoizedState.tag&1){if(x.flags|=2048,oh(9,N_.bind(null,x,j,T,h),void 0,null),yn===null)throw Error(r(349));(Wl&30)!==0||j_(x,h,T)}return T}function j_(c,h,x){c.flags|=16384,c={getSnapshot:h,value:x},h=Ia.updateQueue,h===null?(h={lastEffect:null,stores:null},Ia.updateQueue=h,h.stores=[c]):(x=h.stores,x===null?h.stores=[c]:x.push(c))}function N_(c,h,x,j){h.value=x,h.getSnapshot=j,S_(h)&&__(c)}function k_(c,h,x){return x(function(){S_(h)&&__(c)})}function S_(c){var h=c.getSnapshot;c=c.value;try{var x=h();return!pi(c,x)}catch{return!0}}function __(c){var h=mo(c,1);h!==null&&bi(h,c,1,-1)}function E_(c){var h=Hi();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ih,lastRenderedState:c},h.queue=c,c=c.dispatch=j7.bind(null,Ia,c),[h.memoizedState,c]}function oh(c,h,x,j){return c={tag:c,create:h,destroy:x,deps:j,next:null},h=Ia.updateQueue,h===null?(h={lastEffect:null,stores:null},Ia.updateQueue=h,h.lastEffect=c.next=c):(x=h.lastEffect,x===null?h.lastEffect=c.next=c:(j=x.next,x.next=c,c.next=j,h.lastEffect=c)),c}function C_(){return Xs().memoizedState}function zf(c,h,x,j){var T=Hi();Ia.flags|=c,T.memoizedState=oh(1|h,x,void 0,j===void 0?null:j)}function Kf(c,h,x,j){var T=Xs();j=j===void 0?null:j;var M=void 0;if(nn!==null){var te=nn.memoizedState;if(M=te.destroy,j!==null&&ly(j,te.deps)){T.memoizedState=oh(h,x,M,j);return}}Ia.flags|=c,T.memoizedState=oh(1|h,x,M,j)}function A_(c,h){return zf(8390656,8,c,h)}function fy(c,h){return Kf(2048,8,c,h)}function T_(c,h){return Kf(4,2,c,h)}function D_(c,h){return Kf(4,4,c,h)}function O_(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function P_(c,h,x){return x=x!=null?x.concat([c]):null,Kf(4,4,O_.bind(null,h,c),x)}function my(){}function I_(c,h){var x=Xs();h=h===void 0?null:h;var j=x.memoizedState;return j!==null&&h!==null&&ly(h,j[1])?j[0]:(x.memoizedState=[c,h],c)}function M_(c,h){var x=Xs();h=h===void 0?null:h;var j=x.memoizedState;return j!==null&&h!==null&&ly(h,j[1])?j[0]:(c=c(),x.memoizedState=[c,h],c)}function R_(c,h,x){return(Wl&21)===0?(c.baseState&&(c.baseState=!1,ps=!0),c.memoizedState=x):(pi(x,h)||(x=jr(),Ia.lanes|=x,zl|=x,c.baseState=!0),h)}function b7(c,h){var x=U;U=x!==0&&4>x?x:4,c(!0);var j=oy.transition;oy.transition={};try{c(!1),h()}finally{U=x,oy.transition=j}}function F_(){return Xs().memoizedState}function w7(c,h,x){var j=ll(c);if(x={lane:j,action:x,hasEagerState:!1,eagerState:null,next:null},$_(c))L_(h,x);else if(x=p_(c,h,x,j),x!==null){var T=rs();bi(x,c,j,T),B_(x,h,j)}}function j7(c,h,x){var j=ll(c),T={lane:j,action:x,hasEagerState:!1,eagerState:null,next:null};if($_(c))L_(h,T);else{var M=c.alternate;if(c.lanes===0&&(M===null||M.lanes===0)&&(M=h.lastRenderedReducer,M!==null))try{var te=h.lastRenderedState,Ne=M(te,x);if(T.hasEagerState=!0,T.eagerState=Ne,pi(Ne,te)){var Ae=h.interleaved;Ae===null?(T.next=T,ty(h)):(T.next=Ae.next,Ae.next=T),h.interleaved=T;return}}catch{}finally{}x=p_(c,h,T,j),x!==null&&(T=rs(),bi(x,c,j,T),B_(x,h,j))}}function $_(c){var h=c.alternate;return c===Ia||h!==null&&h===Ia}function L_(c,h){nh=Wf=!0;var x=c.pending;x===null?h.next=h:(h.next=x.next,x.next=h),c.pending=h}function B_(c,h,x){if((x&4194240)!==0){var j=h.lanes;j&=c.pendingLanes,x|=j,h.lanes=x,Fn(c,x)}}var Vf={readContext:Ys,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useInsertionEffect:Bn,useLayoutEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useMutableSource:Bn,useSyncExternalStore:Bn,useId:Bn,unstable_isNewReconciler:!1},N7={readContext:Ys,useCallback:function(c,h){return Hi().memoizedState=[c,h===void 0?null:h],c},useContext:Ys,useEffect:A_,useImperativeHandle:function(c,h,x){return x=x!=null?x.concat([c]):null,zf(4194308,4,O_.bind(null,h,c),x)},useLayoutEffect:function(c,h){return zf(4194308,4,c,h)},useInsertionEffect:function(c,h){return zf(4,2,c,h)},useMemo:function(c,h){var x=Hi();return h=h===void 0?null:h,c=c(),x.memoizedState=[c,h],c},useReducer:function(c,h,x){var j=Hi();return h=x!==void 0?x(h):h,j.memoizedState=j.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},j.queue=c,c=c.dispatch=w7.bind(null,Ia,c),[j.memoizedState,c]},useRef:function(c){var h=Hi();return c={current:c},h.memoizedState=c},useState:E_,useDebugValue:my,useDeferredValue:function(c){return Hi().memoizedState=c},useTransition:function(){var c=E_(!1),h=c[0];return c=b7.bind(null,c[1]),Hi().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,x){var j=Ia,T=Hi();if(_a){if(x===void 0)throw Error(r(407));x=x()}else{if(x=h(),yn===null)throw Error(r(349));(Wl&30)!==0||j_(j,h,x)}T.memoizedState=x;var M={value:x,getSnapshot:h};return T.queue=M,A_(k_.bind(null,j,M,c),[c]),j.flags|=2048,oh(9,N_.bind(null,j,M,x,h),void 0,null),x},useId:function(){var c=Hi(),h=yn.identifierPrefix;if(_a){var x=fo,j=ho;x=(j&~(1<<32-Xt(j)-1)).toString(32)+x,h=":"+h+"R"+x,x=sh++,0<x&&(h+="H"+x.toString(32)),h+=":"}else x=v7++,h=":"+h+"r"+x.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},k7={readContext:Ys,useCallback:I_,useContext:Ys,useEffect:fy,useImperativeHandle:P_,useInsertionEffect:T_,useLayoutEffect:D_,useMemo:M_,useReducer:uy,useRef:C_,useState:function(){return uy(ih)},useDebugValue:my,useDeferredValue:function(c){var h=Xs();return R_(h,nn.memoizedState,c)},useTransition:function(){var c=uy(ih)[0],h=Xs().memoizedState;return[c,h]},useMutableSource:b_,useSyncExternalStore:w_,useId:F_,unstable_isNewReconciler:!1},S7={readContext:Ys,useCallback:I_,useContext:Ys,useEffect:fy,useImperativeHandle:P_,useInsertionEffect:T_,useLayoutEffect:D_,useMemo:M_,useReducer:hy,useRef:C_,useState:function(){return hy(ih)},useDebugValue:my,useDeferredValue:function(c){var h=Xs();return nn===null?h.memoizedState=c:R_(h,nn.memoizedState,c)},useTransition:function(){var c=hy(ih)[0],h=Xs().memoizedState;return[c,h]},useMutableSource:b_,useSyncExternalStore:w_,useId:F_,unstable_isNewReconciler:!1};function xi(c,h){if(c&&c.defaultProps){h=X({},h),c=c.defaultProps;for(var x in c)h[x]===void 0&&(h[x]=c[x]);return h}return h}function py(c,h,x,j){h=c.memoizedState,x=x(j,h),x=x==null?h:X({},h,x),c.memoizedState=x,c.lanes===0&&(c.updateQueue.baseState=x)}var Gf={isMounted:function(c){return(c=c._reactInternals)?Y(c)===c:!1},enqueueSetState:function(c,h,x){c=c._reactInternals;var j=rs(),T=ll(c),M=po(j,T);M.payload=h,x!=null&&(M.callback=x),h=nl(c,M,T),h!==null&&(bi(h,c,T,j),Bf(h,c,T))},enqueueReplaceState:function(c,h,x){c=c._reactInternals;var j=rs(),T=ll(c),M=po(j,T);M.tag=1,M.payload=h,x!=null&&(M.callback=x),h=nl(c,M,T),h!==null&&(bi(h,c,T,j),Bf(h,c,T))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var x=rs(),j=ll(c),T=po(x,j);T.tag=2,h!=null&&(T.callback=h),h=nl(c,T,j),h!==null&&(bi(h,c,j,x),Bf(h,c,j))}};function U_(c,h,x,j,T,M,te){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(j,M,te):h.prototype&&h.prototype.isPureReactComponent?!Vu(x,j)||!Vu(T,M):!0}function H_(c,h,x){var j=!1,T=tl,M=h.contextType;return typeof M=="object"&&M!==null?M=Ys(M):(T=ms(h)?Ll:Ln.current,j=h.contextTypes,M=(j=j!=null)?ed(c,T):tl),h=new h(x,M),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Gf,c.stateNode=h,h._reactInternals=c,j&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=T,c.__reactInternalMemoizedMaskedChildContext=M),h}function q_(c,h,x,j){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(x,j),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(x,j),h.state!==c&&Gf.enqueueReplaceState(h,h.state,null)}function gy(c,h,x,j){var T=c.stateNode;T.props=x,T.state=c.memoizedState,T.refs={},ry(c);var M=h.contextType;typeof M=="object"&&M!==null?T.context=Ys(M):(M=ms(h)?Ll:Ln.current,T.context=ed(c,M)),T.state=c.memoizedState,M=h.getDerivedStateFromProps,typeof M=="function"&&(py(c,h,M,x),T.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(h=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),h!==T.state&&Gf.enqueueReplaceState(T,T.state,null),Uf(c,x,T,j),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308)}function ld(c,h){try{var x="",j=h;do x+=Z(j),j=j.return;while(j);var T=x}catch(M){T=`
Error generating stack: `+M.message+`
`+M.stack}return{value:c,source:h,stack:T,digest:null}}function xy(c,h,x){return{value:c,source:null,stack:x??null,digest:h??null}}function yy(c,h){try{console.error(h.value)}catch(x){setTimeout(function(){throw x})}}var _7=typeof WeakMap=="function"?WeakMap:Map;function W_(c,h,x){x=po(-1,x),x.tag=3,x.payload={element:null};var j=h.value;return x.callback=function(){tm||(tm=!0,Py=j),yy(c,h)},x}function z_(c,h,x){x=po(-1,x),x.tag=3;var j=c.type.getDerivedStateFromError;if(typeof j=="function"){var T=h.value;x.payload=function(){return j(T)},x.callback=function(){yy(c,h)}}var M=c.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(x.callback=function(){yy(c,h),typeof j!="function"&&(il===null?il=new Set([this]):il.add(this));var te=h.stack;this.componentDidCatch(h.value,{componentStack:te!==null?te:""})}),x}function K_(c,h,x){var j=c.pingCache;if(j===null){j=c.pingCache=new _7;var T=new Set;j.set(h,T)}else T=j.get(h),T===void 0&&(T=new Set,j.set(h,T));T.has(x)||(T.add(x),c=B7.bind(null,c,h,x),h.then(c,c))}function V_(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function G_(c,h,x,j,T){return(c.mode&1)===0?(c===h?c.flags|=65536:(c.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(h=po(-1,1),h.tag=2,nl(x,h,1))),x.lanes|=1),c):(c.flags|=65536,c.lanes=T,c)}var E7=A.ReactCurrentOwner,ps=!1;function ts(c,h,x,j){h.child=c===null?m_(h,null,x,j):nd(h,c.child,x,j)}function Y_(c,h,x,j,T){x=x.render;var M=h.ref;return id(h,T),j=cy(c,h,x,j,M,T),x=dy(),c!==null&&!ps?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~T,go(c,h,T)):(_a&&x&&Kx(h),h.flags|=1,ts(c,h,j,T),h.child)}function X_(c,h,x,j,T){if(c===null){var M=x.type;return typeof M=="function"&&!By(M)&&M.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(h.tag=15,h.type=M,J_(c,h,M,j,T)):(c=om(x.type,null,j,h,h.mode,T),c.ref=h.ref,c.return=h,h.child=c)}if(M=c.child,(c.lanes&T)===0){var te=M.memoizedProps;if(x=x.compare,x=x!==null?x:Vu,x(te,j)&&c.ref===h.ref)return go(c,h,T)}return h.flags|=1,c=dl(M,j),c.ref=h.ref,c.return=h,h.child=c}function J_(c,h,x,j,T){if(c!==null){var M=c.memoizedProps;if(Vu(M,j)&&c.ref===h.ref)if(ps=!1,h.pendingProps=j=M,(c.lanes&T)!==0)(c.flags&131072)!==0&&(ps=!0);else return h.lanes=c.lanes,go(c,h,T)}return vy(c,h,x,j,T)}function Q_(c,h,x){var j=h.pendingProps,T=j.children,M=c!==null?c.memoizedState:null;if(j.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},ga(dd,As),As|=x;else{if((x&1073741824)===0)return c=M!==null?M.baseLanes|x:x,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,ga(dd,As),As|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},j=M!==null?M.baseLanes:x,ga(dd,As),As|=j}else M!==null?(j=M.baseLanes|x,h.memoizedState=null):j=x,ga(dd,As),As|=j;return ts(c,h,T,x),h.child}function Z_(c,h){var x=h.ref;(c===null&&x!==null||c!==null&&c.ref!==x)&&(h.flags|=512,h.flags|=2097152)}function vy(c,h,x,j,T){var M=ms(x)?Ll:Ln.current;return M=ed(h,M),id(h,T),x=cy(c,h,x,j,M,T),j=dy(),c!==null&&!ps?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~T,go(c,h,T)):(_a&&j&&Kx(h),h.flags|=1,ts(c,h,x,T),h.child)}function eE(c,h,x,j,T){if(ms(x)){var M=!0;Of(h)}else M=!1;if(id(h,T),h.stateNode===null)Xf(c,h),H_(h,x,j),gy(h,x,j,T),j=!0;else if(c===null){var te=h.stateNode,Ne=h.memoizedProps;te.props=Ne;var Ae=te.context,Ye=x.contextType;typeof Ye=="object"&&Ye!==null?Ye=Ys(Ye):(Ye=ms(x)?Ll:Ln.current,Ye=ed(h,Ye));var yt=x.getDerivedStateFromProps,jt=typeof yt=="function"||typeof te.getSnapshotBeforeUpdate=="function";jt||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(Ne!==j||Ae!==Ye)&&q_(h,te,j,Ye),al=!1;var mt=h.memoizedState;te.state=mt,Uf(h,j,te,T),Ae=h.memoizedState,Ne!==j||mt!==Ae||fs.current||al?(typeof yt=="function"&&(py(h,x,yt,j),Ae=h.memoizedState),(Ne=al||U_(h,x,Ne,j,mt,Ae,Ye))?(jt||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount()),typeof te.componentDidMount=="function"&&(h.flags|=4194308)):(typeof te.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=j,h.memoizedState=Ae),te.props=j,te.state=Ae,te.context=Ye,j=Ne):(typeof te.componentDidMount=="function"&&(h.flags|=4194308),j=!1)}else{te=h.stateNode,g_(c,h),Ne=h.memoizedProps,Ye=h.type===h.elementType?Ne:xi(h.type,Ne),te.props=Ye,jt=h.pendingProps,mt=te.context,Ae=x.contextType,typeof Ae=="object"&&Ae!==null?Ae=Ys(Ae):(Ae=ms(x)?Ll:Ln.current,Ae=ed(h,Ae));var Mt=x.getDerivedStateFromProps;(yt=typeof Mt=="function"||typeof te.getSnapshotBeforeUpdate=="function")||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(Ne!==jt||mt!==Ae)&&q_(h,te,j,Ae),al=!1,mt=h.memoizedState,te.state=mt,Uf(h,j,te,T);var Ut=h.memoizedState;Ne!==jt||mt!==Ut||fs.current||al?(typeof Mt=="function"&&(py(h,x,Mt,j),Ut=h.memoizedState),(Ye=al||U_(h,x,Ye,j,mt,Ut,Ae)||!1)?(yt||typeof te.UNSAFE_componentWillUpdate!="function"&&typeof te.componentWillUpdate!="function"||(typeof te.componentWillUpdate=="function"&&te.componentWillUpdate(j,Ut,Ae),typeof te.UNSAFE_componentWillUpdate=="function"&&te.UNSAFE_componentWillUpdate(j,Ut,Ae)),typeof te.componentDidUpdate=="function"&&(h.flags|=4),typeof te.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof te.componentDidUpdate!="function"||Ne===c.memoizedProps&&mt===c.memoizedState||(h.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||Ne===c.memoizedProps&&mt===c.memoizedState||(h.flags|=1024),h.memoizedProps=j,h.memoizedState=Ut),te.props=j,te.state=Ut,te.context=Ae,j=Ye):(typeof te.componentDidUpdate!="function"||Ne===c.memoizedProps&&mt===c.memoizedState||(h.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||Ne===c.memoizedProps&&mt===c.memoizedState||(h.flags|=1024),j=!1)}return by(c,h,x,j,M,T)}function by(c,h,x,j,T,M){Z_(c,h);var te=(h.flags&128)!==0;if(!j&&!te)return T&&s_(h,x,!1),go(c,h,M);j=h.stateNode,E7.current=h;var Ne=te&&typeof x.getDerivedStateFromError!="function"?null:j.render();return h.flags|=1,c!==null&&te?(h.child=nd(h,c.child,null,M),h.child=nd(h,null,Ne,M)):ts(c,h,Ne,M),h.memoizedState=j.state,T&&s_(h,x,!0),h.child}function tE(c){var h=c.stateNode;h.pendingContext?a_(c,h.pendingContext,h.pendingContext!==h.context):h.context&&a_(c,h.context,!1),ay(c,h.containerInfo)}function rE(c,h,x,j,T){return ad(),Xx(T),h.flags|=256,ts(c,h,x,j),h.child}var wy={dehydrated:null,treeContext:null,retryLane:0};function jy(c){return{baseLanes:c,cachePool:null,transitions:null}}function aE(c,h,x){var j=h.pendingProps,T=Pa.current,M=!1,te=(h.flags&128)!==0,Ne;if((Ne=te)||(Ne=c!==null&&c.memoizedState===null?!1:(T&2)!==0),Ne?(M=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(T|=1),ga(Pa,T&1),c===null)return Yx(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((h.mode&1)===0?h.lanes=1:c.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(te=j.children,c=j.fallback,M?(j=h.mode,M=h.child,te={mode:"hidden",children:te},(j&1)===0&&M!==null?(M.childLanes=0,M.pendingProps=te):M=lm(te,j,0,null),c=Yl(c,j,x,null),M.return=h,c.return=h,M.sibling=c,h.child=M,h.child.memoizedState=jy(x),h.memoizedState=wy,c):Ny(h,te));if(T=c.memoizedState,T!==null&&(Ne=T.dehydrated,Ne!==null))return C7(c,h,te,j,Ne,T,x);if(M){M=j.fallback,te=h.mode,T=c.child,Ne=T.sibling;var Ae={mode:"hidden",children:j.children};return(te&1)===0&&h.child!==T?(j=h.child,j.childLanes=0,j.pendingProps=Ae,h.deletions=null):(j=dl(T,Ae),j.subtreeFlags=T.subtreeFlags&14680064),Ne!==null?M=dl(Ne,M):(M=Yl(M,te,x,null),M.flags|=2),M.return=h,j.return=h,j.sibling=M,h.child=j,j=M,M=h.child,te=c.child.memoizedState,te=te===null?jy(x):{baseLanes:te.baseLanes|x,cachePool:null,transitions:te.transitions},M.memoizedState=te,M.childLanes=c.childLanes&~x,h.memoizedState=wy,j}return M=c.child,c=M.sibling,j=dl(M,{mode:"visible",children:j.children}),(h.mode&1)===0&&(j.lanes=x),j.return=h,j.sibling=null,c!==null&&(x=h.deletions,x===null?(h.deletions=[c],h.flags|=16):x.push(c)),h.child=j,h.memoizedState=null,j}function Ny(c,h){return h=lm({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function Yf(c,h,x,j){return j!==null&&Xx(j),nd(h,c.child,null,x),c=Ny(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function C7(c,h,x,j,T,M,te){if(x)return h.flags&256?(h.flags&=-257,j=xy(Error(r(422))),Yf(c,h,te,j)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(M=j.fallback,T=h.mode,j=lm({mode:"visible",children:j.children},T,0,null),M=Yl(M,T,te,null),M.flags|=2,j.return=h,M.return=h,j.sibling=M,h.child=j,(h.mode&1)!==0&&nd(h,c.child,null,te),h.child.memoizedState=jy(te),h.memoizedState=wy,M);if((h.mode&1)===0)return Yf(c,h,te,null);if(T.data==="$!"){if(j=T.nextSibling&&T.nextSibling.dataset,j)var Ne=j.dgst;return j=Ne,M=Error(r(419)),j=xy(M,j,void 0),Yf(c,h,te,j)}if(Ne=(te&c.childLanes)!==0,ps||Ne){if(j=yn,j!==null){switch(te&-te){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(j.suspendedLanes|te))!==0?0:T,T!==0&&T!==M.retryLane&&(M.retryLane=T,mo(c,T),bi(j,c,T,-1))}return Ly(),j=xy(Error(r(421))),Yf(c,h,te,j)}return T.data==="$?"?(h.flags|=128,h.child=c.child,h=U7.bind(null,c),T._reactRetry=h,null):(c=M.treeContext,Cs=Zo(T.nextSibling),Es=h,_a=!0,gi=null,c!==null&&(Vs[Gs++]=ho,Vs[Gs++]=fo,Vs[Gs++]=Bl,ho=c.id,fo=c.overflow,Bl=h),h=Ny(h,j.children),h.flags|=4096,h)}function nE(c,h,x){c.lanes|=h;var j=c.alternate;j!==null&&(j.lanes|=h),ey(c.return,h,x)}function ky(c,h,x,j,T){var M=c.memoizedState;M===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:j,tail:x,tailMode:T}:(M.isBackwards=h,M.rendering=null,M.renderingStartTime=0,M.last=j,M.tail=x,M.tailMode=T)}function sE(c,h,x){var j=h.pendingProps,T=j.revealOrder,M=j.tail;if(ts(c,h,j.children,x),j=Pa.current,(j&2)!==0)j=j&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&nE(c,x,h);else if(c.tag===19)nE(c,x,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}j&=1}if(ga(Pa,j),(h.mode&1)===0)h.memoizedState=null;else switch(T){case"forwards":for(x=h.child,T=null;x!==null;)c=x.alternate,c!==null&&Hf(c)===null&&(T=x),x=x.sibling;x=T,x===null?(T=h.child,h.child=null):(T=x.sibling,x.sibling=null),ky(h,!1,T,x,M);break;case"backwards":for(x=null,T=h.child,h.child=null;T!==null;){if(c=T.alternate,c!==null&&Hf(c)===null){h.child=T;break}c=T.sibling,T.sibling=x,x=T,T=c}ky(h,!0,x,null,M);break;case"together":ky(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Xf(c,h){(h.mode&1)===0&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function go(c,h,x){if(c!==null&&(h.dependencies=c.dependencies),zl|=h.lanes,(x&h.childLanes)===0)return null;if(c!==null&&h.child!==c.child)throw Error(r(153));if(h.child!==null){for(c=h.child,x=dl(c,c.pendingProps),h.child=x,x.return=h;c.sibling!==null;)c=c.sibling,x=x.sibling=dl(c,c.pendingProps),x.return=h;x.sibling=null}return h.child}function A7(c,h,x){switch(h.tag){case 3:tE(h),ad();break;case 5:v_(h);break;case 1:ms(h.type)&&Of(h);break;case 4:ay(h,h.stateNode.containerInfo);break;case 10:var j=h.type._context,T=h.memoizedProps.value;ga($f,j._currentValue),j._currentValue=T;break;case 13:if(j=h.memoizedState,j!==null)return j.dehydrated!==null?(ga(Pa,Pa.current&1),h.flags|=128,null):(x&h.child.childLanes)!==0?aE(c,h,x):(ga(Pa,Pa.current&1),c=go(c,h,x),c!==null?c.sibling:null);ga(Pa,Pa.current&1);break;case 19:if(j=(x&h.childLanes)!==0,(c.flags&128)!==0){if(j)return sE(c,h,x);h.flags|=128}if(T=h.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),ga(Pa,Pa.current),j)break;return null;case 22:case 23:return h.lanes=0,Q_(c,h,x)}return go(c,h,x)}var iE,Sy,oE,lE;iE=function(c,h){for(var x=h.child;x!==null;){if(x.tag===5||x.tag===6)c.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Sy=function(){},oE=function(c,h,x,j){var T=c.memoizedProps;if(T!==j){c=h.stateNode,ql(Ui.current);var M=null;switch(x){case"input":T=rt(c,T),j=rt(c,j),M=[];break;case"select":T=X({},T,{value:void 0}),j=X({},j,{value:void 0}),M=[];break;case"textarea":T=Ct(c,T),j=Ct(c,j),M=[];break;default:typeof T.onClick!="function"&&typeof j.onClick=="function"&&(c.onclick=Af)}Oa(x,j);var te;x=null;for(Ye in T)if(!j.hasOwnProperty(Ye)&&T.hasOwnProperty(Ye)&&T[Ye]!=null)if(Ye==="style"){var Ne=T[Ye];for(te in Ne)Ne.hasOwnProperty(te)&&(x||(x={}),x[te]="")}else Ye!=="dangerouslySetInnerHTML"&&Ye!=="children"&&Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&Ye!=="autoFocus"&&(s.hasOwnProperty(Ye)?M||(M=[]):(M=M||[]).push(Ye,null));for(Ye in j){var Ae=j[Ye];if(Ne=T?.[Ye],j.hasOwnProperty(Ye)&&Ae!==Ne&&(Ae!=null||Ne!=null))if(Ye==="style")if(Ne){for(te in Ne)!Ne.hasOwnProperty(te)||Ae&&Ae.hasOwnProperty(te)||(x||(x={}),x[te]="");for(te in Ae)Ae.hasOwnProperty(te)&&Ne[te]!==Ae[te]&&(x||(x={}),x[te]=Ae[te])}else x||(M||(M=[]),M.push(Ye,x)),x=Ae;else Ye==="dangerouslySetInnerHTML"?(Ae=Ae?Ae.__html:void 0,Ne=Ne?Ne.__html:void 0,Ae!=null&&Ne!==Ae&&(M=M||[]).push(Ye,Ae)):Ye==="children"?typeof Ae!="string"&&typeof Ae!="number"||(M=M||[]).push(Ye,""+Ae):Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ye)?(Ae!=null&&Ye==="onScroll"&&wa("scroll",c),M||Ne===Ae||(M=[])):(M=M||[]).push(Ye,Ae))}x&&(M=M||[]).push("style",x);var Ye=M;(h.updateQueue=Ye)&&(h.flags|=4)}},lE=function(c,h,x,j){x!==j&&(h.flags|=4)};function lh(c,h){if(!_a)switch(c.tailMode){case"hidden":h=c.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?c.tail=null:x.sibling=null;break;case"collapsed":x=c.tail;for(var j=null;x!==null;)x.alternate!==null&&(j=x),x=x.sibling;j===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:j.sibling=null}}function Un(c){var h=c.alternate!==null&&c.alternate.child===c.child,x=0,j=0;if(h)for(var T=c.child;T!==null;)x|=T.lanes|T.childLanes,j|=T.subtreeFlags&14680064,j|=T.flags&14680064,T.return=c,T=T.sibling;else for(T=c.child;T!==null;)x|=T.lanes|T.childLanes,j|=T.subtreeFlags,j|=T.flags,T.return=c,T=T.sibling;return c.subtreeFlags|=j,c.childLanes=x,h}function T7(c,h,x){var j=h.pendingProps;switch(Vx(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(h),null;case 1:return ms(h.type)&&Df(),Un(h),null;case 3:return j=h.stateNode,od(),ja(fs),ja(Ln),iy(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(c===null||c.child===null)&&(Rf(h)?h.flags|=4:c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,gi!==null&&(Ry(gi),gi=null))),Sy(c,h),Un(h),null;case 5:ny(h);var T=ql(ah.current);if(x=h.type,c!==null&&h.stateNode!=null)oE(c,h,x,j,T),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!j){if(h.stateNode===null)throw Error(r(166));return Un(h),null}if(c=ql(Ui.current),Rf(h)){j=h.stateNode,x=h.type;var M=h.memoizedProps;switch(j[Bi]=h,j[Qu]=M,c=(h.mode&1)!==0,x){case"dialog":wa("cancel",j),wa("close",j);break;case"iframe":case"object":case"embed":wa("load",j);break;case"video":case"audio":for(T=0;T<Yu.length;T++)wa(Yu[T],j);break;case"source":wa("error",j);break;case"img":case"image":case"link":wa("error",j),wa("load",j);break;case"details":wa("toggle",j);break;case"input":Tt(j,M),wa("invalid",j);break;case"select":j._wrapperState={wasMultiple:!!M.multiple},wa("invalid",j);break;case"textarea":yr(j,M),wa("invalid",j)}Oa(x,M),T=null;for(var te in M)if(M.hasOwnProperty(te)){var Ne=M[te];te==="children"?typeof Ne=="string"?j.textContent!==Ne&&(M.suppressHydrationWarning!==!0&&Cf(j.textContent,Ne,c),T=["children",Ne]):typeof Ne=="number"&&j.textContent!==""+Ne&&(M.suppressHydrationWarning!==!0&&Cf(j.textContent,Ne,c),T=["children",""+Ne]):s.hasOwnProperty(te)&&Ne!=null&&te==="onScroll"&&wa("scroll",j)}switch(x){case"input":Fe(j),Ce(j,M,!0);break;case"textarea":Fe(j),Rr(j);break;case"select":case"option":break;default:typeof M.onClick=="function"&&(j.onclick=Af)}j=T,h.updateQueue=j,j!==null&&(h.flags|=4)}else{te=T.nodeType===9?T:T.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Pr(x)),c==="http://www.w3.org/1999/xhtml"?x==="script"?(c=te.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof j.is=="string"?c=te.createElement(x,{is:j.is}):(c=te.createElement(x),x==="select"&&(te=c,j.multiple?te.multiple=!0:j.size&&(te.size=j.size))):c=te.createElementNS(c,x),c[Bi]=h,c[Qu]=j,iE(c,h,!1,!1),h.stateNode=c;e:{switch(te=He(x,j),x){case"dialog":wa("cancel",c),wa("close",c),T=j;break;case"iframe":case"object":case"embed":wa("load",c),T=j;break;case"video":case"audio":for(T=0;T<Yu.length;T++)wa(Yu[T],c);T=j;break;case"source":wa("error",c),T=j;break;case"img":case"image":case"link":wa("error",c),wa("load",c),T=j;break;case"details":wa("toggle",c),T=j;break;case"input":Tt(c,j),T=rt(c,j),wa("invalid",c);break;case"option":T=j;break;case"select":c._wrapperState={wasMultiple:!!j.multiple},T=X({},j,{value:void 0}),wa("invalid",c);break;case"textarea":yr(c,j),T=Ct(c,j),wa("invalid",c);break;default:T=j}Oa(x,T),Ne=T;for(M in Ne)if(Ne.hasOwnProperty(M)){var Ae=Ne[M];M==="style"?tr(c,Ae):M==="dangerouslySetInnerHTML"?(Ae=Ae?Ae.__html:void 0,Ae!=null&&Br(c,Ae)):M==="children"?typeof Ae=="string"?(x!=="textarea"||Ae!=="")&&It(c,Ae):typeof Ae=="number"&&It(c,""+Ae):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(s.hasOwnProperty(M)?Ae!=null&&M==="onScroll"&&wa("scroll",c):Ae!=null&&w(c,M,Ae,te))}switch(x){case"input":Fe(c),Ce(c,j,!1);break;case"textarea":Fe(c),Rr(c);break;case"option":j.value!=null&&c.setAttribute("value",""+Te(j.value));break;case"select":c.multiple=!!j.multiple,M=j.value,M!=null?kt(c,!!j.multiple,M,!1):j.defaultValue!=null&&kt(c,!!j.multiple,j.defaultValue,!0);break;default:typeof T.onClick=="function"&&(c.onclick=Af)}switch(x){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}}j&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Un(h),null;case 6:if(c&&h.stateNode!=null)lE(c,h,c.memoizedProps,j);else{if(typeof j!="string"&&h.stateNode===null)throw Error(r(166));if(x=ql(ah.current),ql(Ui.current),Rf(h)){if(j=h.stateNode,x=h.memoizedProps,j[Bi]=h,(M=j.nodeValue!==x)&&(c=Es,c!==null))switch(c.tag){case 3:Cf(j.nodeValue,x,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Cf(j.nodeValue,x,(c.mode&1)!==0)}M&&(h.flags|=4)}else j=(x.nodeType===9?x:x.ownerDocument).createTextNode(j),j[Bi]=h,h.stateNode=j}return Un(h),null;case 13:if(ja(Pa),j=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(_a&&Cs!==null&&(h.mode&1)!==0&&(h.flags&128)===0)u_(),ad(),h.flags|=98560,M=!1;else if(M=Rf(h),j!==null&&j.dehydrated!==null){if(c===null){if(!M)throw Error(r(318));if(M=h.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(r(317));M[Bi]=h}else ad(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Un(h),M=!1}else gi!==null&&(Ry(gi),gi=null),M=!0;if(!M)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=x,h):(j=j!==null,j!==(c!==null&&c.memoizedState!==null)&&j&&(h.child.flags|=8192,(h.mode&1)!==0&&(c===null||(Pa.current&1)!==0?sn===0&&(sn=3):Ly())),h.updateQueue!==null&&(h.flags|=4),Un(h),null);case 4:return od(),Sy(c,h),c===null&&Xu(h.stateNode.containerInfo),Un(h),null;case 10:return Zx(h.type._context),Un(h),null;case 17:return ms(h.type)&&Df(),Un(h),null;case 19:if(ja(Pa),M=h.memoizedState,M===null)return Un(h),null;if(j=(h.flags&128)!==0,te=M.rendering,te===null)if(j)lh(M,!1);else{if(sn!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(te=Hf(c),te!==null){for(h.flags|=128,lh(M,!1),j=te.updateQueue,j!==null&&(h.updateQueue=j,h.flags|=4),h.subtreeFlags=0,j=x,x=h.child;x!==null;)M=x,c=j,M.flags&=14680066,te=M.alternate,te===null?(M.childLanes=0,M.lanes=c,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=te.childLanes,M.lanes=te.lanes,M.child=te.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=te.memoizedProps,M.memoizedState=te.memoizedState,M.updateQueue=te.updateQueue,M.type=te.type,c=te.dependencies,M.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),x=x.sibling;return ga(Pa,Pa.current&1|2),h.child}c=c.sibling}M.tail!==null&&qe()>ud&&(h.flags|=128,j=!0,lh(M,!1),h.lanes=4194304)}else{if(!j)if(c=Hf(te),c!==null){if(h.flags|=128,j=!0,x=c.updateQueue,x!==null&&(h.updateQueue=x,h.flags|=4),lh(M,!0),M.tail===null&&M.tailMode==="hidden"&&!te.alternate&&!_a)return Un(h),null}else 2*qe()-M.renderingStartTime>ud&&x!==1073741824&&(h.flags|=128,j=!0,lh(M,!1),h.lanes=4194304);M.isBackwards?(te.sibling=h.child,h.child=te):(x=M.last,x!==null?x.sibling=te:h.child=te,M.last=te)}return M.tail!==null?(h=M.tail,M.rendering=h,M.tail=h.sibling,M.renderingStartTime=qe(),h.sibling=null,x=Pa.current,ga(Pa,j?x&1|2:x&1),h):(Un(h),null);case 22:case 23:return $y(),j=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==j&&(h.flags|=8192),j&&(h.mode&1)!==0?(As&1073741824)!==0&&(Un(h),h.subtreeFlags&6&&(h.flags|=8192)):Un(h),null;case 24:return null;case 25:return null}throw Error(r(156,h.tag))}function D7(c,h){switch(Vx(h),h.tag){case 1:return ms(h.type)&&Df(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return od(),ja(fs),ja(Ln),iy(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 5:return ny(h),null;case 13:if(ja(Pa),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(r(340));ad()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return ja(Pa),null;case 4:return od(),null;case 10:return Zx(h.type._context),null;case 22:case 23:return $y(),null;case 24:return null;default:return null}}var Jf=!1,Hn=!1,O7=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function cd(c,h){var x=c.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(j){Ma(c,h,j)}else x.current=null}function _y(c,h,x){try{x()}catch(j){Ma(c,h,j)}}var cE=!1;function P7(c,h){if($x=wt,c=US(),Tx(c)){if("selectionStart"in c)var x={start:c.selectionStart,end:c.selectionEnd};else e:{x=(x=c.ownerDocument)&&x.defaultView||window;var j=x.getSelection&&x.getSelection();if(j&&j.rangeCount!==0){x=j.anchorNode;var T=j.anchorOffset,M=j.focusNode;j=j.focusOffset;try{x.nodeType,M.nodeType}catch{x=null;break e}var te=0,Ne=-1,Ae=-1,Ye=0,yt=0,jt=c,mt=null;t:for(;;){for(var Mt;jt!==x||T!==0&&jt.nodeType!==3||(Ne=te+T),jt!==M||j!==0&&jt.nodeType!==3||(Ae=te+j),jt.nodeType===3&&(te+=jt.nodeValue.length),(Mt=jt.firstChild)!==null;)mt=jt,jt=Mt;for(;;){if(jt===c)break t;if(mt===x&&++Ye===T&&(Ne=te),mt===M&&++yt===j&&(Ae=te),(Mt=jt.nextSibling)!==null)break;jt=mt,mt=jt.parentNode}jt=Mt}x=Ne===-1||Ae===-1?null:{start:Ne,end:Ae}}else x=null}x=x||{start:0,end:0}}else x=null;for(Lx={focusedElem:c,selectionRange:x},wt=!1,Lt=h;Lt!==null;)if(h=Lt,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,Lt=c;else for(;Lt!==null;){h=Lt;try{var Ut=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(Ut!==null){var zt=Ut.memoizedProps,Ha=Ut.memoizedState,Le=h.stateNode,Oe=Le.getSnapshotBeforeUpdate(h.elementType===h.type?zt:xi(h.type,zt),Ha);Le.__reactInternalSnapshotBeforeUpdate=Oe}break;case 3:var We=h.stateNode.containerInfo;We.nodeType===1?We.textContent="":We.nodeType===9&&We.documentElement&&We.removeChild(We.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Et){Ma(h,h.return,Et)}if(c=h.sibling,c!==null){c.return=h.return,Lt=c;break}Lt=h.return}return Ut=cE,cE=!1,Ut}function ch(c,h,x){var j=h.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var T=j=j.next;do{if((T.tag&c)===c){var M=T.destroy;T.destroy=void 0,M!==void 0&&_y(h,x,M)}T=T.next}while(T!==j)}}function Qf(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var x=h=h.next;do{if((x.tag&c)===c){var j=x.create;x.destroy=j()}x=x.next}while(x!==h)}}function Ey(c){var h=c.ref;if(h!==null){var x=c.stateNode;switch(c.tag){case 5:c=x;break;default:c=x}typeof h=="function"?h(c):h.current=c}}function dE(c){var h=c.alternate;h!==null&&(c.alternate=null,dE(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&(delete h[Bi],delete h[Qu],delete h[qx],delete h[p7],delete h[g7])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function uE(c){return c.tag===5||c.tag===3||c.tag===4}function hE(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||uE(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Cy(c,h,x){var j=c.tag;if(j===5||j===6)c=c.stateNode,h?x.nodeType===8?x.parentNode.insertBefore(c,h):x.insertBefore(c,h):(x.nodeType===8?(h=x.parentNode,h.insertBefore(c,x)):(h=x,h.appendChild(c)),x=x._reactRootContainer,x!=null||h.onclick!==null||(h.onclick=Af));else if(j!==4&&(c=c.child,c!==null))for(Cy(c,h,x),c=c.sibling;c!==null;)Cy(c,h,x),c=c.sibling}function Ay(c,h,x){var j=c.tag;if(j===5||j===6)c=c.stateNode,h?x.insertBefore(c,h):x.appendChild(c);else if(j!==4&&(c=c.child,c!==null))for(Ay(c,h,x),c=c.sibling;c!==null;)Ay(c,h,x),c=c.sibling}var _n=null,yi=!1;function sl(c,h,x){for(x=x.child;x!==null;)fE(c,h,x),x=x.sibling}function fE(c,h,x){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(ut,x)}catch{}switch(x.tag){case 5:Hn||cd(x,h);case 6:var j=_n,T=yi;_n=null,sl(c,h,x),_n=j,yi=T,_n!==null&&(yi?(c=_n,x=x.stateNode,c.nodeType===8?c.parentNode.removeChild(x):c.removeChild(x)):_n.removeChild(x.stateNode));break;case 18:_n!==null&&(yi?(c=_n,x=x.stateNode,c.nodeType===8?Hx(c.parentNode,x):c.nodeType===1&&Hx(c,x),ht(c)):Hx(_n,x.stateNode));break;case 4:j=_n,T=yi,_n=x.stateNode.containerInfo,yi=!0,sl(c,h,x),_n=j,yi=T;break;case 0:case 11:case 14:case 15:if(!Hn&&(j=x.updateQueue,j!==null&&(j=j.lastEffect,j!==null))){T=j=j.next;do{var M=T,te=M.destroy;M=M.tag,te!==void 0&&((M&2)!==0||(M&4)!==0)&&_y(x,h,te),T=T.next}while(T!==j)}sl(c,h,x);break;case 1:if(!Hn&&(cd(x,h),j=x.stateNode,typeof j.componentWillUnmount=="function"))try{j.props=x.memoizedProps,j.state=x.memoizedState,j.componentWillUnmount()}catch(Ne){Ma(x,h,Ne)}sl(c,h,x);break;case 21:sl(c,h,x);break;case 22:x.mode&1?(Hn=(j=Hn)||x.memoizedState!==null,sl(c,h,x),Hn=j):sl(c,h,x);break;default:sl(c,h,x)}}function mE(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var x=c.stateNode;x===null&&(x=c.stateNode=new O7),h.forEach(function(j){var T=H7.bind(null,c,j);x.has(j)||(x.add(j),j.then(T,T))})}}function vi(c,h){var x=h.deletions;if(x!==null)for(var j=0;j<x.length;j++){var T=x[j];try{var M=c,te=h,Ne=te;e:for(;Ne!==null;){switch(Ne.tag){case 5:_n=Ne.stateNode,yi=!1;break e;case 3:_n=Ne.stateNode.containerInfo,yi=!0;break e;case 4:_n=Ne.stateNode.containerInfo,yi=!0;break e}Ne=Ne.return}if(_n===null)throw Error(r(160));fE(M,te,T),_n=null,yi=!1;var Ae=T.alternate;Ae!==null&&(Ae.return=null),T.return=null}catch(Ye){Ma(T,h,Ye)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)pE(h,c),h=h.sibling}function pE(c,h){var x=c.alternate,j=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(vi(h,c),qi(c),j&4){try{ch(3,c,c.return),Qf(3,c)}catch(zt){Ma(c,c.return,zt)}try{ch(5,c,c.return)}catch(zt){Ma(c,c.return,zt)}}break;case 1:vi(h,c),qi(c),j&512&&x!==null&&cd(x,x.return);break;case 5:if(vi(h,c),qi(c),j&512&&x!==null&&cd(x,x.return),c.flags&32){var T=c.stateNode;try{It(T,"")}catch(zt){Ma(c,c.return,zt)}}if(j&4&&(T=c.stateNode,T!=null)){var M=c.memoizedProps,te=x!==null?x.memoizedProps:M,Ne=c.type,Ae=c.updateQueue;if(c.updateQueue=null,Ae!==null)try{Ne==="input"&&M.type==="radio"&&M.name!=null&&ze(T,M),He(Ne,te);var Ye=He(Ne,M);for(te=0;te<Ae.length;te+=2){var yt=Ae[te],jt=Ae[te+1];yt==="style"?tr(T,jt):yt==="dangerouslySetInnerHTML"?Br(T,jt):yt==="children"?It(T,jt):w(T,yt,jt,Ye)}switch(Ne){case"input":Re(T,M);break;case"textarea":Kt(T,M);break;case"select":var mt=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!M.multiple;var Mt=M.value;Mt!=null?kt(T,!!M.multiple,Mt,!1):mt!==!!M.multiple&&(M.defaultValue!=null?kt(T,!!M.multiple,M.defaultValue,!0):kt(T,!!M.multiple,M.multiple?[]:"",!1))}T[Qu]=M}catch(zt){Ma(c,c.return,zt)}}break;case 6:if(vi(h,c),qi(c),j&4){if(c.stateNode===null)throw Error(r(162));T=c.stateNode,M=c.memoizedProps;try{T.nodeValue=M}catch(zt){Ma(c,c.return,zt)}}break;case 3:if(vi(h,c),qi(c),j&4&&x!==null&&x.memoizedState.isDehydrated)try{ht(h.containerInfo)}catch(zt){Ma(c,c.return,zt)}break;case 4:vi(h,c),qi(c);break;case 13:vi(h,c),qi(c),T=c.child,T.flags&8192&&(M=T.memoizedState!==null,T.stateNode.isHidden=M,!M||T.alternate!==null&&T.alternate.memoizedState!==null||(Oy=qe())),j&4&&mE(c);break;case 22:if(yt=x!==null&&x.memoizedState!==null,c.mode&1?(Hn=(Ye=Hn)||yt,vi(h,c),Hn=Ye):vi(h,c),qi(c),j&8192){if(Ye=c.memoizedState!==null,(c.stateNode.isHidden=Ye)&&!yt&&(c.mode&1)!==0)for(Lt=c,yt=c.child;yt!==null;){for(jt=Lt=yt;Lt!==null;){switch(mt=Lt,Mt=mt.child,mt.tag){case 0:case 11:case 14:case 15:ch(4,mt,mt.return);break;case 1:cd(mt,mt.return);var Ut=mt.stateNode;if(typeof Ut.componentWillUnmount=="function"){j=mt,x=mt.return;try{h=j,Ut.props=h.memoizedProps,Ut.state=h.memoizedState,Ut.componentWillUnmount()}catch(zt){Ma(j,x,zt)}}break;case 5:cd(mt,mt.return);break;case 22:if(mt.memoizedState!==null){yE(jt);continue}}Mt!==null?(Mt.return=mt,Lt=Mt):yE(jt)}yt=yt.sibling}e:for(yt=null,jt=c;;){if(jt.tag===5){if(yt===null){yt=jt;try{T=jt.stateNode,Ye?(M=T.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none"):(Ne=jt.stateNode,Ae=jt.memoizedProps.style,te=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null,Ne.style.display=Tr("display",te))}catch(zt){Ma(c,c.return,zt)}}}else if(jt.tag===6){if(yt===null)try{jt.stateNode.nodeValue=Ye?"":jt.memoizedProps}catch(zt){Ma(c,c.return,zt)}}else if((jt.tag!==22&&jt.tag!==23||jt.memoizedState===null||jt===c)&&jt.child!==null){jt.child.return=jt,jt=jt.child;continue}if(jt===c)break e;for(;jt.sibling===null;){if(jt.return===null||jt.return===c)break e;yt===jt&&(yt=null),jt=jt.return}yt===jt&&(yt=null),jt.sibling.return=jt.return,jt=jt.sibling}}break;case 19:vi(h,c),qi(c),j&4&&mE(c);break;case 21:break;default:vi(h,c),qi(c)}}function qi(c){var h=c.flags;if(h&2){try{e:{for(var x=c.return;x!==null;){if(uE(x)){var j=x;break e}x=x.return}throw Error(r(160))}switch(j.tag){case 5:var T=j.stateNode;j.flags&32&&(It(T,""),j.flags&=-33);var M=hE(c);Ay(c,M,T);break;case 3:case 4:var te=j.stateNode.containerInfo,Ne=hE(c);Cy(c,Ne,te);break;default:throw Error(r(161))}}catch(Ae){Ma(c,c.return,Ae)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function I7(c,h,x){Lt=c,gE(c)}function gE(c,h,x){for(var j=(c.mode&1)!==0;Lt!==null;){var T=Lt,M=T.child;if(T.tag===22&&j){var te=T.memoizedState!==null||Jf;if(!te){var Ne=T.alternate,Ae=Ne!==null&&Ne.memoizedState!==null||Hn;Ne=Jf;var Ye=Hn;if(Jf=te,(Hn=Ae)&&!Ye)for(Lt=T;Lt!==null;)te=Lt,Ae=te.child,te.tag===22&&te.memoizedState!==null?vE(T):Ae!==null?(Ae.return=te,Lt=Ae):vE(T);for(;M!==null;)Lt=M,gE(M),M=M.sibling;Lt=T,Jf=Ne,Hn=Ye}xE(c)}else(T.subtreeFlags&8772)!==0&&M!==null?(M.return=T,Lt=M):xE(c)}}function xE(c){for(;Lt!==null;){var h=Lt;if((h.flags&8772)!==0){var x=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:Hn||Qf(5,h);break;case 1:var j=h.stateNode;if(h.flags&4&&!Hn)if(x===null)j.componentDidMount();else{var T=h.elementType===h.type?x.memoizedProps:xi(h.type,x.memoizedProps);j.componentDidUpdate(T,x.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var M=h.updateQueue;M!==null&&y_(h,M,j);break;case 3:var te=h.updateQueue;if(te!==null){if(x=null,h.child!==null)switch(h.child.tag){case 5:x=h.child.stateNode;break;case 1:x=h.child.stateNode}y_(h,te,x)}break;case 5:var Ne=h.stateNode;if(x===null&&h.flags&4){x=Ne;var Ae=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":Ae.autoFocus&&x.focus();break;case"img":Ae.src&&(x.src=Ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var Ye=h.alternate;if(Ye!==null){var yt=Ye.memoizedState;if(yt!==null){var jt=yt.dehydrated;jt!==null&&ht(jt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Hn||h.flags&512&&Ey(h)}catch(mt){Ma(h,h.return,mt)}}if(h===c){Lt=null;break}if(x=h.sibling,x!==null){x.return=h.return,Lt=x;break}Lt=h.return}}function yE(c){for(;Lt!==null;){var h=Lt;if(h===c){Lt=null;break}var x=h.sibling;if(x!==null){x.return=h.return,Lt=x;break}Lt=h.return}}function vE(c){for(;Lt!==null;){var h=Lt;try{switch(h.tag){case 0:case 11:case 15:var x=h.return;try{Qf(4,h)}catch(Ae){Ma(h,x,Ae)}break;case 1:var j=h.stateNode;if(typeof j.componentDidMount=="function"){var T=h.return;try{j.componentDidMount()}catch(Ae){Ma(h,T,Ae)}}var M=h.return;try{Ey(h)}catch(Ae){Ma(h,M,Ae)}break;case 5:var te=h.return;try{Ey(h)}catch(Ae){Ma(h,te,Ae)}}}catch(Ae){Ma(h,h.return,Ae)}if(h===c){Lt=null;break}var Ne=h.sibling;if(Ne!==null){Ne.return=h.return,Lt=Ne;break}Lt=h.return}}var M7=Math.ceil,Zf=A.ReactCurrentDispatcher,Ty=A.ReactCurrentOwner,Js=A.ReactCurrentBatchConfig,Yr=0,yn=null,Ka=null,En=0,As=0,dd=el(0),sn=0,dh=null,zl=0,em=0,Dy=0,uh=null,gs=null,Oy=0,ud=1/0,xo=null,tm=!1,Py=null,il=null,rm=!1,ol=null,am=0,hh=0,Iy=null,nm=-1,sm=0;function rs(){return(Yr&6)!==0?qe():nm!==-1?nm:nm=qe()}function ll(c){return(c.mode&1)===0?1:(Yr&2)!==0&&En!==0?En&-En:y7.transition!==null?(sm===0&&(sm=jr()),sm):(c=U,c!==0||(c=window.event,c=c===void 0?16:Kr(c.type)),c)}function bi(c,h,x,j){if(50<hh)throw hh=0,Iy=null,Error(r(185));es(c,x,j),((Yr&2)===0||c!==yn)&&(c===yn&&((Yr&2)===0&&(em|=x),sn===4&&cl(c,En)),xs(c,j),x===1&&Yr===0&&(h.mode&1)===0&&(ud=qe()+500,Pf&&rl()))}function xs(c,h){var x=c.callbackNode;Xo(c,h);var j=Ws(c,c===yn?En:0);if(j===0)x!==null&&De(x),c.callbackNode=null,c.callbackPriority=0;else if(h=j&-j,c.callbackPriority!==h){if(x!=null&&De(x),h===1)c.tag===0?x7(wE.bind(null,c)):i_(wE.bind(null,c)),f7(function(){(Yr&6)===0&&rl()}),x=null;else{switch(we(j)){case 1:x=ie;break;case 4:x=fe;break;case 16:x=_e;break;case 536870912:x=xt;break;default:x=_e}x=AE(x,bE.bind(null,c))}c.callbackPriority=h,c.callbackNode=x}}function bE(c,h){if(nm=-1,sm=0,(Yr&6)!==0)throw Error(r(327));var x=c.callbackNode;if(hd()&&c.callbackNode!==x)return null;var j=Ws(c,c===yn?En:0);if(j===0)return null;if((j&30)!==0||(j&c.expiredLanes)!==0||h)h=im(c,j);else{h=j;var T=Yr;Yr|=2;var M=NE();(yn!==c||En!==h)&&(xo=null,ud=qe()+500,Vl(c,h));do try{$7();break}catch(Ne){jE(c,Ne)}while(!0);Qx(),Zf.current=M,Yr=T,Ka!==null?h=0:(yn=null,En=0,h=sn)}if(h!==0){if(h===2&&(T=Sa(c),T!==0&&(j=T,h=My(c,T))),h===1)throw x=dh,Vl(c,0),cl(c,j),xs(c,qe()),x;if(h===6)cl(c,j);else{if(T=c.current.alternate,(j&30)===0&&!R7(T)&&(h=im(c,j),h===2&&(M=Sa(c),M!==0&&(j=M,h=My(c,M))),h===1))throw x=dh,Vl(c,0),cl(c,j),xs(c,qe()),x;switch(c.finishedWork=T,c.finishedLanes=j,h){case 0:case 1:throw Error(r(345));case 2:Gl(c,gs,xo);break;case 3:if(cl(c,j),(j&130023424)===j&&(h=Oy+500-qe(),10<h)){if(Ws(c,0)!==0)break;if(T=c.suspendedLanes,(T&j)!==j){rs(),c.pingedLanes|=c.suspendedLanes&T;break}c.timeoutHandle=Ux(Gl.bind(null,c,gs,xo),h);break}Gl(c,gs,xo);break;case 4:if(cl(c,j),(j&4194240)===j)break;for(h=c.eventTimes,T=-1;0<j;){var te=31-Xt(j);M=1<<te,te=h[te],te>T&&(T=te),j&=~M}if(j=T,j=qe()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*M7(j/1960))-j,10<j){c.timeoutHandle=Ux(Gl.bind(null,c,gs,xo),j);break}Gl(c,gs,xo);break;case 5:Gl(c,gs,xo);break;default:throw Error(r(329))}}}return xs(c,qe()),c.callbackNode===x?bE.bind(null,c):null}function My(c,h){var x=uh;return c.current.memoizedState.isDehydrated&&(Vl(c,h).flags|=256),c=im(c,h),c!==2&&(h=gs,gs=x,h!==null&&Ry(h)),c}function Ry(c){gs===null?gs=c:gs.push.apply(gs,c)}function R7(c){for(var h=c;;){if(h.flags&16384){var x=h.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var j=0;j<x.length;j++){var T=x[j],M=T.getSnapshot;T=T.value;try{if(!pi(M(),T))return!1}catch{return!1}}}if(x=h.child,h.subtreeFlags&16384&&x!==null)x.return=h,h=x;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function cl(c,h){for(h&=~Dy,h&=~em,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var x=31-Xt(h),j=1<<x;c[x]=-1,h&=~j}}function wE(c){if((Yr&6)!==0)throw Error(r(327));hd();var h=Ws(c,0);if((h&1)===0)return xs(c,qe()),null;var x=im(c,h);if(c.tag!==0&&x===2){var j=Sa(c);j!==0&&(h=j,x=My(c,j))}if(x===1)throw x=dh,Vl(c,0),cl(c,h),xs(c,qe()),x;if(x===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,Gl(c,gs,xo),xs(c,qe()),null}function Fy(c,h){var x=Yr;Yr|=1;try{return c(h)}finally{Yr=x,Yr===0&&(ud=qe()+500,Pf&&rl())}}function Kl(c){ol!==null&&ol.tag===0&&(Yr&6)===0&&hd();var h=Yr;Yr|=1;var x=Js.transition,j=U;try{if(Js.transition=null,U=1,c)return c()}finally{U=j,Js.transition=x,Yr=h,(Yr&6)===0&&rl()}}function $y(){As=dd.current,ja(dd)}function Vl(c,h){c.finishedWork=null,c.finishedLanes=0;var x=c.timeoutHandle;if(x!==-1&&(c.timeoutHandle=-1,h7(x)),Ka!==null)for(x=Ka.return;x!==null;){var j=x;switch(Vx(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&Df();break;case 3:od(),ja(fs),ja(Ln),iy();break;case 5:ny(j);break;case 4:od();break;case 13:ja(Pa);break;case 19:ja(Pa);break;case 10:Zx(j.type._context);break;case 22:case 23:$y()}x=x.return}if(yn=c,Ka=c=dl(c.current,null),En=As=h,sn=0,dh=null,Dy=em=zl=0,gs=uh=null,Hl!==null){for(h=0;h<Hl.length;h++)if(x=Hl[h],j=x.interleaved,j!==null){x.interleaved=null;var T=j.next,M=x.pending;if(M!==null){var te=M.next;M.next=T,j.next=te}x.pending=j}Hl=null}return c}function jE(c,h){do{var x=Ka;try{if(Qx(),qf.current=Vf,Wf){for(var j=Ia.memoizedState;j!==null;){var T=j.queue;T!==null&&(T.pending=null),j=j.next}Wf=!1}if(Wl=0,xn=nn=Ia=null,nh=!1,sh=0,Ty.current=null,x===null||x.return===null){sn=1,dh=h,Ka=null;break}e:{var M=c,te=x.return,Ne=x,Ae=h;if(h=En,Ne.flags|=32768,Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var Ye=Ae,yt=Ne,jt=yt.tag;if((yt.mode&1)===0&&(jt===0||jt===11||jt===15)){var mt=yt.alternate;mt?(yt.updateQueue=mt.updateQueue,yt.memoizedState=mt.memoizedState,yt.lanes=mt.lanes):(yt.updateQueue=null,yt.memoizedState=null)}var Mt=V_(te);if(Mt!==null){Mt.flags&=-257,G_(Mt,te,Ne,M,h),Mt.mode&1&&K_(M,Ye,h),h=Mt,Ae=Ye;var Ut=h.updateQueue;if(Ut===null){var zt=new Set;zt.add(Ae),h.updateQueue=zt}else Ut.add(Ae);break e}else{if((h&1)===0){K_(M,Ye,h),Ly();break e}Ae=Error(r(426))}}else if(_a&&Ne.mode&1){var Ha=V_(te);if(Ha!==null){(Ha.flags&65536)===0&&(Ha.flags|=256),G_(Ha,te,Ne,M,h),Xx(ld(Ae,Ne));break e}}M=Ae=ld(Ae,Ne),sn!==4&&(sn=2),uh===null?uh=[M]:uh.push(M),M=te;do{switch(M.tag){case 3:M.flags|=65536,h&=-h,M.lanes|=h;var Le=W_(M,Ae,h);x_(M,Le);break e;case 1:Ne=Ae;var Oe=M.type,We=M.stateNode;if((M.flags&128)===0&&(typeof Oe.getDerivedStateFromError=="function"||We!==null&&typeof We.componentDidCatch=="function"&&(il===null||!il.has(We)))){M.flags|=65536,h&=-h,M.lanes|=h;var Et=z_(M,Ne,h);x_(M,Et);break e}}M=M.return}while(M!==null)}SE(x)}catch(Gt){h=Gt,Ka===x&&x!==null&&(Ka=x=x.return);continue}break}while(!0)}function NE(){var c=Zf.current;return Zf.current=Vf,c===null?Vf:c}function Ly(){(sn===0||sn===3||sn===2)&&(sn=4),yn===null||(zl&268435455)===0&&(em&268435455)===0||cl(yn,En)}function im(c,h){var x=Yr;Yr|=2;var j=NE();(yn!==c||En!==h)&&(xo=null,Vl(c,h));do try{F7();break}catch(T){jE(c,T)}while(!0);if(Qx(),Yr=x,Zf.current=j,Ka!==null)throw Error(r(261));return yn=null,En=0,sn}function F7(){for(;Ka!==null;)kE(Ka)}function $7(){for(;Ka!==null&&!Ge();)kE(Ka)}function kE(c){var h=CE(c.alternate,c,As);c.memoizedProps=c.pendingProps,h===null?SE(c):Ka=h,Ty.current=null}function SE(c){var h=c;do{var x=h.alternate;if(c=h.return,(h.flags&32768)===0){if(x=T7(x,h,As),x!==null){Ka=x;return}}else{if(x=D7(x,h),x!==null){x.flags&=32767,Ka=x;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{sn=6,Ka=null;return}}if(h=h.sibling,h!==null){Ka=h;return}Ka=h=c}while(h!==null);sn===0&&(sn=5)}function Gl(c,h,x){var j=U,T=Js.transition;try{Js.transition=null,U=1,L7(c,h,x,j)}finally{Js.transition=T,U=j}return null}function L7(c,h,x,j){do hd();while(ol!==null);if((Yr&6)!==0)throw Error(r(327));x=c.finishedWork;var T=c.finishedLanes;if(x===null)return null;if(c.finishedWork=null,c.finishedLanes=0,x===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var M=x.lanes|x.childLanes;if(Rl(c,M),c===yn&&(Ka=yn=null,En=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||rm||(rm=!0,AE(_e,function(){return hd(),null})),M=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||M){M=Js.transition,Js.transition=null;var te=U;U=1;var Ne=Yr;Yr|=4,Ty.current=null,P7(c,x),pE(x,c),s7(Lx),wt=!!$x,Lx=$x=null,c.current=x,I7(x),Be(),Yr=Ne,U=te,Js.transition=M}else c.current=x;if(rm&&(rm=!1,ol=c,am=T),M=c.pendingLanes,M===0&&(il=null),Wr(x.stateNode),xs(c,qe()),h!==null)for(j=c.onRecoverableError,x=0;x<h.length;x++)T=h[x],j(T.value,{componentStack:T.stack,digest:T.digest});if(tm)throw tm=!1,c=Py,Py=null,c;return(am&1)!==0&&c.tag!==0&&hd(),M=c.pendingLanes,(M&1)!==0?c===Iy?hh++:(hh=0,Iy=c):hh=0,rl(),null}function hd(){if(ol!==null){var c=we(am),h=Js.transition,x=U;try{if(Js.transition=null,U=16>c?16:c,ol===null)var j=!1;else{if(c=ol,ol=null,am=0,(Yr&6)!==0)throw Error(r(331));var T=Yr;for(Yr|=4,Lt=c.current;Lt!==null;){var M=Lt,te=M.child;if((Lt.flags&16)!==0){var Ne=M.deletions;if(Ne!==null){for(var Ae=0;Ae<Ne.length;Ae++){var Ye=Ne[Ae];for(Lt=Ye;Lt!==null;){var yt=Lt;switch(yt.tag){case 0:case 11:case 15:ch(8,yt,M)}var jt=yt.child;if(jt!==null)jt.return=yt,Lt=jt;else for(;Lt!==null;){yt=Lt;var mt=yt.sibling,Mt=yt.return;if(dE(yt),yt===Ye){Lt=null;break}if(mt!==null){mt.return=Mt,Lt=mt;break}Lt=Mt}}}var Ut=M.alternate;if(Ut!==null){var zt=Ut.child;if(zt!==null){Ut.child=null;do{var Ha=zt.sibling;zt.sibling=null,zt=Ha}while(zt!==null)}}Lt=M}}if((M.subtreeFlags&2064)!==0&&te!==null)te.return=M,Lt=te;else e:for(;Lt!==null;){if(M=Lt,(M.flags&2048)!==0)switch(M.tag){case 0:case 11:case 15:ch(9,M,M.return)}var Le=M.sibling;if(Le!==null){Le.return=M.return,Lt=Le;break e}Lt=M.return}}var Oe=c.current;for(Lt=Oe;Lt!==null;){te=Lt;var We=te.child;if((te.subtreeFlags&2064)!==0&&We!==null)We.return=te,Lt=We;else e:for(te=Oe;Lt!==null;){if(Ne=Lt,(Ne.flags&2048)!==0)try{switch(Ne.tag){case 0:case 11:case 15:Qf(9,Ne)}}catch(Gt){Ma(Ne,Ne.return,Gt)}if(Ne===te){Lt=null;break e}var Et=Ne.sibling;if(Et!==null){Et.return=Ne.return,Lt=Et;break e}Lt=Ne.return}}if(Yr=T,rl(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(ut,c)}catch{}j=!0}return j}finally{U=x,Js.transition=h}}return!1}function _E(c,h,x){h=ld(x,h),h=W_(c,h,1),c=nl(c,h,1),h=rs(),c!==null&&(es(c,1,h),xs(c,h))}function Ma(c,h,x){if(c.tag===3)_E(c,c,x);else for(;h!==null;){if(h.tag===3){_E(h,c,x);break}else if(h.tag===1){var j=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(il===null||!il.has(j))){c=ld(x,c),c=z_(h,c,1),h=nl(h,c,1),c=rs(),h!==null&&(es(h,1,c),xs(h,c));break}}h=h.return}}function B7(c,h,x){var j=c.pingCache;j!==null&&j.delete(h),h=rs(),c.pingedLanes|=c.suspendedLanes&x,yn===c&&(En&x)===x&&(sn===4||sn===3&&(En&130023424)===En&&500>qe()-Oy?Vl(c,0):Dy|=x),xs(c,h)}function EE(c,h){h===0&&((c.mode&1)===0?h=1:(h=Ft,Ft<<=1,(Ft&130023424)===0&&(Ft=4194304)));var x=rs();c=mo(c,h),c!==null&&(es(c,h,x),xs(c,x))}function U7(c){var h=c.memoizedState,x=0;h!==null&&(x=h.retryLane),EE(c,x)}function H7(c,h){var x=0;switch(c.tag){case 13:var j=c.stateNode,T=c.memoizedState;T!==null&&(x=T.retryLane);break;case 19:j=c.stateNode;break;default:throw Error(r(314))}j!==null&&j.delete(h),EE(c,x)}var CE;CE=function(c,h,x){if(c!==null)if(c.memoizedProps!==h.pendingProps||fs.current)ps=!0;else{if((c.lanes&x)===0&&(h.flags&128)===0)return ps=!1,A7(c,h,x);ps=(c.flags&131072)!==0}else ps=!1,_a&&(h.flags&1048576)!==0&&o_(h,Mf,h.index);switch(h.lanes=0,h.tag){case 2:var j=h.type;Xf(c,h),c=h.pendingProps;var T=ed(h,Ln.current);id(h,x),T=cy(null,h,j,c,T,x);var M=dy();return h.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,ms(j)?(M=!0,Of(h)):M=!1,h.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,ry(h),T.updater=Gf,h.stateNode=T,T._reactInternals=h,gy(h,j,c,x),h=by(null,h,j,!0,M,x)):(h.tag=0,_a&&M&&Kx(h),ts(null,h,T,x),h=h.child),h;case 16:j=h.elementType;e:{switch(Xf(c,h),c=h.pendingProps,T=j._init,j=T(j._payload),h.type=j,T=h.tag=W7(j),c=xi(j,c),T){case 0:h=vy(null,h,j,c,x);break e;case 1:h=eE(null,h,j,c,x);break e;case 11:h=Y_(null,h,j,c,x);break e;case 14:h=X_(null,h,j,xi(j.type,c),x);break e}throw Error(r(306,j,""))}return h;case 0:return j=h.type,T=h.pendingProps,T=h.elementType===j?T:xi(j,T),vy(c,h,j,T,x);case 1:return j=h.type,T=h.pendingProps,T=h.elementType===j?T:xi(j,T),eE(c,h,j,T,x);case 3:e:{if(tE(h),c===null)throw Error(r(387));j=h.pendingProps,M=h.memoizedState,T=M.element,g_(c,h),Uf(h,j,null,x);var te=h.memoizedState;if(j=te.element,M.isDehydrated)if(M={element:j,isDehydrated:!1,cache:te.cache,pendingSuspenseBoundaries:te.pendingSuspenseBoundaries,transitions:te.transitions},h.updateQueue.baseState=M,h.memoizedState=M,h.flags&256){T=ld(Error(r(423)),h),h=rE(c,h,j,x,T);break e}else if(j!==T){T=ld(Error(r(424)),h),h=rE(c,h,j,x,T);break e}else for(Cs=Zo(h.stateNode.containerInfo.firstChild),Es=h,_a=!0,gi=null,x=m_(h,null,j,x),h.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(ad(),j===T){h=go(c,h,x);break e}ts(c,h,j,x)}h=h.child}return h;case 5:return v_(h),c===null&&Yx(h),j=h.type,T=h.pendingProps,M=c!==null?c.memoizedProps:null,te=T.children,Bx(j,T)?te=null:M!==null&&Bx(j,M)&&(h.flags|=32),Z_(c,h),ts(c,h,te,x),h.child;case 6:return c===null&&Yx(h),null;case 13:return aE(c,h,x);case 4:return ay(h,h.stateNode.containerInfo),j=h.pendingProps,c===null?h.child=nd(h,null,j,x):ts(c,h,j,x),h.child;case 11:return j=h.type,T=h.pendingProps,T=h.elementType===j?T:xi(j,T),Y_(c,h,j,T,x);case 7:return ts(c,h,h.pendingProps,x),h.child;case 8:return ts(c,h,h.pendingProps.children,x),h.child;case 12:return ts(c,h,h.pendingProps.children,x),h.child;case 10:e:{if(j=h.type._context,T=h.pendingProps,M=h.memoizedProps,te=T.value,ga($f,j._currentValue),j._currentValue=te,M!==null)if(pi(M.value,te)){if(M.children===T.children&&!fs.current){h=go(c,h,x);break e}}else for(M=h.child,M!==null&&(M.return=h);M!==null;){var Ne=M.dependencies;if(Ne!==null){te=M.child;for(var Ae=Ne.firstContext;Ae!==null;){if(Ae.context===j){if(M.tag===1){Ae=po(-1,x&-x),Ae.tag=2;var Ye=M.updateQueue;if(Ye!==null){Ye=Ye.shared;var yt=Ye.pending;yt===null?Ae.next=Ae:(Ae.next=yt.next,yt.next=Ae),Ye.pending=Ae}}M.lanes|=x,Ae=M.alternate,Ae!==null&&(Ae.lanes|=x),ey(M.return,x,h),Ne.lanes|=x;break}Ae=Ae.next}}else if(M.tag===10)te=M.type===h.type?null:M.child;else if(M.tag===18){if(te=M.return,te===null)throw Error(r(341));te.lanes|=x,Ne=te.alternate,Ne!==null&&(Ne.lanes|=x),ey(te,x,h),te=M.sibling}else te=M.child;if(te!==null)te.return=M;else for(te=M;te!==null;){if(te===h){te=null;break}if(M=te.sibling,M!==null){M.return=te.return,te=M;break}te=te.return}M=te}ts(c,h,T.children,x),h=h.child}return h;case 9:return T=h.type,j=h.pendingProps.children,id(h,x),T=Ys(T),j=j(T),h.flags|=1,ts(c,h,j,x),h.child;case 14:return j=h.type,T=xi(j,h.pendingProps),T=xi(j.type,T),X_(c,h,j,T,x);case 15:return J_(c,h,h.type,h.pendingProps,x);case 17:return j=h.type,T=h.pendingProps,T=h.elementType===j?T:xi(j,T),Xf(c,h),h.tag=1,ms(j)?(c=!0,Of(h)):c=!1,id(h,x),H_(h,j,T),gy(h,j,T,x),by(null,h,j,!0,c,x);case 19:return sE(c,h,x);case 22:return Q_(c,h,x)}throw Error(r(156,h.tag))};function AE(c,h){return $e(c,h)}function q7(c,h,x,j){this.tag=c,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qs(c,h,x,j){return new q7(c,h,x,j)}function By(c){return c=c.prototype,!(!c||!c.isReactComponent)}function W7(c){if(typeof c=="function")return By(c)?1:0;if(c!=null){if(c=c.$$typeof,c===D)return 11;if(c===W)return 14}return 2}function dl(c,h){var x=c.alternate;return x===null?(x=Qs(c.tag,h,c.key,c.mode),x.elementType=c.elementType,x.type=c.type,x.stateNode=c.stateNode,x.alternate=c,c.alternate=x):(x.pendingProps=h,x.type=c.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=c.flags&14680064,x.childLanes=c.childLanes,x.lanes=c.lanes,x.child=c.child,x.memoizedProps=c.memoizedProps,x.memoizedState=c.memoizedState,x.updateQueue=c.updateQueue,h=c.dependencies,x.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},x.sibling=c.sibling,x.index=c.index,x.ref=c.ref,x}function om(c,h,x,j,T,M){var te=2;if(j=c,typeof c=="function")By(c)&&(te=1);else if(typeof c=="string")te=5;else e:switch(c){case E:return Yl(x.children,T,M,h);case _:te=8,T|=8;break;case O:return c=Qs(12,x,h,T|2),c.elementType=O,c.lanes=M,c;case H:return c=Qs(13,x,h,T),c.elementType=H,c.lanes=M,c;case ne:return c=Qs(19,x,h,T),c.elementType=ne,c.lanes=M,c;case re:return lm(x,T,M,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case B:te=10;break e;case F:te=9;break e;case D:te=11;break e;case W:te=14;break e;case ee:te=16,j=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return h=Qs(te,x,h,T),h.elementType=c,h.type=j,h.lanes=M,h}function Yl(c,h,x,j){return c=Qs(7,c,j,h),c.lanes=x,c}function lm(c,h,x,j){return c=Qs(22,c,j,h),c.elementType=re,c.lanes=x,c.stateNode={isHidden:!1},c}function Uy(c,h,x){return c=Qs(6,c,null,h),c.lanes=x,c}function Hy(c,h,x){return h=Qs(4,c.children!==null?c.children:[],c.key,h),h.lanes=x,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function z7(c,h,x,j,T){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jo(0),this.expirationTimes=Jo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jo(0),this.identifierPrefix=j,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function qy(c,h,x,j,T,M,te,Ne,Ae){return c=new z7(c,h,x,Ne,Ae),h===1?(h=1,M===!0&&(h|=8)):h=0,M=Qs(3,null,null,h),c.current=M,M.stateNode=c,M.memoizedState={element:j,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},ry(M),c}function K7(c,h,x){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:j==null?null:""+j,children:c,containerInfo:h,implementation:x}}function TE(c){if(!c)return tl;c=c._reactInternals;e:{if(Y(c)!==c||c.tag!==1)throw Error(r(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(ms(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(r(171))}if(c.tag===1){var x=c.type;if(ms(x))return n_(c,x,h)}return h}function DE(c,h,x,j,T,M,te,Ne,Ae){return c=qy(x,j,!0,c,T,M,te,Ne,Ae),c.context=TE(null),x=c.current,j=rs(),T=ll(x),M=po(j,T),M.callback=h??null,nl(x,M,T),c.current.lanes=T,es(c,T,j),xs(c,j),c}function cm(c,h,x,j){var T=h.current,M=rs(),te=ll(T);return x=TE(x),h.context===null?h.context=x:h.pendingContext=x,h=po(M,te),h.payload={element:c},j=j===void 0?null:j,j!==null&&(h.callback=j),c=nl(T,h,te),c!==null&&(bi(c,T,te,M),Bf(c,T,te)),te}function dm(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function OE(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var x=c.retryLane;c.retryLane=x!==0&&x<h?x:h}}function Wy(c,h){OE(c,h),(c=c.alternate)&&OE(c,h)}function V7(){return null}var PE=typeof reportError=="function"?reportError:function(c){console.error(c)};function zy(c){this._internalRoot=c}um.prototype.render=zy.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(r(409));cm(c,h,null,null)},um.prototype.unmount=zy.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;Kl(function(){cm(null,c,null,null)}),h[co]=null}};function um(c){this._internalRoot=c}um.prototype.unstable_scheduleHydration=function(c){if(c){var h=me();c={blockedOn:null,target:c,priority:h};for(var x=0;x<gr.length&&h!==0&&h<gr[x].priority;x++);gr.splice(x,0,c),x===0&&Or(c)}};function Ky(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function hm(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function IE(){}function G7(c,h,x,j,T){if(T){if(typeof j=="function"){var M=j;j=function(){var Ye=dm(te);M.call(Ye)}}var te=DE(h,j,c,0,null,!1,!1,"",IE);return c._reactRootContainer=te,c[co]=te.current,Xu(c.nodeType===8?c.parentNode:c),Kl(),te}for(;T=c.lastChild;)c.removeChild(T);if(typeof j=="function"){var Ne=j;j=function(){var Ye=dm(Ae);Ne.call(Ye)}}var Ae=qy(c,0,!1,null,null,!1,!1,"",IE);return c._reactRootContainer=Ae,c[co]=Ae.current,Xu(c.nodeType===8?c.parentNode:c),Kl(function(){cm(h,Ae,x,j)}),Ae}function fm(c,h,x,j,T){var M=x._reactRootContainer;if(M){var te=M;if(typeof T=="function"){var Ne=T;T=function(){var Ae=dm(te);Ne.call(Ae)}}cm(h,te,c,T)}else te=G7(x,h,c,T,j);return dm(te)}he=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var x=ua(h.pendingLanes);x!==0&&(Fn(h,x|1),xs(h,qe()),(Yr&6)===0&&(ud=qe()+500,rl()))}break;case 13:Kl(function(){var j=mo(c,1);if(j!==null){var T=rs();bi(j,c,1,T)}}),Wy(c,1)}},be=function(c){if(c.tag===13){var h=mo(c,134217728);if(h!==null){var x=rs();bi(h,c,134217728,x)}Wy(c,134217728)}},je=function(c){if(c.tag===13){var h=ll(c),x=mo(c,h);if(x!==null){var j=rs();bi(x,c,h,j)}Wy(c,h)}},me=function(){return U},de=function(c,h){var x=U;try{return U=c,h()}finally{U=x}},Ke=function(c,h,x){switch(h){case"input":if(Re(c,x),h=x.name,x.type==="radio"&&h!=null){for(x=c;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<x.length;h++){var j=x[h];if(j!==c&&j.form===c.form){var T=Tf(j);if(!T)throw Error(r(90));J(j),Re(j,T)}}}break;case"textarea":Kt(c,x);break;case"select":h=x.value,h!=null&&kt(c,!!x.multiple,h,!1)}},pa=Fy,oa=Kl;var Y7={usingClientEntryPoint:!1,Events:[Zu,Qc,Tf,Pt,Dr,Fy]},fh={findFiberByHostInstance:$l,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},X7={bundleType:fh.bundleType,version:fh.version,rendererPackageName:fh.rendererPackageName,rendererConfig:fh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=ce(c),c===null?null:c.stateNode},findFiberByHostInstance:fh.findFiberByHostInstance||V7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mm.isDisabled&&mm.supportsFiber)try{ut=mm.inject(X7),Dt=mm}catch{}}return ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y7,ys.createPortal=function(c,h){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ky(h))throw Error(r(200));return K7(c,h,null,x)},ys.createRoot=function(c,h){if(!Ky(c))throw Error(r(299));var x=!1,j="",T=PE;return h!=null&&(h.unstable_strictMode===!0&&(x=!0),h.identifierPrefix!==void 0&&(j=h.identifierPrefix),h.onRecoverableError!==void 0&&(T=h.onRecoverableError)),h=qy(c,1,!1,null,null,x,!1,j,T),c[co]=h.current,Xu(c.nodeType===8?c.parentNode:c),new zy(h)},ys.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=ce(h),c=c===null?null:c.stateNode,c},ys.flushSync=function(c){return Kl(c)},ys.hydrate=function(c,h,x){if(!hm(h))throw Error(r(200));return fm(null,c,h,!0,x)},ys.hydrateRoot=function(c,h,x){if(!Ky(c))throw Error(r(405));var j=x!=null&&x.hydratedSources||null,T=!1,M="",te=PE;if(x!=null&&(x.unstable_strictMode===!0&&(T=!0),x.identifierPrefix!==void 0&&(M=x.identifierPrefix),x.onRecoverableError!==void 0&&(te=x.onRecoverableError)),h=DE(h,null,c,1,x??null,T,!1,M,te),c[co]=h.current,Xu(c),j)for(c=0;c<j.length;c++)x=j[c],T=x._getVersion,T=T(x._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[x,T]:h.mutableSourceEagerHydrationData.push(x,T);return new um(h)},ys.render=function(c,h,x){if(!hm(h))throw Error(r(200));return fm(null,c,h,!1,x)},ys.unmountComponentAtNode=function(c){if(!hm(c))throw Error(r(40));return c._reactRootContainer?(Kl(function(){fm(null,null,c,!1,function(){c._reactRootContainer=null,c[co]=null})}),!0):!1},ys.unstable_batchedUpdates=Fy,ys.unstable_renderSubtreeIntoContainer=function(c,h,x,j){if(!hm(x))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return fm(c,h,x,!1,j)},ys.version="18.3.1-next-f1338f8080-20240426",ys}var HE;function V6(){if(HE)return Yy.exports;HE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Yy.exports=n9(),Yy.exports}var qE;function s9(){if(qE)return gm;qE=1;var e=V6();return gm.createRoot=e.createRoot,gm.hydrateRoot=e.hydrateRoot,gm}var i9=s9(),P=S2();const ke=sa(P),o9=Q7({__proto__:null,default:ke},[P]),wg={fresh_produce:" Fresh Vegetables",spices_seasonings:" Grocery",dairy:" Dairy Products",meat:" Meat",packaging:" Packaging Materials",staff_essentials:" Staff Essentials"},WE={fresh_produce:["Tomato","Capsicum","Onion","Cabbage","Gandhoraj Lemon","Lemon","Pudina","Coriander Leaves","Garlic","Green Chilli","Ginger","Red Chilli","Carrot","Potato"],spices_seasonings:["Soya Sauce","Chilli Sauce","Vinegar","Oil","Salt","Sugar","Ajinomoto","Black Pepper","White Pepper","Peri Peri Masala","Baking Powder","Corn Flour","Maida"],dairy:["Butter","Cheese"],meat:["Chicken"],packaging:["Butter Paper","Carry Bag","Container","Tissue Paper"],staff_essentials:["Labour","Cleaning","Water","Electricity"]},_2={fuel:" Fuel Cost",travel:" Travel by Employee",transportation:" Goods Transportation Cost",marketing:" Marketing Cost",service_charge:" Service Charge (Food Aggregators)",repair:" Repair Cost",party:" Party Cost",lunch:" Lunch Cost",emergency_online:" Emergency Online Order (Blinkit)",personal_expense:" Personal Expense By an Employee",utensils:" Utensils",equipments:" Equipments",license:" License Cost",water_jar:" Water Jar",miscellaneous:" Miscellaneous Cost"},E2={electricity:" Electricity",rent:" Rent",lpg_gas:" LPG Gas Cost (Cylinders)"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),c9=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),zE=e=>{const t=c9(e);return t.charAt(0).toUpperCase()+t.slice(1)},G6=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=P.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},d)=>P.createElement("svg",{ref:d,...d9,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:G6("lucide",s),...l},[...o.map(([u,f])=>P.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=(e,t)=>{const r=P.forwardRef(({className:n,...s},i)=>P.createElement(u9,{ref:i,iconNode:t,className:G6(`lucide-${l9(zE(e))}`,`lucide-${e}`,n),...s}));return r.displayName=zE(e),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Nj=_t("activity",h9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Si=_t("arrow-down",f9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Qy=_t("arrow-right-left",m9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],g9=_t("arrow-right",p9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],_i=_t("arrow-up",x9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],KE=_t("award",y9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],kj=_t("bell",v9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],w9=_t("box",b9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Jm=_t("briefcase",j9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],VE=_t("bug",N9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Nl=_t("building-2",k9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],_9=_t("building",S9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ur=_t("calendar",E9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],C2=_t("chart-column",C9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],So=_t("check",A9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],D9=_t("chef-hat",T9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],nf=_t("chevron-down",O9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Sj=_t("chevron-left",P9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],kl=_t("chevron-right",I9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Y6=_t("chevron-up",M9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],F9=_t("circle-arrow-down",R9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ar=_t("circle-alert",$9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],GE=_t("circle-arrow-up",L9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],lr=_t("circle-check-big",B9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],en=_t("circle-x",U9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],YE=_t("clipboard-check",H9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],W9=_t("clipboard-list",q9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Aa=_t("clock",z9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],V9=_t("copy",K9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Po=_t("credit-card",G9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],_h=_t("database",Y9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ca=_t("dollar-sign",X9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Ms=_t("download",J9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],Z9=_t("droplet",Q9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],tB=_t("eraser",eB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],No=_t("eye",rB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]],Za=_t("factory",aB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Qm=_t("file-spreadsheet",nB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ks=_t("file-text",sB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],oB=_t("hard-drive",iB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],cB=_t("hash",lB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],uB=_t("info",dB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],fB=_t("key-round",hB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],pB=_t("key",mB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],xB=_t("layers",gB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Io=_t("loader-circle",yB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],bB=_t("loader",vB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],_j=_t("lock",wB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],NB=_t("log-in",jB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Eh=_t("log-out",kB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],jc=_t("mail",SB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],A2=_t("map-pin",_B);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],XE=_t("menu",EB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"M5 12h14",key:"1ays0h"}]],T2=_t("minus",CB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],X6=_t("network",AB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Zt=_t("package",TB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Vi=_t("pen",DB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],PB=_t("percent",OB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Td=_t("phone",IB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Xi=_t("plus",MB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],FB=_t("receipt",RB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_o=_t("refresh-cw",$B);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Lo=_t("save",LB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],J6=_t("search",BB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Zm=_t("send",UB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gi=_t("settings",HB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],WB=_t("shield-check",qB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],JE=_t("shopping-bag",zB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Sd=_t("shopping-cart",KB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],xm=_t("smartphone",VB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["path",{d:"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z",key:"4rw317"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M19.5 12 22 6",key:"shfsr5"}],["path",{d:"M16.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.73 1.62",key:"rpc6vp"}],["path",{d:"M11.25 3c.27.1.8.53.74 1.36-.05.83-.93 1.2-.98 2.02-.06.78.33 1.24.72 1.62",key:"1lf63m"}],["path",{d:"M6.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.74 1.62",key:"97tijn"}]],bo=_t("soup",GB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Eo=_t("square-check-big",YB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ep=_t("square-pen",XB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],eo=_t("store",JB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],ZB=_t("table",QB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],D2=_t("target",eU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ws=_t("trash-2",tU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],Nc=_t("trending-down",rU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],fa=_t("trending-up",aU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Qa=_t("triangle-alert",nU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Ej=_t("trophy",sU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Zy=_t("truck",iU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],cc=_t("upload",oU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],cU=_t("user-check",lU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],Di=_t("user-cog",dU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Bs=_t("user-plus",uU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],QE=_t("user-x",hU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],tn=_t("user",fU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],La=_t("users",mU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],gU=_t("utensils",pU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],ii=_t("wallet",xU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ea=_t("x",yU),In="xssxnhrzxvtejavoqgwg",rn="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhzc3huaHJ6eHZ0ZWphdm9xZ3dnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwODAzNjksImV4cCI6MjA4MTY1NjM2OX0.boONpQZ8Xv2AzlDylEoKnAlGEW7DFsMQ0zEQ1S5LPGE";function jg(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function vU(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{u(n.next(f))}catch(m){o(m)}}function d(f){try{u(n.throw(f))}catch(m){o(m)}}function u(f){f.done?i(f.value):s(f.value).then(l,d)}u((n=n.apply(e,t||[])).next())})}const bU=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class O2 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class wU extends O2{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class ZE extends O2{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class eC extends O2{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Cj;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Cj||(Cj={}));class jU{constructor(t,{headers:r={},customFetch:n,region:s=Cj.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=bU(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return vU(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:l,method:d,body:u,signal:f,timeout:m}=n;let p={},{region:g}=n;g||(g=this.region);const b=new URL(`${this.url}/${r}`);g&&g!=="any"&&(p["x-region"]=g,b.searchParams.set("forceFunctionRegion",g));let y;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(p["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(p["Content-Type"]="application/json",y=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?y=JSON.stringify(u):y=u;let v=f;m&&(o=new AbortController,i=setTimeout(()=>o.abort(),m),f?(v=o.signal,f.addEventListener("abort",()=>o.abort())):v=o.signal);const k=yield this.fetch(b.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:y,signal:v}).catch(C=>{throw new wU(C)}),S=k.headers.get("x-relay-error");if(S&&S==="true")throw new ZE(k);if(!k.ok)throw new eC(k);let w=((s=k.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),A;return w==="application/json"?A=yield k.json():w==="application/octet-stream"||w==="application/pdf"?A=yield k.blob():w==="text/event-stream"?A=k:w==="multipart/form-data"?A=yield k.formData():A=yield k.text(),{data:A,error:null,response:k}}catch(l){return{data:null,error:l,response:l instanceof eC||l instanceof ZE?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var NU=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},kU=class{constructor(e){var t,r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(n=e.urlLengthLimit)!==null&&n!==void 0?n:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,d=null,u=i.status,f=i.statusText;if(i.ok){var m,p;if(r.method!=="HEAD"){var g;const k=await i.text();k===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((g=r.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?l=k:l=JSON.parse(k))}const y=(m=r.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),v=(p=i.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");y&&v&&v.length>1&&(d=parseInt(v[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,d=null,u=406,f="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var b;const y=await i.text();try{o=JSON.parse(y),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,f="OK")}catch{i.status===404&&y===""?(u=204,f="No Content"):o={message:y}}if(o&&r.isMaybeSingle&&(!(o==null||(b=o.details)===null||b===void 0)&&b.includes("0 rows"))&&(o=null,u=200,f="OK"),o&&r.shouldThrowOnError)throw new NU(o)}return{error:o,data:l,count:d,status:u,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let l="",d="",u="";const f=i?.cause;if(f){var m,p,g,b;const k=(m=f?.message)!==null&&m!==void 0?m:"",S=(p=f?.code)!==null&&p!==void 0?p:"";l=`${(g=i?.name)!==null&&g!==void 0?g:"FetchError"}: ${i?.message}`,l+=`

Caused by: ${(b=f?.name)!==null&&b!==void 0?b:"Error"}: ${k}`,S&&(l+=` (${S})`),f?.stack&&(l+=`
${f.stack}`)}else{var y;l=(y=i?.stack)!==null&&y!==void 0?y:""}const v=this.url.toString().length;return i?.name==="AbortError"||i?.code==="ABORT_ERR"?(u="",d="Request was aborted (timeout or manual cancellation)",v>this.urlLengthLimit&&(d+=`. Note: Your request URL is ${v} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(f?.name==="HeadersOverflowError"||f?.code==="UND_ERR_HEADERS_OVERFLOW")&&(u="",d="HTTP headers exceeded server limits (typically 16KB)",v>this.urlLengthLimit&&(d+=`. Your request URL is ${v} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:l,hint:d,code:u},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},SU=class extends kU{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${d}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const tC=new RegExp("[,()]");var _d=class extends SU{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&tC.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&tC.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},_U=class{constructor(e,{headers:t={},schema:r,fetch:n,urlLengthLimit:s=8e3}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:d}=this.cloneRequestState();return l.searchParams.set("select",o),n&&d.append("Prefer",`count=${n}`),new _d({method:s,url:l,headers:d,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(l.length>0){const d=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",d.join(","))}}return new _d({method:s,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST",{url:l,headers:d}=this.cloneRequestState();if(d.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&d.append("Prefer",`count=${n}`),s||d.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(u.length>0){const f=[...new Set(u)].map(m=>`"${m}"`);l.searchParams.set("columns",f.join(","))}}return new _d({method:o,url:l,headers:d,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new _d({method:n,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new _d({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function t0(e){"@babel/helpers - typeof";return t0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t0(e)}function EU(e,t){if(t0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(t0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CU(e){var t=EU(e,"string");return t0(t)=="symbol"?t:t+""}function AU(e,t,r){return(t=CU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ym(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rC(Object(r),!0).forEach(function(n){AU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var TU=class Q6{constructor(t,{headers:r={},schema:n,fetch:s,timeout:i,urlLengthLimit:o=8e3}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.urlLengthLimit=o;const l=s??globalThis.fetch;i!==void 0&&i>0?this.fetch=(d,u)=>{const f=new AbortController,m=setTimeout(()=>f.abort(),i),p=u?.signal;if(p){if(p.aborted)return clearTimeout(m),l(d,u);const g=()=>{clearTimeout(m),f.abort()};return p.addEventListener("abort",g,{once:!0}),l(d,ym(ym({},u),{},{signal:f.signal})).finally(()=>{clearTimeout(m),p.removeEventListener("abort",g)})}return l(d,ym(ym({},u),{},{signal:f.signal})).finally(()=>clearTimeout(m))}:this.fetch=l}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new _U(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new Q6(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const d=new URL(`${this.url}/rpc/${t}`);let u;const f=g=>g!==null&&typeof g=="object"&&(!Array.isArray(g)||g.some(f)),m=n&&Object.values(r).some(f);m?(l="POST",u=r):n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([g,b])=>b!==void 0).map(([g,b])=>[g,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([g,b])=>{d.searchParams.append(g,b)})):(l="POST",u=r);const p=new Headers(this.headers);return m?p.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&p.set("Prefer",`count=${i}`),new _d({method:l,url:d,headers:p,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};class DU{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const OU="2.95.3",PU=`realtime-js/${OU}`,IU="1.0.0",Z6="2.0.0",aC=Z6,Aj=1e4,MU=1e3,RU=100;var ml;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ml||(ml={}));var dn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(dn||(dn={}));var Ci;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ci||(Ci={}));var Tj;(function(e){e.websocket="websocket"})(Tj||(Tj={}));var sc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(sc||(sc={}));class FU{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",d=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,f=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},m=Object.keys(f).length===0?"":JSON.stringify(f);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+l.length+o.length+u.length+m.length,g=new ArrayBuffer(this.HEADER_LENGTH+p);let b=new DataView(g),y=0;b.setUint8(y++,this.KINDS.userBroadcastPush),b.setUint8(y++,d.length),b.setUint8(y++,l.length),b.setUint8(y++,o.length),b.setUint8(y++,u.length),b.setUint8(y++,m.length),b.setUint8(y++,r),Array.from(d,k=>b.setUint8(y++,k.charCodeAt(0))),Array.from(l,k=>b.setUint8(y++,k.charCodeAt(0))),Array.from(o,k=>b.setUint8(y++,k.charCodeAt(0))),Array.from(u,k=>b.setUint8(y++,k.charCodeAt(0))),Array.from(m,k=>b.setUint8(y++,k.charCodeAt(0)));var v=new Uint8Array(g.byteLength+n.byteLength);return v.set(new Uint8Array(g),0),v.set(new Uint8Array(n),g.byteLength),v.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,l,d]=n;return r({join_ref:s,ref:i,topic:o,event:l,payload:d})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let d=this.HEADER_LENGTH+4;const u=n.decode(t.slice(d,d+s));d=d+s;const f=n.decode(t.slice(d,d+i));d=d+i;const m=n.decode(t.slice(d,d+o));d=d+o;const p=t.slice(d,t.byteLength),g=l===this.JSON_ENCODING?JSON.parse(n.decode(p)):p,b={type:this.BROADCAST_EVENT,event:f,payload:g};return o>0&&(b.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class eI{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xa;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(xa||(xa={}));const nC=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=$U(o,e,t,s),i),{}):{}},$U=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s?.type,o=r[e];return i&&!n.includes(i)?tI(i,o):Dj(o)},tI=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return HU(t,r)}switch(e){case xa.bool:return LU(t);case xa.float4:case xa.float8:case xa.int2:case xa.int4:case xa.int8:case xa.numeric:case xa.oid:return BU(t);case xa.json:case xa.jsonb:return UU(t);case xa.timestamp:return qU(t);case xa.abstime:case xa.date:case xa.daterange:case xa.int4range:case xa.int8range:case xa.money:case xa.reltime:case xa.text:case xa.time:case xa.timestamptz:case xa.timetz:case xa.tsrange:case xa.tstzrange:return Dj(t);default:return Dj(t)}},Dj=e=>e,LU=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},BU=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},UU=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},HU=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>tI(t,l))}return e},qU=e=>typeof e=="string"?e.replace(" ","T"):e,rI=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class ev{constructor(t,r,n={},s=Aj){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var sC;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(sC||(sC={}));class Fh{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fh.syncState(this.state,s,i,o),this.pendingDiffs.forEach(d=>{this.state=Fh.syncDiff(this.state,d,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Fh.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},d={};return this.map(i,(u,f)=>{o[u]||(d[u]=f)}),this.map(o,(u,f)=>{const m=i[u];if(m){const p=f.map(v=>v.presence_ref),g=m.map(v=>v.presence_ref),b=f.filter(v=>g.indexOf(v.presence_ref)<0),y=m.filter(v=>p.indexOf(v.presence_ref)<0);b.length>0&&(l[u]=b),y.length>0&&(d[u]=y)}else l[u]=f}),this.syncDiff(i,{joins:l,leaves:d},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,d)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(d),f.length>0){const m=t[l].map(g=>g.presence_ref),p=f.filter(g=>m.indexOf(g.presence_ref)<0);t[l].unshift(...p)}n(l,f,d)}),this.map(o,(l,d)=>{let u=t[l];if(!u)return;const f=d.map(m=>m.presence_ref);u=u.filter(m=>f.indexOf(m.presence_ref)<0),t[l]=u,s(l,u,d),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var iC;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(iC||(iC={}));var $h;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})($h||($h={}));var wo;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(wo||(wo={}));class Dd{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=dn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ev(this,Ci.join,this.params,this.timeout),this.rejoinTimer=new eI(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ci.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Fh(this),this.broadcastEndpointURL=rI(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==dn.closed){const{config:{broadcast:o,presence:l,private:d}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(g=>g.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[$h.PRESENCE]&&this.bindings[$h.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,m={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:u,private:d};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(g=>t?.(wo.CHANNEL_ERROR,g)),this._onClose(()=>t?.(wo.CLOSED)),this.updateJoinPayload(Object.assign({config:p},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){t?.(wo.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,v=(b=y?.length)!==null&&b!==void 0?b:0,k=[];for(let S=0;S<v;S++){const w=y[S],{filter:{event:A,schema:C,table:N,filter:E}}=w,_=g&&g[S];if(_&&_.event===A&&Dd.isFilterValueEqual(_.schema,C)&&Dd.isFilterValueEqual(_.table,N)&&Dd.isFilterValueEqual(_.filter,E))k.push(Object.assign(Object.assign({},w),{id:_.id}));else{this.unsubscribe(),this.state=dn.errored,t?.(wo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,t&&t(wo.SUBSCRIBED);return}}).receive("error",g=>{this.state=dn.errored,t?.(wo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t?.(wo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===dn.joined&&t===$h.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let d=l.statusText;try{const u=await l.json();d=u.error||u.message||d}catch{}return Promise.reject(new Error(d))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,d;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=dn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ci.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new ev(this,Ci.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=dn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ev(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>RU){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:d,leave:u,join:f}=Ci;if(n&&[l,d,u,f].indexOf(o)>=0&&n!==this._joinRef())return;let p=this._onMessage(o,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var b,y,v;return((b=g.filter)===null||b===void 0?void 0:b.event)==="*"||((v=(y=g.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(g=>g.callback(p,n)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var b,y,v,k,S,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const A=g.id,C=(b=g.filter)===null||b===void 0?void 0:b.event;return A&&((y=r.ids)===null||y===void 0?void 0:y.includes(A))&&(C==="*"||C?.toLocaleLowerCase()===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const A=(S=(k=g?.filter)===null||k===void 0?void 0:k.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return A==="*"||A===((w=r?.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof p=="object"&&"ids"in p){const b=p.data,{schema:y,table:v,commit_timestamp:k,type:S,errors:w}=b;p=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:k,eventType:S,new:{},old:{},errors:w}),this._getPayloadRecords(b))}g.callback(p,n)})}_isClosed(){return this.state===dn.closed}_isJoined(){return this.state===dn.joined}_isJoining(){return this.state===dn.joining}_isLeaving(){return this.state===dn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Dd.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ci.close,{},t)}_onError(t){this._on(Ci.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=nC(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=nC(t.columns,t.old_record)),r}}const tv=()=>{},vm={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},WU=[1e3,2e3,5e3,1e4],zU=1e4,KU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class VU{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Aj,this.transport=null,this.heartbeatIntervalMs=vm.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=tv,this.ref=0,this.reconnectTimer=null,this.vsn=aC,this.logger=tv,this.conn=null,this.sendBuffer=[],this.serializer=new FU,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Tj.websocket}`,this.httpEndpoint=rI(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=DU.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return r==="ok"&&this._remove(t),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ml.connecting:return sc.Connecting;case ml.open:return sc.Open;case ml.closing:return sc.Closing;default:return sc.Closed}}isConnected(){return this.connectionState()===sc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Dd(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(MU,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},vm.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(f){this.log("error","error in heartbeat callback",f)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",d=i.status||"";this.log("receive",`${d} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===ml.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ml.open||this.conn.readyState===ml.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ci.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([KU],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:PU};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Ci.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new eI(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},vm.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,d,u,f,m,p,g;switch(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:Aj,this.heartbeatIntervalMs=(s=t?.heartbeatIntervalMs)!==null&&s!==void 0?s:vm.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t?.heartbeatCallback)!==null&&l!==void 0?l:tv,this.vsn=(d=t?.vsn)!==null&&d!==void 0?d:aC,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t?.reconnectAfterMs)!==null&&u!==void 0?u:(b=>WU[b-1]||zU),this.vsn){case IU:this.encode=(f=t?.encode)!==null&&f!==void 0?f:((b,y)=>y(JSON.stringify(b))),this.decode=(m=t?.decode)!==null&&m!==void 0?m:((b,y)=>y(JSON.parse(b)));break;case Z6:this.encode=(p=t?.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(g=t?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var r0=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function GU(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function YU(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function XU(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const l=GU(e.baseUrl,n,s),d=await YU(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...d,...o},body:i?JSON.stringify(i):void 0}),f=await u.text(),m=(u.headers.get("content-type")||"").includes("application/json"),p=m&&f?JSON.parse(f):f;if(!u.ok){const g=m?p:void 0,b=g?.error;throw new r0(b?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:b?.type,icebergCode:b?.code,details:g})}return{status:u.status,headers:u.headers,data:p}}}}function bm(e){return e.join("")}var JU=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:bm(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${bm(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${bm(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${bm(e.namespace)}`}),!0}catch(t){if(t instanceof r0&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof r0&&r.status===409)return;throw r}}};function fd(e){return e.join("")}var QU=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fd(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${fd(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${fd(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${fd(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fd(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${fd(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof r0&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof r0&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},ZU=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=XU({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new JU(this.client,t),this.tableOps=new QU(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Ng=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function kg(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var wm=class extends Ng{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},aI=class extends Ng{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const eH=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),tH=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Oj=e=>{if(Array.isArray(e))return e.map(r=>Oj(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Oj(n)}),t},rH=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function a0(e){"@babel/helpers - typeof";return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a0(e)}function aH(e,t){if(a0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(a0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nH(e){var t=aH(e,"string");return a0(t)=="symbol"?t:t+""}function sH(e,t,r){return(t=nH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(r),!0).forEach(function(n){sH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const lC=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},iH=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!r?.noResolveJson){const s=e,i=s.status||500;if(typeof s.json=="function")s.json().then(o=>{const l=o?.statusCode||o?.code||i+"";t(new wm(lC(o),i,l,n))}).catch(()=>{if(n==="vectors"){const o=i+"";t(new wm(s.statusText||`HTTP ${i} error`,i,o,n))}else{const o=i+"";t(new wm(s.statusText||`HTTP ${i} error`,i,o,n))}});else{const o=i+"";t(new wm(s.statusText||`HTTP ${i} error`,i,o,n))}}else t(new aI(lC(e),e,n))},oH=(e,t,r,n)=>{const s={method:e,headers:t?.headers||{}};return e==="GET"||e==="HEAD"||!n?fr(fr({},s),r):(tH(n)?(s.headers=fr({"Content-Type":"application/json"},t?.headers),s.body=JSON.stringify(n)):s.body=n,t?.duplex&&(s.duplex=t.duplex),fr(fr({},s),r))};async function ph(e,t,r,n,s,i,o){return new Promise((l,d)=>{e(r,oH(t,n,s,i)).then(u=>{if(!u.ok)throw u;if(n?.noResolveJson)return u;if(o==="vectors"){const f=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!f||!f.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>iH(u,d,n,o))})}function nI(e="storage"){return{get:async(t,r,n,s)=>ph(t,"GET",r,n,s,void 0,e),post:async(t,r,n,s,i)=>ph(t,"POST",r,s,i,n,e),put:async(t,r,n,s,i)=>ph(t,"PUT",r,s,i,n,e),head:async(t,r,n,s)=>ph(t,"HEAD",r,fr(fr({},n),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,r,n,s,i)=>ph(t,"DELETE",r,s,i,n,e)}}const lH=nI("storage"),{get:n0,post:Ei,put:Pj,head:cH,remove:P2}=lH,Fs=nI("vectors");var wu=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=eH(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(kg(r))return{data:null,error:r};throw r}}},dH=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(kg(t))return{data:null,error:t};throw t}}};let sI;sI=Symbol.toStringTag;var uH=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[sI]="BlobDownloadBuilder",this.promise=null}asStream(){return new dH(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(kg(t))return{data:null,error:t};throw t}}};const hH={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var fH=class extends wu{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var s=this;return s.handleOperation(async()=>{let i;const o=fr(fr({},cC),n);let l=fr(fr({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",s.encodeMetadata(d)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),d&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(d))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,d&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(d))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n?.headers&&(l=fr(fr({},l),n.headers));const u=s._removeEmptyFolders(t),f=s._getFinalPath(u),m=await(e=="PUT"?Pj:Ei)(s.fetch,`${s.url}/object/${f}`,i,fr({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{path:u,id:m.Id,fullPath:m.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",t),s.handleOperation(async()=>{let d;const u=fr({upsert:cC.upsert},n),f=fr(fr({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",u.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",u.cacheControl)):(d=r,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType),{path:i,fullPath:(await Pj(s.fetch,l.toString(),d,{headers:f})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const s=fr({},r.headers);t?.upsert&&(s["x-upsert"]="true");const i=await Ei(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new Ng("No token returned by API");return{signedUrl:o.toString(),path:e,token:l}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await Ei(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await Ei(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let s=n._getFinalPath(e),i=await Ei(n.fetch,`${n.url}/object/sign/${s}`,fr({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const s=await Ei(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s.map(o=>fr(fr({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null}))})}download(e,t,r){const n=typeof t?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(t?.transform||{}),i=s?`?${s}`:"",o=this._getFinalPath(e),l=()=>n0(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0},r);return new uH(l,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>Oj(await n0(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await cH(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(kg(n)&&n instanceof aI){const s=n.originalError;if([400,404].includes(s?.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof t?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(t?.transform||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await P2(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const s=fr(fr(fr({},hH),t),{},{prefix:e||""});return await Ei(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=fr({},e);return await Ei(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const mH="2.95.3",sf={"X-Client-Info":`storage-js/${mH}`};var pH=class extends wu{constructor(e,t={},r,n){const s=new URL(e);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const i=s.href.replace(/\/$/,""),o=fr(fr({},sf),t);super(i,o,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await n0(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await n0(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await Ei(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await Pj(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Ei(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await P2(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},gH=class extends wu{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=fr(fr({},sf),t);super(n,s,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Ei(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await n0(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await P2(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!rH(e))throw new Ng("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new ZU({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(d){if(n)throw d;return{data:null,error:d}}}}})}},xH=class extends wu{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=fr(fr({},sf),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Fs.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await Fs.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Fs.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await Fs.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},yH=class extends wu{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=fr(fr({},sf),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Fs.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Fs.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Fs.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Fs.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Fs.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},vH=class extends wu{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=fr(fr({},sf),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Fs.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Fs.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Fs.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Fs.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},bH=class extends vH{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new wH(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},wH=class extends xH{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,fr(fr({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,fr(fr({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new jH(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},jH=class extends yH{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,fr(fr({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,fr(fr({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,fr(fr({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,fr(fr({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,fr(fr({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},NH=class extends pH{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new fH(this.url,this.headers,e,this.fetch)}get vectors(){return new bH(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new gH(this.url+"/iceberg",this.headers,this.fetch)}};const iI="2.95.3",Ed=30*1e3,Ij=3,rv=Ij*Ed,kH="http://localhost:9999",SH="supabase.auth.token",_H={"X-Client-Info":`gotrue-js/${iI}`},Mj="X-Supabase-Api-Version",oI={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},EH=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,CH=600*1e3;class s0 extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Yt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class AH extends s0{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function TH(e){return Yt(e)&&e.name==="AuthApiError"}class ic extends s0{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class zo extends s0{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Ds extends zo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function av(e){return Yt(e)&&e.name==="AuthSessionMissingError"}class md extends zo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class jm extends zo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Nm extends zo{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function DH(e){return Yt(e)&&e.name==="AuthImplicitGrantRedirectError"}class dC extends zo{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class OH extends zo{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Rj extends zo{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function nv(e){return Yt(e)&&e.name==="AuthRetryableFetchError"}class uC extends zo{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Fj extends zo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const tp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),hC=` 	
\r=`.split(""),PH=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<hC.length;t+=1)e[hC[t].charCodeAt(0)]=-2;for(let t=0;t<tp.length;t+=1)e[tp[t].charCodeAt(0)]=t;return e})();function fC(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(tp[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(tp[n]),t.queuedBits-=6}}function lI(e,t,r){const n=PH[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function mC(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{RH(o,n,r)};for(let o=0;o<e.length;o+=1)lI(e.charCodeAt(o),s,i);return t.join("")}function IH(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function MH(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}IH(n,t)}}function RH(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Ld(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)lI(e.charCodeAt(s),r,n);return new Uint8Array(t)}function FH(e){const t=[];return MH(e,r=>t.push(r)),new Uint8Array(t)}function dc(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>fC(s,r,n)),fC(null,r,n),t.join("")}function $H(e){return Math.round(Date.now()/1e3)+e}function LH(){return Symbol("auth-callback")}const An=()=>typeof window<"u"&&typeof document<"u",Xl={tested:!1,writable:!1},cI=()=>{if(!An())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xl.tested)return Xl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Xl.tested=!0,Xl.writable=!0}catch{Xl.tested=!0,Xl.writable=!1}return Xl.writable};function BH(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const dI=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),UH=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Cd=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Jl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Cn=async(e,t)=>{await e.removeItem(t)};class Sg{constructor(){this.promise=new Sg.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Sg.promiseConstructor=Promise;function km(e){const t=e.split(".");if(t.length!==3)throw new Fj("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!EH.test(t[n]))throw new Fj("JWT not in base64url format");return{header:JSON.parse(mC(t[0])),payload:JSON.parse(mC(t[1])),signature:Ld(t[2]),raw:{header:t[0],payload:t[1]}}}async function HH(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function qH(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function WH(e){return("0"+e.toString(16)).substr(-2)}function zH(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,WH).join("")}async function KH(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function VH(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await KH(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pd(e,t,r=!1){const n=zH();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Cd(e,`${t}-code-verifier`,s);const i=await VH(n);return[i,n===i?"plain":"s256"]}const GH=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function YH(e){const t=e.headers.get(Mj);if(!t||!t.match(GH))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function XH(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function JH(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const QH=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function gd(e){if(!QH.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function sv(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ZH(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function pC(e){return JSON.parse(JSON.stringify(e))}const rc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),eq=[502,503,504];async function gC(e){var t;if(!UH(e))throw new Rj(rc(e),0);if(eq.includes(e.status))throw new Rj(rc(e),e.status);let r;try{r=await e.json()}catch(i){throw new ic(rc(i),i)}let n;const s=YH(e);if(s&&s.getTime()>=oI["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new uC(rc(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ds}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new uC(rc(r),e.status,r.weak_password.reasons);throw new AH(rc(r),e.status||500,n)}const tq=(e,t,r,n)=>{const s={method:e,headers:t?.headers||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function dr(e,t,r,n){var s;const i=Object.assign({},n?.headers);i[Mj]||(i[Mj]=oI["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n?.query)!==null&&s!==void 0?s:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await rq(e,t,r+l,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(d):{data:Object.assign({},d),error:null}}async function rq(e,t,r,n,s,i){const o=tq(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(d){throw console.error(d),new Rj(rc(d),0)}if(l.ok||await gC(l),n?.noResolveJson)return l;try{return await l.json()}catch(d){await gC(d)}}function ki(e){var t;let r=null;sq(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=$H(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function xC(e){const t=ki(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function gl(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function aq(e){return{data:e,error:null}}function nq(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=jg(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},d=Object.assign({},o);return{data:{properties:l,user:d},error:null}}function yC(e){return e}function sq(e){return e.access_token&&e.refresh_token&&e.expires_in}const iv=["global","local","others"];class iq{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=dI(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=iv[0]){if(iv.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${iv.join(", ")}`);try{return await dr(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Yt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await dr(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:gl})}catch(n){if(Yt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=jg(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n?.newEmail,delete s.newEmail),await dr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:nq,redirectTo:r?.redirectTo})}catch(r){if(Yt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await dr(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:gl})}catch(r){if(Yt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,d;try{const u={nextPage:null,lastPage:0,total:0},f=await dr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:yC});if(f.error)throw f.error;const m=await f.json(),p=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(d=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return g.length>0&&(g.forEach(b=>{const y=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(Yt(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){gd(t);try{return await dr(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:gl})}catch(r){if(Yt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){gd(t);try{return await dr(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:gl})}catch(n){if(Yt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){gd(t);try{return await dr(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:gl})}catch(n){if(Yt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){gd(t.userId);try{const{data:r,error:n}=await dr(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Yt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){gd(t.userId),gd(t.id);try{return{data:await dr(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Yt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,l,d;try{const u={nextPage:null,lastPage:0,total:0},f=await dr(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:yC});if(f.error)throw f.error;const m=await f.json(),p=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(d=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return g.length>0&&(g.forEach(b=>{const y=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(Yt(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await dr(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Yt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await dr(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Yt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await dr(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Yt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await dr(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Yt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await dr(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Yt(r))return{data:null,error:r};throw r}}}function vC(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const xd={debug:!!(globalThis&&cI()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uI extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class oq extends uI{}async function lq(e,t,r){xd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),xd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){xd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{xd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw xd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new oq(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xd.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function cq(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hI(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function dq(e){return parseInt(e,16)}function uq(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function hq(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:d,resources:u,scheme:f,uri:m,version:p}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const g=hI(e.address),b=f?`${f}://${n}`:n,y=e.statement?`${e.statement}
`:"",v=`${b} wants you to sign in with your Ethereum account:
${g}

${y}`;let k=`URI: ${m}
Version: ${p}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(k+=`
Expiration Time: ${s.toISOString()}`),l&&(k+=`
Not Before: ${l.toISOString()}`),d&&(k+=`
Request ID: ${d}`),u){let S=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);S+=`
- ${w}`}k+=S}return`${v}
${k}`}class Ja extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class rp extends Ja{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function fq({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ja({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ja({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Ja({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ja({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ja({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ja({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Ja({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ja({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(fI(o)){if(i.rp.id!==o)return new Ja({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ja({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Ja({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ja({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ja({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function mq({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ja({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ja({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(fI(n)){if(r.rpId!==n)return new Ja({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ja({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ja({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ja({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class pq{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const gq=new pq;function xq(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=jg(e,["challenge","user","excludeCredentials"]),i=Ld(t).buffer,o=Object.assign(Object.assign({},r),{id:Ld(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const u=n[d];l.excludeCredentials[d]=Object.assign(Object.assign({},u),{id:Ld(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function yq(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=jg(e,["challenge","allowCredentials"]),s=Ld(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Ld(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function vq(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:dc(new Uint8Array(e.response.attestationObject)),clientDataJSON:dc(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function bq(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:dc(new Uint8Array(s.authenticatorData)),clientDataJSON:dc(new Uint8Array(s.clientDataJSON)),signature:dc(new Uint8Array(s.signature)),userHandle:s.userHandle?dc(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function fI(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function bC(){var e,t;return!!(An()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function wq(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new rp("Browser returned unexpected credential type",t)}:{data:null,error:new rp("Empty credential response",t)}}catch(t){return{data:null,error:fq({error:t,options:e})}}}async function jq(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new rp("Browser returned unexpected credential type",t)}:{data:null,error:new rp("Empty credential response",t)}}catch(t){return{data:null,error:mq({error:t,options:e})}}}const Nq={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},kq={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ap(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=ap(l,o):n[i]=ap(o)}else n[i]=o}return n}function Sq(e,t){return ap(Nq,e,t||{})}function _q(e,t){return ap(kq,e,t||{})}class Eq{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){var o;try{const{data:l,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:d};const u=s??gq.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;if(!f.name){const m=n;if(m)f.name=`${f.id}:${m}`;else{const g=(await this.client.getUser()).data.user,b=((o=g?.user_metadata)===null||o===void 0?void 0:o.name)||g?.email||g?.id||"User";f.name=`${f.id}:${b}`}}f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=Sq(l.webauthn.credential_options.publicKey,i?.create),{data:m,error:p}=await wq({publicKey:f,signal:u});return m?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:p}}case"request":{const f=_q(l.webauthn.credential_options.publicKey,i?.request),{data:m,error:p}=await jq(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:u}));return m?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:p}}}}catch(l){return Yt(l)?{data:null,error:l}:{data:null,error:new ic("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new s0("rpId is required for WebAuthn authentication")};try{if(!bC())return{data:null,error:new ic("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:d}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(o){return Yt(o)?{data:null,error:o}:{data:null,error:new ic("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new s0("rpId is required for WebAuthn registration")};try{if(!bC())return{data:null,error:new ic("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(f=>{var m;return(m=f.data)===null||m===void 0?void 0:m.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:l};const{data:d,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return d?this._verify({factorId:o.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Yt(o)?{data:null,error:o}:{data:null,error:new ic("Unexpected error in register",o)}}}}cq();const Cq={url:kH,storageKey:SH,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_H,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function wC(e,t,r){return await r()}const yd={};class i0{get jwks(){var t,r;return(r=(t=yd[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){yd[this.storageKey]=Object.assign(Object.assign({},yd[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=yd[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){yd[this.storageKey]=Object.assign(Object.assign({},yd[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Cq),t);if(this.storageKey=i.storageKey,this.instanceID=(r=i0.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,i0.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&An()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new iq({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=dI(i.fetch),this.lock=i.lock||wC,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&An()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=lq:this.lock=wC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Eq(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:cI()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=vC(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=vC(this.memoryStorage)),An()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${iI}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(An()&&(r=BH(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),An()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),DH(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Yt(r)?this._returnResult({error:r}):this._returnResult({error:new ic("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await dr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t?.options)===null||s===void 0?void 0:s.captchaToken}},xform:ki}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const d=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:u,session:d},error:null})}catch(i){if(Yt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:f,password:m,options:p}=t;let g=null,b=null;this.flowType==="pkce"&&([g,b]=await pd(this.storage,this.storageKey)),i=await dr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p?.emailRedirectTo,body:{email:f,password:m,data:(r=p?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:b},xform:ki})}else if("phone"in t){const{phone:f,password:m,options:p}=t;i=await dr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:m,data:(n=p?.data)!==null&&n!==void 0?n:{},channel:(s=p?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:ki})}else throw new jm("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await Cn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const d=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:u,session:d},error:null})}catch(i){if(await Cn(this.storage,`${this.storageKey}-code-verifier`),Yt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await dr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:xC})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await dr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:xC})}else throw new jm("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new md;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Yt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,d,u,f,m,p;let g,b;if("message"in t)g=t.message,b=t.signature;else{const{chain:y,wallet:v,statement:k,options:S}=t;let w;if(An())if(typeof v=="object")w=v;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")w=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!S?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const A=new URL((r=S?.url)!==null&&r!==void 0?r:window.location.href),C=await w.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!C||C.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=hI(C[0]);let E=(n=S?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!E){const O=await w.request({method:"eth_chainId"});E=dq(O)}const _={domain:A.host,address:N,statement:k,uri:A.href,version:"1",chainId:E,nonce:(s=S?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=S?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=S?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(d=S?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(u=S?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(f=S?.signInWithEthereum)===null||f===void 0?void 0:f.resources};g=hq(_),b=await w.request({method:"personal_sign",params:[uq(g),N]})}try{const{data:y,error:v}=await dr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:b},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:ki});if(v)throw v;if(!y||!y.session||!y.user){const k=new md;return this._returnResult({data:{user:null,session:null},error:k})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:v})}catch(y){if(Yt(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var r,n,s,i,o,l,d,u,f,m,p,g;let b,y;if("message"in t)b=t.message,y=t.signature;else{const{chain:v,wallet:k,statement:S,options:w}=t;let A;if(An())if(typeof k=="object")A=k;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))A=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=k}const C=new URL((r=w?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in A&&A.signIn){const N=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),S?{statement:S}:null));let E;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")E=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)E=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)b=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),y=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${C.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(s=(n=w?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((d=w?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((m=(f=w?.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||m===void 0)&&m.length?["Resources",...w.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const N=await A.signMessage(new TextEncoder().encode(b),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=N}}try{const{data:v,error:k}=await dr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:dc(y)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:ki});if(k)throw k;if(!v||!v.session||!v.user){const S=new md;return this._returnResult({data:{user:null,session:null},error:S})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:k})}catch(v){if(Yt(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const r=await Jl(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new OH;const{data:i,error:o}=await dr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ki});if(await Cn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new md;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Cn(this.storage,`${this.storageKey}-code-verifier`),Yt(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await dr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:ki}),{data:d,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!d||!d.session||!d.user){const f=new md;return this._returnResult({data:{user:null,session:null},error:f})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:u})}catch(r){if(Yt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:d}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await pd(this.storage,this.storageKey));const{error:m}=await dr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=d?.data)!==null&&r!==void 0?r:{},create_user:(n=d?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in t){const{phone:l,options:d}=t,{data:u,error:f}=await dr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=d?.data)!==null&&s!==void 0?s:{},create_user:(i=d?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(o=d?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:f})}throw new jm("You must provide either an email or phone number.")}catch(l){if(await Cn(this.storage,`${this.storageKey}-code-verifier`),Yt(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await dr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ki});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,u=o.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:u,session:d},error:null})}catch(s){if(Yt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let l=null,d=null;this.flowType==="pkce"&&([l,d]=await pd(this.storage,this.storageKey));const u=await dr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:d}),headers:this.headers,xform:aq});return!((i=u.data)===null||i===void 0)&&i.url&&An()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Cn(this.storage,`${this.storageKey}-code-verifier`),Yt(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ds;const{error:s}=await dr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(Yt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await dr(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await dr(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:l})}throw new jm("You must provide either an email or phone number and a type")}catch(r){if(Yt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Jl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<rv:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Jl(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=sv()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=ZH(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await dr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:gl}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ds}:await dr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:gl})})}catch(r){if(Yt(r))return av(r)&&(await this._removeSession(),await Cn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ds;const o=s.session;let l=null,d=null;this.flowType==="pkce"&&t.email!=null&&([l,d]=await pd(this.storage,this.storageKey));const{data:u,error:f}=await dr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:d}),jwt:o.access_token,xform:gl});if(f)throw f;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Cn(this.storage,`${this.storageKey}-code-verifier`),Yt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ds;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=km(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:d}=await this._getUser(t.access_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(Yt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new Ds;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Yt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!An())throw new Nm("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Nm(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new dC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Nm("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new dC("No code detected.");const{data:S,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:d,token_type:u}=t;if(!i||!l||!o||!u)throw new Nm("No session defined in URL");const f=Math.round(Date.now()/1e3),m=parseInt(l);let p=f+m;d&&(p=parseInt(d));const g=p-f;g*1e3<=Ed&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${m}s`);const b=p-m;f-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,p,f):f-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,p,f);const{data:y,error:v}=await this._getUser(i);if(v)throw v;const k={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:m,expires_at:p,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:k,redirectType:t.type},error:null})}catch(n){if(Yt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Jl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i&&!av(i))return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(TH(l)&&(l.status===404||l.status===401||l.status===403)||av(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Cn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=LH(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await pd(this.storage,this.storageKey,!0));try{return await dr(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Cn(this.storage,`${this.storageKey}-code-verifier`),Yt(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Yt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,d,u,f;const{data:m,error:p}=i;if(p)throw p;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await dr(this.fetch,"GET",g,{headers:this.headers,jwt:(f=(u=m.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return An()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:t.provider,url:n?.url},error:null})}catch(n){if(Yt(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:l,token:d,access_token:u,nonce:f}=t,m=await dr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:d,access_token:u,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:ki}),{data:p,error:g}=m;return g?this._returnResult({data:{user:null,session:null},error:g}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new md}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:g}))}catch(s){if(await Cn(this.storage,`${this.storageKey}-code-verifier`),Yt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await dr(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Yt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await qH(async s=>(s>0&&await HH(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await dr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ki})),(s,i)=>{const o=200*Math.pow(2,s);return i&&nv(i)&&Date.now()+o-n<Ed})}catch(n){if(this._debug(r,"error",n),Yt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),An()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Jl(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Jl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Cd(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o?.user)!==null&&t!==void 0?t:sv()}else if(s&&!s.user&&!s.user){const o=await Jl(this.storage,this.storageKey+"-user");o&&o?.user?(s.user=o.user,await Cn(this.storage,this.storageKey+"-user"),await Cd(this.storage,this.storageKey,s)):s.user=sv()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<rv;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${rv}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),nv(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&o?.user?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ds;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Sg;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ds;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Yt(i)){const o={data:null,error:i};return nv(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Cn(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Cd(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=pC(s);await Cd(this.storage,this.storageKey,i)}else{const s=pC(r);await Cd(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Cn(this.storage,this.storageKey),await Cn(this.storage,this.storageKey+"-code-verifier"),await Cn(this.storage,this.storageKey+"-user"),this.userStorage&&await Cn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&An()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ed);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Ed);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ed}ms, refresh threshold is ${Ij} ticks`),s<=Ij&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof uI)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!An()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await pd(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n?.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await dr(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Yt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:u}=await dr(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&d.type==="totp"&&(!((s=d?.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(r){if(Yt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?vq(t.webauthn.credential_response):bq(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:d}=await dr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:d}))})}catch(r){if(Yt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await dr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:xq(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:yq(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Yt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r?.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,s,i;if(t)try{const{payload:g}=km(t);let b=null;g.aal&&(b=g.aal);let y=b;const{data:{user:v},error:k}=await this.getUser(t);if(k)return this._returnResult({data:null,error:k});((n=(r=v?.factors)===null||r===void 0?void 0:r.filter(A=>A.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(y="aal2");const w=g.amr||[];return{data:{currentLevel:b,nextLevel:y,currentAuthenticationMethods:w},error:null}}catch(g){if(Yt(g))return this._returnResult({data:null,error:g});throw g}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=km(o.access_token);let u=null;d.aal&&(u=d.aal);let f=u;((i=(s=o.user.factors)===null||s===void 0?void 0:s.filter(g=>g.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(f="aal2");const p=d.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await dr(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ds})})}catch(r){if(Yt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ds});const o=await dr(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&An()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Yt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ds});const o=await dr(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&An()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Yt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await dr(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ds})})}catch(t){if(Yt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await dr(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ds})})}catch(r){if(Yt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+CH>s)return n;const{data:i,error:o}=await dr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:g,error:b}=await this.getSession();if(b||!g.session)return this._returnResult({data:null,error:b});n=g.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:d}}=km(n);r?.allowExpired||XH(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:i,header:s,signature:o},error:null}}const f=JH(s.alg),m=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,m,o,FH(`${l}.${d}`)))throw new Fj("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(Yt(n))return this._returnResult({data:null,error:n});throw n}}}i0.nextInstanceID={};const Aq=i0,Tq="2.95.3";let Ch="";typeof Deno<"u"?Ch="deno":typeof document<"u"?Ch="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ch="react-native":Ch="node";const Dq={"X-Client-Info":`supabase-js-${Ch}/${Tq}`},Oq={headers:Dq},Pq={schema:"public"},Iq={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mq={};function o0(e){"@babel/helpers - typeof";return o0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o0(e)}function Rq(e,t){if(o0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(o0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fq(e){var t=Rq(e,"string");return o0(t)=="symbol"?t:t+""}function $q(e,t,r){return(t=Fq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ra(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jC(Object(r),!0).forEach(function(n){$q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Lq=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Bq=()=>Headers,Uq=(e,t,r)=>{const n=Lq(r),s=Bq();return async(i,o)=>{var l;const d=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o?.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${d}`),n(i,Ra(Ra({},o),{},{headers:u}))}};function Hq(e){return e.endsWith("/")?e:e+"/"}function qq(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:d,auth:u,realtime:f,global:m}=t,p={db:Ra(Ra({},d),s),auth:Ra(Ra({},u),i),realtime:Ra(Ra({},f),o),storage:{},global:Ra(Ra(Ra({},m),l),{},{headers:Ra(Ra({},(r=m?.headers)!==null&&r!==void 0?r:{}),(n=l?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function Wq(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Hq(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var zq=class extends Aq{constructor(e){super(e)}},Kq=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=Wq(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:Pq,realtime:Mq,auth:Ra(Ra({},Iq),{},{storageKey:o}),global:Oq},d=qq(r??{},l);if(this.storageKey=(n=d.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=d.auth)!==null&&u!==void 0?u:{},this.headers,d.global.fetch)}this.fetch=Uq(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Ra({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new TU(new URL("rest/v1",i).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch,timeout:d.db.timeout,urlLengthLimit:d.db.urlLengthLimit}),this.storage=new NH(this.storageUrl.href,this.headers,this.fetch,r?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new jU(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:l,debug:d,throwOnError:u},f,m){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zq({url:this.authUrl.href,headers:Ra(Ra({},p),f),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:l,debug:d,throwOnError:u,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new VU(this.realtimeUrl.href,Ra(Ra({},e),{},{params:Ra(Ra({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Vq=(e,t,r)=>new Kq(e,t,r);function Gq(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Gq()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function ju(){return typeof window<"u"&&!window.__supabaseClient&&(window.__supabaseClient=Vq(`https://${In}.supabase.co`,rn,{auth:{storageKey:`sb-${In}-auth-token`,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})),window.__supabaseClient}const Xe=`https://${In}.supabase.co/functions/v1/make-server-c2dd9b9d`;function mr(){return ju()}async function Mc(){const e=mr(),{data:{session:t}}=await e.auth.getSession();if(!t)return null;const{data:{session:r},error:n}=await e.auth.refreshSession();return n||!r?(console.warn("Token refresh failed, using existing session:",n?.message||"No session returned"),t):r}let NC=!1;async function st(e,t,r){const n=await fetch(e,{...r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`,...r?.headers}});if(!n.ok){let i="Request failed",o=!1;try{const l=await n.json();i=l.error||l.message||`HTTP ${n.status}: ${n.statusText}`,o=!!l.warning}catch{i=`HTTP ${n.status}: ${n.statusText}`}throw console.error(`API Error [${e}]:`,i),n.status===401&&!NC&&(NC=!0,console.error("Session expired or invalid. Please log in again."),await mr().auth.signOut(),sessionStorage.getItem("logout_redirect_in_progress")||(sessionStorage.setItem("logout_redirect_in_progress","true"),setTimeout(()=>{sessionStorage.removeItem("logout_redirect_in_progress"),window.location.reload()},100))),new Error(i)}const s=await n.json();return s.warning&&console.warn(`API Warning [${e}]:`,s.warning),s}async function _g(e){return(await st(`${Xe}/inventory`,e)).inventory||[]}async function mI(e,t){return(await st(`${Xe}/inventory`,e,{method:"POST",body:JSON.stringify(t)})).item}async function pI(e,t,r){return(await st(`${Xe}/inventory/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function gI(e,t){await st(`${Xe}/inventory/${t}`,e,{method:"DELETE"})}async function Eg(e){return(await st(`${Xe}/overheads`,e)).overheads||[]}async function xI(e,t){return(await st(`${Xe}/overheads`,e,{method:"POST",body:JSON.stringify(t)})).item}async function yI(e,t,r){return(await st(`${Xe}/overheads/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function vI(e,t){await st(`${Xe}/overheads/${t}`,e,{method:"DELETE"})}async function bI(){const e=mr(),{data:{session:t}}=await e.auth.getSession();if(!t)throw new Error("Not authenticated");return Eg(t.access_token)}async function wI(e){return(await st(`${Xe}/fixed-costs`,e)).fixedCosts||[]}async function jI(e,t){return(await st(`${Xe}/fixed-costs`,e,{method:"POST",body:JSON.stringify(t)})).item}async function NI(e,t,r){return(await st(`${Xe}/fixed-costs/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function kI(e,t){await st(`${Xe}/fixed-costs/${t}`,e,{method:"DELETE"})}async function SI(e){return await st(`${Xe}/cleanup-duplicates`,e,{method:"POST"})}async function Yq(e){return await st(`${Xe}/sales/migrate-discrepancy`,e,{method:"POST"})}async function Xq(e){return await st(`${Xe}/migrate-stock-request-timestamps`,e,{method:"POST"})}async function Jq(e,t,r,n){return await st(`${Xe}/fix-orphaned-store-data`,e,{method:"POST",body:JSON.stringify({targetStoreId:t,dataType:r,recordIds:n})})}async function I2(e){return(await st(`${Xe}/sales`,e)).sales||[]}async function _I(e,t){return(await st(`${Xe}/sales`,e,{method:"POST",body:JSON.stringify(t)})).item}async function EI(e,t,r){return(await st(`${Xe}/sales/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function CI(e,t){return(await st(`${Xe}/sales/${t}/approve`,e,{method:"POST"})).item}async function AI(e,t,r,n){return(await st(`${Xe}/sales/${t}/request-approval`,e,{method:"POST",body:JSON.stringify({requestedCashInHand:r,requestedOffset:n})})).item}async function TI(e,t){return(await st(`${Xe}/sales/${t}/approve-discrepancy`,e,{method:"POST"})).item}async function DI(e,t,r){return(await st(`${Xe}/sales/${t}/reject-discrepancy`,e,{method:"POST",body:JSON.stringify({reason:r})})).item}async function Cg(){const e=mr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/production`,t.access_token)).production||[]}async function OI(e){const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/production`,r.access_token,{method:"POST",body:JSON.stringify(e)})).item}async function PI(e,t){const r=mr(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/production/${e}`,n.access_token,{method:"PUT",body:JSON.stringify(t)})).item}async function II(e){const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/production/${e}/approve`,r.access_token,{method:"POST"})).item}async function Qq(){const e=mr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return await st(`${Xe}/production/migrate-notifications`,t.access_token,{method:"POST"})}async function MI(){const e=mr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return await st(`${Xe}/production/cleanup-duplicates`,t.access_token,{method:"POST"})}async function Zq(){const e=mr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");await st(`${Xe}/clear-data`,t.access_token,{method:"DELETE"})}async function RI(){const e=mr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return await st(`${Xe}/cleanup-production-data`,t.access_token,{method:"POST"})}async function FI(){const e=mr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)return[];try{return(await st(`${Xe}/notifications`,t.access_token)).notifications}catch(r){return console.log("Unable to fetch notifications:",r instanceof Error?r.message:"Unknown error"),[]}}async function $I(e){const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/notifications/${e}/read`,r.access_token,{method:"PUT"})).notification}async function LI(){const e=mr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");await st(`${Xe}/notifications/read-all`,t.access_token,{method:"PUT"})}async function Nu(){const e=mr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/stores`,t.access_token)).stores}async function M2(e,t){const r=mr(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/stores`,n.access_token,{method:"POST",body:JSON.stringify({name:e,location:t})})).store}async function BI(e,t){const r=mr(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/stores/${e}/assign-manager`,n.access_token,{method:"PUT",body:JSON.stringify({managerId:t})})).store}async function UI(e,t){const r=mr(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/stores/${e}/assign-production-house`,n.access_token,{method:"PUT",body:JSON.stringify({productionHouseId:t})})).store}async function HI(e,t,r){const n=mr(),{data:{session:s}}=await n.auth.getSession();if(!s?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/stores/${e}`,s.access_token,{method:"PUT",body:JSON.stringify({name:t,location:r})})).store}async function qI(e){const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return await st(`${Xe}/stores/${e}/migrate-data`,r.access_token,{method:"POST"})}async function eW(e){return await st(`${Xe}/cleanup-duplicates`,e,{method:"POST"})}async function tW(e){return await st(`${Xe}/migrate-production-house-system`,e,{method:"POST"})}async function li(e){if(e)return(await st(`${Xe}/employees`,e)).employees||[];const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/employees`,r.access_token)).employees||[]}async function El(){return li()}async function WI(){const e=mr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/archived-employees`,t.access_token)).employees||[]}async function zI(e){const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const n=await fetch(`${Xe}/unified-employees`,{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to create employee")}return await n.json()}async function KI(e){const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const n=await fetch(`${Xe}/unified-employees/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"}});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to delete employee")}return await n.json()}async function VI(e){const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const n=await fetch(`${Xe}/employees/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"}});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to delete employee")}return await n.json()}async function GI(e,t){const r=mr(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");const s=await fetch(`${Xe}/unified-employees/${e}/reset-password`,{method:"POST",headers:{Authorization:`Bearer ${n.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newPassword:t})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to reset password")}return await s.json()}async function kc(e,t){if(t)return(await st(`${Xe}/unified-employees/manager/${e}`,t)).employees||[];const r=mr(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/unified-employees/manager/${e}`,n.access_token)).employees||[]}async function Ag(e){const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/unified-employees/cluster-head/${e}`,r.access_token)).managers||[]}async function YI(){const e=mr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");const r=await fetch(`${Xe}/migrate-employee-stores`,{method:"POST",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to run migration")}return await r.json()}async function Tg(e,t){const r=await Mc();if(!r)throw new Error("Not authenticated");const n=await fetch(`${Xe}/assign-manager-to-employee`,{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({employeeId:e,managerId:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to assign manager")}return await n.json()}async function XI(e,t){const r=await Mc();if(!r)throw new Error("Not authenticated");const n=await fetch(`${Xe}/employee/${e}/role`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newRole:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to update role")}return await n.json()}async function JI(e,t){const r=await Mc();if(!r)throw new Error("Not authenticated");const n=await fetch(`${Xe}/employee/${e}/store`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newStoreId:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to update store")}return await n.json()}async function QI(e,t,r){const n=await Mc();if(!n)throw new Error("Not authenticated");const s=await fetch(`${Xe}/employee/${e}/designation`,{method:"PUT",headers:{Authorization:`Bearer ${n.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({designation:t,department:r})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to update designation")}return await s.json()}async function ZI(e,t){const r=await Mc();if(!r)throw new Error("Not authenticated");const n=await fetch(`${Xe}/employee/${e}/assign-incharge`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({inchargeId:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to assign incharge")}return await n.json()}async function R2(e){const t=await Mc();if(!t)throw new Error("Not authenticated");const r=await fetch(`${Xe}/employees/by-incharge/${e}`,{headers:{Authorization:`Bearer ${t.access_token}`}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to fetch employees")}return await r.json()}async function e5(){const e=mr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");const r=await fetch(`${Xe}/sync-designations`,{method:"POST",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to sync designations")}return await r.json()}async function Dg(e,t){const r=await Mc();if(!r)throw new Error("Not authenticated");const n=await fetch(`${Xe}/unified-employees/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to update employee")}return await n.json()}async function Co(){const e=mr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/payouts`,t.access_token)).payouts||[]}async function F2(e){const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/payouts`,r.access_token,{method:"POST",body:JSON.stringify({payouts:e})})).payouts||[]}async function t5(e,t){const r=mr(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/payouts/${e}`,n.access_token,{method:"PUT",body:JSON.stringify(t)})).payout}async function np(e){const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");await st(`${Xe}/payouts/${e}`,r.access_token,{method:"DELETE"})}async function Og(e){try{return(await st(`${Xe}/online-sales`,e)).sales||[]}catch(t){return console.error("Error fetching online sales data:",t),[]}}async function r5(e,t){return(await st(`${Xe}/online-sales`,e,{method:"POST",body:JSON.stringify(t)})).entry}async function Pg(e){try{return(await st(`${Xe}/online-payouts`,e)).payouts||[]}catch(t){return console.error("Error fetching online payout data:",t),[]}}async function a5(e,t){return(await st(`${Xe}/online-payouts`,e,{method:"POST",body:JSON.stringify(t)})).entry}async function $2(){const e=mr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/salary-advances`,t.access_token)).salaryAdvances||[]}async function L2(e){const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/salary-advances`,r.access_token,{method:"POST",body:JSON.stringify(e)})).salaryAdvance}async function $j(e,t){const r=mr(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/salary-advances/${e}`,n.access_token,{method:"PUT",body:JSON.stringify(t)})).salaryAdvance}async function rW(e){const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");await st(`${Xe}/salary-advances/${e}`,r.access_token,{method:"DELETE"})}async function Ah(e,t,r){try{const n=new URLSearchParams;e&&n.append("entityType",e),t&&n.append("entityId",t),r&&n.append("category",r);const s=await fetch(`${Xe}/inventory-items?${n.toString()}`,{headers:{Authorization:`Bearer ${rn}`}});if(!s.ok){const o=await s.text();return console.error(" Error fetching inventory items:",o),[]}return(await s.json()).items||[]}catch(n){return console.error(" Error fetching inventory items:",n),[]}}async function n5(e){const t=await fetch(`${Xe}/inventory-items`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${rn}`},body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to create inventory item")}return(await t.json()).item}async function s5(e,t){const r=await fetch(`${Xe}/inventory-items/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${rn}`},body:JSON.stringify(t)});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to update inventory item")}return(await r.json()).item}async function aW(e){const t=await fetch(`${Xe}/inventory-items/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${rn}`}});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete inventory item")}}async function i5(){const e=await fetch(`${Xe}/inventory-items/initialize-defaults`,{method:"POST",headers:{Authorization:`Bearer ${rn}`}});if(!e.ok){const r=await e.json();throw new Error(r.error||"Failed to initialize default items")}return(await e.json()).items||[]}async function nW(e){const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");await st(`${Xe}/cluster-heads/by-email/${encodeURIComponent(e)}`,r.access_token,{method:"DELETE"})}async function o5(e){const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const n=e?`${Xe}/organizational-hierarchy?storeId=${encodeURIComponent(e)}`:`${Xe}/organizational-hierarchy`,s=await st(n,r.access_token);return{hierarchy:s.hierarchy||[],unassignedManagers:s.unassignedManagers||[],unassignedEmployees:s.unassignedEmployees||[],stats:s.stats||{totalClusterHeads:0,totalManagers:0,totalEmployees:0}}}async function l0(e){const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/timesheets/${e}`,r.access_token)).timesheets||[]}async function ku(e,t){if(t)return(await st(`${Xe}/leaves/${e}`,t)).leaves||[];const r=mr(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/leaves/${e}`,n.access_token)).leaves||[]}async function l5(e){if(e)return(await st(`${Xe}/leaves/all`,e)).leaves||[];const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/leaves/all`,r.access_token)).leaves||[]}async function c5(e){const t=mr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/leaves`,r.access_token,{method:"POST",body:JSON.stringify(e)})).leave}async function d5(e,t){const r=mr(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/leaves/${e}/balance?joiningDate=${t}`,n.access_token)).balance||0}async function Lj(e,t,r){const n=mr(),{data:{session:s}}=await n.auth.getSession();if(!s?.access_token)throw new Error("Not authenticated");await st(`${Xe}/leaves/${e}/approve`,s.access_token,{method:"POST",body:JSON.stringify({managerId:t,managerName:r})})}async function u5(e,t,r,n){const s=mr(),{data:{session:i}}=await s.auth.getSession();if(!i?.access_token)throw new Error("Not authenticated");await st(`${Xe}/leaves/${e}/reject`,i.access_token,{method:"POST",body:JSON.stringify({managerId:t,managerName:r,reason:n})})}async function h5(){try{const e=await fetch(`${Xe}/custom-items`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${rn}`}});return e.ok?(await e.json()).customItems||[]:(console.error("Failed to fetch custom items:",e.status,e.statusText),[])}catch(e){return console.error("Error fetching custom items:",e),[]}}async function f5(e,t){const r=mr(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/custom-items`,n.access_token,{method:"POST",body:JSON.stringify({category:e,itemName:t})})).customItem}async function Ig(e){return(await st(`${Xe}/production-requests`,e)).requests||[]}async function B2(e,t){return(await st(`${Xe}/production-requests`,e,{method:"POST",body:JSON.stringify(t)})).request}async function m5(e,t,r,n){return(await st(`${Xe}/production-requests/${t}/status`,e,{method:"PUT",body:JSON.stringify({status:r,updatedBy:n})})).request}async function p5(e,t,r,n,s){return(await st(`${Xe}/production-requests/${t}/ship`,e,{method:"PUT",body:JSON.stringify({shippedQuantities:r,shippingNotes:n,shippedBy:s})})).request}async function g5(e){return await st(`${Xe}/production-requests/check-pending`,e,{method:"POST"})}async function Mg(e){return await st(`${Xe}/sales-data`,e)}async function x5(e,t){return(await st(`${Xe}/sales-data`,t,{method:"POST",body:JSON.stringify(e)})).record}async function y5(e,t){await st(`${Xe}/sales-data/${e}`,t,{method:"DELETE"})}async function c0(){const e=mr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await st(`${Xe}/production-houses`,t.access_token)).productionHouses||[]}async function v5(e,t){return(await st(`${Xe}/production-houses`,e,{method:"POST",body:JSON.stringify(t)})).productionHouse}async function b5(e,t,r){return(await st(`${Xe}/production-houses/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).productionHouse}async function w5(e,t,r){return(await st(`${Xe}/production-houses/${t}/inventory`,e,{method:"PUT",body:JSON.stringify({inventory:r})})).productionHouse}async function j5(e,t,r){return(await st(`${Xe}/production-houses/${t}/assign-head`,e,{method:"PUT",body:JSON.stringify({productionHeadId:r})})).productionHouse}async function N5(e,t,r){return(await st(`${Xe}/stores/${t}/assign-production-house`,e,{method:"PUT",body:JSON.stringify({productionHouseId:r})})).store}async function k5(e,t,r){return await st(`${Xe}/production-houses/${t}/fix-records`,e,{method:"POST",body:JSON.stringify({oldStoreId:r})})}async function S5(e,t){await st(`${Xe}/production-houses/${t}`,e,{method:"DELETE"})}async function _5(e,t,r,n){const s=await st(`${Xe}/production-houses/transfer-inventory`,e,{method:"POST",body:JSON.stringify({fromHouseId:t,toHouseId:r,quantities:n})});return{fromHouse:s.fromHouse,toHouse:s.toHouse}}async function E5(e){return(await st(`${Xe}/stock-requests`,e)).stockRequests||[]}async function C5(e,t){return(await st(`${Xe}/stock-requests`,e,{method:"POST",body:JSON.stringify(t)})).stockRequest}async function A5(e,t,r,n,s,i){return(await st(`${Xe}/stock-requests/${t}/fulfill`,e,{method:"PUT",body:JSON.stringify({fulfilledQuantities:r,fulfilledBy:n,fulfilledByName:s,notes:i})})).stockRequest}async function T5(e,t){return(await st(`${Xe}/stock-requests/${t}/cancel`,e,{method:"PUT"})).stockRequest}async function sW(e){return await st(`${Xe}/fix-stock-requests`,e,{method:"POST"})}async function D5(e,t){return await st(`${Xe}/stock-recalibration`,e,{method:"POST",body:JSON.stringify(t)})}async function vl(e,t,r){const n=new Date().getTime(),s=r?`${Xe}/stock-recalibration/latest/${t}?locationType=${r}&_t=${n}`:`${Xe}/stock-recalibration/latest/${t}?_t=${n}`;return await st(s,e)}const Bj=vl;async function sp(e,t,r){const n=r?`${Xe}/stock-recalibration/history/${t}?locationType=${r}`:`${Xe}/stock-recalibration/history/${t}`;return await st(n,e)}async function O5(e){return await st(`${Xe}/stock-recalibration/pending-approval`,e)}async function P5(e,t){return await st(`${Xe}/stock-recalibration/${t}/approve`,e,{method:"POST"})}async function I5(e,t,r){return await st(`${Xe}/stock-recalibration/${t}/reject`,e,{method:"POST",body:JSON.stringify({reason:r})})}async function iW(e,t){return await st(`${Xe}/online-cash-recalibration`,e,{method:"POST",body:JSON.stringify(t)})}async function M5(e,t){const r=new Date().getTime();return await st(`${Xe}/online-cash-recalibration/latest/${t}?_t=${r}`,e)}async function oW(e,t){return await st(`${Xe}/online-cash-recalibration/history/${t}`,e)}async function lW(e,t,r){return await st(`${Xe}/online-cash-recalibration/${t}`,e,{method:"PUT",body:JSON.stringify(r)})}async function cW(e,t){return await st(`${Xe}/online-cash-recalibration/${t}`,e,{method:"DELETE"})}async function R5(e){return(await st(`${Xe}/online-cash-recalibration/all`,e))?.data||[]}async function F5(e,t,r,n,s){await st(`${Xe}/cash-conversion`,e,{method:"POST",body:JSON.stringify({storeId:t,date:r,amount:n,performedBy:s})})}async function $5(e,t){return(await st(`${Xe}/online-loans`,e,{method:"POST",body:JSON.stringify(t)})).loan}async function U2(e,t){const r=t?`${Xe}/online-loans?storeId=${t}`:`${Xe}/online-loans`;return(await st(r,e)).loans||[]}async function L5(e,t,r){return(await st(`${Xe}/online-loans/${t}/repay`,e,{method:"PUT",body:JSON.stringify(r)})).loan}async function B5(e,t){return(await st(`${Xe}/stock-thresholds/${t}`,e)).thresholds}async function U5(e,t,r){return await st(`${Xe}/stock-thresholds/${t}`,e,{method:"POST",body:JSON.stringify({thresholds:r})})}async function H5(e,t,r,n){let s=`${Xe}/stock-recalibration/wastage-report?month=${t}`;return r&&(s+=`&locationId=${r}`),n&&(s+=`&locationType=${n}`),await st(s,e)}async function q5(e){return await st(`${Xe}/cluster/info`,e)}async function W5(e,t,r,n){return await st(`${Xe}/cluster/update-assignments`,e,{method:"POST",body:JSON.stringify({employeeId:t,managedStoreIds:r,managedProductionHouseIds:n})})}async function z5(e){return await st(`${Xe}/cluster/all-cluster-heads`,e)}async function K5(e,t){return(await st(`${Xe}/investors`,e,{method:"POST",body:JSON.stringify(t)})).investor}async function H2(e){return(await st(`${Xe}/investors`,e)).investors||[]}async function V5(e,t,r){return(await st(`${Xe}/investors/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).investor}async function G5(e,t){return await st(`${Xe}/investors/${t}`,e,{method:"DELETE"})}async function Y5(e){return(await st(`${Xe}/online-loans/all`,e)).loans||[]}async function X5(e){return(await st(`${Xe}/online-loans/repayments`,e)).repayments||[]}const dW=Object.freeze(Object.defineProperty({__proto__:null,addCustomItem:f5,addFixedCost:jI,addInventory:mI,addInventoryItem:n5,addOverhead:xI,addPayouts:F2,addProductionData:OI,addSalesData:_I,applyLeave:c5,applyOnlineLoan:$5,approveDiscrepancy:TI,approveLeave:Lj,approveProductionData:II,approveRecalibration:P5,approveSalesData:CI,assignInchargeToEmployee:ZI,assignManagerToEmployee:Tg,assignManagerToStore:BI,assignProductionHeadToHouse:j5,assignProductionHouseToStore:UI,assignStoreToProductionHouse:N5,cancelStockRequest:T5,checkPendingProductionRequests:g5,cleanDuplicates:eW,cleanupDuplicateProduction:MI,cleanupDuplicates:SI,cleanupProductionData:RI,clearAllData:Zq,convertCashToOnline:F5,createInvestor:K5,createProductionHouse:v5,createProductionRequest:B2,createSalaryAdvance:L2,createStockRequest:C5,createStore:M2,createUnifiedEmployee:zI,deleteClusterHeadByEmail:nW,deleteEmployee:VI,deleteFixedCost:kI,deleteInventory:gI,deleteInventoryItem:aW,deleteInvestor:G5,deleteOnlineCashRecalibration:cW,deleteOverhead:vI,deletePayout:np,deleteProductionHouse:S5,deleteSalaryAdvance:rW,deleteSalesData:y5,deleteUnifiedEmployee:KI,fetchFixedCosts:wI,fetchInventory:_g,fetchInventoryItems:Ah,fetchLatestRecalibration:Bj,fetchOnlineCashRecalibrations:R5,fetchOverheads:Eg,fetchProductionData:Cg,fetchProductionRequests:Ig,fetchSalesData:I2,fixOrphanedStoreData:Jq,fixProductionRecords:k5,fixStockRequests:sW,fulfillStockRequest:A5,getAllClusterHeads:z5,getAllEmployees:li,getAllLeaves:l5,getAllLoanRepayments:X5,getAllOnlineLoans:Y5,getAllRecalibrationsForApproval:O5,getArchivedEmployees:WI,getClusterInfo:q5,getCustomItems:h5,getEmployees:El,getEmployeesByIncharge:R2,getEmployeesByManager:kc,getInvestors:H2,getLastOnlineCashRecalibration:M5,getLastRecalibration:vl,getLeaveBalance:d5,getLeaves:ku,getManagersByClusterHead:Ag,getMonthlyWastageReport:H5,getNotifications:FI,getOnlineCashRecalibrationHistory:oW,getOnlineLoans:U2,getOnlinePayoutData:Pg,getOnlineSalesData:Og,getOrganizationalHierarchy:o5,getOverheads:bI,getPayouts:Co,getProductionHouses:c0,getRecalibrationHistory:sp,getSalaryAdvances:$2,getSalesData:Mg,getStockRequests:E5,getStockThresholds:B5,getStores:Nu,getTimesheets:l0,initializeDefaultInventoryItems:i5,markAllNotificationsAsRead:LI,markNotificationAsRead:$I,migrateDataToStore:qI,migrateEmployeeStores:YI,migrateProductionHouseSystem:tW,migrateProductionNotifications:Qq,migrateSalesDiscrepancy:Yq,migrateStockRequestTimestamps:Xq,rejectDiscrepancy:DI,rejectLeave:u5,rejectRecalibration:I5,repayOnlineLoan:L5,requestSalesApproval:AI,resetEmployeePassword:GI,saveOnlinePayoutData:a5,saveOnlineSalesData:r5,saveSalesData:x5,saveStockThresholds:U5,shipProductionRequest:p5,submitOnlineCashRecalibration:iW,submitStockRecalibration:D5,syncDesignations:e5,transferInventoryBetweenHouses:_5,updateClusterAssignments:W5,updateEmployeeDesignation:QI,updateEmployeeRole:XI,updateEmployeeStore:JI,updateFixedCost:NI,updateInventory:pI,updateInventoryItem:s5,updateInvestor:V5,updateOnlineCashRecalibration:lW,updateOverhead:yI,updatePayout:t5,updateProductionData:PI,updateProductionHouse:b5,updateProductionHouseInventory:w5,updateProductionRequestStatus:m5,updateSalaryAdvance:$j,updateSalesData:EI,updateStore:HI,updateUnifiedEmployee:Dg},Symbol.toStringTag,{value:"Module"}));function uW({selectedDate:e,editingItem:t,onSubmit:r,onClose:n,onSuccess:s}){const[i,o]=P.useState({category:t?.category||"fresh_produce",itemName:t?.itemName||"",customItem:t?!WE[t.category].includes(t.itemName):!1,quantity:t?.quantity.toString()||"",unit:t?.unit||"kg",totalCost:t?.totalCost.toString()||"",paymentMethod:t?.paymentMethod||"cash",cashAmount:t?.cashAmount?.toString()||"",onlineAmount:t?.onlineAmount?.toString()||""}),[l,d]=P.useState({}),[u,f]=P.useState(!0),[m,p]=P.useState(!1),[g,b]=P.useState(""),[y,v]=P.useState(!1),k=P.useRef(null);P.useEffect(()=>{S()},[]),P.useEffect(()=>{const E=_=>{k.current&&!k.current.contains(_.target)&&v(!1)};return y&&document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[y]);const S=async()=>{try{const E=await h5(),_={};E.forEach(O=>{_[O.category]||(_[O.category]=[]),_[O.category].push(O.itemName)}),d(_)}catch(E){console.log("Could not load custom items:",E)}finally{f(!1)}},w=()=>{o({category:i.category,itemName:"",customItem:!1,quantity:"",unit:"kg",totalCost:"",paymentMethod:"cash",cashAmount:"",onlineAmount:""}),b("")},A=async E=>{if(E.preventDefault(),m){console.log(" Submission already in progress, ignoring duplicate request");return}if(!i.itemName||i.itemName.trim()===""){alert(" Please select an item name before submitting!"),console.error(" Attempted to submit inventory item without itemName:",i);return}if(i.paymentMethod==="both"){const W=parseFloat(i.cashAmount)||0,ee=parseFloat(i.onlineAmount)||0,re=parseFloat(i.totalCost)||0;if(Math.abs(W+ee-re)>.01){alert(` Split payment amounts (${W.toFixed(2)} + ${ee.toFixed(2)} = ${(W+ee).toFixed(2)}) must equal total cost (${re.toFixed(2)})`);return}}p(!0);const _=parseFloat(i.quantity),O=parseFloat(i.totalCost),B=_>0?O/_:0,F=Math.round(_*100)/100,D=Math.round(O*100)/100,H=Math.round(B*100)/100;if(console.log(" Submitting inventory item:",{itemName:i.itemName,quantity:F,totalCost:D,costPerUnit:H,paymentMethod:i.paymentMethod}),i.customItem&&i.itemName)try{await f5(i.category,i.itemName),console.log("Custom item saved:",i.itemName),await S()}catch(W){console.error("Error saving custom item:",W)}let ne={paymentMethod:i.paymentMethod};if(i.paymentMethod==="both"){const W=parseFloat(i.cashAmount)||0,ee=parseFloat(i.onlineAmount)||0;ne.cashAmount=Math.round(W*100)/100,ne.onlineAmount=Math.round(ee*100)/100}else i.paymentMethod==="online"?(ne.onlineAmount=D,ne.cashAmount=0):i.paymentMethod==="cash"&&(ne.cashAmount=D,ne.onlineAmount=0);console.log(" Payment data being sent:",ne),await r({date:e,category:i.category,itemName:i.itemName,quantity:F,unit:i.unit,costPerUnit:H,totalCost:D,...ne}),p(!1),t||w(),s&&s()},C=[...new Set([...WE[i.category],...l[i.category]||[]])].sort((E,_)=>E.localeCompare(_)),N=g.trim()?C.filter(E=>E.toLowerCase().includes(g.toLowerCase())):C;return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-gray-900",children:[t?"Edit":"Add"," Inventory Item"]}),a.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(ea,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:A,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),a.jsx("select",{value:i.category,onChange:E=>{o({...i,category:E.target.value,itemName:"",customItem:!1}),b("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:Object.entries(wg).map(([E,_])=>a.jsx("option",{value:E,children:_},E))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Item Name"}),i.customItem?a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"text",value:i.itemName,onChange:E=>o({...i,itemName:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Enter custom item name",required:!0}),a.jsx("button",{type:"button",onClick:()=>{o({...i,customItem:!1,itemName:""}),b("")},className:"text-sm text-blue-600 hover:text-blue-700",children:" Back to list"})]}):a.jsxs("div",{className:"relative space-y-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx(J6,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",value:g,onChange:E=>{b(E.target.value),v(!0)},onFocus:()=>v(!0),placeholder:i.itemName||"Search items...",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),i.itemName&&!g&&a.jsx("div",{className:"absolute inset-y-0 left-10 right-10 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-900",children:i.itemName})}),a.jsx(nf,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 cursor-pointer",onClick:()=>v(!y)})]}),y&&a.jsxs("div",{ref:k,className:"absolute z-20 left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[N.length===0&&g?a.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"}):N.map(E=>a.jsx("div",{onClick:()=>{o({...i,itemName:E}),b(""),v(!1)},className:`px-3 py-2 cursor-pointer hover:bg-blue-50 transition-colors ${i.itemName===E?"bg-blue-100 font-medium":""}`,children:E},E)),a.jsx("div",{onClick:()=>{o({...i,customItem:!0,itemName:""}),b(""),v(!1)},className:"px-3 py-2 cursor-pointer hover:bg-blue-50 transition-colors border-t border-gray-200 text-blue-600 font-medium",children:"+ Add Custom Item"})]}),g&&!y&&a.jsxs("p",{className:"text-xs text-gray-500",children:["Showing ",N.length," of ",C.length," items"]}),a.jsx("input",{type:"hidden",value:i.itemName,required:!0})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Quantity"}),a.jsx("input",{type:"number",step:"0.01",value:i.quantity,onChange:E=>o({...i,quantity:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Unit"}),a.jsxs("select",{value:i.unit,onChange:E=>o({...i,unit:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"mL",children:"mL"}),a.jsx("option",{value:"pcs",children:"pcs"}),a.jsx("option",{value:"units",children:"units"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Total Cost ()"}),a.jsx("input",{type:"number",step:"0.01",value:i.totalCost,onChange:E=>o({...i,totalCost:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Payment Method"}),a.jsxs("select",{value:i.paymentMethod,onChange:E=>{const _=E.target.value;o({...i,paymentMethod:_,cashAmount:_==="both"?i.cashAmount:"",onlineAmount:_==="both"?i.onlineAmount:""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",required:!0,children:[a.jsx("option",{value:"cash",children:"Cash in Hand "}),a.jsx("option",{value:"online",children:"Online / Paytm "}),a.jsx("option",{value:"both",children:"Split Payment (Both) "})]})]}),i.paymentMethod==="both"&&a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 space-y-3",children:[a.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Split Payment Details"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-blue-900 mb-1",children:"Cash Amount ()"}),a.jsx("input",{type:"number",step:"0.01",value:i.cashAmount,onChange:E=>o({...i,cashAmount:E.target.value}),className:"w-full px-3 py-2 border border-blue-300 rounded-lg",placeholder:"0.00",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-blue-900 mb-1",children:"Online Amount ()"}),a.jsx("input",{type:"number",step:"0.01",value:i.onlineAmount,onChange:E=>o({...i,onlineAmount:E.target.value}),className:"w-full px-3 py-2 border border-blue-300 rounded-lg",placeholder:"0.00",required:!0})]})]}),i.cashAmount&&i.onlineAmount&&i.totalCost&&a.jsx("div",{className:"text-xs",children:parseFloat(i.cashAmount)+parseFloat(i.onlineAmount)===parseFloat(i.totalCost)?a.jsx("p",{className:"text-green-700 font-semibold",children:" Split amounts match total cost"}):a.jsxs("p",{className:"text-red-700 font-semibold",children:[" Split total: ",(parseFloat(i.cashAmount)+parseFloat(i.onlineAmount)).toFixed(2),"(Total Cost: ",parseFloat(i.totalCost).toFixed(2),")"]})})]}),i.quantity&&i.totalCost&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Cost per Unit"}),a.jsxs("p",{className:"text-gray-900",children:["",(parseFloat(i.totalCost)/parseFloat(i.quantity)).toFixed(2)]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:m,children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:m,children:[m&&a.jsx(Io,{className:"w-4 h-4 animate-spin"}),m?"Saving...":t?"Update Item":"Add Item"]})]})]})]})})}const hW=[{value:"fuel",label:" Fuel Cost"},{value:"travel",label:" Travel by Employee"},{value:"transportation",label:" Goods Transportation Cost"},{value:"marketing",label:" Marketing Cost"},{value:"service_charge",label:" Service Charge (Food Aggregators)"},{value:"repair",label:" Repair Cost"},{value:"party",label:" Party Cost"},{value:"lunch",label:" Lunch Cost"},{value:"emergency_online",label:" Emergency Online Order (Blinkit)"},{value:"personal_expense",label:" Personal Expense By an Employee"},{value:"utensils",label:" Utensils"},{value:"equipments",label:" Equipments"},{value:"license",label:" License Cost"},{value:"water_jar",label:" Water Jar"},{value:"miscellaneous",label:" Miscellaneous Cost"}];function fW({selectedDate:e,onSubmit:t,onClose:r,editingItem:n,employees:s}){const[i,o]=P.useState({category:n?n.category:"fuel",description:n?n.description:"",amount:n?n.amount.toString():"",employeeId:n?.employeeId||"",employeeName:n?.employeeName||"",expenseMonth:n?.expenseMonth||e.slice(0,7),paymentMethod:n?.paymentMethod||"cash",cashAmount:n?.cashAmount?n.cashAmount.toString():"",onlineAmount:n?.onlineAmount?n.onlineAmount.toString():""}),[l,d]=P.useState(!1),u=parseFloat(i.amount||"0");P.useEffect(()=>{if(i.paymentMethod==="both"&&u>0&&!i.cashAmount&&!i.onlineAmount){const p=(u/2).toFixed(2);o(g=>({...g,cashAmount:p,onlineAmount:p}))}},[i.paymentMethod,u]),P.useEffect(()=>{if(i.category==="personal_expense"&&i.employeeId){const p=s.find(g=>g.employeeId===i.employeeId);p&&o(g=>({...g,employeeName:p.name}))}},[i.employeeId,i.category,s]);const f=()=>{if(i.paymentMethod!=="both")return!0;const p=parseFloat(i.cashAmount||"0"),g=parseFloat(i.onlineAmount||"0");return Math.abs(p+g-u)<.01},m=async p=>{if(p.preventDefault(),l){console.log(" Submission already in progress, ignoring duplicate request");return}if(!f()){alert("Cash and Online amounts must add up to the total amount!");return}d(!0);const g={date:e,category:i.category,description:i.description,amount:parseFloat(i.amount),paymentMethod:i.paymentMethod};i.category==="personal_expense"&&(g.employeeId=i.employeeId,g.employeeName=i.employeeName,g.expenseMonth=i.expenseMonth);let b={paymentMethod:i.paymentMethod};i.paymentMethod==="both"?(b.cashAmount=parseFloat(i.cashAmount),b.onlineAmount=parseFloat(i.onlineAmount)):i.paymentMethod==="online"?(b.onlineAmount=parseFloat(i.amount),b.cashAmount=0):i.paymentMethod==="cash"&&(b.cashAmount=parseFloat(i.amount),b.onlineAmount=0);const y={...g,...b};console.log(" Overhead payment data being sent:",b),await t(y),d(!1)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-gray-900",children:[n?"Edit":"Add"," Overhead Cost"]}),a.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(ea,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:m,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),a.jsx("select",{value:i.category,onChange:p=>o({...i,category:p.target.value,employeeId:"",employeeName:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:hW.map(p=>a.jsx("option",{value:p.value,children:p.label},p.value))})]}),i.category==="personal_expense"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Employee ID"}),a.jsxs("select",{value:i.employeeId,onChange:p=>o({...i,employeeId:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[a.jsx("option",{value:"",children:"Select Employee"}),s.map(p=>a.jsx("option",{value:p.employeeId,children:p.employeeId},p.id))]})]}),i.employeeId&&i.employeeName&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Employee Name"}),a.jsx("input",{type:"text",value:i.employeeName,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:["Expense Month",a.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(For which month is this salary/advance?)"})]}),a.jsx("input",{type:"month",value:i.expenseMonth,onChange:p=>o({...i,expenseMonth:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Select the month this expense belongs to (useful for backlogged salaries)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Expense Description"}),a.jsx("textarea",{value:i.description,onChange:p=>o({...i,description:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:"What was the expense for?",required:!0})]})]}),i.category!=="personal_expense"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:i.description,onChange:p=>o({...i,description:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Amount ()"}),a.jsx("input",{type:"number",step:"0.01",value:i.amount,onChange:p=>o({...i,amount:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:i.paymentMethod==="cash",onChange:p=>o({...i,paymentMethod:"cash"}),className:"w-4 h-4 text-orange-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-gray-900",children:" Cash in Hand"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Will reduce Expected Cash in Hand"})]})]}),a.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:i.paymentMethod==="online",onChange:p=>o({...i,paymentMethod:"online"}),className:"w-4 h-4 text-orange-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-gray-900",children:" Online Cash (Paytm)"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Will reduce Online Cash in Hand (Paytm)"})]})]}),a.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"both",checked:i.paymentMethod==="both",onChange:p=>o({...i,paymentMethod:"both"}),className:"w-4 h-4 text-orange-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-gray-900",children:" Both (Split Payment)"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Paid using both Cash and Online"})]})]})]})]}),i.paymentMethod==="both"&&u>0&&a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 space-y-3",children:[a.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Split Payment Details"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash Amount ()"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:u,value:i.cashAmount,onChange:p=>{const g=parseFloat(p.target.value||"0");o({...i,cashAmount:p.target.value,onlineAmount:(u-g).toFixed(2)})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Online Amount ()"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:u,value:i.onlineAmount,onChange:p=>{const g=parseFloat(p.target.value||"0");o({...i,onlineAmount:p.target.value,cashAmount:(u-g).toFixed(2)})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-purple-300",children:[a.jsx("span",{className:"text-gray-700",children:"Total:"}),a.jsxs("span",{className:`font-medium ${f()?"text-green-600":"text-red-600"}`,children:["",(parseFloat(i.cashAmount||"0")+parseFloat(i.onlineAmount||"0")).toFixed(2)," / ",u.toFixed(2)]})]}),!f()&&a.jsxs("p",{className:"text-xs text-red-600",children:[" Amounts must add up to ",u.toFixed(2)]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:l,children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:l,children:[l&&a.jsx(Io,{className:"w-4 h-4 animate-spin"}),l?"Saving...":n?"Update Overhead":"Add Overhead"]})]})]})]})})}function mW({selectedDate:e,onSubmit:t,onClose:r,editingItem:n}){const[s,i]=P.useState({category:n?n.category:"electricity",description:n?n.description:"",amount:n?n.amount.toString():"",units:n?.units?n.units.toString():"",unitPrice:n?.unitPrice?n.unitPrice.toString():"",paymentMethod:n?.paymentMethod||"cash",cashAmount:n?.cashAmount?n.cashAmount.toString():"",onlineAmount:n?.onlineAmount?n.onlineAmount.toString():""}),[o,l]=P.useState(!1),d=s.category==="lpg_gas"&&s.units&&s.unitPrice?parseFloat(s.units)*parseFloat(s.unitPrice):parseFloat(s.amount||"0");P.useEffect(()=>{if(s.paymentMethod==="both"&&d>0&&!s.cashAmount&&!s.onlineAmount){const m=(d/2).toFixed(2);i(p=>({...p,cashAmount:m,onlineAmount:m}))}},[s.paymentMethod,d]);const u=()=>{if(s.paymentMethod!=="both")return!0;const m=parseFloat(s.cashAmount||"0"),p=parseFloat(s.onlineAmount||"0");return Math.abs(m+p-d)<.01},f=m=>{if(m.preventDefault(),!u()){alert("Cash and Online amounts must add up to the total amount!");return}const p=s.category==="lpg_gas"?parseFloat(s.units)*parseFloat(s.unitPrice):parseFloat(s.amount),g={date:e,category:s.category,description:s.description,amount:p,paymentMethod:s.paymentMethod};s.category==="lpg_gas"&&(g.units=parseFloat(s.units),g.unitPrice=parseFloat(s.unitPrice)),s.paymentMethod==="both"?(g.cashAmount=parseFloat(s.cashAmount),g.onlineAmount=parseFloat(s.onlineAmount)):s.paymentMethod==="online"?(g.onlineAmount=p,g.cashAmount=0):s.paymentMethod==="cash"&&(g.cashAmount=p,g.onlineAmount=0),console.log(" Fixed cost payment data being sent:",{paymentMethod:g.paymentMethod,cashAmount:g.cashAmount,onlineAmount:g.onlineAmount}),l(!0),t(g).finally(()=>l(!1))};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-gray-900",children:[n?"Edit":"Add"," Fixed Cost"]}),a.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(ea,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),a.jsx("select",{value:s.category,onChange:m=>i({...s,category:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:Object.entries(E2).map(([m,p])=>a.jsx("option",{value:m,children:p},m))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:s.description,onChange:m=>i({...s,description:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:s.category==="lpg_gas"?"e.g., Commercial LPG cylinder purchase":"e.g., Monthly electricity bill, Store rent for December",required:!0})]}),s.category==="lpg_gas"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Number of Cylinders"}),a.jsx("input",{type:"number",step:"1",min:"1",value:s.units,onChange:m=>i({...s,units:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Price per Cylinder ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.unitPrice,onChange:m=>i({...s,unitPrice:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 1450.00",required:!0})]}),s.units&&s.unitPrice&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-blue-900",children:[a.jsx("strong",{children:"Total Amount:"})," ",d.toFixed(2)]})})]}):a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Amount ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.amount,onChange:m=>i({...s,amount:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:s.paymentMethod==="cash",onChange:m=>i({...s,paymentMethod:"cash"}),className:"w-4 h-4 text-green-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-gray-900",children:" Cash in Hand"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Will reduce Expected Cash in Hand"})]})]}),a.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:s.paymentMethod==="online",onChange:m=>i({...s,paymentMethod:"online"}),className:"w-4 h-4 text-green-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-gray-900",children:" Online Cash (Paytm)"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Will reduce Online Cash in Hand (Paytm)"})]})]}),a.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"both",checked:s.paymentMethod==="both",onChange:m=>i({...s,paymentMethod:"both"}),className:"w-4 h-4 text-green-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-gray-900",children:" Both (Split Payment)"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Paid using both Cash and Online"})]})]})]})]}),s.paymentMethod==="both"&&d>0&&a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 space-y-3",children:[a.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Split Payment Details"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash Amount ()"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:d,value:s.cashAmount,onChange:m=>{const p=parseFloat(m.target.value||"0");i({...s,cashAmount:m.target.value,onlineAmount:(d-p).toFixed(2)})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Online Amount ()"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:d,value:s.onlineAmount,onChange:m=>{const p=parseFloat(m.target.value||"0");i({...s,onlineAmount:m.target.value,cashAmount:(d-p).toFixed(2)})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-purple-300",children:[a.jsx("span",{className:"text-gray-700",children:"Total:"}),a.jsxs("span",{className:`font-medium ${u()?"text-green-600":"text-red-600"}`,children:["",(parseFloat(s.cashAmount||"0")+parseFloat(s.onlineAmount||"0")).toFixed(2)," / ",d.toFixed(2)]})]}),!u()&&a.jsxs("p",{className:"text-xs text-red-600",children:[" Amounts must add up to ",d.toFixed(2)]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:o,children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:o,children:[o&&a.jsx(Io,{className:"w-4 h-4 animate-spin"}),o?"Saving...":n?"Update Fixed Cost":"Add Fixed Cost"]})]})]})]})})}function pW({inventory:e,overheads:t,fixedCosts:r,onEditInventory:n,onDeleteInventory:s,onEditOverhead:i,onDeleteOverhead:o,onEditFixedCost:l,onDeleteFixedCost:d,isManager:u=!0}){const[f,m]=P.useState(null),[p,g]=P.useState(!1),b=k=>{const S=Math.round(k*100)/100;return S%1===0?S.toString():S.toFixed(2)},y=e.reduce((k,S)=>(k[S.category]||(k[S.category]=[]),k[S.category].push(S),k),{}),v=(k,S)=>{g(!0),k==="inventory"?s(S):k==="overhead"?o(S):d(S),m(null),g(!1)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Zt,{className:"w-5 h-5 text-blue-600"}),a.jsx("h3",{className:"text-gray-900",children:"Inventory Items"})]}),e.length===0?a.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No inventory items for this date"}):a.jsx("div",{className:"space-y-6",children:Object.entries(y).map(([k,S])=>a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-3",children:wg[k]}),a.jsx("div",{className:"space-y-2",children:S.map(w=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors group",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"flex-1",children:a.jsx("p",{className:"text-gray-900",children:w.itemName})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-blue-600",children:["",w.totalCost.toLocaleString()]}),u&&a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>n(w),className:"p-1.5 hover:bg-blue-50 rounded text-blue-600 transition-colors",title:"Edit",children:a.jsx(Vi,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>m({type:"inventory",id:w.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:a.jsx(ws,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[a.jsxs("span",{children:[b(w.quantity||0)," ",w.unit]}),a.jsxs("span",{children:["",b(w.costPerUnit||0),"/",w.unit]}),w.paymentMethod&&a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${w.paymentMethod==="cash"?"bg-green-100 text-green-800":w.paymentMethod==="online"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:w.paymentMethod==="cash"?" Cash":w.paymentMethod==="online"?" Online":` Split (${b(w.cashAmount||0)} + ${b(w.onlineAmount||0)})`})]})]},w.id))})]},k))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(FB,{className:"w-5 h-5 text-orange-600"}),a.jsx("h3",{className:"text-gray-900",children:"Overhead Costs"})]}),t.length===0?a.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No overhead costs for this date"}):a.jsx("div",{className:"space-y-3",children:t.map(k=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-orange-300 transition-colors group",children:a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-gray-900",children:_2[k.category]}),k.category==="personal_expense"&&k.employeeId&&k.employeeName&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Employee: ",k.employeeName," (ID: ",k.employeeId,")"]}),k.category==="personal_expense"&&k.expenseMonth&&a.jsxs("p",{className:"text-sm text-purple-600 mt-1 font-medium",children:[" Mapped to: ",new Date(k.expenseMonth+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})]}),a.jsx("p",{className:"text-sm text-gray-500",children:k.description}),k.paymentMethod&&a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[k.paymentMethod==="cash"&&a.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:" Paid via Cash"}),k.paymentMethod==="online"&&a.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:" Paid via Paytm"}),k.paymentMethod==="both"&&a.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:[" Cash: ",k.cashAmount?.toLocaleString()]}),a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:[" Paytm: ",k.onlineAmount?.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-orange-600",children:["",k.amount.toLocaleString()]}),u&&a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>i(k),className:"p-1.5 hover:bg-orange-50 rounded text-orange-600 transition-colors",title:"Edit",children:a.jsx(Vi,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>m({type:"overhead",id:k.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:a.jsx(ws,{className:"w-4 h-4"})})]})]})]})},k.id))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(ii,{className:"w-5 h-5 text-green-600"}),a.jsx("h3",{className:"text-gray-900",children:"Fixed Costs"})]}),r.length===0?a.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No fixed costs for this date"}):a.jsx("div",{className:"space-y-3",children:r.map(k=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-green-300 transition-colors group",children:a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-gray-900",children:E2[k.category]}),a.jsx("p",{className:"text-sm text-gray-500",children:k.description}),k.category==="lpg_gas"&&k.units&&k.unitPrice&&a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[k.units," cylinder",k.units>1?"s":"","  ",k.unitPrice.toLocaleString()]}),k.paymentMethod&&a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[k.paymentMethod==="cash"&&a.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:" Paid via Cash"}),k.paymentMethod==="online"&&a.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:" Paid via Paytm"}),k.paymentMethod==="both"&&a.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:[" Cash: ",k.cashAmount?.toLocaleString()]}),a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:[" Paytm: ",k.onlineAmount?.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-green-600",children:["",k.amount.toLocaleString()]}),u&&a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>l(k),className:"p-1.5 hover:bg-green-50 rounded text-green-600 transition-colors",title:"Edit",children:a.jsx(Vi,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>m({type:"fixedcost",id:k.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:a.jsx(ws,{className:"w-4 h-4"})})]})]})]})},k.id))})]})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-gray-900 mb-4",children:"Confirm Delete"}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete this ",f.type==="inventory"?"inventory item":f.type==="overhead"?"overhead cost":"fixed cost","? This action cannot be undone."]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>m(null),disabled:p,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsxs("button",{onClick:()=>v(f.type,f.id),disabled:p,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[p&&a.jsx(Io,{className:"w-4 h-4 animate-spin"}),p?"Deleting...":"Delete"]})]})]})})]})}const gW=5,xW=30,J5=(gW*60+xW)*60*1e3;function yW(){const e=new Date;return new Date(e.getTime()+J5).toISOString()}function Na(){return yW().substring(0,10)}function q2(e,t=!0){if(!e)return"Invalid Date";try{const r=t?new Date(new Date(e).getTime()+J5):new Date(e);if(isNaN(r.getTime()))return"Invalid Date";const n=r.getUTCDate(),s=r.toLocaleString("en-US",{month:"short",timeZone:"UTC"}),i=r.getUTCFullYear();let o=r.getUTCHours();const l=r.getUTCMinutes(),d=o>=12?"PM":"AM";o=o%12||12;const u=l.toString().padStart(2,"0");return`${n} ${s} ${i}, ${o}:${u} ${d} IST`}catch{return"Invalid Date"}}function Kn(e){if(!e)return"Invalid Date";const t=e.substring(0,10),[r,n,s]=t.split("-").map(Number);if(!r||!n||!s||isNaN(r)||isNaN(n)||isNaN(s))return"Invalid Date";const o=new Date(Date.UTC(r,n-1,s)).toLocaleString("en-US",{month:"short",timeZone:"UTC"});return`${s} ${o} ${r}`}const Rg=P.memo(function({selectedDate:t,onDateChange:r}){const[n,s]=P.useState(0),[i,o]=P.useState(!1);P.useEffect(()=>{const m=()=>{o(window.innerWidth<768)};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);const l=P.useMemo(()=>{const m=Na(),p=new Date(m);p.setDate(p.getDate()+n*7);const g=[];for(let b=-3;b<=3;b++){const y=new Date(p);y.setDate(y.getDate()+b),g.push(y.toISOString().split("T")[0])}return g},[n]);P.useEffect(()=>{if(!l.includes(t)){const m=new Date(t),p=new Date(Na()),g=Math.floor((m.getTime()-p.getTime())/(1e3*60*60*24)),b=Math.floor(g/7);s(b)}},[t,l]);const d=()=>{s(0),r(Na())},u=()=>{const m=n-1;s(m);const p=Na(),g=new Date(p);g.setDate(g.getDate()+m*7);const b=g.toISOString().split("T")[0];r(b)},f=()=>{const m=n+1;s(m);const p=Na(),g=new Date(p);g.setDate(g.getDate()+m*7);const b=g.toISOString().split("T")[0];r(b)};return i?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-gray-900",children:"Select Date"}),n!==0&&a.jsx("button",{type:"button",onClick:d,className:"px-3 py-1.5 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-xs",children:"Jump to Today"})]}),a.jsx("div",{className:"mb-4",children:a.jsx("input",{type:"date",value:t,onChange:m=>r(m.target.value),className:"w-full px-4 py-3 text-base bg-gray-50 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all"})}),a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsxs("button",{type:"button",onClick:u,className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-1 text-sm",children:[a.jsx(Sj,{className:"w-4 h-4"}),a.jsx("span",{children:"Prev Week"})]}),a.jsxs("button",{type:"button",onClick:f,className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-1 text-sm",children:[a.jsx("span",{children:"Next Week"}),a.jsx(kl,{className:"w-4 h-4"})]})]}),a.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:a.jsx("div",{className:"flex gap-2 pb-2 min-w-max",children:l.map(m=>{const p=new Date(m),g=m===Na(),b=m===t;return a.jsxs("button",{type:"button",onClick:()=>r(m),className:`flex-shrink-0 p-2 rounded-lg text-center transition-all min-w-[60px] ${b?"bg-orange-600 text-white shadow-lg":g?"bg-orange-100 text-orange-800 border-2 border-orange-300":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[a.jsx("div",{className:"text-xs uppercase",children:p.toLocaleDateString("en-US",{weekday:"short"})}),a.jsx("div",{className:"text-base font-medium",children:p.getDate()}),a.jsx("div",{className:"text-xs",children:p.toLocaleDateString("en-US",{month:"short"})})]},m)})})})]}):a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-gray-900",children:"Select Date"}),n!==0&&a.jsx("button",{type:"button",onClick:d,className:"px-4 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-sm",children:"Jump to Today"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",title:"Previous Week",children:[a.jsx(Sj,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm",children:"Prev"})]}),a.jsx("div",{className:"grid grid-cols-7 gap-2 flex-1",children:l.map(m=>{const p=new Date(m),g=m===Na(),b=m===t;return a.jsxs("button",{type:"button",onClick:()=>r(m),className:`p-3 rounded-lg text-center transition-all ${b?"bg-orange-600 text-white shadow-lg transform scale-105":g?"bg-orange-100 text-orange-800 border-2 border-orange-300":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[a.jsx("div",{className:"text-xs uppercase",children:p.toLocaleDateString("en-US",{weekday:"short"})}),a.jsx("div",{className:"text-lg font-medium",children:p.getDate()}),a.jsx("div",{className:"text-xs",children:p.toLocaleDateString("en-US",{month:"short"})})]},m)})}),a.jsxs("button",{type:"button",onClick:f,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",title:"Next Week",children:[a.jsx("span",{className:"text-sm",children:"Next"}),a.jsx(kl,{className:"w-5 h-5"})]})]})]})});V6();function vW(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Array(12).fill(0);let Uj=1;class bW{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...s}=t,i=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:Uj++,o=this.toasts.find(d=>d.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...t,id:i,title:n}),{...d,...t,id:i,dismissible:l,title:n}):d):this.addToast({title:n,...s,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const l=s.then(async u=>{if(o=["resolve",u],ke.isValidElement(u))i=!1,this.create({id:n,type:"default",message:u});else if(jW(u)&&!u.ok){i=!1;const m=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,p=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description,b=typeof m=="object"&&!ke.isValidElement(m)?m:{message:m};this.create({id:n,type:"error",description:p,...b})}else if(u instanceof Error){i=!1;const m=typeof r.error=="function"?await r.error(u):r.error,p=typeof r.description=="function"?await r.description(u):r.description,b=typeof m=="object"&&!ke.isValidElement(m)?m:{message:m};this.create({id:n,type:"error",description:p,...b})}else if(r.success!==void 0){i=!1;const m=typeof r.success=="function"?await r.success(u):r.success,p=typeof r.description=="function"?await r.description(u):r.description,b=typeof m=="object"&&!ke.isValidElement(m)?m:{message:m};this.create({id:n,type:"success",description:p,...b})}}).catch(async u=>{if(o=["reject",u],r.error!==void 0){i=!1;const f=typeof r.error=="function"?await r.error(u):r.error,m=typeof r.description=="function"?await r.description(u):r.description,g=typeof f=="object"&&!ke.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:m,...g})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),d=()=>new Promise((u,f)=>l.then(()=>o[0]==="reject"?f(o[1]):u(o[1])).catch(f));return typeof n!="string"&&typeof n!="number"?{unwrap:d}:Object.assign(n,{unwrap:d})},this.custom=(t,r)=>{const n=r?.id||Uj++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ni=new bW,wW=(e,t)=>{const r=t?.id||Uj++;return ni.addToast({title:e,...t,id:r}),r},jW=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",NW=wW,kW=()=>ni.toasts,SW=()=>ni.getActiveToasts(),Qt=Object.assign(NW,{success:ni.success,info:ni.info,warning:ni.warning,error:ni.error,custom:ni.custom,message:ni.message,promise:ni.promise,dismiss:ni.dismiss,loading:ni.loading},{getHistory:kW,getToasts:SW});vW("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function _W({context:e,selectedStoreId:t,employees:r}){const[n,s]=P.useState(Na()),[i,o]=P.useState(!1),[l,d]=P.useState(!1),[u,f]=P.useState(!1),[m,p]=P.useState(null),[g,b]=P.useState(null),[y,v]=P.useState(null),k=t||e.user?.storeId;console.log(" InventoryManagement - effectiveStoreId:",k),console.log(" InventoryManagement - selectedStoreId prop:",t),console.log(" InventoryManagement - user storeId:",e.user?.storeId);const S=e.inventory.filter(_=>{const O=_.date===n,B=k?_.storeId===k:!0;return O&&B}),w=e.overheads.filter(_=>{const O=_.date===n,B=k?_.storeId===k:!0;return O&&B}),A=e.fixedCosts.filter(_=>{const O=_.date===n,B=k?_.storeId===k:!0;return O&&B}),C=S.reduce((_,O)=>_+O.totalCost,0),N=w.reduce((_,O)=>_+O.amount,0),E=A.reduce((_,O)=>_+O.amount,0);return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx(Rg,{selectedDate:n,onDateChange:s}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 shadow-lg shadow-blue-500/30",children:[a.jsx("p",{className:"text-sm text-blue-100 uppercase tracking-wide",children:"Inventory Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",C.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 shadow-lg shadow-orange-500/30",children:[a.jsx("p",{className:"text-sm text-orange-100 uppercase tracking-wide",children:"Overhead Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",N.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 shadow-lg shadow-green-500/30",children:[a.jsx("p",{className:"text-sm text-green-100 uppercase tracking-wide",children:"Fixed Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",E.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 shadow-lg shadow-purple-500/30",children:[a.jsx("p",{className:"text-sm text-purple-100 uppercase tracking-wide",children:"Total Expenses"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",(C+N+E).toLocaleString()]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-6",children:[a.jsxs("button",{onClick:()=>o(!0),disabled:!e.isManager,className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",title:e.isManager?"":"Only managers can add inventory items",children:[a.jsx(Xi,{className:"w-4 h-4"}),"Add Inventory Item"]}),a.jsxs("button",{onClick:()=>d(!0),disabled:!e.isManager,className:"flex items-center justify-center gap-2 px-4 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",title:e.isManager?"":"Only managers can add overhead costs",children:[a.jsx(Xi,{className:"w-4 h-4"}),"Add Overhead"]}),a.jsxs("button",{onClick:()=>f(!0),disabled:!e.isManager,className:"flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",title:e.isManager?"":"Only managers can add fixed costs",children:[a.jsx(Xi,{className:"w-4 h-4"}),"Add Fixed Cost"]})]}),a.jsx(pW,{inventory:S,overheads:w,fixedCosts:A,onEditInventory:_=>{p(_),o(!0)},onDeleteInventory:e.deleteInventoryItem,onEditOverhead:_=>{b(_),d(!0)},onDeleteOverhead:e.deleteOverheadItem,onEditFixedCost:_=>{v(_),f(!0)},onDeleteFixedCost:e.deleteFixedCostItem,isManager:e.isManager}),i&&a.jsx(uW,{selectedDate:n,editingItem:m,onSubmit:async _=>{try{m?(await e.updateInventoryItem(m.id,_),o(!1),p(null),Qt.success("Inventory item updated successfully!")):(await e.addInventoryItem(_),Qt.success("Inventory item added! You can add another item."))}catch{Qt.error("Failed to save inventory item. Please try again.")}},onClose:()=>{o(!1),p(null)}}),l&&a.jsx(fW,{selectedDate:n,editingItem:g,employees:r,onSubmit:async _=>{try{g?await e.updateOverheadItem(g.id,_):await e.addOverheadItem(_),d(!1),b(null),Qt.success("Overhead cost saved successfully!")}catch{alert("Failed to save overhead cost. Please try again.")}},onClose:()=>{d(!1),b(null)}}),u&&a.jsx(mW,{selectedDate:n,editingItem:y,onSubmit:async _=>{try{y?await e.updateFixedCostItem(y.id,_):await e.addFixedCostItem(_),f(!1),v(null),Qt.success("Fixed cost saved successfully!")}catch{alert("Failed to save fixed cost. Please try again.")}},onClose:()=>{f(!1),v(null)}})]})}function W2({context:e,selectedStoreId:t,onClose:r,onSaveSuccess:n,isProductionHouse:s,isStoreFinishedProducts:i=!1,currentCalculatedStock:o}){const[l,d]=P.useState([]),[u,f]=P.useState(!0),[m,p]=P.useState(!1),[g,b]=P.useState(null),[y,v]=P.useState(null),[k,S]=P.useState(!1),w=t||e.user?.storeId,A=e.stores?.find(L=>L.id===w),C=t||e.user?.storeId,N=s?e.productionHouses?.find(L=>L.id===C):e.stores?.find(L=>L.id===C),E=N?.name,_=new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"});new Date().getDate(),P.useEffect(()=>{O(),H()},[]);async function O(){try{if(f(!0),s||i)await B();else{const I=(await _g(e.user?.accessToken||"")).filter(Z=>w?Z.storeId===w:!1),G=new Map;I.forEach(Z=>{G.has(Z.id)||G.set(Z.id,Z)});const V=Array.from(G.values()).map(Z=>({itemId:Z.id,itemName:Z.itemName,category:Z.category,unit:Z.unit,systemQuantity:Z.quantity,actualQuantity:Z.quantity,difference:0,adjustmentType:null,notes:""}));d(V)}}catch(L){console.error("Error loading inventory:",L),v("Failed to load inventory data")}finally{f(!1)}}async function B(){let L=[];try{L=await Cg(e.user?.accessToken||""),console.log(" Fetched raw production data for recalibration:",{totalRecords:L.length,sampleRecord:L[0]})}catch(ze){console.error(" Failed to fetch production data for recalibration:",ze),L=e.productionData||[]}const I=new Date().toISOString().substring(0,7);let G=w,V=w,Z=w;if(w&&!w.startsWith("STORE-")){const ze=e.productionHouses?.find(Re=>Re.uuid===w);ze&&(console.log(" Resolved UUID to production house:",{uuid:w,storeId:ze.id,name:ze.name}),G=ze.id,V=w,Z=ze.id)}let ve=G;if(i)Z=G;else if(G&&G.startsWith("STORE-")){const ze=e.productionHouses?.find(Re=>Re.id===G);if(ze)V=ze.uuid,ve=G,Z=G;else{const Re=e.stores?.find(Ce=>Ce.id===G);Re?.productionHouseId&&(V=Re.productionHouseId,Z=V)}}else Z=G;let Ee,Te;if(i)Ee=(e.productionRequests||[]).filter(Ce=>{if(Ce.status!=="delivered"||Ce.storeId!==w)return!1;const Se=Ce.deliveredDate||Ce.requestDate||Ce.createdAt;return Se&&Se.startsWith(I)}).reduce((Ce,Se)=>({chicken:Ce.chicken+(Se.chicken||0),chickenCheese:Ce.chickenCheese+(Se.chickenCheese||0),veg:Ce.veg+(Se.veg||0),cheeseCorn:Ce.cheeseCorn+(Se.cheeseCorn||0),paneer:Ce.paneer+(Se.paneer||0),vegKurkure:Ce.vegKurkure+(Se.vegKurkure||0),chickenKurkure:Ce.chickenKurkure+(Se.chickenKurkure||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),Te=(e.categorySalesData||[]).filter(Ce=>Ce.storeId!==w?!1:Ce.date&&Ce.date.startsWith(I)).reduce((Ce,Se)=>({chicken:Ce.chicken+(Se.data["Chicken Momos"]||0),chickenCheese:Ce.chickenCheese+(Se.data["Chicken Cheese Momos"]||0),veg:Ce.veg+(Se.data["Veg Momos"]||0),cheeseCorn:Ce.cheeseCorn+(Se.data["Corn Cheese Momos"]||0),paneer:Ce.paneer+(Se.data["Paneer Momos"]||0),vegKurkure:Ce.vegKurkure+(Se.data["Veg Kurkure Momos"]||0),chickenKurkure:Ce.chickenKurkure+(Se.data["Chicken Kurkure Momos"]||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});else{console.log(" Production filtering for recalibration:",{currentMonth:I,productionHouseUUID:V,effectiveStoreId:w,totalProductionRecords:L.length,sampleProductionRecord:L[0],firstProductionDates:L.slice(0,3).map(Qe=>({date:Qe.date,type:typeof Qe.date}))});const ze=L.filter(Qe=>{const kt=Qe.date||"",Ct=kt.startsWith(I)||kt.substring(0,7)===I,yr=Qe.storeId===V||Qe.storeId===w||Qe.storeId===ve,Kt=Qe.productionHouseId===V||Qe.productionHouseId===w||Qe.productionHouseId===ve,Rr=Ct&&(yr||Kt);return console.log(" Checking production record:",{date:Qe.date,dateSubstring:kt.substring(0,7),currentMonth:I,dateMatch:Ct,pStoreId:Qe.storeId,pProductionHouseId:Qe.productionHouseId,productionHouseUUID:V,effectiveStoreId:w,originalStoreId:ve,matchesStoreId:yr,matchesProductionHouseId:Kt,finalMatch:Rr}),Rr});console.log(" Filtered production count:",ze.length),console.log(" Sample filtered production:",ze[0]);const Re=ze.reduce((Qe,kt)=>({chicken:Qe.chicken+(kt.chickenMomos?.final||0),chickenCheese:Qe.chickenCheese+(kt.chickenCheeseMomos?.final||0),veg:Qe.veg+(kt.vegMomos?.final||0),cheeseCorn:Qe.cheeseCorn+(kt.cheeseCornMomos?.final||0),paneer:Qe.paneer+(kt.paneerMomos?.final||0),vegKurkure:Qe.vegKurkure+(kt.vegKurkureMomos?.final||0),chickenKurkure:Qe.chickenKurkure+(kt.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});Ee={chicken:Re.chicken-Re.chickenKurkure,chickenCheese:Re.chickenCheese,veg:Re.veg-Re.vegKurkure,cheeseCorn:Re.cheeseCorn,paneer:Re.paneer,vegKurkure:Re.vegKurkure,chickenKurkure:Re.chickenKurkure},console.log(" Raw production (before parent-child adjustment):",Re),console.log(" Total produced (after parent-child adjustment):",Ee),console.log(`    Chicken Momo: ${Re.chicken} produced - ${Re.chickenKurkure} used for kurkure = ${Ee.chicken} net`),console.log(`    Veg Momo: ${Re.veg} produced - ${Re.vegKurkure} used for kurkure = ${Ee.veg} net`),console.log(` Filtering requests - productionHouseUUID: ${V}, effectiveStoreId: ${w}, currentMonth: ${I}`),console.log(` Total production requests in context: ${(e.productionRequests||[]).length}`);let Ce=!1;Te=(e.productionRequests||[]).filter(Qe=>{if(Qe.status!=="delivered")return!1;const kt=Qe.deliveredDate||Qe.requestDate||Qe.createdAt;if(!kt||!kt.startsWith(I))return!1;const Ct=e.stores?.find(Kt=>Kt.id===Qe.storeId),yr=Ct?.productionHouseId===V||Ct?.productionHouseId===w;return Qe.status==="delivered"&&kt?.startsWith(I)&&(console.log(` Request ${Qe.requestId}: storeId=${Qe.storeId}, store.productionHouseId=${Ct?.productionHouseId}, comparing to UUID=${V} or storeId=${w}, matches=${yr}`),yr&&!Ce&&(console.log(" First matching request structure:",{requestId:Qe.requestId,chickenMomos:Qe.chickenMomos,cheeseCornMomos:Qe.cheeseCornMomos,allKeys:Object.keys(Qe)}),Ce=!0)),yr}).reduce((Qe,kt)=>({chicken:Qe.chicken+(kt.chicken||0),chickenCheese:Qe.chickenCheese+(kt.chickenCheese||0),veg:Qe.veg+(kt.veg||0),cheeseCorn:Qe.cheeseCorn+(kt.cheeseCorn||0),paneer:Qe.paneer+(kt.paneer||0),vegKurkure:Qe.vegKurkure+(kt.vegKurkure||0),chickenKurkure:Qe.chickenKurkure+(kt.chickenKurkure||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}const ue=await F(Z,I,i);let ge=null,Fe=null;try{const ze=i?"store":"production_house",Re=await vl(e.user?.accessToken||"",Z,ze);if(Re?.record){const Ce=Re.record.date,Se=Ce.substring(0,7),Qe=parseInt(Ce.substring(8,10));if(console.log(" Latest recalibration check:",{recalDate:Ce,recalMonth:Se,currentMonth:I,recalDay:Qe,isSameMonth:Se===I,isMidMonth:Qe>1}),Se===I&&Qe>1){console.log(" Found mid-month recalibration - using as baseline!"),Fe=Ce,ge={};const kt=Re.record.items||[];for(const Ct of kt){const yr=e.inventoryItems?.find(Kt=>Kt.name===Ct.itemId||Kt.id===Ct.itemId);if(yr){const Rr=yr.name.replace(/_([a-z])/g,Pr=>Pr[1].toUpperCase()).replace(/Momo(s)?$/i,"");ge[Rr]=Ct.actualQuantity,console.log(`   Recal stock: ${Ct.itemId} -> ${Rr} = ${Ct.actualQuantity}`)}}console.log(" Mid-month recalibration stock:",ge)}}}catch(ze){console.error("Error fetching latest recalibration for mid-month check:",ze)}if(ge&&Fe&&!i){console.log(" Recalculating with mid-month recalibration baseline...");const ze=Fe.substring(0,10),Ce=L.filter(Qe=>(Qe.date||"")>ze&&(Qe.storeId===V||Qe.storeId===w||Qe.storeId===ve||Qe.productionHouseId===V||Qe.productionHouseId===w||Qe.productionHouseId===ve)).reduce((Qe,kt)=>({chicken:Qe.chicken+(kt.chickenMomos?.final||0),chickenCheese:Qe.chickenCheese+(kt.chickenCheeseMomos?.final||0),veg:Qe.veg+(kt.vegMomos?.final||0),cheeseCorn:Qe.cheeseCorn+(kt.cheeseCornMomos?.final||0),paneer:Qe.paneer+(kt.paneerMomos?.final||0),vegKurkure:Qe.vegKurkure+(kt.vegKurkureMomos?.final||0),chickenKurkure:Qe.chickenKurkure+(kt.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});Ee={chicken:Ce.chicken-Ce.chickenKurkure,chickenCheese:Ce.chickenCheese,veg:Ce.veg-Ce.vegKurkure,cheeseCorn:Ce.cheeseCorn,paneer:Ce.paneer,vegKurkure:Ce.vegKurkure,chickenKurkure:Ce.chickenKurkure},Te=(e.productionRequests||[]).filter(Qe=>{if(Qe.status!=="delivered")return!1;const kt=Qe.deliveredDate||Qe.requestDate||Qe.createdAt;if(!kt||kt<Fe)return!1;const Ct=e.stores?.find(yr=>yr.id===Qe.storeId);return Ct?.productionHouseId===V||Ct?.productionHouseId===w}).reduce((Qe,kt)=>({chicken:Qe.chicken+(kt.chicken||0),chickenCheese:Qe.chickenCheese+(kt.chickenCheese||0),veg:Qe.veg+(kt.veg||0),cheeseCorn:Qe.cheeseCorn+(kt.cheeseCorn||0),paneer:Qe.paneer+(kt.paneer||0),vegKurkure:Qe.vegKurkure+(kt.vegKurkure||0),chickenKurkure:Qe.chickenKurkure+(kt.chickenKurkure||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),console.log("  Production AFTER recalibration:",Ee),console.log("  Deliveries AFTER recalibration:",Te)}console.log(" Recalibration - Location ID:",Z),console.log(" Recalibration - Is Store Finished Products:",i),console.log(" Recalibration - Opening Balance:",ue),console.log(" Recalibration - Mid-Month Recal Stock:",ge),console.log(" Recalibration - Total Received/Produced:",Ee),console.log(" Recalibration - Total Sent/Sold:",Te);const J=e.inventoryItems?.filter(ze=>ze.category==="finished_product"&&ze.isActive&&(ze.linkedEntityType==="global"||ze.linkedEntityType==="production_house"&&ze.linkedEntityId===Z||ze.linkedEntityType==="store"&&ze.linkedEntityId===w))||[];console.log(" Recalibration - Finished Products from Context:",J.length);const Ze=ze=>ze.replace(/_([a-z])/g,Re=>Re[1].toUpperCase()),rt=ze=>{const Re=ze.replace(/_momo(s)?$/i,"");return Ze(Re)},Tt=J.map(ze=>{const Re=rt(ze.name);let Ce;if(o&&o[Re]!==void 0)Ce=o[Re],console.log(` ${ze.displayName} (${ze.name} -> ${Re}): Using pre-calculated stock from Analytics = ${Ce}`);else{const Se=ue[Re]||0,Qe=Ee[Re]||0,kt=Te[Re]||0;Ce=Se+Qe-kt,console.log(` ${ze.displayName} (${ze.name} -> ${Re}): Opening=${Se}, Produced=${Qe}, Sent=${kt}, Stock=${Ce}`)}return{itemId:ze.name,itemName:ze.displayName,category:ze.category,unit:ze.unit,systemQuantity:Ce,actualQuantity:Ce,difference:0,adjustmentType:null,notes:""}});d(Tt)}async function F(L,I,G){if(!L)return{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};try{const V=G?"store":"production_house",[Z,ve]=I.split("-").map(Number);let Ee=Z,Te=ve-1;Te===0&&(Te=12,Ee=Z-1);const ue=`${Ee}-${String(Te).padStart(2,"0")}`;console.log(" fetchOpeningBalance - Location ID:",L),console.log(" fetchOpeningBalance - Location Type:",V),console.log(" fetchOpeningBalance - Current Month:",I),console.log(" fetchOpeningBalance - Looking for recalibration from:",ue);let ge=await vl(e.user?.accessToken||"",L,V);if(!ge?.record&&!G){console.log("   No recalibration found with UUID, checking with mapped store ID...");const Fe=e.stores?.filter(J=>J.productionHouseId===L)||[];console.log("   Stores mapped to this production house:",Fe.map(J=>J.id));for(const J of Fe)if(console.log(`   Trying to fetch recalibration with store ID: ${J.id}`),ge=await vl(e.user?.accessToken||"",J.id,V),ge?.record){console.log(`    Found recalibration using store ID: ${J.id}`);break}}if(ge?.record){const Fe=ge.record.date.substring(0,7);console.log(" Recalibration Response:",ge.record);const J=ge.record.isOpeningBalance;if(console.log(" Recalibration date comparison:",{recalDate:Fe,currentMonth:I,previousMonthStr:ue,isOpeningBalance:J,isCurrentMonth:Fe===I,isPreviousMonth:Fe===ue,isOlder:Fe<ue}),Fe===I&&(J===!0||J===void 0)||Fe===ue||Fe<ue){const rt=Re=>Re.replace(/_([a-z])/g,Ce=>Ce[1].toUpperCase()),Tt=Re=>{const Ce=Re.replace(/_momo(s)?$/i,"");return rt(Ce)},ze={};return Fe===I&&J?(console.log(" Using current month opening balance recalibration (done on 1st)"),console.log("   Recalibration items:",ge.record.items)):Fe===ue?console.log(" Using previous month recalibration as opening balance"):console.log(" Using older recalibration as opening balance from:",Fe),ge.record.items.forEach(Re=>{const Ce=Tt(Re.itemId);ze[Ce]=Re.actualQuantity,console.log(`   Opening balance mapping: ${Re.itemId} -> ${Ce} = ${Re.actualQuantity}`)}),console.log("   Parsed opening balance:",ze),console.log(" Opening Balance Calculated:",ze),ze}}return console.log(" fetchOpeningBalance - No suitable recalibration found, calculating from transactions"),await D(L,I,G)}catch(V){return console.error("Error fetching opening balance:",V),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}}}async function D(L,I,G){const[V,Z]=I.split("-").map(Number);let ve=V,Ee=Z-1;Ee===0&&(Ee=12,ve=V-1);const Te=`${ve}-${String(Ee).padStart(2,"0")}`;if(console.log(" calculatePreviousMonthStock - Previous Month:",Te),console.log(" calculatePreviousMonthStock - Is Store:",G),G){const ue=(e.productionRequests||[]).filter(J=>{if(J.status!=="delivered"||J.storeId!==L)return!1;const Ze=J.deliveredDate||J.requestDate||J.createdAt;return Ze&&Ze.startsWith(Te)}).reduce((J,Ze)=>({chicken:J.chicken+(Ze.chickenMomos||0),chickenCheese:J.chickenCheese+(Ze.chickenCheeseMomos||0),veg:J.veg+(Ze.vegMomos||0),cheeseCorn:J.cheeseCorn+(Ze.cheeseCornMomos||0),paneer:J.paneer+(Ze.paneerMomos||0),vegKurkure:J.vegKurkure+(Ze.vegKurkureMomos||0),chickenKurkure:J.chickenKurkure+(Ze.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});console.log(" calculatePreviousMonthStock - Previous Received:",ue),console.log(" calculatePreviousMonthStock - Context categorySalesData length:",(e.categorySalesData||[]).length);const ge=(e.categorySalesData||[]).filter(J=>J.storeId!==L?!1:J.date&&J.date.startsWith(Te)).reduce((J,Ze)=>({chicken:J.chicken+(Ze.data["Chicken Momos"]||0),chickenCheese:J.chickenCheese+(Ze.data["Chicken Cheese Momos"]||0),veg:J.veg+(Ze.data["Veg Momos"]||0),cheeseCorn:J.cheeseCorn+(Ze.data["Corn Cheese Momos"]||0),paneer:J.paneer+(Ze.data["Paneer Momos"]||0),vegKurkure:J.vegKurkure+(Ze.data["Veg Kurkure Momos"]||0),chickenKurkure:J.chickenKurkure+(Ze.data["Chicken Kurkure Momos"]||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});console.log(" calculatePreviousMonthStock - Previous Sold:",ge);const Fe={chicken:ue.chicken-ge.chicken,chickenCheese:ue.chickenCheese-ge.chickenCheese,veg:ue.veg-ge.veg,cheeseCorn:ue.cheeseCorn-ge.cheeseCorn,paneer:ue.paneer-ge.paneer,vegKurkure:ue.vegKurkure-ge.vegKurkure,chickenKurkure:ue.chickenKurkure-ge.chickenKurkure};return console.log(" calculatePreviousMonthStock - Calculated Closing Stock:",Fe),Fe}else{const ge=(e.productionData||[]).filter(Ze=>Ze.date.startsWith(Te)?Ze.storeId===L||Ze.productionHouseId===L:!1).reduce((Ze,rt)=>({chicken:Ze.chicken+(rt.chickenMomos?.final||0),chickenCheese:Ze.chickenCheese+(rt.chickenCheeseMomos?.final||0),veg:Ze.veg+(rt.vegMomos?.final||0),cheeseCorn:Ze.cheeseCorn+(rt.cheeseCornMomos?.final||0),paneer:Ze.paneer+(rt.paneerMomos?.final||0),vegKurkure:Ze.vegKurkure+(rt.vegKurkureMomos?.final||0),chickenKurkure:Ze.chickenKurkure+(rt.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),Fe=(e.productionRequests||[]).filter(Ze=>{if(Ze.status!=="delivered")return!1;const rt=Ze.deliveredDate||Ze.requestDate||Ze.createdAt;if(!rt||!rt.startsWith(Te))return!1;const Tt=e.stores?.find(ze=>ze.id===Ze.storeId);return Tt?.productionHouseId===L||Tt?.productionHouseId===w}).reduce((Ze,rt)=>({chicken:Ze.chicken+(rt.chickenMomos||0),chickenCheese:Ze.chickenCheese+(rt.chickenCheeseMomos||0),veg:Ze.veg+(rt.veg||0),cheeseCorn:Ze.cheeseCorn+(rt.cheeseCorn||0),paneer:Ze.paneer+(rt.paneerMomos||0),vegKurkure:Ze.vegKurkure+(rt.vegKurkureMomos||0),chickenKurkure:Ze.chickenKurkure+(rt.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),J={chicken:ge.chicken-ge.chickenKurkure,chickenCheese:ge.chickenCheese,veg:ge.veg-ge.vegKurkure,cheeseCorn:ge.cheeseCorn,paneer:ge.paneer,vegKurkure:ge.vegKurkure,chickenKurkure:ge.chickenKurkure};return{chicken:J.chicken-Fe.chicken,chickenCheese:J.chickenCheese-Fe.chickenCheese,veg:J.veg-Fe.veg,cheeseCorn:J.cheeseCorn-Fe.cheeseCorn,paneer:J.paneer-Fe.paneer,vegKurkure:J.vegKurkure-Fe.vegKurkure,chickenKurkure:J.chickenKurkure-Fe.chickenKurkure}}}async function H(){try{const L=w;if(!L)return;const I=s?"production_house":"store",G=await vl(e.user?.accessToken||"",L,I);G.lastRecalibration&&b(G.lastRecalibration)}catch(L){console.error("Error checking last recalibration:",L)}}function ne(L,I){const G=parseFloat(I)||0;d(l.map(V=>{if(V.itemId===L){const Z=G-V.systemQuantity;return{...V,actualQuantity:G,difference:Z,adjustmentType:Z===0?null:V.adjustmentType}}return V}))}function W(L,I){d(l.map(G=>G.itemId===L?{...G,adjustmentType:I}:G))}function ee(L,I){d(l.map(G=>G.itemId===L?{...G,notes:I}:G))}async function re(){if(l.filter(I=>I.difference!==0&&!I.adjustmentType).length>0){v("Please select adjustment type (Wastage or Counting Error) for all items with differences");return}try{p(!0),v(null),console.log(` Submitting recalibration:
        - locationId: ${C}
        - locationType: ${s?"production_house":"store"}
        - locationName: ${E}
        - isProductionHouse: ${s}`);const I={locationId:C,locationType:s?"production_house":"store",locationName:E,items:l.map(G=>({itemId:G.itemId,itemName:G.itemName,category:G.category,unit:G.unit,systemQuantity:G.systemQuantity,actualQuantity:G.actualQuantity,difference:G.difference,adjustmentType:G.adjustmentType,notes:G.notes}))};await D5(e.user?.accessToken||"",I),S(!0),setTimeout(()=>{r(),n&&n()},2e3)}catch(I){console.error("Error submitting recalibration:",I),v(I instanceof Error?I.message:"Failed to submit recalibration")}finally{p(!1)}}const Q=l.length,R=l.filter(L=>L.difference!==0).length,X=l.filter(L=>L.adjustmentType==="wastage"&&L.difference<0).reduce((L,I)=>L+Math.abs(I.difference),0);return u?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(_o,{className:"w-6 h-6 animate-spin text-purple-600"}),a.jsx("span",{className:"text-gray-700",children:"Loading inventory data..."})]})})}):k?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(lr,{className:"w-8 h-8 text-green-600"})}),a.jsx("h3",{className:"text-xl text-gray-900",children:"Recalibration Submitted!"}),a.jsx("p",{className:"text-gray-600 text-center",children:"Your recalibration has been submitted for approval."}),a.jsx("p",{className:"text-sm text-gray-500 text-center",children:"A manager or cluster head will review and approve it."})]})})}):a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full my-8",children:[a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 p-6 rounded-t-2xl",children:[a.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),a.jsxs("div",{className:"relative flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center border-2 border-white/30",children:a.jsx(Ur,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl text-white",children:"Monthly Stock Recalibration"}),a.jsxs("p",{className:"text-white/80 text-sm",children:[E||A?.name," - ",_]})]})]}),a.jsx("button",{onClick:r,className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-all",children:a.jsx(en,{className:"w-6 h-6 text-white"})})]})]}),a.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-purple-200",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Items"}),a.jsx("div",{className:"text-2xl text-purple-600",children:Q})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-orange-200",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Items with Difference"}),a.jsx("div",{className:"text-2xl text-orange-600",children:R})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-red-200",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Wastage"}),a.jsx("div",{className:"text-2xl text-red-600",children:X.toFixed(2)})]})]}),g&&a.jsxs("div",{className:"mt-4 bg-blue-50 border-2 border-blue-200 rounded-xl p-3 flex items-start gap-3",children:[a.jsx(Qa,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm text-blue-900 font-medium mb-1",children:"Last recalibration was performed on:"}),a.jsx("div",{className:"text-sm text-blue-700",children:q2(g,!0)}),a.jsxs("div",{className:"text-xs text-blue-600 mt-1 flex items-center gap-1",children:[a.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full"}),"Timezone: Indian Standard Time (GMT+5:30)"]})]})]}),a.jsxs("div",{className:"mt-4 bg-green-50 border-2 border-green-200 rounded-xl p-3 flex items-start gap-3",children:[a.jsx(lr,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),a.jsx("div",{className:"text-sm text-green-900",children:"Stock recalibration is now enabled for the entire month. Operations Managers and Cluster Heads will be notified when you submit a recalibration."})]})]}),a.jsx("div",{className:"p-6 max-h-[500px] overflow-y-auto",children:a.jsx("div",{className:"space-y-4",children:l.map((L,I)=>a.jsxs("div",{className:`bg-gradient-to-r ${L.difference!==0?"from-red-50 to-orange-50 border-red-200":"from-gray-50 to-gray-100 border-gray-200"} border-2 rounded-xl p-4`,children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-start",children:[a.jsxs("div",{className:"md:col-span-3",children:[a.jsxs("div",{className:"text-sm text-gray-500",children:["Item ",I+1]}),a.jsx("div",{className:"text-gray-900",children:L.itemName}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[L.category.replace(/_/g," "),"  ",L.unit]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Current Stock"}),a.jsxs("div",{className:"text-gray-900",children:[L.systemQuantity," ",L.unit]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Actual Count"}),a.jsx("input",{type:"number",step:"0.01",value:L.actualQuantity,onChange:G=>ne(L.itemId,G.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter count"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Difference"}),a.jsxs("div",{className:`text-lg ${L.difference>0?"text-green-600":L.difference<0?"text-red-600":"text-gray-600"}`,children:[L.difference>0?"+":"",L.difference.toFixed(2)]})]}),a.jsx("div",{className:"md:col-span-3",children:L.difference!==0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 mb-2 block",children:"Adjustment Type *"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>W(L.itemId,"wastage"),className:`px-3 py-1.5 rounded-lg text-sm border-2 transition-all ${L.adjustmentType==="wastage"?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-gray-300 hover:border-red-400"}`,children:"Wastage"}),a.jsx("button",{onClick:()=>W(L.itemId,"counting_error"),className:`px-3 py-1.5 rounded-lg text-sm border-2 transition-all ${L.adjustmentType==="counting_error"?"bg-orange-600 text-white border-orange-600":"bg-white text-gray-700 border-gray-300 hover:border-orange-400"}`,children:"Counting Error"})]})]})})]}),L.difference!==0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Notes (Optional)"}),a.jsx("input",{type:"text",value:L.notes,onChange:G=>ee(L.itemId,G.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Add any additional notes..."})]})]},L.itemId))})}),y&&a.jsx("div",{className:"px-6 pb-4",children:a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-3 flex items-start gap-3",children:[a.jsx(Qa,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsx("div",{className:"text-sm text-red-900",children:y})]})}),a.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl border-t-2 border-gray-200 flex justify-between items-center",children:[a.jsx("button",{onClick:r,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:re,disabled:m,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:m?a.jsxs(a.Fragment,{children:[a.jsx(_o,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Lo,{className:"w-5 h-5"}),"Save Recalibration"]})})]})]})})}function Hj({context:e,selectedStoreId:t}){const[r,n]=P.useState(new Date().toISOString().split("T")[0]),[s,i]=P.useState(!1),o=t||e.user?.storeId,l=e.inventory.filter(k=>{const S=k.date===r,w=o?k.storeId===o:!0;return S&&w}),d=e.overheads.filter(k=>{const S=k.date===r,w=o?k.storeId===o:!0;return S&&w}),u=e.fixedCosts.filter(k=>{const S=k.date===r,w=o?k.storeId===o:!0;return S&&w}),f=l.reduce((k,S)=>k+S.totalCost,0),m=d.reduce((k,S)=>k+S.amount,0),p=u.reduce((k,S)=>k+S.amount,0),g=l.reduce((k,S)=>(k[S.category]||(k[S.category]=[]),k[S.category].push(S),k),{}),b=d.reduce((k,S)=>(k[S.category]||(k[S.category]=[]),k[S.category].push(S),k),{}),y={fresh_produce:"Fresh Vegetables",spices_seasonings:"Grocery",dairy:"Dairy Products",meat:"Meat",packaging:"Packaging Materials",staff_essentials:"Staff Essentials",fuel:"Fuel",travel:"Travel",transportation:"Transportation",marketing:"Marketing",service_charge:"Service Charge",repair:"Repair & Maintenance",party:"Party Expenses",lunch:"Lunch",miscellaneous:"Miscellaneous",electricity:"Electricity",rent:"Rent"},v=e.user?.role==="cluster_head";return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(No,{className:"w-6 h-6 text-blue-600"}),a.jsx("h1",{className:"text-2xl text-gray-900",children:"Inventory Overview"})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-50 border-2 border-amber-200 rounded-lg",children:[a.jsx(_j,{className:"w-4 h-4 text-amber-600"}),a.jsx("span",{className:"text-sm text-amber-800",children:"View Only"})]})]}),a.jsx(Rg,{selectedDate:r,onDateChange:n}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 shadow-lg shadow-blue-500/30",children:[a.jsx("p",{className:"text-sm text-blue-100 uppercase tracking-wide",children:"Inventory Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",f.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 shadow-lg shadow-orange-500/30",children:[a.jsx("p",{className:"text-sm text-orange-100 uppercase tracking-wide",children:"Overhead Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",m.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 shadow-lg shadow-green-500/30",children:[a.jsx("p",{className:"text-sm text-green-100 uppercase tracking-wide",children:"Fixed Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",p.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 shadow-lg shadow-purple-500/30",children:[a.jsx("p",{className:"text-sm text-purple-100 uppercase tracking-wide",children:"Total Expenses"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",(f+m+p).toLocaleString()]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Zt,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl text-gray-900",children:"Inventory Items"})]}),Object.keys(g).length>0?a.jsx("div",{className:"space-y-6",children:Object.entries(g).map(([k,S])=>a.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:y[k]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Item Name"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Quantity"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Cost/Unit"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Total Cost"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(w=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:w.itemName||a.jsx("span",{className:"text-red-600 italic",children:" Missing Name"})}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:[w.quantity," ",w.unit]}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:["",(w.costPerUnit||0).toFixed(2)]}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",(w.totalCost||0).toLocaleString()]})]},w.id))})]})})]},k))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Zt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No inventory items for this date"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(ca,{className:"w-5 h-5 text-orange-600"}),a.jsx("h2",{className:"text-xl text-gray-900",children:"Overhead Costs"})]}),Object.keys(b).length>0?a.jsx("div",{className:"space-y-6",children:Object.entries(b).map(([k,S])=>a.jsxs("div",{className:"border-l-4 border-orange-500 pl-4",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:y[k]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(w=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:w.description}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",w.amount.toLocaleString()]})]},w.id))})]})})]},k))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(ca,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No overhead costs for this date"})]})]}),u.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(fa,{className:"w-5 h-5 text-green-600"}),a.jsx("h2",{className:"text-xl text-gray-900",children:"Fixed Costs"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Category"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(k=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:y[k.category]}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:k.description}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",k.amount.toLocaleString()]})]},k.id))})]})})]}),v&&a.jsx("div",{className:"mt-6",children:a.jsxs("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",onClick:()=>i(!0),children:[a.jsx(Ur,{className:"w-5 h-5 mr-2"}),"Monthly Stock Recalibration"]})}),s&&a.jsx(W2,{context:e,selectedStoreId:o,onClose:()=>i(!1)}),a.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(_j,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsx("div",{children:a.jsx("p",{className:"text-sm text-blue-800",children:v?"You are viewing inventory data in read-only mode. Only Operations Managers can add or edit inventory items.":"You are viewing inventory data in read-only mode. To add or modify inventory items, please contact your Operations Manager."})})]})})]})}function Q5(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Q5(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function br(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Q5(e))&&(n&&(n+=" "),n+=t);return n}var ov,kC;function _s(){if(kC)return ov;kC=1;var e=Array.isArray;return ov=e,ov}var lv,SC;function Z5(){if(SC)return lv;SC=1;var e=typeof pm=="object"&&pm&&pm.Object===Object&&pm;return lv=e,lv}var cv,_C;function ao(){if(_C)return cv;_C=1;var e=Z5(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return cv=r,cv}var dv,EC;function of(){if(EC)return dv;EC=1;var e=ao(),t=e.Symbol;return dv=t,dv}var uv,CC;function EW(){if(CC)return uv;CC=1;var e=of(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=r.call(o,s),d=o[s];try{o[s]=void 0;var u=!0}catch{}var f=n.call(o);return u&&(l?o[s]=d:delete o[s]),f}return uv=i,uv}var hv,AC;function CW(){if(AC)return hv;AC=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return hv=r,hv}var fv,TC;function Ko(){if(TC)return fv;TC=1;var e=of(),t=EW(),r=CW(),n="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:n:i&&i in Object(l)?t(l):r(l)}return fv=o,fv}var mv,DC;function Vo(){if(DC)return mv;DC=1;function e(t){return t!=null&&typeof t=="object"}return mv=e,mv}var pv,OC;function Su(){if(OC)return pv;OC=1;var e=Ko(),t=Vo(),r="[object Symbol]";function n(s){return typeof s=="symbol"||t(s)&&e(s)==r}return pv=n,pv}var gv,PC;function z2(){if(PC)return gv;PC=1;var e=_s(),t=Su(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return gv=s,gv}var xv,IC;function Tl(){if(IC)return xv;IC=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return xv=e,xv}var yv,MC;function K2(){if(MC)return yv;MC=1;var e=Ko(),t=Tl(),r="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var d=e(l);return d==n||d==s||d==r||d==i}return yv=o,yv}var vv,RC;function AW(){if(RC)return vv;RC=1;var e=ao(),t=e["__core-js_shared__"];return vv=t,vv}var bv,FC;function TW(){if(FC)return bv;FC=1;var e=AW(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return bv=r,bv}var wv,$C;function eM(){if($C)return wv;$C=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return wv=r,wv}var jv,LC;function DW(){if(LC)return jv;LC=1;var e=K2(),t=TW(),r=Tl(),n=eM(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,d=o.toString,u=l.hasOwnProperty,f=RegExp("^"+d.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(p){if(!r(p)||t(p))return!1;var g=e(p)?f:i;return g.test(n(p))}return jv=m,jv}var Nv,BC;function OW(){if(BC)return Nv;BC=1;function e(t,r){return t?.[r]}return Nv=e,Nv}var kv,UC;function Rc(){if(UC)return kv;UC=1;var e=DW(),t=OW();function r(n,s){var i=t(n,s);return e(i)?i:void 0}return kv=r,kv}var Sv,HC;function Fg(){if(HC)return Sv;HC=1;var e=Rc(),t=e(Object,"create");return Sv=t,Sv}var _v,qC;function PW(){if(qC)return _v;qC=1;var e=Fg();function t(){this.__data__=e?e(null):{},this.size=0}return _v=t,_v}var Ev,WC;function IW(){if(WC)return Ev;WC=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return Ev=e,Ev}var Cv,zC;function MW(){if(zC)return Cv;zC=1;var e=Fg(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return n.call(o,i)?o[i]:void 0}return Cv=s,Cv}var Av,KC;function RW(){if(KC)return Av;KC=1;var e=Fg(),t=Object.prototype,r=t.hasOwnProperty;function n(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return Av=n,Av}var Tv,VC;function FW(){if(VC)return Tv;VC=1;var e=Fg(),t="__lodash_hash_undefined__";function r(n,s){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=e&&s===void 0?t:s,this}return Tv=r,Tv}var Dv,GC;function $W(){if(GC)return Dv;GC=1;var e=PW(),t=IW(),r=MW(),n=RW(),s=FW();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,Dv=i,Dv}var Ov,YC;function LW(){if(YC)return Ov;YC=1;function e(){this.__data__=[],this.size=0}return Ov=e,Ov}var Pv,XC;function V2(){if(XC)return Pv;XC=1;function e(t,r){return t===r||t!==t&&r!==r}return Pv=e,Pv}var Iv,JC;function $g(){if(JC)return Iv;JC=1;var e=V2();function t(r,n){for(var s=r.length;s--;)if(e(r[s][0],n))return s;return-1}return Iv=t,Iv}var Mv,QC;function BW(){if(QC)return Mv;QC=1;var e=$g(),t=Array.prototype,r=t.splice;function n(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return Mv=n,Mv}var Rv,ZC;function UW(){if(ZC)return Rv;ZC=1;var e=$g();function t(r){var n=this.__data__,s=e(n,r);return s<0?void 0:n[s][1]}return Rv=t,Rv}var Fv,eA;function HW(){if(eA)return Fv;eA=1;var e=$g();function t(r){return e(this.__data__,r)>-1}return Fv=t,Fv}var $v,tA;function qW(){if(tA)return $v;tA=1;var e=$g();function t(r,n){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,n])):s[i][1]=n,this}return $v=t,$v}var Lv,rA;function Lg(){if(rA)return Lv;rA=1;var e=LW(),t=BW(),r=UW(),n=HW(),s=qW();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,Lv=i,Lv}var Bv,aA;function G2(){if(aA)return Bv;aA=1;var e=Rc(),t=ao(),r=e(t,"Map");return Bv=r,Bv}var Uv,nA;function WW(){if(nA)return Uv;nA=1;var e=$W(),t=Lg(),r=G2();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return Uv=n,Uv}var Hv,sA;function zW(){if(sA)return Hv;sA=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return Hv=e,Hv}var qv,iA;function Bg(){if(iA)return qv;iA=1;var e=zW();function t(r,n){var s=r.__data__;return e(n)?s[typeof n=="string"?"string":"hash"]:s.map}return qv=t,qv}var Wv,oA;function KW(){if(oA)return Wv;oA=1;var e=Bg();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return Wv=t,Wv}var zv,lA;function VW(){if(lA)return zv;lA=1;var e=Bg();function t(r){return e(this,r).get(r)}return zv=t,zv}var Kv,cA;function GW(){if(cA)return Kv;cA=1;var e=Bg();function t(r){return e(this,r).has(r)}return Kv=t,Kv}var Vv,dA;function YW(){if(dA)return Vv;dA=1;var e=Bg();function t(r,n){var s=e(this,r),i=s.size;return s.set(r,n),this.size+=s.size==i?0:1,this}return Vv=t,Vv}var Gv,uA;function Y2(){if(uA)return Gv;uA=1;var e=WW(),t=KW(),r=VW(),n=GW(),s=YW();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,Gv=i,Gv}var Yv,hA;function tM(){if(hA)return Yv;hA=1;var e=Y2(),t="Expected a function";function r(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],d=i.cache;if(d.has(l))return d.get(l);var u=n.apply(this,o);return i.cache=d.set(l,u)||d,u};return i.cache=new(r.Cache||e),i}return r.Cache=e,Yv=r,Yv}var Xv,fA;function XW(){if(fA)return Xv;fA=1;var e=tM(),t=500;function r(n){var s=e(n,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return Xv=r,Xv}var Jv,mA;function JW(){if(mA)return Jv;mA=1;var e=XW(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,d,u){i.push(d?u.replace(r,"$1"):l||o)}),i});return Jv=n,Jv}var Qv,pA;function X2(){if(pA)return Qv;pA=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=Array(s);++n<s;)i[n]=r(t[n],n,t);return i}return Qv=e,Qv}var Zv,gA;function QW(){if(gA)return Zv;gA=1;var e=of(),t=X2(),r=_s(),n=Su(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(n(l))return i?i.call(l):"";var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}return Zv=o,Zv}var eb,xA;function rM(){if(xA)return eb;xA=1;var e=QW();function t(r){return r==null?"":e(r)}return eb=t,eb}var tb,yA;function aM(){if(yA)return tb;yA=1;var e=_s(),t=z2(),r=JW(),n=rM();function s(i,o){return e(i)?i:t(i,o)?[i]:r(n(i))}return tb=s,tb}var rb,vA;function Ug(){if(vA)return rb;vA=1;var e=Su();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return rb=t,rb}var ab,bA;function J2(){if(bA)return ab;bA=1;var e=aM(),t=Ug();function r(n,s){s=e(s,n);for(var i=0,o=s.length;n!=null&&i<o;)n=n[t(s[i++])];return i&&i==o?n:void 0}return ab=r,ab}var nb,wA;function nM(){if(wA)return nb;wA=1;var e=J2();function t(r,n,s){var i=r==null?void 0:e(r,n);return i===void 0?s:i}return nb=t,nb}var ZW=nM();const Us=sa(ZW);var sb,jA;function ez(){if(jA)return sb;jA=1;function e(t){return t==null}return sb=e,sb}var tz=ez();const wr=sa(tz);var ib,NA;function rz(){if(NA)return ib;NA=1;var e=Ko(),t=_s(),r=Vo(),n="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==n}return ib=s,ib}var az=rz();const Sc=sa(az);var nz=K2();const or=sa(nz);var sz=Tl();const _u=sa(sz);var ob={exports:{}},ra={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kA;function iz(){if(kA)return ra;kA=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function y(v){if(typeof v=="object"&&v!==null){var k=v.$$typeof;switch(k){case e:switch(v=v.type,v){case r:case s:case n:case u:case f:return v;default:switch(v=v&&v.$$typeof,v){case l:case o:case d:case p:case m:case i:return v;default:return k}}case t:return k}}}return ra.ContextConsumer=o,ra.ContextProvider=i,ra.Element=e,ra.ForwardRef=d,ra.Fragment=r,ra.Lazy=p,ra.Memo=m,ra.Portal=t,ra.Profiler=s,ra.StrictMode=n,ra.Suspense=u,ra.SuspenseList=f,ra.isAsyncMode=function(){return!1},ra.isConcurrentMode=function(){return!1},ra.isContextConsumer=function(v){return y(v)===o},ra.isContextProvider=function(v){return y(v)===i},ra.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===e},ra.isForwardRef=function(v){return y(v)===d},ra.isFragment=function(v){return y(v)===r},ra.isLazy=function(v){return y(v)===p},ra.isMemo=function(v){return y(v)===m},ra.isPortal=function(v){return y(v)===t},ra.isProfiler=function(v){return y(v)===s},ra.isStrictMode=function(v){return y(v)===n},ra.isSuspense=function(v){return y(v)===u},ra.isSuspenseList=function(v){return y(v)===f},ra.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===r||v===s||v===n||v===u||v===f||v===g||typeof v=="object"&&v!==null&&(v.$$typeof===p||v.$$typeof===m||v.$$typeof===i||v.$$typeof===o||v.$$typeof===d||v.$$typeof===b||v.getModuleId!==void 0)},ra.typeOf=y,ra}var SA;function oz(){return SA||(SA=1,ob.exports=iz()),ob.exports}var lz=oz(),lb,_A;function sM(){if(_A)return lb;_A=1;var e=Ko(),t=Vo(),r="[object Number]";function n(s){return typeof s=="number"||t(s)&&e(s)==r}return lb=n,lb}var cb,EA;function cz(){if(EA)return cb;EA=1;var e=sM();function t(r){return e(r)&&r!=+r}return cb=t,cb}var dz=cz();const lf=sa(dz);var uz=sM();const hz=sa(uz);var os=function(t){return t===0?0:t>0?1:-1},uc=function(t){return Sc(t)&&t.indexOf("%")===t.length-1},At=function(t){return hz(t)&&!lf(t)},fz=function(t){return wr(t)},fn=function(t){return At(t)||Sc(t)},mz=0,Eu=function(t){var r=++mz;return"".concat(t||"").concat(r)},ls=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!At(t)&&!Sc(t))return n;var i;if(uc(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return lf(i)&&(i=n),s&&i>r&&(i=r),i},xl=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},pz=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},Pn=function(t,r){return At(t)&&At(r)?function(n){return t+n*(r-t)}:function(){return r}};function ip(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Us(n,t))===r})}var gz=function(t,r){return At(t)&&At(r)?t-r:Sc(t)&&Sc(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Bd(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function qj(e){"@babel/helpers - typeof";return qj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qj(e)}var xz=["viewBox","children"],yz=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],CA=["points","pathLength"],db={svg:xz,polygon:CA,polyline:CA},Q2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],op=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(P.isValidElement(t)&&(n=t.props),!_u(n))return null;var s={};return Object.keys(n).forEach(function(i){Q2.includes(i)&&(s[i]=r||function(o){return n[i](n,o)})}),s},vz=function(t,r,n){return function(s){return t(r,n,s),null}},_c=function(t,r,n){if(!_u(t)||qj(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];Q2.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=vz(o,r,n))}),s},bz=["children"],wz=["children"];function AA(e,t){if(e==null)return{};var r=jz(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Wj(e){"@babel/helpers - typeof";return Wj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wj(e)}var TA={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Mo=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},DA=null,ub=null,Z2=function e(t){if(t===DA&&Array.isArray(ub))return ub;var r=[];return P.Children.forEach(t,function(n){wr(n)||(lz.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),ub=r,DA=t,r};function Hs(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return Mo(s)}):n=[Mo(t)],Z2(e).forEach(function(s){var i=Us(s,"type.displayName")||Us(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}function Is(e,t){var r=Hs(e,t);return r&&r[0]}var OA=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!At(n)||n<=0||!At(s)||s<=0)},Nz=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],kz=function(t){return t&&t.type&&Sc(t.type)&&Nz.indexOf(t.type)>=0},Sz=function(t){return t&&Wj(t)==="object"&&"clipDot"in t},_z=function(t,r,n,s){var i,o=(i=db?.[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!or(t)&&(s&&o.includes(r)||yz.includes(r))||n&&Q2.includes(r)},Jt=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(P.isValidElement(t)&&(s=t.props),!_u(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;_z((l=s)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=s[o])}),i},zj=function e(t,r){if(t===r)return!0;var n=P.Children.count(t);if(n!==P.Children.count(r))return!1;if(n===0)return!0;if(n===1)return PA(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!PA(i,o))return!1}return!0},PA=function(t,r){if(wr(t)&&wr(r))return!0;if(!wr(t)&&!wr(r)){var n=t.props||{},s=n.children,i=AA(n,bz),o=r.props||{},l=o.children,d=AA(o,wz);return s&&l?Bd(i,d)&&zj(s,l):!s&&!l?Bd(i,d):!1}return!1},IA=function(t,r){var n=[],s={};return Z2(t).forEach(function(i,o){if(kz(i))n.push(i);else if(i){var l=Mo(i.type),d=r[l]||{},u=d.handler,f=d.once;if(u&&(!f||!s[l])){var m=u(i,l,o);n.push(m),s[l]=!0}}}),n},Ez=function(t){var r=t&&t.type;return r&&TA[r]?TA[r]:null},Cz=function(t,r){return Z2(r).indexOf(t)},Az=["children","width","height","viewBox","className","style","title","desc"];function Kj(){return Kj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kj.apply(this,arguments)}function Tz(e,t){if(e==null)return{};var r=Dz(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Dz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Vj(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,d=e.desc,u=Tz(e,Az),f=s||{width:r,height:n,x:0,y:0},m=br("recharts-surface",i);return ke.createElement("svg",Kj({},Jt(u,!0,"svg"),{className:m,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),ke.createElement("title",null,l),ke.createElement("desc",null,d),t)}var Oz=["children","className"];function Gj(){return Gj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gj.apply(this,arguments)}function Pz(e,t){if(e==null)return{};var r=Iz(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Iz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var qr=ke.forwardRef(function(e,t){var r=e.children,n=e.className,s=Pz(e,Oz),i=br("recharts-layer",n);return ke.createElement("g",Gj({className:i},Jt(s,!0),{ref:t}),r)}),Ri=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},hb,MA;function Mz(){if(MA)return hb;MA=1;function e(t,r,n){var s=-1,i=t.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+r];return o}return hb=e,hb}var fb,RA;function Rz(){if(RA)return fb;RA=1;var e=Mz();function t(r,n,s){var i=r.length;return s=s===void 0?i:s,!n&&s>=i?r:e(r,n,s)}return fb=t,fb}var mb,FA;function iM(){if(FA)return mb;FA=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function d(u){return l.test(u)}return mb=d,mb}var pb,$A;function Fz(){if($A)return pb;$A=1;function e(t){return t.split("")}return pb=e,pb}var gb,LA;function $z(){if(LA)return gb;LA=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",d="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+d+")",f="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",b=u+"?",y="["+i+"]?",v="(?:"+g+"(?:"+[f,m,p].join("|")+")"+y+b+")*",k=y+b+v,S="(?:"+[f+l+"?",l,m,p,o].join("|")+")",w=RegExp(d+"(?="+d+")|"+S+k,"g");function A(C){return C.match(w)||[]}return gb=A,gb}var xb,BA;function Lz(){if(BA)return xb;BA=1;var e=Fz(),t=iM(),r=$z();function n(s){return t(s)?r(s):e(s)}return xb=n,xb}var yb,UA;function Bz(){if(UA)return yb;UA=1;var e=Rz(),t=iM(),r=Lz(),n=rM();function s(i){return function(o){o=n(o);var l=t(o)?r(o):void 0,d=l?l[0]:o.charAt(0),u=l?e(l,1).join(""):o.slice(1);return d[i]()+u}}return yb=s,yb}var vb,HA;function Uz(){if(HA)return vb;HA=1;var e=Bz(),t=e("toUpperCase");return vb=t,vb}var Hz=Uz();const Hg=sa(Hz);function va(e){return function(){return e}}const oM=Math.cos,lp=Math.sin,Li=Math.sqrt,cp=Math.PI,qg=2*cp,Yj=Math.PI,Xj=2*Yj,ac=1e-6,qz=Xj-ac;function lM(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Wz(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return lM;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class zz{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?lM:Wz(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,d=n-t,u=s-r,f=o-t,m=l-r,p=f*f+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>ac)if(!(Math.abs(m*d-u*f)>ac)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let g=n-o,b=s-l,y=d*d+u*u,v=g*g+b*b,k=Math.sqrt(y),S=Math.sqrt(p),w=i*Math.tan((Yj-Math.acos((y+p-v)/(2*k*S)))/2),A=w/S,C=w/k;Math.abs(A-1)>ac&&this._append`L${t+A*f},${r+A*m}`,this._append`A${i},${i},0,0,${+(m*g>f*b)},${this._x1=t+C*d},${this._y1=r+C*u}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),d=n*Math.sin(s),u=t+l,f=r+d,m=1^o,p=o?s-i:i-s;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>ac||Math.abs(this._y1-f)>ac)&&this._append`L${u},${f}`,n&&(p<0&&(p=p%Xj+Xj),p>qz?this._append`A${n},${n},0,1,${m},${t-l},${r-d}A${n},${n},0,1,${m},${this._x1=u},${this._y1=f}`:p>ac&&this._append`A${n},${n},0,${+(p>=Yj)},${m},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function ek(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new zz(t)}function tk(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function cM(e){this._context=e}cM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Wg(e){return new cM(e)}function dM(e){return e[0]}function uM(e){return e[1]}function hM(e,t){var r=va(!0),n=null,s=Wg,i=null,o=ek(l);e=typeof e=="function"?e:e===void 0?dM:va(e),t=typeof t=="function"?t:t===void 0?uM:va(t);function l(d){var u,f=(d=tk(d)).length,m,p=!1,g;for(n==null&&(i=s(g=o())),u=0;u<=f;++u)!(u<f&&r(m=d[u],u,d))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(m,u,d),+t(m,u,d));if(g)return i=null,g+""||null}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:va(+d),l):e},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:va(+d),l):t},l.defined=function(d){return arguments.length?(r=typeof d=="function"?d:va(!!d),l):r},l.curve=function(d){return arguments.length?(s=d,n!=null&&(i=s(n)),l):s},l.context=function(d){return arguments.length?(d==null?n=i=null:i=s(n=d),l):n},l}function Sm(e,t,r){var n=null,s=va(!0),i=null,o=Wg,l=null,d=ek(u);e=typeof e=="function"?e:e===void 0?dM:va(+e),t=typeof t=="function"?t:va(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?uM:va(+r);function u(m){var p,g,b,y=(m=tk(m)).length,v,k=!1,S,w=new Array(y),A=new Array(y);for(i==null&&(l=o(S=d())),p=0;p<=y;++p){if(!(p<y&&s(v=m[p],p,m))===k)if(k=!k)g=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=p-1;b>=g;--b)l.point(w[b],A[b]);l.lineEnd(),l.areaEnd()}k&&(w[p]=+e(v,p,m),A[p]=+t(v,p,m),l.point(n?+n(v,p,m):w[p],r?+r(v,p,m):A[p]))}if(S)return l=null,S+""||null}function f(){return hM().defined(s).curve(o).context(i)}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:va(+m),n=null,u):e},u.x0=function(m){return arguments.length?(e=typeof m=="function"?m:va(+m),u):e},u.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:va(+m),u):n},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:va(+m),r=null,u):t},u.y0=function(m){return arguments.length?(t=typeof m=="function"?m:va(+m),u):t},u.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:va(+m),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(m){return arguments.length?(s=typeof m=="function"?m:va(!!m),u):s},u.curve=function(m){return arguments.length?(o=m,i!=null&&(l=o(i)),u):o},u.context=function(m){return arguments.length?(m==null?i=l=null:l=o(i=m),u):i},u}class fM{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Kz(e){return new fM(e,!0)}function Vz(e){return new fM(e,!1)}const rk={draw(e,t){const r=Li(t/cp);e.moveTo(r,0),e.arc(0,0,r,0,qg)}},Gz={draw(e,t){const r=Li(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},mM=Li(1/3),Yz=mM*2,Xz={draw(e,t){const r=Li(t/Yz),n=r*mM;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Jz={draw(e,t){const r=Li(t),n=-r/2;e.rect(n,n,r,r)}},Qz=.8908130915292852,pM=lp(cp/10)/lp(7*cp/10),Zz=lp(qg/10)*pM,eK=-oM(qg/10)*pM,tK={draw(e,t){const r=Li(t*Qz),n=Zz*r,s=eK*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=qg*i/5,l=oM(o),d=lp(o);e.lineTo(d*r,-l*r),e.lineTo(l*n-d*s,d*n+l*s)}e.closePath()}},bb=Li(3),rK={draw(e,t){const r=-Li(t/(bb*3));e.moveTo(0,r*2),e.lineTo(-bb*r,-r),e.lineTo(bb*r,-r),e.closePath()}},Zs=-.5,ei=Li(3)/2,Jj=1/Li(12),aK=(Jj/2+1)*3,nK={draw(e,t){const r=Li(t/aK),n=r/2,s=r*Jj,i=n,o=r*Jj+r,l=-i,d=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,d),e.lineTo(Zs*n-ei*s,ei*n+Zs*s),e.lineTo(Zs*i-ei*o,ei*i+Zs*o),e.lineTo(Zs*l-ei*d,ei*l+Zs*d),e.lineTo(Zs*n+ei*s,Zs*s-ei*n),e.lineTo(Zs*i+ei*o,Zs*o-ei*i),e.lineTo(Zs*l+ei*d,Zs*d-ei*l),e.closePath()}};function sK(e,t){let r=null,n=ek(s);e=typeof e=="function"?e:va(e||rk),t=typeof t=="function"?t:va(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:va(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:va(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function dp(){}function up(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function gM(e){this._context=e}gM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:up(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:up(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function iK(e){return new gM(e)}function xM(e){this._context=e}xM.prototype={areaStart:dp,areaEnd:dp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:up(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function oK(e){return new xM(e)}function yM(e){this._context=e}yM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:up(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lK(e){return new yM(e)}function vM(e){this._context=e}vM.prototype={areaStart:dp,areaEnd:dp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function cK(e){return new vM(e)}function qA(e){return e<0?-1:1}function WA(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(qA(i)+qA(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function zA(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function wb(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function hp(e){this._context=e}hp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:wb(this,this._t0,zA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,wb(this,zA(this,r=WA(this,e,t)),r);break;default:wb(this,this._t0,r=WA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function bM(e){this._context=new wM(e)}(bM.prototype=Object.create(hp.prototype)).point=function(e,t){hp.prototype.point.call(this,t,e)};function wM(e){this._context=e}wM.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function dK(e){return new hp(e)}function uK(e){return new bM(e)}function jM(e){this._context=e}jM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=KA(e),s=KA(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function KA(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function hK(e){return new jM(e)}function zg(e,t){this._context=e,this._t=t}zg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function fK(e){return new zg(e,.5)}function mK(e){return new zg(e,0)}function pK(e){return new zg(e,1)}function Kd(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Qj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function gK(e,t){return e[t]}function xK(e){const t=[];return t.key=e,t}function yK(){var e=va([]),t=Qj,r=Kd,n=gK;function s(i){var o=Array.from(e.apply(this,arguments),xK),l,d=o.length,u=-1,f;for(const m of i)for(l=0,++u;l<d;++l)(o[l][u]=[0,+n(m,o[l].key,u,i)]).data=m;for(l=0,f=tk(t(o));l<d;++l)o[f[l]].index=l;return r(o,f),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:va(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:va(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Qj:typeof i=="function"?i:va(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Kd,s):r},s}function vK(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}Kd(e,t)}}function bK(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Kd(e,t)}}function wK(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,d=0,u=0;l<o;++l){for(var f=e[t[l]],m=f[n][1]||0,p=f[n-1][1]||0,g=(m-p)/2,b=0;b<l;++b){var y=e[t[b]],v=y[n][1]||0,k=y[n-1][1]||0;g+=v-k}d+=m,u+=g*m}s[n-1][1]+=s[n-1][0]=r,d&&(r-=u/d)}s[n-1][1]+=s[n-1][0]=r,Kd(e,t)}}function d0(e){"@babel/helpers - typeof";return d0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d0(e)}var jK=["type","size","sizeType"];function Zj(){return Zj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zj.apply(this,arguments)}function VA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function GA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VA(Object(r),!0).forEach(function(n){NK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NK(e,t,r){return t=kK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kK(e){var t=SK(e,"string");return d0(t)=="symbol"?t:t+""}function SK(e,t){if(d0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(d0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _K(e,t){if(e==null)return{};var r=EK(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function EK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var NM={symbolCircle:rk,symbolCross:Gz,symbolDiamond:Xz,symbolSquare:Jz,symbolStar:tK,symbolTriangle:rK,symbolWye:nK},CK=Math.PI/180,AK=function(t){var r="symbol".concat(Hg(t));return NM[r]||rk},TK=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*CK;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},DK=function(t,r){NM["symbol".concat(Hg(t))]=r},ak=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,d=_K(t,jK),u=GA(GA({},d),{},{type:n,size:i,sizeType:l}),f=function(){var v=AK(n),k=sK().type(v).size(TK(i,l,n));return k()},m=u.className,p=u.cx,g=u.cy,b=Jt(u,!0);return p===+p&&g===+g&&i===+i?ke.createElement("path",Zj({},b,{className:br("recharts-symbols",m),transform:"translate(".concat(p,", ").concat(g,")"),d:f()})):null};ak.registerSymbol=DK;function Vd(e){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vd(e)}function eN(){return eN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eN.apply(this,arguments)}function YA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function OK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YA(Object(r),!0).forEach(function(n){u0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SM(n.key),n)}}function MK(e,t,r){return t&&IK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function RK(e,t,r){return t=fp(t),FK(e,kM()?Reflect.construct(t,r||[],fp(e).constructor):t.apply(e,r))}function FK(e,t){if(t&&(Vd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $K(e)}function $K(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kM=function(){return!!e})()}function fp(e){return fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fp(e)}function LK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tN(e,t)}function tN(e,t){return tN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},tN(e,t)}function u0(e,t,r){return t=SM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SM(e){var t=BK(e,"string");return Vd(t)=="symbol"?t:t+""}function BK(e,t){if(Vd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ti=32,nk=(function(e){function t(){return PK(this,t),RK(this,t,arguments)}return LK(t,e),MK(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,i=ti/2,o=ti/6,l=ti/3,d=n.inactive?s:n.color;if(n.type==="plainline")return ke.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:ti,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return ke.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(ti,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return ke.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(ti/8,"h").concat(ti,"v").concat(ti*3/4,"h").concat(-ti,"z"),className:"recharts-legend-icon"});if(ke.isValidElement(n.legendIcon)){var u=OK({},n);return delete u.legendIcon,ke.cloneElement(n.legendIcon,u)}return ke.createElement(ak,{fill:d,cx:i,cy:i,size:ti,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,d=s.formatter,u=s.inactiveColor,f={x:0,y:0,width:ti,height:ti},m={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(g,b){var y=g.formatter||d,v=br(u0(u0({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",g.inactive));if(g.type==="none")return null;var k=or(g.value)?null:g.value;Ri(!or(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=g.inactive?u:g.color;return ke.createElement("li",eN({className:v,style:m,key:"legend-item-".concat(b)},_c(n.props,g,b)),ke.createElement(Vj,{width:o,height:o,viewBox:f,style:p},n.renderIcon(g)),ke.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},y?y(k,g,b):k))})}},{key:"render",value:function(){var n=this.props,s=n.payload,i=n.layout,o=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ke.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(P.PureComponent);u0(nk,"displayName","Legend");u0(nk,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var jb,XA;function UK(){if(XA)return jb;XA=1;var e=Lg();function t(){this.__data__=new e,this.size=0}return jb=t,jb}var Nb,JA;function HK(){if(JA)return Nb;JA=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return Nb=e,Nb}var kb,QA;function qK(){if(QA)return kb;QA=1;function e(t){return this.__data__.get(t)}return kb=e,kb}var Sb,ZA;function WK(){if(ZA)return Sb;ZA=1;function e(t){return this.__data__.has(t)}return Sb=e,Sb}var _b,eT;function zK(){if(eT)return _b;eT=1;var e=Lg(),t=G2(),r=Y2(),n=200;function s(i,o){var l=this.__data__;if(l instanceof e){var d=l.__data__;if(!t||d.length<n-1)return d.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(d)}return l.set(i,o),this.size=l.size,this}return _b=s,_b}var Eb,tT;function _M(){if(tT)return Eb;tT=1;var e=Lg(),t=UK(),r=HK(),n=qK(),s=WK(),i=zK();function o(l){var d=this.__data__=new e(l);this.size=d.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=s,o.prototype.set=i,Eb=o,Eb}var Cb,rT;function KK(){if(rT)return Cb;rT=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return Cb=t,Cb}var Ab,aT;function VK(){if(aT)return Ab;aT=1;function e(t){return this.__data__.has(t)}return Ab=e,Ab}var Tb,nT;function EM(){if(nT)return Tb;nT=1;var e=Y2(),t=KK(),r=VK();function n(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,Tb=n,Tb}var Db,sT;function CM(){if(sT)return Db;sT=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(r(t[n],n,t))return!0;return!1}return Db=e,Db}var Ob,iT;function AM(){if(iT)return Ob;iT=1;function e(t,r){return t.has(r)}return Ob=e,Ob}var Pb,oT;function TM(){if(oT)return Pb;oT=1;var e=EM(),t=CM(),r=AM(),n=1,s=2;function i(o,l,d,u,f,m){var p=d&n,g=o.length,b=l.length;if(g!=b&&!(p&&b>g))return!1;var y=m.get(o),v=m.get(l);if(y&&v)return y==l&&v==o;var k=-1,S=!0,w=d&s?new e:void 0;for(m.set(o,l),m.set(l,o);++k<g;){var A=o[k],C=l[k];if(u)var N=p?u(C,A,k,l,o,m):u(A,C,k,o,l,m);if(N!==void 0){if(N)continue;S=!1;break}if(w){if(!t(l,function(E,_){if(!r(w,_)&&(A===E||f(A,E,d,u,m)))return w.push(_)})){S=!1;break}}else if(!(A===C||f(A,C,d,u,m))){S=!1;break}}return m.delete(o),m.delete(l),S}return Pb=i,Pb}var Ib,lT;function GK(){if(lT)return Ib;lT=1;var e=ao(),t=e.Uint8Array;return Ib=t,Ib}var Mb,cT;function YK(){if(cT)return Mb;cT=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s,i){n[++r]=[i,s]}),n}return Mb=e,Mb}var Rb,dT;function sk(){if(dT)return Rb;dT=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s){n[++r]=s}),n}return Rb=e,Rb}var Fb,uT;function XK(){if(uT)return Fb;uT=1;var e=of(),t=GK(),r=V2(),n=TM(),s=YK(),i=sk(),o=1,l=2,d="[object Boolean]",u="[object Date]",f="[object Error]",m="[object Map]",p="[object Number]",g="[object RegExp]",b="[object Set]",y="[object String]",v="[object Symbol]",k="[object ArrayBuffer]",S="[object DataView]",w=e?e.prototype:void 0,A=w?w.valueOf:void 0;function C(N,E,_,O,B,F,D){switch(_){case S:if(N.byteLength!=E.byteLength||N.byteOffset!=E.byteOffset)return!1;N=N.buffer,E=E.buffer;case k:return!(N.byteLength!=E.byteLength||!F(new t(N),new t(E)));case d:case u:case p:return r(+N,+E);case f:return N.name==E.name&&N.message==E.message;case g:case y:return N==E+"";case m:var H=s;case b:var ne=O&o;if(H||(H=i),N.size!=E.size&&!ne)return!1;var W=D.get(N);if(W)return W==E;O|=l,D.set(N,E);var ee=n(H(N),H(E),O,B,F,D);return D.delete(N),ee;case v:if(A)return A.call(N)==A.call(E)}return!1}return Fb=C,Fb}var $b,hT;function DM(){if(hT)return $b;hT=1;function e(t,r){for(var n=-1,s=r.length,i=t.length;++n<s;)t[i+n]=r[n];return t}return $b=e,$b}var Lb,fT;function JK(){if(fT)return Lb;fT=1;var e=DM(),t=_s();function r(n,s,i){var o=s(n);return t(n)?o:e(o,i(n))}return Lb=r,Lb}var Bb,mT;function QK(){if(mT)return Bb;mT=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=0,o=[];++n<s;){var l=t[n];r(l,n,t)&&(o[i++]=l)}return o}return Bb=e,Bb}var Ub,pT;function ZK(){if(pT)return Ub;pT=1;function e(){return[]}return Ub=e,Ub}var Hb,gT;function eV(){if(gT)return Hb;gT=1;var e=QK(),t=ZK(),r=Object.prototype,n=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return n.call(o,l)}))}:t;return Hb=i,Hb}var qb,xT;function tV(){if(xT)return qb;xT=1;function e(t,r){for(var n=-1,s=Array(t);++n<t;)s[n]=r(n);return s}return qb=e,qb}var Wb,yT;function rV(){if(yT)return Wb;yT=1;var e=Ko(),t=Vo(),r="[object Arguments]";function n(s){return t(s)&&e(s)==r}return Wb=n,Wb}var zb,vT;function ik(){if(vT)return zb;vT=1;var e=rV(),t=Vo(),r=Object.prototype,n=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&n.call(o,"callee")&&!s.call(o,"callee")};return zb=i,zb}var Th={exports:{}},Kb,bT;function aV(){if(bT)return Kb;bT=1;function e(){return!1}return Kb=e,Kb}Th.exports;var wT;function OM(){return wT||(wT=1,(function(e,t){var r=ao(),n=aV(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,d=l?l.isBuffer:void 0,u=d||n;e.exports=u})(Th,Th.exports)),Th.exports}var Vb,jT;function ok(){if(jT)return Vb;jT=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,s){var i=typeof n;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<s}return Vb=r,Vb}var Gb,NT;function lk(){if(NT)return Gb;NT=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Gb=t,Gb}var Yb,kT;function nV(){if(kT)return Yb;kT=1;var e=Ko(),t=lk(),r=Vo(),n="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",d="[object Function]",u="[object Map]",f="[object Number]",m="[object Object]",p="[object RegExp]",g="[object Set]",b="[object String]",y="[object WeakMap]",v="[object ArrayBuffer]",k="[object DataView]",S="[object Float32Array]",w="[object Float64Array]",A="[object Int8Array]",C="[object Int16Array]",N="[object Int32Array]",E="[object Uint8Array]",_="[object Uint8ClampedArray]",O="[object Uint16Array]",B="[object Uint32Array]",F={};F[S]=F[w]=F[A]=F[C]=F[N]=F[E]=F[_]=F[O]=F[B]=!0,F[n]=F[s]=F[v]=F[i]=F[k]=F[o]=F[l]=F[d]=F[u]=F[f]=F[m]=F[p]=F[g]=F[b]=F[y]=!1;function D(H){return r(H)&&t(H.length)&&!!F[e(H)]}return Yb=D,Yb}var Xb,ST;function PM(){if(ST)return Xb;ST=1;function e(t){return function(r){return t(r)}}return Xb=e,Xb}var Dh={exports:{}};Dh.exports;var _T;function sV(){return _T||(_T=1,(function(e,t){var r=Z5(),n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i&&r.process,l=(function(){try{var d=s&&s.require&&s.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Dh,Dh.exports)),Dh.exports}var Jb,ET;function IM(){if(ET)return Jb;ET=1;var e=nV(),t=PM(),r=sV(),n=r&&r.isTypedArray,s=n?t(n):e;return Jb=s,Jb}var Qb,CT;function iV(){if(CT)return Qb;CT=1;var e=tV(),t=ik(),r=_s(),n=OM(),s=ok(),i=IM(),o=Object.prototype,l=o.hasOwnProperty;function d(u,f){var m=r(u),p=!m&&t(u),g=!m&&!p&&n(u),b=!m&&!p&&!g&&i(u),y=m||p||g||b,v=y?e(u.length,String):[],k=v.length;for(var S in u)(f||l.call(u,S))&&!(y&&(S=="length"||g&&(S=="offset"||S=="parent")||b&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||s(S,k)))&&v.push(S);return v}return Qb=d,Qb}var Zb,AT;function oV(){if(AT)return Zb;AT=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,s=typeof n=="function"&&n.prototype||e;return r===s}return Zb=t,Zb}var ew,TT;function MM(){if(TT)return ew;TT=1;function e(t,r){return function(n){return t(r(n))}}return ew=e,ew}var tw,DT;function lV(){if(DT)return tw;DT=1;var e=MM(),t=e(Object.keys,Object);return tw=t,tw}var rw,OT;function cV(){if(OT)return rw;OT=1;var e=oV(),t=lV(),r=Object.prototype,n=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))n.call(i,l)&&l!="constructor"&&o.push(l);return o}return rw=s,rw}var aw,PT;function cf(){if(PT)return aw;PT=1;var e=K2(),t=lk();function r(n){return n!=null&&t(n.length)&&!e(n)}return aw=r,aw}var nw,IT;function Kg(){if(IT)return nw;IT=1;var e=iV(),t=cV(),r=cf();function n(s){return r(s)?e(s):t(s)}return nw=n,nw}var sw,MT;function dV(){if(MT)return sw;MT=1;var e=JK(),t=eV(),r=Kg();function n(s){return e(s,r,t)}return sw=n,sw}var iw,RT;function uV(){if(RT)return iw;RT=1;var e=dV(),t=1,r=Object.prototype,n=r.hasOwnProperty;function s(i,o,l,d,u,f){var m=l&t,p=e(i),g=p.length,b=e(o),y=b.length;if(g!=y&&!m)return!1;for(var v=g;v--;){var k=p[v];if(!(m?k in o:n.call(o,k)))return!1}var S=f.get(i),w=f.get(o);if(S&&w)return S==o&&w==i;var A=!0;f.set(i,o),f.set(o,i);for(var C=m;++v<g;){k=p[v];var N=i[k],E=o[k];if(d)var _=m?d(E,N,k,o,i,f):d(N,E,k,i,o,f);if(!(_===void 0?N===E||u(N,E,l,d,f):_)){A=!1;break}C||(C=k=="constructor")}if(A&&!C){var O=i.constructor,B=o.constructor;O!=B&&"constructor"in i&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof B=="function"&&B instanceof B)&&(A=!1)}return f.delete(i),f.delete(o),A}return iw=s,iw}var ow,FT;function hV(){if(FT)return ow;FT=1;var e=Rc(),t=ao(),r=e(t,"DataView");return ow=r,ow}var lw,$T;function fV(){if($T)return lw;$T=1;var e=Rc(),t=ao(),r=e(t,"Promise");return lw=r,lw}var cw,LT;function RM(){if(LT)return cw;LT=1;var e=Rc(),t=ao(),r=e(t,"Set");return cw=r,cw}var dw,BT;function mV(){if(BT)return dw;BT=1;var e=Rc(),t=ao(),r=e(t,"WeakMap");return dw=r,dw}var uw,UT;function pV(){if(UT)return uw;UT=1;var e=hV(),t=G2(),r=fV(),n=RM(),s=mV(),i=Ko(),o=eM(),l="[object Map]",d="[object Object]",u="[object Promise]",f="[object Set]",m="[object WeakMap]",p="[object DataView]",g=o(e),b=o(t),y=o(r),v=o(n),k=o(s),S=i;return(e&&S(new e(new ArrayBuffer(1)))!=p||t&&S(new t)!=l||r&&S(r.resolve())!=u||n&&S(new n)!=f||s&&S(new s)!=m)&&(S=function(w){var A=i(w),C=A==d?w.constructor:void 0,N=C?o(C):"";if(N)switch(N){case g:return p;case b:return l;case y:return u;case v:return f;case k:return m}return A}),uw=S,uw}var hw,HT;function gV(){if(HT)return hw;HT=1;var e=_M(),t=TM(),r=XK(),n=uV(),s=pV(),i=_s(),o=OM(),l=IM(),d=1,u="[object Arguments]",f="[object Array]",m="[object Object]",p=Object.prototype,g=p.hasOwnProperty;function b(y,v,k,S,w,A){var C=i(y),N=i(v),E=C?f:s(y),_=N?f:s(v);E=E==u?m:E,_=_==u?m:_;var O=E==m,B=_==m,F=E==_;if(F&&o(y)){if(!o(v))return!1;C=!0,O=!1}if(F&&!O)return A||(A=new e),C||l(y)?t(y,v,k,S,w,A):r(y,v,E,k,S,w,A);if(!(k&d)){var D=O&&g.call(y,"__wrapped__"),H=B&&g.call(v,"__wrapped__");if(D||H){var ne=D?y.value():y,W=H?v.value():v;return A||(A=new e),w(ne,W,k,S,A)}}return F?(A||(A=new e),n(y,v,k,S,w,A)):!1}return hw=b,hw}var fw,qT;function ck(){if(qT)return fw;qT=1;var e=gV(),t=Vo();function r(n,s,i,o,l){return n===s?!0:n==null||s==null||!t(n)&&!t(s)?n!==n&&s!==s:e(n,s,i,o,r,l)}return fw=r,fw}var mw,WT;function xV(){if(WT)return mw;WT=1;var e=_M(),t=ck(),r=1,n=2;function s(i,o,l,d){var u=l.length,f=u,m=!d;if(i==null)return!f;for(i=Object(i);u--;){var p=l[u];if(m&&p[2]?p[1]!==i[p[0]]:!(p[0]in i))return!1}for(;++u<f;){p=l[u];var g=p[0],b=i[g],y=p[1];if(m&&p[2]){if(b===void 0&&!(g in i))return!1}else{var v=new e;if(d)var k=d(b,y,g,i,o,v);if(!(k===void 0?t(y,b,r|n,d,v):k))return!1}}return!0}return mw=s,mw}var pw,zT;function FM(){if(zT)return pw;zT=1;var e=Tl();function t(r){return r===r&&!e(r)}return pw=t,pw}var gw,KT;function yV(){if(KT)return gw;KT=1;var e=FM(),t=Kg();function r(n){for(var s=t(n),i=s.length;i--;){var o=s[i],l=n[o];s[i]=[o,l,e(l)]}return s}return gw=r,gw}var xw,VT;function $M(){if(VT)return xw;VT=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return xw=e,xw}var yw,GT;function vV(){if(GT)return yw;GT=1;var e=xV(),t=yV(),r=$M();function n(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return yw=n,yw}var vw,YT;function bV(){if(YT)return vw;YT=1;function e(t,r){return t!=null&&r in Object(t)}return vw=e,vw}var bw,XT;function wV(){if(XT)return bw;XT=1;var e=aM(),t=ik(),r=_s(),n=ok(),s=lk(),i=Ug();function o(l,d,u){d=e(d,l);for(var f=-1,m=d.length,p=!1;++f<m;){var g=i(d[f]);if(!(p=l!=null&&u(l,g)))break;l=l[g]}return p||++f!=m?p:(m=l==null?0:l.length,!!m&&s(m)&&n(g,m)&&(r(l)||t(l)))}return bw=o,bw}var ww,JT;function jV(){if(JT)return ww;JT=1;var e=bV(),t=wV();function r(n,s){return n!=null&&t(n,s,e)}return ww=r,ww}var jw,QT;function NV(){if(QT)return jw;QT=1;var e=ck(),t=nM(),r=jV(),n=z2(),s=FM(),i=$M(),o=Ug(),l=1,d=2;function u(f,m){return n(f)&&s(m)?i(o(f),m):function(p){var g=t(p,f);return g===void 0&&g===m?r(p,f):e(m,g,l|d)}}return jw=u,jw}var Nw,ZT;function Cu(){if(ZT)return Nw;ZT=1;function e(t){return t}return Nw=e,Nw}var kw,e4;function kV(){if(e4)return kw;e4=1;function e(t){return function(r){return r?.[t]}}return kw=e,kw}var Sw,t4;function SV(){if(t4)return Sw;t4=1;var e=J2();function t(r){return function(n){return e(n,r)}}return Sw=t,Sw}var _w,r4;function _V(){if(r4)return _w;r4=1;var e=kV(),t=SV(),r=z2(),n=Ug();function s(i){return r(i)?e(n(i)):t(i)}return _w=s,_w}var Ew,a4;function no(){if(a4)return Ew;a4=1;var e=vV(),t=NV(),r=Cu(),n=_s(),s=_V();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):s(o)}return Ew=i,Ew}var Cw,n4;function LM(){if(n4)return Cw;n4=1;function e(t,r,n,s){for(var i=t.length,o=n+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return Cw=e,Cw}var Aw,s4;function EV(){if(s4)return Aw;s4=1;function e(t){return t!==t}return Aw=e,Aw}var Tw,i4;function CV(){if(i4)return Tw;i4=1;function e(t,r,n){for(var s=n-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return Tw=e,Tw}var Dw,o4;function AV(){if(o4)return Dw;o4=1;var e=LM(),t=EV(),r=CV();function n(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return Dw=n,Dw}var Ow,l4;function TV(){if(l4)return Ow;l4=1;var e=AV();function t(r,n){var s=r==null?0:r.length;return!!s&&e(r,n,0)>-1}return Ow=t,Ow}var Pw,c4;function DV(){if(c4)return Pw;c4=1;function e(t,r,n){for(var s=-1,i=t==null?0:t.length;++s<i;)if(n(r,t[s]))return!0;return!1}return Pw=e,Pw}var Iw,d4;function OV(){if(d4)return Iw;d4=1;function e(){}return Iw=e,Iw}var Mw,u4;function PV(){if(u4)return Mw;u4=1;var e=RM(),t=OV(),r=sk(),n=1/0,s=e&&1/r(new e([,-0]))[1]==n?function(i){return new e(i)}:t;return Mw=s,Mw}var Rw,h4;function IV(){if(h4)return Rw;h4=1;var e=EM(),t=TV(),r=DV(),n=AM(),s=PV(),i=sk(),o=200;function l(d,u,f){var m=-1,p=t,g=d.length,b=!0,y=[],v=y;if(f)b=!1,p=r;else if(g>=o){var k=u?null:s(d);if(k)return i(k);b=!1,p=n,v=new e}else v=u?[]:y;e:for(;++m<g;){var S=d[m],w=u?u(S):S;if(S=f||S!==0?S:0,b&&w===w){for(var A=v.length;A--;)if(v[A]===w)continue e;u&&v.push(w),y.push(S)}else p(v,w,f)||(v!==y&&v.push(w),y.push(S))}return y}return Rw=l,Rw}var Fw,f4;function MV(){if(f4)return Fw;f4=1;var e=no(),t=IV();function r(n,s){return n&&n.length?t(n,e(s,2)):[]}return Fw=r,Fw}var RV=MV();const m4=sa(RV);function BM(e,t,r){return t===!0?m4(e,r):or(t)?m4(e,t):e}function Gd(e){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gd(e)}var FV=["ref"];function p4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p4(Object(r),!0).forEach(function(n){Vg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HM(n.key),n)}}function LV(e,t,r){return t&&g4(e.prototype,t),r&&g4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function BV(e,t,r){return t=mp(t),UV(e,UM()?Reflect.construct(t,r||[],mp(e).constructor):t.apply(e,r))}function UV(e,t){if(t&&(Gd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HV(e)}function HV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UM=function(){return!!e})()}function mp(e){return mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mp(e)}function qV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rN(e,t)}function rN(e,t){return rN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},rN(e,t)}function Vg(e,t,r){return t=HM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HM(e){var t=WV(e,"string");return Gd(t)=="symbol"?t:t+""}function WV(e,t){if(Gd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function zV(e,t){if(e==null)return{};var r=KV(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function KV(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function VV(e){return e.value}function GV(e,t){if(ke.isValidElement(e))return ke.cloneElement(e,t);if(typeof e=="function")return ke.createElement(e,t);t.ref;var r=zV(t,FV);return ke.createElement(nk,r)}var x4=1,Ss=(function(e){function t(){var r;$V(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=BV(this,t,[].concat(s)),Vg(r,"lastBoundingBox",{width:-1,height:-1}),r}return qV(t,e),LV(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>x4||Math.abs(s.height-this.lastBoundingBox.height)>x4)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?yo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,d=s.margin,u=s.chartWidth,f=s.chartHeight,m,p;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var g=this.getBBoxSnapshot();m={left:((u||0)-g.width)/2}}else m=o==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();p={top:((f||0)-b.height)/2}}else p=l==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return yo(yo({},m),p)}},{key:"render",value:function(){var n=this,s=this.props,i=s.content,o=s.width,l=s.height,d=s.wrapperStyle,u=s.payloadUniqBy,f=s.payload,m=yo(yo({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(d)),d);return ke.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(g){n.wrapperNode=g}},GV(i,yo(yo({},this.props),{},{payload:BM(f,u,VV)})))}}],[{key:"getWithHeight",value:function(n,s){var i=yo(yo({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&At(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||s}:null}}])})(P.PureComponent);Vg(Ss,"displayName","Legend");Vg(Ss,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var $w,y4;function YV(){if(y4)return $w;y4=1;var e=of(),t=ik(),r=_s(),n=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(n&&i&&i[n])}return $w=s,$w}var Lw,v4;function qM(){if(v4)return Lw;v4=1;var e=DM(),t=YV();function r(n,s,i,o,l){var d=-1,u=n.length;for(i||(i=t),l||(l=[]);++d<u;){var f=n[d];s>0&&i(f)?s>1?r(f,s-1,i,o,l):e(l,f):o||(l[l.length]=f)}return l}return Lw=r,Lw}var Bw,b4;function XV(){if(b4)return Bw;b4=1;function e(t){return function(r,n,s){for(var i=-1,o=Object(r),l=s(r),d=l.length;d--;){var u=l[t?d:++i];if(n(o[u],u,o)===!1)break}return r}}return Bw=e,Bw}var Uw,w4;function JV(){if(w4)return Uw;w4=1;var e=XV(),t=e();return Uw=t,Uw}var Hw,j4;function WM(){if(j4)return Hw;j4=1;var e=JV(),t=Kg();function r(n,s){return n&&e(n,s,t)}return Hw=r,Hw}var qw,N4;function QV(){if(N4)return qw;N4=1;var e=cf();function t(r,n){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,l=n?o:-1,d=Object(s);(n?l--:++l<o)&&i(d[l],l,d)!==!1;);return s}}return qw=t,qw}var Ww,k4;function dk(){if(k4)return Ww;k4=1;var e=WM(),t=QV(),r=t(e);return Ww=r,Ww}var zw,S4;function zM(){if(S4)return zw;S4=1;var e=dk(),t=cf();function r(n,s){var i=-1,o=t(n)?Array(n.length):[];return e(n,function(l,d,u){o[++i]=s(l,d,u)}),o}return zw=r,zw}var Kw,_4;function ZV(){if(_4)return Kw;_4=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return Kw=e,Kw}var Vw,E4;function eG(){if(E4)return Vw;E4=1;var e=Su();function t(r,n){if(r!==n){var s=r!==void 0,i=r===null,o=r===r,l=e(r),d=n!==void 0,u=n===null,f=n===n,m=e(n);if(!u&&!m&&!l&&r>n||l&&d&&f&&!u&&!m||i&&d&&f||!s&&f||!o)return 1;if(!i&&!l&&!m&&r<n||m&&s&&o&&!i&&!l||u&&s&&o||!d&&o||!f)return-1}return 0}return Vw=t,Vw}var Gw,C4;function tG(){if(C4)return Gw;C4=1;var e=eG();function t(r,n,s){for(var i=-1,o=r.criteria,l=n.criteria,d=o.length,u=s.length;++i<d;){var f=e(o[i],l[i]);if(f){if(i>=u)return f;var m=s[i];return f*(m=="desc"?-1:1)}}return r.index-n.index}return Gw=t,Gw}var Yw,A4;function rG(){if(A4)return Yw;A4=1;var e=X2(),t=J2(),r=no(),n=zM(),s=ZV(),i=PM(),o=tG(),l=Cu(),d=_s();function u(f,m,p){m.length?m=e(m,function(y){return d(y)?function(v){return t(v,y.length===1?y[0]:y)}:y}):m=[l];var g=-1;m=e(m,i(r));var b=n(f,function(y,v,k){var S=e(m,function(w){return w(y)});return{criteria:S,index:++g,value:y}});return s(b,function(y,v){return o(y,v,p)})}return Yw=u,Yw}var Xw,T4;function aG(){if(T4)return Xw;T4=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return Xw=e,Xw}var Jw,D4;function nG(){if(D4)return Jw;D4=1;var e=aG(),t=Math.max;function r(n,s,i){return s=t(s===void 0?n.length-1:s,0),function(){for(var o=arguments,l=-1,d=t(o.length-s,0),u=Array(d);++l<d;)u[l]=o[s+l];l=-1;for(var f=Array(s+1);++l<s;)f[l]=o[l];return f[s]=i(u),e(n,this,f)}}return Jw=r,Jw}var Qw,O4;function sG(){if(O4)return Qw;O4=1;function e(t){return function(){return t}}return Qw=e,Qw}var Zw,P4;function KM(){if(P4)return Zw;P4=1;var e=Rc(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return Zw=t,Zw}var e1,I4;function iG(){if(I4)return e1;I4=1;var e=sG(),t=KM(),r=Cu(),n=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return e1=n,e1}var t1,M4;function oG(){if(M4)return t1;M4=1;var e=800,t=16,r=Date.now;function n(s){var i=0,o=0;return function(){var l=r(),d=t-(l-o);if(o=l,d>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return t1=n,t1}var r1,R4;function lG(){if(R4)return r1;R4=1;var e=iG(),t=oG(),r=t(e);return r1=r,r1}var a1,F4;function cG(){if(F4)return a1;F4=1;var e=Cu(),t=nG(),r=lG();function n(s,i){return r(t(s,i,e),s+"")}return a1=n,a1}var n1,$4;function Gg(){if($4)return n1;$4=1;var e=V2(),t=cf(),r=ok(),n=Tl();function s(i,o,l){if(!n(l))return!1;var d=typeof o;return(d=="number"?t(l)&&r(o,l.length):d=="string"&&o in l)?e(l[o],i):!1}return n1=s,n1}var s1,L4;function dG(){if(L4)return s1;L4=1;var e=qM(),t=rG(),r=cG(),n=Gg(),s=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&n(i,o[0],o[1])?o=[]:l>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return s1=s,s1}var uG=dG();const uk=sa(uG);function h0(e){"@babel/helpers - typeof";return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h0(e)}function aN(){return aN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aN.apply(this,arguments)}function hG(e,t){return gG(e)||pG(e,t)||mG(e,t)||fG()}function fG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mG(e,t){if(e){if(typeof e=="string")return B4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B4(e,t)}}function B4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function gG(e){if(Array.isArray(e))return e}function U4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function i1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U4(Object(r),!0).forEach(function(n){xG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xG(e,t,r){return t=yG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yG(e){var t=vG(e,"string");return h0(t)=="symbol"?t:t+""}function vG(e,t){if(h0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(h0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bG(e){return Array.isArray(e)&&fn(e[0])&&fn(e[1])?e.join(" ~ "):e}var wG=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,d=t.labelStyle,u=d===void 0?{}:d,f=t.payload,m=t.formatter,p=t.itemSorter,g=t.wrapperClassName,b=t.labelClassName,y=t.label,v=t.labelFormatter,k=t.accessibilityLayer,S=k===void 0?!1:k,w=function(){if(f&&f.length){var D={padding:0,margin:0},H=(p?uk(f,p):f).map(function(ne,W){if(ne.type==="none")return null;var ee=i1({display:"block",paddingTop:4,paddingBottom:4,color:ne.color||"#000"},l),re=ne.formatter||m||bG,Q=ne.value,R=ne.name,X=Q,L=R;if(re&&X!=null&&L!=null){var I=re(Q,R,ne,W,f);if(Array.isArray(I)){var G=hG(I,2);X=G[0],L=G[1]}else X=I}return ke.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:ee},fn(L)?ke.createElement("span",{className:"recharts-tooltip-item-name"},L):null,fn(L)?ke.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ke.createElement("span",{className:"recharts-tooltip-item-value"},X),ke.createElement("span",{className:"recharts-tooltip-item-unit"},ne.unit||""))});return ke.createElement("ul",{className:"recharts-tooltip-item-list",style:D},H)}return null},A=i1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),C=i1({margin:0},u),N=!wr(y),E=N?y:"",_=br("recharts-default-tooltip",g),O=br("recharts-tooltip-label",b);N&&v&&f!==void 0&&f!==null&&(E=v(y,f));var B=S?{role:"status","aria-live":"assertive"}:{};return ke.createElement("div",aN({className:_,style:A},B),ke.createElement("p",{className:O,style:C},ke.isValidElement(E)?E:"".concat(E)),w())};function f0(e){"@babel/helpers - typeof";return f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f0(e)}function _m(e,t,r){return t=jG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jG(e){var t=NG(e,"string");return f0(t)=="symbol"?t:t+""}function NG(e,t){if(f0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(f0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gh="recharts-tooltip-wrapper",kG={visibility:"hidden"};function SG(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return br(gh,_m(_m(_m(_m({},"".concat(gh,"-right"),At(r)&&t&&At(t.x)&&r>=t.x),"".concat(gh,"-left"),At(r)&&t&&At(t.x)&&r<t.x),"".concat(gh,"-bottom"),At(n)&&t&&At(t.y)&&n>=t.y),"".concat(gh,"-top"),At(n)&&t&&At(t.y)&&n<t.y))}function H4(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,d=e.viewBox,u=e.viewBoxDimension;if(i&&At(i[n]))return i[n];var f=r[n]-l-s,m=r[n]+s;if(t[n])return o[n]?f:m;if(o[n]){var p=f,g=d[n];return p<g?Math.max(m,d[n]):Math.max(f,d[n])}var b=m+l,y=d[n]+u;return b>y?Math.max(f,d[n]):Math.max(m,d[n])}function _G(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function EG(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,d=e.viewBox,u,f,m;return o.height>0&&o.width>0&&r?(f=H4({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),m=H4({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),u=_G({translateX:f,translateY:m,useTranslate3d:l})):u=kG,{cssProperties:u,cssClasses:SG({translateX:f,translateY:m,coordinate:r})}}function Yd(e){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yd(e)}function q4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function W4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q4(Object(r),!0).forEach(function(n){sN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GM(n.key),n)}}function TG(e,t,r){return t&&AG(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function DG(e,t,r){return t=pp(t),OG(e,VM()?Reflect.construct(t,r||[],pp(e).constructor):t.apply(e,r))}function OG(e,t){if(t&&(Yd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PG(e)}function PG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VM=function(){return!!e})()}function pp(e){return pp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pp(e)}function IG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nN(e,t)}function nN(e,t){return nN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},nN(e,t)}function sN(e,t,r){return t=GM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GM(e){var t=MG(e,"string");return Yd(t)=="symbol"?t:t+""}function MG(e,t){if(Yd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var z4=1,RG=(function(e){function t(){var r;CG(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=DG(this,t,[].concat(s)),sN(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),sN(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,d,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&l!==void 0?l:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return IG(t,e),TG(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>z4||Math.abs(n.height-this.state.lastBoundingBox.height)>z4)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,d=s.animationEasing,u=s.children,f=s.coordinate,m=s.hasPayload,p=s.isAnimationActive,g=s.offset,b=s.position,y=s.reverseDirection,v=s.useTranslate3d,k=s.viewBox,S=s.wrapperStyle,w=EG({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:g,position:b,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:k}),A=w.cssClasses,C=w.cssProperties,N=W4(W4({transition:p&&i?"transform ".concat(l,"ms ").concat(d):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},S);return ke.createElement("div",{tabIndex:-1,className:A,style:N,ref:function(_){n.wrapperNode=_}},u)}}])})(P.PureComponent),FG=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Dl={isSsr:FG()};function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function K4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function V4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K4(Object(r),!0).forEach(function(n){hk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XM(n.key),n)}}function BG(e,t,r){return t&&LG(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function UG(e,t,r){return t=gp(t),HG(e,YM()?Reflect.construct(t,r||[],gp(e).constructor):t.apply(e,r))}function HG(e,t){if(t&&(Xd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qG(e)}function qG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YM=function(){return!!e})()}function gp(e){return gp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gp(e)}function WG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iN(e,t)}function iN(e,t){return iN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},iN(e,t)}function hk(e,t,r){return t=XM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XM(e){var t=zG(e,"string");return Xd(t)=="symbol"?t:t+""}function zG(e,t){if(Xd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function KG(e){return e.dataKey}function VG(e,t){return ke.isValidElement(e)?ke.cloneElement(e,t):typeof e=="function"?ke.createElement(e,t):ke.createElement(wG,t)}var Ea=(function(e){function t(){return $G(this,t),UG(this,t,arguments)}return WG(t,e),BG(t,[{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,d=s.animationEasing,u=s.content,f=s.coordinate,m=s.filterNull,p=s.isAnimationActive,g=s.offset,b=s.payload,y=s.payloadUniqBy,v=s.position,k=s.reverseDirection,S=s.useTranslate3d,w=s.viewBox,A=s.wrapperStyle,C=b??[];m&&C.length&&(C=BM(b.filter(function(E){return E.value!=null&&(E.hide!==!0||n.props.includeHidden)}),y,KG));var N=C.length>0;return ke.createElement(RG,{allowEscapeViewBox:o,animationDuration:l,animationEasing:d,isAnimationActive:p,active:i,coordinate:f,hasPayload:N,offset:g,position:v,reverseDirection:k,useTranslate3d:S,viewBox:w,wrapperStyle:A},VG(u,V4(V4({},this.props),{},{payload:C})))}}])})(P.PureComponent);hk(Ea,"displayName","Tooltip");hk(Ea,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Dl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var o1,G4;function GG(){if(G4)return o1;G4=1;var e=ao(),t=function(){return e.Date.now()};return o1=t,o1}var l1,Y4;function YG(){if(Y4)return l1;Y4=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return l1=t,l1}var c1,X4;function XG(){if(X4)return c1;X4=1;var e=YG(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return c1=r,c1}var d1,J4;function JM(){if(J4)return d1;J4=1;var e=XG(),t=Tl(),r=Su(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function d(u){if(typeof u=="number")return u;if(r(u))return n;if(t(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=t(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=e(u);var m=i.test(u);return m||o.test(u)?l(u.slice(2),m?2:8):s.test(u)?n:+u}return d1=d,d1}var u1,Q4;function JG(){if(Q4)return u1;Q4=1;var e=Tl(),t=GG(),r=JM(),n="Expected a function",s=Math.max,i=Math.min;function o(l,d,u){var f,m,p,g,b,y,v=0,k=!1,S=!1,w=!0;if(typeof l!="function")throw new TypeError(n);d=r(d)||0,e(u)&&(k=!!u.leading,S="maxWait"in u,p=S?s(r(u.maxWait)||0,d):p,w="trailing"in u?!!u.trailing:w);function A(H){var ne=f,W=m;return f=m=void 0,v=H,g=l.apply(W,ne),g}function C(H){return v=H,b=setTimeout(_,d),k?A(H):g}function N(H){var ne=H-y,W=H-v,ee=d-ne;return S?i(ee,p-W):ee}function E(H){var ne=H-y,W=H-v;return y===void 0||ne>=d||ne<0||S&&W>=p}function _(){var H=t();if(E(H))return O(H);b=setTimeout(_,N(H))}function O(H){return b=void 0,w&&f?A(H):(f=m=void 0,g)}function B(){b!==void 0&&clearTimeout(b),v=0,f=y=m=b=void 0}function F(){return b===void 0?g:O(t())}function D(){var H=t(),ne=E(H);if(f=arguments,m=this,y=H,ne){if(b===void 0)return C(y);if(S)return clearTimeout(b),b=setTimeout(_,d),A(y)}return b===void 0&&(b=setTimeout(_,d)),g}return D.cancel=B,D.flush=F,D}return u1=o,u1}var h1,Z4;function QG(){if(Z4)return h1;Z4=1;var e=JG(),t=Tl(),r="Expected a function";function n(s,i,o){var l=!0,d=!0;if(typeof s!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,d="trailing"in o?!!o.trailing:d),e(s,i,{leading:l,maxWait:i,trailing:d})}return h1=n,h1}var ZG=QG();const QM=sa(ZG);function m0(e){"@babel/helpers - typeof";return m0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m0(e)}function eD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Em(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eD(Object(r),!0).forEach(function(n){eY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eY(e,t,r){return t=tY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tY(e){var t=rY(e,"string");return m0(t)=="symbol"?t:t+""}function rY(e,t){if(m0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(m0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aY(e,t){return oY(e)||iY(e,t)||sY(e,t)||nY()}function nY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sY(e,t){if(e){if(typeof e=="string")return tD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tD(e,t)}}function tD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function iY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function oY(e){if(Array.isArray(e))return e}var zn=P.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,d=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,m=e.minHeight,p=e.maxHeight,g=e.children,b=e.debounce,y=b===void 0?0:b,v=e.id,k=e.className,S=e.onResize,w=e.style,A=w===void 0?{}:w,C=P.useRef(null),N=P.useRef();N.current=S,P.useImperativeHandle(t,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var E=P.useState({containerWidth:s.width,containerHeight:s.height}),_=aY(E,2),O=_[0],B=_[1],F=P.useCallback(function(H,ne){B(function(W){var ee=Math.round(H),re=Math.round(ne);return W.containerWidth===ee&&W.containerHeight===re?W:{containerWidth:ee,containerHeight:re}})},[]);P.useEffect(function(){var H=function(R){var X,L=R[0].contentRect,I=L.width,G=L.height;F(I,G),(X=N.current)===null||X===void 0||X.call(N,I,G)};y>0&&(H=QM(H,y,{trailing:!0,leading:!1}));var ne=new ResizeObserver(H),W=C.current.getBoundingClientRect(),ee=W.width,re=W.height;return F(ee,re),ne.observe(C.current),function(){ne.disconnect()}},[F,y]);var D=P.useMemo(function(){var H=O.containerWidth,ne=O.containerHeight;if(H<0||ne<0)return null;Ri(uc(o)||uc(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,d),Ri(!r||r>0,"The aspect(%s) must be greater than zero.",r);var W=uc(o)?H:o,ee=uc(d)?ne:d;r&&r>0&&(W?ee=W/r:ee&&(W=ee*r),p&&ee>p&&(ee=p)),Ri(W>0||ee>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,ee,o,d,f,m,r);var re=!Array.isArray(g)&&Mo(g.type).endsWith("Chart");return ke.Children.map(g,function(Q){return ke.isValidElement(Q)?P.cloneElement(Q,Em({width:W,height:ee},re?{style:Em({height:"100%",width:"100%",maxHeight:ee,maxWidth:W},Q.props.style)}:{})):Q})},[r,g,d,p,m,f,O,o]);return ke.createElement("div",{id:v?"".concat(v):void 0,className:br("recharts-responsive-container",k),style:Em(Em({},A),{},{width:o,height:d,minWidth:f,minHeight:m,maxHeight:p}),ref:C},D)}),Jd=function(t){return null};Jd.displayName="Cell";function p0(e){"@babel/helpers - typeof";return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p0(e)}function rD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rD(Object(r),!0).forEach(function(n){lY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lY(e,t,r){return t=cY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cY(e){var t=dY(e,"string");return p0(t)=="symbol"?t:t+""}function dY(e,t){if(p0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(p0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vd={widthCache:{},cacheCount:0},uY=2e3,hY={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},aD="recharts_measurement_span";function fY(e){var t=oN({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Lh=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Dl.isSsr)return{width:0,height:0};var n=fY(r),s=JSON.stringify({text:t,copyStyle:n});if(vd.widthCache[s])return vd.widthCache[s];try{var i=document.getElementById(aD);i||(i=document.createElement("span"),i.setAttribute("id",aD),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=oN(oN({},hY),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),d={width:l.width,height:l.height};return vd.widthCache[s]=d,++vd.cacheCount>uY&&(vd.cacheCount=0,vd.widthCache={}),d}catch{return{width:0,height:0}}},mY=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function g0(e){"@babel/helpers - typeof";return g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g0(e)}function xp(e,t){return yY(e)||xY(e,t)||gY(e,t)||pY()}function pY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gY(e,t){if(e){if(typeof e=="string")return nD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nD(e,t)}}function nD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function yY(e){if(Array.isArray(e))return e}function vY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wY(n.key),n)}}function bY(e,t,r){return t&&sD(e.prototype,t),r&&sD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wY(e){var t=jY(e,"string");return g0(t)=="symbol"?t:t+""}function jY(e,t){if(g0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(g0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var iD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,oD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,NY=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,kY=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ZM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},SY=Object.keys(ZM),Od="NaN";function _Y(e,t){return e*ZM[t]}var Cm=(function(){function e(t,r){vY(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!NY.test(r)&&(this.num=NaN,this.unit=""),SY.includes(r)&&(this.num=_Y(t,r),this.unit="px")}return bY(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=kY.exec(r))!==null&&n!==void 0?n:[],i=xp(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function eR(e){if(e.includes(Od))return Od;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=iD.exec(t))!==null&&r!==void 0?r:[],s=xp(n,4),i=s[1],o=s[2],l=s[3],d=Cm.parse(i??""),u=Cm.parse(l??""),f=o==="*"?d.multiply(u):d.divide(u);if(f.isNaN())return Od;t=t.replace(iD,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,p=(m=oD.exec(t))!==null&&m!==void 0?m:[],g=xp(p,4),b=g[1],y=g[2],v=g[3],k=Cm.parse(b??""),S=Cm.parse(v??""),w=y==="+"?k.add(S):k.subtract(S);if(w.isNaN())return Od;t=t.replace(oD,w.toString())}return t}var lD=/\(([^()]*)\)/;function EY(e){for(var t=e;t.includes("(");){var r=lD.exec(t),n=xp(r,2),s=n[1];t=t.replace(lD,eR(s))}return t}function CY(e){var t=e.replace(/\s+/g,"");return t=EY(t),t=eR(t),t}function AY(e){try{return CY(e)}catch{return Od}}function f1(e){var t=AY(e.slice(5,-1));return t===Od?"":t}var TY=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],DY=["dx","dy","angle","className","breakAll"];function lN(){return lN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lN.apply(this,arguments)}function cD(e,t){if(e==null)return{};var r=OY(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function OY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function dD(e,t){return RY(e)||MY(e,t)||IY(e,t)||PY()}function PY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IY(e,t){if(e){if(typeof e=="string")return uD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uD(e,t)}}function uD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function MY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function RY(e){if(Array.isArray(e))return e}var tR=/[ \f\n\r\t\v\u2028\u2029]+/,rR=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var i=[];wr(r)||(n?i=r.toString().split(""):i=r.toString().split(tR));var o=i.map(function(d){return{word:d,width:Lh(d,s).width}}),l=n?0:Lh("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},FY=function(t,r,n,s,i){var o=t.maxLines,l=t.children,d=t.style,u=t.breakAll,f=At(o),m=l,p=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(ee,re){var Q=re.word,R=re.width,X=ee[ee.length-1];if(X&&(s==null||i||X.width+R+n<Number(s)))X.words.push(Q),X.width+=R+n;else{var L={words:[Q],width:R};ee.push(L)}return ee},[])},g=p(r),b=function(W){return W.reduce(function(ee,re){return ee.width>re.width?ee:re})};if(!f)return g;for(var y="",v=function(W){var ee=m.slice(0,W),re=rR({breakAll:u,style:d,children:ee+y}).wordsWithComputedWidth,Q=p(re),R=Q.length>o||b(Q).width>Number(s);return[R,Q]},k=0,S=m.length-1,w=0,A;k<=S&&w<=m.length-1;){var C=Math.floor((k+S)/2),N=C-1,E=v(N),_=dD(E,2),O=_[0],B=_[1],F=v(C),D=dD(F,1),H=D[0];if(!O&&!H&&(k=C+1),O&&H&&(S=C-1),!O&&H){A=B;break}w++}return A||g},hD=function(t){var r=wr(t)?[]:t.toString().split(tR);return[{words:r}]},$Y=function(t){var r=t.width,n=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!Dl.isSsr){var d,u,f=rR({breakAll:o,children:s,style:i});if(f){var m=f.wordsWithComputedWidth,p=f.spaceWidth;d=m,u=p}else return hD(s);return FY({breakAll:o,children:s,maxLines:l,style:i},d,u,r,n)}return hD(s)},fD="#808080",Ec=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,d=t.capHeight,u=d===void 0?"0.71em":d,f=t.scaleToFit,m=f===void 0?!1:f,p=t.textAnchor,g=p===void 0?"start":p,b=t.verticalAnchor,y=b===void 0?"end":b,v=t.fill,k=v===void 0?fD:v,S=cD(t,TY),w=P.useMemo(function(){return $Y({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:m,style:S.style,width:S.width})},[S.breakAll,S.children,S.maxLines,m,S.style,S.width]),A=S.dx,C=S.dy,N=S.angle,E=S.className,_=S.breakAll,O=cD(S,DY);if(!fn(n)||!fn(i))return null;var B=n+(At(A)?A:0),F=i+(At(C)?C:0),D;switch(y){case"start":D=f1("calc(".concat(u,")"));break;case"middle":D=f1("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:D=f1("calc(".concat(w.length-1," * -").concat(l,")"));break}var H=[];if(m){var ne=w[0].width,W=S.width;H.push("scale(".concat((At(W)?W/ne:1)/ne,")"))}return N&&H.push("rotate(".concat(N,", ").concat(B,", ").concat(F,")")),H.length&&(O.transform=H.join(" ")),ke.createElement("text",lN({},Jt(O,!0),{x:B,y:F,className:br("recharts-text",E),textAnchor:g,fill:k.includes("url")?fD:k}),w.map(function(ee,re){var Q=ee.words.join(_?"":" ");return ke.createElement("tspan",{x:B,dy:re===0?D:l,key:"".concat(Q,"-").concat(re)},Q)}))};function Sl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function LY(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function fk(e){let t,r,n;e.length!==2?(t=Sl,r=(l,d)=>Sl(e(l),d),n=(l,d)=>e(l)-d):(t=e===Sl||e===LY?e:BY,r=e,n=e);function s(l,d,u=0,f=l.length){if(u<f){if(t(d,d)!==0)return f;do{const m=u+f>>>1;r(l[m],d)<0?u=m+1:f=m}while(u<f)}return u}function i(l,d,u=0,f=l.length){if(u<f){if(t(d,d)!==0)return f;do{const m=u+f>>>1;r(l[m],d)<=0?u=m+1:f=m}while(u<f)}return u}function o(l,d,u=0,f=l.length){const m=s(l,d,u,f-1);return m>u&&n(l[m-1],d)>-n(l[m],d)?m-1:m}return{left:s,center:o,right:i}}function BY(){return 0}function aR(e){return e===null?NaN:+e}function*UY(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const HY=fk(Sl),df=HY.right;fk(aR).center;class mD extends Map{constructor(t,r=zY){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(pD(this,t))}has(t){return super.has(pD(this,t))}set(t,r){return super.set(qY(this,t),r)}delete(t){return super.delete(WY(this,t))}}function pD({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function qY({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function WY({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function zY(e){return e!==null&&typeof e=="object"?e.valueOf():e}function KY(e=Sl){if(e===Sl)return nR;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function nR(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const VY=Math.sqrt(50),GY=Math.sqrt(10),YY=Math.sqrt(2);function yp(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=VY?10:i>=GY?5:i>=YY?2:1;let l,d,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),d=Math.round(t*u),l/u<e&&++l,d/u>t&&--d,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),d=Math.round(t/u),l*u<e&&++l,d*u>t&&--d),d<l&&.5<=r&&r<2?yp(e,t,r*2):[l,d,u]}function cN(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?yp(t,e,r):yp(e,t,r);if(!(i>=s))return[];const l=i-s+1,d=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)d[u]=(i-u)/-o;else for(let u=0;u<l;++u)d[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)d[u]=(s+u)/-o;else for(let u=0;u<l;++u)d[u]=(s+u)*o;return d}function dN(e,t,r){return t=+t,e=+e,r=+r,yp(e,t,r)[2]}function uN(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?dN(t,e,r):dN(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function gD(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function xD(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function sR(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?nR:KY(s);n>r;){if(n-r>600){const d=n-r+1,u=t-r+1,f=Math.log(d),m=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*m*(d-m)/d)*(u-d/2<0?-1:1),g=Math.max(r,Math.floor(t-u*m/d+p)),b=Math.min(n,Math.floor(t+(d-u)*m/d+p));sR(e,t,g,b,s)}const i=e[t];let o=r,l=n;for(xh(e,r,t),s(e[n],i)>0&&xh(e,r,n);o<l;){for(xh(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?xh(e,r,l):(++l,xh(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function xh(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function XY(e,t,r){if(e=Float64Array.from(UY(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return xD(e);if(t>=1)return gD(e);var n,s=(n-1)*t,i=Math.floor(s),o=gD(sR(e,i).subarray(0,i+1)),l=xD(e.subarray(i+1));return o+(l-o)*(s-i)}}function JY(e,t,r=aR){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function QY(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function hi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Go(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const hN=Symbol("implicit");function mk(){var e=new mD,t=[],r=[],n=hN;function s(i){let o=e.get(i);if(o===void 0){if(n!==hN)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new mD;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return mk(t,r).unknown(n)},hi.apply(s,arguments),s}function x0(){var e=mk().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,d=0,u=0,f=.5;delete e.unknown;function m(){var p=t().length,g=s<n,b=g?s:n,y=g?n:s;i=(y-b)/Math.max(1,p-d+u*2),l&&(i=Math.floor(i)),b+=(y-b-i*(p-d))*f,o=i*(1-d),l&&(b=Math.round(b),o=Math.round(o));var v=QY(p).map(function(k){return b+i*k});return r(g?v.reverse():v)}return e.domain=function(p){return arguments.length?(t(p),m()):t()},e.range=function(p){return arguments.length?([n,s]=p,n=+n,s=+s,m()):[n,s]},e.rangeRound=function(p){return[n,s]=p,n=+n,s=+s,l=!0,m()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,m()):l},e.padding=function(p){return arguments.length?(d=Math.min(1,u=+p),m()):d},e.paddingInner=function(p){return arguments.length?(d=Math.min(1,p),m()):d},e.paddingOuter=function(p){return arguments.length?(u=+p,m()):u},e.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),m()):f},e.copy=function(){return x0(t(),[n,s]).round(l).paddingInner(d).paddingOuter(u).align(f)},hi.apply(m(),arguments)}function iR(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return iR(t())},e}function Bh(){return iR(x0.apply(null,arguments).paddingInner(1))}function pk(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function oR(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function uf(){}var y0=.7,vp=1/y0,Ud="\\s*([+-]?\\d+)\\s*",v0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ji="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ZY=/^#([0-9a-f]{3,8})$/,eX=new RegExp(`^rgb\\(${Ud},${Ud},${Ud}\\)$`),tX=new RegExp(`^rgb\\(${Ji},${Ji},${Ji}\\)$`),rX=new RegExp(`^rgba\\(${Ud},${Ud},${Ud},${v0}\\)$`),aX=new RegExp(`^rgba\\(${Ji},${Ji},${Ji},${v0}\\)$`),nX=new RegExp(`^hsl\\(${v0},${Ji},${Ji}\\)$`),sX=new RegExp(`^hsla\\(${v0},${Ji},${Ji},${v0}\\)$`),yD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pk(uf,b0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vD,formatHex:vD,formatHex8:iX,formatHsl:oX,formatRgb:bD,toString:bD});function vD(){return this.rgb().formatHex()}function iX(){return this.rgb().formatHex8()}function oX(){return lR(this).formatHsl()}function bD(){return this.rgb().formatRgb()}function b0(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ZY.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?wD(t):r===3?new js(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Am(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Am(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=eX.exec(e))?new js(t[1],t[2],t[3],1):(t=tX.exec(e))?new js(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=rX.exec(e))?Am(t[1],t[2],t[3],t[4]):(t=aX.exec(e))?Am(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=nX.exec(e))?kD(t[1],t[2]/100,t[3]/100,1):(t=sX.exec(e))?kD(t[1],t[2]/100,t[3]/100,t[4]):yD.hasOwnProperty(e)?wD(yD[e]):e==="transparent"?new js(NaN,NaN,NaN,0):null}function wD(e){return new js(e>>16&255,e>>8&255,e&255,1)}function Am(e,t,r,n){return n<=0&&(e=t=r=NaN),new js(e,t,r,n)}function lX(e){return e instanceof uf||(e=b0(e)),e?(e=e.rgb(),new js(e.r,e.g,e.b,e.opacity)):new js}function fN(e,t,r,n){return arguments.length===1?lX(e):new js(e,t,r,n??1)}function js(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}pk(js,fN,oR(uf,{brighter(e){return e=e==null?vp:Math.pow(vp,e),new js(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?y0:Math.pow(y0,e),new js(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new js(xc(this.r),xc(this.g),xc(this.b),bp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jD,formatHex:jD,formatHex8:cX,formatRgb:ND,toString:ND}));function jD(){return`#${hc(this.r)}${hc(this.g)}${hc(this.b)}`}function cX(){return`#${hc(this.r)}${hc(this.g)}${hc(this.b)}${hc((isNaN(this.opacity)?1:this.opacity)*255)}`}function ND(){const e=bp(this.opacity);return`${e===1?"rgb(":"rgba("}${xc(this.r)}, ${xc(this.g)}, ${xc(this.b)}${e===1?")":`, ${e})`}`}function bp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hc(e){return e=xc(e),(e<16?"0":"")+e.toString(16)}function kD(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Oi(e,t,r,n)}function lR(e){if(e instanceof Oi)return new Oi(e.h,e.s,e.l,e.opacity);if(e instanceof uf||(e=b0(e)),!e)return new Oi;if(e instanceof Oi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,d=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=d<.5?i+s:2-i-s,o*=60):l=d>0&&d<1?0:o,new Oi(o,l,d,e.opacity)}function dX(e,t,r,n){return arguments.length===1?lR(e):new Oi(e,t,r,n??1)}function Oi(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}pk(Oi,dX,oR(uf,{brighter(e){return e=e==null?vp:Math.pow(vp,e),new Oi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?y0:Math.pow(y0,e),new Oi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new js(m1(e>=240?e-240:e+120,s,n),m1(e,s,n),m1(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Oi(SD(this.h),Tm(this.s),Tm(this.l),bp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=bp(this.opacity);return`${e===1?"hsl(":"hsla("}${SD(this.h)}, ${Tm(this.s)*100}%, ${Tm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function SD(e){return e=(e||0)%360,e<0?e+360:e}function Tm(e){return Math.max(0,Math.min(1,e||0))}function m1(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const gk=e=>()=>e;function uX(e,t){return function(r){return e+r*t}}function hX(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function fX(e){return(e=+e)==1?cR:function(t,r){return r-t?hX(t,r,e):gk(isNaN(t)?r:t)}}function cR(e,t){var r=t-e;return r?uX(e,r):gk(isNaN(e)?t:e)}const _D=(function e(t){var r=fX(t);function n(s,i){var o=r((s=fN(s)).r,(i=fN(i)).r),l=r(s.g,i.g),d=r(s.b,i.b),u=cR(s.opacity,i.opacity);return function(f){return s.r=o(f),s.g=l(f),s.b=d(f),s.opacity=u(f),s+""}}return n.gamma=e,n})(1);function mX(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function pX(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function gX(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Au(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function xX(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function wp(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function yX(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Au(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var mN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,p1=new RegExp(mN.source,"g");function vX(e){return function(){return e}}function bX(e){return function(t){return e(t)+""}}function wX(e,t){var r=mN.lastIndex=p1.lastIndex=0,n,s,i,o=-1,l=[],d=[];for(e=e+"",t=t+"";(n=mN.exec(e))&&(s=p1.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,d.push({i:o,x:wp(n,s)})),r=p1.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?d[0]?bX(d[0].x):vX(t):(t=d.length,function(u){for(var f=0,m;f<t;++f)l[(m=d[f]).i]=m.x(u);return l.join("")})}function Au(e,t){var r=typeof t,n;return t==null||r==="boolean"?gk(t):(r==="number"?wp:r==="string"?(n=b0(t))?(t=n,_D):wX:t instanceof b0?_D:t instanceof Date?xX:pX(t)?mX:Array.isArray(t)?gX:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?yX:wp)(e,t)}function xk(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function jX(e,t){t===void 0&&(t=e,e=Au);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function NX(e){return function(){return e}}function jp(e){return+e}var ED=[0,1];function cs(e){return e}function pN(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:NX(isNaN(t)?NaN:.5)}function kX(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function SX(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=pN(s,n),i=r(o,i)):(n=pN(n,s),i=r(i,o)),function(l){return i(n(l))}}function _X(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=pN(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var d=df(e,l,1,n)-1;return i[d](s[d](l))}}function hf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Yg(){var e=ED,t=ED,r=Au,n,s,i,o=cs,l,d,u;function f(){var p=Math.min(e.length,t.length);return o!==cs&&(o=kX(e[0],e[p-1])),l=p>2?_X:SX,d=u=null,m}function m(p){return p==null||isNaN(p=+p)?i:(d||(d=l(e.map(n),t,r)))(n(o(p)))}return m.invert=function(p){return o(s((u||(u=l(t,e.map(n),wp)))(p)))},m.domain=function(p){return arguments.length?(e=Array.from(p,jp),f()):e.slice()},m.range=function(p){return arguments.length?(t=Array.from(p),f()):t.slice()},m.rangeRound=function(p){return t=Array.from(p),r=xk,f()},m.clamp=function(p){return arguments.length?(o=p?!0:cs,f()):o!==cs},m.interpolate=function(p){return arguments.length?(r=p,f()):r},m.unknown=function(p){return arguments.length?(i=p,m):i},function(p,g){return n=p,s=g,f()}}function yk(){return Yg()(cs,cs)}function EX(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Np(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Qd(e){return e=Np(Math.abs(e)),e?e[1]:NaN}function CX(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],d=0;s>0&&l>0&&(d+l+1>n&&(l=Math.max(1,n-d)),i.push(r.substring(s-=l,s+l)),!((d+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function AX(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var TX=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function w0(e){if(!(t=TX.exec(e)))throw new Error("invalid format: "+e);var t;return new vk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}w0.prototype=vk.prototype;function vk(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}vk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function DX(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var kp;function OX(e,t){var r=Np(e,t);if(!r)return kp=void 0,e.toPrecision(t);var n=r[0],s=r[1],i=s-(kp=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Np(e,Math.max(0,t+i-1))[0]}function CD(e,t){var r=Np(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const AD={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:EX,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>CD(e*100,t),r:CD,s:OX,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function TD(e){return e}var DD=Array.prototype.map,OD=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function PX(e){var t=e.grouping===void 0||e.thousands===void 0?TD:CX(DD.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?TD:AX(DD.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function u(m,p){m=w0(m);var g=m.fill,b=m.align,y=m.sign,v=m.symbol,k=m.zero,S=m.width,w=m.comma,A=m.precision,C=m.trim,N=m.type;N==="n"?(w=!0,N="g"):AD[N]||(A===void 0&&(A=12),C=!0,N="g"),(k||g==="0"&&b==="=")&&(k=!0,g="0",b="=");var E=(p&&p.prefix!==void 0?p.prefix:"")+(v==="$"?r:v==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():""),_=(v==="$"?n:/[%p]/.test(N)?o:"")+(p&&p.suffix!==void 0?p.suffix:""),O=AD[N],B=/[defgprs%]/.test(N);A=A===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function F(D){var H=E,ne=_,W,ee,re;if(N==="c")ne=O(D)+ne,D="";else{D=+D;var Q=D<0||1/D<0;if(D=isNaN(D)?d:O(Math.abs(D),A),C&&(D=DX(D)),Q&&+D==0&&y!=="+"&&(Q=!1),H=(Q?y==="("?y:l:y==="-"||y==="("?"":y)+H,ne=(N==="s"&&!isNaN(D)&&kp!==void 0?OD[8+kp/3]:"")+ne+(Q&&y==="("?")":""),B){for(W=-1,ee=D.length;++W<ee;)if(re=D.charCodeAt(W),48>re||re>57){ne=(re===46?s+D.slice(W+1):D.slice(W))+ne,D=D.slice(0,W);break}}}w&&!k&&(D=t(D,1/0));var R=H.length+D.length+ne.length,X=R<S?new Array(S-R+1).join(g):"";switch(w&&k&&(D=t(X+D,X.length?S-ne.length:1/0),X=""),b){case"<":D=H+D+ne+X;break;case"=":D=H+X+D+ne;break;case"^":D=X.slice(0,R=X.length>>1)+H+D+ne+X.slice(R);break;default:D=X+H+D+ne;break}return i(D)}return F.toString=function(){return m+""},F}function f(m,p){var g=Math.max(-8,Math.min(8,Math.floor(Qd(p)/3)))*3,b=Math.pow(10,-g),y=u((m=w0(m),m.type="f",m),{suffix:OD[8+g/3]});return function(v){return y(b*v)}}return{format:u,formatPrefix:f}}var Dm,bk,dR;IX({thousands:",",grouping:[3],currency:["$",""]});function IX(e){return Dm=PX(e),bk=Dm.format,dR=Dm.formatPrefix,Dm}function MX(e){return Math.max(0,-Qd(Math.abs(e)))}function RX(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qd(t)/3)))*3-Qd(Math.abs(e)))}function FX(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Qd(t)-Qd(e))+1}function uR(e,t,r,n){var s=uN(e,t,r),i;switch(n=w0(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=RX(s,o))&&(n.precision=i),dR(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=FX(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=MX(s))&&(n.precision=i-(n.type==="%")*2);break}}return bk(n)}function Ol(e){var t=e.domain;return e.ticks=function(r){var n=t();return cN(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return uR(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],d,u,f=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);f-- >0;){if(u=dN(o,l,r),u===d)return n[s]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;d=u}return e},e}function Sp(){var e=yk();return e.copy=function(){return hf(e,Sp())},hi.apply(e,arguments),Ol(e)}function hR(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,jp),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return hR(e).unknown(t)},e=arguments.length?Array.from(e,jp):[0,1],Ol(r)}function fR(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function PD(e){return Math.log(e)}function ID(e){return Math.exp(e)}function $X(e){return-Math.log(-e)}function LX(e){return-Math.exp(-e)}function BX(e){return isFinite(e)?+("1e"+e):e<0?0:e}function UX(e){return e===10?BX:e===Math.E?Math.exp:t=>Math.pow(e,t)}function HX(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function MD(e){return(t,r)=>-e(-t,r)}function wk(e){const t=e(PD,ID),r=t.domain;let n=10,s,i;function o(){return s=HX(n),i=UX(n),r()[0]<0?(s=MD(s),i=MD(i),e($X,LX)):e(PD,ID),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const d=r();let u=d[0],f=d[d.length-1];const m=f<u;m&&([u,f]=[f,u]);let p=s(u),g=s(f),b,y;const v=l==null?10:+l;let k=[];if(!(n%1)&&g-p<v){if(p=Math.floor(p),g=Math.ceil(g),u>0){for(;p<=g;++p)for(b=1;b<n;++b)if(y=p<0?b/i(-p):b*i(p),!(y<u)){if(y>f)break;k.push(y)}}else for(;p<=g;++p)for(b=n-1;b>=1;--b)if(y=p>0?b/i(-p):b*i(p),!(y<u)){if(y>f)break;k.push(y)}k.length*2<v&&(k=cN(u,f,v))}else k=cN(p,g,Math.min(g-p,v)).map(i);return m?k.reverse():k},t.tickFormat=(l,d)=>{if(l==null&&(l=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=w0(d)).precision==null&&(d.trim=!0),d=bk(d)),l===1/0)return d;const u=Math.max(1,n*l/t.ticks().length);return f=>{let m=f/i(Math.round(s(f)));return m*n<n-.5&&(m*=n),m<=u?d(f):""}},t.nice=()=>r(fR(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function mR(){const e=wk(Yg()).domain([1,10]);return e.copy=()=>hf(e,mR()).base(e.base()),hi.apply(e,arguments),e}function RD(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function FD(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function jk(e){var t=1,r=e(RD(t),FD(t));return r.constant=function(n){return arguments.length?e(RD(t=+n),FD(t)):t},Ol(r)}function pR(){var e=jk(Yg());return e.copy=function(){return hf(e,pR()).constant(e.constant())},hi.apply(e,arguments)}function $D(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function qX(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function WX(e){return e<0?-e*e:e*e}function Nk(e){var t=e(cs,cs),r=1;function n(){return r===1?e(cs,cs):r===.5?e(qX,WX):e($D(r),$D(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Ol(t)}function kk(){var e=Nk(Yg());return e.copy=function(){return hf(e,kk()).exponent(e.exponent())},hi.apply(e,arguments),e}function zX(){return kk.apply(null,arguments).exponent(.5)}function LD(e){return Math.sign(e)*e*e}function KX(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function gR(){var e=yk(),t=[0,1],r=!1,n;function s(i){var o=KX(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(LD(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,jp)).map(LD)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return gR(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},hi.apply(s,arguments),Ol(s)}function xR(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=JY(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[df(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Sl),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return xR().domain(e).range(t).unknown(n)},hi.apply(i,arguments)}function yR(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(d){return d!=null&&d<=d?s[df(n,d,0,r)]:i}function l(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return o}return o.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,l()):[e,t]},o.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,l()):s.slice()},o.invertExtent=function(d){var u=s.indexOf(d);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return yR().domain([e,t]).range(s).unknown(i)},hi.apply(Ol(o),arguments)}function vR(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[df(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return vR().domain(e).range(t).unknown(r)},hi.apply(s,arguments)}const g1=new Date,x1=new Date;function gn(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const d=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return d;let u;do d.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return d},s.filter=i=>gn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(g1.setTime(+i),x1.setTime(+o),e(g1),e(x1),Math.floor(r(g1,x1))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const _p=gn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);_p.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?gn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):_p);_p.range;const Ao=1e3,ci=Ao*60,To=ci*60,Bo=To*24,Sk=Bo*7,BD=Bo*30,y1=Bo*365,fc=gn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ao)},(e,t)=>(t-e)/Ao,e=>e.getUTCSeconds());fc.range;const _k=gn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ao)},(e,t)=>{e.setTime(+e+t*ci)},(e,t)=>(t-e)/ci,e=>e.getMinutes());_k.range;const Ek=gn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ci)},(e,t)=>(t-e)/ci,e=>e.getUTCMinutes());Ek.range;const Ck=gn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ao-e.getMinutes()*ci)},(e,t)=>{e.setTime(+e+t*To)},(e,t)=>(t-e)/To,e=>e.getHours());Ck.range;const Ak=gn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*To)},(e,t)=>(t-e)/To,e=>e.getUTCHours());Ak.range;const ff=gn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ci)/Bo,e=>e.getDate()-1);ff.range;const Xg=gn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Bo,e=>e.getUTCDate()-1);Xg.range;const bR=gn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Bo,e=>Math.floor(e/Bo));bR.range;function Fc(e){return gn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ci)/Sk)}const Jg=Fc(0),Ep=Fc(1),VX=Fc(2),GX=Fc(3),Zd=Fc(4),YX=Fc(5),XX=Fc(6);Jg.range;Ep.range;VX.range;GX.range;Zd.range;YX.range;XX.range;function $c(e){return gn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Sk)}const Qg=$c(0),Cp=$c(1),JX=$c(2),QX=$c(3),eu=$c(4),ZX=$c(5),eJ=$c(6);Qg.range;Cp.range;JX.range;QX.range;eu.range;ZX.range;eJ.range;const Tk=gn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Tk.range;const Dk=gn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Dk.range;const Uo=gn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Uo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Uo.range;const Ho=gn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ho.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ho.range;function wR(e,t,r,n,s,i){const o=[[fc,1,Ao],[fc,5,5*Ao],[fc,15,15*Ao],[fc,30,30*Ao],[i,1,ci],[i,5,5*ci],[i,15,15*ci],[i,30,30*ci],[s,1,To],[s,3,3*To],[s,6,6*To],[s,12,12*To],[n,1,Bo],[n,2,2*Bo],[r,1,Sk],[t,1,BD],[t,3,3*BD],[e,1,y1]];function l(u,f,m){const p=f<u;p&&([u,f]=[f,u]);const g=m&&typeof m.range=="function"?m:d(u,f,m),b=g?g.range(u,+f+1):[];return p?b.reverse():b}function d(u,f,m){const p=Math.abs(f-u)/m,g=fk(([,,v])=>v).right(o,p);if(g===o.length)return e.every(uN(u/y1,f/y1,m));if(g===0)return _p.every(Math.max(uN(u,f,m),1));const[b,y]=o[p/o[g-1][2]<o[g][2]/p?g-1:g];return b.every(y)}return[l,d]}const[tJ,rJ]=wR(Ho,Dk,Qg,bR,Ak,Ek),[aJ,nJ]=wR(Uo,Tk,Jg,ff,Ck,_k);function v1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function b1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function yh(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function sJ(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,d=e.shortMonths,u=vh(s),f=bh(s),m=vh(i),p=bh(i),g=vh(o),b=bh(o),y=vh(l),v=bh(l),k=vh(d),S=bh(d),w={a:re,A:Q,b:R,B:X,c:null,d:KD,e:KD,f:CJ,g:$J,G:BJ,H:SJ,I:_J,j:EJ,L:jR,m:AJ,M:TJ,p:L,q:I,Q:YD,s:XD,S:DJ,u:OJ,U:PJ,V:IJ,w:MJ,W:RJ,x:null,X:null,y:FJ,Y:LJ,Z:UJ,"%":GD},A={a:G,A:V,b:Z,B:ve,c:null,d:VD,e:VD,f:zJ,g:tQ,G:aQ,H:HJ,I:qJ,j:WJ,L:kR,m:KJ,M:VJ,p:Ee,q:Te,Q:YD,s:XD,S:GJ,u:YJ,U:XJ,V:JJ,w:QJ,W:ZJ,x:null,X:null,y:eQ,Y:rQ,Z:nQ,"%":GD},C={a:B,A:F,b:D,B:H,c:ne,d:WD,e:WD,f:wJ,g:qD,G:HD,H:zD,I:zD,j:xJ,L:bJ,m:gJ,M:yJ,p:O,q:pJ,Q:NJ,s:kJ,S:vJ,u:dJ,U:uJ,V:hJ,w:cJ,W:fJ,x:W,X:ee,y:qD,Y:HD,Z:mJ,"%":jJ};w.x=N(r,w),w.X=N(n,w),w.c=N(t,w),A.x=N(r,A),A.X=N(n,A),A.c=N(t,A);function N(ue,ge){return function(Fe){var J=[],Ze=-1,rt=0,Tt=ue.length,ze,Re,Ce;for(Fe instanceof Date||(Fe=new Date(+Fe));++Ze<Tt;)ue.charCodeAt(Ze)===37&&(J.push(ue.slice(rt,Ze)),(Re=UD[ze=ue.charAt(++Ze)])!=null?ze=ue.charAt(++Ze):Re=ze==="e"?" ":"0",(Ce=ge[ze])&&(ze=Ce(Fe,Re)),J.push(ze),rt=Ze+1);return J.push(ue.slice(rt,Ze)),J.join("")}}function E(ue,ge){return function(Fe){var J=yh(1900,void 0,1),Ze=_(J,ue,Fe+="",0),rt,Tt;if(Ze!=Fe.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if(ge&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(rt=b1(yh(J.y,0,1)),Tt=rt.getUTCDay(),rt=Tt>4||Tt===0?Cp.ceil(rt):Cp(rt),rt=Xg.offset(rt,(J.V-1)*7),J.y=rt.getUTCFullYear(),J.m=rt.getUTCMonth(),J.d=rt.getUTCDate()+(J.w+6)%7):(rt=v1(yh(J.y,0,1)),Tt=rt.getDay(),rt=Tt>4||Tt===0?Ep.ceil(rt):Ep(rt),rt=ff.offset(rt,(J.V-1)*7),J.y=rt.getFullYear(),J.m=rt.getMonth(),J.d=rt.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),Tt="Z"in J?b1(yh(J.y,0,1)).getUTCDay():v1(yh(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(Tt+5)%7:J.w+J.U*7-(Tt+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,b1(J)):v1(J)}}function _(ue,ge,Fe,J){for(var Ze=0,rt=ge.length,Tt=Fe.length,ze,Re;Ze<rt;){if(J>=Tt)return-1;if(ze=ge.charCodeAt(Ze++),ze===37){if(ze=ge.charAt(Ze++),Re=C[ze in UD?ge.charAt(Ze++):ze],!Re||(J=Re(ue,Fe,J))<0)return-1}else if(ze!=Fe.charCodeAt(J++))return-1}return J}function O(ue,ge,Fe){var J=u.exec(ge.slice(Fe));return J?(ue.p=f.get(J[0].toLowerCase()),Fe+J[0].length):-1}function B(ue,ge,Fe){var J=g.exec(ge.slice(Fe));return J?(ue.w=b.get(J[0].toLowerCase()),Fe+J[0].length):-1}function F(ue,ge,Fe){var J=m.exec(ge.slice(Fe));return J?(ue.w=p.get(J[0].toLowerCase()),Fe+J[0].length):-1}function D(ue,ge,Fe){var J=k.exec(ge.slice(Fe));return J?(ue.m=S.get(J[0].toLowerCase()),Fe+J[0].length):-1}function H(ue,ge,Fe){var J=y.exec(ge.slice(Fe));return J?(ue.m=v.get(J[0].toLowerCase()),Fe+J[0].length):-1}function ne(ue,ge,Fe){return _(ue,t,ge,Fe)}function W(ue,ge,Fe){return _(ue,r,ge,Fe)}function ee(ue,ge,Fe){return _(ue,n,ge,Fe)}function re(ue){return o[ue.getDay()]}function Q(ue){return i[ue.getDay()]}function R(ue){return d[ue.getMonth()]}function X(ue){return l[ue.getMonth()]}function L(ue){return s[+(ue.getHours()>=12)]}function I(ue){return 1+~~(ue.getMonth()/3)}function G(ue){return o[ue.getUTCDay()]}function V(ue){return i[ue.getUTCDay()]}function Z(ue){return d[ue.getUTCMonth()]}function ve(ue){return l[ue.getUTCMonth()]}function Ee(ue){return s[+(ue.getUTCHours()>=12)]}function Te(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var ge=N(ue+="",w);return ge.toString=function(){return ue},ge},parse:function(ue){var ge=E(ue+="",!1);return ge.toString=function(){return ue},ge},utcFormat:function(ue){var ge=N(ue+="",A);return ge.toString=function(){return ue},ge},utcParse:function(ue){var ge=E(ue+="",!0);return ge.toString=function(){return ue},ge}}}var UD={"-":"",_:" ",0:"0"},Sn=/^\s*\d+/,iJ=/^%/,oJ=/[\\^$*+?|[\]().{}]/g;function Qr(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function lJ(e){return e.replace(oJ,"\\$&")}function vh(e){return new RegExp("^(?:"+e.map(lJ).join("|")+")","i")}function bh(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function cJ(e,t,r){var n=Sn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function dJ(e,t,r){var n=Sn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function uJ(e,t,r){var n=Sn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function hJ(e,t,r){var n=Sn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function fJ(e,t,r){var n=Sn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function HD(e,t,r){var n=Sn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function qD(e,t,r){var n=Sn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function mJ(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function pJ(e,t,r){var n=Sn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function gJ(e,t,r){var n=Sn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function WD(e,t,r){var n=Sn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function xJ(e,t,r){var n=Sn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function zD(e,t,r){var n=Sn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function yJ(e,t,r){var n=Sn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function vJ(e,t,r){var n=Sn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function bJ(e,t,r){var n=Sn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function wJ(e,t,r){var n=Sn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function jJ(e,t,r){var n=iJ.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function NJ(e,t,r){var n=Sn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function kJ(e,t,r){var n=Sn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function KD(e,t){return Qr(e.getDate(),t,2)}function SJ(e,t){return Qr(e.getHours(),t,2)}function _J(e,t){return Qr(e.getHours()%12||12,t,2)}function EJ(e,t){return Qr(1+ff.count(Uo(e),e),t,3)}function jR(e,t){return Qr(e.getMilliseconds(),t,3)}function CJ(e,t){return jR(e,t)+"000"}function AJ(e,t){return Qr(e.getMonth()+1,t,2)}function TJ(e,t){return Qr(e.getMinutes(),t,2)}function DJ(e,t){return Qr(e.getSeconds(),t,2)}function OJ(e){var t=e.getDay();return t===0?7:t}function PJ(e,t){return Qr(Jg.count(Uo(e)-1,e),t,2)}function NR(e){var t=e.getDay();return t>=4||t===0?Zd(e):Zd.ceil(e)}function IJ(e,t){return e=NR(e),Qr(Zd.count(Uo(e),e)+(Uo(e).getDay()===4),t,2)}function MJ(e){return e.getDay()}function RJ(e,t){return Qr(Ep.count(Uo(e)-1,e),t,2)}function FJ(e,t){return Qr(e.getFullYear()%100,t,2)}function $J(e,t){return e=NR(e),Qr(e.getFullYear()%100,t,2)}function LJ(e,t){return Qr(e.getFullYear()%1e4,t,4)}function BJ(e,t){var r=e.getDay();return e=r>=4||r===0?Zd(e):Zd.ceil(e),Qr(e.getFullYear()%1e4,t,4)}function UJ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Qr(t/60|0,"0",2)+Qr(t%60,"0",2)}function VD(e,t){return Qr(e.getUTCDate(),t,2)}function HJ(e,t){return Qr(e.getUTCHours(),t,2)}function qJ(e,t){return Qr(e.getUTCHours()%12||12,t,2)}function WJ(e,t){return Qr(1+Xg.count(Ho(e),e),t,3)}function kR(e,t){return Qr(e.getUTCMilliseconds(),t,3)}function zJ(e,t){return kR(e,t)+"000"}function KJ(e,t){return Qr(e.getUTCMonth()+1,t,2)}function VJ(e,t){return Qr(e.getUTCMinutes(),t,2)}function GJ(e,t){return Qr(e.getUTCSeconds(),t,2)}function YJ(e){var t=e.getUTCDay();return t===0?7:t}function XJ(e,t){return Qr(Qg.count(Ho(e)-1,e),t,2)}function SR(e){var t=e.getUTCDay();return t>=4||t===0?eu(e):eu.ceil(e)}function JJ(e,t){return e=SR(e),Qr(eu.count(Ho(e),e)+(Ho(e).getUTCDay()===4),t,2)}function QJ(e){return e.getUTCDay()}function ZJ(e,t){return Qr(Cp.count(Ho(e)-1,e),t,2)}function eQ(e,t){return Qr(e.getUTCFullYear()%100,t,2)}function tQ(e,t){return e=SR(e),Qr(e.getUTCFullYear()%100,t,2)}function rQ(e,t){return Qr(e.getUTCFullYear()%1e4,t,4)}function aQ(e,t){var r=e.getUTCDay();return e=r>=4||r===0?eu(e):eu.ceil(e),Qr(e.getUTCFullYear()%1e4,t,4)}function nQ(){return"+0000"}function GD(){return"%"}function YD(e){return+e}function XD(e){return Math.floor(+e/1e3)}var bd,_R,ER;sQ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function sQ(e){return bd=sJ(e),_R=bd.format,bd.parse,ER=bd.utcFormat,bd.utcParse,bd}function iQ(e){return new Date(e)}function oQ(e){return e instanceof Date?+e:+new Date(+e)}function Ok(e,t,r,n,s,i,o,l,d,u){var f=yk(),m=f.invert,p=f.domain,g=u(".%L"),b=u(":%S"),y=u("%I:%M"),v=u("%I %p"),k=u("%a %d"),S=u("%b %d"),w=u("%B"),A=u("%Y");function C(N){return(d(N)<N?g:l(N)<N?b:o(N)<N?y:i(N)<N?v:n(N)<N?s(N)<N?k:S:r(N)<N?w:A)(N)}return f.invert=function(N){return new Date(m(N))},f.domain=function(N){return arguments.length?p(Array.from(N,oQ)):p().map(iQ)},f.ticks=function(N){var E=p();return e(E[0],E[E.length-1],N??10)},f.tickFormat=function(N,E){return E==null?C:u(E)},f.nice=function(N){var E=p();return(!N||typeof N.range!="function")&&(N=t(E[0],E[E.length-1],N??10)),N?p(fR(E,N)):f},f.copy=function(){return hf(f,Ok(e,t,r,n,s,i,o,l,d,u))},f}function lQ(){return hi.apply(Ok(aJ,nJ,Uo,Tk,Jg,ff,Ck,_k,fc,_R).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cQ(){return hi.apply(Ok(tJ,rJ,Ho,Dk,Qg,Xg,Ak,Ek,fc,ER).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Zg(){var e=0,t=1,r,n,s,i,o=cs,l=!1,d;function u(m){return m==null||isNaN(m=+m)?d:o(s===0?.5:(m=(i(m)-r)*s,l?Math.max(0,Math.min(1,m)):m))}u.domain=function(m){return arguments.length?([e,t]=m,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(m){return arguments.length?(l=!!m,u):l},u.interpolator=function(m){return arguments.length?(o=m,u):o};function f(m){return function(p){var g,b;return arguments.length?([g,b]=p,o=m(g,b),u):[o(0),o(1)]}}return u.range=f(Au),u.rangeRound=f(xk),u.unknown=function(m){return arguments.length?(d=m,u):d},function(m){return i=m,r=m(e),n=m(t),s=r===n?0:1/(n-r),u}}function Pl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function CR(){var e=Ol(Zg()(cs));return e.copy=function(){return Pl(e,CR())},Go.apply(e,arguments)}function AR(){var e=wk(Zg()).domain([1,10]);return e.copy=function(){return Pl(e,AR()).base(e.base())},Go.apply(e,arguments)}function TR(){var e=jk(Zg());return e.copy=function(){return Pl(e,TR()).constant(e.constant())},Go.apply(e,arguments)}function Pk(){var e=Nk(Zg());return e.copy=function(){return Pl(e,Pk()).exponent(e.exponent())},Go.apply(e,arguments)}function dQ(){return Pk.apply(null,arguments).exponent(.5)}function DR(){var e=[],t=cs;function r(n){if(n!=null&&!isNaN(n=+n))return t((df(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Sl),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>XY(e,i/n))},r.copy=function(){return DR(t).domain(e)},Go.apply(r,arguments)}function ex(){var e=0,t=.5,r=1,n=1,s,i,o,l,d,u=cs,f,m=!1,p;function g(y){return isNaN(y=+y)?p:(y=.5+((y=+f(y))-i)*(n*y<n*i?l:d),u(m?Math.max(0,Math.min(1,y)):y))}g.domain=function(y){return arguments.length?([e,t,r]=y,s=f(e=+e),i=f(t=+t),o=f(r=+r),l=s===i?0:.5/(i-s),d=i===o?0:.5/(o-i),n=i<s?-1:1,g):[e,t,r]},g.clamp=function(y){return arguments.length?(m=!!y,g):m},g.interpolator=function(y){return arguments.length?(u=y,g):u};function b(y){return function(v){var k,S,w;return arguments.length?([k,S,w]=v,u=jX(y,[k,S,w]),g):[u(0),u(.5),u(1)]}}return g.range=b(Au),g.rangeRound=b(xk),g.unknown=function(y){return arguments.length?(p=y,g):p},function(y){return f=y,s=y(e),i=y(t),o=y(r),l=s===i?0:.5/(i-s),d=i===o?0:.5/(o-i),n=i<s?-1:1,g}}function OR(){var e=Ol(ex()(cs));return e.copy=function(){return Pl(e,OR())},Go.apply(e,arguments)}function PR(){var e=wk(ex()).domain([.1,1,10]);return e.copy=function(){return Pl(e,PR()).base(e.base())},Go.apply(e,arguments)}function IR(){var e=jk(ex());return e.copy=function(){return Pl(e,IR()).constant(e.constant())},Go.apply(e,arguments)}function Ik(){var e=Nk(ex());return e.copy=function(){return Pl(e,Ik()).exponent(e.exponent())},Go.apply(e,arguments)}function uQ(){return Ik.apply(null,arguments).exponent(.5)}const JD=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:x0,scaleDiverging:OR,scaleDivergingLog:PR,scaleDivergingPow:Ik,scaleDivergingSqrt:uQ,scaleDivergingSymlog:IR,scaleIdentity:hR,scaleImplicit:hN,scaleLinear:Sp,scaleLog:mR,scaleOrdinal:mk,scalePoint:Bh,scalePow:kk,scaleQuantile:xR,scaleQuantize:yR,scaleRadial:gR,scaleSequential:CR,scaleSequentialLog:AR,scaleSequentialPow:Pk,scaleSequentialQuantile:DR,scaleSequentialSqrt:dQ,scaleSequentialSymlog:TR,scaleSqrt:zX,scaleSymlog:pR,scaleThreshold:vR,scaleTime:lQ,scaleUtc:cQ,tickFormat:uR},Symbol.toStringTag,{value:"Module"}));var w1,QD;function tx(){if(QD)return w1;QD=1;var e=Su();function t(r,n,s){for(var i=-1,o=r.length;++i<o;){var l=r[i],d=n(l);if(d!=null&&(u===void 0?d===d&&!e(d):s(d,u)))var u=d,f=l}return f}return w1=t,w1}var j1,ZD;function MR(){if(ZD)return j1;ZD=1;function e(t,r){return t>r}return j1=e,j1}var N1,e3;function hQ(){if(e3)return N1;e3=1;var e=tx(),t=MR(),r=Cu();function n(s){return s&&s.length?e(s,r,t):void 0}return N1=n,N1}var fQ=hQ();const rx=sa(fQ);var k1,t3;function RR(){if(t3)return k1;t3=1;function e(t,r){return t<r}return k1=e,k1}var S1,r3;function mQ(){if(r3)return S1;r3=1;var e=tx(),t=RR(),r=Cu();function n(s){return s&&s.length?e(s,r,t):void 0}return S1=n,S1}var pQ=mQ();const ax=sa(pQ);var _1,a3;function gQ(){if(a3)return _1;a3=1;var e=X2(),t=no(),r=zM(),n=_s();function s(i,o){var l=n(i)?e:r;return l(i,t(o,3))}return _1=s,_1}var E1,n3;function xQ(){if(n3)return E1;n3=1;var e=qM(),t=gQ();function r(n,s){return e(t(n,s),1)}return E1=r,E1}var yQ=xQ();const vQ=sa(yQ);var C1,s3;function bQ(){if(s3)return C1;s3=1;var e=ck();function t(r,n){return e(r,n)}return C1=t,C1}var wQ=bQ();const Tu=sa(wQ);var Du=1e9,jQ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Rk,Ta=!0,di="[DecimalError] ",yc=di+"Invalid argument: ",Mk=di+"Exponent out of range: ",Ou=Math.floor,nc=Math.pow,NQ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,$s,bn=1e7,ka=7,FR=9007199254740991,Ap=Ou(FR/ka),Bt={};Bt.absoluteValue=Bt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Bt.comparedTo=Bt.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Bt.decimalPlaces=Bt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*ka;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Bt.dividedBy=Bt.div=function(e){return Ro(this,new this.constructor(e))};Bt.dividedToIntegerBy=Bt.idiv=function(e){var t=this,r=t.constructor;return ma(Ro(t,new r(e),0,1),r.precision)};Bt.equals=Bt.eq=function(e){return!this.cmp(e)};Bt.exponent=function(){return an(this)};Bt.greaterThan=Bt.gt=function(e){return this.cmp(e)>0};Bt.greaterThanOrEqualTo=Bt.gte=function(e){return this.cmp(e)>=0};Bt.isInteger=Bt.isint=function(){return this.e>this.d.length-2};Bt.isNegative=Bt.isneg=function(){return this.s<0};Bt.isPositive=Bt.ispos=function(){return this.s>0};Bt.isZero=function(){return this.s===0};Bt.lessThan=Bt.lt=function(e){return this.cmp(e)<0};Bt.lessThanOrEqualTo=Bt.lte=function(e){return this.cmp(e)<1};Bt.logarithm=Bt.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq($s))throw Error(di+"NaN");if(r.s<1)throw Error(di+(r.s?"NaN":"-Infinity"));return r.eq($s)?new n(0):(Ta=!1,t=Ro(j0(r,i),j0(e,i),i),Ta=!0,ma(t,s))};Bt.minus=Bt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?BR(t,e):$R(t,(e.s=-e.s,e))};Bt.modulo=Bt.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(di+"NaN");return r.s?(Ta=!1,t=Ro(r,e,0,1).times(e),Ta=!0,r.minus(t)):ma(new n(r),s)};Bt.naturalExponential=Bt.exp=function(){return LR(this)};Bt.naturalLogarithm=Bt.ln=function(){return j0(this)};Bt.negated=Bt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Bt.plus=Bt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?$R(t,e):BR(t,(e.s=-e.s,e))};Bt.precision=Bt.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(yc+e);if(t=an(s)+1,n=s.d.length-1,r=n*ka+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Bt.squareRoot=Bt.sqrt=function(){var e,t,r,n,s,i,o,l=this,d=l.constructor;if(l.s<1){if(!l.s)return new d(0);throw Error(di+"NaN")}for(e=an(l),Ta=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Yi(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Ou((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=o=r+3;;)if(i=n,n=i.plus(Ro(l,i,o+2)).times(.5),Yi(i.d).slice(0,o)===(t=Yi(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(ma(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Ta=!0,ma(n,r)};Bt.times=Bt.mul=function(e){var t,r,n,s,i,o,l,d,u,f=this,m=f.constructor,p=f.d,g=(e=new m(e)).d;if(!f.s||!e.s)return new m(0);for(e.s*=f.s,r=f.e+e.e,d=p.length,u=g.length,d<u&&(i=p,p=g,g=i,o=d,d=u,u=o),i=[],o=d+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,s=d+n;s>n;)l=i[s]+g[n]*p[s-n-1]+t,i[s--]=l%bn|0,t=l/bn|0;i[s]=(i[s]+t)%bn|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Ta?ma(e,m.precision):e};Bt.toDecimalPlaces=Bt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(to(e,0,Du),t===void 0?t=n.rounding:to(t,0,8),ma(r,e+an(r)+1,t))};Bt.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Cc(n,!0):(to(e,0,Du),t===void 0?t=s.rounding:to(t,0,8),n=ma(new s(n),e+1,t),r=Cc(n,!0,e+1)),r};Bt.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Cc(s):(to(e,0,Du),t===void 0?t=i.rounding:to(t,0,8),n=ma(new i(s),e+an(s)+1,t),r=Cc(n.abs(),!1,e+an(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Bt.toInteger=Bt.toint=function(){var e=this,t=e.constructor;return ma(new t(e),an(e)+1,t.rounding)};Bt.toNumber=function(){return+this};Bt.toPower=Bt.pow=function(e){var t,r,n,s,i,o,l=this,d=l.constructor,u=12,f=+(e=new d(e));if(!e.s)return new d($s);if(l=new d(l),!l.s){if(e.s<1)throw Error(di+"Infinity");return l}if(l.eq($s))return l;if(n=d.precision,e.eq($s))return ma(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=f<0?-f:f)<=FR){for(s=new d($s),t=Math.ceil(n/ka+4),Ta=!1;r%2&&(s=s.times(l),o3(s.d,t)),r=Ou(r/2),r!==0;)l=l.times(l),o3(l.d,t);return Ta=!0,e.s<0?new d($s).div(s):ma(s,n)}}else if(i<0)throw Error(di+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Ta=!1,s=e.times(j0(l,n+u)),Ta=!0,s=LR(s),s.s=i,s};Bt.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=an(s),n=Cc(s,r<=i.toExpNeg||r>=i.toExpPos)):(to(e,1,Du),t===void 0?t=i.rounding:to(t,0,8),s=ma(new i(s),e,t),r=an(s),n=Cc(s,e<=r||r<=i.toExpNeg,e)),n};Bt.toSignificantDigits=Bt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(to(e,1,Du),t===void 0?t=n.rounding:to(t,0,8)),ma(new n(r),e,t)};Bt.toString=Bt.valueOf=Bt.val=Bt.toJSON=Bt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=an(e),r=e.constructor;return Cc(e,t<=r.toExpNeg||t>=r.toExpPos)};function $R(e,t){var r,n,s,i,o,l,d,u,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Ta?ma(t,m):t;if(d=e.d,u=t.d,o=e.e,s=t.e,d=d.slice(),i=o-s,i){for(i<0?(n=d,i=-i,l=u.length):(n=u,s=o,l=d.length),o=Math.ceil(m/ka),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=d.length,i=u.length,l-i<0&&(i=l,n=u,u=d,d=n),r=0;i;)r=(d[--i]=d[i]+u[i]+r)/bn|0,d[i]%=bn;for(r&&(d.unshift(r),++s),l=d.length;d[--l]==0;)d.pop();return t.d=d,t.e=s,Ta?ma(t,m):t}function to(e,t,r){if(e!==~~e||e<t||e>r)throw Error(yc+e)}function Yi(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=ka-n.length,r&&(i+=pl(r)),i+=n;o=e[t],n=o+"",r=ka-n.length,r&&(i+=pl(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ro=(function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%bn|0,o=i/bn|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,d;if(i!=o)d=i>o?1:-1;else for(l=d=0;l<i;l++)if(n[l]!=s[l]){d=n[l]>s[l]?1:-1;break}return d}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*bn+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,d,u,f,m,p,g,b,y,v,k,S,w,A,C,N,E,_,O=n.constructor,B=n.s==s.s?1:-1,F=n.d,D=s.d;if(!n.s)return new O(n);if(!s.s)throw Error(di+"Division by zero");for(d=n.e-s.e,E=D.length,C=F.length,g=new O(B),b=g.d=[],u=0;D[u]==(F[u]||0);)++u;if(D[u]>(F[u]||0)&&--d,i==null?S=i=O.precision:o?S=i+(an(n)-an(s))+1:S=i,S<0)return new O(0);if(S=S/ka+2|0,u=0,E==1)for(f=0,D=D[0],S++;(u<C||f)&&S--;u++)w=f*bn+(F[u]||0),b[u]=w/D|0,f=w%D|0;else{for(f=bn/(D[0]+1)|0,f>1&&(D=e(D,f),F=e(F,f),E=D.length,C=F.length),A=E,y=F.slice(0,E),v=y.length;v<E;)y[v++]=0;_=D.slice(),_.unshift(0),N=D[0],D[1]>=bn/2&&++N;do f=0,l=t(D,y,E,v),l<0?(k=y[0],E!=v&&(k=k*bn+(y[1]||0)),f=k/N|0,f>1?(f>=bn&&(f=bn-1),m=e(D,f),p=m.length,v=y.length,l=t(m,y,p,v),l==1&&(f--,r(m,E<p?_:D,p))):(f==0&&(l=f=1),m=D.slice()),p=m.length,p<v&&m.unshift(0),r(y,m,v),l==-1&&(v=y.length,l=t(D,y,E,v),l<1&&(f++,r(y,E<v?_:D,v))),v=y.length):l===0&&(f++,y=[0]),b[u++]=f,l&&y[0]?y[v++]=F[A]||0:(y=[F[A]],v=1);while((A++<C||y[0]!==void 0)&&S--)}return b[0]||b.shift(),g.e=d,ma(g,o?i+an(g)+1:i)}})();function LR(e,t){var r,n,s,i,o,l,d=0,u=0,f=e.constructor,m=f.precision;if(an(e)>16)throw Error(Mk+an(e));if(!e.s)return new f($s);for(Ta=!1,l=m,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(nc(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new f($s),f.precision=l;;){if(s=ma(s.times(e),l),r=r.times(++d),o=i.plus(Ro(s,r,l)),Yi(o.d).slice(0,l)===Yi(i.d).slice(0,l)){for(;u--;)i=ma(i.times(i),l);return f.precision=m,t==null?(Ta=!0,ma(i,m)):i}i=o}}function an(e){for(var t=e.e*ka,r=e.d[0];r>=10;r/=10)t++;return t}function A1(e,t,r){if(t>e.LN10.sd())throw Ta=!0,r&&(e.precision=r),Error(di+"LN10 precision limit exceeded");return ma(new e(e.LN10),t)}function pl(e){for(var t="";e--;)t+="0";return t}function j0(e,t){var r,n,s,i,o,l,d,u,f,m=1,p=10,g=e,b=g.d,y=g.constructor,v=y.precision;if(g.s<1)throw Error(di+(g.s?"NaN":"-Infinity"));if(g.eq($s))return new y(0);if(t==null?(Ta=!1,u=v):u=t,g.eq(10))return t==null&&(Ta=!0),A1(y,u);if(u+=p,y.precision=u,r=Yi(b),n=r.charAt(0),i=an(g),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(e),r=Yi(g.d),n=r.charAt(0),m++;i=an(g),n>1?(g=new y("0."+r),i++):g=new y(n+"."+r.slice(1))}else return d=A1(y,u+2,v).times(i+""),g=j0(new y(n+"."+r.slice(1)),u-p).plus(d),y.precision=v,t==null?(Ta=!0,ma(g,v)):g;for(l=o=g=Ro(g.minus($s),g.plus($s),u),f=ma(g.times(g),u),s=3;;){if(o=ma(o.times(f),u),d=l.plus(Ro(o,new y(s),u)),Yi(d.d).slice(0,u)===Yi(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(A1(y,u+2,v).times(i+""))),l=Ro(l,new y(m),u),y.precision=v,t==null?(Ta=!0,ma(l,v)):l;l=d,s+=2}}function i3(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Ou(r/ka),e.d=[],n=(r+1)%ka,r<0&&(n+=ka),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=ka;n<s;)e.d.push(+t.slice(n,n+=ka));t=t.slice(n),n=ka-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Ta&&(e.e>Ap||e.e<-Ap))throw Error(Mk+r)}else e.s=0,e.e=0,e.d=[0];return e}function ma(e,t,r){var n,s,i,o,l,d,u,f,m=e.d;for(o=1,i=m[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=ka,s=t,u=m[f=0];else{if(f=Math.ceil((n+1)/ka),i=m.length,f>=i)return e;for(u=i=m[f],o=1;i>=10;i/=10)o++;n%=ka,s=n-ka+o}if(r!==void 0&&(i=nc(10,o-s-1),l=u/i%10|0,d=t<0||m[f+1]!==void 0||u%i,d=r<4?(l||d)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||d||r==6&&(n>0?s>0?u/nc(10,o-s):0:m[f-1])%10&1||r==(e.s<0?8:7))),t<1||!m[0])return d?(i=an(e),m.length=1,t=t-i-1,m[0]=nc(10,(ka-t%ka)%ka),e.e=Ou(-t/ka)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(n==0?(m.length=f,i=1,f--):(m.length=f+1,i=nc(10,ka-n),m[f]=s>0?(u/nc(10,o-s)%nc(10,s)|0)*i:0),d)for(;;)if(f==0){(m[0]+=i)==bn&&(m[0]=1,++e.e);break}else{if(m[f]+=i,m[f]!=bn)break;m[f--]=0,i=1}for(n=m.length;m[--n]===0;)m.pop();if(Ta&&(e.e>Ap||e.e<-Ap))throw Error(Mk+an(e));return e}function BR(e,t){var r,n,s,i,o,l,d,u,f,m,p=e.constructor,g=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),Ta?ma(t,g):t;if(d=e.d,m=t.d,n=t.e,u=e.e,d=d.slice(),o=u-n,o){for(f=o<0,f?(r=d,o=-o,l=m.length):(r=m,n=u,l=d.length),s=Math.max(Math.ceil(g/ka),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=d.length,l=m.length,f=s<l,f&&(l=s),s=0;s<l;s++)if(d[s]!=m[s]){f=d[s]<m[s];break}o=0}for(f&&(r=d,d=m,m=r,t.s=-t.s),l=d.length,s=m.length-l;s>0;--s)d[l++]=0;for(s=m.length;s>o;){if(d[--s]<m[s]){for(i=s;i&&d[--i]===0;)d[i]=bn-1;--d[i],d[s]+=bn}d[s]-=m[s]}for(;d[--l]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,Ta?ma(t,g):t):new p(0)}function Cc(e,t,r){var n,s=an(e),i=Yi(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+pl(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+pl(-s-1)+i,r&&(n=r-o)>0&&(i+=pl(n))):s>=o?(i+=pl(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+pl(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=pl(n))),e.s<0?"-"+i:i}function o3(e,t){if(e.length>t)return e.length=t,!0}function UR(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(yc+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return i3(o,i.toString())}else if(typeof i!="string")throw Error(yc+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,NQ.test(i))i3(o,i);else throw Error(yc+i)}if(s.prototype=Bt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=UR,s.config=s.set=kQ,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function kQ(e){if(!e||typeof e!="object")throw Error(di+"Object expected");var t,r,n,s=["precision",1,Du,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Ou(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(yc+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(yc+r+": "+n);return this}var Rk=UR(jQ);$s=new Rk(1);const la=Rk;function SQ(e){return AQ(e)||CQ(e)||EQ(e)||_Q()}function _Q(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EQ(e,t){if(e){if(typeof e=="string")return gN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gN(e,t)}}function CQ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function AQ(e){if(Array.isArray(e))return gN(e)}function gN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var TQ=function(t){return t},HR={},qR=function(t){return t===HR},l3=function(t){return function r(){return arguments.length===0||arguments.length===1&&qR(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},DQ=function e(t,r){return t===1?r:l3(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==HR}).length;return o>=t?r.apply(void 0,s):e(t-o,l3(function(){for(var l=arguments.length,d=new Array(l),u=0;u<l;u++)d[u]=arguments[u];var f=s.map(function(m){return qR(m)?d.shift():m});return r.apply(void 0,SQ(f).concat(d))}))})},nx=function(t){return DQ(t.length,t)},xN=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},OQ=nx(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),PQ=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return TQ;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,d){return d(l)},i.apply(void 0,arguments))}},yN=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},WR=function(t){var r=null,n=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,d){return l===r[d]})||(r=i,n=t.apply(void 0,i)),n}};function IQ(e){var t;return e===0?t=1:t=Math.floor(new la(e).abs().log(10).toNumber())+1,t}function MQ(e,t,r){for(var n=new la(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var RQ=nx(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),FQ=nx(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),$Q=nx(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const sx={rangeStep:MQ,getDigitCount:IQ,interpolateNumber:RQ,uninterpolateNumber:FQ,uninterpolateTruncation:$Q};function vN(e){return UQ(e)||BQ(e)||zR(e)||LQ()}function LQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BQ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function UQ(e){if(Array.isArray(e))return bN(e)}function N0(e,t){return WQ(e)||qQ(e,t)||zR(e,t)||HQ()}function HQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zR(e,t){if(e){if(typeof e=="string")return bN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bN(e,t)}}function bN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qQ(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(d){s=!0,i=d}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function WQ(e){if(Array.isArray(e))return e}function KR(e){var t=N0(e,2),r=t[0],n=t[1],s=r,i=n;return r>n&&(s=n,i=r),[s,i]}function VR(e,t,r){if(e.lte(0))return new la(0);var n=sx.getDigitCount(e.toNumber()),s=new la(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new la(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=l.mul(s);return t?d:new la(Math.ceil(d))}function zQ(e,t,r){var n=1,s=new la(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new la(10).pow(sx.getDigitCount(e)-1),s=new la(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new la(Math.floor(e)))}else e===0?s=new la(Math.floor((t-1)/2)):r||(s=new la(Math.floor(e)));var o=Math.floor((t-1)/2),l=PQ(OQ(function(d){return s.add(new la(d-o).mul(n)).toNumber()}),xN);return l(0,t)}function GR(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new la(0),tickMin:new la(0),tickMax:new la(0)};var i=VR(new la(t).sub(e).div(r-1),n,s),o;e<=0&&t>=0?o=new la(0):(o=new la(e).add(t).div(2),o=o.sub(new la(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),d=Math.ceil(new la(t).sub(o).div(i).toNumber()),u=l+d+1;return u>r?GR(e,t,r,n,s+1):(u<r&&(d=t>0?d+(r-u):d,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new la(l).mul(i)),tickMax:o.add(new la(d).mul(i))})}function KQ(e){var t=N0(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=KR([r,n]),d=N0(l,2),u=d[0],f=d[1];if(u===-1/0||f===1/0){var m=f===1/0?[u].concat(vN(xN(0,s-1).map(function(){return 1/0}))):[].concat(vN(xN(0,s-1).map(function(){return-1/0})),[f]);return r>n?yN(m):m}if(u===f)return zQ(u,s,i);var p=GR(u,f,o,i),g=p.step,b=p.tickMin,y=p.tickMax,v=sx.rangeStep(b,y.add(new la(.1).mul(g)),g);return r>n?yN(v):v}function VQ(e,t){var r=N0(e,2),n=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=KR([n,s]),l=N0(o,2),d=l[0],u=l[1];if(d===-1/0||u===1/0)return[n,s];if(d===u)return[d];var f=Math.max(t,2),m=VR(new la(u).sub(d).div(f-1),i,0),p=[].concat(vN(sx.rangeStep(new la(d),new la(u).sub(new la(.99).mul(m)),m)),[u]);return n>s?yN(p):p}var GQ=WR(KQ),YQ=WR(VQ),XQ="Invariant failed";function Ac(e,t){throw new Error(XQ)}var JQ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function tu(e){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tu(e)}function Tp(){return Tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tp.apply(this,arguments)}function QQ(e,t){return rZ(e)||tZ(e,t)||eZ(e,t)||ZQ()}function ZQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eZ(e,t){if(e){if(typeof e=="string")return c3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c3(e,t)}}function c3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function rZ(e){if(Array.isArray(e))return e}function aZ(e,t){if(e==null)return{};var r=nZ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function nZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function sZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JR(n.key),n)}}function oZ(e,t,r){return t&&iZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lZ(e,t,r){return t=Dp(t),cZ(e,YR()?Reflect.construct(t,r||[],Dp(e).constructor):t.apply(e,r))}function cZ(e,t){if(t&&(tu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dZ(e)}function dZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YR=function(){return!!e})()}function Dp(e){return Dp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dp(e)}function uZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wN(e,t)}function wN(e,t){return wN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},wN(e,t)}function XR(e,t,r){return t=JR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JR(e){var t=hZ(e,"string");return tu(t)=="symbol"?t:t+""}function hZ(e,t){if(tu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mf=(function(e){function t(){return sZ(this,t),lZ(this,t,arguments)}return uZ(t,e),oZ(t,[{key:"render",value:function(){var n=this.props,s=n.offset,i=n.layout,o=n.width,l=n.dataKey,d=n.data,u=n.dataPointFormatter,f=n.xAxis,m=n.yAxis,p=aZ(n,JQ),g=Jt(p,!1);this.props.direction==="x"&&f.type!=="number"&&Ac();var b=d.map(function(y){var v=u(y,l),k=v.x,S=v.y,w=v.value,A=v.errorVal;if(!A)return null;var C=[],N,E;if(Array.isArray(A)){var _=QQ(A,2);N=_[0],E=_[1]}else N=E=A;if(i==="vertical"){var O=f.scale,B=S+s,F=B+o,D=B-o,H=O(w-N),ne=O(w+E);C.push({x1:ne,y1:F,x2:ne,y2:D}),C.push({x1:H,y1:B,x2:ne,y2:B}),C.push({x1:H,y1:F,x2:H,y2:D})}else if(i==="horizontal"){var W=m.scale,ee=k+s,re=ee-o,Q=ee+o,R=W(w-N),X=W(w+E);C.push({x1:re,y1:X,x2:Q,y2:X}),C.push({x1:ee,y1:R,x2:ee,y2:X}),C.push({x1:re,y1:R,x2:Q,y2:R})}return ke.createElement(qr,Tp({className:"recharts-errorBar",key:"bar-".concat(C.map(function(L){return"".concat(L.x1,"-").concat(L.x2,"-").concat(L.y1,"-").concat(L.y2)}))},g),C.map(function(L){return ke.createElement("line",Tp({},L,{key:"line-".concat(L.x1,"-").concat(L.x2,"-").concat(L.y1,"-").concat(L.y2)}))}))});return ke.createElement(qr,{className:"recharts-errorBars"},b)}}])})(ke.Component);XR(mf,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});XR(mf,"displayName","ErrorBar");function k0(e){"@babel/helpers - typeof";return k0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k0(e)}function d3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ql(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d3(Object(r),!0).forEach(function(n){fZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fZ(e,t,r){return t=mZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mZ(e){var t=pZ(e,"string");return k0(t)=="symbol"?t:t+""}function pZ(e,t){if(k0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(k0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QR=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=Is(r,Ss);if(!o)return null;var l=Ss.defaultProps,d=l!==void 0?Ql(Ql({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(f,m){var p=m.item,g=m.props,b=g.sectors||g.data||[];return f.concat(b.map(function(y){return{type:o.props.iconType||p.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):u=(n||[]).map(function(f){var m=f.item,p=m.type.defaultProps,g=p!==void 0?Ql(Ql({},p),m.props):{},b=g.dataKey,y=g.name,v=g.legendType,k=g.hide;return{inactive:k,dataKey:b,type:d.iconType||v||"square",color:Fk(m),value:y||b,payload:g}}),Ql(Ql(Ql({},d),Ss.getWithHeight(o,s)),{},{payload:u,item:o})};function S0(e){"@babel/helpers - typeof";return S0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S0(e)}function u3(e){return vZ(e)||yZ(e)||xZ(e)||gZ()}function gZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xZ(e,t){if(e){if(typeof e=="string")return jN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jN(e,t)}}function yZ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vZ(e){if(Array.isArray(e))return jN(e)}function jN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h3(Object(r),!0).forEach(function(n){Hd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hd(e,t,r){return t=bZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bZ(e){var t=wZ(e,"string");return S0(t)=="symbol"?t:t+""}function wZ(e,t){if(S0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(S0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function za(e,t,r){return wr(e)||wr(t)?r:fn(t)?Us(e,t,r):or(t)?t(e):r}function Uh(e,t,r,n){var s=vQ(e,function(l){return za(l,t)});if(r==="number"){var i=s.filter(function(l){return At(l)||parseFloat(l)});return i.length?[ax(i),rx(i)]:[1/0,-1/0]}var o=n?s.filter(function(l){return!wr(l)}):s;return o.map(function(l){return fn(l)||l instanceof Date?l:""})}var jZ=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,u=0;u<l;u++){var f=u>0?s[u-1].coordinate:s[l-1].coordinate,m=s[u].coordinate,p=u>=l-1?s[0].coordinate:s[u+1].coordinate,g=void 0;if(os(m-f)!==os(p-m)){var b=[];if(os(p-m)===os(d[1]-d[0])){g=p;var y=m+d[1]-d[0];b[0]=Math.min(y,(y+f)/2),b[1]=Math.max(y,(y+f)/2)}else{g=f;var v=p+d[1]-d[0];b[0]=Math.min(m,(v+m)/2),b[1]=Math.max(m,(v+m)/2)}var k=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(t>k[0]&&t<=k[1]||t>=b[0]&&t<=b[1]){o=s[u].index;break}}else{var S=Math.min(f,p),w=Math.max(f,p);if(t>(S+m)/2&&t<=(w+m)/2){o=s[u].index;break}}}else for(var A=0;A<l;A++)if(A===0&&t<=(n[A].coordinate+n[A+1].coordinate)/2||A>0&&A<l-1&&t>(n[A].coordinate+n[A-1].coordinate)/2&&t<=(n[A].coordinate+n[A+1].coordinate)/2||A===l-1&&t>(n[A].coordinate+n[A-1].coordinate)/2){o=n[A].index;break}return o},Fk=function(t){var r,n=t,s=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Fa(Fa({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,d;switch(s){case"Line":d=o;break;case"Area":case"Radar":d=o&&o!=="none"?o:l;break;default:d=l;break}return d},NZ=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),d=0,u=l.length;d<u;d++)for(var f=i[l[d]].stackGroups,m=Object.keys(f),p=0,g=m.length;p<g;p++){var b=f[m[p]],y=b.items,v=b.cateAxisId,k=y.filter(function(E){return Mo(E.type).indexOf("Bar")>=0});if(k&&k.length){var S=k[0].type.defaultProps,w=S!==void 0?Fa(Fa({},S),k[0].props):k[0].props,A=w.barSize,C=w[v];o[C]||(o[C]=[]);var N=wr(A)?r:A;o[C].push({item:k[0],stackList:k.slice(1),barSize:wr(N)?void 0:ls(N,n,0)})}}return o},kZ=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,d=o.length;if(d<1)return null;var u=ls(r,s,0,!0),f,m=[];if(o[0].barSize===+o[0].barSize){var p=!1,g=s/d,b=o.reduce(function(A,C){return A+C.barSize||0},0);b+=(d-1)*u,b>=s&&(b-=(d-1)*u,u=0),b>=s&&g>0&&(p=!0,g*=.9,b=d*g);var y=(s-b)/2>>0,v={offset:y-u,size:0};f=o.reduce(function(A,C){var N={item:C.item,position:{offset:v.offset+v.size+u,size:p?g:C.barSize}},E=[].concat(u3(A),[N]);return v=E[E.length-1].position,C.stackList&&C.stackList.length&&C.stackList.forEach(function(_){E.push({item:_,position:v})}),E},m)}else{var k=ls(n,s,0,!0);s-2*k-(d-1)*u<=0&&(u=0);var S=(s-2*k-(d-1)*u)/d;S>1&&(S>>=0);var w=l===+l?Math.min(S,l):S;f=o.reduce(function(A,C,N){var E=[].concat(u3(A),[{item:C.item,position:{offset:k+(S+u)*N+(S-w)/2,size:w}}]);return C.stackList&&C.stackList.length&&C.stackList.forEach(function(_){E.push({item:_,position:E[E.length-1].position})}),E},m)}return f},SZ=function(t,r,n,s){var i=n.children,o=n.width,l=n.margin,d=o-(l.left||0)-(l.right||0),u=QR({children:i,legendWidth:d});if(u){var f=s||{},m=f.width,p=f.height,g=u.align,b=u.verticalAlign,y=u.layout;if((y==="vertical"||y==="horizontal"&&b==="middle")&&g!=="center"&&At(t[g]))return Fa(Fa({},t),{},Hd({},g,t[g]+(m||0)));if((y==="horizontal"||y==="vertical"&&g==="center")&&b!=="middle"&&At(t[b]))return Fa(Fa({},t),{},Hd({},b,t[b]+(p||0)))}return t},_Z=function(t,r,n){return wr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},ZR=function(t,r,n,s,i){var o=r.props.children,l=Hs(o,mf).filter(function(u){return _Z(s,i,u.props.direction)});if(l&&l.length){var d=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var m=za(f,n);if(wr(m))return u;var p=Array.isArray(m)?[ax(m),rx(m)]:[m,m],g=d.reduce(function(b,y){var v=za(f,y,0),k=p[0]-Math.abs(Array.isArray(v)?v[0]:v),S=p[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(k,b[0]),Math.max(S,b[1])]},[1/0,-1/0]);return[Math.min(g[0],u[0]),Math.max(g[1],u[1])]},[1/0,-1/0])}return null},EZ=function(t,r,n,s,i){var o=r.map(function(l){return ZR(t,l,n,i,s)}).filter(function(l){return!wr(l)});return o&&o.length?o.reduce(function(l,d){return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]):null},eF=function(t,r,n,s,i){var o=r.map(function(d){var u=d.props.dataKey;return n==="number"&&u&&ZR(t,d,u,s)||Uh(t,u,n,i)});if(n==="number")return o.reduce(function(d,u){return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(d,u){for(var f=0,m=u.length;f<m;f++)l[u[f]]||(l[u[f]]=!0,d.push(u[f]));return d},[])},tF=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},rF=function(t,r,n,s){if(s)return t.map(function(d){return d.coordinate});var i,o,l=t.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===n&&(o=!0),d.coordinate});return i||l.push(r),o||l.push(n),l},Do=function(t,r,n){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,d=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||n)&&o==="category"&&s.bandwidth?s.bandwidth()/d:0;if(u=t.axisType==="angleAxis"&&l?.length>=2?os(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(m){var p=i?i.indexOf(m):m;return{coordinate:s(p)+u,value:m,offset:u}});return f.filter(function(m){return!lf(m.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(m,p){return{coordinate:s(m)+u,value:m,index:p,offset:u}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(m){return{coordinate:s(m)+u,value:m,offset:u}}):s.domain().map(function(m,p){return{coordinate:s(m)+u,value:i?i[m]:m,index:p,offset:u}})},T1=new WeakMap,Om=function(t,r){if(typeof r!="function")return t;T1.has(t)||T1.set(t,new WeakMap);var n=T1.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},aF=function(t,r,n){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:x0(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Sp(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Bh(),realScaleType:"point"}:i==="category"?{scale:x0(),realScaleType:"band"}:{scale:Sp(),realScaleType:"linear"};if(Sc(s)){var d="scale".concat(Hg(s));return{scale:(JD[d]||Bh)(),realScaleType:JD[d]?d:"point"}}return or(s)?{scale:s}:{scale:Bh(),realScaleType:"point"}},f3=1e-4,nF=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),i=Math.min(s[0],s[1])-f3,o=Math.max(s[0],s[1])+f3,l=t(r[0]),d=t(r[n-1]);(l<i||l>o||d<i||d>o)&&t.domain([r[0],r[n-1]])}},CZ=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},AZ=function(t,r){if(!r||r.length!==2||!At(r[0])||!At(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!At(t[0])||t[0]<n)&&(i[0]=n),(!At(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<n&&(i[1]=n),i},TZ=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0,l=0;l<r;++l){var d=lf(t[l][n][1])?t[l][n][0]:t[l][n][1];d>=0?(t[l][n][0]=i,t[l][n][1]=i+d,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+d,o=t[l][n][1])}},DZ=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0;o<r;++o){var l=lf(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},OZ={sign:TZ,expand:vK,none:Kd,silhouette:bK,wiggle:wK,positive:DZ},PZ=function(t,r,n){var s=r.map(function(l){return l.props.dataKey}),i=OZ[n],o=yK().keys(s).value(function(l,d){return+za(l,d,0)}).order(Qj).offset(i);return o(t)},IZ=function(t,r,n,s,i,o){if(!t)return null;var l=o?r.reverse():r,d={},u=l.reduce(function(m,p){var g,b=(g=p.type)!==null&&g!==void 0&&g.defaultProps?Fa(Fa({},p.type.defaultProps),p.props):p.props,y=b.stackId,v=b.hide;if(v)return m;var k=b[n],S=m[k]||{hasStack:!1,stackGroups:{}};if(fn(y)){var w=S.stackGroups[y]||{numericAxisId:n,cateAxisId:s,items:[]};w.items.push(p),S.hasStack=!0,S.stackGroups[y]=w}else S.stackGroups[Eu("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[p]};return Fa(Fa({},m),{},Hd({},k,S))},d),f={};return Object.keys(u).reduce(function(m,p){var g=u[p];if(g.hasStack){var b={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(y,v){var k=g.stackGroups[v];return Fa(Fa({},y),{},Hd({},v,{numericAxisId:n,cateAxisId:s,items:k.items,stackedData:PZ(t,k.items,i)}))},b)}return Fa(Fa({},m),{},Hd({},p,g))},f)},sF=function(t,r){var n=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=GQ(u,i,l);return t.domain([ax(f),rx(f)]),{niceTicks:f}}if(i&&s==="number"){var m=t.domain(),p=YQ(m,i,l);return{niceTicks:p}}return null};function m3(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!wr(s[t.dataKey])){var l=ip(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var d=za(s,wr(o)?t.dataKey:o);return wr(d)?null:t.scale(d)}var p3=function(t){var r=t.axis,n=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var d=za(o,r.dataKey,r.domain[l]);return wr(d)?null:r.scale(d)-i/2+s},MZ=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return s<=0&&i>=0?0:i<0?i:s}return n[0]},RZ=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Fa(Fa({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(fn(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},FZ=function(t){return t.reduce(function(r,n){return[ax(n.concat([r[0]]).filter(At)),rx(n.concat([r[1]]).filter(At))]},[1/0,-1/0])},iF=function(t,r,n){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,d=l.reduce(function(u,f){var m=FZ(f.slice(r,n+1));return[Math.min(u[0],m[0]),Math.max(u[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],s[0]),Math.max(d[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},g3=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,x3=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,NN=function(t,r,n){if(or(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(At(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(g3.test(t[0])){var i=+g3.exec(t[0])[1];s[0]=r[0]-i}else or(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(At(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(x3.test(t[1])){var o=+x3.exec(t[1])[1];s[1]=r[1]+o}else or(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},Op=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var i=uk(r,function(m){return m.coordinate}),o=1/0,l=1,d=i.length;l<d;l++){var u=i[l],f=i[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},y3=function(t,r,n){return!t||!t.length||Tu(t,Us(n,"type.defaultProps.domain"))?r:t},oF=function(t,r){var n=t.type.defaultProps?Fa(Fa({},t.type.defaultProps),t.props):t.props,s=n.dataKey,i=n.name,o=n.unit,l=n.formatter,d=n.tooltipType,u=n.chartType,f=n.hide;return Fa(Fa({},Jt(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:Fk(t),value:za(r,s),type:d,payload:r,chartType:u,hide:f})};function _0(e){"@babel/helpers - typeof";return _0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_0(e)}function v3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v3(Object(r),!0).forEach(function(n){lF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lF(e,t,r){return t=$Z(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Z(e){var t=LZ(e,"string");return _0(t)=="symbol"?t:t+""}function LZ(e,t){if(_0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BZ(e,t){return WZ(e)||qZ(e,t)||HZ(e,t)||UZ()}function UZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HZ(e,t){if(e){if(typeof e=="string")return b3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b3(e,t)}}function b3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function WZ(e){if(Array.isArray(e))return e}var Pp=Math.PI/180,zZ=function(t){return t*180/Math.PI},ta=function(t,r,n,s){return{x:t+Math.cos(-Pp*s)*n,y:r+Math.sin(-Pp*s)*n}},cF=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},dF=function(t,r,n,s,i){var o=t.width,l=t.height,d=t.startAngle,u=t.endAngle,f=ls(t.cx,o,o/2),m=ls(t.cy,l,l/2),p=cF(o,l,n),g=ls(t.innerRadius,p,0),b=ls(t.outerRadius,p,p*.8),y=Object.keys(r);return y.reduce(function(v,k){var S=r[k],w=S.domain,A=S.reversed,C;if(wr(S.range))s==="angleAxis"?C=[d,u]:s==="radiusAxis"&&(C=[g,b]),A&&(C=[C[1],C[0]]);else{C=S.range;var N=C,E=BZ(N,2);d=E[0],u=E[1]}var _=aF(S,i),O=_.realScaleType,B=_.scale;B.domain(w).range(C),nF(B);var F=sF(B,jo(jo({},S),{},{realScaleType:O})),D=jo(jo(jo({},S),F),{},{range:C,radius:b,realScaleType:O,scale:B,cx:f,cy:m,innerRadius:g,outerRadius:b,startAngle:d,endAngle:u});return jo(jo({},v),{},lF({},k,D))},{})},KZ=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(s-o,2))},VZ=function(t,r){var n=t.x,s=t.y,i=r.cx,o=r.cy,l=KZ({x:n,y:s},{x:i,y:o});if(l<=0)return{radius:l};var d=(n-i)/l,u=Math.acos(d);return s>o&&(u=2*Math.PI-u),{radius:l,angle:zZ(u),angleInRadian:u}},GZ=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:n-o*360}},YZ=function(t,r){var n=r.startAngle,s=r.endAngle,i=Math.floor(n/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},w3=function(t,r){var n=t.x,s=t.y,i=VZ({x:n,y:s},r),o=i.radius,l=i.angle,d=r.innerRadius,u=r.outerRadius;if(o<d||o>u)return!1;if(o===0)return!0;var f=GZ(r),m=f.startAngle,p=f.endAngle,g=l,b;if(m<=p){for(;g>p;)g-=360;for(;g<m;)g+=360;b=g>=m&&g<=p}else{for(;g>m;)g-=360;for(;g<p;)g+=360;b=g>=p&&g<=m}return b?jo(jo({},r),{},{radius:o,angle:YZ(g,r)}):null},uF=function(t){return!P.isValidElement(t)&&!or(t)&&typeof t!="boolean"?t.className:""};function E0(e){"@babel/helpers - typeof";return E0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E0(e)}var XZ=["offset"];function JZ(e){return tee(e)||eee(e)||ZZ(e)||QZ()}function QZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZZ(e,t){if(e){if(typeof e=="string")return kN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kN(e,t)}}function eee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tee(e){if(Array.isArray(e))return kN(e)}function kN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ree(e,t){if(e==null)return{};var r=aee(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function j3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j3(Object(r),!0).forEach(function(n){nee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nee(e,t,r){return t=see(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function see(e){var t=iee(e,"string");return E0(t)=="symbol"?t:t+""}function iee(e,t){if(E0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(E0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C0(){return C0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C0.apply(this,arguments)}var oee=function(t){var r=t.value,n=t.formatter,s=wr(t.children)?r:t.children;return or(n)?n(s):s},lee=function(t,r){var n=os(r-t),s=Math.min(Math.abs(r-t),360);return n*s},cee=function(t,r,n){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,d=i,u=d.cx,f=d.cy,m=d.innerRadius,p=d.outerRadius,g=d.startAngle,b=d.endAngle,y=d.clockWise,v=(m+p)/2,k=lee(g,b),S=k>=0?1:-1,w,A;s==="insideStart"?(w=g+S*o,A=y):s==="insideEnd"?(w=b-S*o,A=!y):s==="end"&&(w=b+S*o,A=y),A=k<=0?A:!A;var C=ta(u,f,v,w),N=ta(u,f,v,w+(A?1:-1)*359),E="M".concat(C.x,",").concat(C.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(A?0:1,`,
    `).concat(N.x,",").concat(N.y),_=wr(t.id)?Eu("recharts-radial-line-"):t.id;return ke.createElement("text",C0({},n,{dominantBaseline:"central",className:br("recharts-radial-bar-label",l)}),ke.createElement("defs",null,ke.createElement("path",{id:_,d:E})),ke.createElement("textPath",{xlinkHref:"#".concat(_)},r))},dee=function(t){var r=t.viewBox,n=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,d=i.innerRadius,u=i.outerRadius,f=i.startAngle,m=i.endAngle,p=(f+m)/2;if(s==="outside"){var g=ta(o,l,u+n,p),b=g.x,y=g.y;return{x:b,y,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(d+u)/2,k=ta(o,l,v,p),S=k.x,w=k.y;return{x:S,y:w,textAnchor:"middle",verticalAnchor:"middle"}},uee=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,d=o.y,u=o.width,f=o.height,m=f>=0?1:-1,p=m*s,g=m>0?"end":"start",b=m>0?"start":"end",y=u>=0?1:-1,v=y*s,k=y>0?"end":"start",S=y>0?"start":"end";if(i==="top"){var w={x:l+u/2,y:d-m*s,textAnchor:"middle",verticalAnchor:g};return cn(cn({},w),n?{height:Math.max(d-n.y,0),width:u}:{})}if(i==="bottom"){var A={x:l+u/2,y:d+f+p,textAnchor:"middle",verticalAnchor:b};return cn(cn({},A),n?{height:Math.max(n.y+n.height-(d+f),0),width:u}:{})}if(i==="left"){var C={x:l-v,y:d+f/2,textAnchor:k,verticalAnchor:"middle"};return cn(cn({},C),n?{width:Math.max(C.x-n.x,0),height:f}:{})}if(i==="right"){var N={x:l+u+v,y:d+f/2,textAnchor:S,verticalAnchor:"middle"};return cn(cn({},N),n?{width:Math.max(n.x+n.width-N.x,0),height:f}:{})}var E=n?{width:u,height:f}:{};return i==="insideLeft"?cn({x:l+v,y:d+f/2,textAnchor:S,verticalAnchor:"middle"},E):i==="insideRight"?cn({x:l+u-v,y:d+f/2,textAnchor:k,verticalAnchor:"middle"},E):i==="insideTop"?cn({x:l+u/2,y:d+p,textAnchor:"middle",verticalAnchor:b},E):i==="insideBottom"?cn({x:l+u/2,y:d+f-p,textAnchor:"middle",verticalAnchor:g},E):i==="insideTopLeft"?cn({x:l+v,y:d+p,textAnchor:S,verticalAnchor:b},E):i==="insideTopRight"?cn({x:l+u-v,y:d+p,textAnchor:k,verticalAnchor:b},E):i==="insideBottomLeft"?cn({x:l+v,y:d+f-p,textAnchor:S,verticalAnchor:g},E):i==="insideBottomRight"?cn({x:l+u-v,y:d+f-p,textAnchor:k,verticalAnchor:g},E):_u(i)&&(At(i.x)||uc(i.x))&&(At(i.y)||uc(i.y))?cn({x:l+ls(i.x,u),y:d+ls(i.y,f),textAnchor:"end",verticalAnchor:"end"},E):cn({x:l+u/2,y:d+f/2,textAnchor:"middle",verticalAnchor:"middle"},E)},hee=function(t){return"cx"in t&&At(t.cx)};function Nn(e){var t=e.offset,r=t===void 0?5:t,n=ree(e,XZ),s=cn({offset:r},n),i=s.viewBox,o=s.position,l=s.value,d=s.children,u=s.content,f=s.className,m=f===void 0?"":f,p=s.textBreakAll;if(!i||wr(l)&&wr(d)&&!P.isValidElement(u)&&!or(u))return null;if(P.isValidElement(u))return P.cloneElement(u,s);var g;if(or(u)){if(g=P.createElement(u,s),P.isValidElement(g))return g}else g=oee(s);var b=hee(i),y=Jt(s,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return cee(s,g,y);var v=b?dee(s):uee(s);return ke.createElement(Ec,C0({className:br("recharts-label",m)},y,v,{breakAll:p}),g)}Nn.displayName="Label";var hF=function(t){var r=t.cx,n=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,d=t.radius,u=t.innerRadius,f=t.outerRadius,m=t.x,p=t.y,g=t.top,b=t.left,y=t.width,v=t.height,k=t.clockWise,S=t.labelViewBox;if(S)return S;if(At(y)&&At(v)){if(At(m)&&At(p))return{x:m,y:p,width:y,height:v};if(At(g)&&At(b))return{x:g,y:b,width:y,height:v}}return At(m)&&At(p)?{x:m,y:p,width:0,height:0}:At(r)&&At(n)?{cx:r,cy:n,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:f||d||l||0,clockWise:k}:t.viewBox?t.viewBox:{}},fee=function(t,r){return t?t===!0?ke.createElement(Nn,{key:"label-implicit",viewBox:r}):fn(t)?ke.createElement(Nn,{key:"label-implicit",viewBox:r,value:t}):P.isValidElement(t)?t.type===Nn?P.cloneElement(t,{key:"label-implicit",viewBox:r}):ke.createElement(Nn,{key:"label-implicit",content:t,viewBox:r}):or(t)?ke.createElement(Nn,{key:"label-implicit",content:t,viewBox:r}):_u(t)?ke.createElement(Nn,C0({viewBox:r},t,{key:"label-implicit"})):null:null},mee=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,i=hF(t),o=Hs(s,Nn).map(function(d,u){return P.cloneElement(d,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=fee(t.label,r||i);return[l].concat(JZ(o))};Nn.parseViewBox=hF;Nn.renderCallByParent=mee;var D1,N3;function pee(){if(N3)return D1;N3=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return D1=e,D1}var gee=pee();const fF=sa(gee);function A0(e){"@babel/helpers - typeof";return A0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A0(e)}var xee=["valueAccessor"],yee=["data","dataKey","clockWise","id","textBreakAll"];function vee(e){return Nee(e)||jee(e)||wee(e)||bee()}function bee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wee(e,t){if(e){if(typeof e=="string")return SN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SN(e,t)}}function jee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nee(e){if(Array.isArray(e))return SN(e)}function SN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ip(){return Ip=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ip.apply(this,arguments)}function k3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function S3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k3(Object(r),!0).forEach(function(n){kee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kee(e,t,r){return t=See(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function See(e){var t=_ee(e,"string");return A0(t)=="symbol"?t:t+""}function _ee(e,t){if(A0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(A0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _3(e,t){if(e==null)return{};var r=Eee(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Eee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Cee=function(t){return Array.isArray(t.value)?fF(t.value):t.value};function Qi(e){var t=e.valueAccessor,r=t===void 0?Cee:t,n=_3(e,xee),s=n.data,i=n.dataKey,o=n.clockWise,l=n.id,d=n.textBreakAll,u=_3(n,yee);return!s||!s.length?null:ke.createElement(qr,{className:"recharts-label-list"},s.map(function(f,m){var p=wr(i)?r(f,m):za(f&&f.payload,i),g=wr(l)?{}:{id:"".concat(l,"-").concat(m)};return ke.createElement(Nn,Ip({},Jt(f,!0),u,g,{parentViewBox:f.parentViewBox,value:p,textBreakAll:d,viewBox:Nn.parseViewBox(wr(o)?f:S3(S3({},f),{},{clockWise:o})),key:"label-".concat(m),index:m}))}))}Qi.displayName="LabelList";function Aee(e,t){return e?e===!0?ke.createElement(Qi,{key:"labelList-implicit",data:t}):ke.isValidElement(e)||or(e)?ke.createElement(Qi,{key:"labelList-implicit",data:t,content:e}):_u(e)?ke.createElement(Qi,Ip({data:t},e,{key:"labelList-implicit"})):null:null}function Tee(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=Hs(n,Qi).map(function(o,l){return P.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=Aee(e.label,t);return[i].concat(vee(s))}Qi.renderCallByParent=Tee;function T0(e){"@babel/helpers - typeof";return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T0(e)}function _N(){return _N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_N.apply(this,arguments)}function E3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function C3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E3(Object(r),!0).forEach(function(n){Dee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dee(e,t,r){return t=Oee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oee(e){var t=Pee(e,"string");return T0(t)=="symbol"?t:t+""}function Pee(e,t){if(T0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(T0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Iee=function(t,r){var n=os(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},Pm=function(t){var r=t.cx,n=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,d=t.cornerRadius,u=t.cornerIsExternal,f=d*(l?1:-1)+s,m=Math.asin(d/f)/Pp,p=u?i:i+o*m,g=ta(r,n,f,p),b=ta(r,n,s,p),y=u?i-o*m:i,v=ta(r,n,f*Math.cos(m*Pp),y);return{center:g,circleTangency:b,lineTangency:v,theta:m}},mF=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,d=Iee(o,l),u=o+d,f=ta(r,n,i,o),m=ta(r,n,i,u),p="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>u),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(s>0){var g=ta(r,n,s,o),b=ta(r,n,s,u);p+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else p+="L ".concat(r,",").concat(n," Z");return p},Mee=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,d=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,m=os(f-u),p=Pm({cx:r,cy:n,radius:i,angle:u,sign:m,cornerRadius:o,cornerIsExternal:d}),g=p.circleTangency,b=p.lineTangency,y=p.theta,v=Pm({cx:r,cy:n,radius:i,angle:f,sign:-m,cornerRadius:o,cornerIsExternal:d}),k=v.circleTangency,S=v.lineTangency,w=v.theta,A=d?Math.abs(u-f):Math.abs(u-f)-y-w;if(A<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):mF({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:f});var C="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(A>180),",").concat(+(m<0),",").concat(k.x,",").concat(k.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(S.x,",").concat(S.y,`
  `);if(s>0){var N=Pm({cx:r,cy:n,radius:s,angle:u,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),E=N.circleTangency,_=N.lineTangency,O=N.theta,B=Pm({cx:r,cy:n,radius:s,angle:f,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),F=B.circleTangency,D=B.lineTangency,H=B.theta,ne=d?Math.abs(u-f):Math.abs(u-f)-O-H;if(ne<0&&o===0)return"".concat(C,"L").concat(r,",").concat(n,"Z");C+="L".concat(D.x,",").concat(D.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(ne>180),",").concat(+(m>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(_.x,",").concat(_.y,"Z")}else C+="L".concat(r,",").concat(n,"Z");return C},Ree={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},pF=function(t){var r=C3(C3({},Ree),t),n=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,d=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,m=r.endAngle,p=r.className;if(o<i||f===m)return null;var g=br("recharts-sector",p),b=o-i,y=ls(l,b,0,!0),v;return y>0&&Math.abs(f-m)<360?v=Mee({cx:n,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(y,b/2),forceCornerRadius:d,cornerIsExternal:u,startAngle:f,endAngle:m}):v=mF({cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:f,endAngle:m}),ke.createElement("path",_N({},Jt(r,!0),{className:g,d:v,role:"img"}))};function D0(e){"@babel/helpers - typeof";return D0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D0(e)}function EN(){return EN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EN.apply(this,arguments)}function A3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function T3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A3(Object(r),!0).forEach(function(n){Fee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fee(e,t,r){return t=$ee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ee(e){var t=Lee(e,"string");return D0(t)=="symbol"?t:t+""}function Lee(e,t){if(D0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(D0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D3={curveBasisClosed:oK,curveBasisOpen:lK,curveBasis:iK,curveBumpX:Kz,curveBumpY:Vz,curveLinearClosed:cK,curveLinear:Wg,curveMonotoneX:dK,curveMonotoneY:uK,curveNatural:hK,curveStep:fK,curveStepAfter:pK,curveStepBefore:mK},Im=function(t){return t.x===+t.x&&t.y===+t.y},wh=function(t){return t.x},jh=function(t){return t.y},Bee=function(t,r){if(or(t))return t;var n="curve".concat(Hg(t));return(n==="curveMonotone"||n==="curveBump")&&r?D3["".concat(n).concat(r==="vertical"?"Y":"X")]:D3[n]||Wg},Uee=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,d=t.connectNulls,u=d===void 0?!1:d,f=Bee(n,l),m=u?i.filter(function(y){return Im(y)}):i,p;if(Array.isArray(o)){var g=u?o.filter(function(y){return Im(y)}):o,b=m.map(function(y,v){return T3(T3({},y),{},{base:g[v]})});return l==="vertical"?p=Sm().y(jh).x1(wh).x0(function(y){return y.base.x}):p=Sm().x(wh).y1(jh).y0(function(y){return y.base.y}),p.defined(Im).curve(f),p(b)}return l==="vertical"&&At(o)?p=Sm().y(jh).x1(wh).x0(o):At(o)?p=Sm().x(wh).y1(jh).y0(o):p=hM().x(wh).y(jh),p.defined(Im).curve(f),p(m)},Mp=function(t){var r=t.className,n=t.points,s=t.path,i=t.pathRef;if((!n||!n.length)&&!s)return null;var o=n&&n.length?Uee(t):s;return P.createElement("path",EN({},Jt(t,!1),op(t),{className:br("recharts-curve",r),d:o,ref:i}))},O1={exports:{}},P1,O3;function Hee(){if(O3)return P1;O3=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return P1=e,P1}var I1,P3;function qee(){if(P3)return I1;P3=1;var e=Hee();function t(){}function r(){}return r.resetWarningCache=t,I1=function(){function n(o,l,d,u,f,m){if(m!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},I1}var I3;function Wee(){return I3||(I3=1,O1.exports=qee()()),O1.exports}var zee=Wee();const aa=sa(zee),{getOwnPropertyNames:Kee,getOwnPropertySymbols:Vee}=Object,{hasOwnProperty:Gee}=Object.prototype;function M1(e,t){return function(n,s,i){return e(n,s,i)&&t(n,s,i)}}function Mm(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);const{cache:i}=s,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);const d=e(r,n,s);return i.delete(r),i.delete(n),d}}function Yee(e){return e?.[Symbol.toStringTag]}function M3(e){return Kee(e).concat(Vee(e))}const Xee=Object.hasOwn||((e,t)=>Gee.call(e,t));function Lc(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const Jee="__v",Qee="__o",Zee="_owner",{getOwnPropertyDescriptor:R3,keys:F3}=Object;function ete(e,t){return e.byteLength===t.byteLength&&Rp(new Uint8Array(e),new Uint8Array(t))}function tte(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function rte(e,t){return e.byteLength===t.byteLength&&Rp(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function ate(e,t){return Lc(e.getTime(),t.getTime())}function nte(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function ste(e,t){return e===t}function $3(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.entries();let o,l,d=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let f=!1,m=0;for(;(l=u.next())&&!l.done;){if(s[m]){m++;continue}const p=o.value,g=l.value;if(r.equals(p[0],g[0],d,m,e,t,r)&&r.equals(p[1],g[1],p[0],g[0],e,t,r)){f=s[m]=!0;break}m++}if(!f)return!1;d++}return!0}const ite=Lc;function ote(e,t,r){const n=F3(e);let s=n.length;if(F3(t).length!==s)return!1;for(;s-- >0;)if(!gF(e,t,r,n[s]))return!1;return!0}function Nh(e,t,r){const n=M3(e);let s=n.length;if(M3(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=n[s],!gF(e,t,r,i)||(o=R3(e,i),l=R3(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function lte(e,t){return Lc(e.valueOf(),t.valueOf())}function cte(e,t){return e.source===t.source&&e.flags===t.flags}function L3(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const d=t.values();let u=!1,f=0;for(;(l=d.next())&&!l.done;){if(!s[f]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=s[f]=!0;break}f++}if(!u)return!1}return!0}function Rp(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function dte(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function gF(e,t,r,n){return(n===Zee||n===Qee||n===Jee)&&(e.$$typeof||t.$$typeof)?!0:Xee(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const ute="[object ArrayBuffer]",hte="[object Arguments]",fte="[object Boolean]",mte="[object DataView]",pte="[object Date]",gte="[object Error]",xte="[object Map]",yte="[object Number]",vte="[object Object]",bte="[object RegExp]",wte="[object Set]",jte="[object String]",Nte={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},kte="[object URL]",Ste=Object.prototype.toString;function _te({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:d,arePrimitiveWrappersEqual:u,areRegExpsEqual:f,areSetsEqual:m,areTypedArraysEqual:p,areUrlsEqual:g,unknownTagComparators:b}){return function(v,k,S){if(v===k)return!0;if(v==null||k==null)return!1;const w=typeof v;if(w!==typeof k)return!1;if(w!=="object")return w==="number"?l(v,k,S):w==="function"?i(v,k,S):!1;const A=v.constructor;if(A!==k.constructor)return!1;if(A===Object)return d(v,k,S);if(Array.isArray(v))return t(v,k,S);if(A===Date)return n(v,k,S);if(A===RegExp)return f(v,k,S);if(A===Map)return o(v,k,S);if(A===Set)return m(v,k,S);const C=Ste.call(v);if(C===pte)return n(v,k,S);if(C===bte)return f(v,k,S);if(C===xte)return o(v,k,S);if(C===wte)return m(v,k,S);if(C===vte)return typeof v.then!="function"&&typeof k.then!="function"&&d(v,k,S);if(C===kte)return g(v,k,S);if(C===gte)return s(v,k,S);if(C===hte)return d(v,k,S);if(Nte[C])return p(v,k,S);if(C===ute)return e(v,k,S);if(C===mte)return r(v,k,S);if(C===fte||C===yte||C===jte)return u(v,k,S);if(b){let N=b[C];if(!N){const E=Yee(v);E&&(N=b[E])}if(N)return N(v,k,S)}return!1}}function Ete({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:ete,areArraysEqual:r?Nh:tte,areDataViewsEqual:rte,areDatesEqual:ate,areErrorsEqual:nte,areFunctionsEqual:ste,areMapsEqual:r?M1($3,Nh):$3,areNumbersEqual:ite,areObjectsEqual:r?Nh:ote,arePrimitiveWrappersEqual:lte,areRegExpsEqual:cte,areSetsEqual:r?M1(L3,Nh):L3,areTypedArraysEqual:r?M1(Rp,Nh):Rp,areUrlsEqual:dte,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const s=Mm(n.areArraysEqual),i=Mm(n.areMapsEqual),o=Mm(n.areObjectsEqual),l=Mm(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return n}function Cte(e){return function(t,r,n,s,i,o,l){return e(t,r,l)}}function Ate({circular:e,comparator:t,createState:r,equals:n,strict:s}){if(r)return function(l,d){const{cache:u=e?new WeakMap:void 0,meta:f}=r();return t(l,d,{cache:u,equals:n,meta:f,strict:s})};if(e)return function(l,d){return t(l,d,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const i={cache:void 0,equals:n,meta:void 0,strict:s};return function(l,d){return t(l,d,i)}}const Tte=Il();Il({strict:!0});Il({circular:!0});Il({circular:!0,strict:!0});Il({createInternalComparator:()=>Lc});Il({strict:!0,createInternalComparator:()=>Lc});Il({circular:!0,createInternalComparator:()=>Lc});Il({circular:!0,createInternalComparator:()=>Lc,strict:!0});function Il(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:s=!1}=e,i=Ete(e),o=_te(i),l=r?r(o):Cte(o);return Ate({circular:t,comparator:o,createState:n,equals:l,strict:s})}function Dte(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function B3(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):Dte(s)};requestAnimationFrame(n)}function CN(e){"@babel/helpers - typeof";return CN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CN(e)}function Ote(e){return Rte(e)||Mte(e)||Ite(e)||Pte()}function Pte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ite(e,t){if(e){if(typeof e=="string")return U3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U3(e,t)}}function U3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rte(e){if(Array.isArray(e))return e}function Fte(){var e={},t=function(){return null},r=!1,n=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=Ote(o),d=l[0],u=l.slice(1);if(typeof d=="number"){B3(s.bind(null,u),d);return}s(d),B3(s.bind(null,u));return}CN(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function O0(e){"@babel/helpers - typeof";return O0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O0(e)}function H3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function q3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H3(Object(r),!0).forEach(function(n){xF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xF(e,t,r){return t=$te(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $te(e){var t=Lte(e,"string");return O0(t)==="symbol"?t:String(t)}function Lte(e,t){if(O0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(O0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bte=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(i){return s.includes(i)})})},Ute=function(t){return t},Hte=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Hh=function(t,r){return Object.keys(r).reduce(function(n,s){return q3(q3({},n),{},xF({},s,t(s,r[s])))},{})},W3=function(t,r,n){return t.map(function(s){return"".concat(Hte(s)," ").concat(r,"ms ").concat(n)}).join(",")};function qte(e,t){return Kte(e)||zte(e,t)||yF(e,t)||Wte()}function Wte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zte(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Kte(e){if(Array.isArray(e))return e}function Vte(e){return Xte(e)||Yte(e)||yF(e)||Gte()}function Gte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yF(e,t){if(e){if(typeof e=="string")return AN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AN(e,t)}}function Yte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Xte(e){if(Array.isArray(e))return AN(e)}function AN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fp=1e-4,vF=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},bF=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},z3=function(t,r){return function(n){var s=vF(t,r);return bF(s,n)}},Jte=function(t,r){return function(n){var s=vF(t,r),i=[].concat(Vte(s.map(function(o,l){return o*l}).slice(1)),[0]);return bF(i,n)}},K3=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var u=d[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),f=qte(u,4);s=f[0],i=f[1],o=f[2],l=f[3]}}}var m=z3(s,o),p=z3(i,l),g=Jte(s,o),b=function(k){return k>1?1:k<0?0:k},y=function(k){for(var S=k>1?1:k,w=S,A=0;A<8;++A){var C=m(w)-S,N=g(w);if(Math.abs(C-S)<Fp||N<Fp)return p(w);w=b(w-C/N)}return p(w)};return y.isStepper=!1,y},Qte=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,d=function(f,m,p){var g=-(f-m)*n,b=p*i,y=p+(g-b)*l/1e3,v=p*l/1e3+f;return Math.abs(v-m)<Fp&&Math.abs(y)<Fp?[m,0]:[v,y]};return d.isStepper=!0,d.dt=l,d},Zte=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return K3(s);case"spring":return Qte();default:if(s.split("(")[0]==="cubic-bezier")return K3(s)}return typeof s=="function"?s:null};function P0(e){"@babel/helpers - typeof";return P0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P0(e)}function V3(e){return rre(e)||tre(e)||wF(e)||ere()}function ere(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rre(e){if(Array.isArray(e))return DN(e)}function G3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Tn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G3(Object(r),!0).forEach(function(n){TN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TN(e,t,r){return t=are(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function are(e){var t=nre(e,"string");return P0(t)==="symbol"?t:String(t)}function nre(e,t){if(P0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(P0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sre(e,t){return lre(e)||ore(e,t)||wF(e,t)||ire()}function ire(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wF(e,t){if(e){if(typeof e=="string")return DN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DN(e,t)}}function DN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ore(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function lre(e){if(Array.isArray(e))return e}var $p=function(t,r,n){return t+(r-t)*n},ON=function(t){var r=t.from,n=t.to;return r!==n},cre=function e(t,r,n){var s=Hh(function(i,o){if(ON(o)){var l=t(o.from,o.to,o.velocity),d=sre(l,2),u=d[0],f=d[1];return Tn(Tn({},o),{},{from:u,velocity:f})}return o},r);return n<1?Hh(function(i,o){return ON(o)?Tn(Tn({},o),{},{velocity:$p(o.velocity,s[i].velocity,n),from:$p(o.from,s[i].from,n)}):o},r):e(t,s,n-1)};const dre=(function(e,t,r,n,s){var i=Bte(e,t),o=i.reduce(function(v,k){return Tn(Tn({},v),{},TN({},k,[e[k],t[k]]))},{}),l=i.reduce(function(v,k){return Tn(Tn({},v),{},TN({},k,{from:e[k],velocity:0,to:t[k]}))},{}),d=-1,u,f,m=function(){return null},p=function(){return Hh(function(k,S){return S.from},l)},g=function(){return!Object.values(l).filter(ON).length},b=function(k){u||(u=k);var S=k-u,w=S/r.dt;l=cre(r,l,w),s(Tn(Tn(Tn({},e),t),p())),u=k,g()||(d=requestAnimationFrame(m))},y=function(k){f||(f=k);var S=(k-f)/n,w=Hh(function(C,N){return $p.apply(void 0,V3(N).concat([r(S)]))},o);if(s(Tn(Tn(Tn({},e),t),w)),S<1)d=requestAnimationFrame(m);else{var A=Hh(function(C,N){return $p.apply(void 0,V3(N).concat([r(1)]))},o);s(Tn(Tn(Tn({},e),t),A))}};return m=r.isStepper?b:y,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function ru(e){"@babel/helpers - typeof";return ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ru(e)}var ure=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function hre(e,t){if(e==null)return{};var r=fre(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fre(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function R1(e){return xre(e)||gre(e)||pre(e)||mre()}function mre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pre(e,t){if(e){if(typeof e=="string")return PN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PN(e,t)}}function gre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xre(e){if(Array.isArray(e))return PN(e)}function PN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Y3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y3(Object(r),!0).forEach(function(n){Oh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oh(e,t,r){return t=jF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jF(n.key),n)}}function bre(e,t,r){return t&&vre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jF(e){var t=wre(e,"string");return ru(t)==="symbol"?t:String(t)}function wre(e,t){if(ru(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ru(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IN(e,t)}function IN(e,t){return IN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},IN(e,t)}function Nre(e){var t=kre();return function(){var n=Lp(e),s;if(t){var i=Lp(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return MN(this,s)}}function MN(e,t){if(t&&(ru(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RN(e)}function RN(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lp(e){return Lp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lp(e)}var $i=(function(e){jre(r,e);var t=Nre(r);function r(n,s){var i;yre(this,r),i=t.call(this,n,s);var o=i.props,l=o.isActive,d=o.attributeName,u=o.from,f=o.to,m=o.steps,p=o.children,g=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(RN(i)),i.changeStyle=i.changeStyle.bind(RN(i)),!l||g<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:f}),MN(i);if(m&&m.length)i.state={style:m[0].style};else if(u){if(typeof p=="function")return i.state={style:u},MN(i);i.state={style:d?Oh({},d,u):u}}else i.state={style:{}};return i}return bre(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,d=i.attributeName,u=i.shouldReAnimate,f=i.to,m=i.from,p=this.state.style;if(l){if(!o){var g={style:d?Oh({},d,f):f};this.state&&p&&(d&&p[d]!==f||!d&&p!==f)&&this.setState(g);return}if(!(Tte(s.to,f)&&s.canBegin&&s.isActive)){var b=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=b||u?m:s.to;if(this.state&&p){var v={style:d?Oh({},d,y):y};(d&&p[d]!==y||!d&&p!==y)&&this.setState(v)}this.runAnimation(wi(wi({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,d=s.duration,u=s.easing,f=s.begin,m=s.onAnimationEnd,p=s.onAnimationStart,g=dre(o,l,Zte(u),d,this.changeStyle),b=function(){i.stopJSAnimation=g()};this.manager.start([p,f,b,d,m])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,d=s.onAnimationStart,u=o[0],f=u.style,m=u.duration,p=m===void 0?0:m,g=function(y,v,k){if(k===0)return y;var S=v.duration,w=v.easing,A=w===void 0?"ease":w,C=v.style,N=v.properties,E=v.onAnimationEnd,_=k>0?o[k-1]:v,O=N||Object.keys(C);if(typeof A=="function"||A==="spring")return[].concat(R1(y),[i.runJSAnimation.bind(i,{from:_.style,to:C,duration:S,easing:A}),S]);var B=W3(O,S,A),F=wi(wi(wi({},_.style),C),{},{transition:B});return[].concat(R1(y),[F,S,E]).filter(Ute)};return this.manager.start([d].concat(R1(o.reduce(g,[f,Math.max(p,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=Fte());var i=s.begin,o=s.duration,l=s.attributeName,d=s.to,u=s.easing,f=s.onAnimationStart,m=s.onAnimationEnd,p=s.steps,g=s.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof u=="function"||typeof g=="function"||u==="spring"){this.runJSAnimation(s);return}if(p.length>1){this.runStepAnimation(s);return}var y=l?Oh({},l,d):d,v=W3(Object.keys(y),o,u);b.start([f,i,wi(wi({},y),{},{transition:v}),o,m])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var d=hre(s,ure),u=P.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||u===0||o<=0)return i;var m=function(g){var b=g.props,y=b.style,v=y===void 0?{}:y,k=b.className,S=P.cloneElement(g,wi(wi({},d),{},{style:wi(wi({},v),f),className:k}));return S};return u===1?m(P.Children.only(i)):ke.createElement("div",null,P.Children.map(i,function(p){return m(p)}))}}]),r})(P.PureComponent);$i.displayName="Animate";$i.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};$i.propTypes={from:aa.oneOfType([aa.object,aa.string]),to:aa.oneOfType([aa.object,aa.string]),attributeName:aa.string,duration:aa.number,begin:aa.number,easing:aa.oneOfType([aa.string,aa.func]),steps:aa.arrayOf(aa.shape({duration:aa.number.isRequired,style:aa.object.isRequired,easing:aa.oneOfType([aa.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),aa.func]),properties:aa.arrayOf("string"),onAnimationEnd:aa.func})),children:aa.oneOfType([aa.node,aa.func]),isActive:aa.bool,canBegin:aa.bool,onAnimationEnd:aa.func,shouldReAnimate:aa.bool,onAnimationStart:aa.func,onAnimationReStart:aa.func};function I0(e){"@babel/helpers - typeof";return I0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I0(e)}function Bp(){return Bp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bp.apply(this,arguments)}function Sre(e,t){return Are(e)||Cre(e,t)||Ere(e,t)||_re()}function _re(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ere(e,t){if(e){if(typeof e=="string")return X3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X3(e,t)}}function X3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Are(e){if(Array.isArray(e))return e}function J3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Q3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J3(Object(r),!0).forEach(function(n){Tre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tre(e,t,r){return t=Dre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dre(e){var t=Ore(e,"string");return I0(t)=="symbol"?t:t+""}function Ore(e,t){if(I0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(I0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Z3=function(t,r,n,s,i){var o=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,d=n>=0?1:-1,u=s>=0&&n>=0||s<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var m=[0,0,0,0],p=0,g=4;p<g;p++)m[p]=i[p]>o?o:i[p];f="M".concat(t,",").concat(r+l*m[0]),m[0]>0&&(f+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(u,",").concat(t+d*m[0],",").concat(r)),f+="L ".concat(t+n-d*m[1],",").concat(r),m[1]>0&&(f+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*m[1])),f+="L ".concat(t+n,",").concat(r+s-l*m[2]),m[2]>0&&(f+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(u,`,
        `).concat(t+n-d*m[2],",").concat(r+s)),f+="L ".concat(t+d*m[3],",").concat(r+s),m[3]>0&&(f+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+s-l*m[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var b=Math.min(o,i);f="M ".concat(t,",").concat(r+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+d*b,",").concat(r,`
            L `).concat(t+n-d*b,",").concat(r,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*b,`
            L `).concat(t+n,",").concat(r+s-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+n-d*b,",").concat(r+s,`
            L `).concat(t+d*b,",").concat(r+s,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t,",").concat(r+s-l*b," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return f},Pre=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,i=r.x,o=r.y,l=r.width,d=r.height;if(Math.abs(l)>0&&Math.abs(d)>0){var u=Math.min(i,i+l),f=Math.max(i,i+l),m=Math.min(o,o+d),p=Math.max(o,o+d);return n>=u&&n<=f&&s>=m&&s<=p}return!1},Ire={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$k=function(t){var r=Q3(Q3({},Ire),t),n=P.useRef(),s=P.useState(-1),i=Sre(s,2),o=i[0],l=i[1];P.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var A=n.current.getTotalLength();A&&l(A)}catch{}},[]);var d=r.x,u=r.y,f=r.width,m=r.height,p=r.radius,g=r.className,b=r.animationEasing,y=r.animationDuration,v=r.animationBegin,k=r.isAnimationActive,S=r.isUpdateAnimationActive;if(d!==+d||u!==+u||f!==+f||m!==+m||f===0||m===0)return null;var w=br("recharts-rectangle",g);return S?ke.createElement($i,{canBegin:o>0,from:{width:f,height:m,x:d,y:u},to:{width:f,height:m,x:d,y:u},duration:y,animationEasing:b,isActive:S},function(A){var C=A.width,N=A.height,E=A.x,_=A.y;return ke.createElement($i,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:y,isActive:k,easing:b},ke.createElement("path",Bp({},Jt(r,!0),{className:w,d:Z3(E,_,C,N,p),ref:n})))}):ke.createElement("path",Bp({},Jt(r,!0),{className:w,d:Z3(d,u,f,m,p)}))},Mre=["points","className","baseLinePoints","connectNulls"];function Pd(){return Pd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pd.apply(this,arguments)}function Rre(e,t){if(e==null)return{};var r=Fre(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Fre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function eO(e){return Ure(e)||Bre(e)||Lre(e)||$re()}function $re(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lre(e,t){if(e){if(typeof e=="string")return FN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FN(e,t)}}function Bre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ure(e){if(Array.isArray(e))return FN(e)}function FN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tO=function(t){return t&&t.x===+t.x&&t.y===+t.y},Hre=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){tO(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),tO(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},qh=function(t,r){var n=Hre(t);r&&(n=[n.reduce(function(i,o){return[].concat(eO(i),eO(o))},[])]);var s=n.map(function(i){return i.reduce(function(o,l,d){return"".concat(o).concat(d===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(s,"Z"):s},qre=function(t,r,n){var s=qh(t,n);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(qh(r.reverse(),n).slice(1))},NF=function(t){var r=t.points,n=t.className,s=t.baseLinePoints,i=t.connectNulls,o=Rre(t,Mre);if(!r||!r.length)return null;var l=br("recharts-polygon",n);if(s&&s.length){var d=o.stroke&&o.stroke!=="none",u=qre(r,s,i);return ke.createElement("g",{className:l},ke.createElement("path",Pd({},Jt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),d?ke.createElement("path",Pd({},Jt(o,!0),{fill:"none",d:qh(r,i)})):null,d?ke.createElement("path",Pd({},Jt(o,!0),{fill:"none",d:qh(s,i)})):null)}var f=qh(r,i);return ke.createElement("path",Pd({},Jt(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function $N(){return $N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$N.apply(this,arguments)}var pf=function(t){var r=t.cx,n=t.cy,s=t.r,i=t.className,o=br("recharts-dot",i);return r===+r&&n===+n&&s===+s?P.createElement("circle",$N({},Jt(t,!1),op(t),{className:o,cx:r,cy:n,r:s})):null};function M0(e){"@babel/helpers - typeof";return M0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M0(e)}var Wre=["x","y","top","left","width","height","className"];function LN(){return LN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LN.apply(this,arguments)}function rO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zre(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rO(Object(r),!0).forEach(function(n){Kre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kre(e,t,r){return t=Vre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vre(e){var t=Gre(e,"string");return M0(t)=="symbol"?t:t+""}function Gre(e,t){if(M0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(M0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yre(e,t){if(e==null)return{};var r=Xre(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Xre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Jre=function(t,r,n,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(n)},Qre=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,d=t.left,u=d===void 0?0:d,f=t.width,m=f===void 0?0:f,p=t.height,g=p===void 0?0:p,b=t.className,y=Yre(t,Wre),v=zre({x:n,y:i,top:l,left:u,width:m,height:g},y);return!At(n)||!At(i)||!At(m)||!At(g)||!At(l)||!At(u)?null:ke.createElement("path",LN({},Jt(v,!0),{className:br("recharts-cross",b),d:Jre(n,i,m,g,l,u)}))},Zre=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function R0(e){"@babel/helpers - typeof";return R0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R0(e)}function eae(e,t){if(e==null)return{};var r=tae(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function qo(){return qo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qo.apply(this,arguments)}function aO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function F0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aO(Object(r),!0).forEach(function(n){rae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rae(e,t,r){return t=aae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aae(e){var t=nae(e,"string");return R0(t)=="symbol"?t:t+""}function nae(e,t){if(R0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(R0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sae=function(t,r,n,s){var i="";return s.forEach(function(o,l){var d=ta(r,n,t,o);l?i+="L ".concat(d.x,",").concat(d.y):i+="M ".concat(d.x,",").concat(d.y)}),i+="Z",i},iae=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.polarAngles,l=t.radialLines;if(!o||!o.length||!l)return null;var d=F0({stroke:"#ccc"},Jt(t,!1));return ke.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(u){var f=ta(r,n,s,u),m=ta(r,n,i,u);return ke.createElement("line",qo({},d,{key:"line-".concat(u),x1:f.x,y1:f.y,x2:m.x,y2:m.y}))}))},oae=function(t){var r=t.cx,n=t.cy,s=t.radius,i=t.index,o=F0(F0({stroke:"#ccc"},Jt(t,!1)),{},{fill:"none"});return ke.createElement("circle",qo({},o,{className:br("recharts-polar-grid-concentric-circle",t.className),key:"circle-".concat(i),cx:r,cy:n,r:s}))},lae=function(t){var r=t.radius,n=t.index,s=F0(F0({stroke:"#ccc"},Jt(t,!1)),{},{fill:"none"});return ke.createElement("path",qo({},s,{className:br("recharts-polar-grid-concentric-polygon",t.className),key:"path-".concat(n),d:sae(r,t.cx,t.cy,t.polarAngles)}))},cae=function(t){var r=t.polarRadius,n=t.gridType;return!r||!r.length?null:ke.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(s,i){var o=i;return n==="circle"?ke.createElement(oae,qo({key:o},t,{radius:s,index:i})):ke.createElement(lae,qo({key:o},t,{radius:s,index:i}))}))},kF=function(t){var r=t.cx,n=r===void 0?0:r,s=t.cy,i=s===void 0?0:s,o=t.innerRadius,l=o===void 0?0:o,d=t.outerRadius,u=d===void 0?0:d,f=t.gridType,m=f===void 0?"polygon":f,p=t.radialLines,g=p===void 0?!0:p,b=eae(t,Zre);return u<=0?null:ke.createElement("g",{className:"recharts-polar-grid"},ke.createElement(iae,qo({cx:n,cy:i,innerRadius:l,outerRadius:u,gridType:m,radialLines:g},b)),ke.createElement(cae,qo({cx:n,cy:i,innerRadius:l,outerRadius:u,gridType:m,radialLines:g},b)))};kF.displayName="PolarGrid";var F1,nO;function dae(){if(nO)return F1;nO=1;var e=tx(),t=MR(),r=no();function n(s,i){return s&&s.length?e(s,r(i,2),t):void 0}return F1=n,F1}var uae=dae();const hae=sa(uae);var $1,sO;function fae(){if(sO)return $1;sO=1;var e=tx(),t=no(),r=RR();function n(s,i){return s&&s.length?e(s,t(i,2),r):void 0}return $1=n,$1}var mae=fae();const pae=sa(mae);var gae=["cx","cy","angle","ticks","axisLine"],xae=["ticks","tick","angle","tickFormatter","stroke"];function au(e){"@babel/helpers - typeof";return au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},au(e)}function Wh(){return Wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wh.apply(this,arguments)}function iO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iO(Object(r),!0).forEach(function(n){ix(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oO(e,t){if(e==null)return{};var r=yae(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function vae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_F(n.key),n)}}function bae(e,t,r){return t&&lO(e.prototype,t),r&&lO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wae(e,t,r){return t=Up(t),jae(e,SF()?Reflect.construct(t,r||[],Up(e).constructor):t.apply(e,r))}function jae(e,t){if(t&&(au(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nae(e)}function Nae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SF=function(){return!!e})()}function Up(e){return Up=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Up(e)}function kae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BN(e,t)}function BN(e,t){return BN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},BN(e,t)}function ix(e,t,r){return t=_F(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _F(e){var t=Sae(e,"string");return au(t)=="symbol"?t:t+""}function Sae(e,t){if(au(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(au(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Pu=(function(e){function t(){return vae(this,t),wae(this,t,arguments)}return kae(t,e),bae(t,[{key:"getTickValueCoord",value:function(n){var s=n.coordinate,i=this.props,o=i.angle,l=i.cx,d=i.cy;return ta(l,d,s,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,s;switch(n){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,d=hae(l,function(f){return f.coordinate||0}),u=pae(l,function(f){return f.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,d=n.axisLine,u=oO(n,gae),f=l.reduce(function(b,y){return[Math.min(b[0],y.coordinate),Math.max(b[1],y.coordinate)]},[1/0,-1/0]),m=ta(s,i,f[0],o),p=ta(s,i,f[1],o),g=Zl(Zl(Zl({},Jt(u,!1)),{},{fill:"none"},Jt(d,!1)),{},{x1:m.x,y1:m.y,x2:p.x,y2:p.y});return ke.createElement("line",Wh({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.angle,d=s.tickFormatter,u=s.stroke,f=oO(s,xae),m=this.getTickTextAnchor(),p=Jt(f,!1),g=Jt(o,!1),b=i.map(function(y,v){var k=n.getTickValueCoord(y),S=Zl(Zl(Zl(Zl({textAnchor:m,transform:"rotate(".concat(90-l,", ").concat(k.x,", ").concat(k.y,")")},p),{},{stroke:"none",fill:u},g),{},{index:v},k),{},{payload:y});return ke.createElement(qr,Wh({className:br("recharts-polar-radius-axis-tick",uF(o)),key:"tick-".concat(y.coordinate)},_c(n.props,y,v)),t.renderTickItem(o,S,d?d(y.value,v):y.value))});return ke.createElement(qr,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.axisLine,o=n.tick;return!s||!s.length?null:ke.createElement(qr,{className:br("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Nn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,s,i){var o;return ke.isValidElement(n)?o=ke.cloneElement(n,s):or(n)?o=n(s):o=ke.createElement(Ec,Wh({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(P.PureComponent);ix(Pu,"displayName","PolarRadiusAxis");ix(Pu,"axisType","radiusAxis");ix(Pu,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function nu(e){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nu(e)}function oc(){return oc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oc.apply(this,arguments)}function cO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ec(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cO(Object(r),!0).forEach(function(n){ox(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CF(n.key),n)}}function Eae(e,t,r){return t&&dO(e.prototype,t),r&&dO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cae(e,t,r){return t=Hp(t),Aae(e,EF()?Reflect.construct(t,r||[],Hp(e).constructor):t.apply(e,r))}function Aae(e,t){if(t&&(nu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tae(e)}function Tae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EF=function(){return!!e})()}function Hp(e){return Hp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hp(e)}function Dae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UN(e,t)}function UN(e,t){return UN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},UN(e,t)}function ox(e,t,r){return t=CF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CF(e){var t=Oae(e,"string");return nu(t)=="symbol"?t:t+""}function Oae(e,t){if(nu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Pae=Math.PI/180,uO=1e-5,Iu=(function(e){function t(){return _ae(this,t),Cae(this,t,arguments)}return Dae(t,e),Eae(t,[{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.cx,o=s.cy,l=s.radius,d=s.orientation,u=s.tickSize,f=u||8,m=ta(i,o,l,n.coordinate),p=ta(i,o,l+(d==="inner"?-1:1)*f,n.coordinate);return{x1:m.x,y1:m.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(n){var s=this.props.orientation,i=Math.cos(-n.coordinate*Pae),o;return i>uO?o=s==="outer"?"start":"end":i<-uO?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.radius,l=n.axisLine,d=n.axisLineType,u=ec(ec({},Jt(this.props,!1)),{},{fill:"none"},Jt(l,!1));if(d==="circle")return ke.createElement(pf,oc({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:i,r:o}));var f=this.props.ticks,m=f.map(function(p){return ta(s,i,o,p.coordinate)});return ke.createElement(NF,oc({className:"recharts-polar-angle-axis-line"},u,{points:m}))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.tickLine,d=s.tickFormatter,u=s.stroke,f=Jt(this.props,!1),m=Jt(o,!1),p=ec(ec({},f),{},{fill:"none"},Jt(l,!1)),g=i.map(function(b,y){var v=n.getTickLineCoord(b),k=n.getTickTextAnchor(b),S=ec(ec(ec({textAnchor:k},f),{},{stroke:"none",fill:u},m),{},{index:y,payload:b,x:v.x2,y:v.y2});return ke.createElement(qr,oc({className:br("recharts-polar-angle-axis-tick",uF(o)),key:"tick-".concat(b.coordinate)},_c(n.props,b,y)),l&&ke.createElement("line",oc({className:"recharts-polar-angle-axis-tick-line"},p,v)),o&&t.renderTickItem(o,S,d?d(b.value,y):b.value))});return ke.createElement(qr,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!s||!s.length?null:ke.createElement(qr,{className:br("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,s,i){var o;return ke.isValidElement(n)?o=ke.cloneElement(n,s):or(n)?o=n(s):o=ke.createElement(Ec,oc({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(P.PureComponent);ox(Iu,"displayName","PolarAngleAxis");ox(Iu,"axisType","angleAxis");ox(Iu,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var L1,hO;function Iae(){if(hO)return L1;hO=1;var e=MM(),t=e(Object.getPrototypeOf,Object);return L1=t,L1}var B1,fO;function Mae(){if(fO)return B1;fO=1;var e=Ko(),t=Iae(),r=Vo(),n="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,d=o.call(Object);function u(f){if(!r(f)||e(f)!=n)return!1;var m=t(f);if(m===null)return!0;var p=l.call(m,"constructor")&&m.constructor;return typeof p=="function"&&p instanceof p&&o.call(p)==d}return B1=u,B1}var Rae=Mae();const Fae=sa(Rae);var U1,mO;function $ae(){if(mO)return U1;mO=1;var e=Ko(),t=Vo(),r="[object Boolean]";function n(s){return s===!0||s===!1||t(s)&&e(s)==r}return U1=n,U1}var Lae=$ae();const Bae=sa(Lae);function $0(e){"@babel/helpers - typeof";return $0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$0(e)}function qp(){return qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qp.apply(this,arguments)}function Uae(e,t){return zae(e)||Wae(e,t)||qae(e,t)||Hae()}function Hae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qae(e,t){if(e){if(typeof e=="string")return pO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pO(e,t)}}function pO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function zae(e){if(Array.isArray(e))return e}function gO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gO(Object(r),!0).forEach(function(n){Kae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kae(e,t,r){return t=Vae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vae(e){var t=Gae(e,"string");return $0(t)=="symbol"?t:t+""}function Gae(e,t){if($0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yO=function(t,r,n,s,i){var o=n-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},Yae={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Xae=function(t){var r=xO(xO({},Yae),t),n=P.useRef(),s=P.useState(-1),i=Uae(s,2),o=i[0],l=i[1];P.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var d=r.x,u=r.y,f=r.upperWidth,m=r.lowerWidth,p=r.height,g=r.className,b=r.animationEasing,y=r.animationDuration,v=r.animationBegin,k=r.isUpdateAnimationActive;if(d!==+d||u!==+u||f!==+f||m!==+m||p!==+p||f===0&&m===0||p===0)return null;var S=br("recharts-trapezoid",g);return k?ke.createElement($i,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:d,y:u},to:{upperWidth:f,lowerWidth:m,height:p,x:d,y:u},duration:y,animationEasing:b,isActive:k},function(w){var A=w.upperWidth,C=w.lowerWidth,N=w.height,E=w.x,_=w.y;return ke.createElement($i,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:y,easing:b},ke.createElement("path",qp({},Jt(r,!0),{className:S,d:yO(E,_,A,C,N),ref:n})))}):ke.createElement("g",null,ke.createElement("path",qp({},Jt(r,!0),{className:S,d:yO(d,u,f,m,p)})))},Jae=["option","shapeType","propTransformer","activeClassName","isActive"];function L0(e){"@babel/helpers - typeof";return L0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L0(e)}function Qae(e,t){if(e==null)return{};var r=Zae(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Zae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function vO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vO(Object(r),!0).forEach(function(n){ene(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ene(e,t,r){return t=tne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tne(e){var t=rne(e,"string");return L0(t)=="symbol"?t:t+""}function rne(e,t){if(L0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(L0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ane(e,t){return Wp(Wp({},t),e)}function nne(e,t){return e==="symbols"}function bO(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ke.createElement($k,r);case"trapezoid":return ke.createElement(Xae,r);case"sector":return ke.createElement(pF,r);case"symbols":if(nne(t))return ke.createElement(ak,r);break;default:return null}}function sne(e){return P.isValidElement(e)?e.props:e}function AF(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?ane:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,d=Qae(e,Jae),u;if(P.isValidElement(t))u=P.cloneElement(t,Wp(Wp({},d),sne(t)));else if(or(t))u=t(d);else if(Fae(t)&&!Bae(t)){var f=s(t,d);u=ke.createElement(bO,{shapeType:r,elementProps:f})}else{var m=d;u=ke.createElement(bO,{shapeType:r,elementProps:m})}return l?ke.createElement(qr,{className:o},u):u}function lx(e,t){return t!=null&&"trapezoids"in e.props}function cx(e,t){return t!=null&&"sectors"in e.props}function B0(e,t){return t!=null&&"points"in e.props}function ine(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&i}function one(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function lne(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function cne(e,t){var r;return lx(e,t)?r=ine:cx(e,t)?r=one:B0(e,t)&&(r=lne),r}function dne(e,t){var r;return lx(e,t)?r="trapezoids":cx(e,t)?r="sectors":B0(e,t)&&(r="points"),r}function une(e,t){if(lx(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(cx(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return B0(e,t)?t.payload:{}}function hne(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=dne(r,t),i=une(r,t),o=n.filter(function(d,u){var f=Tu(i,d),m=r.props[s].filter(function(b){var y=cne(r,t);return y(b,t)}),p=r.props[s].indexOf(m[m.length-1]),g=u===p;return f&&g}),l=n.indexOf(o[o.length-1]);return l}var Xm;function su(e){"@babel/helpers - typeof";return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},su(e)}function Id(){return Id=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Id.apply(this,arguments)}function wO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wO(Object(r),!0).forEach(function(n){oi(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DF(n.key),n)}}function mne(e,t,r){return t&&jO(e.prototype,t),r&&jO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pne(e,t,r){return t=zp(t),gne(e,TF()?Reflect.construct(t,r||[],zp(e).constructor):t.apply(e,r))}function gne(e,t){if(t&&(su(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xne(e)}function xne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TF=function(){return!!e})()}function zp(e){return zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zp(e)}function yne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HN(e,t)}function HN(e,t){return HN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},HN(e,t)}function oi(e,t,r){return t=DF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DF(e){var t=vne(e,"string");return su(t)=="symbol"?t:t+""}function vne(e,t){if(su(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(su(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var so=(function(e){function t(r){var n;return fne(this,t),n=pne(this,t,[r]),oi(n,"pieRef",null),oi(n,"sectorRefs",[]),oi(n,"id",Eu("recharts-pie-")),oi(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),or(s)&&s()}),oi(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),or(s)&&s()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return yne(t,e),mne(t,[{key:"isActiveIndex",value:function(n){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(n)!==-1:n===s}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,d=i.dataKey,u=i.valueKey,f=Jt(this.props,!1),m=Jt(o,!1),p=Jt(l,!1),g=o&&o.offsetRadius||20,b=n.map(function(y,v){var k=(y.startAngle+y.endAngle)/2,S=ta(y.cx,y.cy,y.outerRadius+g,k),w=ya(ya(ya(ya({},f),y),{},{stroke:"none"},m),{},{index:v,textAnchor:t.getTextAnchor(S.x,y.cx)},S),A=ya(ya(ya(ya({},f),y),{},{fill:"none",stroke:y.fill},p),{},{index:v,points:[ta(y.cx,y.cy,y.outerRadius,k),S]}),C=d;return wr(d)&&wr(u)?C="value":wr(d)&&(C=u),ke.createElement(qr,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(v)},l&&t.renderLabelLineItem(l,A,"line"),t.renderLabelItem(o,w,za(y,C)))});return ke.createElement(qr,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(n){var s=this,i=this.props,o=i.activeShape,l=i.blendStroke,d=i.inactiveShape;return n.map(function(u,f){if(u?.startAngle===0&&u?.endAngle===0&&n.length!==1)return null;var m=s.isActiveIndex(f),p=d&&s.hasActiveIndex()?d:null,g=m?o:p,b=ya(ya({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return ke.createElement(qr,Id({ref:function(v){v&&!s.sectorRefs.includes(v)&&s.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},_c(s.props,u,f),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(f)}),ke.createElement(AF,Id({option:g,isActive:m,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,s=this.props,i=s.sectors,o=s.isAnimationActive,l=s.animationBegin,d=s.animationDuration,u=s.animationEasing,f=s.animationId,m=this.state,p=m.prevSectors,g=m.prevIsAnimationActive;return ke.createElement($i,{begin:l,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var y=b.t,v=[],k=i&&i[0],S=k.startAngle;return i.forEach(function(w,A){var C=p&&p[A],N=A>0?Us(w,"paddingAngle",0):0;if(C){var E=Pn(C.endAngle-C.startAngle,w.endAngle-w.startAngle),_=ya(ya({},w),{},{startAngle:S+N,endAngle:S+E(y)+N});v.push(_),S=_.endAngle}else{var O=w.endAngle,B=w.startAngle,F=Pn(0,O-B),D=F(y),H=ya(ya({},w),{},{startAngle:S+N,endAngle:S+D+N});v.push(H),S=H.endAngle}}),ke.createElement(qr,null,n.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(n){var s=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,s=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!Tu(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,s=this.props,i=s.hide,o=s.sectors,l=s.className,d=s.label,u=s.cx,f=s.cy,m=s.innerRadius,p=s.outerRadius,g=s.isAnimationActive,b=this.state.isAnimationFinished;if(i||!o||!o.length||!At(u)||!At(f)||!At(m)||!At(p))return null;var y=br("recharts-pie",l);return ke.createElement(qr,{tabIndex:this.props.rootTabIndex,className:y,ref:function(k){n.pieRef=k}},this.renderSectors(),d&&this.renderLabels(o),Nn.renderCallByParent(this.props,null,!1),(!g||b)&&Qi.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return s.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:n.sectors!==s.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,s){return n>s?"start":n<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,s,i){if(ke.isValidElement(n))return ke.cloneElement(n,s);if(or(n))return n(s);var o=br("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return ke.createElement(Mp,Id({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,s,i){if(ke.isValidElement(n))return ke.cloneElement(n,s);var o=i;if(or(n)&&(o=n(s),ke.isValidElement(o)))return o;var l=br("recharts-pie-label-text",typeof n!="boolean"&&!or(n)?n.className:"");return ke.createElement(Ec,Id({},s,{alignmentBaseline:"middle",className:l}),o)}}])})(P.PureComponent);Xm=so;oi(so,"displayName","Pie");oi(so,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Dl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});oi(so,"parseDeltaAngle",function(e,t){var r=os(t-e),n=Math.min(Math.abs(t-e),360);return r*n});oi(so,"getRealPieData",function(e){var t=e.data,r=e.children,n=Jt(e,!1),s=Hs(r,Jd);return t&&t.length?t.map(function(i,o){return ya(ya(ya({payload:i},n),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return ya(ya({},n),i.props)}):[]});oi(so,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,s=t.width,i=t.height,o=cF(s,i),l=n+ls(e.cx,s,s/2),d=r+ls(e.cy,i,i/2),u=ls(e.innerRadius,o,0),f=ls(e.outerRadius,o,o*.8),m=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:d,innerRadius:u,outerRadius:f,maxRadius:m}});oi(so,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?ya(ya({},t.type.defaultProps),t.props):t.props,s=Xm.getRealPieData(n);if(!s||!s.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,d=n.paddingAngle,u=n.dataKey,f=n.nameKey,m=n.valueKey,p=n.tooltipType,g=Math.abs(n.minAngle),b=Xm.parseCoordinateOfPie(n,r),y=Xm.parseDeltaAngle(o,l),v=Math.abs(y),k=u;wr(u)&&wr(m)?(Ri(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),k="value"):wr(u)&&(Ri(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),k=m);var S=s.filter(function(_){return za(_,k,0)!==0}).length,w=(v>=360?S:S-1)*d,A=v-S*g-w,C=s.reduce(function(_,O){var B=za(O,k,0);return _+(At(B)?B:0)},0),N;if(C>0){var E;N=s.map(function(_,O){var B=za(_,k,0),F=za(_,f,O),D=(At(B)?B:0)/C,H;O?H=E.endAngle+os(y)*d*(B!==0?1:0):H=o;var ne=H+os(y)*((B!==0?g:0)+D*A),W=(H+ne)/2,ee=(b.innerRadius+b.outerRadius)/2,re=[{name:F,value:B,payload:_,dataKey:k,type:p}],Q=ta(b.cx,b.cy,ee,W);return E=ya(ya(ya({percent:D,cornerRadius:i,name:F,tooltipPayload:re,midAngle:W,middleRadius:ee,tooltipPosition:Q},_),b),{},{value:za(_,k),startAngle:H,endAngle:ne,payload:_,paddingAngle:os(y)*d}),E})}return ya(ya({},b),{},{sectors:N,data:s})});var H1,NO;function bne(){if(NO)return H1;NO=1;function e(t){return t&&t.length?t[0]:void 0}return H1=e,H1}var q1,kO;function wne(){return kO||(kO=1,q1=bne()),q1}var jne=wne();const Nne=sa(jne);var kne=["key"];function iu(e){"@babel/helpers - typeof";return iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iu(e)}function Sne(e,t){if(e==null)return{};var r=_ne(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _ne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Kp(){return Kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kp.apply(this,arguments)}function SO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function as(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SO(Object(r),!0).forEach(function(n){ko(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ene(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PF(n.key),n)}}function Cne(e,t,r){return t&&_O(e.prototype,t),r&&_O(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ane(e,t,r){return t=Vp(t),Tne(e,OF()?Reflect.construct(t,r||[],Vp(e).constructor):t.apply(e,r))}function Tne(e,t){if(t&&(iu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dne(e)}function Dne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OF=function(){return!!e})()}function Vp(e){return Vp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vp(e)}function One(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qN(e,t)}function qN(e,t){return qN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},qN(e,t)}function ko(e,t,r){return t=PF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PF(e){var t=Pne(e,"string");return iu(t)=="symbol"?t:t+""}function Pne(e,t){if(iu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(iu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var vc=(function(e){function t(){var r;Ene(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Ane(this,t,[].concat(s)),ko(r,"state",{isAnimationFinished:!1}),ko(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),or(o)&&o()}),ko(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),or(o)&&o()}),ko(r,"handleMouseEnter",function(o){var l=r.props.onMouseEnter;l&&l(r.props,o)}),ko(r,"handleMouseLeave",function(o){var l=r.props.onMouseLeave;l&&l(r.props,o)}),r}return One(t,e),Cne(t,[{key:"renderDots",value:function(n){var s=this.props,i=s.dot,o=s.dataKey,l=Jt(this.props,!1),d=Jt(i,!0),u=n.map(function(f,m){var p=as(as(as({key:"dot-".concat(m),r:3},l),d),{},{dataKey:o,cx:f.x,cy:f.y,index:m,payload:f});return t.renderDotItem(i,p)});return ke.createElement(qr,{className:"recharts-radar-dots"},u)}},{key:"renderPolygonStatically",value:function(n){var s=this.props,i=s.shape,o=s.dot,l=s.isRange,d=s.baseLinePoints,u=s.connectNulls,f;return ke.isValidElement(i)?f=ke.cloneElement(i,as(as({},this.props),{},{points:n})):or(i)?f=i(as(as({},this.props),{},{points:n})):f=ke.createElement(NF,Kp({},Jt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:l?d:null,connectNulls:u})),ke.createElement(qr,{className:"recharts-radar-polygon"},f,o?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,s=this.props,i=s.points,o=s.isAnimationActive,l=s.animationBegin,d=s.animationDuration,u=s.animationEasing,f=s.animationId,m=this.state.prevPoints;return ke.createElement($i,{begin:l,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"radar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var g=p.t,b=m&&m.length/i.length,y=i.map(function(v,k){var S=m&&m[Math.floor(k*b)];if(S){var w=Pn(S.x,v.x),A=Pn(S.y,v.y);return as(as({},v),{},{x:w(g),y:A(g)})}var C=Pn(v.cx,v.x),N=Pn(v.cy,v.y);return as(as({},v),{},{x:C(g),y:N(g)})});return n.renderPolygonStatically(y)})}},{key:"renderPolygon",value:function(){var n=this.props,s=n.points,i=n.isAnimationActive,o=n.isRange,l=this.state.prevPoints;return i&&s&&s.length&&!o&&(!l||!Tu(l,s))?this.renderPolygonWithAnimation():this.renderPolygonStatically(s)}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.className,o=n.points,l=n.isAnimationActive;if(s||!o||!o.length)return null;var d=this.state.isAnimationFinished,u=br("recharts-radar",i);return ke.createElement(qr,{className:u},this.renderPolygon(),(!l||d)&&Qi.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,s){var i;if(ke.isValidElement(n))i=ke.cloneElement(n,s);else if(or(n))i=n(s);else{var o=s.key,l=Sne(s,kne);i=ke.createElement(pf,Kp({},l,{key:o,className:br("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return i}}])})(P.PureComponent);ko(vc,"displayName","Radar");ko(vc,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Dl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ko(vc,"getComposedData",function(e){var t=e.radiusAxis,r=e.angleAxis,n=e.displayedData,s=e.dataKey,i=e.bandSize,o=r.cx,l=r.cy,d=!1,u=[],f=r.type!=="number"?i??0:0;n.forEach(function(p,g){var b=za(p,r.dataKey,g),y=za(p,s),v=r.scale(b)+f,k=Array.isArray(y)?fF(y):y,S=wr(k)?void 0:t.scale(k);Array.isArray(y)&&y.length>=2&&(d=!0),u.push(as(as({},ta(o,l,S,v)),{},{name:b,value:y,cx:o,cy:l,radius:S,angle:v,payload:p}))});var m=[];return d&&u.forEach(function(p){if(Array.isArray(p.value)){var g=Nne(p.value),b=wr(g)?void 0:t.scale(g);m.push(as(as({},p),{},{radius:b},ta(o,l,b,p.angle)))}else m.push(p)}),{points:u,isRange:d,baseLinePoints:m}});var W1,EO;function Ine(){if(EO)return W1;EO=1;var e=Math.ceil,t=Math.max;function r(n,s,i,o){for(var l=-1,d=t(e((s-n)/(i||1)),0),u=Array(d);d--;)u[o?d:++l]=n,n+=i;return u}return W1=r,W1}var z1,CO;function IF(){if(CO)return z1;CO=1;var e=JM(),t=1/0,r=17976931348623157e292;function n(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return z1=n,z1}var K1,AO;function Mne(){if(AO)return K1;AO=1;var e=Ine(),t=Gg(),r=IF();function n(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,s)}}return K1=n,K1}var V1,TO;function Rne(){if(TO)return V1;TO=1;var e=Mne(),t=e();return V1=t,V1}var Fne=Rne();const Gp=sa(Fne);function U0(e){"@babel/helpers - typeof";return U0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U0(e)}function DO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function OO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DO(Object(r),!0).forEach(function(n){MF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MF(e,t,r){return t=$ne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ne(e){var t=Lne(e,"string");return U0(t)=="symbol"?t:t+""}function Lne(e,t){if(U0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(U0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bne=["Webkit","Moz","O","ms"],Une=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=Bne.reduce(function(i,o){return OO(OO({},i),{},MF({},o+n,r))},{});return s[t]=r,s};function ou(e){"@babel/helpers - typeof";return ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ou(e)}function Yp(){return Yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yp.apply(this,arguments)}function PO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function G1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PO(Object(r),!0).forEach(function(n){Ps(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FF(n.key),n)}}function qne(e,t,r){return t&&IO(e.prototype,t),r&&IO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wne(e,t,r){return t=Xp(t),zne(e,RF()?Reflect.construct(t,r||[],Xp(e).constructor):t.apply(e,r))}function zne(e,t){if(t&&(ou(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kne(e)}function Kne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RF=function(){return!!e})()}function Xp(e){return Xp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xp(e)}function Vne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WN(e,t)}function WN(e,t){return WN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},WN(e,t)}function Ps(e,t,r){return t=FF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FF(e){var t=Gne(e,"string");return ou(t)=="symbol"?t:t+""}function Gne(e,t){if(ou(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Yne=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var d=r.length,u=Bh().domain(Gp(0,d)).range([i,i+o-l]),f=u.domain().map(function(m){return u(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(s),scale:u,scaleValues:f}},MO=function(t){return t.changedTouches&&!!t.changedTouches.length},lu=(function(e){function t(r){var n;return Hne(this,t),n=Wne(this,t,[r]),Ps(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),Ps(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),Ps(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),Ps(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ps(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ps(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ps(n,"handleSlideDragStart",function(s){var i=MO(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Vne(t,e),qne(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,d=l.gap,u=l.data,f=u.length-1,m=Math.min(s,i),p=Math.max(s,i),g=t.getIndexInRange(o,m),b=t.getIndexInRange(o,p);return{startIndex:g-g%d,endIndex:b===f?f:b-b%d}}},{key:"getTextOfTick",value:function(n){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,d=za(i[n],l,n);return or(o)?o(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,d=this.props,u=d.x,f=d.width,m=d.travellerWidth,p=d.startIndex,g=d.endIndex,b=d.onChange,y=n.pageX-i;y>0?y=Math.min(y,u+f-m-l,u+f-m-o):y<0&&(y=Math.max(y,u-o,u-l));var v=this.getIndex({startX:o+y,endX:l+y});(v.startIndex!==p||v.endIndex!==g)&&b&&b(v),this.setState({startX:o+y,endX:l+y,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var i=MO(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,d=s.startX,u=this.state[o],f=this.props,m=f.x,p=f.width,g=f.travellerWidth,b=f.onChange,y=f.gap,v=f.data,k={startX:this.state.startX,endX:this.state.endX},S=n.pageX-i;S>0?S=Math.min(S,m+p-g-u):S<0&&(S=Math.max(S,m-u)),k[o]=u+S;var w=this.getIndex(k),A=w.startIndex,C=w.endIndex,N=function(){var _=v.length-1;return o==="startX"&&(l>d?A%y===0:C%y===0)||l<d&&C===_||o==="endX"&&(l>d?C%y===0:A%y===0)||l>d&&C===_};this.setState(Ps(Ps({},o,u+S),"brushMoveStartX",n.pageX),function(){b&&N()&&b(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var i=this,o=this.state,l=o.scaleValues,d=o.startX,u=o.endX,f=this.state[s],m=l.indexOf(f);if(m!==-1){var p=m+n;if(!(p===-1||p>=l.length)){var g=l[p];s==="startX"&&g>=u||s==="endX"&&g<=d||this.setState(Ps({},s,g),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,d=n.fill,u=n.stroke;return ke.createElement("rect",{stroke:u,fill:d,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,d=n.data,u=n.children,f=n.padding,m=P.Children.only(u);return m?ke.cloneElement(m,{x:s,y:i,width:o,height:l,margin:f,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,s){var i,o,l=this,d=this.props,u=d.y,f=d.travellerWidth,m=d.height,p=d.traveller,g=d.ariaLabel,b=d.data,y=d.startIndex,v=d.endIndex,k=Math.max(n,this.props.x),S=G1(G1({},Jt(this.props,!1)),{},{x:k,y:u,width:f,height:m}),w=g||"Min value: ".concat((i=b[y])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=b[v])===null||o===void 0?void 0:o.name);return ke.createElement(qr,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),l.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,S))}},{key:"renderSlide",value:function(n,s){var i=this.props,o=i.y,l=i.height,d=i.stroke,u=i.travellerWidth,f=Math.min(n,s)+u,m=Math.max(Math.abs(s-n)-u,0);return ke.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:f,y:o,width:m,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,i=n.endIndex,o=n.y,l=n.height,d=n.travellerWidth,u=n.stroke,f=this.state,m=f.startX,p=f.endX,g=5,b={pointerEvents:"none",fill:u};return ke.createElement(qr,{className:"recharts-brush-texts"},ke.createElement(Ec,Yp({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,p)-g,y:o+l/2},b),this.getTextOfTick(s)),ke.createElement(Ec,Yp({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,p)+d+g,y:o+l/2},b),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,s=n.data,i=n.className,o=n.children,l=n.x,d=n.y,u=n.width,f=n.height,m=n.alwaysShowText,p=this.state,g=p.startX,b=p.endX,y=p.isTextActive,v=p.isSlideMoving,k=p.isTravellerMoving,S=p.isTravellerFocused;if(!s||!s.length||!At(l)||!At(d)||!At(u)||!At(f)||u<=0||f<=0)return null;var w=br("recharts-brush",i),A=ke.Children.count(o)===1,C=Une("userSelect","none");return ke.createElement(qr,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:C},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(g,b),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(b,"endX"),(y||v||k||S||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,i=n.y,o=n.width,l=n.height,d=n.stroke,u=Math.floor(i+l/2)-1;return ke.createElement(ke.Fragment,null,ke.createElement("rect",{x:s,y:i,width:o,height:l,fill:d,stroke:"none"}),ke.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),ke.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var i;return ke.isValidElement(n)?i=ke.cloneElement(n,s):or(n)?i=n(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(n,s){var i=n.data,o=n.width,l=n.x,d=n.travellerWidth,u=n.updateId,f=n.startIndex,m=n.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return G1({prevData:i,prevTravellerWidth:d,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?Yne({data:i,width:o,x:l,travellerWidth:d,startIndex:f,endIndex:m}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||d!==s.prevTravellerWidth)){s.scale.range([l,l+o-d]);var p=s.scale.domain().map(function(g){return s.scale(g)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(n,s){for(var i=n.length,o=0,l=i-1;l-o>1;){var d=Math.floor((o+l)/2);n[d]>s?l=d:o=d}return s>=n[l]?l:o}}])})(P.PureComponent);Ps(lu,"displayName","Brush");Ps(lu,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Y1,RO;function Xne(){if(RO)return Y1;RO=1;var e=dk();function t(r,n){var s;return e(r,function(i,o,l){return s=n(i,o,l),!s}),!!s}return Y1=t,Y1}var X1,FO;function Jne(){if(FO)return X1;FO=1;var e=CM(),t=no(),r=Xne(),n=_s(),s=Gg();function i(o,l,d){var u=n(o)?e:r;return d&&s(o,l,d)&&(l=void 0),u(o,t(l,3))}return X1=i,X1}var Qne=Jne();const Zne=sa(Qne);var Zi=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},J1,$O;function ese(){if($O)return J1;$O=1;var e=KM();function t(r,n,s){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[n]=s}return J1=t,J1}var Q1,LO;function tse(){if(LO)return Q1;LO=1;var e=ese(),t=WM(),r=no();function n(s,i){var o={};return i=r(i,3),t(s,function(l,d,u){e(o,d,i(l,d,u))}),o}return Q1=n,Q1}var rse=tse();const ase=sa(rse);var Z1,BO;function nse(){if(BO)return Z1;BO=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(!r(t[n],n,t))return!1;return!0}return Z1=e,Z1}var ej,UO;function sse(){if(UO)return ej;UO=1;var e=dk();function t(r,n){var s=!0;return e(r,function(i,o,l){return s=!!n(i,o,l),s}),s}return ej=t,ej}var tj,HO;function ise(){if(HO)return tj;HO=1;var e=nse(),t=sse(),r=no(),n=_s(),s=Gg();function i(o,l,d){var u=n(o)?e:t;return d&&s(o,l,d)&&(l=void 0),u(o,r(l,3))}return tj=i,tj}var ose=ise();const $F=sa(ose);var lse=["x","y"];function H0(e){"@babel/helpers - typeof";return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H0(e)}function zN(){return zN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zN.apply(this,arguments)}function qO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qO(Object(r),!0).forEach(function(n){cse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cse(e,t,r){return t=dse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dse(e){var t=use(e,"string");return H0(t)=="symbol"?t:t+""}function use(e,t){if(H0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(H0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hse(e,t){if(e==null)return{};var r=fse(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fse(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function mse(e,t){var r=e.x,n=e.y,s=hse(e,lse),i="".concat(r),o=parseInt(i,10),l="".concat(n),d=parseInt(l,10),u="".concat(t.height||s.height),f=parseInt(u,10),m="".concat(t.width||s.width),p=parseInt(m,10);return kh(kh(kh(kh(kh({},t),s),o?{x:o}:{}),d?{y:d}:{}),{},{height:f,width:p,name:t.name,radius:t.radius})}function WO(e){return ke.createElement(AF,zN({shapeType:"rectangle",propTransformer:mse,activeClassName:"recharts-active-bar"},e))}var pse=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var i=At(n)||fz(n);return i?t(n,s):(i||Ac(),r)}},gse=["value","background"],LF;function cu(e){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cu(e)}function xse(e,t){if(e==null)return{};var r=yse(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yse(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Jp(){return Jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jp.apply(this,arguments)}function zO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ga(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(r),!0).forEach(function(n){bl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UF(n.key),n)}}function bse(e,t,r){return t&&KO(e.prototype,t),r&&KO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wse(e,t,r){return t=Qp(t),jse(e,BF()?Reflect.construct(t,r||[],Qp(e).constructor):t.apply(e,r))}function jse(e,t){if(t&&(cu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nse(e)}function Nse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BF=function(){return!!e})()}function Qp(e){return Qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qp(e)}function kse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KN(e,t)}function KN(e,t){return KN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},KN(e,t)}function bl(e,t,r){return t=UF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UF(e){var t=Sse(e,"string");return cu(t)=="symbol"?t:t+""}function Sse(e,t){if(cu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var hn=(function(e){function t(){var r;vse(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=wse(this,t,[].concat(s)),bl(r,"state",{isAnimationFinished:!1}),bl(r,"id",Eu("recharts-bar-")),bl(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),bl(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return kse(t,e),bse(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,i=this.props,o=i.shape,l=i.dataKey,d=i.activeIndex,u=i.activeBar,f=Jt(this.props,!1);return n&&n.map(function(m,p){var g=p===d,b=g?u:o,y=Ga(Ga(Ga({},f),m),{},{isActive:g,option:b,index:p,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return ke.createElement(qr,Jp({className:"recharts-bar-rectangle"},_c(s.props,m,p),{key:"rectangle-".concat(m?.x,"-").concat(m?.y,"-").concat(m?.value,"-").concat(p)}),ke.createElement(WO,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,d=s.animationBegin,u=s.animationDuration,f=s.animationEasing,m=s.animationId,p=this.state.prevData;return ke.createElement($i,{begin:d,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var b=g.t,y=i.map(function(v,k){var S=p&&p[k];if(S){var w=Pn(S.x,v.x),A=Pn(S.y,v.y),C=Pn(S.width,v.width),N=Pn(S.height,v.height);return Ga(Ga({},v),{},{x:w(b),y:A(b),width:C(b),height:N(b)})}if(o==="horizontal"){var E=Pn(0,v.height),_=E(b);return Ga(Ga({},v),{},{y:v.y+v.height-_,height:_})}var O=Pn(0,v.width),B=O(b);return Ga(Ga({},v),{},{width:B})});return ke.createElement(qr,null,n.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!Tu(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,d=Jt(this.props.background,!1);return i.map(function(u,f){u.value;var m=u.background,p=xse(u,gse);if(!m)return null;var g=Ga(Ga(Ga(Ga(Ga({},p),{},{fill:"#eee"},m),d),_c(n.props,u,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return ke.createElement(WO,Jp({key:"background-bar-".concat(f),option:n.props.background,isActive:f===l},g))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,d=i.yAxis,u=i.layout,f=i.children,m=Hs(f,mf);if(!m)return null;var p=u==="vertical"?o[0].height/2:o[0].width/2,g=function(v,k){var S=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:S,errorVal:za(v,k)}},b={clipPath:n?"url(#clipPath-".concat(s,")"):null};return ke.createElement(qr,b,m.map(function(y){return ke.cloneElement(y,{key:"error-bar-".concat(s,"-").concat(y.props.dataKey),data:o,xAxis:l,yAxis:d,layout:u,offset:p,dataPointFormatter:g})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.data,o=n.className,l=n.xAxis,d=n.yAxis,u=n.left,f=n.top,m=n.width,p=n.height,g=n.isAnimationActive,b=n.background,y=n.id;if(s||!i||!i.length)return null;var v=this.state.isAnimationFinished,k=br("recharts-bar",o),S=l&&l.allowDataOverflow,w=d&&d.allowDataOverflow,A=S||w,C=wr(y)?this.id:y;return ke.createElement(qr,{className:k},S||w?ke.createElement("defs",null,ke.createElement("clipPath",{id:"clipPath-".concat(C)},ke.createElement("rect",{x:S?u:u-m/2,y:w?f:f-p/2,width:S?m:m*2,height:w?p:p*2}))):null,ke.createElement(qr,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(C,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,C),(!g||v)&&Qi.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])})(P.PureComponent);LF=hn;bl(hn,"displayName","Bar");bl(hn,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Dl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});bl(hn,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,d=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,m=e.displayedData,p=e.offset,g=CZ(n,r);if(!g)return null;var b=t.layout,y=r.type.defaultProps,v=y!==void 0?Ga(Ga({},y),r.props):r.props,k=v.dataKey,S=v.children,w=v.minPointSize,A=b==="horizontal"?o:i,C=u?A.scale.domain():null,N=MZ({numericAxis:A}),E=Hs(S,Jd),_=m.map(function(O,B){var F,D,H,ne,W,ee;u?F=AZ(u[f+B],C):(F=za(O,k),Array.isArray(F)||(F=[N,F]));var re=pse(w,LF.defaultProps.minPointSize)(F[1],B);if(b==="horizontal"){var Q,R=[o.scale(F[0]),o.scale(F[1])],X=R[0],L=R[1];D=p3({axis:i,ticks:l,bandSize:s,offset:g.offset,entry:O,index:B}),H=(Q=L??X)!==null&&Q!==void 0?Q:void 0,ne=g.size;var I=X-L;if(W=Number.isNaN(I)?0:I,ee={x:D,y:o.y,width:ne,height:o.height},Math.abs(re)>0&&Math.abs(W)<Math.abs(re)){var G=os(W||re)*(Math.abs(re)-Math.abs(W));H-=G,W+=G}}else{var V=[i.scale(F[0]),i.scale(F[1])],Z=V[0],ve=V[1];if(D=Z,H=p3({axis:o,ticks:d,bandSize:s,offset:g.offset,entry:O,index:B}),ne=ve-Z,W=g.size,ee={x:i.x,y:H,width:i.width,height:W},Math.abs(re)>0&&Math.abs(ne)<Math.abs(re)){var Ee=os(ne||re)*(Math.abs(re)-Math.abs(ne));ne+=Ee}}return Ga(Ga(Ga({},O),{},{x:D,y:H,width:ne,height:W,value:u?F:F[1],payload:O,background:ee},E&&E[B]&&E[B].props),{},{tooltipPayload:[oF(r,O)],tooltipPosition:{x:D+ne/2,y:H+W/2}})});return Ga({data:_,layout:b},p)});function q0(e){"@babel/helpers - typeof";return q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q0(e)}function _se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HF(n.key),n)}}function Ese(e,t,r){return t&&VO(e.prototype,t),r&&VO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function GO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ai(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GO(Object(r),!0).forEach(function(n){dx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dx(e,t,r){return t=HF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HF(e){var t=Cse(e,"string");return q0(t)=="symbol"?t:t+""}function Cse(e,t){if(q0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(q0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qF=function(t,r,n,s,i){var o=t.width,l=t.height,d=t.layout,u=t.children,f=Object.keys(r),m={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},p=!!Is(u,hn);return f.reduce(function(g,b){var y=r[b],v=y.orientation,k=y.domain,S=y.padding,w=S===void 0?{}:S,A=y.mirror,C=y.reversed,N="".concat(v).concat(A?"Mirror":""),E,_,O,B,F;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var D=k[1]-k[0],H=1/0,ne=y.categoricalDomain.sort(gz);if(ne.forEach(function(V,Z){Z>0&&(H=Math.min((V||0)-(ne[Z-1]||0),H))}),Number.isFinite(H)){var W=H/D,ee=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(E=W*ee/2),y.padding==="no-gap"){var re=ls(t.barCategoryGap,W*ee),Q=W*ee/2;E=Q-re-(Q-re)/ee*re}}}s==="xAxis"?_=[n.left+(w.left||0)+(E||0),n.left+n.width-(w.right||0)-(E||0)]:s==="yAxis"?_=d==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(E||0),n.top+n.height-(w.bottom||0)-(E||0)]:_=y.range,C&&(_=[_[1],_[0]]);var R=aF(y,i,p),X=R.scale,L=R.realScaleType;X.domain(k).range(_),nF(X);var I=sF(X,Ai(Ai({},y),{},{realScaleType:L}));s==="xAxis"?(F=v==="top"&&!A||v==="bottom"&&A,O=n.left,B=m[N]-F*y.height):s==="yAxis"&&(F=v==="left"&&!A||v==="right"&&A,O=m[N]-F*y.width,B=n.top);var G=Ai(Ai(Ai({},y),I),{},{realScaleType:L,x:O,y:B,scale:X,width:s==="xAxis"?n.width:y.width,height:s==="yAxis"?n.height:y.height});return G.bandSize=Op(G,I),!y.hide&&s==="xAxis"?m[N]+=(F?-1:1)*G.height:y.hide||(m[N]+=(F?-1:1)*G.width),Ai(Ai({},g),{},dx({},b,G))},{})},WF=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(s,o),width:Math.abs(i-n),height:Math.abs(o-s)}},Ase=function(t){var r=t.x1,n=t.y1,s=t.x2,i=t.y2;return WF({x:r,y:n},{x:s,y:i})},zF=(function(){function e(t){_se(this,e),this.scale=t}return Ese(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],i=n[n.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();dx(zF,"EPS",1e-4);var Lk=function(t){var r=Object.keys(t).reduce(function(n,s){return Ai(Ai({},n),{},dx({},s,zF.create(t[s])))},{});return Ai(Ai({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return ase(s,function(d,u){return r[u].apply(d,{bandAware:o,position:l})})},isInRange:function(s){return $F(s,function(i,o){return r[o].isInRange(i)})}})};function Tse(e){return(e%180+180)%180}var Dse=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Tse(s),o=i*Math.PI/180,l=Math.atan(n/r),d=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},rj,YO;function Ose(){if(YO)return rj;YO=1;var e=no(),t=cf(),r=Kg();function n(s){return function(i,o,l){var d=Object(i);if(!t(i)){var u=e(o,3);i=r(i),o=function(m){return u(d[m],m,d)}}var f=s(i,o,l);return f>-1?d[u?i[f]:f]:void 0}}return rj=n,rj}var aj,XO;function Pse(){if(XO)return aj;XO=1;var e=IF();function t(r){var n=e(r),s=n%1;return n===n?s?n-s:n:0}return aj=t,aj}var nj,JO;function Ise(){if(JO)return nj;JO=1;var e=LM(),t=no(),r=Pse(),n=Math.max;function s(i,o,l){var d=i==null?0:i.length;if(!d)return-1;var u=l==null?0:r(l);return u<0&&(u=n(d+u,0)),e(i,t(o,3),u)}return nj=s,nj}var sj,QO;function Mse(){if(QO)return sj;QO=1;var e=Ose(),t=Ise(),r=e(t);return sj=r,sj}var Rse=Mse();const Fse=sa(Rse);var $se=tM();const Lse=sa($se);var Bse=Lse(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Bk=P.createContext(void 0),Uk=P.createContext(void 0),KF=P.createContext(void 0),VF=P.createContext({}),GF=P.createContext(void 0),YF=P.createContext(0),XF=P.createContext(0),ZO=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,d=t.width,u=t.height,f=Bse(i);return ke.createElement(Bk.Provider,{value:n},ke.createElement(Uk.Provider,{value:s},ke.createElement(VF.Provider,{value:i},ke.createElement(KF.Provider,{value:f},ke.createElement(GF.Provider,{value:o},ke.createElement(YF.Provider,{value:u},ke.createElement(XF.Provider,{value:d},l)))))))},Use=function(){return P.useContext(GF)},JF=function(t){var r=P.useContext(Bk);r==null&&Ac();var n=r[t];return n==null&&Ac(),n},Hse=function(){var t=P.useContext(Bk);return xl(t)},qse=function(){var t=P.useContext(Uk),r=Fse(t,function(n){return $F(n.domain,Number.isFinite)});return r||xl(t)},QF=function(t){var r=P.useContext(Uk);r==null&&Ac();var n=r[t];return n==null&&Ac(),n},Wse=function(){var t=P.useContext(KF);return t},zse=function(){return P.useContext(VF)},Hk=function(){return P.useContext(XF)},qk=function(){return P.useContext(YF)};function du(e){"@babel/helpers - typeof";return du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},du(e)}function Kse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vse(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,e$(n.key),n)}}function Gse(e,t,r){return t&&Vse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yse(e,t,r){return t=Zp(t),Xse(e,ZF()?Reflect.construct(t,r||[],Zp(e).constructor):t.apply(e,r))}function Xse(e,t){if(t&&(du(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jse(e)}function Jse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZF=function(){return!!e})()}function Zp(e){return Zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zp(e)}function Qse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VN(e,t)}function VN(e,t){return VN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},VN(e,t)}function eP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eP(Object(r),!0).forEach(function(n){Wk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wk(e,t,r){return t=e$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e$(e){var t=Zse(e,"string");return du(t)=="symbol"?t:t+""}function Zse(e,t){if(du(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function eie(e,t){return nie(e)||aie(e,t)||rie(e,t)||tie()}function tie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rie(e,t){if(e){if(typeof e=="string")return rP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rP(e,t)}}function rP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function nie(e){if(Array.isArray(e))return e}function GN(){return GN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},GN.apply(this,arguments)}var sie=function(t,r){var n;return ke.isValidElement(t)?n=ke.cloneElement(t,r):or(t)?n=t(r):n=ke.createElement("line",GN({},r,{className:"recharts-reference-line-line"})),n},iie=function(t,r,n,s,i,o,l,d,u){var f=i.x,m=i.y,p=i.width,g=i.height;if(n){var b=u.y,y=t.y.apply(b,{position:o});if(Zi(u,"discard")&&!t.y.isInRange(y))return null;var v=[{x:f+p,y},{x:f,y}];return d==="left"?v.reverse():v}if(r){var k=u.x,S=t.x.apply(k,{position:o});if(Zi(u,"discard")&&!t.x.isInRange(S))return null;var w=[{x:S,y:m+g},{x:S,y:m}];return l==="top"?w.reverse():w}if(s){var A=u.segment,C=A.map(function(N){return t.apply(N,{position:o})});return Zi(u,"discard")&&Zne(C,function(N){return!t.isInRange(N)})?null:C}return null};function oie(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,d=e.alwaysShow,u=Use(),f=JF(s),m=QF(i),p=Wse();if(!u||!p)return null;Ri(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=Lk({x:f.scale,y:m.scale}),b=fn(t),y=fn(r),v=n&&n.length===2,k=iie(g,b,y,v,p,e.position,f.orientation,m.orientation,e);if(!k)return null;var S=eie(k,2),w=S[0],A=w.x,C=w.y,N=S[1],E=N.x,_=N.y,O=Zi(e,"hidden")?"url(#".concat(u,")"):void 0,B=tP(tP({clipPath:O},Jt(e,!0)),{},{x1:A,y1:C,x2:E,y2:_});return ke.createElement(qr,{className:br("recharts-reference-line",l)},sie(o,B),Nn.renderCallByParent(e,Ase({x1:A,y1:C,x2:E,y2:_})))}var zk=(function(e){function t(){return Kse(this,t),Yse(this,t,arguments)}return Qse(t,e),Gse(t,[{key:"render",value:function(){return ke.createElement(oie,this.props)}}])})(ke.Component);Wk(zk,"displayName","ReferenceLine");Wk(zk,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function YN(){return YN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YN.apply(this,arguments)}function uu(e){"@babel/helpers - typeof";return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(e)}function aP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aP(Object(r),!0).forEach(function(n){ux(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r$(n.key),n)}}function die(e,t,r){return t&&cie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uie(e,t,r){return t=eg(t),hie(e,t$()?Reflect.construct(t,r||[],eg(e).constructor):t.apply(e,r))}function hie(e,t){if(t&&(uu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fie(e)}function fie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t$=function(){return!!e})()}function eg(e){return eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eg(e)}function mie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XN(e,t)}function XN(e,t){return XN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},XN(e,t)}function ux(e,t,r){return t=r$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r$(e){var t=pie(e,"string");return uu(t)=="symbol"?t:t+""}function pie(e,t){if(uu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(uu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var gie=function(t){var r=t.x,n=t.y,s=t.xAxis,i=t.yAxis,o=Lk({x:s.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Zi(t,"discard")&&!o.isInRange(l)?null:l},hx=(function(e){function t(){return lie(this,t),uie(this,t,arguments)}return mie(t,e),die(t,[{key:"render",value:function(){var n=this.props,s=n.x,i=n.y,o=n.r,l=n.alwaysShow,d=n.clipPathId,u=fn(s),f=fn(i);if(Ri(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var m=gie(this.props);if(!m)return null;var p=m.x,g=m.y,b=this.props,y=b.shape,v=b.className,k=Zi(this.props,"hidden")?"url(#".concat(d,")"):void 0,S=nP(nP({clipPath:k},Jt(this.props,!0)),{},{cx:p,cy:g});return ke.createElement(qr,{className:br("recharts-reference-dot",v)},t.renderDot(y,S),Nn.renderCallByParent(this.props,{x:p-o,y:g-o,width:2*o,height:2*o}))}}])})(ke.Component);ux(hx,"displayName","ReferenceDot");ux(hx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});ux(hx,"renderDot",function(e,t){var r;return ke.isValidElement(e)?r=ke.cloneElement(e,t):or(e)?r=e(t):r=ke.createElement(pf,YN({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function JN(){return JN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JN.apply(this,arguments)}function hu(e){"@babel/helpers - typeof";return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hu(e)}function sP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function iP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sP(Object(r),!0).forEach(function(n){fx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n$(n.key),n)}}function vie(e,t,r){return t&&yie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bie(e,t,r){return t=tg(t),wie(e,a$()?Reflect.construct(t,r||[],tg(e).constructor):t.apply(e,r))}function wie(e,t){if(t&&(hu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jie(e)}function jie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a$=function(){return!!e})()}function tg(e){return tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tg(e)}function Nie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QN(e,t)}function QN(e,t){return QN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},QN(e,t)}function fx(e,t,r){return t=n$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n$(e){var t=kie(e,"string");return hu(t)=="symbol"?t:t+""}function kie(e,t){if(hu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Sie=function(t,r,n,s,i){var o=i.x1,l=i.x2,d=i.y1,u=i.y2,f=i.xAxis,m=i.yAxis;if(!f||!m)return null;var p=Lk({x:f.scale,y:m.scale}),g={x:t?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:n?p.y.apply(d,{position:"start"}):p.y.rangeMin},b={x:r?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:s?p.y.apply(u,{position:"end"}):p.y.rangeMax};return Zi(i,"discard")&&(!p.isInRange(g)||!p.isInRange(b))?null:WF(g,b)},mx=(function(e){function t(){return xie(this,t),bie(this,t,arguments)}return Nie(t,e),vie(t,[{key:"render",value:function(){var n=this.props,s=n.x1,i=n.x2,o=n.y1,l=n.y2,d=n.className,u=n.alwaysShow,f=n.clipPathId;Ri(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=fn(s),p=fn(i),g=fn(o),b=fn(l),y=this.props.shape;if(!m&&!p&&!g&&!b&&!y)return null;var v=Sie(m,p,g,b,this.props);if(!v&&!y)return null;var k=Zi(this.props,"hidden")?"url(#".concat(f,")"):void 0;return ke.createElement(qr,{className:br("recharts-reference-area",d)},t.renderRect(y,iP(iP({clipPath:k},Jt(this.props,!0)),v)),Nn.renderCallByParent(this.props,v))}}])})(ke.Component);fx(mx,"displayName","ReferenceArea");fx(mx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});fx(mx,"renderRect",function(e,t){var r;return ke.isValidElement(e)?r=ke.cloneElement(e,t):or(e)?r=e(t):r=ke.createElement($k,JN({},t,{className:"recharts-reference-area-rect"})),r});function s$(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function _ie(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Dse(n,r)}function Eie(e,t,r){var n=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function rg(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function Cie(e,t){return s$(e,t+1)}function Aie(e,t,r,n,s){for(var i=(n||[]).slice(),o=t.start,l=t.end,d=0,u=1,f=o,m=function(){var b=n?.[d];if(b===void 0)return{v:s$(n,u)};var y=d,v,k=function(){return v===void 0&&(v=r(b,y)),v},S=b.coordinate,w=d===0||rg(e,S,k,f,l);w||(d=0,f=o,u+=1),w&&(f=S+e*(k()/2+s),d+=u)},p;u<=i.length;)if(p=m(),p)return p.v;return[]}function W0(e){"@babel/helpers - typeof";return W0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W0(e)}function oP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oP(Object(r),!0).forEach(function(n){Tie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tie(e,t,r){return t=Die(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Die(e){var t=Oie(e,"string");return W0(t)=="symbol"?t:t+""}function Oie(e,t){if(W0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(W0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pie(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,l=t.start,d=t.end,u=function(p){var g=i[p],b,y=function(){return b===void 0&&(b=r(g,p)),b};if(p===o-1){var v=e*(g.coordinate+e*y()/2-d);i[p]=g=Wn(Wn({},g),{},{tickCoord:v>0?g.coordinate-v*e:g.coordinate})}else i[p]=g=Wn(Wn({},g),{},{tickCoord:g.coordinate});var k=rg(e,g.tickCoord,y,l,d);k&&(d=g.tickCoord-e*(y()/2+s),i[p]=Wn(Wn({},g),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function Iie(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,d=t.start,u=t.end;if(i){var f=n[l-1],m=r(f,l-1),p=e*(f.coordinate+e*m/2-u);o[l-1]=f=Wn(Wn({},f),{},{tickCoord:p>0?f.coordinate-p*e:f.coordinate});var g=rg(e,f.tickCoord,function(){return m},d,u);g&&(u=f.tickCoord-e*(m/2+s),o[l-1]=Wn(Wn({},f),{},{isShow:!0}))}for(var b=i?l-1:l,y=function(S){var w=o[S],A,C=function(){return A===void 0&&(A=r(w,S)),A};if(S===0){var N=e*(w.coordinate-e*C()/2-d);o[S]=w=Wn(Wn({},w),{},{tickCoord:N<0?w.coordinate-N*e:w.coordinate})}else o[S]=w=Wn(Wn({},w),{},{tickCoord:w.coordinate});var E=rg(e,w.tickCoord,C,d,u);E&&(d=w.tickCoord+e*(C()/2+s),o[S]=Wn(Wn({},w),{},{isShow:!0}))},v=0;v<b;v++)y(v);return o}function Kk(e,t,r){var n=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,d=e.interval,u=e.tickFormatter,f=e.unit,m=e.angle;if(!s||!s.length||!n)return[];if(At(d)||Dl.isSsr)return Cie(s,typeof d=="number"&&At(d)?d:0);var p=[],g=l==="top"||l==="bottom"?"width":"height",b=f&&g==="width"?Lh(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},y=function(w,A){var C=or(u)?u(w.value,A):w.value;return g==="width"?_ie(Lh(C,{fontSize:t,letterSpacing:r}),b,m):Lh(C,{fontSize:t,letterSpacing:r})[g]},v=s.length>=2?os(s[1].coordinate-s[0].coordinate):1,k=Eie(i,v,g);return d==="equidistantPreserveStart"?Aie(v,k,y,s,o):(d==="preserveStart"||d==="preserveStartEnd"?p=Iie(v,k,y,s,o,d==="preserveStartEnd"):p=Pie(v,k,y,s,o),p.filter(function(S){return S.isShow}))}var Mie=["viewBox"],Rie=["viewBox"],Fie=["ticks"];function fu(e){"@babel/helpers - typeof";return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fu(e)}function Md(){return Md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Md.apply(this,arguments)}function lP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function on(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lP(Object(r),!0).forEach(function(n){Vk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ij(e,t){if(e==null)return{};var r=$ie(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $ie(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Lie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o$(n.key),n)}}function Bie(e,t,r){return t&&cP(e.prototype,t),r&&cP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Uie(e,t,r){return t=ag(t),Hie(e,i$()?Reflect.construct(t,r||[],ag(e).constructor):t.apply(e,r))}function Hie(e,t){if(t&&(fu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qie(e)}function qie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i$=function(){return!!e})()}function ag(e){return ag=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ag(e)}function Wie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZN(e,t)}function ZN(e,t){return ZN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ZN(e,t)}function Vk(e,t,r){return t=o$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o$(e){var t=zie(e,"string");return fu(t)=="symbol"?t:t+""}function zie(e,t){if(fu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Mu=(function(e){function t(r){var n;return Lie(this,t),n=Uie(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return Wie(t,e),Bie(t,[{key:"shouldComponentUpdate",value:function(n,s){var i=n.viewBox,o=ij(n,Mie),l=this.props,d=l.viewBox,u=ij(l,Rie);return!Bd(i,d)||!Bd(o,u)||!Bd(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.x,o=s.y,l=s.width,d=s.height,u=s.orientation,f=s.tickSize,m=s.mirror,p=s.tickMargin,g,b,y,v,k,S,w=m?-1:1,A=n.tickSize||f,C=At(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":g=b=n.coordinate,v=o+ +!m*d,y=v-w*A,S=y-w*p,k=C;break;case"left":y=v=n.coordinate,b=i+ +!m*l,g=b-w*A,k=g-w*p,S=C;break;case"right":y=v=n.coordinate,b=i+ +m*l,g=b+w*A,k=g+w*p,S=C;break;default:g=b=n.coordinate,v=o+ +m*d,y=v+w*A,S=y+w*p,k=C;break}return{line:{x1:g,y1:y,x2:b,y2:v},tick:{x:k,y:S}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,d=n.orientation,u=n.mirror,f=n.axisLine,m=on(on(on({},Jt(this.props,!1)),Jt(f,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var p=+(d==="top"&&!u||d==="bottom"&&u);m=on(on({},m),{},{x1:s,y1:i+p*l,x2:s+o,y2:i+p*l})}else{var g=+(d==="left"&&!u||d==="right"&&u);m=on(on({},m),{},{x1:s+g*o,y1:i,x2:s+g*o,y2:i+l})}return ke.createElement("line",Md({},m,{className:br("recharts-cartesian-axis-line",Us(f,"className"))}))}},{key:"renderTicks",value:function(n,s,i){var o=this,l=this.props,d=l.tickLine,u=l.stroke,f=l.tick,m=l.tickFormatter,p=l.unit,g=Kk(on(on({},this.props),{},{ticks:n}),s,i),b=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),v=Jt(this.props,!1),k=Jt(f,!1),S=on(on({},v),{},{fill:"none"},Jt(d,!1)),w=g.map(function(A,C){var N=o.getTickLineCoord(A),E=N.line,_=N.tick,O=on(on(on(on({textAnchor:b,verticalAnchor:y},v),{},{stroke:"none",fill:u},k),_),{},{index:C,payload:A,visibleTicksCount:g.length,tickFormatter:m});return ke.createElement(qr,Md({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},_c(o.props,A,C)),d&&ke.createElement("line",Md({},S,E,{className:br("recharts-cartesian-axis-tick-line",Us(d,"className"))})),f&&t.renderTickItem(f,O,"".concat(or(m)?m(A.value,C):A.value).concat(p||"")))});return ke.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,d=s.ticksGenerator,u=s.className,f=s.hide;if(f)return null;var m=this.props,p=m.ticks,g=ij(m,Fie),b=p;return or(d)&&(b=p&&p.length>0?d(this.props):d(g)),o<=0||l<=0||!b||!b.length?null:ke.createElement(qr,{className:br("recharts-cartesian-axis",u),ref:function(v){n.layerReference=v}},i&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),Nn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,i){var o,l=br(s.className,"recharts-cartesian-axis-tick-value");return ke.isValidElement(n)?o=ke.cloneElement(n,on(on({},s),{},{className:l})):or(n)?o=n(on(on({},s),{},{className:l})):o=ke.createElement(Ec,Md({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(P.Component);Vk(Mu,"displayName","CartesianAxis");Vk(Mu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Kie=["x1","y1","x2","y2","key"],Vie=["offset"];function Tc(e){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tc(e)}function dP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dP(Object(r),!0).forEach(function(n){Gie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gie(e,t,r){return t=Yie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yie(e){var t=Xie(e,"string");return Tc(t)=="symbol"?t:t+""}function Xie(e,t){if(Tc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mc(){return mc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mc.apply(this,arguments)}function uP(e,t){if(e==null)return{};var r=Jie(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Jie(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Qie=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,d=t.ry;return ke.createElement("rect",{x:s,y:i,ry:d,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function l$(e,t){var r;if(ke.isValidElement(e))r=ke.cloneElement(e,t);else if(or(e))r=e(t);else{var n=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,d=uP(t,Kie),u=Jt(d,!1);u.offset;var f=uP(u,Vie);r=ke.createElement("line",mc({},f,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function Zie(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,d){var u=Gn(Gn({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(d),index:d});return l$(s,u)});return ke.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function eoe(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,d){var u=Gn(Gn({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(d),index:d});return l$(s,u)});return ke.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function toe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,d=e.horizontal,u=d===void 0?!0:d;if(!u||!t||!t.length)return null;var f=l.map(function(p){return Math.round(p+s-s)}).sort(function(p,g){return p-g});s!==f[0]&&f.unshift(0);var m=f.map(function(p,g){var b=!f[g+1],y=b?s+o-p:f[g+1]-p;if(y<=0)return null;var v=g%t.length;return ke.createElement("rect",{key:"react-".concat(g),y:p,x:n,height:y,width:i,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ke.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function roe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,d=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var f=u.map(function(p){return Math.round(p+i-i)}).sort(function(p,g){return p-g});i!==f[0]&&f.unshift(0);var m=f.map(function(p,g){var b=!f[g+1],y=b?i+l-p:f[g+1]-p;if(y<=0)return null;var v=g%n.length;return ke.createElement("rect",{key:"react-".concat(g),x:p,y:o,width:y,height:d,stroke:"none",fill:n[v],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return ke.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var aoe=function(t,r){var n=t.xAxis,s=t.width,i=t.height,o=t.offset;return rF(Kk(Gn(Gn(Gn({},Mu.defaultProps),n),{},{ticks:Do(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},noe=function(t,r){var n=t.yAxis,s=t.width,i=t.height,o=t.offset;return rF(Kk(Gn(Gn(Gn({},Mu.defaultProps),n),{},{ticks:Do(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},wd={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function bs(e){var t,r,n,s,i,o,l=Hk(),d=qk(),u=zse(),f=Gn(Gn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:wd.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:wd.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:wd.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:wd.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:wd.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:wd.verticalFill,x:At(e.x)?e.x:u.left,y:At(e.y)?e.y:u.top,width:At(e.width)?e.width:u.width,height:At(e.height)?e.height:u.height}),m=f.x,p=f.y,g=f.width,b=f.height,y=f.syncWithTicks,v=f.horizontalValues,k=f.verticalValues,S=Hse(),w=qse();if(!At(g)||g<=0||!At(b)||b<=0||!At(m)||m!==+m||!At(p)||p!==+p)return null;var A=f.verticalCoordinatesGenerator||aoe,C=f.horizontalCoordinatesGenerator||noe,N=f.horizontalPoints,E=f.verticalPoints;if((!N||!N.length)&&or(C)){var _=v&&v.length,O=C({yAxis:w?Gn(Gn({},w),{},{ticks:_?v:w.ticks}):void 0,width:l,height:d,offset:u},_?!0:y);Ri(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Tc(O),"]")),Array.isArray(O)&&(N=O)}if((!E||!E.length)&&or(A)){var B=k&&k.length,F=A({xAxis:S?Gn(Gn({},S),{},{ticks:B?k:S.ticks}):void 0,width:l,height:d,offset:u},B?!0:y);Ri(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Tc(F),"]")),Array.isArray(F)&&(E=F)}return ke.createElement("g",{className:"recharts-cartesian-grid"},ke.createElement(Qie,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),ke.createElement(Zie,mc({},f,{offset:u,horizontalPoints:N,xAxis:S,yAxis:w})),ke.createElement(eoe,mc({},f,{offset:u,verticalPoints:E,xAxis:S,yAxis:w})),ke.createElement(toe,mc({},f,{horizontalPoints:N})),ke.createElement(roe,mc({},f,{verticalPoints:E})))}bs.displayName="CartesianGrid";var soe=["type","layout","connectNulls","ref"],ioe=["key"];function mu(e){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mu(e)}function hP(e,t){if(e==null)return{};var r=ooe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ooe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function zh(){return zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zh.apply(this,arguments)}function fP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Os(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fP(Object(r),!0).forEach(function(n){Ti(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jd(e){return uoe(e)||doe(e)||coe(e)||loe()}function loe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function coe(e,t){if(e){if(typeof e=="string")return e2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e2(e,t)}}function doe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uoe(e){if(Array.isArray(e))return e2(e)}function e2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hoe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d$(n.key),n)}}function foe(e,t,r){return t&&mP(e.prototype,t),r&&mP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function moe(e,t,r){return t=ng(t),poe(e,c$()?Reflect.construct(t,r||[],ng(e).constructor):t.apply(e,r))}function poe(e,t){if(t&&(mu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return goe(e)}function goe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c$=function(){return!!e})()}function ng(e){return ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ng(e)}function xoe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t2(e,t)}function t2(e,t){return t2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},t2(e,t)}function Ti(e,t,r){return t=d$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d$(e){var t=yoe(e,"string");return mu(t)=="symbol"?t:t+""}function yoe(e,t){if(mu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ss=(function(e){function t(){var r;hoe(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=moe(this,t,[].concat(s)),Ti(r,"state",{isAnimationFinished:!0,totalLength:0}),Ti(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Ti(r,"getStrokeDasharray",function(o,l,d){var u=d.reduce(function(k,S){return k+S});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/u),m=o%u,p=l-o,g=[],b=0,y=0;b<d.length;y+=d[b],++b)if(y+d[b]>m){g=[].concat(jd(d.slice(0,b)),[m-y]);break}var v=g.length%2===0?[0,p]:[p];return[].concat(jd(t.repeat(d,f)),jd(g),v).map(function(k){return"".concat(k,"px")}).join(", ")}),Ti(r,"id",Eu("recharts-line-")),Ti(r,"pathRef",function(o){r.mainCurve=o}),Ti(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Ti(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return xoe(t,e),foe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,d=i.yAxis,u=i.layout,f=i.children,m=Hs(f,mf);if(!m)return null;var p=function(y,v){return{x:y.x,y:y.y,value:y.value,errorVal:za(y.payload,v)}},g={clipPath:n?"url(#clipPath-".concat(s,")"):null};return ke.createElement(qr,g,m.map(function(b){return ke.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:o,xAxis:l,yAxis:d,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(n,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,d=l.dot,u=l.points,f=l.dataKey,m=Jt(this.props,!1),p=Jt(d,!0),g=u.map(function(y,v){var k=Os(Os(Os({key:"dot-".concat(v),r:3},m),p),{},{index:v,cx:y.x,cy:y.y,value:y.value,dataKey:f,payload:y.payload,points:u});return t.renderDotItem(d,k)}),b={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return ke.createElement(qr,zh({className:"recharts-line-dots",key:"dots"},b),g)}},{key:"renderCurveStatically",value:function(n,s,i,o){var l=this.props,d=l.type,u=l.layout,f=l.connectNulls;l.ref;var m=hP(l,soe),p=Os(Os(Os({},Jt(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:d,layout:u,connectNulls:f});return ke.createElement(Mp,zh({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,s){var i=this,o=this.props,l=o.points,d=o.strokeDasharray,u=o.isAnimationActive,f=o.animationBegin,m=o.animationDuration,p=o.animationEasing,g=o.animationId,b=o.animateNewValues,y=o.width,v=o.height,k=this.state,S=k.prevPoints,w=k.totalLength;return ke.createElement($i,{begin:f,duration:m,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var C=A.t;if(S){var N=S.length/l.length,E=l.map(function(D,H){var ne=Math.floor(H*N);if(S[ne]){var W=S[ne],ee=Pn(W.x,D.x),re=Pn(W.y,D.y);return Os(Os({},D),{},{x:ee(C),y:re(C)})}if(b){var Q=Pn(y*2,D.x),R=Pn(v/2,D.y);return Os(Os({},D),{},{x:Q(C),y:R(C)})}return Os(Os({},D),{},{x:D.x,y:D.y})});return i.renderCurveStatically(E,n,s)}var _=Pn(0,w),O=_(C),B;if(d){var F="".concat(d).split(/[,\s]+/gim).map(function(D){return parseFloat(D)});B=i.getStrokeDasharray(O,w,F)}else B=i.generateSimpleStrokeDasharray(w,O);return i.renderCurveStatically(l,n,s,{strokeDasharray:B})})}},{key:"renderCurve",value:function(n,s){var i=this.props,o=i.points,l=i.isAnimationActive,d=this.state,u=d.prevPoints,f=d.totalLength;return l&&o&&o.length&&(!u&&f>0||!Tu(u,o))?this.renderCurveWithAnimation(n,s):this.renderCurveStatically(o,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,o=s.dot,l=s.points,d=s.className,u=s.xAxis,f=s.yAxis,m=s.top,p=s.left,g=s.width,b=s.height,y=s.isAnimationActive,v=s.id;if(i||!l||!l.length)return null;var k=this.state.isAnimationFinished,S=l.length===1,w=br("recharts-line",d),A=u&&u.allowDataOverflow,C=f&&f.allowDataOverflow,N=A||C,E=wr(v)?this.id:v,_=(n=Jt(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},O=_.r,B=O===void 0?3:O,F=_.strokeWidth,D=F===void 0?2:F,H=Sz(o)?o:{},ne=H.clipDot,W=ne===void 0?!0:ne,ee=B*2+D;return ke.createElement(qr,{className:w},A||C?ke.createElement("defs",null,ke.createElement("clipPath",{id:"clipPath-".concat(E)},ke.createElement("rect",{x:A?p:p-g/2,y:C?m:m-b/2,width:A?g:g*2,height:C?b:b*2})),!W&&ke.createElement("clipPath",{id:"clipPath-dots-".concat(E)},ke.createElement("rect",{x:p-ee/2,y:m-ee/2,width:g+ee,height:b+ee}))):null,!S&&this.renderCurve(N,E),this.renderErrorBar(N,E),(S||o)&&this.renderDots(N,W,E),(!y||k)&&Qi.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,s){for(var i=n.length%2!==0?[].concat(jd(n),[0]):n,o=[],l=0;l<s;++l)o=[].concat(jd(o),jd(i));return o}},{key:"renderDotItem",value:function(n,s){var i;if(ke.isValidElement(n))i=ke.cloneElement(n,s);else if(or(n))i=n(s);else{var o=s.key,l=hP(s,ioe),d=br("recharts-line-dot",typeof n!="boolean"?n.className:"");i=ke.createElement(pf,zh({key:o},l,{className:d}))}return i}}])})(P.PureComponent);Ti(ss,"displayName","Line");Ti(ss,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Dl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ti(ss,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,d=e.displayedData,u=e.offset,f=t.layout,m=d.map(function(p,g){var b=za(p,o);return f==="horizontal"?{x:m3({axis:r,ticks:s,bandSize:l,entry:p,index:g}),y:wr(b)?null:n.scale(b),value:b,payload:p}:{x:wr(b)?null:r.scale(b),y:m3({axis:n,ticks:i,bandSize:l,entry:p,index:g}),value:b,payload:p}});return Os({points:m,layout:f},u)});function pu(e){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pu(e)}function voe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function boe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f$(n.key),n)}}function woe(e,t,r){return t&&boe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function joe(e,t,r){return t=sg(t),Noe(e,u$()?Reflect.construct(t,r||[],sg(e).constructor):t.apply(e,r))}function Noe(e,t){if(t&&(pu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return koe(e)}function koe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u$=function(){return!!e})()}function sg(e){return sg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sg(e)}function Soe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r2(e,t)}function r2(e,t){return r2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},r2(e,t)}function h$(e,t,r){return t=f$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f$(e){var t=_oe(e,"string");return pu(t)=="symbol"?t:t+""}function _oe(e,t){if(pu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function a2(){return a2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a2.apply(this,arguments)}function Eoe(e){var t=e.xAxisId,r=Hk(),n=qk(),s=JF(t);return s==null?null:P.createElement(Mu,a2({},s,{className:br("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Do(o,!0)}}))}var Dn=(function(e){function t(){return voe(this,t),joe(this,t,arguments)}return Soe(t,e),woe(t,[{key:"render",value:function(){return P.createElement(Eoe,this.props)}}])})(P.Component);h$(Dn,"displayName","XAxis");h$(Dn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function gu(e){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(e)}function Coe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Aoe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g$(n.key),n)}}function Toe(e,t,r){return t&&Aoe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Doe(e,t,r){return t=ig(t),Ooe(e,m$()?Reflect.construct(t,r||[],ig(e).constructor):t.apply(e,r))}function Ooe(e,t){if(t&&(gu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Poe(e)}function Poe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m$=function(){return!!e})()}function ig(e){return ig=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ig(e)}function Ioe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n2(e,t)}function n2(e,t){return n2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},n2(e,t)}function p$(e,t,r){return t=g$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g$(e){var t=Moe(e,"string");return gu(t)=="symbol"?t:t+""}function Moe(e,t){if(gu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function s2(){return s2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s2.apply(this,arguments)}var Roe=function(t){var r=t.yAxisId,n=Hk(),s=qk(),i=QF(r);return i==null?null:P.createElement(Mu,s2({},i,{className:br("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return Do(l,!0)}}))},jn=(function(e){function t(){return Coe(this,t),Doe(this,t,arguments)}return Ioe(t,e),Toe(t,[{key:"render",value:function(){return P.createElement(Roe,this.props)}}])})(P.Component);p$(jn,"displayName","YAxis");p$(jn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function pP(e){return Boe(e)||Loe(e)||$oe(e)||Foe()}function Foe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $oe(e,t){if(e){if(typeof e=="string")return i2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i2(e,t)}}function Loe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Boe(e){if(Array.isArray(e))return i2(e)}function i2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o2=function(t,r,n,s,i){var o=Hs(t,zk),l=Hs(t,hx),d=[].concat(pP(o),pP(l)),u=Hs(t,mx),f="".concat(s,"Id"),m=s[0],p=r;if(d.length&&(p=d.reduce(function(y,v){if(v.props[f]===n&&Zi(v.props,"extendDomain")&&At(v.props[m])){var k=v.props[m];return[Math.min(y[0],k),Math.max(y[1],k)]}return y},p)),u.length){var g="".concat(m,"1"),b="".concat(m,"2");p=u.reduce(function(y,v){if(v.props[f]===n&&Zi(v.props,"extendDomain")&&At(v.props[g])&&At(v.props[b])){var k=v.props[g],S=v.props[b];return[Math.min(y[0],k,S),Math.max(y[1],k,S)]}return y},p)}return i&&i.length&&(p=i.reduce(function(y,v){return At(v)?[Math.min(y[0],v),Math.max(y[1],v)]:y},p)),p},oj={exports:{}},gP;function Uoe(){return gP||(gP=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,u,f){this.fn=d,this.context=u,this.once=f||!1}function i(d,u,f,m,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new s(f,m||d,p),b=r?r+u:u;return d._events[b]?d._events[b].fn?d._events[b]=[d._events[b],g]:d._events[b].push(g):(d._events[b]=g,d._eventsCount++),d}function o(d,u){--d._eventsCount===0?d._events=new n:delete d._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,m;if(this._eventsCount===0)return u;for(m in f=this._events)t.call(f,m)&&u.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=r?r+u:u,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var p=0,g=m.length,b=new Array(g);p<g;p++)b[p]=m[p].fn;return b},l.prototype.listenerCount=function(u){var f=r?r+u:u,m=this._events[f];return m?m.fn?1:m.length:0},l.prototype.emit=function(u,f,m,p,g,b){var y=r?r+u:u;if(!this._events[y])return!1;var v=this._events[y],k=arguments.length,S,w;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),k){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,m),!0;case 4:return v.fn.call(v.context,f,m,p),!0;case 5:return v.fn.call(v.context,f,m,p,g),!0;case 6:return v.fn.call(v.context,f,m,p,g,b),!0}for(w=1,S=new Array(k-1);w<k;w++)S[w-1]=arguments[w];v.fn.apply(v.context,S)}else{var A=v.length,C;for(w=0;w<A;w++)switch(v[w].once&&this.removeListener(u,v[w].fn,void 0,!0),k){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,f);break;case 3:v[w].fn.call(v[w].context,f,m);break;case 4:v[w].fn.call(v[w].context,f,m,p);break;default:if(!S)for(C=1,S=new Array(k-1);C<k;C++)S[C-1]=arguments[C];v[w].fn.apply(v[w].context,S)}}return!0},l.prototype.on=function(u,f,m){return i(this,u,f,m,!1)},l.prototype.once=function(u,f,m){return i(this,u,f,m,!0)},l.prototype.removeListener=function(u,f,m,p){var g=r?r+u:u;if(!this._events[g])return this;if(!f)return o(this,g),this;var b=this._events[g];if(b.fn)b.fn===f&&(!p||b.once)&&(!m||b.context===m)&&o(this,g);else{for(var y=0,v=[],k=b.length;y<k;y++)(b[y].fn!==f||p&&!b[y].once||m&&b[y].context!==m)&&v.push(b[y]);v.length?this._events[g]=v.length===1?v[0]:v:o(this,g)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(oj)),oj.exports}var Hoe=Uoe();const qoe=sa(Hoe);var lj=new qoe,cj="recharts.syncMouseEvents";function z0(e){"@babel/helpers - typeof";return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z0(e)}function Woe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zoe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x$(n.key),n)}}function Koe(e,t,r){return t&&zoe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dj(e,t,r){return t=x$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x$(e){var t=Voe(e,"string");return z0(t)=="symbol"?t:t+""}function Voe(e,t){if(z0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(z0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Goe=(function(){function e(){Woe(this,e),dj(this,"activeIndex",0),dj(this,"coordinateList",[]),dj(this,"layout","horizontal")}return Koe(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,d=r.layout,u=d===void 0?null:d,f=r.offset,m=f===void 0?null:f,p=r.mouseHandlerCallback,g=p===void 0?null:p;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,d=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,m=i+d+u,p=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:m,pageY:p})}}}])})();function Yoe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e?.[0],s=e?.[1];if(n&&s&&At(n)&&At(s))return!0}return!1}function Xoe(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function y$(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,i=e.endAngle,o=ta(t,r,n,s),l=ta(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function Joe(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,d=t.cy,u=t.innerRadius,f=t.outerRadius,m=t.angle,p=ta(l,d,u,m),g=ta(l,d,f,m);n=p.x,s=p.y,i=g.x,o=g.y}else return y$(t);return[{x:n,y:s},{x:i,y:o}]}function K0(e){"@babel/helpers - typeof";return K0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K0(e)}function xP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xP(Object(r),!0).forEach(function(n){Qoe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qoe(e,t,r){return t=Zoe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zoe(e){var t=ele(e,"string");return K0(t)=="symbol"?t:t+""}function ele(e,t){if(K0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(K0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tle(e){var t,r,n=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,d=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,m=e.layout,p=e.chartName,g=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!g||!i||!o||p!=="ScatterChart"&&s!=="axis")return null;var b,y=Mp;if(p==="ScatterChart")b=o,y=Qre;else if(p==="BarChart")b=Xoe(m,o,d,f),y=$k;else if(m==="radial"){var v=y$(o),k=v.cx,S=v.cy,w=v.radius,A=v.startAngle,C=v.endAngle;b={cx:k,cy:S,startAngle:A,endAngle:C,innerRadius:w,outerRadius:w},y=pF}else b={points:Joe(m,o,d)},y=Mp;var N=Rm(Rm(Rm(Rm({stroke:"#ccc",pointerEvents:"none"},d),b),Jt(g,!1)),{},{payload:l,payloadIndex:u,className:br("recharts-tooltip-cursor",g.className)});return P.isValidElement(g)?P.cloneElement(g,N):P.createElement(y,N)}var rle=["item"],ale=["children","className","width","height","style","compact","title","desc"];function xu(e){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xu(e)}function Rd(){return Rd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rd.apply(this,arguments)}function yP(e,t){return ile(e)||sle(e,t)||b$(e,t)||nle()}function nle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sle(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function ile(e){if(Array.isArray(e))return e}function vP(e,t){if(e==null)return{};var r=ole(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ole(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function lle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cle(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w$(n.key),n)}}function dle(e,t,r){return t&&cle(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ule(e,t,r){return t=og(t),hle(e,v$()?Reflect.construct(t,r||[],og(e).constructor):t.apply(e,r))}function hle(e,t){if(t&&(xu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fle(e)}function fle(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v$=function(){return!!e})()}function og(e){return og=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},og(e)}function mle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l2(e,t)}function l2(e,t){return l2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},l2(e,t)}function yu(e){return xle(e)||gle(e)||b$(e)||ple()}function ple(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b$(e,t){if(e){if(typeof e=="string")return c2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c2(e,t)}}function gle(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xle(e){if(Array.isArray(e))return c2(e)}function c2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bP(Object(r),!0).forEach(function(n){cr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cr(e,t,r){return t=w$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w$(e){var t=yle(e,"string");return xu(t)=="symbol"?t:t+""}function yle(e,t){if(xu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vle={xAxis:["bottom","top"],yAxis:["left","right"]},ble={width:"100%",height:"100%"},j$={x:0,y:0};function Fm(e){return e}var wle=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},jle=function(t,r,n,s){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return at(at(at({},s),ta(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var d=i.coordinate,u=s.angle;return at(at(at({},s),ta(s.cx,s.cy,d,u)),{},{angle:u,radius:d})}return j$},px=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,d){var u=d.props.data;return u&&u.length?[].concat(yu(l),yu(u)):l},[]);return o.length>0?o:t&&t.length&&At(s)&&At(i)?t.slice(s,i+1):[]};function N$(e){return e==="number"?[0,"auto"]:void 0}var d2=function(t,r,n,s){var i=t.graphicalItems,o=t.tooltipAxis,l=px(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(d,u){var f,m=(f=u.props.data)!==null&&f!==void 0?f:r;m&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(m=m.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var g=m===void 0?l:m;p=ip(g,o.dataKey,s)}else p=m&&m[n]||l[n];return p?[].concat(yu(d),[oF(u,p)]):d},[])},wP=function(t,r,n,s){var i=s||{x:t.chartX,y:t.chartY},o=wle(i,n),l=t.orderedTooltipTicks,d=t.tooltipAxis,u=t.tooltipTicks,f=jZ(o,l,u,d);if(f>=0&&u){var m=u[f]&&u[f].value,p=d2(t,r,f,m),g=jle(n,l,f,i);return{activeTooltipIndex:f,activeLabel:m,activePayload:p,activeCoordinate:g}}return null},Nle=function(t,r){var n=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,m=t.children,p=t.stackOffset,g=tF(f,i);return n.reduce(function(b,y){var v,k=y.type.defaultProps!==void 0?at(at({},y.type.defaultProps),y.props):y.props,S=k.type,w=k.dataKey,A=k.allowDataOverflow,C=k.allowDuplicatedCategory,N=k.scale,E=k.ticks,_=k.includeHidden,O=k[o];if(b[O])return b;var B=px(t.data,{graphicalItems:s.filter(function(I){var G,V=o in I.props?I.props[o]:(G=I.type.defaultProps)===null||G===void 0?void 0:G[o];return V===O}),dataStartIndex:d,dataEndIndex:u}),F=B.length,D,H,ne;Yoe(k.domain,A,S)&&(D=NN(k.domain,null,A),g&&(S==="number"||N!=="auto")&&(ne=Uh(B,w,"category")));var W=N$(S);if(!D||D.length===0){var ee,re=(ee=k.domain)!==null&&ee!==void 0?ee:W;if(w){if(D=Uh(B,w,S),S==="category"&&g){var Q=pz(D);C&&Q?(H=D,D=Gp(0,F)):C||(D=y3(re,D,y).reduce(function(I,G){return I.indexOf(G)>=0?I:[].concat(yu(I),[G])},[]))}else if(S==="category")C?D=D.filter(function(I){return I!==""&&!wr(I)}):D=y3(re,D,y).reduce(function(I,G){return I.indexOf(G)>=0||G===""||wr(G)?I:[].concat(yu(I),[G])},[]);else if(S==="number"){var R=EZ(B,s.filter(function(I){var G,V,Z=o in I.props?I.props[o]:(G=I.type.defaultProps)===null||G===void 0?void 0:G[o],ve="hide"in I.props?I.props.hide:(V=I.type.defaultProps)===null||V===void 0?void 0:V.hide;return Z===O&&(_||!ve)}),w,i,f);R&&(D=R)}g&&(S==="number"||N!=="auto")&&(ne=Uh(B,w,"category"))}else g?D=Gp(0,F):l&&l[O]&&l[O].hasStack&&S==="number"?D=p==="expand"?[0,1]:iF(l[O].stackGroups,d,u):D=eF(B,s.filter(function(I){var G=o in I.props?I.props[o]:I.type.defaultProps[o],V="hide"in I.props?I.props.hide:I.type.defaultProps.hide;return G===O&&(_||!V)}),S,f,!0);if(S==="number")D=o2(m,D,O,i,E),re&&(D=NN(re,D,A));else if(S==="category"&&re){var X=re,L=D.every(function(I){return X.indexOf(I)>=0});L&&(D=X)}}return at(at({},b),{},cr({},O,at(at({},k),{},{axisType:i,domain:D,categoricalDomain:ne,duplicateDomain:H,originalDomain:(v=k.domain)!==null&&v!==void 0?v:W,isCategorical:g,layout:f})))},{})},kle=function(t,r){var n=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,m=t.children,p=px(t.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:u}),g=p.length,b=tF(f,i),y=-1;return n.reduce(function(v,k){var S=k.type.defaultProps!==void 0?at(at({},k.type.defaultProps),k.props):k.props,w=S[o],A=N$("number");if(!v[w]){y++;var C;return b?C=Gp(0,g):l&&l[w]&&l[w].hasStack?(C=iF(l[w].stackGroups,d,u),C=o2(m,C,w,i)):(C=NN(A,eF(p,n.filter(function(N){var E,_,O=o in N.props?N.props[o]:(E=N.type.defaultProps)===null||E===void 0?void 0:E[o],B="hide"in N.props?N.props.hide:(_=N.type.defaultProps)===null||_===void 0?void 0:_.hide;return O===w&&!B}),"number",f),s.defaultProps.allowDataOverflow),C=o2(m,C,w,i)),at(at({},v),{},cr({},w,at(at({axisType:i},s.defaultProps),{},{hide:!0,orientation:Us(vle,"".concat(i,".").concat(y%2),null),domain:C,originalDomain:A,isCategorical:b,layout:f})))}return v},{})},Sle=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,f=t.children,m="".concat(s,"Id"),p=Hs(f,i),g={};return p&&p.length?g=Nle(t,{axes:p,graphicalItems:o,axisType:s,axisIdKey:m,stackGroups:l,dataStartIndex:d,dataEndIndex:u}):o&&o.length&&(g=kle(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:m,stackGroups:l,dataStartIndex:d,dataEndIndex:u})),g},_le=function(t){var r=xl(t),n=Do(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:uk(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Op(r,n)}},jP=function(t){var r=t.children,n=t.defaultShowTooltip,s=Is(r,lu),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Ele=function(t){return!t||!t.length?!1:t.some(function(r){var n=Mo(r&&r.type);return n&&n.indexOf("Bar")>=0})},NP=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Cle=function(t,r){var n=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,d=l===void 0?{}:l,u=n.width,f=n.height,m=n.children,p=n.margin||{},g=Is(m,lu),b=Is(m,Ss),y=Object.keys(d).reduce(function(C,N){var E=d[N],_=E.orientation;return!E.mirror&&!E.hide?at(at({},C),{},cr({},_,C[_]+E.width)):C},{left:p.left||0,right:p.right||0}),v=Object.keys(o).reduce(function(C,N){var E=o[N],_=E.orientation;return!E.mirror&&!E.hide?at(at({},C),{},cr({},_,Us(C,"".concat(_))+E.height)):C},{top:p.top||0,bottom:p.bottom||0}),k=at(at({},v),y),S=k.bottom;g&&(k.bottom+=g.props.height||lu.defaultProps.height),b&&r&&(k=SZ(k,s,n,r));var w=u-k.left-k.right,A=f-k.top-k.bottom;return at(at({brushBottom:S},k),{},{width:Math.max(w,0),height:Math.max(A,0)})},Ale=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},gx=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,d=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,m=t.defaultProps,p=function(k,S){var w=S.graphicalItems,A=S.stackGroups,C=S.offset,N=S.updateId,E=S.dataStartIndex,_=S.dataEndIndex,O=k.barSize,B=k.layout,F=k.barGap,D=k.barCategoryGap,H=k.maxBarSize,ne=NP(B),W=ne.numericAxisName,ee=ne.cateAxisName,re=Ele(w),Q=[];return w.forEach(function(R,X){var L=px(k.data,{graphicalItems:[R],dataStartIndex:E,dataEndIndex:_}),I=R.type.defaultProps!==void 0?at(at({},R.type.defaultProps),R.props):R.props,G=I.dataKey,V=I.maxBarSize,Z=I["".concat(W,"Id")],ve=I["".concat(ee,"Id")],Ee={},Te=d.reduce(function(kt,Ct){var yr=S["".concat(Ct.axisType,"Map")],Kt=I["".concat(Ct.axisType,"Id")];yr&&yr[Kt]||Ct.axisType==="zAxis"||Ac();var Rr=yr[Kt];return at(at({},kt),{},cr(cr({},Ct.axisType,Rr),"".concat(Ct.axisType,"Ticks"),Do(Rr)))},Ee),ue=Te[ee],ge=Te["".concat(ee,"Ticks")],Fe=A&&A[Z]&&A[Z].hasStack&&RZ(R,A[Z].stackGroups),J=Mo(R.type).indexOf("Bar")>=0,Ze=Op(ue,ge),rt=[],Tt=re&&NZ({barSize:O,stackGroups:A,totalSize:Ale(Te,ee)});if(J){var ze,Re,Ce=wr(V)?H:V,Se=(ze=(Re=Op(ue,ge,!0))!==null&&Re!==void 0?Re:Ce)!==null&&ze!==void 0?ze:0;rt=kZ({barGap:F,barCategoryGap:D,bandSize:Se!==Ze?Se:Ze,sizeList:Tt[ve],maxBarSize:Ce}),Se!==Ze&&(rt=rt.map(function(kt){return at(at({},kt),{},{position:at(at({},kt.position),{},{offset:kt.position.offset-Se/2})})}))}var Qe=R&&R.type&&R.type.getComposedData;Qe&&Q.push({props:at(at({},Qe(at(at({},Te),{},{displayedData:L,props:k,dataKey:G,item:R,bandSize:Ze,barPosition:rt,offset:C,stackedData:Fe,layout:B,dataStartIndex:E,dataEndIndex:_}))),{},cr(cr(cr({key:R.key||"item-".concat(X)},W,Te[W]),ee,Te[ee]),"animationId",N)),childIndex:Cz(R,k.children),item:R})}),Q},g=function(k,S){var w=k.props,A=k.dataStartIndex,C=k.dataEndIndex,N=k.updateId;if(!OA({props:w}))return null;var E=w.children,_=w.layout,O=w.stackOffset,B=w.data,F=w.reverseStackOrder,D=NP(_),H=D.numericAxisName,ne=D.cateAxisName,W=Hs(E,n),ee=IZ(B,W,"".concat(H,"Id"),"".concat(ne,"Id"),O,F),re=d.reduce(function(I,G){var V="".concat(G.axisType,"Map");return at(at({},I),{},cr({},V,Sle(w,at(at({},G),{},{graphicalItems:W,stackGroups:G.axisType===H&&ee,dataStartIndex:A,dataEndIndex:C}))))},{}),Q=Cle(at(at({},re),{},{props:w,graphicalItems:W}),S?.legendBBox);Object.keys(re).forEach(function(I){re[I]=f(w,re[I],Q,I.replace("Map",""),r)});var R=re["".concat(ne,"Map")],X=_le(R),L=p(w,at(at({},re),{},{dataStartIndex:A,dataEndIndex:C,updateId:N,graphicalItems:W,stackGroups:ee,offset:Q}));return at(at({formattedGraphicalItems:L,graphicalItems:W,offset:Q,stackGroups:ee},X),re)},b=(function(v){function k(S){var w,A,C;return lle(this,k),C=ule(this,k,[S]),cr(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),cr(C,"accessibilityManager",new Goe),cr(C,"handleLegendBBoxUpdate",function(N){if(N){var E=C.state,_=E.dataStartIndex,O=E.dataEndIndex,B=E.updateId;C.setState(at({legendBBox:N},g({props:C.props,dataStartIndex:_,dataEndIndex:O,updateId:B},at(at({},C.state),{},{legendBBox:N}))))}}),cr(C,"handleReceiveSyncEvent",function(N,E,_){if(C.props.syncId===N){if(_===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent(E)}}),cr(C,"handleBrushChange",function(N){var E=N.startIndex,_=N.endIndex;if(E!==C.state.dataStartIndex||_!==C.state.dataEndIndex){var O=C.state.updateId;C.setState(function(){return at({dataStartIndex:E,dataEndIndex:_},g({props:C.props,dataStartIndex:E,dataEndIndex:_,updateId:O},C.state))}),C.triggerSyncEvent({dataStartIndex:E,dataEndIndex:_})}}),cr(C,"handleMouseEnter",function(N){var E=C.getMouseInfo(N);if(E){var _=at(at({},E),{},{isTooltipActive:!0});C.setState(_),C.triggerSyncEvent(_);var O=C.props.onMouseEnter;or(O)&&O(_,N)}}),cr(C,"triggeredAfterMouseMove",function(N){var E=C.getMouseInfo(N),_=E?at(at({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(_),C.triggerSyncEvent(_);var O=C.props.onMouseMove;or(O)&&O(_,N)}),cr(C,"handleItemMouseEnter",function(N){C.setState(function(){return{isTooltipActive:!0,activeItem:N,activePayload:N.tooltipPayload,activeCoordinate:N.tooltipPosition||{x:N.cx,y:N.cy}}})}),cr(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),cr(C,"handleMouseMove",function(N){N.persist(),C.throttleTriggeredAfterMouseMove(N)}),cr(C,"handleMouseLeave",function(N){C.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};C.setState(E),C.triggerSyncEvent(E);var _=C.props.onMouseLeave;or(_)&&_(E,N)}),cr(C,"handleOuterEvent",function(N){var E=Ez(N),_=Us(C.props,"".concat(E));if(E&&or(_)){var O,B;/.*touch.*/i.test(E)?B=C.getMouseInfo(N.changedTouches[0]):B=C.getMouseInfo(N),_((O=B)!==null&&O!==void 0?O:{},N)}}),cr(C,"handleClick",function(N){var E=C.getMouseInfo(N);if(E){var _=at(at({},E),{},{isTooltipActive:!0});C.setState(_),C.triggerSyncEvent(_);var O=C.props.onClick;or(O)&&O(_,N)}}),cr(C,"handleMouseDown",function(N){var E=C.props.onMouseDown;if(or(E)){var _=C.getMouseInfo(N);E(_,N)}}),cr(C,"handleMouseUp",function(N){var E=C.props.onMouseUp;if(or(E)){var _=C.getMouseInfo(N);E(_,N)}}),cr(C,"handleTouchMove",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(N.changedTouches[0])}),cr(C,"handleTouchStart",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&C.handleMouseDown(N.changedTouches[0])}),cr(C,"handleTouchEnd",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&C.handleMouseUp(N.changedTouches[0])}),cr(C,"handleDoubleClick",function(N){var E=C.props.onDoubleClick;if(or(E)){var _=C.getMouseInfo(N);E(_,N)}}),cr(C,"handleContextMenu",function(N){var E=C.props.onContextMenu;if(or(E)){var _=C.getMouseInfo(N);E(_,N)}}),cr(C,"triggerSyncEvent",function(N){C.props.syncId!==void 0&&lj.emit(cj,C.props.syncId,N,C.eventEmitterSymbol)}),cr(C,"applySyncEvent",function(N){var E=C.props,_=E.layout,O=E.syncMethod,B=C.state.updateId,F=N.dataStartIndex,D=N.dataEndIndex;if(N.dataStartIndex!==void 0||N.dataEndIndex!==void 0)C.setState(at({dataStartIndex:F,dataEndIndex:D},g({props:C.props,dataStartIndex:F,dataEndIndex:D,updateId:B},C.state)));else if(N.activeTooltipIndex!==void 0){var H=N.chartX,ne=N.chartY,W=N.activeTooltipIndex,ee=C.state,re=ee.offset,Q=ee.tooltipTicks;if(!re)return;if(typeof O=="function")W=O(Q,N);else if(O==="value"){W=-1;for(var R=0;R<Q.length;R++)if(Q[R].value===N.activeLabel){W=R;break}}var X=at(at({},re),{},{x:re.left,y:re.top}),L=Math.min(H,X.x+X.width),I=Math.min(ne,X.y+X.height),G=Q[W]&&Q[W].value,V=d2(C.state,C.props.data,W),Z=Q[W]?{x:_==="horizontal"?Q[W].coordinate:L,y:_==="horizontal"?I:Q[W].coordinate}:j$;C.setState(at(at({},N),{},{activeLabel:G,activeCoordinate:Z,activePayload:V,activeTooltipIndex:W}))}else C.setState(N)}),cr(C,"renderCursor",function(N){var E,_=C.state,O=_.isTooltipActive,B=_.activeCoordinate,F=_.activePayload,D=_.offset,H=_.activeTooltipIndex,ne=_.tooltipAxisBandSize,W=C.getTooltipEventType(),ee=(E=N.props.active)!==null&&E!==void 0?E:O,re=C.props.layout,Q=N.key||"_recharts-cursor";return ke.createElement(tle,{key:Q,activeCoordinate:B,activePayload:F,activeTooltipIndex:H,chartName:r,element:N,isActive:ee,layout:re,offset:D,tooltipAxisBandSize:ne,tooltipEventType:W})}),cr(C,"renderPolarAxis",function(N,E,_){var O=Us(N,"type.axisType"),B=Us(C.state,"".concat(O,"Map")),F=N.type.defaultProps,D=F!==void 0?at(at({},F),N.props):N.props,H=B&&B[D["".concat(O,"Id")]];return P.cloneElement(N,at(at({},H),{},{className:br(O,H.className),key:N.key||"".concat(E,"-").concat(_),ticks:Do(H,!0)}))}),cr(C,"renderPolarGrid",function(N){var E=N.props,_=E.radialLines,O=E.polarAngles,B=E.polarRadius,F=C.state,D=F.radiusAxisMap,H=F.angleAxisMap,ne=xl(D),W=xl(H),ee=W.cx,re=W.cy,Q=W.innerRadius,R=W.outerRadius;return P.cloneElement(N,{polarAngles:Array.isArray(O)?O:Do(W,!0).map(function(X){return X.coordinate}),polarRadius:Array.isArray(B)?B:Do(ne,!0).map(function(X){return X.coordinate}),cx:ee,cy:re,innerRadius:Q,outerRadius:R,key:N.key||"polar-grid",radialLines:_})}),cr(C,"renderLegend",function(){var N=C.state.formattedGraphicalItems,E=C.props,_=E.children,O=E.width,B=E.height,F=C.props.margin||{},D=O-(F.left||0)-(F.right||0),H=QR({children:_,formattedGraphicalItems:N,legendWidth:D,legendContent:u});if(!H)return null;var ne=H.item,W=vP(H,rle);return P.cloneElement(ne,at(at({},W),{},{chartWidth:O,chartHeight:B,margin:F,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),cr(C,"renderTooltip",function(){var N,E=C.props,_=E.children,O=E.accessibilityLayer,B=Is(_,Ea);if(!B)return null;var F=C.state,D=F.isTooltipActive,H=F.activeCoordinate,ne=F.activePayload,W=F.activeLabel,ee=F.offset,re=(N=B.props.active)!==null&&N!==void 0?N:D;return P.cloneElement(B,{viewBox:at(at({},ee),{},{x:ee.left,y:ee.top}),active:re,label:W,payload:re?ne:[],coordinate:H,accessibilityLayer:O})}),cr(C,"renderBrush",function(N){var E=C.props,_=E.margin,O=E.data,B=C.state,F=B.offset,D=B.dataStartIndex,H=B.dataEndIndex,ne=B.updateId;return P.cloneElement(N,{key:N.key||"_recharts-brush",onChange:Om(C.handleBrushChange,N.props.onChange),data:O,x:At(N.props.x)?N.props.x:F.left,y:At(N.props.y)?N.props.y:F.top+F.height+F.brushBottom-(_.bottom||0),width:At(N.props.width)?N.props.width:F.width,startIndex:D,endIndex:H,updateId:"brush-".concat(ne)})}),cr(C,"renderReferenceElement",function(N,E,_){if(!N)return null;var O=C,B=O.clipPathId,F=C.state,D=F.xAxisMap,H=F.yAxisMap,ne=F.offset,W=N.type.defaultProps||{},ee=N.props,re=ee.xAxisId,Q=re===void 0?W.xAxisId:re,R=ee.yAxisId,X=R===void 0?W.yAxisId:R;return P.cloneElement(N,{key:N.key||"".concat(E,"-").concat(_),xAxis:D[Q],yAxis:H[X],viewBox:{x:ne.left,y:ne.top,width:ne.width,height:ne.height},clipPathId:B})}),cr(C,"renderActivePoints",function(N){var E=N.item,_=N.activePoint,O=N.basePoint,B=N.childIndex,F=N.isRange,D=[],H=E.props.key,ne=E.item.type.defaultProps!==void 0?at(at({},E.item.type.defaultProps),E.item.props):E.item.props,W=ne.activeDot,ee=ne.dataKey,re=at(at({index:B,dataKey:ee,cx:_.x,cy:_.y,r:4,fill:Fk(E.item),strokeWidth:2,stroke:"#fff",payload:_.payload,value:_.value},Jt(W,!1)),op(W));return D.push(k.renderActiveDot(W,re,"".concat(H,"-activePoint-").concat(B))),O?D.push(k.renderActiveDot(W,at(at({},re),{},{cx:O.x,cy:O.y}),"".concat(H,"-basePoint-").concat(B))):F&&D.push(null),D}),cr(C,"renderGraphicChild",function(N,E,_){var O=C.filterFormatItem(N,E,_);if(!O)return null;var B=C.getTooltipEventType(),F=C.state,D=F.isTooltipActive,H=F.tooltipAxis,ne=F.activeTooltipIndex,W=F.activeLabel,ee=C.props.children,re=Is(ee,Ea),Q=O.props,R=Q.points,X=Q.isRange,L=Q.baseLine,I=O.item.type.defaultProps!==void 0?at(at({},O.item.type.defaultProps),O.item.props):O.item.props,G=I.activeDot,V=I.hide,Z=I.activeBar,ve=I.activeShape,Ee=!!(!V&&D&&re&&(G||Z||ve)),Te={};B!=="axis"&&re&&re.props.trigger==="click"?Te={onClick:Om(C.handleItemMouseEnter,N.props.onClick)}:B!=="axis"&&(Te={onMouseLeave:Om(C.handleItemMouseLeave,N.props.onMouseLeave),onMouseEnter:Om(C.handleItemMouseEnter,N.props.onMouseEnter)});var ue=P.cloneElement(N,at(at({},O.props),Te));function ge(Ct){return typeof H.dataKey=="function"?H.dataKey(Ct.payload):null}if(Ee)if(ne>=0){var Fe,J;if(H.dataKey&&!H.allowDuplicatedCategory){var Ze=typeof H.dataKey=="function"?ge:"payload.".concat(H.dataKey.toString());Fe=ip(R,Ze,W),J=X&&L&&ip(L,Ze,W)}else Fe=R?.[ne],J=X&&L&&L[ne];if(ve||Z){var rt=N.props.activeIndex!==void 0?N.props.activeIndex:ne;return[P.cloneElement(N,at(at(at({},O.props),Te),{},{activeIndex:rt})),null,null]}if(!wr(Fe))return[ue].concat(yu(C.renderActivePoints({item:O,activePoint:Fe,basePoint:J,childIndex:ne,isRange:X})))}else{var Tt,ze=(Tt=C.getItemByXY(C.state.activeCoordinate))!==null&&Tt!==void 0?Tt:{graphicalItem:ue},Re=ze.graphicalItem,Ce=Re.item,Se=Ce===void 0?N:Ce,Qe=Re.childIndex,kt=at(at(at({},O.props),Te),{},{activeIndex:Qe});return[P.cloneElement(Se,kt),null,null]}return X?[ue,null,null]:[ue,null]}),cr(C,"renderCustomized",function(N,E,_){return P.cloneElement(N,at(at({key:"recharts-customized-".concat(_)},C.props),C.state))}),cr(C,"renderMap",{CartesianGrid:{handler:Fm,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:Fm},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:Fm},YAxis:{handler:Fm},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((w=S.id)!==null&&w!==void 0?w:Eu("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=QM(C.triggeredAfterMouseMove,(A=S.throttleDelay)!==null&&A!==void 0?A:1e3/60),C.state={},C}return mle(k,v),dle(k,[{key:"componentDidMount",value:function(){var w,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,A=w.children,C=w.data,N=w.height,E=w.layout,_=Is(A,Ea);if(_){var O=_.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var B=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,F=d2(this.state,C,O,B),D=this.state.tooltipTicks[O].coordinate,H=(this.state.offset.top+N)/2,ne=E==="horizontal",W=ne?{x:D,y:H}:{y:D,x:H},ee=this.state.formattedGraphicalItems.find(function(Q){var R=Q.item;return R.type.name==="Scatter"});ee&&(W=at(at({},W),ee.props.points[O].tooltipPosition),F=ee.props.points[O].tooltipPayload);var re={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:B,activePayload:F,activeCoordinate:W};this.setState(re),this.renderCursor(_),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var C,N;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0}})}return null}},{key:"componentDidUpdate",value:function(w){zj([Is(w.children,Ea)],[Is(this.props.children,Ea)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Is(this.props.children,Ea);if(w&&typeof w.props.shared=="boolean"){var A=w.props.shared?"axis":"item";return l.indexOf(A)>=0?A:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var A=this.container,C=A.getBoundingClientRect(),N=mY(C),E={chartX:Math.round(w.pageX-N.left),chartY:Math.round(w.pageY-N.top)},_=C.width/A.offsetWidth||1,O=this.inRange(E.chartX,E.chartY,_);if(!O)return null;var B=this.state,F=B.xAxisMap,D=B.yAxisMap,H=this.getTooltipEventType(),ne=wP(this.state,this.props.data,this.props.layout,O);if(H!=="axis"&&F&&D){var W=xl(F).scale,ee=xl(D).scale,re=W&&W.invert?W.invert(E.chartX):null,Q=ee&&ee.invert?ee.invert(E.chartY):null;return at(at({},E),{},{xValue:re,yValue:Q},ne)}return ne?at(at({},E),ne):null}},{key:"inRange",value:function(w,A){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,N=this.props.layout,E=w/C,_=A/C;if(N==="horizontal"||N==="vertical"){var O=this.state.offset,B=E>=O.left&&E<=O.left+O.width&&_>=O.top&&_<=O.top+O.height;return B?{x:E,y:_}:null}var F=this.state,D=F.angleAxisMap,H=F.radiusAxisMap;if(D&&H){var ne=xl(D);return w3({x:E,y:_},ne)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,A=this.getTooltipEventType(),C=Is(w,Ea),N={};C&&A==="axis"&&(C.props.trigger==="click"?N={onClick:this.handleClick}:N={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=op(this.props,this.handleOuterEvent);return at(at({},E),N)}},{key:"addListener",value:function(){lj.on(cj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){lj.removeListener(cj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,A,C){for(var N=this.state.formattedGraphicalItems,E=0,_=N.length;E<_;E++){var O=N[E];if(O.item===w||O.props.key===w.key||A===Mo(O.item.type)&&C===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,A=this.state.offset,C=A.left,N=A.top,E=A.height,_=A.width;return ke.createElement("defs",null,ke.createElement("clipPath",{id:w},ke.createElement("rect",{x:C,y:N,height:E,width:_})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(A,C){var N=yP(C,2),E=N[0],_=N[1];return at(at({},A),{},cr({},E,_.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(A,C){var N=yP(C,2),E=N[0],_=N[1];return at(at({},A),{},cr({},E,_.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[w])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(w){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[w])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(w){var A=this.state,C=A.formattedGraphicalItems,N=A.activeItem;if(C&&C.length)for(var E=0,_=C.length;E<_;E++){var O=C[E],B=O.props,F=O.item,D=F.type.defaultProps!==void 0?at(at({},F.type.defaultProps),F.props):F.props,H=Mo(F.type);if(H==="Bar"){var ne=(B.data||[]).find(function(Q){return Pre(w,Q)});if(ne)return{graphicalItem:O,payload:ne}}else if(H==="RadialBar"){var W=(B.data||[]).find(function(Q){return w3(w,Q)});if(W)return{graphicalItem:O,payload:W}}else if(lx(O,N)||cx(O,N)||B0(O,N)){var ee=hne({graphicalItem:O,activeTooltipItem:N,itemData:D.data}),re=D.activeIndex===void 0?ee:D.activeIndex;return{graphicalItem:at(at({},O),{},{childIndex:re}),payload:B0(O,N)?D.data[ee]:O.props.data[ee]}}}return null}},{key:"render",value:function(){var w=this;if(!OA(this))return null;var A=this.props,C=A.children,N=A.className,E=A.width,_=A.height,O=A.style,B=A.compact,F=A.title,D=A.desc,H=vP(A,ale),ne=Jt(H,!1);if(B)return ke.createElement(ZO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ke.createElement(Vj,Rd({},ne,{width:E,height:_,title:F,desc:D}),this.renderClipPath(),IA(C,this.renderMap)));if(this.props.accessibilityLayer){var W,ee;ne.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,ne.role=(ee=this.props.role)!==null&&ee!==void 0?ee:"application",ne.onKeyDown=function(Q){w.accessibilityManager.keyboardEvent(Q)},ne.onFocus=function(){w.accessibilityManager.focus()}}var re=this.parseEventsOfWrapper();return ke.createElement(ZO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ke.createElement("div",Rd({className:br("recharts-wrapper",N),style:at({position:"relative",cursor:"default",width:E,height:_},O)},re,{ref:function(R){w.container=R}}),ke.createElement(Vj,Rd({},ne,{width:E,height:_,title:F,desc:D,style:ble}),this.renderClipPath(),IA(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(P.Component);cr(b,"displayName",r),cr(b,"defaultProps",at({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),cr(b,"getDerivedStateFromProps",function(v,k){var S=v.dataKey,w=v.data,A=v.children,C=v.width,N=v.height,E=v.layout,_=v.stackOffset,O=v.margin,B=k.dataStartIndex,F=k.dataEndIndex;if(k.updateId===void 0){var D=jP(v);return at(at(at({},D),{},{updateId:0},g(at(at({props:v},D),{},{updateId:0}),k)),{},{prevDataKey:S,prevData:w,prevWidth:C,prevHeight:N,prevLayout:E,prevStackOffset:_,prevMargin:O,prevChildren:A})}if(S!==k.prevDataKey||w!==k.prevData||C!==k.prevWidth||N!==k.prevHeight||E!==k.prevLayout||_!==k.prevStackOffset||!Bd(O,k.prevMargin)){var H=jP(v),ne={chartX:k.chartX,chartY:k.chartY,isTooltipActive:k.isTooltipActive},W=at(at({},wP(k,w,E)),{},{updateId:k.updateId+1}),ee=at(at(at({},H),ne),W);return at(at(at({},ee),g(at({props:v},ee),k)),{},{prevDataKey:S,prevData:w,prevWidth:C,prevHeight:N,prevLayout:E,prevStackOffset:_,prevMargin:O,prevChildren:A})}if(!zj(A,k.prevChildren)){var re,Q,R,X,L=Is(A,lu),I=L&&(re=(Q=L.props)===null||Q===void 0?void 0:Q.startIndex)!==null&&re!==void 0?re:B,G=L&&(R=(X=L.props)===null||X===void 0?void 0:X.endIndex)!==null&&R!==void 0?R:F,V=I!==B||G!==F,Z=!wr(w),ve=Z&&!V?k.updateId:k.updateId+1;return at(at({updateId:ve},g(at(at({props:v},k),{},{updateId:ve,dataStartIndex:I,dataEndIndex:G}),k)),{},{prevChildren:A,dataStartIndex:I,dataEndIndex:G})}return null}),cr(b,"renderActiveDot",function(v,k,S){var w;return P.isValidElement(v)?w=P.cloneElement(v,k):or(v)?w=v(k):w=ke.createElement(pf,k),ke.createElement(qr,{className:"recharts-active-dot",key:S},w)});var y=P.forwardRef(function(k,S){return ke.createElement(b,Rd({},k,{ref:S}))});return y.displayName=b.displayName,y},Fd=gx({chartName:"LineChart",GraphicalChild:ss,axisComponents:[{axisType:"xAxis",AxisComp:Dn},{axisType:"yAxis",AxisComp:jn}],formatAxisMap:qF}),pc=gx({chartName:"BarChart",GraphicalChild:hn,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Dn},{axisType:"yAxis",AxisComp:jn}],formatAxisMap:qF}),k$=gx({chartName:"PieChart",GraphicalChild:so,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Iu},{axisType:"radiusAxis",AxisComp:Pu}],formatAxisMap:dF,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Tle=gx({chartName:"RadarChart",GraphicalChild:vc,axisComponents:[{axisType:"angleAxis",AxisComp:Iu},{axisType:"radiusAxis",AxisComp:Pu}],formatAxisMap:dF,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const kP=["#3b82f6","#f59e0b","#10b981","#ef4444","#8b5cf6","#ec4899"];function Dle({context:e}){const t=P.useMemo(()=>{const l=new Map;return e.inventory.forEach(d=>{const u=l.get(d.date)||{inventory:0,overhead:0};l.set(d.date,{...u,inventory:u.inventory+d.totalCost})}),e.overheads.forEach(d=>{const u=l.get(d.date)||{inventory:0,overhead:0};l.set(d.date,{...u,overhead:u.overhead+d.amount})}),Array.from(l.entries()).map(([d,u])=>({date:Kn(d),fullDate:d,inventory:u.inventory,overhead:u.overhead,total:u.inventory+u.overhead})).sort((d,u)=>d.fullDate.localeCompare(u.fullDate))},[e.inventory,e.overheads]),r=P.useMemo(()=>{const l=new Map;return e.inventory.forEach(d=>{const u=l.get(d.category)||0;l.set(d.category,u+d.totalCost)}),e.overheads.forEach(d=>{const u=l.get(d.category)||0;l.set(d.category,u+d.amount)}),Array.from(l.entries()).map(([d,u])=>({name:wg[d]||_2[d]||d,value:u})).sort((d,u)=>u.value-d.value)},[e.inventory,e.overheads]),n=P.useMemo(()=>{const l=new Map;return e.inventory.forEach(d=>{const u=l.get(d.itemName)||0;l.set(d.itemName,u+d.totalCost)}),Array.from(l.entries()).map(([d,u])=>({name:d,value:u})).sort((d,u)=>u.value-d.value).slice(0,10)},[e.inventory]),s=e.inventory.reduce((l,d)=>l+d.totalCost,0),i=e.overheads.reduce((l,d)=>l+d.amount,0),o=s+i;return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-gray-900",children:"Analytics Dashboard"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive view of spending patterns and trends"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Sd,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm opacity-90",children:"Total Inventory Spend"})]}),a.jsxs("p",{className:"text-2xl",children:["",s.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(xB,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm opacity-90",children:"Total Overhead Spend"})]}),a.jsxs("p",{className:"text-2xl",children:["",i.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(fa,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm opacity-90",children:"Total Expenses"})]}),a.jsxs("p",{className:"text-2xl",children:["",o.toLocaleString()]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[a.jsx("h3",{className:"text-gray-900 mb-6",children:"Daily Spending Trends"}),a.jsx(zn,{width:"100%",height:300,children:a.jsxs(Fd,{data:t,children:[a.jsx(bs,{strokeDasharray:"3 3"}),a.jsx(Dn,{dataKey:"date"}),a.jsx(jn,{}),a.jsx(Ea,{formatter:l=>`${l.toLocaleString()}`}),a.jsx(Ss,{}),a.jsx(ss,{type:"monotone",dataKey:"inventory",stroke:"#3b82f6",name:"Inventory",strokeWidth:2}),a.jsx(ss,{type:"monotone",dataKey:"overhead",stroke:"#f59e0b",name:"Overhead",strokeWidth:2}),a.jsx(ss,{type:"monotone",dataKey:"total",stroke:"#8b5cf6",name:"Total",strokeWidth:2})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-gray-900 mb-6",children:"Spending by Category"}),a.jsx(zn,{width:"100%",height:300,children:a.jsxs(k$,{children:[a.jsx(so,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:({name:l,percent:d})=>`${l} (${(d*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:r.map((l,d)=>a.jsx(Jd,{fill:kP[d%kP.length]},`cell-${d}`))}),a.jsx(Ea,{formatter:l=>`${l.toLocaleString()}`})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-gray-900 mb-6",children:"Top Inventory Items"}),a.jsx(zn,{width:"100%",height:300,children:a.jsxs(pc,{data:n,layout:"vertical",children:[a.jsx(bs,{strokeDasharray:"3 3"}),a.jsx(Dn,{type:"number"}),a.jsx(jn,{dataKey:"name",type:"category",width:100}),a.jsx(Ea,{formatter:l=>`${l.toLocaleString()}`}),a.jsx(hn,{dataKey:"value",fill:"#3b82f6"})]})})]})]})]})}function Ole({context:e,selectedStoreId:t,selectedDate:r,onDateChange:n,onDataUpdate:s}){const[i,o]=P.useState(""),[l,d]=P.useState(""),[u,f]=P.useState(""),[m,p]=P.useState(""),[g,b]=P.useState([]),[y,v]=P.useState([]),[k,S]=P.useState(!1),[w,A]=P.useState(!1),C=t||e.user?.storeId,N=e.user?.role==="manager"||e.user?.role==="cluster_head";P.useEffect(()=>{E()},[]);const E=async()=>{if(e.user){S(!0);try{const X=await Og(e.user.accessToken),L=await Pg(e.user.accessToken);b(X||[]),v(L||[])}catch(X){console.error("Error loading online data:",X)}finally{S(!1)}}},_=P.useMemo(()=>(C?g.filter(L=>L.storeId===C):g).find(L=>L.date===r),[g,r,C]),O=P.useMemo(()=>(C?y.filter(L=>L.storeId===C):y).find(L=>L.date===r),[y,r,C]);P.useEffect(()=>{_?(o(_.swiggySales.toString()),d(_.zomatoSales.toString())):(o(""),d("")),O?(f(O.swiggyPayout.toString()),p(O.zomatoPayout.toString())):(f(""),p(""))},[_,O,r]);const B=parseFloat(i)||0,F=parseFloat(l)||0,D=B+F,H=parseFloat(u)||0,ne=parseFloat(m)||0,W=H+ne,ee=D-W,re=W-D,Q=P.useMemo(()=>{const X=C?g.filter(V=>V.storeId===C):g,L=C?y.filter(V=>V.storeId===C):y,I=X.reduce((V,Z)=>V+Z.swiggySales+Z.zomatoSales,0),G=L.reduce((V,Z)=>V+Z.swiggyPayout+Z.zomatoPayout,0);return{totalSales:I,totalPayouts:G,netCommission:I-G}},[g,y,C]),R=async X=>{if(X.preventDefault(),!(!e.user||!N)){A(!0);try{const L={id:_?.id||`ONLINE-SALES-${Date.now()}`,date:r,swiggySales:B,zomatoSales:F,storeId:C,createdAt:_?.createdAt||new Date().toISOString()};await r5(e.user.accessToken,L);const I={id:O?.id||`ONLINE-PAYOUT-${Date.now()}`,date:r,swiggyPayout:H,zomatoPayout:ne,storeId:C,createdAt:O?.createdAt||new Date().toISOString()};if(await a5(e.user.accessToken,I),re>0){const G=e.salesData.find(V=>V.date===r&&(!C||V.storeId===C));G&&await e.updateSalesData(G.id,{...G,paytmAmount:G.paytmAmount+re})}await E(),s&&s(),alert(" Online sales and payout data saved successfully!")}catch(L){console.error("Error saving online data:",L),alert(" Error saving online data. Please try again.")}finally{A(!1)}}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-6 border border-purple-200",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Online Sales Management (Swiggy & Zomato)"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Track sales and payouts from food delivery aggregators. Extra payouts automatically add to Online Cash in Hand (Paytm)."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-6 border-2 border-green-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Sales (Till Now)"}),a.jsx(ca,{className:"w-5 h-5 text-green-600"})]}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",Q.totalSales.toFixed(2)]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-6 border-2 border-blue-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Net Payout (Till Now)"}),a.jsx(ii,{className:"w-5 h-5 text-blue-600"})]}),a.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",Q.totalPayouts.toFixed(2)]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-6 border-2 border-purple-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Net Commission (Till Now)"}),a.jsx(fa,{className:"w-5 h-5 text-purple-600"})]}),a.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["",Q.netCommission.toFixed(2)]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sales - Payout"})]})]}),a.jsxs("form",{onSubmit:R,className:"bg-white rounded-lg p-6 border-2 border-purple-200 shadow-lg",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(Ur,{className:"w-5 h-5"}),"Daily Entry for ",new Date(r).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-gray-700 border-b pb-2",children:"Sales Data"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Swiggy Sales ()"}),a.jsx("input",{type:"number",step:"0.01",value:i,onChange:X=>o(X.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0.00",disabled:!N})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zomato Sales ()"}),a.jsx("input",{type:"number",step:"0.01",value:l,onChange:X=>d(X.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0.00",disabled:!N})]}),a.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Total Online Sales"}),a.jsxs("p",{className:"text-xl font-bold text-green-600",children:["",D.toFixed(2)]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-gray-700 border-b pb-2",children:"Payout Data"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Swiggy Payout ()"}),a.jsx("input",{type:"number",step:"0.01",value:u,onChange:X=>f(X.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0.00",disabled:!N})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zomato Payout ()"}),a.jsx("input",{type:"number",step:"0.01",value:m,onChange:X=>p(X.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0.00",disabled:!N})]}),a.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Total Payout"}),a.jsxs("p",{className:"text-xl font-bold text-blue-600",children:["",W.toFixed(2)]})]})]})]}),a.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:`p-4 rounded-lg ${ee>=0?"bg-purple-50 border-2 border-purple-200":"bg-red-50 border-2 border-red-200"}`,children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Net Commission (Sales - Payout)"}),a.jsxs("p",{className:`text-2xl font-bold ${ee>=0?"text-purple-600":"text-red-600"}`,children:["",ee.toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["This is the commission ",ee>=0?"earned":"deficit"]})]}),re>0&&a.jsxs("div",{className:"p-4 rounded-lg bg-orange-50 border-2 border-orange-200",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Extra Payout (Payout - Sales)"}),a.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",re.toFixed(2)]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:" This will be added to Online Cash in Hand (Paytm)"})]})]}),N&&a.jsx("div",{className:"mt-6",children:a.jsx("button",{type:"submit",disabled:w,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:w?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(lr,{className:"w-5 h-5"}),"Save Online Sales & Payout"]})})})]}),a.jsxs("div",{className:"bg-white rounded-lg p-6 border-2 border-purple-200 shadow-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Daily Breakdown"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b-2 border-gray-200",children:[a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Date"}),a.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Swiggy Sales"}),a.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Zomato Sales"}),a.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Total Sales"}),a.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Swiggy Payout"}),a.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Zomato Payout"}),a.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Total Payout"}),a.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Commission"})]})}),a.jsx("tbody",{children:(()=>{const X=new Set([...g.map(G=>G.date),...y.map(G=>G.date)]),L=C?g.filter(G=>G.storeId===C):g,I=C?y.filter(G=>G.storeId===C):y;return Array.from(X).sort((G,V)=>V.localeCompare(G)).map(G=>{const V=L.find(Ze=>Ze.date===G),Z=I.find(Ze=>Ze.date===G),ve=V?.swiggySales||0,Ee=V?.zomatoSales||0,Te=ve+Ee,ue=Z?.swiggyPayout||0,ge=Z?.zomatoPayout||0,Fe=ue+ge,J=Te-Fe;return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700",children:new Date(G).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),a.jsxs("td",{className:"py-3 px-4 text-right text-gray-700",children:["",ve.toFixed(2)]}),a.jsxs("td",{className:"py-3 px-4 text-right text-gray-700",children:["",Ee.toFixed(2)]}),a.jsxs("td",{className:"py-3 px-4 text-right font-semibold text-green-600",children:["",Te.toFixed(2)]}),a.jsxs("td",{className:"py-3 px-4 text-right text-gray-700",children:["",ue.toFixed(2)]}),a.jsxs("td",{className:"py-3 px-4 text-right text-gray-700",children:["",ge.toFixed(2)]}),a.jsxs("td",{className:"py-3 px-4 text-right font-semibold text-blue-600",children:["",Fe.toFixed(2)]}),a.jsxs("td",{className:`py-3 px-4 text-right font-semibold ${J>=0?"text-purple-600":"text-red-600"}`,children:["",J.toFixed(2)]})]},G)})})()})]})})]})]})}function Ple({context:e,selectedStoreId:t,selectedDate:r,onClose:n,onSaveSuccess:s}){const[i,o]=P.useState(""),[l,d]=P.useState(r||Na()),[u,f]=P.useState(""),[m,p]=P.useState(""),[g,b]=P.useState(""),[y,v]=P.useState(!1),[k,S]=P.useState(null),[w,A]=P.useState(!1),[C,N]=P.useState([]),[E,_]=P.useState(!0),O=t||e.user?.storeId,B=e.stores?.find(ne=>ne.id===O),F=B?.name||"Unknown Store";P.useEffect(()=>{D()},[e.user]);const D=async()=>{if(e.user?.accessToken)try{_(!0);const ne=await H2(e.user.accessToken);N(ne)}catch(ne){console.error("Error loading investors:",ne)}finally{_(!1)}};if(!O||!B)return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:n,children:a.jsx("div",{className:"bg-white rounded-xl max-w-lg w-full shadow-2xl p-6",onClick:ne=>ne.stopPropagation(),children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ar,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Store Not Selected"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Please select a store from the dropdown at the top of the page before applying for a loan."}),a.jsx("button",{onClick:n,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})]})})});const H=async ne=>{if(ne.preventDefault(),!e.user?.accessToken||!O){S("Missing authentication or store information");return}const W=parseFloat(i);if(isNaN(W)||W<=0){S("Please enter a valid loan amount");return}try{v(!0),S(null);const ee={storeId:O,storeName:F,loanAmount:W,loanDate:l,notes:u,createdBy:e.user.email,investorId:m,interestRate:parseFloat(g)||0};await $5(e.user.accessToken,ee),A(!0),setTimeout(()=>{s&&s(),n()},1500)}catch(ee){console.error("Error applying for loan:",ee),S(ee.message||"Failed to apply for loan")}finally{v(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:n,children:a.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:ne=>ne.stopPropagation(),children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(ca,{className:"w-6 h-6"}),"Apply for Loan"]}),a.jsx("p",{className:"text-purple-100 mt-1",children:F})]}),a.jsx("button",{onClick:n,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(en,{className:"w-6 h-6"})})]})}),w&&a.jsxs("div",{className:"m-6 p-4 bg-green-50 border-2 border-green-200 rounded-lg flex items-center gap-3",children:[a.jsx(ca,{className:"w-6 h-6 text-green-600 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-green-900",children:"Loan Applied Successfully!"}),a.jsx("p",{className:"text-sm text-green-700",children:"The loan amount has been added to your Online Cash in Hand."})]})]}),k&&a.jsxs("div",{className:"m-6 p-4 bg-red-50 border-2 border-red-200 rounded-lg flex items-center gap-3",children:[a.jsx(Ar,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),a.jsx("p",{className:"text-red-900",children:k})]}),a.jsxs("form",{onSubmit:H,className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Loan Amount *"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-lg",children:""}),a.jsx("input",{type:"number",step:"0.01",value:i,onChange:ne=>o(ne.target.value),className:"w-full pl-8 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-lg",placeholder:"Enter loan amount",required:!0})]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"This amount will be added to your Online Cash in Hand (Paytm)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Loan Date *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ur,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 w-5 h-5"}),a.jsx("input",{type:"date",value:l,onChange:ne=>d(ne.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes / Purpose"}),a.jsxs("div",{className:"relative",children:[a.jsx(ks,{className:"absolute left-3 top-3 text-gray-500 w-5 h-5"}),a.jsx("textarea",{value:u,onChange:ne=>f(ne.target.value),rows:3,className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Purpose of loan, source, repayment terms, etc."})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Investor *"}),a.jsxs("div",{className:"relative",children:[a.jsx(tn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 w-5 h-5"}),a.jsxs("select",{value:m,onChange:ne=>p(ne.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",required:!0,children:[a.jsx("option",{value:"",children:"Select Investor"}),E?a.jsx("option",{value:"",children:"Loading..."}):C.map(ne=>a.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Interest Rate *"}),a.jsxs("div",{className:"relative",children:[a.jsx(PB,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 w-5 h-5"}),a.jsx("input",{type:"number",step:"0.01",value:g,onChange:ne=>b(ne.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter interest rate",required:!0})]})]}),a.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-900",children:[a.jsx("p",{className:"font-semibold mb-1",children:" How Loans Work"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsxs("li",{children:["Loan amount is ",a.jsx("strong",{children:"added"})," to Online Cash in Hand (Paytm)"]}),a.jsx("li",{children:"Track active loans in the loan section below"}),a.jsx("li",{children:'Use "Repay Loan" to pay back (reduces Online Cash in Hand)'}),a.jsx("li",{children:"Supports partial and full repayments"})]})]})]})}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:n,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",disabled:y,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:y||!i,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Lo,{className:"w-5 h-5"}),"Apply for Loan"]})})]})]})]})})}function Ile({context:e,loan:t,selectedDate:r,onClose:n,onSaveSuccess:s}){const i=t.loanAmount-t.repaidAmount,[o,l]=P.useState("0"),[d,u]=P.useState(r||Na()),[f,m]=P.useState(""),[p,g]=P.useState(!1),[b,y]=P.useState(null),[v,k]=P.useState(!1),w=(E=>{if(!t.interestRate||t.interestRate===0)return 0;const _=new Date(t.loanDate),O=new Date(E),B=Math.floor((O.getTime()-_.getTime())/(1e3*60*60*24)),F=t.loanAmount*t.interestRate*B/3e3;return Math.max(0,F)})(d),A=i+w;P.useEffect(()=>{l(A.toFixed(2))},[w]);const C=async E=>{if(E.preventDefault(),!e.user?.accessToken){y("Missing authentication");return}const _=parseFloat(o);if(isNaN(_)||_<=0){y("Please enter a valid repayment amount");return}if(_>A){y(`Repayment amount cannot exceed total amount with interest (${A.toLocaleString()})`);return}try{g(!0),y(null),await L5(e.user.accessToken,t.id,{repaymentAmount:_,repaymentDate:d,notes:f}),k(!0),setTimeout(()=>{s&&s(),n()},1500)}catch(O){console.error("Error repaying loan:",O),y(O.message||"Failed to process loan repayment")}finally{g(!1)}},N=parseFloat(o)===A;return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:n,children:a.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:E=>E.stopPropagation(),children:[a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(Nc,{className:"w-6 h-6"}),"Repay Loan"]}),a.jsx("p",{className:"text-green-100 mt-1",children:t.storeName})]}),a.jsx("button",{onClick:n,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(en,{className:"w-6 h-6"})})]})}),v&&a.jsxs("div",{className:"m-6 p-4 bg-green-50 border-2 border-green-200 rounded-lg flex items-center gap-3",children:[a.jsx(Nc,{className:"w-6 h-6 text-green-600 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-green-900",children:"Loan Repayment Successful!"}),a.jsx("p",{className:"text-sm text-green-700",children:"The amount has been deducted from your Online Cash in Hand."})]})]}),b&&a.jsxs("div",{className:"m-6 p-4 bg-red-50 border-2 border-red-200 rounded-lg flex items-center gap-3",children:[a.jsx(Ar,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),a.jsx("p",{className:"text-red-900",children:b})]}),a.jsxs("div",{className:"m-6 p-4 bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg",children:[a.jsx("h3",{className:"font-semibold text-purple-900 mb-3",children:"Loan Details"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-700",children:"Original Loan:"}),a.jsxs("span",{className:"font-semibold text-gray-900",children:["",t.loanAmount.toLocaleString()]})]}),t.interestRate&&t.interestRate>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-700",children:"Interest Rate:"}),a.jsxs("span",{className:"font-semibold text-blue-700",children:[t.interestRate,"% per month"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-700",children:"Already Repaid:"}),a.jsxs("span",{className:"font-semibold text-green-700",children:["",t.repaidAmount.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between pt-2 border-t border-purple-300",children:[a.jsx("span",{className:"text-gray-700 font-semibold",children:"Remaining Principal:"}),a.jsxs("span",{className:"font-bold text-purple-900",children:["",i.toLocaleString()]})]}),t.interestRate&&t.interestRate>0&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-700",children:"Interest Accrued (till repayment date):"}),a.jsxs("span",{className:"font-semibold text-orange-700",children:["",w.toFixed(2)]})]}),w>0&&a.jsxs("div",{className:"flex justify-between pt-2 border-t-2 border-purple-400",children:[a.jsx("span",{className:"text-gray-900 font-bold",children:"Total Amount (with interest):"}),a.jsxs("span",{className:"font-bold text-red-700 text-lg",children:["",A.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),w===0&&a.jsx("p",{className:"text-xs text-gray-600 italic",children:" Change the repayment date to see interest calculation"})]}),a.jsxs("div",{className:"flex justify-between text-xs pt-2 border-t border-purple-200",children:[a.jsx("span",{className:"text-gray-600",children:"Loan Date:"}),a.jsx("span",{className:"text-gray-800",children:new Date(t.loanDate).toLocaleDateString("en-IN")})]})]})]}),a.jsxs("form",{onSubmit:C,className:"p-6 pt-0 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Repayment Amount *"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-lg",children:""}),a.jsx("input",{type:"number",step:"0.01",value:o,onChange:E=>l(E.target.value),max:A,className:"w-full pl-8 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-lg",placeholder:"Enter repayment amount",required:!0})]}),a.jsxs("div",{className:"flex justify-between items-center mt-2",children:[a.jsx("p",{className:"text-xs text-gray-600",children:N?" Full repayment":" Partial repayment"}),a.jsx("button",{type:"button",onClick:()=>l(A.toString()),className:"text-xs text-purple-600 hover:text-purple-700 font-medium",children:"Pay Full Amount"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Repayment Date *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ur,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 w-5 h-5"}),a.jsx("input",{type:"date",value:d,onChange:E=>u(E.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes (Optional)"}),a.jsxs("div",{className:"relative",children:[a.jsx(ks,{className:"absolute left-3 top-3 text-gray-500 w-5 h-5"}),a.jsx("textarea",{value:f,onChange:E=>m(E.target.value),rows:2,className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Optional notes about this repayment..."})]})]}),a.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-yellow-900",children:[a.jsx("p",{className:"font-semibold mb-1",children:" Important"}),a.jsxs("p",{children:["This repayment amount will be ",a.jsx("strong",{children:"deducted"})," from your Online Cash in Hand (Paytm) balance. Make sure you have sufficient funds."]})]})]})}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:n,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",disabled:p,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:p||!o,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Lo,{className:"w-5 h-5"}),N?"Pay Full Amount":"Make Payment"]})})]})]})]})})}function SP({context:e,selectedStoreId:t}){const[r,n]=P.useState("offline"),[s,i]=P.useState(Na()),[o,l]=P.useState([]),[d,u]=P.useState(!1),[f,m]=P.useState([]),[p,g]=P.useState(!1),b=ie=>ie.category==="service_charge"&&ie.description?.includes("Aggregator Commission")||ie.category==="commission",[y,v]=P.useState({offlineSales:"",paytmAmount:"",cashAmount:"",employeeSalary:"",previousCashInHand:"",usedOnlineMoney:"",actualCashInHand:"",actualPaytmBalance:""}),[k,S]=P.useState(!1),[w,A]=P.useState(null),[C,N]=P.useState(!1),[E,_]=P.useState(!1),[O,B]=P.useState(!1),[F,D]=P.useState(null),[H,ne]=P.useState(!1),[W,ee]=P.useState(!1),[re,Q]=P.useState(""),[R,X]=P.useState(!1),[L,I]=P.useState(null),[G,V]=P.useState([]),[Z,ve]=P.useState(!1),[Ee,Te]=P.useState(!1),[ue,ge]=P.useState(!1),[Fe,J]=P.useState(null),Ze=e.user?.role==="cluster_head",rt=e.user?.role==="manager",Tt=e.user?.designation==="store_incharge",ze=e.user?.designation==="production_incharge",Re=rt&&!Tt&&!ze,Ce=Re,Se=t||e.user?.storeId,[Qe,kt]=P.useState([]),[Ct,yr]=P.useState([]),[Kt,Rr]=P.useState(!1),[Pr,da]=P.useState([]);P.useEffect(()=>{Tr()},[]),P.useEffect(()=>{ur()},[e.user]);const ur=async()=>{if(e.user?.accessToken)try{const ie=await Co();da(ie)}catch(ie){console.error("Error loading employee payouts:",ie)}};P.useEffect(()=>{Br()},[e.user]);const Br=async()=>{if(e.user?.accessToken){u(!0);try{const ie=await Pg(e.user.accessToken);l(ie)}catch(ie){console.error("Error loading online payout data:",ie)}finally{u(!1)}}};P.useEffect(()=>{It()},[e.user]);const It=async()=>{if(e.user?.accessToken){g(!0);try{const ie=await Og(e.user.accessToken);m(ie)}catch(ie){console.error("Error loading online sales data:",ie)}finally{g(!1)}}};P.useEffect(()=>{er()},[e.user,Se]);const er=async()=>{if(e.user?.accessToken){ve(!0);try{const ie=!Se||Se==="all"?void 0:Se,fe=await U2(e.user.accessToken,ie);V(fe)}catch(ie){console.error("Error loading online loans:",ie)}finally{ve(!1)}}};P.useEffect(()=>{const ie=fe=>{fe.key==="Escape"&&E&&Y()};if(E)return window.addEventListener("keydown",ie),()=>window.removeEventListener("keydown",ie)},[E]),P.useEffect(()=>{Ir()},[e.user,Se]);const Ir=async()=>{if(!Se||Se==="all"){I(null);return}if(e.user?.accessToken)try{const fe=(await M5(e.user.accessToken,Se))?.recalibration||null;I(fe)}catch(ie){console.error("Error loading online recalibration:",ie)}},Tr=async()=>{Rr(!0);try{const fe=(await El()).filter(_e=>_e.type==="contract");kt(fe)}catch(ie){console.error("Error loading contract workers:",ie)}finally{Rr(!1)}};P.useEffect(()=>{tr()},[s,Qe]);const tr=async()=>{if(Qe.length!==0)try{const fe=(await Co()).filter(Dt=>Dt.date===s),_e=Qe.map(Dt=>Dt.id),nt=fe.filter(Dt=>_e.includes(Dt.employeeId)),xt=new Map;nt.forEach(Dt=>{const Wr=xt.get(Dt.employeeId);(!Wr||new Date(Dt.createdAt)>new Date(Wr.createdAt))&&xt.set(Dt.employeeId,Dt)});const ut=Array.from(xt.values()).map(Dt=>({employeeId:Dt.employeeId,amount:Dt.amount.toString()}));yr(ut)}catch(ie){console.error("Error loading payouts for date:",ie)}},Da=()=>{yr([...Ct,{employeeId:"",amount:""}])},Oa=ie=>{yr(Ct.filter((fe,_e)=>_e!==ie))},He=(ie,fe,_e)=>{const nt=[...Ct];nt[ie][fe]=_e,yr(nt)},Ie=P.useMemo(()=>Ct.reduce((ie,fe)=>ie+(parseFloat(fe.amount)||0),0),[Ct]),lt=P.useMemo(()=>{console.log(" SalesManagement - effectiveStoreId:",Se),console.log(" SalesManagement - selectedStoreId prop:",t),console.log(" SalesManagement - user storeId:",e.user?.storeId),console.log(" SalesManagement - selectedDate:",s),console.log(" SalesManagement - all sales data:",e.salesData.map(_e=>({id:_e.id.substring(0,8),date:_e.date,storeId:_e.storeId,offlineSales:_e.offlineSales})));const ie=Se?e.salesData.filter(_e=>_e.storeId===Se):e.salesData;console.log(" SalesManagement - filtered sales:",ie.map(_e=>({id:_e.id.substring(0,8),date:_e.date,storeId:_e.storeId})));const fe=ie.find(_e=>_e.date===s);return console.log(" SalesManagement - salesForDate result:",fe?{id:fe.id.substring(0,8),date:fe.date,storeId:fe.storeId}:"NOT FOUND"),fe},[e.salesData,s,t,e.user?.storeId]),Ke=P.useMemo(()=>e.salesData.length===0||!lt&&e.salesData.every(ie=>ie.date>s),[e.salesData,s,lt]);P.useMemo(()=>{const ie=new Date(s),fe=ie.getFullYear(),_e=ie.getMonth(),nt=new Date(fe,_e+1,0).getDate();return ie.getDate()===nt},[s]);const pt=P.useMemo(()=>new Date(s).getDate()===1,[s]),Nt=P.useMemo(()=>new Date(s).getDay()===5,[s]),Rt=P.useMemo(()=>{const ie=new Date(s);ie.setDate(ie.getDate()-1);const fe=ie.toISOString().split("T")[0];return e.salesData.find(_e=>_e.date===fe)},[e.salesData,s]),Pt=P.useMemo(()=>{const ie=e.inventory.filter(nt=>{const xt=nt.date===s,ut=Se?nt.storeId===Se:!0;return xt&&ut}).reduce((nt,xt)=>nt+xt.totalCost,0),fe=e.overheads.filter(nt=>{const xt=nt.date===s,ut=Se?nt.storeId===Se:!0;return xt&&ut}).reduce((nt,xt)=>nt+xt.amount,0),_e=e.fixedCosts.filter(nt=>{const xt=nt.date===s,ut=Se?nt.storeId===Se:!0;return xt&&ut}).reduce((nt,xt)=>nt+xt.amount,0);return ie+fe+_e},[e.inventory,e.overheads,e.fixedCosts,s,Se]);P.useMemo(()=>e.fixedCosts.filter(ie=>{const fe=ie.date===s,_e=Se?ie.storeId===Se:!0;return fe&&_e}).reduce((ie,fe)=>fe.paymentMethod==="cash"?ie+fe.amount:fe.paymentMethod==="both"&&fe.cashAmount?ie+fe.cashAmount:ie,0),[e.fixedCosts,s,Se]);const Dr=P.useMemo(()=>e.fixedCosts.filter(ie=>{const fe=ie.date===s,_e=Se?ie.storeId===Se:!0;return fe&&_e}).reduce((ie,fe)=>fe.paymentMethod==="online"?ie+fe.amount:fe.paymentMethod==="both"&&fe.onlineAmount?ie+fe.onlineAmount:ie,0),[e.fixedCosts,s,Se]);P.useMemo(()=>e.overheads.filter(ie=>{const fe=ie.date===s,_e=Se?ie.storeId===Se:!0;return fe&&_e}).reduce((ie,fe)=>fe.paymentMethod==="cash"||!fe.paymentMethod?ie+fe.amount:fe.paymentMethod==="both"&&fe.cashAmount?ie+fe.cashAmount:ie,0),[e.overheads,s,Se]);const pa=P.useMemo(()=>e.overheads.filter(ie=>{const fe=ie.date===s,_e=Se?ie.storeId===Se:!0;return fe&&_e}).reduce((ie,fe)=>fe.paymentMethod==="online"?ie+fe.amount:fe.paymentMethod==="both"&&fe.onlineAmount?ie+fe.onlineAmount:ie,0),[e.overheads,s,Se]),oa=(ie,fe,_e,nt,xt)=>ie+nt+fe-_e-xt,ot=P.useMemo(()=>{const ie=parseFloat(y.previousCashInHand)||0,fe=parseFloat(y.cashAmount)||0,_e=parseFloat(y.usedOnlineMoney)||0;return oa(ie,fe,Pt,_e,Ie)},[y.previousCashInHand,y.cashAmount,Pt,y.usedOnlineMoney,Ie]),Sr=P.useMemo(()=>{const ie=parseFloat(y.actualCashInHand)||0;return ie===0?0:ie-ot},[y.actualCashInHand,ot]),Ot=Math.abs(Sr)>500,xe=P.useMemo(()=>{const ie=new Date(s);ie.setDate(ie.getDate()-1);const fe=ie.toISOString().split("T")[0],_e=Se?e.salesData.find(Ue=>Ue.date===fe&&Ue.storeId===Se):e.salesData.find(Ue=>Ue.date===fe);if(!_e&&!e.onlineCashRecalibrations.find(bt=>bt.date===fe&&bt.storeId===Se))return console.log(" No previous day data found. Starting from 0. Fill in previous day or create recalibration."),0;if(_e&&_e.actualPaytmBalance!==void 0&&_e.actualPaytmBalance!==null){const Ue=_e.actualPaytmBalance,bt=parseFloat(y.paytmAmount)||0,Vt=parseFloat(y.onlineSales)||0,gr=parseFloat(y.usedOnlineMoney)||0,Lr=Ie,hr=Ue+bt+Vt-gr-Lr;return console.log(" ONLINE CASH BALANCE (from previous day actual):",{effectiveStoreId:Se,selectedDate:s,previousDate:fe,startingBalance:Ue,todaysPaytm:bt,todaysOnlinePayouts:Vt,todaysUsedOnlineMoney:gr,todaysEmployeePayouts:Lr,finalBalance:hr}),hr}const nt=s.slice(0,7),xt=L&&L.month===nt,ut=Se?e.salesData.filter(Ue=>Ue.storeId===Se):e.salesData,Dt=Se?e.inventory.filter(Ue=>Ue.storeId===Se):e.inventory,Wr=Se?e.overheads.filter(Ue=>Ue.storeId===Se):e.overheads,Xt=Se?e.fixedCosts.filter(Ue=>Ue.storeId===Se):e.fixedCosts,pr=xt?L.date:"2000-01-01",rr=xt?L.actualBalance:0;console.log(" ONLINE CASH BALANCE CALCULATION:",{effectiveStoreId:Se,selectedDate:s,selectedMonth:nt,hasRecalibration:xt,recalibrationDate:xt?L.date:"none",startingBalance:rr,startDate:pr,totalSalesRecords:e.salesData.length,filteredSalesRecords:ut.length,totalInventoryRecords:e.inventory.length,filteredInventoryRecords:Dt.length});const Ve=ut.filter(Ue=>Ue.date>=pr&&Ue.date<s),vt=Ve.reduce((Ue,bt)=>Ue+(bt.paytmAmount??0),0),Ft=parseFloat(y.paytmAmount)||0,ua=vt+Ft;console.log(" Paytm transactions included:",{count:Ve.length,historicalTransactions:Ve.map(Ue=>({date:Ue.date,amount:Ue.paytmAmount})),historicalTotal:vt,todaysPaytm:Ft,totalIncludingToday:ua});const Ua=(Se?o.filter(Ue=>Ue.storeId===Se):o).filter(Ue=>Ue.date>=pr&&Ue.date<s),Xo=Ua.reduce((Ue,bt)=>Ue+(bt.swiggyPayout??0)+(bt.zomatoPayout??0),0),Sa=parseFloat(y.onlineSales)||0,jr=Xo+Sa;console.log(" Online payout transactions included:",{count:Ua.length,historicalTransactions:Ua.map(Ue=>({date:Ue.date,swiggy:Ue.swiggyPayout,zomato:Ue.zomatoPayout})),historicalTotal:Xo,todaysOnlinePayouts:Sa,totalIncludingToday:jr});const Jo=Dt.filter(Ue=>Ue.date>=pr&&Ue.date<s).reduce((Ue,bt)=>bt.paymentMethod==="online"?Ue+bt.totalCost:bt.paymentMethod==="both"&&bt.onlineAmount?Ue+bt.onlineAmount:Ue,0),es=Wr.filter(Ue=>Ue.date>=pr&&Ue.date<s&&!b(Ue)).reduce((Ue,bt)=>bt.paymentMethod==="online"?Ue+bt.amount:bt.paymentMethod==="both"&&bt.onlineAmount?Ue+bt.onlineAmount:Ue,0),Rl=Xt.filter(Ue=>Ue.date>=pr&&Ue.date<s).reduce((Ue,bt)=>bt.paymentMethod==="online"?Ue+bt.amount:bt.paymentMethod==="both"&&bt.onlineAmount?Ue+bt.onlineAmount:Ue,0),Fn=Wr.filter(Ue=>b(Ue)&&Ue.date>=pr&&Ue.date<s).reduce((Ue,bt)=>{const Vt=bt.paymentMethod||"online";return Vt==="online"?Ue+(bt.amount||0):Vt==="both"?Ue+(bt.onlineAmount||0):Ue},0),U=Jo+es+Rl,we=parseFloat(y.usedOnlineMoney)||0,he=U+we,be=Se?G.filter(Ue=>Ue.storeId===Se):G,je=be.filter(Ue=>Ue.loanDate>=pr&&Ue.loanDate<s).reduce((Ue,bt)=>Ue+bt.loanAmount,0),me=be.filter(Ue=>(Ue.loanDate<pr||Ue.loanDate,Ue.repaidAmount>0&&Ue.loanDate<s)).reduce((Ue,bt)=>bt.loanDate>=pr&&bt.loanDate<s||bt.loanDate<pr?Ue+bt.repaidAmount:Ue,0),ct=(Se?Pr.filter(Ue=>!Ue.storeId||Ue.storeId===Se):Pr).filter(Ue=>Ue.date>=pr&&Ue.date<s).reduce((Ue,bt)=>Ue+(bt.amount||0),0)+Ie,et=rr+ua+jr+je-he-Fn-me-ct;return console.log(" Balance breakdown:",{startingBalance:rr,allPaytmReceived:ua,allOnlinePayouts:jr,loansReceived:je,allUsedOnlineMoney:he,allCommission:Fn,loanRepayments:me,allEmployeePayouts:ct,finalBalance:et}),et},[e.salesData,e.inventory,e.overheads,e.fixedCosts,o,G,Pr,Ie,s,Se,L,y.paytmAmount,y.onlineSales,y.usedOnlineMoney]),it=P.useMemo(()=>{const ie=parseFloat(y.actualPaytmBalance)||0;return ie===0?0:ie-xe},[y.actualPaytmBalance,xe]),dt=Math.abs(it)>500,gt=P.useMemo(()=>{const ie=s.slice(0,7),fe=L&&L.month===ie,_e=fe?L.date:"2000-01-01",nt=`${ie}-01`,xt=Se?e.salesData.filter(vt=>vt.storeId===Se):e.salesData,ut=Se?e.fixedCosts.filter(vt=>vt.storeId===Se):e.fixedCosts,Dt=Se?e.overheads.filter(vt=>vt.storeId===Se):e.overheads,Wr=Se?e.inventory.filter(vt=>vt.storeId===Se):e.inventory,Xt=new Set;xt.filter(vt=>vt.date>=nt&&vt.date<=s).forEach(vt=>Xt.add(vt.date)),ut.filter(vt=>vt.date>=nt&&vt.date<=s).forEach(vt=>Xt.add(vt.date)),Dt.filter(vt=>vt.date>=nt&&vt.date<=s).forEach(vt=>Xt.add(vt.date)),Wr.filter(vt=>vt.date>=nt&&vt.date<=s).forEach(vt=>Xt.add(vt.date)),Dt.filter(vt=>b(vt)&&vt.date>=nt&&vt.date<=s).forEach(vt=>Xt.add(vt.date));const pr=Se?G.filter(vt=>vt.storeId===Se):G;pr.filter(vt=>vt.loanDate>=nt&&vt.loanDate<=s).forEach(vt=>Xt.add(vt.loanDate)),pr.filter(vt=>vt.repaymentDate&&vt.repaymentDate>=nt&&vt.repaymentDate<=s).forEach(vt=>Xt.add(vt.repaymentDate));const rr=Array.from(Xt).sort();console.log(" Daily Breakdown Calculation:",{hasRecalibration:fe,recalibrationDate:_e,displayStartDate:nt,numberOfDays:rr.length});const Ve=rr.map(vt=>{const Ft=xt.find(de=>de.date===vt),ua=Ft?.paytmAmount??0,Ws=Ft?.usedOnlineMoney??0,Ua=ut.filter(de=>de.date===vt).reduce((de,Me)=>{const Je=Me.paymentMethod;return Je==="online"?de+Me.amount:Je==="both"&&Me.onlineAmount?de+Me.onlineAmount:de},0),Xo=Dt.filter(de=>de.date===vt&&!b(de)).reduce((de,Me)=>{const Je=Me.paymentMethod||(Me.description?.includes("Commission")?"online":void 0);return Je==="online"?de+Me.amount:Je==="both"&&Me.onlineAmount?de+Me.onlineAmount:de},0),Sa=Wr.filter(de=>de.date===vt).reduce((de,Me)=>Me.paymentMethod==="online"?de+Me.totalCost:Me.paymentMethod==="both"&&Me.onlineAmount?de+Me.onlineAmount:de,0),jr=Dt.filter(de=>b(de)&&de.date===vt).reduce((de,Me)=>{const Je=Me.paymentMethod||"online";return Je==="online"?de+(Me.amount||0):Je==="both"?de+(Me.onlineAmount||0):de},0),Jo=Sa+Xo+Ua,es=Ws>0?Ws:Jo,Fn=(Se?o.filter(de=>de.storeId===Se):o).find(de=>de.date===vt),U=Fn?(Fn.swiggyPayout??0)+(Fn.zomatoPayout??0):0,he=(Se?Pr.filter(de=>!de.storeId||de.storeId===Se):Pr).filter(de=>de.date===vt).reduce((de,Me)=>de+(Me.amount||0),0),be=pr.filter(de=>de.loanDate===vt).reduce((de,Me)=>de+Me.loanAmount,0),je=pr.filter(de=>de.repaymentDate===vt&&de.repaidAmount>0).reduce((de,Me)=>de+Me.repaidAmount,0),me=ua+U+be-es-jr-he-je;return{date:vt,paytmReceived:ua,onlinePayouts:U,usedOnlineMoney:es,commission:jr,employeePayouts:he,loansTaken:be,loanRepayments:je,inventoryCosts:Sa,fixedCosts:Ua,overheadCosts:Xo,netChange:me,runningBalance:0}});if(console.log(" ===== CALCULATING RUNNING BALANCES ====="),console.log(" Has recalibration this month?",fe),console.log(" Recalibration date:",_e),console.log(" Number of daily data entries:",Ve.length),console.log(" Daily data dates:",Ve.map(vt=>vt.date)),fe){const vt=Ve.findIndex(Ft=>Ft.date===_e);if(console.log(" Recalibration index in daily data:",vt),console.log(" Recalibration actual balance:",L.actualBalance),vt>=0){Ve[vt].runningBalance=L.actualBalance,console.log(` Set ${_e} balance to ${L.actualBalance}`),console.log(" Calculating FORWARD from recalibration date...");for(let Ft=vt+1;Ft<Ve.length;Ft++)Ve[Ft].runningBalance=Ve[Ft-1].runningBalance+Ve[Ft].netChange,console.log(`  ${Ve[Ft].date}: prev(${Ve[Ft-1].runningBalance.toFixed(2)}) + net(${Ve[Ft].netChange.toFixed(2)}) = ${Ve[Ft].runningBalance.toFixed(2)}`);console.log(" Calculating BACKWARD from recalibration date...");for(let Ft=vt-1;Ft>=0;Ft--)Ve[Ft].runningBalance=Ve[Ft+1].runningBalance-Ve[Ft+1].netChange,console.log(`  ${Ve[Ft].date}: next(${Ve[Ft+1].runningBalance.toFixed(2)}) - nextNet(${Ve[Ft+1].netChange.toFixed(2)}) = ${Ve[Ft].runningBalance.toFixed(2)}`);console.log(" Final balances for all dates:"),Ve.forEach(Ft=>{console.log(`  ${Ft.date}: ${Ft.runningBalance.toFixed(2)} (net change: ${Ft.netChange.toFixed(2)})`)})}else{console.log(" Recalibration date not found in daily data range!"),console.log(" Starting from zero...");let Ft=0;Ve.forEach(ua=>{Ft+=ua.netChange,ua.runningBalance=Ft,console.log(`  ${ua.date}: ${Ft.toFixed(2)}`)})}}else{console.log(" No recalibration - calculating normally from zero");let vt=0;Ve.forEach(Ft=>{vt+=Ft.netChange,Ft.runningBalance=vt,console.log(`  ${Ft.date}: ${vt.toFixed(2)}`)})}return console.log(` ===== END RUNNING BALANCE CALCULATION =====
`),Ve},[e.salesData,e.fixedCosts,e.overheads,e.inventory,o,Pr,G,s,Se,L]),ft=P.useMemo(()=>{const ie=e.inventory.filter(fe=>fe.date===s).reduce((fe,_e)=>_e.paymentMethod==="online"?fe+_e.totalCost:_e.paymentMethod==="both"&&_e.onlineAmount?fe+_e.onlineAmount:fe,0);return console.log(` Inventory Online Total for ${s}:`,ie,"items:",e.inventory.filter(fe=>fe.date===s).map(fe=>({name:fe.itemName,payment:fe.paymentMethod,total:fe.totalCost}))),ie},[e.inventory,s]),q=P.useMemo(()=>{const ie=e.overheads.filter(ut=>ut.date===s),fe=s.substring(0,7),_e=e.overheads.filter(ut=>ut.category==="service_charge"&&ut.date?.startsWith(fe));console.log(` [OH] Month: ${fe}, Service charges:`,_e.length,_e.map(ut=>({desc:ut.description,amt:ut.amount,payment:ut.paymentMethod})));const nt=e.overheads.filter(ut=>(ut.category==="service_charge"&&ut.description?.includes("Aggregator Commission")||ut.category==="commission")&&ut.date?.startsWith(fe));console.log(" [OH] Commission entries found:",nt.length,nt.map(ut=>({category:ut.category,desc:ut.description,amt:ut.amount,payment:ut.paymentMethod})));let xt=ie.reduce((ut,Dt)=>{if(Dt.category==="commission"||Dt.category==="service_charge"&&Dt.description?.includes("Aggregator Commission"))return console.log(" [OH] Skipping commission in daily loop:",{category:Dt.category,desc:Dt.description,amount:Dt.amount}),ut;const Xt=Dt.paymentMethod||void 0;return Xt==="online"?ut+Dt.amount:Xt==="both"&&Dt.onlineAmount?ut+Dt.onlineAmount:ut},0);if(nt.length>0){const ut=new Date(s),Dt=ut.getFullYear(),Wr=ut.getMonth(),Xt=new Date(Dt,Wr+1,0).getDate(),pr=ut.getDate();if(pr===Xt){const Ve=nt.reduce((vt,Ft)=>{const ua=Ft.paymentMethod||"online";return ua==="online"?vt+Ft.amount:ua==="both"&&Ft.onlineAmount?vt+Ft.onlineAmount:vt},0);console.log(` [OH] Adding FULL monthly commission (last day of month): ${Ve.toFixed(2)} (entries: ${nt.length})`),xt+=Ve}else console.log(` [OH] Skipping commission (not last day): Day ${pr}/${Xt}`)}return console.log(` Overhead Online Total for ${s}:`,xt,"items:",ie.map(ut=>({category:ut.category,payment:ut.paymentMethod,total:ut.amount})),"commissions:",nt.map(ut=>({amount:ut.amount,payment:ut.paymentMethod,category:ut.category}))),xt},[e.overheads,s]),oe=P.useMemo(()=>{const ie=e.fixedCosts.filter(fe=>fe.date===s).reduce((fe,_e)=>_e.paymentMethod==="online"?fe+_e.amount:_e.paymentMethod==="both"&&_e.onlineAmount?fe+_e.onlineAmount:fe,0);return console.log(` Fixed Cost Online Total for ${s}:`,ie,"items:",e.fixedCosts.filter(fe=>fe.date===s).map(fe=>({category:fe.category,payment:fe.paymentMethod,total:fe.amount}))),ie},[e.fixedCosts,s]),ae=P.useMemo(()=>{const ie=ft+q+oe+Ie;return console.log(` TOTAL Online Expenses for ${s}:`,{inventory:ft,overhead:q,fixedCost:oe,contractPayouts:Ie,note:"Contract payouts ARE included in Amount Used from Paytm",total:ie}),ie},[ft,q,oe,Ie,s]),se=P.useMemo(()=>({inventory:ft,overhead:q,fixedCost:oe,total:ae}),[ft,q,oe,ae]);P.useEffect(()=>{if(lt)v({offlineSales:(lt.offlineSales??0).toString(),paytmAmount:(lt.paytmAmount??0).toString(),cashAmount:(lt.cashAmount??0).toString(),employeeSalary:(lt.employeeSalary??0).toString(),previousCashInHand:(lt.previousCashInHand??0).toString(),usedOnlineMoney:ae.toString(),actualCashInHand:(lt.actualCashInHand??0).toString(),actualPaytmBalance:(lt.actualPaytmBalance??0).toString()}),S(!0),A(lt.id);else{let ie=0;Rt&&(ie=Rt.actualCashInHand??0),v({offlineSales:"",paytmAmount:"",cashAmount:"",employeeSalary:"0",previousCashInHand:ie.toString(),usedOnlineMoney:ae.toString(),actualCashInHand:"",actualPaytmBalance:""}),S(!1),A(null)}},[s,lt,Rt,ae]);const K=async ie=>{ie.preventDefault(),console.log(""),console.log(" SAVE BUTTON CLICKED - Starting validation checks"),console.log(""),console.log(" Form Data:",y),console.log(" Financial Values:",{offlineSales:parseFloat(y.offlineSales)||0,paytmAmount:parseFloat(y.paytmAmount)||0,cashAmount:parseFloat(y.cashAmount)||0,previousCashInHand:parseFloat(y.previousCashInHand)||0,usedOnlineMoney:parseFloat(y.usedOnlineMoney)||0,actualCashInHand:parseFloat(y.actualCashInHand)||0,actualPaytmBalance:parseFloat(y.actualPaytmBalance)||0,expectedCashInHand:ot,cashDiscrepancy:(parseFloat(y.actualCashInHand)||0)-ot,expectedPaytmBalance:xe,paytmDiscrepancy:it,onlineCashBalance:xe,totalContractPayout:Ie,totalExpenses:Pt,totalCombinedCash:ot+xe}),console.log(" Validation Flags:",{paymentMismatch:St,isSubmitting:C,canEditSales:Ce,isOperationsManager:Re,isClusterHead:Ze,needsApproval:Ot,needsPaytmApproval:dt,hasPermission:Ce||Re||Ze}),console.log(" Store Context:",{selectedStoreId:t,effectiveStoreId:Se,userStoreId:e.user?.storeId,userRole:e.user?.role}),console.log(" User Info:",{userId:e.user?.id,userEmail:e.user?.email,employeeId:e.user?.employeeId,role:e.user?.role});const fe=y.offlineSales&&y.actualCashInHand&&y.actualPaytmBalance;if(console.log(" Form Completeness:",{hasOfflineSales:!!y.offlineSales,hasActualCash:!!y.actualCashInHand,hasActualPaytm:!!y.actualPaytmBalance,isComplete:fe}),C){console.log(" BLOCKED: Submission already in progress");return}if(!Ce&&!Re&&!Ze){console.log(" BLOCKED: User does not have permission to save sales data"),alert("You do not have permission to save sales data.");return}xe<0&&(console.log(" WARNING: Online Cash (Paytm) is NEGATIVE:",xe),console.log(" This might indicate insufficient funds in Paytm account"));const _e=ot+xe;_e<0&&(console.log(" WARNING: Total Combined Cash is NEGATIVE:",_e),console.log(" This indicates business is running at a loss or data entry issues")),console.log(" All validation checks passed - Showing confirmation dialog..."),D(ie),_(!0),B(!1)},Y=()=>{_(!1),B(!1),D(null)},le=async()=>{if(console.log(""),console.log(" CONFIRMATION DIALOG - Submit Confirmed"),console.log(""),console.log(" Confirmation checkbox checked:",O),!O){console.log(" BLOCKED: Confirmation checkbox not checked"),alert(" Please confirm that you take responsibility for this sales data.");return}console.log(" Closing dialog and setting submitting state..."),_(!1),N(!0);const ie=parseFloat(y.actualCashInHand)||0,fe=ie-ot,_e=parseFloat(y.actualPaytmBalance)||0,nt=_e-xe;console.log(" Cash calculation:",{actualCash:ie,expectedCashInHand:ot,offset:fe,actualPaytm:_e,expectedPaytmBalance:xe,paytmOffset:nt,formData:y});const xt=Re,ut={date:s,offlineSales:parseFloat(y.offlineSales)||0,paytmAmount:parseFloat(y.paytmAmount)||0,cashAmount:parseFloat(y.cashAmount)||0,onlineSales:0,onlineSalesCommission:0,employeeSalary:Ie,previousCashInHand:parseFloat(y.previousCashInHand)||0,usedOnlineMoney:parseFloat(y.usedOnlineMoney)||0,actualCashInHand:ie,cashOffset:fe,actualPaytmBalance:_e,paytmOffset:nt,salesDiscrepancy:lt?.salesDiscrepancy!==void 0?lt.salesDiscrepancy:fe,approvalRequired:Ot||dt,approvalStatus:xt?"pending":"approved",createdBy:e.user?.employeeId||e.user?.email||"unknown",approvedBy:xt?lt?.approvedBy||null:e.user?.employeeId||e.user?.email||"self",approvedAt:xt?lt?.approvedAt||null:new Date().toISOString(),approvalRequested:lt?.approvalRequested||!1,approvalRequestedAt:lt?.approvalRequestedAt||null,requestedCashInHand:lt?.requestedCashInHand||null,requestedOffset:lt?.requestedOffset||null,rejectedBy:lt?.rejectedBy||null,rejectedAt:lt?.rejectedAt||null,rejectionReason:lt?.rejectionReason||null,storeId:t||e.user?.storeId||void 0};console.log(" Saving sales data:",ut);try{if(console.log(""),console.log(" STARTING SAVE PROCESS"),console.log(""),console.log(" Step 1: Calling save API..."),console.log(" Sales data to save:",ut),k&&w?(console.log(" Mode: UPDATING existing sales data"),console.log(" Editing ID:",w),console.log(" Calling context.updateSalesData..."),await e.updateSalesData(w,ut),console.log(" Update successful")):(console.log(" Mode: ADDING new sales data"),console.log(" Calling context.addSalesData..."),await e.addSalesData(ut),console.log(" Add successful")),console.log(""),console.log(" Step 2: Syncing contract worker payouts..."),console.log(" Contract payouts count:",Ct.length),console.log(" Contract payouts:",Ct),Ct.length>0){console.log(" Fetching all payouts to check for duplicates...");const Dt=await Co();console.log(" Total payouts in system:",Dt.length);const Wr=Qe.map(rr=>rr.id);console.log(" Contract worker IDs:",Wr);const Xt=Dt.filter(rr=>rr.date===s&&Wr.includes(rr.employeeId));console.log(" Existing payouts for this date:",Xt.length,Xt),console.log(" Deleting old payouts...");for(const rr of Xt)console.log(" Deleting payout:",rr.id,rr),await np(rr.id),console.log(" Deleted old payout:",rr.id);console.log(" Preparing new payouts to save...");const pr=Ct.filter(rr=>rr.employeeId&&rr.amount).map(rr=>{const Ve=Qe.find(vt=>vt.id===rr.employeeId);return{id:crypto.randomUUID(),employeeId:rr.employeeId,employeeName:Ve?.name||"",amount:parseFloat(rr.amount),date:s,storeId:Se,createdAt:new Date().toISOString()}});console.log(" Payouts to save:",pr.length,pr),pr.length>0?(console.log(" Saving payouts to API..."),await F2(pr),console.log(" Contract worker payouts synced to payroll:",pr)):console.log(" No valid payouts to save")}else{console.log(" No contract payouts entered, checking for old ones to delete...");const Dt=await Co();console.log(" Total payouts in system:",Dt.length);const Wr=Qe.map(pr=>pr.id),Xt=Dt.filter(pr=>pr.date===s&&Wr.includes(pr.employeeId));console.log(" Existing payouts for this date to delete:",Xt.length);for(const pr of Xt)console.log(" Deleting payout:",pr.id),await np(pr.id),console.log(" Deleted payout (no workers entered):",pr.id)}console.log(""),console.log(" Step 3: Reloading employee payouts..."),await ur(),console.log(" Employee payouts reloaded"),console.log(""),console.log(" ALL SAVES COMPLETED SUCCESSFULLY!"),console.log(""),alert("Sales data and contract worker payouts saved successfully!")}catch(Dt){console.log(""),console.log(" ERROR DURING SAVE PROCESS"),console.log(""),console.error(" Error details:",Dt),console.error(" Error stack:",Dt instanceof Error?Dt.stack:"No stack trace"),console.error(" Error message:",Dt instanceof Error?Dt.message:String(Dt)),alert("Failed to save sales data. Please try again.")}finally{console.log(" Resetting isSubmitting to false"),N(!1)}},pe=async()=>{if(!w)return;const ie=parseFloat(y.actualCashInHand)||0,fe=ie-ot;if(parseFloat(y.actualPaytmBalance),!!confirm(`Request approval for cash discrepancy of ${Math.abs(fe).toFixed(2)}?

This will notify the cluster head for approval.`))try{await e.requestSalesApproval(w,ie,fe),alert("Approval request sent successfully!")}catch{alert("Failed to request approval. Please try again.")}},z=async ie=>{if(confirm("Approve this discrepancy? The new cash amount will be accepted."))try{await e.approveDiscrepancy(ie),alert("Discrepancy approved successfully!")}catch{alert("Failed to approve discrepancy. Please try again.")}},ce=async ie=>{const fe=prompt("Please enter reason for rejection:");if(fe)try{await e.rejectDiscrepancy(ie,fe),alert("Discrepancy rejected. Manager must pay the difference.")}catch{alert("Failed to reject discrepancy. Please try again.")}},ye=async()=>{const ie=parseFloat(re);if(!ie||ie<=0){alert("Please enter a valid amount to convert");return}const fe=ot;if(ie>fe){alert(`Cannot convert more than ${fe.toFixed(2)} (your current expected cash in hand)`);return}if(confirm(`Convert ${ie.toFixed(2)} from Offline Cash to Online Cash (Paytm)?

Expected Cash: ${ot.toFixed(2)}  ${(ot-ie).toFixed(2)}
Online Cash: ${xe.toFixed(2)}  ${(xe+ie).toFixed(2)}`)){X(!0);try{await F5(e.user.accessToken,Se,s,ie,e.user?.name||e.user?.email||"Unknown User"),await e.loadSalesData(),ee(!1),Q(""),alert("Cash converted successfully!")}catch(_e){console.error("Error converting cash:",_e),alert(_e.message||"Failed to convert cash. Please try again.")}finally{X(!1)}}},$e=P.useMemo(()=>{const fe=(Se?f.filter(_e=>_e.storeId===Se):f).find(_e=>_e.date===s);return fe?(fe.swiggySales||0)+(fe.zomatoSales||0):0},[f,s,Se]),De=parseFloat(y.offlineSales)||0,Ge=parseFloat(y.paytmAmount)||0,Be=parseFloat(y.cashAmount)||0,qe=Ge+Be,St=Math.abs(De-qe)>.01;return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-purple-50/30 to-pink-50/30",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx(Rg,{selectedDate:s,onDateChange:i}),a.jsxs("div",{className:"flex gap-3 mb-6 mt-4 bg-white/50 backdrop-blur-sm p-1.5 rounded-2xl border border-purple-200/50",children:[a.jsxs("button",{onClick:()=>n("offline"),className:`flex-1 py-3 px-6 rounded-xl font-semibold transition-all text-sm ${r==="offline"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"text-gray-600 hover:bg-white/80"}`,children:[a.jsx(JE,{className:"inline-block w-4 h-4 mr-2"}),"Offline Sales"]}),a.jsxs("button",{onClick:()=>n("online"),className:`flex-1 py-3 px-6 rounded-xl font-semibold transition-all text-sm ${r==="online"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"text-gray-600 hover:bg-white/80"}`,children:[a.jsx(xm,{className:"inline-block w-4 h-4 mr-2"}),"Online Sales (Swiggy/Zomato)"]})]}),r==="online"&&a.jsx(Ole,{context:e,selectedStoreId:t,selectedDate:s,onDateChange:i,onDataUpdate:It}),r==="offline"&&a.jsxs(a.Fragment,{children:[Nt&&e.isManager&&a.jsxs("div",{className:"mt-6 bg-gradient-to-br from-blue-50/80 to-blue-100/50 backdrop-blur-sm border border-blue-300/50 rounded-2xl p-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:a.jsx(Qa,{className:"w-5 h-5 text-blue-600"})}),a.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"Weekly Cash Reporting - Friday"})]}),a.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Today is Friday! Please report the actual cash left with you after entering today's sales data."}),a.jsx("div",{className:"bg-blue-50/70 border border-blue-200/50 rounded-xl p-3 text-xs",children:a.jsxs("p",{className:"text-gray-700",children:[a.jsx("strong",{children:"Important:"})," If the cash discrepancy exceeds 500, cluster head approval will be required before saving."]})})]}),Ze&&a.jsxs("div",{className:"mt-6 space-y-4",children:[e.salesData.filter(ie=>ie.approvalRequested&&!ie.approvedBy&&!ie.rejectedBy).length>0&&a.jsxs("div",{className:"bg-gradient-to-br from-orange-50/80 to-orange-100/50 backdrop-blur-sm border border-orange-300/50 rounded-2xl p-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"p-2 bg-orange-500/10 rounded-lg",children:a.jsx(Qa,{className:"w-5 h-5 text-orange-600"})}),a.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"Discrepancy Approval Requests"})]}),a.jsx("div",{className:"space-y-3",children:e.salesData.filter(ie=>ie.approvalRequested&&!ie.approvedBy&&!ie.rejectedBy).map(ie=>a.jsxs("div",{className:"bg-white/80 rounded-xl p-4 border border-orange-300/50 shadow-sm",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Kn(ie.date)}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Expected Cash: ",(ie.actualCashInHand-ie.cashOffset).toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-600",children:["Actual Cash: ",ie.requestedCashInHand?.toFixed(2)]}),a.jsxs("p",{className:"text-xs font-semibold text-orange-600 mt-1",children:["Discrepancy: ",((ie.requestedCashInHand||0)-(ie.actualCashInHand-ie.cashOffset)).toFixed(2)]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>z(ie.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold transition-all text-sm shadow-sm",children:" Approve"}),a.jsx("button",{onClick:()=>ce(ie.id),className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-xl font-semibold transition-all text-sm shadow-sm",children:" Reject"})]})]},ie.id))})]}),e.salesData.filter(ie=>ie.approvalRequired&&!ie.approvedBy&&!ie.approvalRequested).length>0&&a.jsxs("div",{className:"bg-[#FFF4E6] border-2 border-[#FFE4C4] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Qa,{className:"w-6 h-6 text-[#E8A87C]"}),a.jsx("h2",{className:"text-gray-900",children:"Pending Approvals"})]}),a.jsx("div",{className:"space-y-3",children:e.salesData.filter(ie=>ie.approvalRequired&&!ie.approvedBy&&!ie.approvalRequested).map(ie=>a.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center justify-between border border-yellow-300",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900",children:Kn(ie.date)}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Cash Discrepancy: ",a.jsxs("span",{className:ie.cashOffset>0?"text-green-600":"text-red-600",children:[ie.cashOffset>0?"+":"","",ie.cashOffset.toFixed(2)]})]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Expected: ",(ie.actualCashInHand-ie.cashOffset).toFixed(2)," | Actual: ",ie.actualCashInHand.toFixed(2)]})]}),a.jsx("button",{onClick:async()=>{try{await e.approveSalesData(ie.id),alert("Approved successfully!")}catch{alert("Failed to approve. Please try again.")}},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition-all",children:" Approve"})]},ie.id))})]})]}),lt&&lt.approvedBy&&a.jsxs("div",{className:"mt-6 bg-gradient-to-br from-green-50/80 to-green-100/50 backdrop-blur-sm border border-green-300/50 rounded-2xl p-5 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:a.jsx(lr,{className:"w-5 h-5 text-green-600"})}),a.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"Sales Approved"})]}),a.jsxs("p",{className:"text-sm text-gray-700",children:[" Your sales entry for ",Kn(lt.date)," has been approved by ",lt.approvedBy,"."]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5 mt-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:a.jsx(ca,{className:"w-5 h-5 text-green-600"})}),a.jsx("h2",{className:"text-base font-semibold text-gray-800",children:"Sales Entry"})]}),a.jsxs("form",{onSubmit:K,className:"space-y-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-50/80 to-blue-100/50 backdrop-blur-sm rounded-2xl p-5 border border-blue-200/50 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:a.jsx(JE,{className:"w-5 h-5 text-blue-600"})}),a.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Offline Sales"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Total Offline Sales ()"}),a.jsx("input",{type:"number",step:"0.01",value:y.offlineSales,onChange:ie=>v({...y,offlineSales:ie.target.value}),className:"w-full px-4 py-3 border border-blue-200 bg-white/70 rounded-xl text-lg font-semibold focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all",required:!0,disabled:!Ce,placeholder:"4155"})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-amber-50/80 to-orange-100/50 backdrop-blur-sm rounded-2xl p-5 border border-orange-200/50 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"p-2 bg-orange-500/10 rounded-lg",children:a.jsx(Po,{className:"w-5 h-5 text-orange-600"})}),a.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Payment Mode Distribution"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[a.jsxs("div",{className:"bg-white/70 p-3 rounded-xl border border-orange-200/50",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Paytm ()"}),a.jsx("input",{type:"number",step:"0.01",value:y.paytmAmount,onChange:ie=>v({...y,paytmAmount:ie.target.value}),className:"w-full px-2 py-1 border-0 bg-transparent text-base font-semibold focus:ring-0 focus:outline-none",required:!0,disabled:!Ce,placeholder:"2025"})]}),a.jsxs("div",{className:"bg-white/70 p-3 rounded-xl border border-orange-200/50",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Cash ()"}),a.jsx("input",{type:"number",step:"0.01",value:y.cashAmount,onChange:ie=>v({...y,cashAmount:ie.target.value}),className:"w-full px-2 py-1 border-0 bg-transparent text-base font-semibold focus:ring-0 focus:outline-none",required:!0,disabled:!Ce,placeholder:"2130"})]})]}),St&&a.jsxs("div",{className:"bg-red-100/80 border border-red-300/50 text-red-700 px-3 py-2 rounded-xl text-xs flex items-center gap-2",children:[a.jsx(Qa,{className:"w-3.5 h-3.5"}),"Payment mode total (",qe.toFixed(2),") doesn't match offline sales (",De.toFixed(2),")"]}),!St&&De>0&&a.jsxs("div",{className:"bg-green-100/80 border border-green-300/50 text-green-700 px-3 py-2 rounded-xl text-xs flex items-center gap-2",children:[a.jsx(lr,{className:"w-3.5 h-3.5"}),a.jsx("span",{className:"text-xs",children:" Payment modes match total sales"})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50/80 to-purple-100/50 backdrop-blur-sm rounded-2xl p-5 border border-purple-200/50 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg",children:a.jsx(La,{className:"w-5 h-5 text-purple-600"})}),a.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Contract Worker Payouts"})]}),e.isManager&&a.jsxs("button",{type:"button",onClick:Da,className:"flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-xs font-medium shadow-sm",children:[a.jsx(Xi,{className:"w-3.5 h-3.5"}),"Add Worker"]})]}),a.jsx("div",{className:"bg-blue-50/70 border border-blue-200/50 rounded-xl p-3 mb-3 text-xs text-blue-800",children:a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx(xm,{className:"w-3.5 h-3.5"}),a.jsxs("span",{children:[" Employee payouts are deducted from ",a.jsx("strong",{children:"Online Cash in Hand (Paytm)"}),", not from Expected Cash."]})]})}),Kt?a.jsx("p",{className:"text-sm text-gray-500",children:"Loading workers..."}):Qe.length===0?a.jsx("div",{className:"bg-yellow-50/70 border border-yellow-200/50 rounded-xl p-3 text-xs text-gray-700",children:a.jsx("p",{children:"No contract workers found. Please add contract workers in the Payroll tab first."})}):a.jsxs("div",{className:"space-y-2.5",children:[Ct.length===0?a.jsx("div",{className:"bg-white/70 border border-gray-200/50 rounded-xl p-3 text-xs text-gray-600",children:'No payouts entered for today. Click "Add Worker" to record a payout.'}):Ct.map((ie,fe)=>{const _e=Qe.find(nt=>nt.id===ie.employeeId);return a.jsx("div",{className:"bg-white/70 border border-purple-200/50 rounded-xl p-3 space-y-2",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Select Worker"}),a.jsxs("select",{value:ie.employeeId,onChange:nt=>He(fe,"employeeId",nt.target.value),className:"w-full px-3 py-2 border border-purple-200 bg-white rounded-lg text-sm focus:ring-2 focus:ring-purple-400 focus:border-transparent transition-all",disabled:!e.isManager,required:!0,children:[a.jsx("option",{value:"",children:"Choose a worker..."}),Qe.map(nt=>a.jsxs("option",{value:nt.id,children:[nt.name," (",nt.employeeId,")"]},nt.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Amount Paid ()"}),a.jsx("input",{type:"number",step:"0.01",value:ie.amount,onChange:nt=>He(fe,"amount",nt.target.value),className:"w-full px-3 py-2 border border-purple-200 bg-white rounded-lg text-sm focus:ring-2 focus:ring-purple-400 focus:border-transparent transition-all",placeholder:_e?.dailyRate?`Suggested: ${_e.dailyRate}`:"Enter amount",disabled:!e.isManager,required:!0}),_e?.dailyRate&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Daily rate: ",_e.dailyRate]})]})]}),e.isManager&&a.jsx("button",{type:"button",onClick:()=>Oa(fe),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors mt-5",children:a.jsx(ea,{className:"w-4 h-4"})})]})},fe)}),Ct.length>0&&a.jsxs("div",{className:"bg-purple-600 text-white rounded-xl p-3 flex justify-between items-center shadow-sm",children:[a.jsx("span",{className:"text-xs font-medium",children:"Total Contract Payouts:"}),a.jsxs("span",{className:"text-lg font-bold",children:["",Ie.toFixed(2)]})]})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-3 bg-purple-50/70 p-2 rounded-xl border border-purple-200/50",children:[" ",a.jsx("strong",{children:"Note:"})," Payouts entered here will automatically sync with the Payroll page. For permanent employees, use the Payroll tab."]}),Ie>0&&a.jsxs("p",{className:"text-xs text-purple-700 mt-2 bg-purple-100/70 p-2 rounded-xl border border-purple-300/50 flex items-center gap-1",children:[" ",a.jsx("strong",{children:"Cash Impact:"})," ",Ie.toFixed(2)," will be deducted from Online Cash in Hand (Paytm)."]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-cyan-50/80 to-cyan-100/50 backdrop-blur-sm rounded-2xl p-5 border border-cyan-200/50 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"p-2 bg-cyan-500/10 rounded-lg",children:a.jsx(F9,{className:"w-5 h-5 text-cyan-600"})}),a.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Used Online Money"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:["Amount Used from Paytm ()",ae>0&&a.jsxs("span",{className:"ml-2 text-xs bg-blue-100/70 text-blue-800 px-2 py-0.5 rounded-full border border-blue-200/50",children:["Auto: ",ft.toFixed(2),"(Inv) + ",q.toFixed(2),"(OH) + ",oe.toFixed(2),"(FC) + ",Ie.toFixed(2),"(CP)"]})]}),a.jsx("input",{type:"number",step:"0.01",value:y.usedOnlineMoney,onChange:ie=>v({...y,usedOnlineMoney:ie.target.value}),className:"w-full px-4 py-3 border border-cyan-200 bg-white/70 rounded-xl text-lg font-semibold focus:ring-2 focus:ring-cyan-400 focus:border-transparent transition-all",required:!0,disabled:!Ce})]})]}),(Ke||pt)&&a.jsxs("div",{className:"bg-gradient-to-br from-amber-50/80 to-amber-100/50 backdrop-blur-sm rounded-2xl p-5 border border-amber-200/50 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"p-2 bg-amber-500/10 rounded-lg",children:a.jsx(ii,{className:"w-5 h-5 text-amber-600"})}),a.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:Ke?"Opening Cash Balance (Day 1)":"Cash Left from Previous Month"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Cash Left ()"}),a.jsx("input",{type:"number",step:"0.01",value:y.previousCashInHand,onChange:ie=>v({...y,previousCashInHand:ie.target.value}),className:"w-full px-4 py-3 border border-amber-200 bg-white/70 rounded-xl text-lg font-semibold focus:ring-2 focus:ring-amber-400 focus:border-transparent transition-all",disabled:!Ce,required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:Ke?"Enter starting cash for the first day":"Enter cash left from previous month (after deducting all expenses and salaries)"})]})]}),!Ke&&!pt&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-gray-50/80 to-gray-100/50 backdrop-blur-sm rounded-2xl p-5 border border-gray-200/50 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("div",{className:"p-2 bg-gray-500/10 rounded-lg",children:a.jsx(ii,{className:"w-5 h-5 text-gray-600"})}),a.jsx("h3",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:"Offline Cash Left from Previous Day"})]}),a.jsxs("div",{className:"bg-white/70 rounded-xl p-4 border border-gray-200/50",children:[a.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",(parseFloat(y.previousCashInHand)||0).toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-start gap-1",children:[a.jsx("span",{className:"text-yellow-500",children:""}),a.jsx("span",{children:"Auto-calculated from previous day's offline cash left after deducting expenses (not including employee payouts)."})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50/80 to-pink-100/50 backdrop-blur-sm rounded-2xl p-5 border border-purple-200/50 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg",children:a.jsx(ii,{className:"w-5 h-5 text-purple-600"})}),a.jsx("h3",{className:"text-xs font-semibold text-purple-700 uppercase tracking-wide",children:"Online Cash (Paytm) Left from Previous Day"})]}),a.jsxs("div",{className:"bg-white/70 rounded-xl p-4 border border-purple-200/50",children:[a.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",(()=>{const ie=new Date(s);ie.setDate(ie.getDate()-1);const fe=ie.toISOString().split("T")[0],_e=Se?e.salesData.find(rr=>rr.date===fe&&rr.storeId===Se):e.salesData.find(rr=>rr.date===fe);if(_e&&_e.actualPaytmBalance!==void 0&&_e.actualPaytmBalance!==null)return _e.actualPaytmBalance.toFixed(2);if(!_e&&!e.onlineCashRecalibrations.find(Ve=>Ve.date===fe&&Ve.storeId===Se))return"0.00";const nt=e.onlineCashRecalibrations.filter(rr=>rr.storeId===Se&&rr.date<s).sort((rr,Ve)=>Ve.date.localeCompare(rr.date))[0];if(!nt)return"0.00";const xt=nt.date,ut=e.salesData.filter(rr=>(Se?rr.storeId===Se:!0)&&rr.date>xt&&rr.date<s),Dt=ut.reduce((rr,Ve)=>rr+(Ve.paytmAmount||0),0),Wr=ut.reduce((rr,Ve)=>rr+(Ve.onlineSales||0),0),Xt=ut.reduce((rr,Ve)=>rr+(Ve.usedOnlineMoney||0),0),pr=ut.reduce((rr,Ve)=>rr+(Ve.contractPayouts?.reduce((vt,Ft)=>vt+Ft.amount,0)||0),0);return(nt.balance+Dt+Wr-Xt-pr).toFixed(2)})()]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-start gap-1",children:[a.jsx("span",{className:"text-yellow-500",children:""}),a.jsx("span",{children:"Auto-calculated from previous day's Paytm balance after accounting for online sales, expenses, and payouts."})]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-teal-50/80 to-teal-100/50 backdrop-blur-sm rounded-2xl p-5 border border-teal-200/50 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"p-2 bg-teal-500/10 rounded-lg",children:a.jsx(ii,{className:"w-5 h-5 text-teal-600"})}),a.jsx("h3",{className:"text-xs font-semibold text-teal-700 uppercase tracking-wide",children:"Cash Status"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-2",children:"Expected Cash"}),a.jsxs("div",{className:"bg-white/70 rounded-xl p-4 border border-teal-200/50",children:[a.jsxs("p",{className:"text-4xl font-bold text-gray-900",children:["",ot.toFixed(2)]}),a.jsxs("details",{className:"mt-2",children:[a.jsx("summary",{className:"text-xs text-blue-600 cursor-pointer hover:underline flex items-center gap-1",children:" View expense breakdown (all expenses incl. commission)"}),a.jsxs("div",{className:"mt-2 text-xs text-gray-600 bg-white p-2 rounded border border-teal-200",children:[a.jsx("p",{className:"font-semibold text-teal-700 mb-1",children:"Inventory Cost:"}),a.jsxs("p",{className:"ml-2",children:["",(e.inventory.filter(fe=>{const _e=fe.date===s,nt=Se?fe.storeId===Se:!0;return _e&&nt}).reduce((fe,_e)=>_e.paymentMethod==="cash"||!_e.paymentMethod?fe+_e.totalCost:_e.paymentMethod==="both"&&_e.cashAmount?fe+_e.cashAmount:fe,0)+se.inventory).toFixed(2)," (cash: ",e.inventory.filter(fe=>{const _e=fe.date===s,nt=Se?fe.storeId===Se:!0;return _e&&nt}).reduce((fe,_e)=>_e.paymentMethod==="cash"||!_e.paymentMethod?fe+_e.totalCost:_e.paymentMethod==="both"&&_e.cashAmount?fe+_e.cashAmount:fe,0).toFixed(2),", online: ",se.inventory.toFixed(2),")"]}),a.jsx("p",{className:"font-semibold text-teal-700 mt-2 mb-1",children:"Overhead Cost:"}),a.jsxs("p",{className:"ml-2",children:["",(e.overheads.filter(fe=>{const _e=fe.date===s,nt=Se?fe.storeId===Se:!0;return _e&&nt}).reduce((fe,_e)=>_e.paymentMethod==="cash"||!_e.paymentMethod?fe+_e.amount:_e.paymentMethod==="both"&&_e.cashAmount?fe+_e.cashAmount:fe,0)+se.overhead).toFixed(2)," (cash: ",e.overheads.filter(fe=>{const _e=fe.date===s,nt=Se?fe.storeId===Se:!0;return _e&&nt}).reduce((fe,_e)=>_e.paymentMethod==="cash"||!_e.paymentMethod?fe+_e.amount:_e.paymentMethod==="both"&&_e.cashAmount?fe+_e.cashAmount:fe,0).toFixed(2),", online: ",se.overhead.toFixed(2),")"]}),a.jsx("p",{className:"font-semibold text-teal-700 mt-2 mb-1",children:"Fixed Costs:"}),a.jsxs("p",{className:"ml-2",children:["",(e.fixedCosts.filter(fe=>{const _e=fe.date===s,nt=Se?fe.storeId===Se:!0;return _e&&nt}).reduce((fe,_e)=>_e.paymentMethod==="cash"||!_e.paymentMethod?fe+_e.amount:_e.paymentMethod==="both"&&_e.cashAmount?fe+_e.cashAmount:fe,0)+se.fixedCost).toFixed(2)," (cash + online)"]}),a.jsx("p",{className:"font-semibold text-teal-700 mt-2 mb-1",children:"Total Expenses:"}),a.jsxs("p",{className:"ml-2 font-medium",children:["",Pt.toFixed(2)]})]})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:["Actual Cash in Hand () ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",step:"0.01",value:y.actualCashInHand,onChange:ie=>v({...y,actualCashInHand:ie.target.value}),className:"w-full px-4 py-3 border border-teal-300 rounded-xl bg-white/70 text-lg font-semibold focus:ring-2 focus:ring-teal-400 focus:border-transparent transition-all",required:!0,disabled:!Ce,placeholder:"Count and enter actual physical cash"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Count and enter actual physical cash"})]}),Sr!==0&&parseFloat(y.actualCashInHand)>0&&a.jsxs("div",{className:`p-3 rounded-lg border-2 ${Sr>0?"bg-green-50 border-green-300":"bg-red-50 border-red-300"}`,children:[a.jsxs("p",{className:`font-semibold ${Sr>0?"text-green-700":"text-red-700"}`,children:[Sr>0?"Cash Excess":"Cash Shortage",": ",Math.abs(Sr).toFixed(2)]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:Math.abs(Sr)>500?" High discrepancy - requires approval from cluster head":"Discrepancy will be noted in records"})]}),a.jsx("div",{className:"col-span-2 mt-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-purple-50/80 to-purple-100/50 backdrop-blur-sm rounded-2xl p-5 border border-purple-200/50 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg",children:a.jsx(xm,{className:"w-5 h-5 text-purple-600"})}),a.jsx("h3",{className:"text-xs font-semibold text-purple-700 uppercase tracking-wide",children:"Online Cash (Paytm) Reconciliation"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Expected Paytm Balance ()"}),a.jsxs("div",{className:"bg-white/70 rounded-xl p-4 border border-purple-200/50",children:[a.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",xe.toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["Previous Paytm: ",(()=>{const ie=new Date(s);ie.setDate(ie.getDate()-1);const fe=ie.toISOString().split("T")[0];return((Se?e.salesData.find(nt=>nt.date===fe&&nt.storeId===Se):e.salesData.find(nt=>nt.date===fe))?.actualPaytmBalance||0).toFixed(2)})()," + Paytm Received: ",(parseFloat(y.paytmAmount)||0).toFixed(2)," + Online Payouts: ",(parseFloat(y.onlineSales)||0).toFixed(2)," - Used for Expenses: ",(parseFloat(y.usedOnlineMoney)||0).toFixed(2)," - Employee Payouts: ",Ie.toFixed(2)]}),a.jsxs("details",{className:"mt-2",children:[a.jsx("summary",{className:"text-xs text-blue-600 cursor-pointer hover:underline flex items-center gap-1",children:" View Paytm usage breakdown"}),a.jsxs("div",{className:"mt-2 text-xs text-gray-600 bg-white p-2 rounded border border-purple-200",children:[a.jsx("p",{className:"font-semibold text-purple-700 mb-1",children:"Paytm Used for Expenses (from sales form):"}),a.jsxs("p",{className:"ml-2",children:["Amount Used from Paytm: ",(parseFloat(y.usedOnlineMoney)||0).toFixed(2)]}),a.jsx("p",{className:"font-semibold text-purple-700 mt-2 mb-1",children:"Employee Payouts (all from Paytm):"}),a.jsxs("p",{className:"ml-2",children:["Contract Workers: ",Ie.toFixed(2)]}),a.jsx("p",{className:"font-semibold text-purple-700 mt-2 mb-1",children:"Total Paytm Deductions:"}),a.jsxs("p",{className:"ml-2 font-medium",children:["",((parseFloat(y.usedOnlineMoney)||0)+Ie).toFixed(2)]}),a.jsx("p",{className:"font-semibold text-purple-700 mt-2 mb-1",children:"Paytm Additions:"}),a.jsxs("p",{className:"ml-2",children:["Paytm Received: ",(parseFloat(y.paytmAmount)||0).toFixed(2)]}),a.jsxs("p",{className:"ml-2",children:["Online Payouts (Swiggy+Zomato): ",(parseFloat(y.onlineSales)||0).toFixed(2)]}),a.jsxs("p",{className:"ml-2 font-medium",children:["Total Additions: ",((parseFloat(y.paytmAmount)||0)+(parseFloat(y.onlineSales)||0)).toFixed(2)]})]})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:["Actual Paytm Balance () ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",step:"0.01",value:y.actualPaytmBalance,onChange:ie=>v({...y,actualPaytmBalance:ie.target.value}),className:"w-full px-4 py-3 border border-purple-300 rounded-xl bg-white/70 text-lg font-semibold focus:ring-2 focus:ring-purple-400 focus:border-transparent transition-all",required:!0,disabled:!Ce,placeholder:"Check and enter actual paytm balance"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Check your Paytm wallet balance"})]}),it!==0&&parseFloat(y.actualPaytmBalance)>0&&a.jsxs("div",{className:`p-3 rounded-lg border-2 ${it>0?"bg-green-50 border-green-300":"bg-red-50 border-red-300"}`,children:[a.jsxs("p",{className:`font-semibold ${it>0?"text-green-700":"text-red-700"}`,children:[it>0?"Paytm Excess":"Paytm Shortage",": ",Math.abs(it).toFixed(2)]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:Math.abs(it)>500?" High discrepancy - requires approval from cluster head":"Discrepancy will be noted in records"})]})]})]})})]})]}),k&&lt&&a.jsx("div",{className:"bg-white border border-gray-300 rounded-lg p-4",children:a.jsxs("div",{className:"space-y-3",children:[(Ot||dt)&&lt.approvalRequested&&!lt.approvedBy&&a.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-300 text-yellow-800 px-4 py-3 rounded-lg",children:[a.jsx("p",{className:"font-semibold",children:" Pending Approval"}),a.jsxs("p",{className:"mt-1",children:["This entry is waiting for cluster head approval due to high ",Ot&&dt?"cash and Paytm discrepancy":Ot?"cash discrepancy":"Paytm discrepancy","."]})]}),lt.approvedBy&&a.jsxs("div",{className:"bg-green-50 border-2 border-green-300 text-green-700 px-4 py-3 rounded-lg",children:[a.jsx("p",{className:"font-semibold",children:" Approved"}),a.jsxs("p",{className:"mt-1",children:["Approved by: ",lt.approvedBy]}),lt.approvalDate&&a.jsxs("p",{className:"text-sm",children:["Date: ",new Date(lt.approvalDate).toLocaleString()]})]}),lt.rejectedBy&&a.jsx("div",{className:"bg-red-50 border-2 border-red-300 text-red-700 px-4 py-3 rounded-lg",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:" Rejected"}),a.jsxs("p",{className:"mt-1",children:["Rejected by: ",lt.rejectedBy]}),lt.rejectionDate&&a.jsxs("p",{className:"text-sm",children:["Date: ",new Date(lt.rejectionDate).toLocaleString()]}),lt.rejectionReason&&a.jsxs("p",{className:"mt-1 italic",children:["Reason: ",lt.rejectionReason]}),a.jsx("p",{className:"mt-1 font-medium",children:"You must pay the discrepancy from your pocket."})]})})]})}),Ce&&a.jsxs("div",{className:"space-y-3",children:[St&&a.jsxs("div",{className:"bg-red-100/80 border border-red-400/50 text-red-800 px-4 py-3 rounded-xl text-sm font-medium flex items-center gap-2 shadow-sm",children:[a.jsx(Qa,{className:"w-5 h-5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold",children:"Cannot Save: Payment Mismatch"}),a.jsxs("div",{className:"text-xs mt-1",children:["Payment total (",qe.toFixed(2),") must match offline sales (",De.toFixed(2),")"]})]})]}),a.jsxs("button",{type:"submit",disabled:St||C,className:"w-full px-6 py-3.5 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-semibold text-sm",children:[C&&a.jsx(Io,{className:"w-5 h-5 animate-spin"}),C?"Saving...":k?"Update Sales Data":"Save Sales Data"]}),k&&w&&(Ot||dt)&&!lt?.approvedBy&&!lt?.approvalRequested&&a.jsxs("button",{type:"button",onClick:pe,className:"w-full px-6 py-3.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2 font-semibold text-sm",children:[a.jsx(Qa,{className:"w-5 h-5"}),"Request Approval from Cluster Head"]}),k&&lt?.approvalRequested&&!lt?.approvedBy&&!lt?.rejectedBy&&a.jsx("div",{className:"w-full px-6 py-3 bg-orange-100/80 border border-orange-300/50 text-orange-800 rounded-xl text-center text-sm font-medium shadow-sm",children:" Approval request sent - Waiting for cluster head response"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-50/80 to-green-100/50 backdrop-blur-sm rounded-2xl p-5 border border-green-200/50 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"p-1.5 bg-green-500/10 rounded-lg",children:a.jsx(ca,{className:"w-5 h-5 text-green-600"})}),a.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Total Sales"})]}),a.jsxs("p",{className:"text-4xl font-bold text-gray-900",children:["",(De+$e).toLocaleString()]}),a.jsxs("div",{className:"mt-4 pt-3 border-t border-green-200/50 space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600",children:"Offline Sales:"}),a.jsxs("span",{className:"font-semibold text-gray-900",children:["",De.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600",children:"Online Sales:"}),a.jsxs("span",{className:"font-semibold text-gray-900",children:["",$e.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50/80 to-blue-100/50 backdrop-blur-sm rounded-2xl p-5 border border-blue-200/50 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"p-1.5 bg-blue-500/10 rounded-lg",children:a.jsx(ii,{className:"w-5 h-5 text-blue-600"})}),a.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Payment Breakdown"})]}),a.jsxs("div",{className:"space-y-3 mt-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Cash Received:"}),a.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["",Be.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Paytm Received:"}),a.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["",Ge.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-blue-200/50",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Online Sales:"}),a.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",$e.toLocaleString()]})]})]})]}),!Ke&&a.jsxs("div",{className:"bg-gradient-to-br from-violet-50/80 to-purple-100/50 backdrop-blur-sm rounded-2xl p-5 border border-purple-200/50 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"p-1.5 bg-purple-500/10 rounded-lg",children:a.jsx(ii,{className:"w-5 h-5 text-purple-600"})}),a.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Cash Status"})]}),ot>0&&a.jsxs("button",{onClick:()=>ee(!0),className:"flex items-center gap-1 px-2.5 py-1 bg-purple-600/10 hover:bg-purple-600/20 rounded-lg text-xs font-semibold transition-colors text-purple-700",title:"Convert Offline Cash to Online Cash (Paytm)",children:[a.jsx(Qy,{className:"w-3 h-3"}),"Convert to Online"]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Expected Cash"}),a.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",ot.toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Previous Cash: ",(parseFloat(y.previousCashInHand)||0).toFixed(2)," + Amount Used from Paytm: ",(parseFloat(y.usedOnlineMoney)||0).toFixed(2)," + Cash Received: ",Be.toFixed(2)," - Expenses: ",Pt.toFixed(2)," - Contract Payouts: ",Ie.toFixed(2)]})]}),y.actualCashInHand&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pt-3 border-t border-purple-200/50",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Actual Cash"}),a.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["",(parseFloat(y.actualCashInHand)||0).toFixed(2)]})]}),Math.abs(Sr)>0&&a.jsxs("div",{className:"pt-3 border-t border-purple-200/50",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Difference"}),a.jsxs("p",{className:`text-2xl font-bold ${Sr>0?"text-green-600":"text-red-600"}`,children:[Sr>0?"+":"","",Sr.toFixed(2)]})]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50/80 to-violet-100/50 backdrop-blur-sm rounded-2xl p-5 border border-purple-200/50 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"p-1.5 bg-purple-500/10 rounded-lg",children:a.jsx(xm,{className:"w-5 h-5 text-purple-600"})}),a.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Online Cash in Hand (Paytm)"})]}),a.jsxs("p",{className:"text-4xl font-bold text-gray-900 mb-4",children:["",xe.toLocaleString()]}),a.jsxs("div",{className:"space-y-2 text-sm bg-gray-800/10 rounded-lg p-3",children:[a.jsxs("div",{className:"flex justify-between text-green-700",children:[a.jsx("span",{children:"+ Paytm In:"}),a.jsxs("span",{children:["",(()=>{const fe=e.onlineCashRecalibrations.filter(xt=>xt.storeId===Se&&xt.date<=s).sort((xt,ut)=>ut.date.localeCompare(xt.date))[0]?.date||"0000-00-00";return((Se?e.salesData.filter(xt=>xt.storeId===Se&&xt.date>fe&&xt.date<s):e.salesData.filter(xt=>xt.date>fe&&xt.date<s)).reduce((xt,ut)=>xt+(ut.paytmAmount??0),0)+Ge).toLocaleString()})()]})]}),a.jsxs("div",{className:"flex justify-between text-emerald-700",children:[a.jsx("span",{children:"+ Online Payouts:"}),a.jsxs("span",{children:["",(()=>{const fe=e.onlineCashRecalibrations.filter(xt=>xt.storeId===Se&&xt.date<=s).sort((xt,ut)=>ut.date.localeCompare(xt.date))[0]?.date||"0000-00-00";return((Se?e.salesData.filter(xt=>xt.storeId===Se&&xt.date>fe&&xt.date<s):e.salesData.filter(xt=>xt.date>fe&&xt.date<s)).reduce((xt,ut)=>xt+(ut.onlineSales??0),0)+$e).toLocaleString()})()]})]}),a.jsxs("div",{className:"flex justify-between text-red-700",children:[a.jsx("span",{children:"- Used for Expenses:"}),a.jsxs("span",{children:["",(()=>{const fe=e.onlineCashRecalibrations.filter(_e=>_e.storeId===Se&&_e.date<=s).sort((_e,nt)=>nt.date.localeCompare(_e.date))[0]?.date||"0000-00-00";return gt.filter(_e=>_e.date>fe).reduce((_e,nt)=>_e+nt.usedOnlineMoney,0).toLocaleString()})()]})]}),a.jsxs("div",{className:"flex justify-between text-orange-700",children:[a.jsx("span",{children:"- Employee Payouts:"}),a.jsxs("span",{children:["",(()=>{const fe=e.onlineCashRecalibrations.filter(_e=>_e.storeId===Se&&_e.date<=s).sort((_e,nt)=>nt.date.localeCompare(_e.date))[0]?.date||"0000-00-00";return gt.filter(_e=>_e.date>fe).reduce((_e,nt)=>_e+(nt.employeePayouts||0),0).toLocaleString()})()]})]}),a.jsxs("div",{className:"flex justify-between text-gray-700 pt-2 border-t border-gray-700/20",children:[a.jsx("span",{children:"Used Today:"}),a.jsxs("span",{children:["",(parseFloat(y.usedOnlineMoney)||0).toLocaleString()]})]}),Ie>0&&a.jsxs("div",{className:"flex justify-between text-gray-700",children:[a.jsx("span",{children:"Employee Payouts Today:"}),a.jsxs("span",{children:["",Ie.toLocaleString()]})]}),Dr>0&&a.jsxs("div",{className:"flex justify-between text-gray-700",children:[a.jsx("span",{children:"Fixed Costs Today (Online):"}),a.jsxs("span",{children:["",Dr.toLocaleString()]})]}),pa>0&&a.jsxs("div",{className:"flex justify-between text-gray-700",children:[a.jsx("span",{children:"Overhead Costs Today (Online):"}),a.jsxs("span",{children:["",pa.toLocaleString()]})]})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("button",{onClick:()=>ne(!0),className:"w-full px-4 py-2 bg-white/20 hover:bg-white/30 text-gray-800 rounded-lg transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[a.jsx(fa,{className:"w-4 h-4"}),"Daily Breakdown"]})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-50/80 to-orange-100/50 backdrop-blur-sm rounded-2xl p-5 border border-yellow-300/50 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"p-1.5 bg-yellow-500/10 rounded-lg",children:a.jsx(ii,{className:"w-5 h-5 text-yellow-700"})}),a.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Total Cash (Offline + Paytm)"})]}),a.jsxs("p",{className:"text-4xl font-bold text-gray-900 mb-4",children:["",(ot+xe).toLocaleString()]}),a.jsxs("div",{className:"space-y-2 text-sm bg-white/70 rounded-xl p-3 border border-yellow-200/50",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-medium text-gray-600",children:"Expected Cash (Offline):"}),a.jsxs("span",{className:"text-xl font-semibold text-gray-900",children:["",ot.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-yellow-200/50",children:[a.jsx("span",{className:"font-medium text-gray-600",children:"Online Cash (Paytm):"}),a.jsxs("span",{className:"text-xl font-semibold text-gray-900",children:["",xe.toLocaleString()]})]})]})]})]})]}),a.jsx("div",{className:"mt-6",children:a.jsxs("div",{className:"bg-gradient-to-br from-white/80 to-gray-50/50 backdrop-blur-sm rounded-2xl shadow-sm border border-gray-200/50 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg",children:a.jsx(ca,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Loan Management"}),a.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Track loans taken and repayments made"})]})]}),a.jsxs("button",{onClick:()=>Te(!0),className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all flex items-center gap-2 shadow-md",children:[a.jsx(Xi,{className:"w-4 h-4"}),"Apply Loan"]})]}),(()=>{const ie=G.filter(xt=>xt.status==="active"),fe=ie.reduce((xt,ut)=>xt+ut.loanAmount,0),_e=ie.reduce((xt,ut)=>xt+ut.repaidAmount,0),nt=ie.reduce((xt,ut)=>xt+(ut.loanAmount-ut.repaidAmount),0);return ie.length>0&&a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Active Loans"}),a.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:["",fe.toLocaleString()]})]}),a.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Total Repaid"}),a.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["",_e.toLocaleString()]})]}),a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Remaining to Pay"}),a.jsxs("p",{className:"text-2xl font-bold text-red-700",children:["",nt.toLocaleString()]})]})]})})(),Z?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx(Io,{className:"w-6 h-6 animate-spin text-purple-600"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Loading loans..."})]}):G.length===0?a.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[a.jsx(ca,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600",children:"No loans recorded yet"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'Click "Apply Loan" to add a loan'})]}):a.jsx("div",{className:"space-y-3",children:G.map(ie=>{const fe=ie.loanAmount-ie.repaidAmount,_e=ie.repaidAmount/ie.loanAmount*100;return a.jsxs("div",{className:`border-2 rounded-lg p-4 ${ie.status==="active"?"border-blue-200 bg-blue-50":"border-green-200 bg-green-50"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${ie.status==="active"?"bg-blue-200 text-blue-800":"bg-green-200 text-green-800"}`,children:ie.status==="active"?"Active":"Repaid"}),a.jsx("span",{className:"text-sm text-gray-600",children:new Date(ie.loanDate).toLocaleDateString("en-IN")})]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:ie.notes||"No notes"})]}),a.jsxs("div",{className:"text-right ml-4",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Loan Amount"}),a.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["",ie.loanAmount.toLocaleString()]})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[a.jsxs("span",{children:["Repaid: ",ie.repaidAmount.toLocaleString()]}),a.jsxs("span",{children:["Remaining: ",fe.toLocaleString()]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all ${ie.status==="repaid"?"bg-green-500":"bg-blue-500"}`,style:{width:`${_e}%`}})}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1 text-center",children:[_e.toFixed(0),"% repaid"]})]}),ie.status==="active"&&a.jsxs("button",{onClick:()=>{J(ie),ge(!0)},className:"w-full px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all flex items-center justify-center gap-2 text-sm font-medium",children:[a.jsx(Po,{className:"w-4 h-4"}),"Repay Loan"]}),ie.status==="repaid"&&ie.repaymentDate&&a.jsxs("div",{className:"text-center text-xs text-green-700 mt-2",children:[" Fully repaid on ",new Date(ie.repaymentDate).toLocaleDateString("en-IN")]})]},ie.id)})})]})}),H&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>ne(!1),children:a.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",onClick:ie=>ie.stopPropagation(),children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Paytm Daily Breakdown"}),a.jsx("p",{className:"text-purple-100 mt-1",children:"Complete transaction history"})]}),a.jsx("button",{onClick:()=>ne(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(ea,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto max-h-[calc(90vh-120px)]",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Total Received"}),a.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["",gt.reduce((ie,fe)=>ie+fe.paytmReceived+fe.onlinePayouts+(fe.loansTaken||0),0).toLocaleString()]})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Total Used"}),a.jsxs("p",{className:"text-2xl font-bold text-red-700",children:["",gt.reduce((ie,fe)=>ie+fe.usedOnlineMoney+fe.commission+(fe.employeePayouts||0)+(fe.loanRepayments||0),0).toLocaleString()]})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Current Balance"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-700",children:["",xe.toLocaleString()]})]})]}),a.jsx("div",{className:"space-y-2",children:gt.map((ie,fe)=>{const _e=ie.runningBalance,nt=ie.date===s;return a.jsxs("div",{className:`border rounded-lg p-4 ${nt?"border-purple-400 bg-purple-50":"border-gray-200 bg-white"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{children:a.jsxs("p",{className:"font-semibold text-gray-900",children:[Kn(ie.date),nt&&a.jsx("span",{className:"ml-2 text-xs bg-purple-500 text-white px-2 py-1 rounded-full",children:"Today"})]})}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Running Balance"}),a.jsxs("p",{className:"text-lg font-bold text-purple-600",children:["",_e.toLocaleString()]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[ie.paytmReceived>0&&a.jsxs("div",{className:"flex justify-between items-center bg-green-50 px-3 py-2 rounded",children:[a.jsx("span",{className:"text-green-700",children:"+ Paytm In:"}),a.jsxs("span",{className:"font-semibold text-green-800",children:["",ie.paytmReceived.toLocaleString()]})]}),ie.onlinePayouts>0&&a.jsxs("div",{className:"flex justify-between items-center bg-emerald-50 px-3 py-2 rounded",children:[a.jsx("span",{className:"text-emerald-700",children:"+ Online Payouts:"}),a.jsxs("span",{className:"font-semibold text-emerald-800",children:["",ie.onlinePayouts.toLocaleString()]})]}),ie.usedOnlineMoney>0&&a.jsxs("div",{className:"flex justify-between items-center bg-red-50 px-3 py-2 rounded",children:[a.jsx("span",{className:"text-red-700",children:"- Used for Expenses:"}),a.jsxs("span",{className:"font-semibold text-red-800",children:["",ie.usedOnlineMoney.toLocaleString()]})]}),ie.commission>0&&a.jsxs("div",{className:"flex justify-between items-center bg-rose-50 px-3 py-2 rounded",children:[a.jsx("span",{className:"text-rose-700",children:"- Commission:"}),a.jsxs("span",{className:"font-semibold text-rose-800",children:["",ie.commission.toLocaleString()]})]}),ie.employeePayouts>0&&a.jsxs("div",{className:"flex justify-between items-center bg-orange-50 px-3 py-2 rounded",children:[a.jsx("span",{className:"text-orange-700",children:"- Employee Payouts:"}),a.jsxs("span",{className:"font-semibold text-orange-800",children:["",ie.employeePayouts.toLocaleString()]})]}),ie.loansTaken>0&&a.jsxs("div",{className:"flex justify-between items-center bg-blue-50 px-3 py-2 rounded",children:[a.jsx("span",{className:"text-blue-700",children:"+ Loan Received:"}),a.jsxs("span",{className:"font-semibold text-blue-800",children:["",ie.loansTaken.toLocaleString()]})]}),ie.loanRepayments>0&&a.jsxs("div",{className:"flex justify-between items-center bg-amber-50 px-3 py-2 rounded",children:[a.jsx("span",{className:"text-amber-700",children:"- Loan Repayment:"}),a.jsxs("span",{className:"font-semibold text-amber-800",children:["",ie.loanRepayments.toLocaleString()]})]})]})]},ie.date)})})]})]})}),Re&&a.jsxs("div",{className:"mt-6 space-y-4",children:[e.salesData.filter(ie=>ie.approvalStatus==="pending"&&ie.createdBy!==e.user?.employeeId).length>0&&a.jsxs("div",{className:"bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Eo,{className:"w-6 h-6 text-green-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Pending Approval"})]}),a.jsx("div",{className:"space-y-3",children:e.salesData.filter(ie=>ie.approvalStatus==="pending"&&ie.createdBy!==e.user?.employeeId).map(ie=>a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-300",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-gray-900 font-medium",children:Kn(ie.date)}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Submitted by: ",ie.createdBy]}),a.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Total Sales:"}),a.jsxs("span",{className:"ml-1 font-medium",children:["",(ie.offlineSales+ie.onlineSales).toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Cash in Hand:"}),a.jsxs("span",{className:"ml-1 font-medium",children:["",ie.actualCashInHand.toFixed(2)]})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:async()=>{try{await e.approveSalesData(ie.id),alert("Sales approved successfully!")}catch{alert("Failed to approve sales")}},className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition-all",children:" Approve"}),a.jsx("button",{onClick:async()=>{try{await e.rejectSalesData(ie.id),alert("Sales rejected successfully!")}catch{alert("Failed to reject sales")}},className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-all",children:" Reject"})]})]},ie.id))})]}),e.salesData.filter(ie=>ie.approvalStatus==="pending"&&ie.createdBy!==e.user?.employeeId).length===0&&a.jsxs("div",{className:"bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Eo,{className:"w-6 h-6 text-green-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Pending Approval"})]}),a.jsx("p",{className:"text-gray-600",children:"No pending sales at the moment."})]})]})]}),Ee&&a.jsx(Ple,{context:e,selectedStoreId:Se,selectedDate:s,onClose:()=>Te(!1),onSaveSuccess:async()=>{await er()}}),ue&&Fe&&a.jsx(Ile,{context:e,loan:Fe,selectedDate:s,onClose:()=>{ge(!1),J(null)},onSaveSuccess:async()=>{await er()}}),W&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between text-white",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Qy,{className:"w-6 h-6"}),a.jsx("h2",{className:"text-xl font-bold",children:"Convert Cash to Online"})]}),a.jsx("button",{onClick:()=>{ee(!1),Q("")},className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(ea,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-200",children:[a.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Convert offline cash in hand to online cash (Paytm). This is useful when you transfer physical cash to your Paytm account."}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{className:"bg-white rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Current Expected Cash"}),a.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["",ot.toFixed(2)]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Current Online Cash"}),a.jsxs("p",{className:"text-lg font-bold text-purple-600",children:["",xe.toFixed(2)]})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Amount to Convert ()"}),a.jsx("input",{type:"number",value:re,onChange:ie=>Q(ie.target.value),placeholder:"Enter amount",step:"0.01",min:"0",max:ot,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg",disabled:R}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Max: ",ot.toFixed(2)]})]}),parseFloat(re)>0&&a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"After Conversion:"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Expected Cash:"}),a.jsxs("span",{className:"font-bold text-gray-900",children:["",ot.toFixed(2),"  ",(ot-parseFloat(re)).toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Online Cash:"}),a.jsxs("span",{className:"font-bold text-purple-600",children:["",xe.toFixed(2),"  ",(xe+parseFloat(re)).toFixed(2)]})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{ee(!1),Q("")},className:"flex-1 px-4 py-3 bg-gray-200 hover:bg-gray-300 rounded-lg font-semibold transition-colors",disabled:R,children:"Cancel"}),a.jsx("button",{onClick:ye,disabled:!re||parseFloat(re)<=0||R,className:"flex-1 px-4 py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:R?a.jsxs(a.Fragment,{children:[a.jsx(Io,{className:"w-4 h-4 animate-spin"}),"Converting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Qy,{className:"w-4 h-4"}),"Convert"]})})]})]})]})}),E&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between text-white",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Qa,{className:"w-6 h-6"}),a.jsx("h2",{className:"text-xl font-bold",children:"Confirm Sales Data"})]}),a.jsx("button",{onClick:Y,className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(ea,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-lg p-4 border border-yellow-200",children:[a.jsx("p",{className:"text-sm text-gray-700 mb-3 font-semibold",children:"You are about to save sales data with the following values:"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Offline Sales:"}),a.jsxs("span",{className:"font-semibold",children:["",parseFloat(y.offlineSales)||0]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Expected Cash:"}),a.jsxs("span",{className:"font-semibold",children:["",ot.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Actual Cash:"}),a.jsxs("span",{className:"font-semibold",children:["",parseFloat(y.actualCashInHand)||0]})]}),a.jsxs("div",{className:"flex justify-between border-t pt-2",children:[a.jsx("span",{className:"text-gray-600",children:"Cash Discrepancy:"}),a.jsxs("span",{className:`font-bold ${Sr===0?"text-green-600":Sr>0?"text-blue-600":"text-red-600"}`,children:["",Sr.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between border-t pt-2 mt-2",children:[a.jsx("span",{className:"text-gray-600",children:"Expected Paytm:"}),a.jsxs("span",{className:"font-semibold",children:["",xe.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Actual Paytm:"}),a.jsxs("span",{className:"font-semibold",children:["",parseFloat(y.actualPaytmBalance)||0]})]}),a.jsxs("div",{className:"flex justify-between border-t pt-2",children:[a.jsx("span",{className:"text-gray-600",children:"Paytm Discrepancy:"}),a.jsxs("span",{className:`font-bold ${it===0?"text-green-600":it>0?"text-blue-600":"text-red-600"}`,children:["",it.toFixed(2)]})]})]})]}),(xe<0||ot+xe<0)&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Qa,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-red-800",children:[a.jsx("p",{className:"font-semibold mb-1",children:" Warning: Negative Balance Detected"}),xe<0&&a.jsxs("p",{className:"mb-1",children:[" Online Cash (Paytm) is negative: ",xe.toFixed(2)]}),ot+xe<0&&a.jsxs("p",{children:[" Total Combined Cash is negative: ",(ot+xe).toFixed(2)]})]})]})}),a.jsxs("div",{className:"flex items-start gap-3 bg-gray-50 rounded-lg p-4",children:[a.jsx("input",{type:"checkbox",id:"confirm-responsibility",checked:O,onChange:ie=>B(ie.target.checked),className:"mt-1 w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),a.jsx("label",{htmlFor:"confirm-responsibility",className:"text-sm text-gray-700 cursor-pointer",children:"I confirm that I have verified this sales data and take responsibility for its accuracy. I understand that this data will be used for financial reporting and analysis."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:Y,className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-semibold hover:bg-gray-200 transition-colors",children:"Cancel"}),a.jsx("button",{type:"button",onClick:le,disabled:!O,className:`flex-1 px-4 py-3 rounded-lg font-semibold transition-colors ${O?"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Save Sales Data"})]})]})]})})]})})}function S$({onClose:e,employees:t}){const[r,n]=P.useState([]),[s,i]=P.useState({}),[o,l]=P.useState(!1),[d,u]=P.useState(null);P.useEffect(()=>{const g=t.filter(y=>y.type==="fulltime"||y.type==="Permanent");n(g);const b={};g.forEach(y=>{const v=y.email||`${y.name.toLowerCase().replace(/\s+/g,".")}@bhandar.com`,k=`Bhandar@${y.employeeId}`;b[y.id]={email:v,password:k}}),i(b)},[t]);const f=(g,b,y)=>{i(v=>({...v,[g]:{...v[g],[b]:y}}))},m=async()=>{l(!0),u(null);try{if(r.length===0){alert("No permanent employees found. Please add permanent employees first."),l(!1);return}const g=r.map(v=>({name:v.name,email:s[v.id].email,password:s[v.id].password,employeeId:v.employeeId}));console.log("Creating accounts for employees:",g);const b=await fetch("https://xssxnhrzxvtejavoqgwg.supabase.co/functions/v1/make-server-c2dd9b9d/auth/create-employee-accounts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${rn}`},body:JSON.stringify({employees:g})}),y=await b.json();if(console.log("Server response:",y),!b.ok)throw console.error("Server error:",y),new Error(y.error||`Failed to create accounts (Status: ${b.status})`);u({deleted:y.deleted||0,failed:y.failed,message:y.message,details:[...y.results||[],...y.errors||[]]})}catch(g){console.error("Error creating employee accounts:",g),alert(`Failed to create employee accounts: ${g instanceof Error?g.message:String(g)}`)}finally{l(!1)}},p=()=>{const g=r.map(S=>({"Employee ID":S.employeeId,Name:S.name,Email:s[S.id].email,Password:s[S.id].password,"Monthly Salary":S.monthlySalary||0})),b=[Object.keys(g[0]).join(","),...g.map(S=>Object.values(S).join(","))].join(`
`),y=new Blob([b],{type:"text/csv"}),v=window.URL.createObjectURL(y),k=document.createElement("a");k.href=v,k.download="employee-credentials.csv",k.click(),window.URL.revokeObjectURL(v)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:a.jsx(Bs,{className:"w-5 h-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl",children:"Prepare Employee Login Credentials"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Generate signup credentials for ",r.length," permanent employees"]})]})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(ea,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[a.jsxs("h3",{className:"flex items-center gap-2 text-yellow-800 mb-2",children:[a.jsx(Ar,{className:"w-5 h-5"}),a.jsx("span",{className:"font-semibold",children:"Important: Employees Must Complete Signup"})]}),a.jsx("p",{className:"text-yellow-700 text-sm mb-2",children:d.message||"Old accounts have been deleted. Employees must now signup using their credentials below."}),a.jsx("p",{className:"text-yellow-700 text-sm",children:'Download the credentials below and share them with employees. They should go to the login page and click "Sign up" to create their accounts.'})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[a.jsx(So,{className:"w-5 h-5"}),a.jsx("span",{children:"Accounts Prepared"})]}),a.jsx("div",{className:"text-2xl mt-2",children:d.deleted})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[a.jsx(Ar,{className:"w-5 h-5"}),a.jsx("span",{children:"Failed"})]}),a.jsx("div",{className:"text-2xl mt-2",children:d.failed})]})]}),a.jsx("div",{className:"space-y-2",children:d.details.map((g,b)=>a.jsx("div",{className:`p-3 rounded-lg border ${g.status==="created"?"bg-green-50 border-green-200":g.status==="updated"?"bg-blue-50 border-blue-200":"bg-red-50 border-red-200"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:g.email}),a.jsxs("span",{className:"text-sm",children:[g.status==="created"&&a.jsx("span",{className:"text-green-700",children:" Created"}),g.status==="updated"&&a.jsx("span",{className:"text-blue-700",children:" Updated"}),g.error&&a.jsxs("span",{className:"text-red-700",children:[" ",g.error]})]})]})},b))}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsx("p",{className:"text-sm text-yellow-800",children:" All accounts have been processed. Download the credentials CSV to share login information with employees."})})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-blue-800",children:["Review and modify the email addresses and passwords below before creating accounts. Default passwords follow the pattern: Bhandar@","{EmployeeID}"]})}),a.jsx("div",{className:"space-y-3",children:r.map(g=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm",children:g.name}),a.jsxs("div",{className:"text-xs text-gray-600",children:["ID: ",g.employeeId]})]}),g.email&&a.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Has Account"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[a.jsx(jc,{className:"w-3 h-3"}),"Email Address"]}),a.jsx("input",{type:"email",value:s[g.id]?.email||"",onChange:b=>f(g.id,"email",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"employee@bhandar.com"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[a.jsx(_j,{className:"w-3 h-3"}),"Password"]}),a.jsx("input",{type:"text",value:s[g.id]?.password||"",onChange:b=>f(g.id,"password",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono",placeholder:"Password123"})]})]})]},g.id))})]})}),a.jsx("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:p,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Download Credentials CSV"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Close"}),!d&&a.jsx("button",{onClick:m,disabled:o,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:o?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Preparing Credentials..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Bs,{className:"w-4 h-4"}),"Prepare Signup Credentials"]})})]})]})})]})})}function Ns({value:e,onChange:t,label:r,className:n="",min:s,max:i}){const o=P.useRef(null),l=()=>{try{o.current?.showPicker?.()}catch{}},d=f=>f?Kn(f):"Select date",u=n.includes("w-full");return a.jsxs("div",{className:u?"w-full":`flex items-center gap-2 ${n}`,children:[r&&a.jsx("label",{className:`text-sm text-gray-600 ${u?"block mb-2":"whitespace-nowrap"}`,children:r}),a.jsxs("div",{onClick:l,className:`relative flex items-center gap-2 px-4 py-2 border-2 border-gray-300 rounded-lg bg-white hover:border-purple-400 hover:bg-purple-50 transition-all cursor-pointer group ${u?"w-full":"min-w-[160px]"}`,children:[a.jsx(Ur,{className:"w-4 h-4 text-gray-500 group-hover:text-purple-600 transition-colors flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-700 group-hover:text-purple-700 transition-colors flex-1",children:d(e)}),a.jsx("input",{ref:o,type:"date",value:e,onChange:f=>t(f.target.value),min:s,max:i,className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full z-10"})]})]})}function Mle({employee:e,payouts:t,personalExpenses:r,onClose:n}){const s={};t.forEach(d=>{const u=new Date(d.date),f=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`;s[f]||(s[f]={monthKey:f,monthLabel:u.toLocaleDateString("en-US",{month:"long",year:"numeric"}),payments:[]}),s[f].payments.push({type:"payout",data:d,actualDate:d.date})}),r.forEach(d=>{const u=d.expenseMonth||(()=>{const f=new Date(d.date);return`${f.getFullYear()}-${String(f.getMonth()+1).padStart(2,"0")}`})();if(!s[u]){const f=new Date(u+"-01");s[u]={monthKey:u,monthLabel:f.toLocaleDateString("en-US",{month:"long",year:"numeric"}),payments:[]}}s[u].payments.push({type:"expense",data:d,actualDate:d.date})});const i=Object.values(s).sort((d,u)=>u.monthKey.localeCompare(d.monthKey)),o=t.reduce((d,u)=>d+u.amount,0),l=r.reduce((d,u)=>d+u.amount,0);return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-white font-semibold",children:"Payment History"}),a.jsxs("p",{className:"text-purple-100 text-sm mt-1",children:[e.name," (",e.employeeId,")"]})]}),a.jsx("button",{onClick:n,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",children:a.jsx(ea,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-blue-700 mb-1",children:"Total Payouts"}),a.jsx("p",{className:"text-2xl font-semibold text-blue-900",children:t.length}),a.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["",o.toLocaleString("en-IN")]})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-purple-700 mb-1",children:"Personal Expenses"}),a.jsx("p",{className:"text-2xl font-semibold text-purple-900",children:r.length}),a.jsxs("p",{className:"text-sm text-purple-600 mt-1",children:["",l.toLocaleString("en-IN")]})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-green-700 mb-1",children:"Total Paid"}),a.jsxs("p",{className:"text-2xl font-semibold text-green-900",children:["",(o+l).toLocaleString("en-IN")]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx(ca,{className:"w-5 h-5 text-purple-600"}),"Payment History (Month-wise)"]}),t.length===0&&r.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(ca,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No payment history found"})]}):a.jsx("div",{className:"space-y-6",children:i.map(d=>{const u=d.payments.reduce((f,m)=>(m.type==="payout",f+m.data.amount),0);return a.jsxs("div",{className:"border-2 border-purple-200 rounded-xl overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 px-4 py-3 border-b border-purple-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ur,{className:"w-5 h-5 text-purple-600"}),a.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:d.monthLabel})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:[d.payments.length," payment",d.payments.length!==1?"s":""]}),a.jsxs("p",{className:"text-lg font-semibold text-purple-900",children:["",u.toLocaleString("en-IN")]})]})]})}),a.jsx("div",{className:"p-3 space-y-2 bg-white",children:d.payments.sort((f,m)=>new Date(m.actualDate).getTime()-new Date(f.actualDate).getTime()).map(f=>{if(f.type==="payout"){const m=f.data;return a.jsx("div",{className:"border border-blue-200 rounded-lg p-3 bg-blue-50",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ca,{className:"w-4 h-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Regular Payout"})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:new Date(m.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})})]}),a.jsx("div",{className:"text-right",children:a.jsxs("p",{className:"text-lg font-semibold text-blue-900",children:["",m.amount.toLocaleString("en-IN")]})})]})},`payout-${m.id}`)}else{const m=f.data,p=new Date(m.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),g=m.expenseMonth&&m.expenseMonth!==`${new Date(m.date).getFullYear()}-${String(new Date(m.date).getMonth()+1).padStart(2,"0")}`;return a.jsx("div",{className:"border border-purple-200 rounded-lg p-3 bg-purple-50",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Po,{className:"w-4 h-4 text-purple-600"}),a.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Salary (Personal Expense)"})]}),g?a.jsxs("p",{className:"text-xs text-purple-600 mt-1 font-medium flex items-center gap-1",children:[" Mapped to this month  Paid on: ",p]}):a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:p}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:m.description})]}),a.jsx("div",{className:"text-right",children:a.jsxs("p",{className:"text-lg font-semibold text-purple-900",children:["",m.amount.toLocaleString("en-IN")]})})]})},`expense-${m.id}`)}})})]},d.monthKey)})})]})]})]})})}const Rle=(e,t,r,n,s,i,o=0)=>{const d=s.reduce((m,p)=>m+p.amount,0)+o,u=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>Payslip - ${r} ${n}</title>
      <style>
        body {
          font-family: 'Arial', sans-serif;
          margin: 0;
          padding: 20px;
          color: #333;
        }
        .payslip-container {
          max-width: 800px;
          margin: 0 auto;
          border: 2px solid #9333ea;
          padding: 30px;
          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
        }
        .header {
          text-align: center;
          border-bottom: 3px solid #9333ea;
          padding-bottom: 20px;
          margin-bottom: 30px;
        }
        .company-name {
          font-size: 32px;
          font-weight: bold;
          color: #9333ea;
          margin-bottom: 5px;
        }
        .company-tagline {
          font-size: 14px;
          color: #666;
          font-style: italic;
        }
        .payslip-title {
          font-size: 24px;
          color: #9333ea;
          margin: 20px 0 10px 0;
          font-weight: bold;
        }
        .payslip-period {
          font-size: 16px;
          color: #666;
          margin-bottom: 20px;
        }
        .info-section {
          display: table;
          width: 100%;
          margin-bottom: 30px;
        }
        .info-row {
          display: table-row;
        }
        .info-label {
          display: table-cell;
          padding: 10px 0;
          font-weight: bold;
          color: #9333ea;
          width: 40%;
        }
        .info-value {
          display: table-cell;
          padding: 10px 0;
          color: #333;
        }
        .payment-table {
          width: 100%;
          border-collapse: collapse;
          margin: 20px 0;
          background: white;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .payment-table th {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 12px;
          text-align: left;
          font-weight: bold;
        }
        .payment-table td {
          padding: 12px;
          border-bottom: 1px solid #e5e7eb;
        }
        .payment-table tr:last-child td {
          border-bottom: none;
        }
        .payment-table tr:nth-child(even) {
          background: #faf5ff;
        }
        .total-section {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 20px;
          margin-top: 30px;
          border-radius: 8px;
          text-align: center;
        }
        .total-label {
          font-size: 18px;
          margin-bottom: 10px;
        }
        .total-amount {
          font-size: 36px;
          font-weight: bold;
        }
        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 2px solid #9333ea;
          text-align: center;
          font-size: 12px;
          color: #666;
        }
        .signature-section {
          margin-top: 60px;
          display: flex;
          justify-content: space-between;
        }
        .signature-box {
          text-align: center;
          width: 45%;
        }
        .signature-line {
          border-top: 2px solid #9333ea;
          margin-top: 50px;
          padding-top: 10px;
          font-weight: bold;
          color: #9333ea;
        }
        @media print {
          body {
            padding: 0;
          }
          .payslip-container {
            border: none;
            box-shadow: none;
          }
        }
      </style>
    </head>
    <body>
      <div class="payslip-container">
        <div class="header">
          <div class="company-name">BHANDAR-IMS</div>
          <div class="company-tagline">Food Business Inventory Management System</div>
          <div class="payslip-title">SALARY SLIP</div>
          <div class="payslip-period">For the Month of ${r} ${n}</div>
        </div>
        
        <div class="info-section">
          <div class="info-row">
            <div class="info-label">Employee Name:</div>
            <div class="info-value">${e}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee ID:</div>
            <div class="info-value">${t}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee Type:</div>
            <div class="info-value">${i==="fulltime"?"Permanent":"Contract"}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Payment Date:</div>
            <div class="info-value">${new Date().toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})}</div>
          </div>
        </div>

        <table class="payment-table">
          <thead>
            <tr>
              <th>Payment Date</th>
              <th>Description</th>
              <th style="text-align: right;">Amount ()</th>
            </tr>
          </thead>
          <tbody>
            ${s.map(m=>`
              <tr>
                <td>${new Date(m.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}</td>
                <td>Regular Payout</td>
                <td style="text-align: right;">${m.amount.toLocaleString("en-IN")}</td>
              </tr>
            `).join("")}
            ${o>0?`
              <tr>
                <td>Various</td>
                <td>Salary (via Personal Expense)</td>
                <td style="text-align: right;">${o.toLocaleString("en-IN")}</td>
              </tr>
            `:""}
          </tbody>
        </table>

        <div class="total-section">
          <div class="total-label">Net Salary for ${r} ${n}</div>
          <div class="total-amount">${d.toLocaleString("en-IN")}</div>
        </div>

        <div class="signature-section">
          <div class="signature-box">
            <div class="signature-line">Employee Signature</div>
          </div>
          <div class="signature-box">
            <div class="signature-line">Authorized Signatory</div>
          </div>
        </div>

        <div class="footer">
          <p>This is a computer-generated payslip and does not require a signature.</p>
          <p> ${n} Bhandar-IMS. All rights reserved.</p>
        </div>
      </div>
    </body>
    </html>
  `,f=window.open("","_blank");f&&(f.document.write(u),f.document.close(),f.onload=()=>{f.print()})};function Gk({userRole:e,selectedDate:t,userEmployeeId:r,userName:n,selectedStoreId:s,isIncharge:i=!1,inchargeDesignation:o=null}){const[l,d]=P.useState("contract"),[u,f]=P.useState([]),[m,p]=P.useState([]),[g,b]=P.useState([]),[y,v]=P.useState([]),[k,S]=P.useState(!0),[w,A]=P.useState(!1),[C,N]=P.useState(!1),[E,_]=P.useState(""),[O,B]=P.useState(!1),[F,D]=P.useState(null),[H,ne]=P.useState("current"),[W,ee]=P.useState(""),[re,Q]=P.useState(""),R=()=>{const He=new Date,Ie=He.getFullYear(),lt=He.getMonth(),Ke=new Date(Ie,lt+1,0),pt=`${Ie}-${String(lt+1).padStart(2,"0")}-01`,Nt=Ke.getDate(),Rt=`${Ie}-${String(lt+1).padStart(2,"0")}-${String(Nt).padStart(2,"0")}`;return{start:pt,end:Rt,monthName:He.toLocaleDateString("en-US",{month:"long",year:"numeric"})}},X=()=>{const He=new Date,Ie=He.getMonth()===0?He.getFullYear()-1:He.getFullYear(),lt=He.getMonth()===0?11:He.getMonth()-1,Ke=new Date(Ie,lt,1),pt=new Date(Ie,lt+1,0),Nt=`${Ie}-${String(lt+1).padStart(2,"0")}-01`,Rt=pt.getDate(),Pt=`${Ie}-${String(lt+1).padStart(2,"0")}-${String(Rt).padStart(2,"0")}`;return{start:Nt,end:Pt,monthName:Ke.toLocaleDateString("en-US",{month:"long",year:"numeric"})}},L=R(),I=X(),[G,V]=P.useState(!1),[Z,ve]=P.useState(null),[Ee,Te]=P.useState(!1),[ue,ge]=P.useState({employeeIds:[],amount:"",date:t}),[Fe,J]=P.useState(!1),[Ze,rt]=P.useState(null),[Tt,ze]=P.useState(!1),Re=P.useMemo(()=>{let He=u;return s&&(He=He.filter(Ie=>Ie.storeId===s||Ie.storeId===null||Ie.storeId===void 0)),i&&r&&(He=He.filter(Ie=>Ie.type==="contract"?!0:Ie.type==="fulltime"?Ie.inchargeId===r:!1)),He},[u,s,i,r]),Ce=P.useMemo(()=>{if(!s)return m;const He=Re.map(Ie=>Ie.id);return m.filter(Ie=>He.includes(Ie.employeeId))},[m,Re,s]),Se=P.useMemo(()=>{let He;if(H==="current")He=Ce.filter(Ie=>Ie.date>=L.start&&Ie.date<=L.end);else if(H==="last")He=Ce.filter(Ie=>Ie.date>=I.start&&Ie.date<=I.end);else{if(!W||!re)return[];He=Ce.filter(Ie=>Ie.date>=W&&Ie.date<=re)}return He},[Ce,H,L,I,W,re]);P.useEffect(()=>{Qe()},[]);const Qe=async()=>{S(!0);try{console.log("Loading employees, payouts, salary advances, and overheads from server...");const[He,Ie,lt,Ke]=await Promise.all([El(),Co(),$2(),bI()]);console.log("Loaded employees:",He),console.log("Loaded payouts:",Ie),console.log("Loaded salary advances:",lt),console.log("Loaded overheads:",Ke),f(He||[]),p(Ie||[]),b(lt||[]),v(Ke||[])}catch(He){console.error("Error loading payroll data:",He)}finally{S(!1)}},kt=async He=>{try{const Ie=g.find(pt=>pt.id===He);if(!Ie)return;const Ke={...Ie,status:"approved",approvedBy:n||r||"Cluster Head",approvedDate:new Date().toISOString()};await $j(He,Ke),alert("Salary advance approved successfully!"),Qe()}catch(Ie){console.error("Error approving salary advance:",Ie),alert("Failed to approve salary advance. Please try again.")}},Ct=async He=>{const Ie=prompt("Please provide a reason for rejection:");if(Ie)try{const lt=g.find(pt=>pt.id===He);if(!lt)return;const Ke={...lt,status:"rejected",rejectionReason:Ie,approvedBy:n||r||"Cluster Head",approvedDate:new Date().toISOString()};await $j(He,Ke),alert("Salary advance rejected."),Qe()}catch(lt){console.error("Error rejecting salary advance:",lt),alert("Failed to reject salary advance. Please try again.")}},yr=async()=>{if(!E||!r)return;const He=parseFloat(E);if(isNaN(He)||He<=0){alert("Please enter a valid amount");return}try{const Ie=u.find(Nt=>Nt.employeeId===r);if(!Ie){alert("Employee not found");return}if(Ie.type!=="fulltime"){alert("Only permanent employees can apply for salary advance");return}if(g.some(Nt=>Nt.employeeId===Ie.id&&(Nt.status==="pending"||Nt.status==="approved"&&Nt.remainingAmount>0))){alert("You already have an active or pending salary advance");return}const Ke=He/4,pt={employeeId:Ie.id,employeeName:Ie.name,employeeEmployeeId:Ie.employeeId,amount:He,monthlyDeduction:Ke,remainingAmount:He,status:"pending",requestDate:new Date().toISOString()};await L2(pt),alert("Salary advance request submitted successfully!"),N(!1),_(""),Qe()}catch(Ie){console.error("Error applying for salary advance:",Ie),alert("Failed to submit salary advance request. Please try again.")}},Kt=async()=>{if(ue.employeeIds.length===0||!ue.amount){alert("Please select employees and enter amount");return}if(!w)try{A(!0);const He=ue.employeeIds.map(lt=>{const Ke=u.find(pt=>pt.id===lt);return{id:crypto.randomUUID(),employeeId:lt,employeeName:Ke?.name||"",amount:parseFloat(ue.amount),date:ue.date,storeId:s||void 0,createdAt:new Date().toISOString()}});console.log("Adding payouts:",He);const Ie=await F2(He);console.log("Payouts added successfully:",Ie),p([...m,...He]),Te(!1),ge({employeeIds:[],amount:"",date:t}),alert("Payout added successfully!")}catch(He){console.error("Error adding payout:",He);const Ie=He instanceof Error?He.message:"Unknown error occurred";alert(`Failed to add payout: ${Ie}`)}finally{A(!1)}},Rr=async()=>{if(Z)try{console.log("PayrollManagement: Updating employee:",Z),await(void 0)(Z.id,Z),f(u.map(He=>He.id===Z.id?Z:He)),V(!1),ve(null),alert("Employee updated successfully!")}catch(He){console.error("PayrollManagement: Error updating employee:",He);const Ie=He instanceof Error?He.message:"Unknown error";alert(`Failed to update employee: ${Ie}`)}},Pr=async He=>{if(confirm("Are you sure you want to delete this employee? This action cannot be undone."))try{await VI(He),f(u.filter(Ie=>Ie.id!==He)),p(m.filter(Ie=>Ie.employeeId!==He)),alert("Employee deleted successfully!")}catch(Ie){console.error("Error deleting employee:",Ie),alert("Failed to delete employee")}},da=async()=>{if(Ze)try{await t5(Ze.id,{amount:Ze.amount,date:Ze.date}),p(m.map(He=>He.id===Ze.id?Ze:He)),J(!1),rt(null),alert("Payout updated successfully!")}catch(He){console.error("Error updating payout:",He),alert("Failed to update payout")}},ur=async He=>{if(confirm("Are you sure you want to delete this payout?"))try{await np(He),p(m.filter(Ie=>Ie.id!==He)),alert("Payout deleted successfully!")}catch(Ie){console.error("Error deleting payout:",Ie),alert("Failed to delete payout")}},Br=He=>{let Ie;if(H==="current"){const Ke=L.start.substring(0,7);Ie=y.filter(pt=>pt.expenseMonth?pt.expenseMonth===Ke:pt.date>=L.start&&pt.date<=L.end)}else if(H==="last"){const Ke=I.start.substring(0,7);Ie=y.filter(pt=>pt.expenseMonth?pt.expenseMonth===Ke:pt.date>=I.start&&pt.date<=I.end)}else{if(!W||!re)return 0;const Ke=W.substring(0,7),pt=re.substring(0,7);Ie=y.filter(Nt=>Nt.expenseMonth?Nt.expenseMonth>=Ke&&Nt.expenseMonth<=pt:Nt.date>=W&&Nt.date<=re)}return Ie.filter(Ke=>Ke.category==="personal_expense"&&Ke.employeeId===He).reduce((Ke,pt)=>Ke+pt.amount,0)},It=()=>{const He=Re.filter(Nt=>Nt.type==="contract"),Ie=Se.filter(Nt=>Re.find(Pt=>Pt.id===Nt.employeeId)?.type==="contract"),lt=Ie.reduce((Nt,Rt)=>Nt+Rt.amount,0),Ke=He.map(Nt=>{const Rt=Ie.filter(Dr=>Dr.employeeId===Nt.id),Pt=new Set(Rt.map(Dr=>Dr.date));return{...Nt,daysWorked:Pt.size,totalPay:Rt.reduce((Dr,pa)=>Dr+pa.amount,0)}}),pt=Ke.reduce((Nt,Rt)=>Nt+Rt.daysWorked,0);return{totalPayout:lt,employeeWorkDays:Ke,totalDaysWorked:pt}},er=()=>{const He=Re.filter(Nt=>Nt.type==="fulltime"),Ie=Se.filter(Nt=>Re.find(Pt=>Pt.id===Nt.employeeId)?.type==="fulltime"),lt=Ie.reduce((Nt,Rt)=>Nt+Rt.amount,0),Ke=He.reduce((Nt,Rt)=>{const Pt=Br(Rt.id);return console.log(` Personal expense for ${Rt.name} (${Rt.id}): ${Pt}`),Nt+Pt},0);console.log(" Total Payout Calculation:"),console.log(`   Regular Payouts: ${lt}`),console.log(`   Personal Expenses: ${Ke}`),console.log(`   TOTAL: ${lt+Ke}`);const pt=He.map(Nt=>{const Rt=Ie.filter(Pt=>Pt.employeeId===Nt.id);return{...Nt,totalPaid:Rt.reduce((Pt,Dr)=>Pt+Dr.amount,0),lastPayout:Rt.length>0?Rt[Rt.length-1]:null}});return{totalPayout:lt+Ke,employeePayouts:pt}},Ir=He=>He.split(" ").map(Ie=>Ie[0]).join("").toUpperCase().slice(0,2),Tr=He=>{const Ie=["bg-blue-500","bg-purple-500","bg-green-500","bg-orange-500","bg-pink-500","bg-indigo-500"];return Ie[He%Ie.length]};It();const tr=er(),Da=l==="contract"?Re.filter(He=>He.type==="contract"):Re.filter(He=>He.type==="fulltime"),Oa=()=>e==="audit"?!1:l==="contract"&&e==="manager"||l==="permanent"&&e==="cluster_head";return k?a.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:a.jsx("div",{className:"text-gray-500",children:"Loading payroll data..."})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Payroll Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage and track employee payments"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("div",{className:"flex gap-8 px-6",children:[e==="manager"&&r&&a.jsx("button",{onClick:()=>d("my-payouts"),className:`py-4 border-b-2 transition-colors ${l==="my-payouts"?"border-green-500 text-green-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"My Payouts"}),a.jsx("button",{onClick:()=>d("contract"),className:`py-4 border-b-2 transition-colors ${l==="contract"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Contract Employees"}),(e==="cluster_head"||e==="audit")&&a.jsx("button",{onClick:()=>d("permanent"),className:`py-4 border-b-2 transition-colors ${l==="permanent"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Permanent Employees"}),(e==="cluster_head"||e==="audit")&&a.jsx("button",{onClick:()=>d("advances"),className:`py-4 border-b-2 transition-colors ${l==="advances"?"border-purple-500 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Po,{className:"w-4 h-4"}),a.jsx("span",{children:"Salary Advances"}),g.filter(He=>He.status==="pending").length>0&&a.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:g.filter(He=>He.status==="pending").length})]})})]})}),a.jsxs("div",{className:"p-6 border-b border-gray-200 space-y-4",children:[a.jsx("div",{className:"flex gap-4 flex-wrap",children:Oa()&&a.jsxs("button",{onClick:()=>Te(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(ca,{className:"w-4 h-4"}),"Add Payout"]})}),a.jsx("div",{className:"bg-gradient-to-br from-[#E8D5F2] to-[#D4B5F0] rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ur,{className:"w-5 h-5 text-purple-700"}),a.jsx("span",{className:"text-gray-900",children:"View Period:"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>ne("current"),className:`px-4 py-2 rounded-lg transition-colors ${H==="current"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Current Month"}),a.jsx("button",{onClick:()=>ne("last"),className:`px-4 py-2 rounded-lg transition-colors ${H==="last"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Last Month"}),a.jsx("button",{onClick:()=>ne("custom"),className:`px-4 py-2 rounded-lg transition-colors ${H==="custom"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Custom Range"})]}),H==="current"?a.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg",children:a.jsx("span",{className:"text-gray-900 font-medium",children:L.monthName})}):H==="last"?a.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg",children:a.jsx("span",{className:"text-gray-900 font-medium",children:I.monthName})}):a.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[a.jsx(Ns,{label:"From:",value:W,onChange:ee}),a.jsx(Ns,{label:"To:",value:re,onChange:Q})]})]})})]}),l==="contract"&&(()=>{const He=u.filter(Ke=>Ke.type==="contract"),Ie=Se.filter(Ke=>u.find(Nt=>Nt.id===Ke.employeeId)?.type==="contract");console.log("Rendering contract tab"),console.log("Total employees:",u.length),console.log("Contract employees:",He.length,He),console.log("Contract payouts:",Ie.length,Ie);const lt=Ie.reduce((Ke,pt)=>Ke+pt.amount,0);return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Contract Employees"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Daily rate workers"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Employees"}),a.jsx("div",{className:"text-2xl text-blue-600",children:He.length})]})]}),He.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(La,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No contract employees yet"}),a.jsx("p",{className:"text-sm mt-2",children:"Contact your cluster head to add employees"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:He.map((Ke,pt)=>{const Nt=Ie.filter(Dr=>Dr.employeeId===Ke.id),Rt=Nt.reduce((Dr,pa)=>Dr+pa.amount,0),Pt=new Set(Nt.map(Dr=>Dr.date)).size;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-12 h-12 rounded-full ${Tr(pt)} flex items-center justify-center text-white`,children:Ir(Ke.name)}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:Ke.name}),a.jsx("div",{className:"text-xs text-gray-500",children:Ke.employeeId})]})]}),e!=="audit"&&a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>{ve(Ke),V(!0)},className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit employee",children:a.jsx(Vi,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Pr(Ke.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete employee",children:a.jsx(ws,{className:"w-4 h-4"})})]})]}),Ke.role&&a.jsx("div",{className:"mb-2",children:a.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:Ke.role})}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Phone:"}),a.jsx("span",{className:"text-gray-900",children:Ke.phone})]}),Ke.dailyRate&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Daily Rate:"}),a.jsxs("span",{className:"text-green-600",children:["",Ke.dailyRate]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Days Worked:"}),a.jsx("span",{className:"text-gray-900",children:Pt})]}),a.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200",children:[a.jsx("span",{className:"text-gray-600",children:"Total Paid:"}),a.jsxs("span",{className:"text-gray-900",children:["",Rt.toLocaleString()]})]})]})]},Ke.id)})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Recent Payouts"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Individual payout records for ",H==="current"?L.monthName:"selected period"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Payout"}),a.jsxs("div",{className:"text-2xl text-green-600",children:["",lt.toLocaleString()]})]})]}),Ie.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(ca,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No payouts recorded for this period"}),a.jsx("p",{className:"text-sm mt-2",children:"Add payouts to track contract employee payments"})]}):a.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"}),e!=="audit"&&a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),a.jsx("tbody",{children:Ie.sort((Ke,pt)=>new Date(pt.date).getTime()-new Date(Ke.date).getTime()).map((Ke,pt)=>{const Nt=u.find(Rt=>Rt.id===Ke.employeeId);return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full ${Tr(pt)} flex items-center justify-center text-white text-sm`,children:Ir(Ke.employeeName)}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:Ke.employeeName}),Nt?.role&&a.jsx("div",{className:"text-xs text-gray-500",children:Nt.role})]})]})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:Nt?.employeeId||"-"})}),a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ur,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-900",children:new Date(Ke.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"text-gray-900",children:["",Ke.amount.toLocaleString()]})}),e!=="audit"&&a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>{rt(Ke),J(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit payout",children:a.jsx(Vi,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>ur(Ke.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete payout",children:a.jsx(ws,{className:"w-4 h-4"})})]})})]},Ke.id)})})]})})]})]})})(),l==="my-payouts"&&r&&(()=>{const He=m.filter(ot=>ot.employeeId===r),Ie=u.find(ot=>ot.employeeId===r),lt=Ie?.type||"fulltime",Ke=g.filter(ot=>ot.employeeId===Ie?.id),pt=Ke.some(ot=>ot.status==="pending"||ot.status==="approved"&&ot.remainingAmount>0),Nt=new Date;Nt.getDate();const Rt=[];for(let ot=0;ot<12;ot++){const Sr=new Date(Nt.getFullYear(),Nt.getMonth()-ot,1),Ot=Sr.toLocaleDateString("en-US",{month:"long"}),xe=Sr.getFullYear().toString(),it=Sr.getMonth()+1,dt=new Date(Sr.getFullYear(),Sr.getMonth()+1,5),gt=Nt>=dt,ft=He.filter(se=>{const K=new Date(se.date);return K.getMonth()+1===it&&K.getFullYear()===Sr.getFullYear()}),q=`${Sr.getFullYear()}-${String(it).padStart(2,"0")}`,oe=y.filter(se=>se.category==="personal_expense"&&se.employeeId===r&&se.expenseMonth===q).reduce((se,K)=>se+K.amount,0),ae=ft.reduce((se,K)=>se+K.amount,0)+oe;Rt.push({month:Ot,year:xe,payouts:ft,total:ae,personalExpenses:oe,isAvailable:gt})}const Pt=Se.filter(ot=>ot.employeeId===r),Dr=Pt.reduce((ot,Sr)=>ot+Sr.amount,0),pa=Ie?Br(Ie.id):0,oa=pa+Dr;return a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"My Payout History"}),a.jsx("p",{className:"text-sm text-gray-600",children:"View your salary records and download monthly payslips"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>{D(Ie),B(!0)},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg hover:shadow-xl",children:[a.jsx(ks,{className:"w-4 h-4"}),"View All Payments"]}),lt==="fulltime"&&a.jsxs("button",{onClick:()=>N(!0),disabled:pt,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${pt?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 shadow-md"}`,title:pt?"You already have an active salary advance":"Apply for salary advance",children:[a.jsx(Po,{className:"w-4 h-4"}),pt?"Advance Active":"Apply for Advance"]})]})]})}),Ke.length>0&&a.jsx("div",{className:"mb-6 space-y-3",children:Ke.map(ot=>a.jsx("div",{className:`border-2 rounded-lg p-4 ${ot.status==="pending"?"border-yellow-300 bg-yellow-50":ot.status==="approved"?"border-green-300 bg-green-50":"border-red-300 bg-red-50"}`,children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[ot.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsx(Aa,{className:"w-5 h-5 text-yellow-600"}),a.jsx("span",{className:"font-medium text-yellow-900",children:"Advance Request Pending"})]}),ot.status==="approved"&&a.jsxs(a.Fragment,{children:[a.jsx(lr,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"font-medium text-green-900",children:"Advance Approved"})]}),ot.status==="rejected"&&a.jsxs(a.Fragment,{children:[a.jsx(en,{className:"w-5 h-5 text-red-600"}),a.jsx("span",{className:"font-medium text-red-900",children:"Advance Rejected"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Amount"}),a.jsxs("p",{className:"font-semibold text-gray-900",children:["",ot.amount.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Monthly Deduction"}),a.jsxs("p",{className:"font-semibold text-gray-900",children:["",ot.monthlyDeduction.toLocaleString()]})]}),ot.status==="approved"&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Remaining"}),a.jsxs("p",{className:"font-semibold text-gray-900",children:["",ot.remainingAmount.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Request Date"}),a.jsx("p",{className:"text-sm text-gray-900",children:new Date(ot.requestDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]})]}),ot.status==="approved"&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-300",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Deduction Period"}),a.jsx("p",{className:"text-sm text-gray-900",children:(()=>{const[Sr,Ot]=ot.startMonth.split("-"),[xe,it]=ot.endMonth.split("-"),dt=new Date(parseInt(Sr),parseInt(Ot)-1,1),gt=new Date(parseInt(xe),parseInt(it)-1,1),ft=dt.toLocaleDateString("en-US",{month:"short",year:"numeric"}),q=gt.toLocaleDateString("en-US",{month:"short",year:"numeric"});return`${ft} to ${q} (${ot.installments} months)`})()})]}),ot.status==="rejected"&&ot.rejectionReason&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-red-200",children:[a.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Rejection Reason"}),a.jsx("p",{className:"text-sm text-red-900",children:ot.rejectionReason})]})]})})},ot.id))}),a.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6 mb-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Period"}),a.jsx("p",{className:"text-sm text-gray-700 font-medium",children:H==="current"?L.monthName:H==="last"?I.monthName:`${W} to ${re}`})]}),a.jsx("div",{className:"text-right",children:a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[Pt.length," payment",Pt.length!==1?"s":""]})})]}),a.jsxs("div",{className:"pt-4 border-t border-green-200 space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Gross Pay"}),a.jsxs("p",{className:"text-2xl text-green-600",children:["",Dr.toLocaleString()]})]}),pa>0&&a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(T2,{className:"w-4 h-4 text-red-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Personal Expenses"})]}),a.jsxs("p",{className:"text-xl text-red-600",children:["",pa.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-green-300",children:[a.jsx("p",{className:"text-base font-semibold text-gray-900",children:"Net Amount"}),a.jsxs("p",{className:"text-3xl font-bold text-green-700",children:["",oa.toLocaleString()]})]})]})]})}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(ks,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-lg text-gray-900",children:"Monthly Payslips"})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Payslips are available for download after the 4th of each month"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Rt.map((ot,Sr)=>a.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${ot.isAvailable&&(ot.payouts.length>0||ot.personalExpenses&&ot.personalExpenses>0)?"border-purple-300 bg-gradient-to-br from-purple-50 to-pink-50 hover:shadow-lg":"border-gray-200 bg-gray-50 opacity-60"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-900 font-semibold",children:[ot.month," ",ot.year]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[ot.payouts.length," payout",ot.payouts.length!==1?"s":"",ot.personalExpenses>0&&` + ${ot.personalExpenses.toLocaleString("en-IN")} salary`]})]}),ot.isAvailable&&(ot.payouts.length>0||ot.personalExpenses&&ot.personalExpenses>0)?a.jsxs("button",{onClick:()=>Rle(n||"Employee",r,ot.month,ot.year,ot.payouts,lt,ot.personalExpenses||0),className:"flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",title:"Download Payslip",children:[a.jsx(Ms,{className:"w-4 h-4"}),"Download"]}):a.jsx("div",{className:"px-3 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm cursor-not-allowed",children:ot.payouts.length===0&&(!ot.personalExpenses||ot.personalExpenses===0)?"No Data":"Not Available"})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-300",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Amount"}),a.jsxs("p",{className:"text-xl text-gray-900 font-semibold",children:["",ot.total.toLocaleString("en-IN")]})]})]},Sr))})]}),a.jsx("div",{className:"mb-4",children:a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Payment Details"})}),Pt.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(ca,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No payouts found for the selected period"})]}):a.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"})]})}),a.jsx("tbody",{children:Pt.sort((ot,Sr)=>new Date(Sr.date).getTime()-new Date(ot.date).getTime()).map(ot=>a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-900",children:new Date(ot.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:r})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"text-green-600",children:["",ot.amount.toLocaleString()]})})]},ot.id))})]})})]})})(),l==="permanent"&&(()=>{const He=u.filter(Ke=>Ke.type==="fulltime"),Ie=Se.filter(Ke=>u.find(Nt=>Nt.id===Ke.employeeId)?.type==="fulltime"),lt=tr.totalPayout;return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Permanent Employees"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Full-time employees - Monthly/periodic payouts"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Employees"}),a.jsx("div",{className:"text-2xl text-blue-600",children:He.length})]})]}),He.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(La,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No permanent employees yet"}),a.jsx("p",{className:"text-sm mt-2",children:"Contact your cluster head to add employees"})]}):a.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Role"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Phone"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Last Payout"}),a.jsxs("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:["Total Paid (",H==="current"?"This Month":H==="last"?"Last Month":"Period",")"]}),a.jsxs("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:["Personal Expenses (",H==="current"?"This Month":H==="last"?"Last Month":"Period",")"]}),a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Net Amount"}),e==="cluster_head"&&a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),a.jsx("tbody",{children:He.map((Ke,pt)=>{const Nt=Ie.filter(oa=>oa.employeeId===Ke.id),Rt=Nt.reduce((oa,ot)=>oa+ot.amount,0),Pt=Br(Ke.id),Dr=Pt+Rt,pa=Nt.length>0?Nt.sort((oa,ot)=>new Date(ot.date).getTime()-new Date(oa.date).getTime())[0]:null;return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full ${Tr(pt)} flex items-center justify-center text-white text-sm`,children:Ir(Ke.name)}),a.jsx("button",{onClick:()=>{D(Ke),B(!0)},className:"text-gray-900 hover:text-purple-600 hover:underline transition-colors text-left",children:Ke.name})]})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:Ke.employeeId})}),a.jsx("td",{className:"py-4 px-4",children:Ke.role&&a.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:Ke.role})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:Ke.phone})}),a.jsx("td",{className:"py-4 px-4",children:pa?a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:new Date(pa.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),a.jsxs("div",{className:"text-xs text-gray-500",children:["",pa.amount.toLocaleString()]})]}):a.jsx("span",{className:"text-gray-400 text-sm",children:"No payouts"})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"text-green-600",children:["",Rt.toLocaleString()]})}),a.jsx("td",{className:"py-4 px-4 text-right",children:Pt>0?a.jsxs("span",{className:"text-red-600",children:["- ",Pt.toLocaleString()]}):a.jsx("span",{className:"text-gray-400",children:"0"})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:`font-semibold ${Dr<0?"text-red-600":Dr>0?"text-green-600":"text-gray-900"}`,children:["",Dr.toLocaleString()]})}),e==="cluster_head"&&a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>{ve(Ke),V(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit employee",children:a.jsx(Vi,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Pr(Ke.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete employee",children:a.jsx(ws,{className:"w-4 h-4"})})]})})]},Ke.id)})})]})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Payout History"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Salary payments for ",H==="current"?L.monthName:H==="last"?I.monthName:"selected period"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Payout"}),a.jsxs("div",{className:"text-2xl text-green-600",children:["",lt.toLocaleString()]})]})]}),Ie.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(ca,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No payouts recorded for this period"}),a.jsx("p",{className:"text-sm mt-2",children:"Add payouts to track permanent employee payments"})]}):a.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"}),e==="cluster_head"&&a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),a.jsx("tbody",{children:Ie.sort((Ke,pt)=>new Date(pt.date).getTime()-new Date(Ke.date).getTime()).map((Ke,pt)=>{const Nt=u.find(Rt=>Rt.id===Ke.employeeId);return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full ${Tr(pt)} flex items-center justify-center text-white text-sm`,children:Ir(Ke.employeeName)}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:Ke.employeeName}),Nt?.role&&a.jsx("div",{className:"text-xs text-gray-500",children:Nt.role})]})]})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:Nt?.employeeId||"-"})}),a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ur,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-900",children:new Date(Ke.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"text-gray-900",children:["",Ke.amount.toLocaleString()]})}),e==="cluster_head"&&a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>{rt(Ke),J(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit payout",children:a.jsx(Vi,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>ur(Ke.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete payout",children:a.jsx(ws,{className:"w-4 h-4"})})]})})]},Ke.id)})})]})})]})]})})(),l==="advances"&&(e==="cluster_head"||e==="audit")&&(()=>{const He=g.filter(Ke=>Ke.status==="pending"),Ie=g.filter(Ke=>Ke.status==="approved"),lt=g.filter(Ke=>Ke.status==="rejected");return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Salary Advance Requests"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Review and manage employee salary advance requests"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-yellow-700 mb-1",children:"Pending Requests"}),a.jsx("p",{className:"text-2xl font-semibold text-yellow-900",children:He.length})]}),a.jsx(Aa,{className:"w-10 h-10 text-yellow-400"})]})}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-700 mb-1",children:"Approved"}),a.jsx("p",{className:"text-2xl font-semibold text-green-900",children:Ie.length})]}),a.jsx(lr,{className:"w-10 h-10 text-green-400"})]})}),a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-red-700 mb-1",children:"Rejected"}),a.jsx("p",{className:"text-2xl font-semibold text-red-900",children:lt.length})]}),a.jsx(en,{className:"w-10 h-10 text-red-400"})]})})]}),He.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Aa,{className:"w-5 h-5 text-yellow-600"}),"Pending Requests"]}),a.jsx("div",{className:"space-y-4",children:He.map(Ke=>a.jsxs("div",{className:"border-2 border-yellow-300 bg-yellow-50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:Ke.employeeName}),a.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Employee ID: ",Ke.employeeEmployeeId]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Requested on ",new Date(Ke.requestDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Advance Amount"}),a.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:["",Ke.amount.toLocaleString("en-IN")]})]})]}),a.jsx("div",{className:"bg-white border border-yellow-200 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Monthly Deduction"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",Ke.monthlyDeduction.toLocaleString("en-IN")]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Installments"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Ke.installments," months"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Start Month"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:(()=>{const[pt,Nt]=Ke.startMonth.split("-");return new Date(parseInt(pt),parseInt(Nt)-1,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})()})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"End Month"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:(()=>{const[pt,Nt]=Ke.endMonth.split("-");return new Date(parseInt(pt),parseInt(Nt)-1,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})()})]})]})}),e==="cluster_head"&&a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:()=>kt(Ke.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md font-medium",children:[a.jsx(lr,{className:"w-5 h-5"}),a.jsx("span",{children:"Approve"})]}),a.jsxs("button",{onClick:()=>Ct(Ke.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-red-600 to-rose-600 text-white rounded-lg hover:from-red-700 hover:to-rose-700 transition-all shadow-md font-medium",children:[a.jsx(en,{className:"w-5 h-5"}),a.jsx("span",{children:"Reject"})]})]})]},Ke.id))})]}),Ie.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(lr,{className:"w-5 h-5 text-green-600"}),"Approved Advances"]}),a.jsx("div",{className:"space-y-4",children:Ie.map(Ke=>a.jsxs("div",{className:"border-2 border-green-300 bg-green-50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:Ke.employeeName}),a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Employee ID: ",Ke.employeeEmployeeId]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Approved on ",new Date(Ke.approvedDate||"").toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Amount"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",Ke.amount.toLocaleString("en-IN")]}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Remaining: ",Ke.remainingAmount.toLocaleString("en-IN")]})]})]}),a.jsxs("div",{className:"bg-white border border-green-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Deduction Progress"}),a.jsx("div",{className:"space-y-2",children:Ke.deductions.map((pt,Nt)=>a.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${pt.deducted?"bg-green-100 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[pt.deducted?a.jsx(lr,{className:"w-4 h-4 text-green-600"}):a.jsx(Aa,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-900",children:new Date(pt.month+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})})]}),a.jsxs("span",{className:`text-sm font-semibold ${pt.deducted?"text-green-700":"text-gray-700"}`,children:["",pt.amount.toLocaleString("en-IN")]})]},Nt))})]})]},Ke.id))})]}),lt.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(en,{className:"w-5 h-5 text-red-600"}),"Rejected Requests"]}),a.jsx("div",{className:"space-y-4",children:lt.map(Ke=>a.jsxs("div",{className:"border-2 border-red-300 bg-red-50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:Ke.employeeName}),a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Employee ID: ",Ke.employeeEmployeeId]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Rejected on ",new Date(Ke.approvedDate||"").toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Requested Amount"}),a.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["",Ke.amount.toLocaleString("en-IN")]})]})]}),Ke.rejectionReason&&a.jsxs("div",{className:"bg-white border border-red-200 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:"Rejection Reason:"}),a.jsx("p",{className:"text-sm text-red-700",children:Ke.rejectionReason})]})]},Ke.id))})]}),g.length===0&&a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-12 text-center",children:[a.jsx(Po,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"No Salary Advance Requests"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Employees can apply for salary advances from their dashboard"})]})]})})()]})]}),C&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Apply for Salary Advance"}),a.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(ea,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-purple-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-purple-800 font-medium mb-1",children:"Recovery Terms"}),a.jsx("p",{className:"text-sm text-purple-700",children:"The advance will be automatically deducted from your salary over the next 4 months in equal installments."})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Advance Amount *"}),a.jsx("input",{type:"number",value:E,onChange:He=>_(He.target.value),placeholder:"Enter amount (e.g., 10000)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),E&&!isNaN(parseFloat(E))&&parseFloat(E)>0&&a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Monthly Deduction Preview:"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["",(parseFloat(E)/4).toLocaleString("en-IN"),"/month"]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"for 4 months"})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[a.jsx("button",{onClick:()=>{N(!1),_("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-gray-700",children:"Cancel"}),a.jsx("button",{onClick:yr,disabled:!E||isNaN(parseFloat(E))||parseFloat(E)<=0,className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit Request"})]})]})}),G&&Z&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Edit Employee"}),a.jsx("button",{onClick:()=>V(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(ea,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employee ID"}),a.jsx("input",{type:"text",value:Z.employeeId,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Name *"}),a.jsx("input",{type:"text",value:Z.name,onChange:He=>ve({...Z,name:He.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone *"}),a.jsx("input",{type:"tel",value:Z.phone,onChange:He=>ve({...Z,phone:He.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role (Optional)"}),a.jsx("input",{type:"text",value:Z.role||"",onChange:He=>ve({...Z,role:He.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),Z.type==="contract"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Daily Rate (Optional)"}),a.jsx("input",{type:"number",value:Z.dailyRate||"",onChange:He=>ve({...Z,dailyRate:parseFloat(He.target.value)||void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[a.jsx("button",{onClick:()=>V(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:Rr,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Update Employee"})]})]})}),Ee&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Add Payout"}),a.jsx("button",{onClick:()=>Te(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(ea,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Employees *"}),a.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-40 overflow-y-auto space-y-2",children:Da.map(He=>a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[a.jsx("input",{type:"checkbox",checked:ue.employeeIds.includes(He.id),onChange:Ie=>{Ie.target.checked?ge({...ue,employeeIds:[...ue.employeeIds,He.id]}):ge({...ue,employeeIds:ue.employeeIds.filter(lt=>lt!==He.id)})},className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm text-gray-900",children:[He.name," (",He.employeeId,")"]})]},He.id))}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ue.employeeIds.length," employee(s) selected"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Amount () *"}),a.jsx("input",{type:"number",step:"0.01",value:ue.amount,onChange:He=>ge({...ue,amount:He.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Enter amount"})]}),a.jsx(Ns,{label:"Date *",value:ue.date,onChange:He=>ge({...ue,date:He}),className:"w-full"})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[a.jsx("button",{onClick:()=>Te(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:Kt,disabled:w,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:w?"Adding...":"Add Payout"})]})]})}),Fe&&Ze&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Edit Payout"}),a.jsx("button",{onClick:()=>J(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(ea,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employee"}),a.jsx("input",{type:"text",value:Ze.employeeName,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Amount () *"}),a.jsx("input",{type:"number",step:"0.01",value:Ze.amount,onChange:He=>rt({...Ze,amount:parseFloat(He.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsx(Ns,{label:"Date *",value:Ze.date,onChange:He=>rt({...Ze,date:He}),className:"w-full"})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[a.jsx("button",{onClick:()=>J(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:da,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Update Payout"})]})]})}),O&&F&&a.jsx(Mle,{employee:F,payouts:m.filter(He=>He.employeeId===F.id),personalExpenses:y.filter(He=>He.category==="personal_expense"&&He.employeeId===F.employeeId),onClose:()=>{B(!1),D(null)}}),Tt&&a.jsx(S$,{onClose:()=>ze(!1),employees:u})]})}function Fle({context:e,selectedStoreId:t,selectedProductionHouseId:r}){const[n,s]=P.useState("thisMonth"),[i,o]=P.useState(""),[l,d]=P.useState(""),[u,f]=P.useState([]),[m,p]=P.useState(null),[g,b]=P.useState(!0),[y,v]=P.useState(null),k=t||e.user?.storeId;P.useEffect(()=>{w()},[e.inventory,e.salesData,e.productionData,e.productionRequests,n,i,l,k]);const S=()=>{const _=new Date;let O=new Date,B=new Date(_);switch(n){case"day":O=new Date(_);break;case"thisMonth":O=new Date(_.getFullYear(),_.getMonth(),1),B=new Date(_);break;case"prevMonth":O=new Date(_.getFullYear(),_.getMonth()-1,1),B=new Date(_.getFullYear(),_.getMonth(),0);break;case"thisYear":O=new Date(_.getFullYear(),0,1),B=new Date(_);break;case"prevYear":O=new Date(_.getFullYear()-1,0,1),B=new Date(_.getFullYear()-1,11,31);break;case"custom":if(i&&l)return{startDate:new Date(i),endDate:new Date(l)};O=new Date(_),O.setDate(_.getDate()-7);break}return{startDate:O,endDate:B}},w=()=>{b(!0);const{startDate:_,endDate:O}=S();console.log(" DataCapture Context Check:",{hasProductionRequests:!!e.productionRequests,productionRequestsCount:e.productionRequests?.length||0,productionRequestsArray:e.productionRequests,firstThreeRequests:e.productionRequests?.slice(0,3)});const B=new Map,F=new Date(_);for(;F<=O;){const R=F.getFullYear(),X=String(F.getMonth()+1).padStart(2,"0"),L=String(F.getDate()).padStart(2,"0"),I=`${R}-${X}-${L}`;B.set(I,{date:I,inventoryLogged:!1,inventoryCount:0,inventoryLoggedAt:null,inventoryLoggedBy:"",salesLogged:!1,salesLoggedAt:null,salesLoggedBy:"",productionLogged:!1,productionLoggedAt:null,productionLoggedBy:"",stockRequestLogged:!1,stockRequestLoggedAt:null,stockRequestLoggedBy:"",cashDiscrepancy:0,managerEmail:"",managerName:"",status:"missing",lateEntry:!1}),F.setDate(F.getDate()+1)}const D=new Map;(k?e.inventory.filter(R=>R.storeId===k):e.inventory).forEach(R=>{D.has(R.date)||D.set(R.date,[]),D.get(R.date)?.push(R)}),D.forEach((R,X)=>{if(B.has(X)){const L=B.get(X);if(L.inventoryLogged=!0,L.inventoryCount=R.length,R.length>0){const I=R[0],V=I.id.split("-")[0];if(I.createdByName?L.inventoryLoggedBy=I.createdByName:I.createdByEmail?L.inventoryLoggedBy=I.createdByEmail:I.createdBy?typeof I.createdBy=="string"&&I.createdBy.includes("-")?L.inventoryLoggedBy=I.userId?`User ${I.userId.substring(0,8)}`:"Manager":L.inventoryLoggedBy=I.createdBy:I.userId?L.inventoryLoggedBy=`User ${I.userId.substring(0,8)}`:L.inventoryLoggedBy="Unknown User",V){const Z=parseInt(V);if(!isNaN(Z)&&Z>0){L.inventoryLoggedAt=new Date(Z).toISOString();const ve=new Date(Z),Ee=new Date(X+"T23:59:59");L.lateEntry=ve>Ee}}}}}),(k?e.salesData.filter(R=>R.storeId===k):e.salesData).forEach(R=>{if(B.has(R.date)){const X=B.get(R.date);X.salesLogged=!0,X.cashDiscrepancy=Math.abs(R.salesDiscrepancy!==void 0?R.salesDiscrepancy:R.cashOffset||0),R.createdByName?X.salesLoggedBy=R.createdByName:R.createdByEmail?X.salesLoggedBy=R.createdByEmail:R.createdBy?typeof R.createdBy=="string"&&R.createdBy.includes("-")?X.salesLoggedBy="Manager":X.salesLoggedBy=R.createdBy:X.salesLoggedBy="Unknown User",e.user&&(X.managerEmail=e.user.email,X.managerName=e.user.name);const L=R.id.split("-")[0];if(L){const I=parseInt(L);if(!isNaN(I)&&I>0){X.salesLoggedAt=new Date(I).toISOString();const G=new Date(I),V=new Date(R.date+"T23:59:59");G>V&&(X.lateEntry=!0)}}}}),e.productionData.forEach(R=>{if(B.has(R.date)){const X=B.get(R.date);X.productionLogged=!0;let L="";if(R.createdByName)L=R.createdByName;else if(R.createdByEmail)L=R.createdByEmail;else if(R.createdBy){const I=e.employees?.find(G=>G.employeeId===R.createdBy);I?L=I.name:typeof R.createdBy=="string"&&R.createdBy.includes("-")?L="Production Manager":L=R.createdBy}else L="Unknown User";if(X.productionLoggedBy=L,R.createdAt){X.productionLoggedAt=R.createdAt;const I=new Date(R.createdAt),G=new Date(R.date+"T23:59:59");I>G&&(X.lateEntry=!0)}else X.productionLoggedAt=new Date(R.date+"T12:00:00").toISOString()}});const ee=k?e.productionRequests.filter(R=>R.storeId===k):e.productionRequests;console.log(" DataCapture - Stock Requests Debug:",{totalStockRequests:e.productionRequests.length,filteredStockRequests:ee.length,effectiveStoreId:k,stockRequestDates:ee.map(R=>R.requestDate),dateMapKeys:Array.from(B.keys()),stockRequestIds:ee.map(R=>R.id),sampleRequest:ee[0],dateRangeStart:Array.from(B.keys()).sort()[0],dateRangeEnd:Array.from(B.keys()).sort().reverse()[0]}),ee.forEach(R=>{if(B.has(R.requestDate)){const X=B.get(R.requestDate);X.stockRequestLogged=!0,R.requestedByName?X.stockRequestLoggedBy=R.requestedByName:R.requestedBy?X.stockRequestLoggedBy=R.requestedBy:X.stockRequestLoggedBy="Unknown User";const L=R.id.split("-")[0];if(L){const I=parseInt(L);if(!isNaN(I)&&I>1e12){X.stockRequestLoggedAt=new Date(I).toISOString();const G=new Date(I),V=new Date(R.requestDate+"T23:59:59");G>V&&(X.lateEntry=!0)}else if(R.createdAt){X.stockRequestLoggedAt=R.createdAt;const G=new Date(R.createdAt),V=new Date(R.requestDate+"T23:59:59");G>V&&(X.lateEntry=!0)}else X.stockRequestLoggedAt=new Date(R.requestDate+"T12:00:00").toISOString()}else R.createdAt&&(X.stockRequestLoggedAt=R.createdAt)}}),B.forEach(R=>{const X=R.inventoryLogged,L=R.salesLogged;X&&L?R.status="complete":X||L?R.status="partial":R.status="missing"});const re=Array.from(B.values()).sort((R,X)=>new Date(X.date).getTime()-new Date(R.date).getTime());f(re);const Q={totalDays:re.length,daysWithData:re.filter(R=>R.status!=="missing").length,totalDiscrepancy:re.reduce((R,X)=>R+X.cashDiscrepancy,0),avgDiscrepancy:0,completionRate:0,onTimeRate:0};Q.avgDiscrepancy=Q.totalDiscrepancy/(re.filter(R=>R.salesLogged).length||1),Q.completionRate=re.filter(R=>R.status==="complete").length/Q.totalDays*100,Q.onTimeRate=re.filter(R=>R.status==="complete"&&!R.lateEntry).length/Q.totalDays*100,p(Q),b(!1)},A=_=>_?q2(_):"-",C=_=>Kn(_),N=_=>{switch(_){case"complete":return"bg-green-100 text-green-800";case"partial":return"bg-yellow-100 text-yellow-800";case"missing":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},E=_=>{switch(_){case"complete":return a.jsx(lr,{className:"w-5 h-5 text-green-600"});case"partial":return a.jsx(Qa,{className:"w-5 h-5 text-yellow-600"});case"missing":return a.jsx(en,{className:"w-5 h-5 text-red-600"});default:return a.jsx(Aa,{className:"w-5 h-5 text-gray-600"})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-gray-900 mb-1",children:" Data Capture Monitor"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Track daily data logging and manager performance"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>s("day"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${n==="day"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Today"}),a.jsx("button",{onClick:()=>s("thisMonth"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${n==="thisMonth"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"This Month"}),a.jsx("button",{onClick:()=>s("prevMonth"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${n==="prevMonth"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Last Month"}),a.jsx("button",{onClick:()=>s("thisYear"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${n==="thisYear"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"This Year"}),a.jsx("button",{onClick:()=>s("prevYear"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${n==="prevYear"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Last Year"}),a.jsx("button",{onClick:()=>s("custom"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${n==="custom"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Custom"})]})]}),n==="custom"&&a.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[a.jsx(Ns,{label:"Start Date",value:i,onChange:o}),a.jsx(Ns,{label:"End Date",value:l,onChange:d})]})]}),m&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Ur,{className:"w-5 h-5 text-blue-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Days"})]}),a.jsx("p",{className:"text-2xl text-gray-900",children:m.totalDays})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(lr,{className:"w-5 h-5 text-green-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Completion Rate"})]}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[m.completionRate.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Aa,{className:"w-5 h-5 text-orange-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"On-Time Rate"})]}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[m.onTimeRate.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Nc,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Discrepancy"})]}),a.jsxs("p",{className:"text-2xl text-gray-900",children:["",m.totalDiscrepancy.toFixed(2)]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(fa,{className:"w-5 h-5 text-purple-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Avg Discrepancy"})]}),a.jsxs("p",{className:"text-2xl text-gray-900",children:["",m.avgDiscrepancy.toFixed(2)]})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:a.jsx("span",{children:"Expense"})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Sales"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Production"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Stock Requests"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Cash Discrepancy"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:g?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"Loading data..."})}):u.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"No data for selected period"})}):u.map(_=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[_.lateEntry&&a.jsx(Qa,{className:"w-4 h-4 text-orange-500",title:"Late Entry"}),a.jsx("span",{className:"text-sm text-gray-900",children:C(_.date)})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[E(_.status),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${N(_.status)}`,children:_.status.charAt(0).toUpperCase()+_.status.slice(1)})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.inventoryLogged?a.jsxs("div",{className:"text-sm",children:[a.jsxs("p",{className:"text-gray-900",children:[_.inventoryCount," items"]}),a.jsx("p",{className:"text-gray-500",children:A(_.inventoryLoggedAt)}),_.inventoryLoggedBy&&a.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",_.inventoryLoggedBy]})]}):a.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.salesLogged?a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-gray-900",children:" Logged"}),a.jsx("p",{className:"text-gray-500",children:A(_.salesLoggedAt)}),_.salesLoggedBy&&a.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",_.salesLoggedBy]})]}):a.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.productionLogged?a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-gray-900",children:" Logged"}),a.jsx("p",{className:"text-gray-500",children:A(_.productionLoggedAt)}),_.productionLoggedBy&&a.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",_.productionLoggedBy]})]}):a.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.stockRequestLogged?a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-gray-900",children:" Logged"}),a.jsx("p",{className:"text-gray-500",children:A(_.stockRequestLoggedAt)}),_.stockRequestLoggedBy&&a.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",_.stockRequestLoggedBy]})]}):a.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.salesLogged?a.jsxs("span",{className:`text-sm ${_.cashDiscrepancy>500?"text-red-600":"text-gray-900"}`,children:["",_.cashDiscrepancy.toFixed(2)]}):a.jsx("span",{className:"text-sm text-gray-400",children:"-"})})]},_.date))})]})})}),a.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[a.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Legend:"}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(lr,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-gray-600",children:"Complete - Both Inventory AND Sales logged"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qa,{className:"w-4 h-4 text-yellow-600"}),a.jsx("span",{className:"text-gray-600",children:"Partial - At least one data type logged"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(en,{className:"w-4 h-4 text-red-600"}),a.jsx("span",{className:"text-gray-600",children:"Missing - No data logged"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qa,{className:"w-4 h-4 text-orange-500"}),a.jsx("span",{className:"text-gray-600",children:"Orange icon = Late entry (logged after midnight)"})]})]})]})]})}function $le({storeId:e,accessToken:t,thresholds:r,onClose:n,onSave:s}){const[i,o]=P.useState(r),[l,d]=P.useState(!1),u=[{key:"chicken",label:"Chicken Momos"},{key:"chickenCheese",label:"Chicken Cheese Momos"},{key:"veg",label:"Veg Momos"},{key:"cheeseCorn",label:"Cheese Corn Momos"},{key:"paneer",label:"Paneer Momos"},{key:"vegKurkure",label:"Veg Kurkure Momos"},{key:"chickenKurkure",label:"Chicken Kurkure Momos"}],f=(p,g,b)=>{const y=parseInt(b)||0;o({...i,[p]:{...i[p],[g]:y}})},m=async()=>{try{d(!0),await U5(t,e,i),s(i),Qt.success("Stock thresholds saved successfully"),n()}catch(p){console.error("Error saving thresholds:",p),Qt.error("Failed to save thresholds")}finally{d(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-500 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:a.jsx(Gi,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-white",children:"Stock Alert Thresholds"}),a.jsx("p",{className:"text-sm text-white/80",children:"Customize alert levels for each momo type"})]})]}),a.jsx("button",{onClick:n,className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center hover:bg-white/30 transition-all",children:a.jsx(ea,{className:"w-5 h-5 text-white"})})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6",children:[a.jsxs("p",{className:"text-sm text-blue-900",children:[a.jsx("strong",{children:"How it works:"})," Set three threshold levels for each momo type. When stock falls below these levels, color-coded alerts will appear on the stock cards."]}),a.jsxs("div",{className:"mt-3 flex flex-wrap gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"High: Stock above high threshold"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Medium: Between medium and high"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Low: Between low and medium"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Critical: Below low threshold or zero"})]})]})]}),a.jsx("div",{className:"space-y-4",children:u.map(({key:p,label:g})=>{const b=i[p]||{high:600,medium:300,low:150};return a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:g}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"High Threshold (plates)"}),a.jsx("input",{type:"number",value:b.high,onChange:y=>f(p,"high",y.target.value),className:"w-full px-3 py-2 border-2 border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., 1200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Medium Threshold (plates)"}),a.jsx("input",{type:"number",value:b.medium,onChange:y=>f(p,"medium",y.target.value),className:"w-full px-3 py-2 border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"e.g., 600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Low Threshold (plates)"}),a.jsx("input",{type:"number",value:b.low,onChange:y=>f(p,"low",y.target.value),className:"w-full px-3 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"e.g., 300"})]})]})]},p)})})]}),a.jsxs("div",{className:"border-t-2 border-gray-200 p-6 bg-gray-50 flex justify-between items-center",children:[a.jsx("button",{onClick:n,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:m,disabled:l,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 disabled:opacity-50",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Lo,{className:"w-5 h-5"}),"Save Thresholds"]})})]})]})})}function Lle({context:e,highlightRequestId:t,selectedStoreId:r,onNavigateToManageItems:n}){const[s,i]=P.useState([]),[o,l]=P.useState(!0),[d,u]=P.useState(!1),[f,m]=P.useState(""),[p,g]=P.useState("all"),[b,y]=P.useState("daily"),v=(xe=new Date)=>{const it=xe.getFullYear(),dt=String(xe.getMonth()+1).padStart(2,"0"),gt=String(xe.getDate()).padStart(2,"0");return`${it}-${dt}-${gt}`},[k,S]=P.useState({from:v(new Date(Date.now()-10080*60*1e3)),to:v()}),[w,A]=P.useState([]),[C,N]=P.useState({}),[E,_]=P.useState(""),O=()=>v(),[B,F]=P.useState(O()),[D,H]=P.useState(null),[ne,W]=P.useState({}),[ee,re]=P.useState({}),[Q,R]=P.useState({}),[X,L]=P.useState({}),[I,G]=P.useState(!1),[V,Z]=P.useState(null),[ve,Ee]=P.useState(null),[Te,ue]=P.useState(!1),[ge,Fe]=P.useState({}),[J,Ze]=P.useState(!1),[rt,Tt]=P.useState(null),[ze,Re]=P.useState({}),[Ce,Se]=P.useState({}),[Qe,kt]=P.useState(!1),[Ct,yr]=P.useState(()=>{const xe=localStorage.getItem("momosPerPlate");return xe?parseInt(xe,10):6}),[Kt,Rr]=P.useState(!1),Pr=[{name:"Chaat Masala",unit:"pkt"},{name:"Peri-Peri Masala",unit:"pkt"},{name:"Black Salt",unit:"pkt"},{name:"Butter",unit:"pkt"},{name:"Burger",unit:"pkt"},{name:"Oil",unit:"litre"},{name:"Capsicum",unit:"pieces"},{name:"Onion",unit:"piece"},{name:"Fresh Cream",unit:"pkt"},{name:"Liquid Cheese",unit:"pkt"},{name:"Milk",unit:"pkt"},{name:"Lemon",unit:"pieces"},{name:"Coriander",unit:"bundle"},{name:"Tandoori Masala",unit:"pkt"},{name:"Sesame Seeds (Til)",unit:"pkt"},{name:"Chilli Flakes",unit:"pkt"},{name:"Tomato Ketchup",unit:"pkt"}],da=["Pan-Fried Sauce","Butter Makhani Sauce","Chilli Chicken Sauce","Korean Sauce","Red Sauce","Green Sauce","Soup Premix","Tandoori Sauce"],ur=["KOT Roll","Parcel Box","Table Box","Zomato Tape"],Br=e.user?.designation==="store_incharge",It=e.user?.designation==="production_incharge",er=e.user?.role==="manager",Ir=e.user?.role==="cluster_head",Tr=er||Ir||It,tr=P.useMemo(()=>(e.inventoryItems?.filter(xe=>xe.category==="finished_product"&&xe.isActive)||[]).map(xe=>{const it=xe.displayName.endsWith("Momo")?xe.displayName+"s":xe.displayName;return{key:xe.name,camelKey:xe.name.replace(/_([a-z])/g,dt=>dt[1].toUpperCase()),label:xe.displayName,legacySalesKey:it,unit:xe.unit}}),[e.inventoryItems]),Da=async()=>{try{const xe=ju(),{data:{session:it}}=await xe.auth.getSession();return it?.access_token||null}catch(xe){return console.error("Error getting fresh token:",xe),null}};P.useEffect(()=>{console.log("ProductionRequests - User Info:",{role:e.user?.role,designation:e.user?.designation,isStoreIncharge:Br,isProductionHead:It,isOperationsHead:er,isClusterHead:Ir,canViewAll:Tr})},[e.user,Br,It,er,Ir,Tr]),P.useEffect(()=>{He(),Ie(),Oa()},[e.user,r]),P.useEffect(()=>{w.length>=0&&e.inventoryItems&&e.inventoryItems.length>0&&(Z(null),Ee(null),lt())},[w,e.user,r,e.inventoryItems]),P.useEffect(()=>{if(!Br||!e.user?.storeId)return;const xe=()=>{const dt=new Date,gt=dt.getHours(),ft=dt.getMinutes(),q=dt.toISOString().split("T")[0];if(gt===15&&ft===0&&D!==q){const oe=new Date(dt);oe.setDate(oe.getDate()+1);const ae=oe.toISOString().split("T")[0];s.some(K=>K.storeId===e.user?.storeId&&K.requestDate===ae&&K.status!=="cancelled")||(console.log(" 3 PM Reminder: No stock request found for tomorrow"),Qt.warning(" Reminder: You haven't submitted a stock request for tomorrow yet!",{duration:1e4,description:"Please submit your production request to ensure timely preparation."}),H(q))}};xe();const it=setInterval(xe,6e4);return()=>clearInterval(it)},[Br,e.user,s,D]),P.useEffect(()=>{if(!Ir&&!It&&!er)return;const xe=async()=>{try{const dt=await Da();if(!dt)return;const gt=await g5(dt);gt.notificationsSent>0&&console.log(` Sent ${gt.notificationsSent} notifications for ${gt.newPendingCount} delayed pending requests`)}catch(dt){console.log("Background pending request check failed:",dt)}};xe();const it=setInterval(xe,1800*1e3);return()=>clearInterval(it)},[Ir,It,er]);const Oa=async()=>{if(e.user)try{const xe=r||e.user.storeId;if(!xe)return;const it=await Da();if(!it)return;const dt=await B5(it,xe);dt&&Fe(dt)}catch{console.log("No saved thresholds, using defaults")}},He=async()=>{if(e.user)try{l(!0);const xe=await Da();if(!xe){console.error("No valid access token available");return}const it=await Ig(xe),dt=r||e.user.storeId;let gt=it;dt?gt=it.filter(ft=>ft.storeId===dt):Br&&e.user.storeId?gt=it.filter(ft=>ft.storeId===e.user.storeId):er&&e.user.storeId&&!Ir&&(gt=it.filter(ft=>ft.storeId===e.user.storeId)),console.log("Production Requests loaded:",{totalRequests:it.length,filteredRequests:gt.length,userRole:e.user.role,userDesignation:e.user.designation}),i(gt)}catch(xe){console.error("Error loading production requests:",xe),Qt.error("Failed to load production requests")}finally{l(!1)}},Ie=async()=>{if(e.user)try{const xe=await Da();if(!xe){console.error("No valid access token available");return}let dt=(await Mg(xe)).data||[];const gt=r||e.user.storeId;gt&&(dt=dt.filter(ft=>ft?.storeId===gt)),A(dt)}catch(xe){console.error("Error loading sales data:",xe)}},lt=async()=>{const xe=r||e.user?.storeId,it=!xe||xe==="all";if(e.user?.accessToken){console.log(" ============================================"),console.log(" loadStoreOpeningBalance called"),console.log("  selectedStoreId:",r),console.log("  context.user.storeId:",e.user?.storeId),console.log("  effectiveStoreId:",xe),console.log("  isAllStores:",it),console.log("  context.stores count:",e.stores?.length||0),console.log("  Current salesData length:",w.length),console.log(" ============================================");try{const dt=new Date().toISOString().substring(0,7);if(it){console.log("   Calculating aggregate opening balance for all stores");const ft=e.stores||[];console.log("   All stores to aggregate:",ft.map(oe=>({id:oe.id,name:oe.name})));let q={};tr.forEach(({camelKey:oe})=>{q[oe]=0});for(const oe of ft){console.log(`   Processing store: ${oe.name} (${oe.id})`);try{const ae=await sp(e.user.accessToken,oe.id,"store");if(ae?.history&&ae.history.length>0){const se=ae.history.find(K=>K.date.substring(0,7)===dt&&K.isOpeningBalance===!0);if(se)console.log(`     Found OPENING BALANCE recalibration for ${oe.name}, date: ${se.date}`),se.items.forEach(K=>{const Y=e.inventoryItems?.find(le=>le.id===K.itemId||le.name===K.itemId);if(Y){const le=Y.name.replace(/_([a-z])/g,pe=>pe[1].toUpperCase());console.log(`      Adding ${K.actualQuantity} ${le} from ${oe.name}`),q[le]+=K.actualQuantity}});else{console.log(`     No opening balance recalibration for ${oe.name}, calculating from previous month`);const K=await Ke(oe.id,dt);console.log(`      Previous month balance for ${oe.name}:`,K),Object.keys(K).forEach(Y=>{q[Y]+=K[Y]})}}else{console.log(`     No recalibration history for ${oe.name}, calculating from previous month`);const se=await Ke(oe.id,dt);console.log(`      Previous month balance for ${oe.name}:`,se),Object.keys(se).forEach(K=>{q[K]+=se[K]})}}catch(ae){console.error(`     Error loading recalibration for ${oe.name}:`,ae);const se=await Ke(oe.id,dt);console.log(`      Previous month balance for ${oe.name} (fallback):`,se),Object.keys(se).forEach(K=>{q[K]+=se[K]})}console.log(`    Running total after ${oe.name}:`,q)}console.log("   FINAL Aggregated opening balance for all stores:",q),Z(q);return}if(!xe){console.log("   No effectiveStoreId available, skipping recalibration fetch"),Z({});return}try{const ft=await sp(e.user.accessToken,xe,"store");if(console.log(" Recalibration Check:"),console.log("  Total recalibrations found:",ft?.history?.length||0),ft?.history&&ft.history.length>0){const q=ft.history.find(Y=>Y.date.substring(0,7)===dt&&Y.isOpeningBalance===!0),ae=ft.history.filter(Y=>Y.date.substring(0,7)===dt).sort((Y,le)=>new Date(le.date).getTime()-new Date(Y.date).getTime())[0],se=q?null:ft.history.find(Y=>Y.date.substring(0,7)===dt&&Y.isOpeningBalance===void 0),K=q||se;if(K){console.log("   Found opening balance recalibration:"),console.log("  Recalibration date:",K.date),console.log("  Recalibration month:",K.date.substring(0,7)),console.log("  Recalibration locationType:",K.locationType),console.log("  Recalibration locationName:",K.locationName),console.log("  Recalibration isOpeningBalance:",K.isOpeningBalance),console.log("  Current month:",dt);const Y={};if(console.log("   Processing recalibration items:",K.items.length),console.log("   Available inventory items:",e.inventoryItems?.length||0),K.items.forEach(le=>{const pe=e.inventoryItems?.find(z=>z.id===le.itemId||z.name===le.itemId);if(pe){const z=pe.name.replace(/_([a-z])/g,ce=>ce[1].toUpperCase());Y[z]=le.actualQuantity}}),console.log("   Using opening balance from recalibration:",Y),Z(Y),ae&&ae.date!==K.date){console.log("   Found MORE RECENT recalibration (mid-month):"),console.log("    Date:",ae.date),console.log("    isOpeningBalance:",ae.isOpeningBalance);const le={};ae.items.forEach(pe=>{const z=e.inventoryItems?.find(ce=>ce.id===pe.itemId||ce.name===pe.itemId);if(z){const ce=z.name.replace(/_([a-z])/g,ye=>ye[1].toUpperCase());le[ce]=pe.actualQuantity}}),Ee({date:ae.date,stock:le}),console.log("    Stock:",le)}else Ee(null);return}else console.log("   No opening balance recalibration found for current month, calculating from previous month")}else console.log("   No recalibration records found")}catch(ft){console.error(" Error fetching recalibration history (will calculate from previous month):",ft)}const gt=await Ke(xe,dt);Z(gt)}catch(dt){console.error("Error loading opening balance:",dt);const gt={};tr.forEach(({camelKey:ft})=>{gt[ft]=0}),Z(gt)}}},Ke=async(xe,it)=>{if(!xe){console.warn("   calculatePreviousMonthStoreStock called with empty storeId");const pe={};return tr.forEach(({camelKey:z})=>{pe[z]=0}),pe}const[dt,gt]=it.split("-").map(Number);let ft=dt,q=gt-1;q===0&&(q=12,ft=dt-1);const oe=`${ft}-${String(q).padStart(2,"0")}`;console.log(" Store Opening Balance Calculation:"),console.log("  Store ID:",xe),console.log("  Previous Month:",oe);let ae={};try{const pe=await vl(e.user.accessToken,xe,"store");if(pe?.record){const z=pe.record.date.substring(0,7);console.log("   Found recalibration from:",z),z===oe?(pe.record.items.forEach(ce=>{const ye=e.inventoryItems?.find($e=>$e.id===ce.itemId||$e.name===ce.itemId);if(ye){const $e=ye.name.replace(/_([a-z])/g,De=>De[1].toUpperCase());ae[$e]=ce.actualQuantity}}),console.log("   Using previous month recalibration as opening:",ae)):(console.log("   Recalibration is from different month, assuming zero opening balance"),tr.forEach(({camelKey:ce})=>{ae[ce]=0}))}else console.log("   No recalibration found, assuming zero opening balance"),tr.forEach(({camelKey:z})=>{ae[z]=0})}catch(pe){console.error("   Error fetching recalibration:",pe),tr.forEach(({camelKey:z})=>{ae[z]=0})}const se=(e.productionRequests||[]).filter(pe=>{if(pe.status!=="delivered"||pe.storeId!==xe)return!1;const z=pe.deliveredDate||pe.requestDate||pe.createdAt;return z&&z.startsWith(oe)}).reduce((pe,z)=>(tr.forEach(({camelKey:ce})=>{const ye=z[ce]||0,$e=z[ce+"s"]||0;pe[ce]=(pe[ce]||0)+ye+$e}),pe),{}),Y=(w||[]).filter(pe=>pe.storeId!==xe?!1:pe.date&&pe.date.startsWith(oe)).reduce((pe,z)=>(tr.forEach(({camelKey:ce,legacySalesKey:ye})=>{let $e=z.data?.[ye]||0;ye==="Cheese Corn Momos"&&$e===0&&($e=z.data?.["Corn Cheese Momos"]||0),pe[ce]=(pe[ce]||0)+$e}),pe),{}),le={};return tr.forEach(({camelKey:pe})=>{le[pe]=(ae[pe]||0)+(se[pe]||0)-(Y[pe]||0)}),console.log("  Previous Month Opening Balance:",ae),console.log("  Previous Month Received:",se),console.log("  Previous Month Sold:",Y),console.log("  Calculated Closing Stock (= Opening + Received - Sold):",le),le},pt=async xe=>{if(xe.preventDefault(),d){console.log(" Submission already in progress, ignoring duplicate request");return}if(console.log(" handleSubmitRequest called"),console.log("  User info:",{hasAccessToken:!!e.user?.accessToken,hasEmployeeId:!!e.user?.employeeId,hasStoreId:!!e.user?.storeId,user:e.user}),console.log("  Form data:",{momoQuantities:C,totalQuantity:Object.values(C).reduce((dt,gt)=>dt+gt,0),requestDate:B,notes:E}),!e.user?.accessToken||!e.user?.employeeId||!e.user?.storeId){console.error(" Missing user information:",{hasAccessToken:!!e.user?.accessToken,hasEmployeeId:!!e.user?.employeeId,hasStoreId:!!e.user?.storeId,user:e.user}),Qt.error("Missing user information. Please ensure you are assigned to a store.");return}if(Object.values(C).reduce((dt,gt)=>dt+gt,0)===0){console.log(" No quantities specified"),Qt.error("Please specify at least one item quantity");return}console.log(" Submitting request for date:",B);try{u(!0),console.log(" Validation passed, submitting request..."),await B2(e.user.accessToken,{requestDate:B,storeId:e.user.storeId,storeName:void 0,requestedBy:e.user.employeeId,requestedByName:e.user.name||e.user.email,...C,kitchenUtilities:Object.keys(ne).length>0?ne:void 0,sauces:Object.keys(ee).length>0?ee:void 0,utilities:Object.keys(Q).length>0?Q:void 0,notes:E}),console.log(" Request submitted successfully"),Qt.success("Production request submitted successfully"),N({}),W({}),re({}),R({}),_(""),F(O()),await He()}catch(dt){console.error(" Error submitting production request:",dt),Qt.error(dt.message||"Failed to submit request")}finally{u(!1)}},Nt=async(xe,it)=>{if(!(!e.user?.accessToken||!e.user?.employeeId))try{await m5(e.user.accessToken,xe,it,e.user.employeeId),Qt.success(`Request marked as ${it.replace("-"," ")}`),await He()}catch(dt){console.error("Error updating status:",dt),Qt.error("Failed to update status")}},Rt=xe=>{Tt(xe);const it={};["chickenMomos","chickenCheeseMomos","vegMomos","cheeseCornMomos","paneerMomos","vegKurkureMomos","chickenKurkureMomos"].forEach(gt=>{const ft=xe[gt];ft>0&&(it[gt]=ft)}),xe.kitchenUtilities&&Object.entries(xe.kitchenUtilities).forEach(([gt,ft])=>{it[`kitchenUtility_${gt}`]=ft.quantity}),xe.utilities&&Object.entries(xe.utilities).forEach(([gt,ft])=>{it[`utility_${gt}`]=ft}),Re(it),Se({}),kt(!1),Ze(!0)},Pt=async()=>{if(!e.user?.accessToken||!e.user?.employeeId||!rt)return;if(!Qe){Qt.error("Please confirm your responsibility for shipping these items");return}const xe=[];if(Object.entries(ze).forEach(([it,dt])=>{let gt=0;if(it.startsWith("kitchenUtility_")){const q=it.replace("kitchenUtility_","");gt=rt.kitchenUtilities?.[q]?.quantity||0}else if(it.startsWith("utility_")){const q=it.replace("utility_","");gt=rt.utilities?.[q]||0}else gt=rt[it]||0;const ft=it.toLowerCase().includes("sauce")||it.toLowerCase().includes("mayo")||it.toLowerCase().includes("schezwan");dt!==gt&&!ft&&!Ce[it]&&xe.push(it.replace("_"," "))}),xe.length>0){Qt.error(`Please add notes for items with different quantities: ${xe.join(", ")}`);return}try{await p5(e.user.accessToken,rt.id,ze,Ce,e.user.employeeId),Qt.success("Request marked as shipped with quantities recorded"),Ze(!1),await He()}catch(it){console.error("Error shipping request:",it),Qt.error(it.message||"Failed to ship request")}},Dr=xe=>{switch(xe){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"accepted":return"bg-blue-100 text-blue-800 border-blue-300";case"in-preparation":return"bg-purple-100 text-purple-800 border-purple-300";case"prepared":return"bg-indigo-100 text-indigo-800 border-indigo-300";case"shipped":return"bg-orange-100 text-orange-800 border-orange-300";case"partially-shipped":return"bg-amber-100 text-amber-800 border-amber-300";case"delivered":return"bg-green-100 text-green-800 border-green-300";case"partially-delivered":return"bg-lime-100 text-lime-800 border-lime-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},pa=xe=>{switch(xe){case"pending":return a.jsx(Aa,{className:"w-4 h-4"});case"accepted":return a.jsx(lr,{className:"w-4 h-4"});case"in-preparation":return a.jsx(Zt,{className:"w-4 h-4"});case"prepared":return a.jsx(lr,{className:"w-4 h-4"});case"shipped":return a.jsx(Zy,{className:"w-4 h-4"});case"delivered":return a.jsx(lr,{className:"w-4 h-4"});default:return a.jsx(Aa,{className:"w-4 h-4"})}},oa=s.filter(xe=>!(f&&xe.requestDate!==f||p!=="all"&&xe.status!==p)),ot={pending:oa.filter(xe=>xe.status==="pending"),accepted:oa.filter(xe=>xe.status==="accepted"),"in-preparation":oa.filter(xe=>xe.status==="in-preparation"),prepared:oa.filter(xe=>xe.status==="prepared"),shipped:oa.filter(xe=>xe.status==="shipped"),delivered:oa.filter(xe=>xe.status==="delivered")},Sr=oa.reduce((xe,it)=>{const dt=it.requestDate;return xe[dt]||(xe[dt]=[]),xe[dt].push(it),xe},{}),Ot=Object.keys(Sr).sort((xe,it)=>new Date(it).getTime()-new Date(xe).getTime());return P.useEffect(()=>{if(t&&!o){const xe=document.getElementById(`request-${t}`);xe&&setTimeout(()=>{xe.scrollIntoView({behavior:"smooth",block:"center"})},300)}},[t,o]),P.useEffect(()=>{Ot.length>0&&Object.keys(X).length===0&&L({[Ot[0]]:!0})},[Ot,X]),o?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg shadow-lg p-4 sm:p-6 text-white",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl mb-2",children:"Daily Stock Requests"}),a.jsxs("p",{className:"text-sm sm:text-base text-purple-100",children:[Br&&"Submit your daily stock requirements before 9:00 AM",It&&"Manage incoming stock requests and track fulfillment",(er||Ir)&&"Monitor stock request workflow across stores"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 sm:p-6 border-2 border-green-200",children:[a.jsxs("div",{className:"mb-4 flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1 flex items-center gap-2",children:[a.jsx(Zt,{className:"w-6 h-6 text-green-600"}),"Store Stock Status"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total inventory received from production house - Stock sold"})]}),Br&&a.jsxs("button",{onClick:()=>G(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all whitespace-nowrap bg-gradient-to-r from-teal-600 to-emerald-600 text-white hover:from-teal-700 hover:to-emerald-700 shadow-lg",title:"Recalibrate store stock (Operations Managers and Cluster Heads will be notified)",children:[a.jsx(lr,{className:"w-5 h-5"}),"Recalibrate Stock"]})]}),(r||e.user?.storeId,a.jsx("div",{className:"bg-gradient-to-r from-green-100 to-green-50 border-l-4 border-green-600 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ur,{className:"w-5 h-5 text-green-700"}),a.jsx("p",{className:"text-sm font-semibold text-green-900",children:"Store Stock Status (Current Month)"})]}),a.jsx("p",{className:"text-xs text-green-700 ml-7",children:"Opening balance + Current month received - Current month sold"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>ue(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-green-600 text-green-700 rounded-lg hover:bg-green-50 transition-all",children:[a.jsx(Gi,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-semibold",children:"Alert Settings"})]}),(er||Ir)&&a.jsxs("button",{onClick:()=>Rr(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md hover:shadow-lg",children:[a.jsx(Gi,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-semibold",children:"Plate Config"})]}),n&&(er||Ir)&&a.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg",children:[a.jsx(Zt,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-semibold",children:"Manage Items"})]})]})]})})),(()=>{const xe=r||e.user?.storeId,it=new Date,dt=5.5*60*60*1e3,ft=new Date(it.getTime()+dt).toISOString().substring(0,7);console.log(" Stock Status Calculation Debug:",{currentMonth:ft,totalRequests:e.productionRequests?.length||0,deliveredRequests:e.productionRequests?.filter(ye=>ye.status==="delivered").length||0,requestStatuses:e.productionRequests?.map(ye=>({id:ye.id.slice(0,8),status:ye.status,date:ye.requestDate}))||[]});const q=e.productionRequests?.filter(ye=>{if(ye.status!=="delivered"&&ye.status!=="pending")return!1;const $e=ye.deliveredDate||ye.requestDate||ye.createdAt,De=$e&&$e.startsWith(ft);return console.log(" Delivered Request:",{id:ye.id.slice(0,8),status:ye.status,chicken:ye.chicken,chickenMomo:ye.chickenMomo,chickenMomos:ye.chickenMomos,chickenKurkure:ye.chickenKurkure,chickenKurkureMomo:ye.chickenKurkureMomo,chickenKurkureMomos:ye.chickenKurkureMomos,deliveryDate:$e,matchesMonth:De}),De?!xe||xe==="all"?!0:ye.storeId===xe:!1})||[],oe=q.reduce((ye,$e)=>(tr.forEach(({camelKey:De})=>{const Ge=$e[De]||0,Be=$e[De+"s"]||0;ye[De]=(ye[De]||0)+Ge+Be}),ye),{});console.log(" After aggregation - deliveredRequests count:",q.length),console.log(" After aggregation - totalReceived:",oe);const ae=w.filter(ye=>!ye.date||!ye.date.startsWith(ft)?!1:!xe||xe==="all"?!0:ye.storeId===xe),se=ae.reduce((ye,$e)=>(tr.forEach(({camelKey:De,legacySalesKey:Ge})=>{let Be=$e.data?.[Ge]||0;Ge==="Cheese Corn Momos"&&Be===0&&(Be=$e.data?.["Corn Cheese Momos"]||0),ye[De]=(ye[De]||0)+Be}),ye),{}),K=V||tr.reduce((ye,{camelKey:$e})=>(ye[$e]=0,ye),{});if(console.log(" Store Stock Status Calculation Debug:"),console.log("  storeOpeningBalance from state:",V),console.log("  openingBalance being used:",K),console.log("  totalReceived:",oe),console.log("   Chicken Momo (chicken) received:",oe.chicken||0),console.log("   Chicken Kurkure (chickenKurkure) received:",oe.chickenKurkure||0),console.log("  totalSales:",se),console.log("  finishedProducts count:",tr.length),V===null)return console.log("   Opening balance not loaded yet, showing loading state"),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl p-6 mt-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Ur,{className:"w-5 h-5 text-green-700"}),a.jsx("p",{className:"text-sm font-semibold text-green-900",children:"Store Stock Status (Current Month)"})]}),a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),a.jsx("p",{className:"ml-3 text-sm text-green-700",children:"Loading opening balance..."})]})]});const Y={};if(ve){console.log("   Using MOST RECENT recalibration as baseline:"),console.log("    Recalibration date:",ve.date),console.log("    Recalibration stock:",ve.stock);const $e=ve.date.substring(0,10),De={},Ge={};q.forEach(Be=>{const qe=Be.deliveredDate||Be.requestDate||Be.createdAt,St=qe?qe.substring(0,10):"";St&&St>$e&&tr.forEach(({camelKey:ie})=>{const fe=Be[ie]||0;De[ie]=(De[ie]||0)+fe})}),ae.forEach(Be=>{const qe=Be.date,St=qe?qe.substring(0,10):"";St&&St>=$e&&tr.forEach(({camelKey:ie,legacySalesKey:fe})=>{let _e=Be.data?.[fe]||0;fe==="Cheese Corn Momos"&&_e===0&&(_e=Be.data?.["Corn Cheese Momos"]||0),Ge[ie]=(Ge[ie]||0)+_e})}),console.log("    Received AFTER recalibration:",De),console.log("    Sold AFTER recalibration:",Ge),tr.forEach(({camelKey:Be})=>{const qe=ve.stock[Be]||0,St=De[Be]||0,ie=Ge[Be]||0;Y[Be]=qe+St-ie,console.log(`    ${Be}: ${qe} (recal) + ${St} (received) - ${ie} (sold) = ${Y[Be]}`)})}else console.log("   Using opening balance (no mid-month recalibration)"),tr.forEach(({camelKey:ye})=>{Y[ye]=(K[ye]||0)+(oe[ye]||0)-(se[ye]||0)});console.log("  storeStock calculated:",Y);const le=["purple","pink","green","yellow","blue","teal","red","indigo","orange","cyan"],pe=Object.values(oe).reduce((ye,$e)=>ye+$e,0),z=Object.values(K).reduce((ye,$e)=>ye+$e,0),ce=pe+z;return console.log("  totalReceivedSum:",pe),console.log("  totalOpeningBalanceSum:",z),console.log("  totalStockSum:",ce),ce===0?a.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[a.jsx(Zt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsxs("p",{className:"text-gray-600",children:["No inventory available for ",ft]}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Stock will appear here once:"}),a.jsxs("ul",{className:"text-sm text-gray-500 mt-2 list-disc list-inside",children:[a.jsxs("li",{children:["Your requests are ",a.jsx("strong",{children:"delivered"})," by the production house"]}),a.jsx("li",{children:"OR you perform a stock recalibration (1st-5th of each month)"})]}),a.jsx("p",{className:"text-xs text-blue-600 mt-4",children:' Tip: Check if your requests have been marked as "Delivered" below'})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:tr.map(({camelKey:ye,label:$e},De)=>{const Ge=oe[ye]||0,Be=se[ye]||0,qe=Y[ye]||0,ie=(K[ye]||0)+Ge,fe=le[De%le.length],_e=ge[ye]||{high:600,medium:300,low:150};let nt="high",xt="",ut="",Dt="",Wr="";qe<=0?(nt="critical",xt="bg-red-100",ut="text-red-700",Dt="border-red-300",Wr="CRITICAL"):qe<=_e.low?(nt="low",xt="bg-red-100",ut="text-red-700",Dt="border-red-300",Wr="LOW"):qe<=_e.medium?(nt="medium",xt="bg-orange-100",ut="text-orange-700",Dt="border-orange-300",Wr="MEDIUM"):qe<_e.high&&(nt="medium",xt="bg-yellow-100",ut="text-yellow-700",Dt="border-yellow-300",Wr="MEDIUM");const Xt=ie>0?(qe/ie*100).toFixed(0):"0",pr=qe<ie*.2&&ie>0;return a.jsxs("div",{className:`bg-gradient-to-br from-${fe}-50 to-${fe}-100 border-2 border-${fe}-200 rounded-xl p-4 hover:shadow-lg transition-all duration-300 relative`,children:[nt!=="high"&&a.jsxs("div",{className:`absolute top-2 right-2 flex items-center gap-1 px-2 py-1 rounded-lg ${xt} border ${Dt}`,children:[a.jsx(Qa,{className:`w-4 h-4 ${ut}`}),a.jsx("span",{className:`text-xs font-semibold ${ut} uppercase`,children:Wr})]}),a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pr-20",children:$e}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Total Received:"}),a.jsx("span",{className:`text-lg font-bold text-${fe}-600`,children:Ge})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Total Sold:"}),a.jsx("span",{className:`text-lg font-bold text-${fe}-700`,children:Be})]}),a.jsxs("div",{className:"border-t-2 border-gray-300 pt-2 mt-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Stock Available:"}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:`text-2xl font-bold ${pr||qe<0?"text-red-600":`text-${fe}-800`}`,children:[qe," pcs / ",Math.round(qe/Ct)," plates"]})})]}),ie>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:a.jsxs("span",{children:[Xt,"% remaining"]})}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${pr||qe<0?"bg-red-500":`bg-${fe}-500`}`,style:{width:`${Math.min(100,Math.max(0,Number(Xt)))}%`}})})]})]}),(pr||qe<0)&&a.jsx("div",{className:"bg-red-100 border border-red-300 rounded-lg px-2 py-1 mt-2",children:a.jsx("p",{className:"text-xs text-red-800 font-semibold",children:qe<0?" Oversold":" Low Stock"})})]})]},ye)})})})()]}),Br&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[a.jsxs("h2",{className:"text-lg sm:text-xl text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Zm,{className:"w-5 h-5 text-purple-600"}),"Submit Stock Request"]}),new Date().getHours()>=9&&a.jsx("div",{className:"mb-4 bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Qa,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-900 font-semibold mb-1",children:"It's past 9:00 AM"}),a.jsx("p",{className:"text-xs text-blue-800",children:"Same-day production requests are no longer accepted. The request date has been automatically set to tomorrow. You can also select any future date for advance orders."})]})]})}),a.jsxs("form",{onSubmit:pt,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(Ns,{label:"Request Date",value:B,onChange:F,className:"w-full"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Same-day requests must be submitted before 9:00 AM. After 9 AM, please select tomorrow or a future date for advance orders."})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-base text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx(Zt,{className:"w-5 h-5 text-purple-600"}),"Momos Quantities"]}),a.jsx("div",{className:"space-y-3 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0 lg:grid-cols-3",children:tr.map(({camelKey:xe,label:it})=>{const dt=xe==="chicken"?[150,300,450,600]:[60,120,180,300];return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:it}),a.jsx("input",{type:"number",min:"0",value:C[xe]||0,onChange:gt=>N({...C,[xe]:parseInt(gt.target.value)||0}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base"}),a.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:dt.map(gt=>a.jsx("button",{type:"button",onClick:()=>N({...C,[xe]:gt}),className:"px-3 py-1.5 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg text-sm transition-colors",children:gt},gt))})]},xe)})})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Zt,{className:"w-5 h-5 text-purple-600"}),"Kitchen Utilities (Optional)"]}),a.jsx("div",{className:"space-y-3",children:Pr.map(xe=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:[xe.name," ",a.jsxs("span",{className:"text-gray-500 text-xs",children:["(in ",xe.unit,")"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",min:"0",step:"0.01",value:ne[xe.name]?.quantity!==void 0?ne[xe.name].quantity:"",onChange:it=>{const dt=parseFloat(it.target.value)||0;if(dt>0)W({...ne,[xe.name]:{quantity:dt,unit:xe.unit}});else{const gt={...ne};delete gt[xe.name],W(gt)}},className:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",placeholder:`Quantity in ${xe.unit}`}),a.jsx("div",{className:"flex items-center px-4 py-3 bg-gray-100 border-2 border-gray-300 rounded-lg text-gray-700 text-base font-medium min-w-[80px] justify-center",children:xe.unit})]})]},xe.name))})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Zt,{className:"w-5 h-5 text-pink-600"}),"Sauces (Select Required Sauces)"]}),a.jsx("div",{className:"space-y-2 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0",children:da.map(xe=>a.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-300 rounded-lg hover:border-purple-500 cursor-pointer transition-colors active:bg-purple-50",children:[a.jsx("input",{type:"checkbox",checked:ee[xe]||!1,onChange:it=>{if(it.target.checked)re({...ee,[xe]:!0});else{const dt={...ee};delete dt[xe],re(dt)}},className:"w-5 h-5 text-purple-600 rounded focus:ring-purple-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-700",children:xe})]},xe))})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Zt,{className:"w-5 h-5 text-indigo-600"}),"Utilities (Quantity in Pieces)"]}),a.jsx("div",{className:"space-y-3 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0",children:ur.map(xe=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:xe}),a.jsx("input",{type:"number",min:"0",value:Q[xe]!==void 0?Q[xe]:"",onChange:it=>{const dt=parseInt(it.target.value)||0;if(dt>0)R({...Q,[xe]:dt});else{const gt={...Q};delete gt[xe],R(gt)}},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",placeholder:"Pieces"})]},xe))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Additional Notes (Optional)"}),a.jsx("textarea",{value:E,onChange:xe=>_(xe.target.value),rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none resize-none",placeholder:"Any special requirements or notes..."})]}),a.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-base font-medium shadow-lg active:scale-95",children:d?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),a.jsx("span",{children:"Submitting..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Zm,{className:"w-5 h-5"}),a.jsx("span",{children:"Submit Request"})]})})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:a.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:flex sm:flex-wrap sm:gap-3",children:[a.jsx("div",{className:"flex-1 sm:min-w-[200px]",children:a.jsx(Ns,{label:"Filter by Date",value:f,onChange:m,className:"w-full"})}),a.jsxs("div",{className:"flex-1 sm:min-w-[200px]",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Filter by Status"}),a.jsxs("select",{value:p,onChange:xe=>g(xe.target.value),className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"accepted",children:"Accepted"}),a.jsx("option",{value:"in-preparation",children:"In Preparation"}),a.jsx("option",{value:"prepared",children:"Prepared"}),a.jsx("option",{value:"shipped",children:"Shipped"}),a.jsx("option",{value:"delivered",children:"Delivered"})]})]}),(f||p!=="all")&&a.jsx("div",{className:"flex sm:items-end",children:a.jsx("button",{onClick:()=>{m(""),g("all")},className:"w-full sm:w-auto px-4 py-3 sm:py-2 text-sm text-purple-600 hover:text-purple-900 underline font-medium",children:"Clear Filters"})})]})}),Tr&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-4 sm:mb-6",children:"Production Request Workflow"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute top-8 left-0 right-0 h-1 bg-gray-200",style:{zIndex:0}}),a.jsxs("div",{className:"relative grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",style:{zIndex:1},children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-yellow-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:ot.pending.length})})}),a.jsx("div",{className:"w-full bg-yellow-50 border-2 border-yellow-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(Aa,{className:"w-3 h-3 text-yellow-600"}),a.jsx("p",{className:"text-xs text-yellow-800",children:"Pending"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:ot.accepted.length})})}),a.jsx("div",{className:"w-full bg-blue-50 border-2 border-blue-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(lr,{className:"w-3 h-3 text-blue-600"}),a.jsx("p",{className:"text-xs text-blue-800",children:"Accepted"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:ot["in-preparation"].length})})}),a.jsx("div",{className:"w-full bg-purple-50 border-2 border-purple-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(Zt,{className:"w-3 h-3 text-purple-600"}),a.jsx("p",{className:"text-xs text-purple-800",children:"In Prep"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-indigo-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:ot.prepared.length})})}),a.jsx("div",{className:"w-full bg-indigo-50 border-2 border-indigo-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(lr,{className:"w-3 h-3 text-indigo-600"}),a.jsx("p",{className:"text-xs text-indigo-800",children:"Prepared"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-orange-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:ot.shipped.length})})}),a.jsx("div",{className:"w-full bg-orange-50 border-2 border-orange-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(Zy,{className:"w-3 h-3 text-orange-600"}),a.jsx("p",{className:"text-xs text-orange-800",children:"Shipped"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:ot.delivered.length})})}),a.jsx("div",{className:"w-full bg-green-50 border-2 border-green-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(lr,{className:"w-3 h-3 text-green-600"}),a.jsx("p",{className:"text-xs text-green-800",children:"Delivered"})]})})]})]})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl text-gray-900",children:oa.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Requests"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl text-yellow-600",children:ot.pending.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Awaiting Action"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl text-purple-600",children:ot.accepted.length+ot["in-preparation"].length+ot.prepared.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl text-green-600",children:ot.delivered.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Completed"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fa,{className:"w-5 h-5 text-purple-600"}),a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900",children:"Stock Requests by Momo Type"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:[{filter:"today",label:"Today"},{filter:"yesterday",label:"Yesterday"},{filter:"thisWeek",label:"This Week"},{filter:"lastWeek",label:"Last Week"},{filter:"thisMonth",label:"This Month"},{filter:"lastMonth",label:"Last Month"},{filter:"custom",label:"Custom"}].map(({filter:xe,label:it})=>a.jsx("button",{onClick:()=>y(xe),className:`px-3 py-2 rounded-lg text-xs sm:text-sm transition-colors flex-1 sm:flex-none ${b===xe?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:it},xe))})]}),b==="custom"&&a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[a.jsx(Ns,{label:"From Date",value:k.from,onChange:xe=>S({...k,from:xe})}),a.jsx(Ns,{label:"To Date",value:k.to,onChange:xe=>S({...k,to:xe})})]}),(()=>{const xe=new Date,it=xe.toISOString().split("T")[0],dt=new Date(xe.getTime()-1440*60*1e3).toISOString().split("T")[0],gt=new Date(xe);gt.setDate(xe.getDate()-xe.getDay()),gt.setHours(0,0,0,0);const ft=new Date(gt);ft.setDate(gt.getDate()-7);const q=new Date(gt);q.setDate(gt.getDate()-1);const oe=new Date(xe.getFullYear(),xe.getMonth(),1),ae=new Date(xe.getFullYear(),xe.getMonth()-1,1),se=new Date(xe.getFullYear(),xe.getMonth(),0);let K=s,Y="";if(b==="today")K=s.filter(De=>De.requestDate===it),Y="Today";else if(b==="yesterday")K=s.filter(De=>De.requestDate===dt),Y="Yesterday";else if(b==="thisWeek")K=s.filter(De=>{const Ge=new Date(De.requestDate);return Ge>=gt&&Ge<=xe}),Y="This Week";else if(b==="lastWeek")K=s.filter(De=>{const Ge=new Date(De.requestDate);return Ge>=ft&&Ge<=q}),Y="Last Week";else if(b==="thisMonth")K=s.filter(De=>{const Ge=new Date(De.requestDate);return Ge>=oe&&Ge<=xe}),Y="This Month";else if(b==="lastMonth")K=s.filter(De=>{const Ge=new Date(De.requestDate);return Ge>=ae&&Ge<=se}),Y="Last Month";else if(b==="custom"){const De=new Date(k.from),Ge=new Date(k.to);K=s.filter(Be=>{const qe=new Date(Be.requestDate);return qe>=De&&qe<=Ge}),Y=`${k.from} to ${k.to}`}let le=[],pe="";if(b==="today")new Date(xe.getTime()-2880*60*1e3).toISOString().split("T")[0],le=s.filter(De=>De.requestDate===dt),pe="vs Yesterday";else if(b==="yesterday"){const De=new Date(xe.getTime()-1728e5).toISOString().split("T")[0];le=s.filter(Ge=>Ge.requestDate===De),pe="vs Day Before"}else if(b==="thisWeek"){const De=new Date(gt);De.setDate(gt.getDate()-7);const Ge=new Date(gt);Ge.setDate(gt.getDate()-1),le=s.filter(Be=>{const qe=new Date(Be.requestDate);return qe>=De&&qe<=Ge}),pe="vs Last Week"}else if(b==="lastWeek"){const De=new Date(ft);De.setDate(ft.getDate()-7);const Ge=new Date(ft);Ge.setDate(ft.getDate()-1),le=s.filter(Be=>{const qe=new Date(Be.requestDate);return qe>=De&&qe<=Ge}),pe="vs Week Before"}else if(b==="thisMonth"){const De=xe.getDate(),Ge=new Date(xe.getFullYear(),xe.getMonth()-1,1),Be=new Date(xe.getFullYear(),xe.getMonth()-1,De);le=s.filter(qe=>{const St=new Date(qe.requestDate);return St>=Ge&&St<=Be}),pe=`vs Last Month (Day 1-${De})`}else if(b==="lastMonth"){const De=se.getDate(),Ge=new Date(xe.getFullYear(),xe.getMonth()-2,1),Be=new Date(xe.getFullYear(),xe.getMonth()-2,De);le=s.filter(qe=>{const St=new Date(qe.requestDate);return St>=Ge&&St<=Be}),pe=`vs Month Before (Day 1-${De})`}else if(b==="custom"){const De=new Date(k.from),Ge=new Date(k.to),Be=Math.ceil((Ge.getTime()-De.getTime())/(1e3*60*60*24)),qe=new Date(De);qe.setDate(De.getDate()-Be-1);const St=new Date(De);St.setDate(De.getDate()-1),le=s.filter(ie=>{const fe=new Date(ie.requestDate);return fe>=qe&&fe<=St}),pe="vs Previous Period"}const z={},ce={};tr.forEach(({camelKey:De})=>{z[De]=0,ce[De]=0}),K.forEach(De=>{const Ge=De.status==="delivered"||De.status==="partially-delivered";tr.forEach(({camelKey:Be})=>{const qe=De[Be]||0,St=De[Be+"s"]||0,ie=qe+St;z[Be]+=ie,Ge&&(ce[Be]+=ie)})});const ye={};tr.forEach(({camelKey:De})=>{ye[De]=0}),le.forEach(De=>{tr.forEach(({camelKey:Ge})=>{const Be=De[Ge]||0,qe=De[Ge+"s"]||0;ye[Ge]+=Be+qe})});const $e=[{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-300",solid:"#8b5cf6"},{bg:"bg-pink-100",text:"text-pink-700",border:"border-pink-300",solid:"#ec4899"},{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",solid:"#10b981"},{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300",solid:"#f59e0b"},{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300",solid:"#3b82f6"},{bg:"bg-teal-100",text:"text-teal-700",border:"border-teal-300",solid:"#14b8a6"},{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",solid:"#ef4444"},{bg:"bg-indigo-100",text:"text-indigo-700",border:"border-indigo-300",solid:"#6366f1"}];return a.jsxs("div",{children:[a.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Period:"})," ",Y,"  ",a.jsx("span",{className:"font-medium",children:"Total Requests:"})," ",K.length]}),tr.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(Zt,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No momo types configured yet"})]}):K.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(Zt,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No stock requests for this period"})]}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:tr.map((De,Ge)=>{const Be=z[De.camelKey]||0,qe=ce[De.camelKey]||0,St=ye[De.camelKey]||0,ie=$e[Ge%$e.length];let fe=0,_e="same";St>0?(fe=(Be-St)/St*100,fe>0?_e="up":fe<0&&(_e="down")):Be>0&&(fe=100,_e="up");const nt=Math.max(Be,qe,1),xt=Be/nt*100,ut=qe/nt*100;return a.jsx("div",{className:`${ie.bg} ${ie.border} border-2 rounded-xl p-4 transition-all hover:shadow-lg`,children:a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-10 h-10 ${ie.text} rounded-full flex items-center justify-center bg-white`,children:a.jsx(Zt,{className:"w-5 h-5"})}),a.jsx("div",{className:"text-sm font-bold text-gray-800",children:De.label})]}),St>0&&a.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${_e==="up"?"bg-green-100 text-green-700":_e==="down"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:[_e==="up"&&a.jsx(_i,{className:"w-3 h-3"}),_e==="down"&&a.jsx(Si,{className:"w-3 h-3"}),_e==="same"&&a.jsx(T2,{className:"w-3 h-3"}),Math.abs(fe).toFixed(0),"%"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"bg-white rounded-lg p-2 text-center",children:[a.jsx("div",{className:`text-2xl font-bold ${ie.text}`,children:Be.toLocaleString()}),a.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Requested"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-2 text-center",children:[a.jsx("div",{className:`text-2xl font-bold ${ie.text}`,children:qe.toLocaleString()}),a.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Delivered"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-600",children:"Requested"}),a.jsx("span",{className:`font-semibold ${ie.text}`,children:Be})]}),a.jsx("div",{className:"h-2 bg-white rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${xt}%`,backgroundColor:ie.solid}})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-600",children:"Delivered"}),a.jsx("span",{className:`font-semibold ${ie.text}`,children:qe})]}),a.jsx("div",{className:"h-2 bg-white rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${ut}%`,backgroundColor:ie.solid,opacity:.6}})})]})]}),St>0&&a.jsxs("div",{className:"text-xs text-gray-500 text-center pt-1 border-t border-gray-200",children:[pe,": ",St.toLocaleString()]})]})},De.camelKey)})})]})})()]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-xl text-gray-900",children:[Ot.length," Date",Ot.length!==1?"s":""," with Requests"]}),Ot.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[a.jsx(Zt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No production requests found"})]}):Ot.map(xe=>{const it=Sr[xe],dt=X[xe],gt=new Set(it.map(q=>q.storeName)).size,ft=it.reduce((q,oe)=>(tr.forEach(({camelKey:ae})=>{const se=oe[ae]||0,K=oe[ae+"s"]||0;q[ae]=(q[ae]||0)+se+K}),q),{});return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-200 hover:shadow-md",children:[a.jsxs("button",{onClick:()=>L({...X,[xe]:!dt}),className:"w-full p-4 sm:p-6 text-left flex items-center justify-between gap-4 hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx(Ur,{className:"w-6 h-6 text-purple-600 flex-shrink-0"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 truncate",children:(()=>{const[q,oe,ae]=xe.split("-").map(Number);return new Date(q,oe-1,ae).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})()}),a.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:[it.length," Request",it.length!==1?"s":""," from"," ",gt," Store",gt!==1?"s":""]})]})]}),a.jsx("div",{className:"flex-shrink-0",children:dt?a.jsx(Y6,{className:"w-5 h-5 text-gray-400"}):a.jsx(nf,{className:"w-5 h-5 text-gray-400"})})]}),a.jsx("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6",children:a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-3 sm:p-4",children:[a.jsx("h4",{className:"text-xs sm:text-sm text-gray-700 mb-3",children:"Total Quantities for this Day"}),a.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-2 sm:gap-3",children:[ft.chicken>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-purple-600",children:ft.chicken}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken"})]}),ft.chickenCheese>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-pink-600",children:ft.chickenCheese}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Cheese"})]}),ft.veg>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-green-600",children:ft.veg}),a.jsx("p",{className:"text-xs text-gray-600",children:"Veg"})]}),ft.cheeseCorn>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-orange-600",children:ft.cheeseCorn}),a.jsx("p",{className:"text-xs text-gray-600",children:"Cheese Corn"})]}),ft.paneer>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-blue-600",children:ft.paneer}),a.jsx("p",{className:"text-xs text-gray-600",children:"Paneer"})]}),ft.vegKurkure>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-teal-600",children:ft.vegKurkure}),a.jsx("p",{className:"text-xs text-gray-600",children:"Veg Kurkure"})]}),ft.chickenKurkure>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-red-600",children:ft.chickenKurkure}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Kurkure"})]})]})]})}),dt&&a.jsx("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6 pt-0",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(Zt,{className:"w-5 h-5 text-purple-600"}),"Requests by Store"]}),it.map(q=>{const oe=t===q.id,ae=q.status==="pending";return a.jsxs("div",{id:`request-${q.id}`,className:`
                              relative overflow-hidden rounded-xl transition-all duration-300 transform hover:scale-[1.01]
                              ${oe?"border-4 border-purple-500 bg-gradient-to-br from-purple-50 via-pink-50 to-purple-50 shadow-2xl ring-4 ring-purple-300/50":ae?"border-4 border-yellow-400 bg-gradient-to-br from-yellow-50 via-orange-50 to-yellow-50 shadow-xl":"border-2 border-gray-200 bg-white shadow-lg"}
                            `,children:[ae&&a.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 h-2"}),a.jsxs("div",{className:"p-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`
                                  px-4 py-2 rounded-full font-semibold shadow-md
                                  ${ae?"bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-900":"bg-gradient-to-r from-purple-400 to-pink-400 text-white"}
                                `,children:a.jsxs("span",{className:"text-sm flex items-center gap-2",children:[a.jsx("strong",{children:"Request ID:"})," ",q.id.slice(0,8).toUpperCase()]})}),oe&&a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 rounded-full text-sm font-bold animate-bounce shadow-lg",children:" New Notification"}),ae&&!oe&&a.jsx("div",{className:"bg-gradient-to-r from-red-600 to-orange-600 text-white px-4 py-2 rounded-full text-sm font-bold animate-pulse shadow-lg",children:" ACTION REQUIRED"})]}),a.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[a.jsxs("div",{className:`
                                      px-4 py-3 rounded-xl text-sm font-bold flex items-center gap-2 border-3 shadow-lg
                                      ${ae?"bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-900 border-orange-500":Dr(q.status)}
                                    `,children:[pa(q.status),a.jsx("span",{className:"capitalize text-base",children:q.status.replace("-"," ")})]}),a.jsxs("div",{className:"flex items-center gap-2 text-base font-semibold text-gray-700 bg-white px-4 py-2 rounded-lg shadow-md",children:[a.jsx(eo,{className:"w-5 h-5 flex-shrink-0 text-purple-600"}),a.jsx("span",{className:"truncate",children:q.storeName||"Unknown Store"})]})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-2",children:[It&&q.status==="pending"&&a.jsx("button",{onClick:()=>Nt(q.id,"accepted"),className:"w-full sm:w-auto px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors text-sm font-medium",children:"Accept Request"}),It&&q.status==="accepted"&&a.jsx("button",{onClick:()=>Nt(q.id,"in-preparation"),className:"w-full sm:w-auto px-4 py-2.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 active:bg-purple-800 transition-colors text-sm font-medium",children:"Start Preparation"}),It&&q.status==="in-preparation"&&a.jsx("button",{onClick:()=>Nt(q.id,"prepared"),className:"w-full sm:w-auto px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 active:bg-indigo-800 transition-colors text-sm font-medium",children:"Mark as Prepared"}),It&&q.status==="prepared"&&a.jsx("button",{onClick:()=>Rt(q),className:"w-full sm:w-auto px-4 py-2.5 bg-orange-600 text-white rounded-lg hover:bg-orange-700 active:bg-orange-800 transition-colors text-sm font-medium",children:"Mark as Shipped"}),Br&&(q.status==="shipped"||q.status==="partially-shipped")&&a.jsx("button",{onClick:()=>Nt(q.id,q.status==="partially-shipped"?"partially-delivered":"delivered"),className:"w-full sm:w-auto px-4 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 active:bg-green-800 transition-colors text-sm font-medium",children:"Confirm Delivery"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[a.jsx(tn,{className:"w-4 h-4"}),a.jsxs("span",{children:["Requested by: ",q.requestedByName||q.requestedBy]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 rounded-xl p-4 mb-4 border-2 border-indigo-200 shadow-md",children:[a.jsxs("h5",{className:"text-base font-bold text-indigo-800 mb-4 flex items-center gap-2",children:[a.jsx(Zt,{className:"w-5 h-5"}),"Momos Quantities"]}),a.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-3",children:tr.map(({camelKey:se,label:K})=>{const Y=q[se];return!Y||Y===0?null:a.jsxs("div",{className:"text-center bg-white rounded-lg p-3 shadow-md border-2 border-indigo-200 hover:border-indigo-400 transition-all transform hover:scale-105",children:[a.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:Y}),a.jsx("p",{className:"text-xs font-semibold text-gray-700 mt-1",children:K.replace(" Momos","").replace(" Momo","")})]},se)})})]}),q.kitchenUtilities&&Object.keys(q.kitchenUtilities).length>0&&a.jsxs("div",{className:"bg-gradient-to-br from-purple-100 via-purple-50 to-pink-100 rounded-xl p-5 mb-4 border-2 border-purple-300 shadow-lg",children:[a.jsxs("h5",{className:"text-base font-bold text-purple-900 mb-4 flex items-center gap-2",children:[a.jsx(gU,{className:"w-6 h-6 text-purple-700"}),"Kitchen Utilities"]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:Object.entries(q.kitchenUtilities).map(([se,K])=>a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md border-2 border-purple-200 hover:border-purple-400 transition-all transform hover:scale-105",children:[a.jsxs("p",{className:"text-2xl font-bold text-purple-700 mb-1",children:[K.quantity," ",a.jsx("span",{className:"text-sm font-semibold text-purple-600",children:K.unit})]}),a.jsx("p",{className:"text-sm font-semibold text-gray-800",children:se})]},se))})]}),q.sauces&&Object.keys(q.sauces).length>0&&a.jsxs("div",{className:"bg-gradient-to-br from-pink-100 via-pink-50 to-rose-100 rounded-xl p-5 mb-4 border-2 border-pink-300 shadow-lg",children:[a.jsxs("h5",{className:"text-base font-bold text-pink-900 mb-4 flex items-center gap-2",children:[a.jsx(Z9,{className:"w-6 h-6 text-pink-700"}),"Sauces Requested"]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:Object.keys(q.sauces).map(se=>a.jsx("span",{className:"px-5 py-3 bg-gradient-to-r from-pink-400 to-rose-400 text-white rounded-xl text-base font-bold shadow-lg hover:shadow-xl transform hover:scale-110 transition-all",children:se},se))})]}),q.utilities&&Object.keys(q.utilities).length>0&&a.jsxs("div",{className:"bg-gradient-to-br from-indigo-100 via-indigo-50 to-blue-100 rounded-xl p-5 mb-4 border-2 border-indigo-300 shadow-lg",children:[a.jsxs("h5",{className:"text-base font-bold text-indigo-900 mb-4 flex items-center gap-2",children:[a.jsx(w9,{className:"w-6 h-6 text-indigo-700"}),"Utilities"]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.entries(q.utilities).map(([se,K])=>a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md border-2 border-indigo-200 hover:border-indigo-400 transition-all transform hover:scale-105",children:[a.jsxs("p",{className:"text-2xl font-bold text-indigo-700 mb-1",children:[K," ",a.jsx("span",{className:"text-sm font-semibold text-indigo-600",children:"pcs"})]}),a.jsx("p",{className:"text-sm font-semibold text-gray-800",children:se})]},se))})]}),q.notes&&a.jsx("div",{className:"bg-gradient-to-r from-blue-100 to-cyan-100 border-l-4 border-blue-500 p-4 rounded-lg mb-4 shadow-md",children:a.jsxs("p",{className:"text-base text-gray-900 font-semibold",children:[a.jsx("span",{className:"text-blue-700",children:" Notes:"})," ",q.notes]})}),a.jsx("div",{className:"pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-gray-500",children:[a.jsxs("div",{children:["Created: ",new Date(q.createdAt).toLocaleString()]}),q.acceptedAt&&a.jsxs("div",{children:["Accepted: ",new Date(q.acceptedAt).toLocaleString()]}),q.preparedAt&&a.jsxs("div",{children:["Prepared: ",new Date(q.preparedAt).toLocaleString()]}),q.shippedAt&&a.jsxs("div",{children:["Shipped: ",new Date(q.shippedAt).toLocaleString()]}),q.deliveredAt&&a.jsxs("div",{children:["Delivered: ",new Date(q.deliveredAt).toLocaleString()]})]})})]})]},q.id)})]})})]},xe)})]}),I&&a.jsx(W2,{context:e,selectedStoreId:r||e.user?.storeId,onClose:()=>G(!1),isProductionHouse:!1,isStoreFinishedProducts:!0}),Te&&a.jsx($le,{storeId:r||e.user?.storeId||"",accessToken:e.user?.accessToken||"",thresholds:ge,onClose:()=>ue(!1),onSave:xe=>{Fe(xe),ue(!1)}}),Kt&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Plate Configuration"}),a.jsx("p",{className:"text-sm text-blue-100",children:"Set how many momos are in each plate"})]}),a.jsx("button",{onClick:()=>Rr(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(ea,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6 bg-blue-50 border-b-2 border-blue-200",children:[a.jsx("h3",{className:"text-gray-900 font-semibold mb-2",children:"How it works:"}),a.jsxs("p",{className:"text-sm text-gray-700",children:["Stock will be displayed as both pieces and plates. For example, if you have 170 momos and each plate contains 6 momos, it will show as ",a.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded",children:"170 pcs / 28 plates"}),"."]})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("label",{className:"text-gray-900 font-semibold mb-3 block",children:"Momos Per Plate"}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-300 rounded-xl p-4",children:[a.jsx("input",{type:"number",min:"1",max:"20",value:Ct,onChange:xe=>{const it=parseInt(xe.target.value)||6;yr(it),localStorage.setItem("momosPerPlate",it.toString())},className:"w-full px-4 py-3 border-2 border-blue-400 rounded-lg focus:border-blue-600 focus:outline-none text-center text-2xl font-bold text-blue-900"}),a.jsx("p",{className:"text-center text-sm text-blue-700 mt-2",children:"pieces per plate"})]})]}),a.jsx("div",{className:"p-4 bg-gray-50 rounded-b-2xl flex justify-end",children:a.jsx("button",{onClick:()=>Rr(!1),className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg",children:"Done"})})]})}),J&&rt&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[a.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-pink-500 p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(Zy,{className:"w-6 h-6"}),"Confirm Shipping Details"]}),a.jsx("p",{className:"text-orange-100 mt-1",children:"Verify quantities and add notes for any changes"})]}),a.jsx("button",{onClick:()=>Ze(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(ea,{className:"w-6 h-6"})})]})}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-220px)]",children:a.jsxs("div",{className:"space-y-6",children:[Object.entries(ze).filter(([xe])=>!xe.startsWith("kitchenUtility_")&&!xe.startsWith("utility_")).length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-3",children:"Momos"}),a.jsx("div",{className:"space-y-3",children:Object.entries(ze).filter(([xe])=>!xe.startsWith("kitchenUtility_")&&!xe.startsWith("utility_")).map(([xe,it])=>{const dt=rt[xe]||0,gt=xe.replace(/([A-Z])/g," $1").replace(/^./,q=>q.toUpperCase()),ft=it!==dt;return a.jsx("div",{className:`border rounded-lg p-4 ${ft?"border-amber-300 bg-amber-50":"border-gray-200"}`,children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[gt,a.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(Requested: ",dt,")"]})]}),a.jsx("input",{type:"number",min:"0",value:it,onChange:q=>Re({...ze,[xe]:parseInt(q.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),ft&&a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-amber-700 mb-1",children:"Reason for difference *"}),a.jsx("input",{type:"text",value:Ce[xe]||"",onChange:q=>Se({...Ce,[xe]:q.target.value}),placeholder:"e.g., Insufficient stock",className:"w-full px-3 py-2 border border-amber-300 rounded-lg bg-white"})]})]})},xe)})})]}),Object.entries(ze).filter(([xe])=>xe.startsWith("kitchenUtility_")).length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-3",children:"Kitchen Utilities"}),a.jsx("div",{className:"space-y-3",children:Object.entries(ze).filter(([xe])=>xe.startsWith("kitchenUtility_")).map(([xe,it])=>{const dt=xe.replace("kitchenUtility_",""),gt=rt.kitchenUtilities?.[dt]?.quantity||0,ft=rt.kitchenUtilities?.[dt]?.unit||"",q=it!==gt;return a.jsx("div",{className:`border rounded-lg p-4 ${q?"border-amber-300 bg-amber-50":"border-gray-200"}`,children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[dt,a.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(Requested: ",gt," ",ft,")"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",min:"0",value:it,onChange:oe=>Re({...ze,[xe]:parseFloat(oe.target.value)||0}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"}),a.jsx("span",{className:"px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-700",children:ft})]})]}),q&&a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-amber-700 mb-1",children:"Reason for difference *"}),a.jsx("input",{type:"text",value:Ce[xe]||"",onChange:oe=>Se({...Ce,[xe]:oe.target.value}),placeholder:"e.g., Insufficient stock",className:"w-full px-3 py-2 border border-amber-300 rounded-lg bg-white"})]})]})},xe)})})]}),Object.entries(ze).filter(([xe])=>xe.startsWith("utility_")).length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-3",children:"Utilities"}),a.jsx("div",{className:"space-y-3",children:Object.entries(ze).filter(([xe])=>xe.startsWith("utility_")).map(([xe,it])=>{const dt=xe.replace("utility_",""),gt=rt.utilities?.[dt]||0,ft=it!==gt;return a.jsx("div",{className:`border rounded-lg p-4 ${ft?"border-amber-300 bg-amber-50":"border-gray-200"}`,children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[dt,a.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(Requested: ",gt," pcs)"]})]}),a.jsx("input",{type:"number",min:"0",value:it,onChange:q=>Re({...ze,[xe]:parseInt(q.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),ft&&a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-amber-700 mb-1",children:"Reason for difference *"}),a.jsx("input",{type:"text",value:Ce[xe]||"",onChange:q=>Se({...Ce,[xe]:q.target.value}),placeholder:"e.g., Insufficient stock",className:"w-full px-3 py-2 border border-amber-300 rounded-lg bg-white"})]})]})},xe)})})]}),a.jsx("div",{className:"border-t border-gray-200 pt-4",children:a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:Qe,onChange:xe=>kt(xe.target.checked),className:"mt-1 w-5 h-5 text-orange-600 rounded border-gray-300"}),a.jsxs("span",{className:"text-sm text-gray-700",children:[a.jsx("strong",{className:"text-gray-900",children:"I confirm that I am responsible for shipping these items"})," and have verified the quantities above. I understand that any discrepancies must be documented with a valid reason."]})]})})]})}),a.jsxs("div",{className:"p-4 bg-gray-100 border-t flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>Ze(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-medium",children:"Cancel"}),a.jsx("button",{onClick:Pt,disabled:!Qe,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-pink-500 text-white rounded-lg hover:from-orange-600 hover:to-pink-600 transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm Shipping"})]})]})})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var _$=1252,Ble=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Yk={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Xk=function(e){Ble.indexOf(e)!=-1&&(_$=Yk[0]=e)};function Ule(){Xk(1252)}var Ii=function(e){Xk(e)};function E$(){Ii(1200),Ule()}function _P(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function Hle(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function C$(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Ph=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Hle(e.slice(2)):t==254&&r==255?C$(e.slice(2)):t==65279?e.slice(1):e},$m=function(t){return String.fromCharCode(t)},EP=function(t){return String.fromCharCode(t)},V0,wl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function CP(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0,d=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,n=e.charCodeAt(u++),o=(r&3)<<4|n>>4,s=e.charCodeAt(u++),l=(n&15)<<2|s>>6,d=s&63,isNaN(n)?l=d=64:isNaN(s)&&(d=64),t+=wl.charAt(i)+wl.charAt(o)+wl.charAt(l)+wl.charAt(d);return t}function qs(e){var t="",r=0,n=0,s=0,i=0,o=0,l=0,d=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=wl.indexOf(e.charAt(u++)),o=wl.indexOf(e.charAt(u++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=wl.indexOf(e.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),d=wl.indexOf(e.charAt(u++)),s=(l&3)<<6|d,d!==64&&(t+=String.fromCharCode(s));return t}var Hr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Bc=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function Cl(e){return Hr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function AP(e){return Hr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Pi=function(t){return Hr?Bc(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Uc(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Jk(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return Jk(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var yl=Hr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Bc(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function qle(e){for(var t=[],r=0,n=e.length+250,s=Cl(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>n&&(t.push(s.slice(0,r)),r=0,s=Cl(65535),n=65530)}return t.push(s.slice(0,r)),yl(t)}var us=/\u0000/g,Ih=/[\u0001-\u0006]/g;function qd(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Mi(e,t){var r=""+e;return r.length>=t?r:$a("0",t-r.length)+r}function Qk(e,t){var r=""+e;return r.length>=t?r:$a(" ",t-r.length)+r}function lg(e,t){var r=""+e;return r.length>=t?r:r+$a(" ",t-r.length)}function Wle(e,t){var r=""+Math.round(e);return r.length>=t?r:$a("0",t-r.length)+r}function zle(e,t){var r=""+e;return r.length>=t?r:$a("0",t-r.length)+r}var TP=Math.pow(2,32);function Nd(e,t){if(e>TP||e<-TP)return Wle(e,t);var r=Math.round(e);return zle(r,t)}function cg(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var DP=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],uj=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Kle(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Cr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},OP={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Vle={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function dg(e,t,r){for(var n=e<0?-1:1,s=e*n,i=0,o=1,l=0,d=1,u=0,f=0,m=Math.floor(s);u<t&&(m=Math.floor(s),l=m*o+i,f=m*u+d,!(s-m<5e-8));)s=1/(s-m),i=o,o=l,d=u,u=f;if(f>t&&(u>t?(f=d,l=i):(f=u,l=o)),!r)return[0,n*l,f];var p=Math.floor(n*l/f);return[p,n*l-p*f,f]}function gc(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),i=0,o=[],l={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var d=new Date(1900,0,1);d.setDate(d.getDate()+n-1),o=[d.getFullYear(),d.getMonth()+1,d.getDate()],i=d.getDay(),n<60&&(i=(i+6)%7),r&&(i=Zle(d,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var A$=new Date(1899,11,31,0,0,0),Gle=A$.getTime(),Yle=new Date(1900,2,1,0,0,0);function T$(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Yle&&(r+=1440*60*1e3),(r-(Gle+(e.getTimezoneOffset()-A$.getTimezoneOffset())*6e4))/(1440*60*1e3)}function Zk(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Xle(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Jle(e){var t=e<0?12:11,r=Zk(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Qle(e){var t=Zk(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function G0(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Jle(e):t===10?r=e.toFixed(10).substr(0,12):r=Qle(e),Zk(Xle(r.toUpperCase()))}function Dc(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):G0(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return ui(14,T$(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Zle(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function ece(e,t,r,n){var s="",i=0,o=0,l=r.y,d,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:d=l%100,u=2;break;default:d=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:d=r.m,u=t.length;break;case 3:return uj[r.m-1][1];case 5:return uj[r.m-1][0];default:return uj[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:d=r.d,u=t.length;break;case 3:return DP[r.q][0];default:return DP[r.q][1]}break;case 104:switch(t.length){case 1:case 2:d=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:d=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:d=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Mi(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=Mi(i,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":d=r.D*24+r.H;break;case"[m]":case"[mm]":d=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":d=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:d=l,u=1;break}var f=u>0?Mi(d,u):"";return f}function jl(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var D$=/%/g;function tce(e,t,r){var n=t.replace(D$,""),s=t.length-n.length;return Fo(e,n,r*Math.pow(10,2*s))+$a("%",s)}function rce(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Fo(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function O$(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+O$(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,d,u,f){return d+u+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var P$=/# (\?+)( ?)\/( ?)(\d+)/;function ace(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),i=Math.floor(s/n),o=s-i*n,l=n;return r+(i===0?"":""+i)+" "+(o===0?$a(" ",e[1].length+1+e[4].length):Qk(o,e[1].length)+e[2]+"/"+e[3]+Mi(l,e[4].length))}function nce(e,t,r){return r+(t===0?"":""+t)+$a(" ",e[1].length+2+e[4].length)}var I$=/^#*0*\.([0#]+)/,M$=/\).*[0#]/,R$=/\(###\) ###\\?-####/;function ns(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function PP(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function IP(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function sce(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function ice(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function ai(e,t,r){if(e.charCodeAt(0)===40&&!t.match(M$)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ai("n",n,r):"("+ai("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return rce(e,t,r);if(t.indexOf("%")!==-1)return tce(e,t,r);if(t.indexOf("E")!==-1)return O$(t,r);if(t.charCodeAt(0)===36)return"$"+ai(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,d=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Nd(d,t.length);if(t.match(/^[#?]+$/))return s=Nd(r,0),s==="0"&&(s=""),s.length>t.length?s:ns(t.substr(0,t.length-s.length))+s;if(i=t.match(P$))return ace(i,d,u);if(t.match(/^#+0+$/))return u+Nd(d,t.length-t.indexOf("0"));if(i=t.match(I$))return s=PP(r,i[1].length).replace(/^([^\.]+)$/,"$1."+ns(i[1])).replace(/\.$/,"."+ns(i[1])).replace(/\.(\d*)$/,function(b,y){return"."+y+$a("0",ns(i[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+PP(d,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+jl(Nd(d,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ai(e,t,-r):jl(""+(Math.floor(r)+sce(r,i[1].length)))+"."+Mi(IP(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return ai(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=qd(ai(e,t.replace(/[\\-]/g,""),r)),o=0,qd(qd(t.replace(/\\/g,"")).replace(/[0#]/g,function(b){return o<s.length?s.charAt(o++):b==="0"?"0":""}));if(t.match(R$))return s=ai(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=dg(d,Math.pow(10,o)-1,!1),s=""+u,f=Fo("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=lg(l[2],o),f.length<i[4].length&&(f=ns(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=dg(d,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Qk(l[1],o)+i[2]+"/"+i[3]+lg(l[2],o):$a(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=Nd(r,0),t.length<=s.length?s:ns(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var m=t.indexOf(".")-o,p=t.length-s.length-m;return ns(t.substr(0,m)+s+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=IP(r,i[1].length),r<0?"-"+ai(e,t,-r):jl(ice(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Mi(0,3-b.length):"")+b})+"."+Mi(o,i[1].length);switch(t){case"###,##0.00":return ai(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=jl(Nd(d,0));return g!=="0"?u+g:"";case"###,###.00":return ai(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ai(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function oce(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Fo(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function lce(e,t,r){var n=t.replace(D$,""),s=t.length-n.length;return Fo(e,n,r*Math.pow(10,2*s))+$a("%",s)}function F$(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+F$(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,d,u,f){return d+u+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Ki(e,t,r){if(e.charCodeAt(0)===40&&!t.match(M$)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ki("n",n,r):"("+Ki("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return oce(e,t,r);if(t.indexOf("%")!==-1)return lce(e,t,r);if(t.indexOf("E")!==-1)return F$(t,r);if(t.charCodeAt(0)===36)return"$"+Ki(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,d=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Mi(d,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:ns(t.substr(0,t.length-s.length))+s;if(i=t.match(P$))return nce(i,d,u);if(t.match(/^#+0+$/))return u+Mi(d,t.length-t.indexOf("0"));if(i=t.match(I$))return s=(""+r).replace(/^([^\.]+)$/,"$1."+ns(i[1])).replace(/\.$/,"."+ns(i[1])),s=s.replace(/\.(\d*)$/,function(b,y){return"."+y+$a("0",ns(i[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+d).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+jl(""+d);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ki(e,t,-r):jl(""+r)+"."+$a("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Ki(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=qd(Ki(e,t.replace(/[\\-]/g,""),r)),o=0,qd(qd(t.replace(/\\/g,"")).replace(/[0#]/g,function(b){return o<s.length?s.charAt(o++):b==="0"?"0":""}));if(t.match(R$))return s=Ki(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=dg(d,Math.pow(10,o)-1,!1),s=""+u,f=Fo("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=lg(l[2],o),f.length<i[4].length&&(f=ns(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=dg(d,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Qk(l[1],o)+i[2]+"/"+i[3]+lg(l[2],o):$a(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:ns(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var m=t.indexOf(".")-o,p=t.length-s.length-m;return ns(t.substr(0,m)+s+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Ki(e,t,-r):jl(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Mi(0,3-b.length):"")+b})+"."+Mi(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var g=jl(""+d);return g!=="0"?u+g:"";default:if(t.match(/\.[0#?]*$/))return Ki(e,t.slice(0,t.lastIndexOf(".")),r)+ns(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Fo(e,t,r){return(r|0)===r?Ki(e,t,r):ai(e,t,r)}function cce(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var $$=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Ru(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":cg(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match($$))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function dce(e,t,r,n){for(var s=[],i="",o=0,l="",d="t",u,f,m,p="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!cg(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(m=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(m);s[s.length]={t:"t",v:i},++o;break;case"\\":var g=e.charAt(++o),b=g==="("||g===")"?g:"t";s[s.length]={t:b,v:g},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=gc(t,r,e.charAt(o+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},d=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=gc(t,r),u==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&d.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=p),s[s.length]={t:l,v:i},d=l;break;case"A":case"a":case"":var y={t:l,v:l};if(u==null&&(u=gc(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",p="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",o+=5,p="h"):e.substr(o,5).toUpperCase()==="/"?(u!=null&&(y.v=u.H>=12?"":""),y.t="T",o+=5,p="h"):(y.t="t",++o),u==null&&y.t==="T")return"";s[s.length]=y,d=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match($$)){if(u==null&&(u=gc(t,r),u==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},d=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Ru(e)||(s[s.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},d=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var v=0,k=0,S;for(o=s.length-1,d="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=p,d="h",v<1&&(v=1);break;case"s":(S=s[o].v.match(/\.0+$/))&&(k=Math.max(k,S[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":d=s[o].t;break;case"m":d==="s"&&(s[o].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[o].v.match(/[Hh]/)&&(v=1),v<2&&s[o].v.match(/[Mm]/)&&(v=2),v<3&&s[o].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var w="",A;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=ece(s[o].t.charCodeAt(0),s[o].v,u,k),s[o].t="t";break;case"n":case"?":for(A=o+1;s[A]!=null&&((l=s[A].t)==="?"||l==="D"||(l===" "||l==="t")&&s[A+1]!=null&&(s[A+1].t==="?"||s[A+1].t==="t"&&s[A+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[A].v==="/"||s[A].v===" "&&s[A+1]!=null&&s[A+1].t=="?"));)s[o].v+=s[A].v,s[A]={v:"",t:";"},++A;w+=s[o].v,o=A-1;break;case"G":s[o].t="t",s[o].v=Dc(t,r);break}var C="",N,E;if(w.length>0){w.charCodeAt(0)==40?(N=t<0&&w.charCodeAt(0)===45?-t:t,E=Fo("n",w,N)):(N=t<0&&n>1?-t:t,E=Fo("n",w,N),N<0&&s[0]&&s[0].t=="t"&&(E=E.substr(1),s[0].v="-"+s[0].v)),A=E.length-1;var _=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){_=o;break}var O=s.length;if(_===s.length&&E.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(A>=s[o].v.length-1?(A-=s[o].v.length,s[o].v=E.substr(A+1,s[o].v.length)):A<0?s[o].v="":(s[o].v=E.substr(0,A+1),A=-1),s[o].t="t",O=o);A>=0&&O<s.length&&(s[O].v=E.substr(0,A+1)+s[O].v)}else if(_!==s.length&&E.indexOf("E")===-1){for(A=E.indexOf(".")-1,o=_;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(f=s[o].v.indexOf(".")>-1&&o===_?s[o].v.indexOf(".")-1:s[o].v.length-1,C=s[o].v.substr(f+1);f>=0;--f)A>=0&&(s[o].v.charAt(f)==="0"||s[o].v.charAt(f)==="#")&&(C=E.charAt(A--)+C);s[o].v=C,s[o].t="t",O=o}for(A>=0&&O<s.length&&(s[O].v=E.substr(0,A+1)+s[O].v),A=E.indexOf(".")+1,o=_;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==_)){for(f=s[o].v.indexOf(".")>-1&&o===_?s[o].v.indexOf(".")+1:0,C=s[o].v.substr(0,f);f<s[o].v.length;++f)A<E.length&&(C+=E.charAt(A++));s[o].v=C,s[o].t="t",O=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(N=n>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=Fo(s[o].t,s[o].v,N),s[o].t="t");var B="";for(o=0;o!==s.length;++o)s[o]!=null&&(B+=s[o].v);return B}var MP=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function RP(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function uce(e,t){var r=cce(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(MP),l=r[1].match(MP);return RP(t,o)?[n,r[0]]:RP(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,i]}function ui(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Cr)[e],n==null&&(n=r.table&&r.table[OP[e]]||Cr[OP[e]]),n==null&&(n=Vle[e]||"General");break}if(cg(n,0))return Dc(t,r);t instanceof Date&&(t=T$(t,r.date1904));var s=uce(n,t);if(cg(s[1]))return Dc(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return dce(s[1],t,r,s[0])}function bc(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Cr[r]==null){t<0&&(t=r);continue}if(Cr[r]==e){t=r;break}}t<0&&(t=391)}return Cr[t]=e,t}function L$(){Cr=Kle()}var hce={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},B$=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function fce(e){var t=typeof e=="number"?Cr[e]:e;return t=t.replace(B$,"(\\d+)"),new RegExp("^"+t+"$")}function mce(e,t,r){var n=-1,s=-1,i=-1,o=-1,l=-1,d=-1;(t.match(B$)||[]).forEach(function(m,p){var g=parseInt(r[p+1],10);switch(m.toLowerCase().charAt(0)){case"y":n=g;break;case"d":i=g;break;case"h":o=g;break;case"s":d=g;break;case"m":o>=0?l=g:s=g;break}}),d>=0&&l==-1&&s>=0&&(l=s,s=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var f=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2);return o==-1&&l==-1&&d==-1?u:n==-1&&s==-1&&i==-1?f:u+"T"+f}var pce=(function(){var e={};e.version="1.2.0";function t(){for(var E=0,_=new Array(256),O=0;O!=256;++O)E=O,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,_[O]=E;return typeof Int32Array<"u"?new Int32Array(_):_}var r=t();function n(E){var _=0,O=0,B=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)F[B]=E[B];for(B=0;B!=256;++B)for(O=E[B],_=256+B;_<4096;_+=256)O=F[_]=O>>>8^E[O&255];var D=[];for(B=1;B!=16;++B)D[B-1]=typeof Int32Array<"u"?F.subarray(B*256,B*256+256):F.slice(B*256,B*256+256);return D}var s=n(r),i=s[0],o=s[1],l=s[2],d=s[3],u=s[4],f=s[5],m=s[6],p=s[7],g=s[8],b=s[9],y=s[10],v=s[11],k=s[12],S=s[13],w=s[14];function A(E,_){for(var O=_^-1,B=0,F=E.length;B<F;)O=O>>>8^r[(O^E.charCodeAt(B++))&255];return~O}function C(E,_){for(var O=_^-1,B=E.length-15,F=0;F<B;)O=w[E[F++]^O&255]^S[E[F++]^O>>8&255]^k[E[F++]^O>>16&255]^v[E[F++]^O>>>24]^y[E[F++]]^b[E[F++]]^g[E[F++]]^p[E[F++]]^m[E[F++]]^f[E[F++]]^u[E[F++]]^d[E[F++]]^l[E[F++]]^o[E[F++]]^i[E[F++]]^r[E[F++]];for(B+=15;F<B;)O=O>>>8^r[(O^E[F++])&255];return~O}function N(E,_){for(var O=_^-1,B=0,F=E.length,D=0,H=0;B<F;)D=E.charCodeAt(B++),D<128?O=O>>>8^r[(O^D)&255]:D<2048?(O=O>>>8^r[(O^(192|D>>6&31))&255],O=O>>>8^r[(O^(128|D&63))&255]):D>=55296&&D<57344?(D=(D&1023)+64,H=E.charCodeAt(B++)&1023,O=O>>>8^r[(O^(240|D>>8&7))&255],O=O>>>8^r[(O^(128|D>>2&63))&255],O=O>>>8^r[(O^(128|H>>6&15|(D&3)<<4))&255],O=O>>>8^r[(O^(128|H&63))&255]):(O=O>>>8^r[(O^(224|D>>12&15))&255],O=O>>>8^r[(O^(128|D>>6&63))&255],O=O>>>8^r[(O^(128|D&63))&255]);return~O}return e.table=r,e.bstr=A,e.buf=C,e.str=N,e})(),Vr=(function(){var t={};t.version="1.2.1";function r(q,oe){for(var ae=q.split("/"),se=oe.split("/"),K=0,Y=0,le=Math.min(ae.length,se.length);K<le;++K){if(Y=ae[K].length-se[K].length)return Y;if(ae[K]!=se[K])return ae[K]<se[K]?-1:1}return ae.length-se.length}function n(q){if(q.charAt(q.length-1)=="/")return q.slice(0,-1).indexOf("/")===-1?q:n(q.slice(0,-1));var oe=q.lastIndexOf("/");return oe===-1?q:q.slice(0,oe+1)}function s(q){if(q.charAt(q.length-1)=="/")return s(q.slice(0,-1));var oe=q.lastIndexOf("/");return oe===-1?q:q.slice(oe+1)}function i(q,oe){typeof oe=="string"&&(oe=new Date(oe));var ae=oe.getHours();ae=ae<<6|oe.getMinutes(),ae=ae<<5|oe.getSeconds()>>>1,q.write_shift(2,ae);var se=oe.getFullYear()-1980;se=se<<4|oe.getMonth()+1,se=se<<5|oe.getDate(),q.write_shift(2,se)}function o(q){var oe=q.read_shift(2)&65535,ae=q.read_shift(2)&65535,se=new Date,K=ae&31;ae>>>=5;var Y=ae&15;ae>>>=4,se.setMilliseconds(0),se.setFullYear(ae+1980),se.setMonth(Y-1),se.setDate(K);var le=oe&31;oe>>>=5;var pe=oe&63;return oe>>>=6,se.setHours(oe),se.setMinutes(pe),se.setSeconds(le<<1),se}function l(q){On(q,0);for(var oe={},ae=0;q.l<=q.length-4;){var se=q.read_shift(2),K=q.read_shift(2),Y=q.l+K,le={};switch(se){case 21589:ae=q.read_shift(1),ae&1&&(le.mtime=q.read_shift(4)),K>5&&(ae&2&&(le.atime=q.read_shift(4)),ae&4&&(le.ctime=q.read_shift(4))),le.mtime&&(le.mt=new Date(le.mtime*1e3));break}q.l=Y,oe[se]=le}return oe}var d;function u(){return d||(d={})}function f(q,oe){if(q[0]==80&&q[1]==75)return Ke(q,oe);if((q[0]|32)==109&&(q[1]|32)==105)return Sr(q,oe);if(q.length<512)throw new Error("CFB file size "+q.length+" < 512");var ae=3,se=512,K=0,Y=0,le=0,pe=0,z=0,ce=[],ye=q.slice(0,512);On(ye,0);var $e=m(ye);switch(ae=$e[0],ae){case 3:se=512;break;case 4:se=4096;break;case 0:if($e[1]==0)return Ke(q,oe);default:throw new Error("Major Version: Expected 3 or 4 saw "+ae)}se!==512&&(ye=q.slice(0,se),On(ye,28));var De=q.slice(0,se);p(ye,ae);var Ge=ye.read_shift(4,"i");if(ae===3&&Ge!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ge);ye.l+=4,le=ye.read_shift(4,"i"),ye.l+=4,ye.chk("00100000","Mini Stream Cutoff Size: "),pe=ye.read_shift(4,"i"),K=ye.read_shift(4,"i"),z=ye.read_shift(4,"i"),Y=ye.read_shift(4,"i");for(var Be=-1,qe=0;qe<109&&(Be=ye.read_shift(4,"i"),!(Be<0));++qe)ce[qe]=Be;var St=g(q,se);v(z,Y,St,se,ce);var ie=S(St,le,ce,se);ie[le].name="!Directory",K>0&&pe!==H&&(ie[pe].name="!MiniFAT"),ie[ce[0]].name="!FAT",ie.fat_addrs=ce,ie.ssz=se;var fe={},_e=[],nt=[],xt=[];w(le,ie,St,_e,K,fe,nt,pe),b(nt,xt,_e),_e.shift();var ut={FileIndex:nt,FullPaths:xt};return oe&&oe.raw&&(ut.raw={header:De,sectors:St}),ut}function m(q){if(q[q.l]==80&&q[q.l+1]==75)return[0,0];q.chk(ne,"Header Signature: "),q.l+=16;var oe=q.read_shift(2,"u");return[q.read_shift(2,"u"),oe]}function p(q,oe){var ae=9;switch(q.l+=2,ae=q.read_shift(2)){case 9:if(oe!=3)throw new Error("Sector Shift: Expected 9 saw "+ae);break;case 12:if(oe!=4)throw new Error("Sector Shift: Expected 12 saw "+ae);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ae)}q.chk("0600","Mini Sector Shift: "),q.chk("000000000000","Reserved: ")}function g(q,oe){for(var ae=Math.ceil(q.length/oe)-1,se=[],K=1;K<ae;++K)se[K-1]=q.slice(K*oe,(K+1)*oe);return se[ae-1]=q.slice(ae*oe),se}function b(q,oe,ae){for(var se=0,K=0,Y=0,le=0,pe=0,z=ae.length,ce=[],ye=[];se<z;++se)ce[se]=ye[se]=se,oe[se]=ae[se];for(;pe<ye.length;++pe)se=ye[pe],K=q[se].L,Y=q[se].R,le=q[se].C,ce[se]===se&&(K!==-1&&ce[K]!==K&&(ce[se]=ce[K]),Y!==-1&&ce[Y]!==Y&&(ce[se]=ce[Y])),le!==-1&&(ce[le]=se),K!==-1&&se!=ce[se]&&(ce[K]=ce[se],ye.lastIndexOf(K)<pe&&ye.push(K)),Y!==-1&&se!=ce[se]&&(ce[Y]=ce[se],ye.lastIndexOf(Y)<pe&&ye.push(Y));for(se=1;se<z;++se)ce[se]===se&&(Y!==-1&&ce[Y]!==Y?ce[se]=ce[Y]:K!==-1&&ce[K]!==K&&(ce[se]=ce[K]));for(se=1;se<z;++se)if(q[se].type!==0){if(pe=se,pe!=ce[pe])do pe=ce[pe],oe[se]=oe[pe]+"/"+oe[se];while(pe!==0&&ce[pe]!==-1&&pe!=ce[pe]);ce[se]=-1}for(oe[0]+="/",se=1;se<z;++se)q[se].type!==2&&(oe[se]+="/")}function y(q,oe,ae){for(var se=q.start,K=q.size,Y=[],le=se;ae&&K>0&&le>=0;)Y.push(oe.slice(le*D,le*D+D)),K-=D,le=lc(ae,le*4);return Y.length===0?un(0):yl(Y).slice(0,q.size)}function v(q,oe,ae,se,K){var Y=H;if(q===H){if(oe!==0)throw new Error("DIFAT chain shorter than expected")}else if(q!==-1){var le=ae[q],pe=(se>>>2)-1;if(!le)return;for(var z=0;z<pe&&(Y=lc(le,z*4))!==H;++z)K.push(Y);v(lc(le,se-4),oe-1,ae,se,K)}}function k(q,oe,ae,se,K){var Y=[],le=[];K||(K=[]);var pe=se-1,z=0,ce=0;for(z=oe;z>=0;){K[z]=!0,Y[Y.length]=z,le.push(q[z]);var ye=ae[Math.floor(z*4/se)];if(ce=z*4&pe,se<4+ce)throw new Error("FAT boundary crossed: "+z+" 4 "+se);if(!q[ye])break;z=lc(q[ye],ce)}return{nodes:Y,data:KP([le])}}function S(q,oe,ae,se){var K=q.length,Y=[],le=[],pe=[],z=[],ce=se-1,ye=0,$e=0,De=0,Ge=0;for(ye=0;ye<K;++ye)if(pe=[],De=ye+oe,De>=K&&(De-=K),!le[De]){z=[];var Be=[];for($e=De;$e>=0;){Be[$e]=!0,le[$e]=!0,pe[pe.length]=$e,z.push(q[$e]);var qe=ae[Math.floor($e*4/se)];if(Ge=$e*4&ce,se<4+Ge)throw new Error("FAT boundary crossed: "+$e+" 4 "+se);if(!q[qe]||($e=lc(q[qe],Ge),Be[$e]))break}Y[De]={nodes:pe,data:KP([z])}}return Y}function w(q,oe,ae,se,K,Y,le,pe){for(var z=0,ce=se.length?2:0,ye=oe[q].data,$e=0,De=0,Ge;$e<ye.length;$e+=128){var Be=ye.slice($e,$e+128);On(Be,64),De=Be.read_shift(2),Ge=nS(Be,0,De-ce),se.push(Ge);var qe={name:Ge,type:Be.read_shift(1),color:Be.read_shift(1),L:Be.read_shift(4,"i"),R:Be.read_shift(4,"i"),C:Be.read_shift(4,"i"),clsid:Be.read_shift(16),state:Be.read_shift(4,"i"),start:0,size:0},St=Be.read_shift(2)+Be.read_shift(2)+Be.read_shift(2)+Be.read_shift(2);St!==0&&(qe.ct=A(Be,Be.l-8));var ie=Be.read_shift(2)+Be.read_shift(2)+Be.read_shift(2)+Be.read_shift(2);ie!==0&&(qe.mt=A(Be,Be.l-8)),qe.start=Be.read_shift(4,"i"),qe.size=Be.read_shift(4,"i"),qe.size<0&&qe.start<0&&(qe.size=qe.type=0,qe.start=H,qe.name=""),qe.type===5?(z=qe.start,K>0&&z!==H&&(oe[z].name="!StreamData")):qe.size>=4096?(qe.storage="fat",oe[qe.start]===void 0&&(oe[qe.start]=k(ae,qe.start,oe.fat_addrs,oe.ssz)),oe[qe.start].name=qe.name,qe.content=oe[qe.start].data.slice(0,qe.size)):(qe.storage="minifat",qe.size<0?qe.size=0:z!==H&&qe.start!==H&&oe[z]&&(qe.content=y(qe,oe[z].data,(oe[pe]||{}).data))),qe.content&&On(qe.content,0),Y[Ge]=qe,le.push(qe)}}function A(q,oe){return new Date((Rs(q,oe+4)/1e7*Math.pow(2,32)+Rs(q,oe)/1e7-11644473600)*1e3)}function C(q,oe){return u(),f(d.readFileSync(q),oe)}function N(q,oe){var ae=oe&&oe.type;switch(ae||Hr&&Buffer.isBuffer(q)&&(ae="buffer"),ae||"base64"){case"file":return C(q,oe);case"base64":return f(Pi(qs(q)),oe);case"binary":return f(Pi(q),oe)}return f(q,oe)}function E(q,oe){var ae=oe||{},se=ae.root||"Root Entry";if(q.FullPaths||(q.FullPaths=[]),q.FileIndex||(q.FileIndex=[]),q.FullPaths.length!==q.FileIndex.length)throw new Error("inconsistent CFB structure");q.FullPaths.length===0&&(q.FullPaths[0]=se+"/",q.FileIndex[0]={name:se,type:5}),ae.CLSID&&(q.FileIndex[0].clsid=ae.CLSID),_(q)}function _(q){var oe="Sh33tJ5";if(!Vr.find(q,"/"+oe)){var ae=un(4);ae[0]=55,ae[1]=ae[3]=50,ae[2]=54,q.FileIndex.push({name:oe,type:2,content:ae,size:4,L:69,R:69,C:69}),q.FullPaths.push(q.FullPaths[0]+oe),O(q)}}function O(q,oe){E(q);for(var ae=!1,se=!1,K=q.FullPaths.length-1;K>=0;--K){var Y=q.FileIndex[K];switch(Y.type){case 0:se?ae=!0:(q.FileIndex.pop(),q.FullPaths.pop());break;case 1:case 2:case 5:se=!0,isNaN(Y.R*Y.L*Y.C)&&(ae=!0),Y.R>-1&&Y.L>-1&&Y.R==Y.L&&(ae=!0);break;default:ae=!0;break}}if(!(!ae&&!oe)){var le=new Date(1987,1,19),pe=0,z=Object.create?Object.create(null):{},ce=[];for(K=0;K<q.FullPaths.length;++K)z[q.FullPaths[K]]=!0,q.FileIndex[K].type!==0&&ce.push([q.FullPaths[K],q.FileIndex[K]]);for(K=0;K<ce.length;++K){var ye=n(ce[K][0]);se=z[ye],se||(ce.push([ye,{name:s(ye).replace("/",""),type:1,clsid:ee,ct:le,mt:le,content:null}]),z[ye]=!0)}for(ce.sort(function(Ge,Be){return r(Ge[0],Be[0])}),q.FullPaths=[],q.FileIndex=[],K=0;K<ce.length;++K)q.FullPaths[K]=ce[K][0],q.FileIndex[K]=ce[K][1];for(K=0;K<ce.length;++K){var $e=q.FileIndex[K],De=q.FullPaths[K];if($e.name=s(De).replace("/",""),$e.L=$e.R=$e.C=-($e.color=1),$e.size=$e.content?$e.content.length:0,$e.start=0,$e.clsid=$e.clsid||ee,K===0)$e.C=ce.length>1?1:-1,$e.size=0,$e.type=5;else if(De.slice(-1)=="/"){for(pe=K+1;pe<ce.length&&n(q.FullPaths[pe])!=De;++pe);for($e.C=pe>=ce.length?-1:pe,pe=K+1;pe<ce.length&&n(q.FullPaths[pe])!=n(De);++pe);$e.R=pe>=ce.length?-1:pe,$e.type=1}else n(q.FullPaths[K+1]||"")==n(De)&&($e.R=K+1),$e.type=2}}}function B(q,oe){var ae=oe||{};if(ae.fileType=="mad")return Ot(q,ae);switch(O(q),ae.fileType){case"zip":return Nt(q,ae)}var se=(function(Ge){for(var Be=0,qe=0,St=0;St<Ge.FileIndex.length;++St){var ie=Ge.FileIndex[St];if(ie.content){var fe=ie.content.length;fe>0&&(fe<4096?Be+=fe+63>>6:qe+=fe+511>>9)}}for(var _e=Ge.FullPaths.length+3>>2,nt=Be+7>>3,xt=Be+127>>7,ut=nt+qe+_e+xt,Dt=ut+127>>7,Wr=Dt<=109?0:Math.ceil((Dt-109)/127);ut+Dt+Wr+127>>7>Dt;)Wr=++Dt<=109?0:Math.ceil((Dt-109)/127);var Xt=[1,Wr,Dt,xt,_e,qe,Be,0];return Ge.FileIndex[0].size=Be<<6,Xt[7]=(Ge.FileIndex[0].start=Xt[0]+Xt[1]+Xt[2]+Xt[3]+Xt[4]+Xt[5])+(Xt[6]+7>>3),Xt})(q),K=un(se[7]<<9),Y=0,le=0;{for(Y=0;Y<8;++Y)K.write_shift(1,W[Y]);for(Y=0;Y<8;++Y)K.write_shift(2,0);for(K.write_shift(2,62),K.write_shift(2,3),K.write_shift(2,65534),K.write_shift(2,9),K.write_shift(2,6),Y=0;Y<3;++Y)K.write_shift(2,0);for(K.write_shift(4,0),K.write_shift(4,se[2]),K.write_shift(4,se[0]+se[1]+se[2]+se[3]-1),K.write_shift(4,0),K.write_shift(4,4096),K.write_shift(4,se[3]?se[0]+se[1]+se[2]-1:H),K.write_shift(4,se[3]),K.write_shift(-4,se[1]?se[0]-1:H),K.write_shift(4,se[1]),Y=0;Y<109;++Y)K.write_shift(-4,Y<se[2]?se[1]+Y:-1)}if(se[1])for(le=0;le<se[1];++le){for(;Y<236+le*127;++Y)K.write_shift(-4,Y<se[2]?se[1]+Y:-1);K.write_shift(-4,le===se[1]-1?H:le+1)}var pe=function(Ge){for(le+=Ge;Y<le-1;++Y)K.write_shift(-4,Y+1);Ge&&(++Y,K.write_shift(-4,H))};for(le=Y=0,le+=se[1];Y<le;++Y)K.write_shift(-4,re.DIFSECT);for(le+=se[2];Y<le;++Y)K.write_shift(-4,re.FATSECT);pe(se[3]),pe(se[4]);for(var z=0,ce=0,ye=q.FileIndex[0];z<q.FileIndex.length;++z)ye=q.FileIndex[z],ye.content&&(ce=ye.content.length,!(ce<4096)&&(ye.start=le,pe(ce+511>>9)));for(pe(se[6]+7>>3);K.l&511;)K.write_shift(-4,re.ENDOFCHAIN);for(le=Y=0,z=0;z<q.FileIndex.length;++z)ye=q.FileIndex[z],ye.content&&(ce=ye.content.length,!(!ce||ce>=4096)&&(ye.start=le,pe(ce+63>>6)));for(;K.l&511;)K.write_shift(-4,re.ENDOFCHAIN);for(Y=0;Y<se[4]<<2;++Y){var $e=q.FullPaths[Y];if(!$e||$e.length===0){for(z=0;z<17;++z)K.write_shift(4,0);for(z=0;z<3;++z)K.write_shift(4,-1);for(z=0;z<12;++z)K.write_shift(4,0);continue}ye=q.FileIndex[Y],Y===0&&(ye.start=ye.size?ye.start-1:H);var De=Y===0&&ae.root||ye.name;if(ce=2*(De.length+1),K.write_shift(64,De,"utf16le"),K.write_shift(2,ce),K.write_shift(1,ye.type),K.write_shift(1,ye.color),K.write_shift(-4,ye.L),K.write_shift(-4,ye.R),K.write_shift(-4,ye.C),ye.clsid)K.write_shift(16,ye.clsid,"hex");else for(z=0;z<4;++z)K.write_shift(4,0);K.write_shift(4,ye.state||0),K.write_shift(4,0),K.write_shift(4,0),K.write_shift(4,0),K.write_shift(4,0),K.write_shift(4,ye.start),K.write_shift(4,ye.size),K.write_shift(4,0)}for(Y=1;Y<q.FileIndex.length;++Y)if(ye=q.FileIndex[Y],ye.size>=4096)if(K.l=ye.start+1<<9,Hr&&Buffer.isBuffer(ye.content))ye.content.copy(K,K.l,0,ye.size),K.l+=ye.size+511&-512;else{for(z=0;z<ye.size;++z)K.write_shift(1,ye.content[z]);for(;z&511;++z)K.write_shift(1,0)}for(Y=1;Y<q.FileIndex.length;++Y)if(ye=q.FileIndex[Y],ye.size>0&&ye.size<4096)if(Hr&&Buffer.isBuffer(ye.content))ye.content.copy(K,K.l,0,ye.size),K.l+=ye.size+63&-64;else{for(z=0;z<ye.size;++z)K.write_shift(1,ye.content[z]);for(;z&63;++z)K.write_shift(1,0)}if(Hr)K.l=K.length;else for(;K.l<K.length;)K.write_shift(1,0);return K}function F(q,oe){var ae=q.FullPaths.map(function(z){return z.toUpperCase()}),se=ae.map(function(z){var ce=z.split("/");return ce[ce.length-(z.slice(-1)=="/"?2:1)]}),K=!1;oe.charCodeAt(0)===47?(K=!0,oe=ae[0].slice(0,-1)+oe):K=oe.indexOf("/")!==-1;var Y=oe.toUpperCase(),le=K===!0?ae.indexOf(Y):se.indexOf(Y);if(le!==-1)return q.FileIndex[le];var pe=!Y.match(Ih);for(Y=Y.replace(us,""),pe&&(Y=Y.replace(Ih,"!")),le=0;le<ae.length;++le)if((pe?ae[le].replace(Ih,"!"):ae[le]).replace(us,"")==Y||(pe?se[le].replace(Ih,"!"):se[le]).replace(us,"")==Y)return q.FileIndex[le];return null}var D=64,H=-2,ne="d0cf11e0a1b11ae1",W=[208,207,17,224,161,177,26,225],ee="00000000000000000000000000000000",re={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:H,FREESECT:-1,HEADER_SIGNATURE:ne,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ee,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Q(q,oe,ae){u();var se=B(q,ae);d.writeFileSync(oe,se)}function R(q){for(var oe=new Array(q.length),ae=0;ae<q.length;++ae)oe[ae]=String.fromCharCode(q[ae]);return oe.join("")}function X(q,oe){var ae=B(q,oe);switch(oe&&oe.type||"buffer"){case"file":return u(),d.writeFileSync(oe.filename,ae),ae;case"binary":return typeof ae=="string"?ae:R(ae);case"base64":return CP(typeof ae=="string"?ae:R(ae));case"buffer":if(Hr)return Buffer.isBuffer(ae)?ae:Bc(ae);case"array":return typeof ae=="string"?Pi(ae):ae}return ae}var L;function I(q){try{var oe=q.InflateRaw,ae=new oe;if(ae._processChunk(new Uint8Array([3,0]),ae._finishFlushFlag),ae.bytesRead)L=q;else throw new Error("zlib does not expose bytesRead")}catch(se){console.error("cannot use native zlib: "+(se.message||se))}}function G(q,oe){if(!L)return Ie(q,oe);var ae=L.InflateRaw,se=new ae,K=se._processChunk(q.slice(q.l),se._finishFlushFlag);return q.l+=se.bytesRead,K}function V(q){return L?L.deflateRawSync(q):It(q)}var Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ve=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ee=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Te(q){var oe=(q<<1|q<<11)&139536|(q<<5|q<<15)&558144;return(oe>>16|oe>>8|oe)&255}for(var ue=typeof Uint8Array<"u",ge=ue?new Uint8Array(256):[],Fe=0;Fe<256;++Fe)ge[Fe]=Te(Fe);function J(q,oe){var ae=ge[q&255];return oe<=8?ae>>>8-oe:(ae=ae<<8|ge[q>>8&255],oe<=16?ae>>>16-oe:(ae=ae<<8|ge[q>>16&255],ae>>>24-oe))}function Ze(q,oe){var ae=oe&7,se=oe>>>3;return(q[se]|(ae<=6?0:q[se+1]<<8))>>>ae&3}function rt(q,oe){var ae=oe&7,se=oe>>>3;return(q[se]|(ae<=5?0:q[se+1]<<8))>>>ae&7}function Tt(q,oe){var ae=oe&7,se=oe>>>3;return(q[se]|(ae<=4?0:q[se+1]<<8))>>>ae&15}function ze(q,oe){var ae=oe&7,se=oe>>>3;return(q[se]|(ae<=3?0:q[se+1]<<8))>>>ae&31}function Re(q,oe){var ae=oe&7,se=oe>>>3;return(q[se]|(ae<=1?0:q[se+1]<<8))>>>ae&127}function Ce(q,oe,ae){var se=oe&7,K=oe>>>3,Y=(1<<ae)-1,le=q[K]>>>se;return ae<8-se||(le|=q[K+1]<<8-se,ae<16-se)||(le|=q[K+2]<<16-se,ae<24-se)||(le|=q[K+3]<<24-se),le&Y}function Se(q,oe,ae){var se=oe&7,K=oe>>>3;return se<=5?q[K]|=(ae&7)<<se:(q[K]|=ae<<se&255,q[K+1]=(ae&7)>>8-se),oe+3}function Qe(q,oe,ae){var se=oe&7,K=oe>>>3;return ae=(ae&1)<<se,q[K]|=ae,oe+1}function kt(q,oe,ae){var se=oe&7,K=oe>>>3;return ae<<=se,q[K]|=ae&255,ae>>>=8,q[K+1]=ae,oe+8}function Ct(q,oe,ae){var se=oe&7,K=oe>>>3;return ae<<=se,q[K]|=ae&255,ae>>>=8,q[K+1]=ae&255,q[K+2]=ae>>>8,oe+16}function yr(q,oe){var ae=q.length,se=2*ae>oe?2*ae:oe+5,K=0;if(ae>=oe)return q;if(Hr){var Y=AP(se);if(q.copy)q.copy(Y);else for(;K<q.length;++K)Y[K]=q[K];return Y}else if(ue){var le=new Uint8Array(se);if(le.set)le.set(q);else for(;K<ae;++K)le[K]=q[K];return le}return q.length=se,q}function Kt(q){for(var oe=new Array(q),ae=0;ae<q;++ae)oe[ae]=0;return oe}function Rr(q,oe,ae){var se=1,K=0,Y=0,le=0,pe=0,z=q.length,ce=ue?new Uint16Array(32):Kt(32);for(Y=0;Y<32;++Y)ce[Y]=0;for(Y=z;Y<ae;++Y)q[Y]=0;z=q.length;var ye=ue?new Uint16Array(z):Kt(z);for(Y=0;Y<z;++Y)ce[K=q[Y]]++,se<K&&(se=K),ye[Y]=0;for(ce[0]=0,Y=1;Y<=se;++Y)ce[Y+16]=pe=pe+ce[Y-1]<<1;for(Y=0;Y<z;++Y)pe=q[Y],pe!=0&&(ye[Y]=ce[pe+16]++);var $e=0;for(Y=0;Y<z;++Y)if($e=q[Y],$e!=0)for(pe=J(ye[Y],se)>>se-$e,le=(1<<se+4-$e)-1;le>=0;--le)oe[pe|le<<$e]=$e&15|Y<<4;return se}var Pr=ue?new Uint16Array(512):Kt(512),da=ue?new Uint16Array(32):Kt(32);if(!ue){for(var ur=0;ur<512;++ur)Pr[ur]=0;for(ur=0;ur<32;++ur)da[ur]=0}(function(){for(var q=[],oe=0;oe<32;oe++)q.push(5);Rr(q,da,32);var ae=[];for(oe=0;oe<=143;oe++)ae.push(8);for(;oe<=255;oe++)ae.push(9);for(;oe<=279;oe++)ae.push(7);for(;oe<=287;oe++)ae.push(8);Rr(ae,Pr,288)})();var Br=(function(){for(var oe=ue?new Uint8Array(32768):[],ae=0,se=0;ae<Ee.length-1;++ae)for(;se<Ee[ae+1];++se)oe[se]=ae;for(;se<32768;++se)oe[se]=29;var K=ue?new Uint8Array(259):[];for(ae=0,se=0;ae<ve.length-1;++ae)for(;se<ve[ae+1];++se)K[se]=ae;function Y(pe,z){for(var ce=0;ce<pe.length;){var ye=Math.min(65535,pe.length-ce),$e=ce+ye==pe.length;for(z.write_shift(1,+$e),z.write_shift(2,ye),z.write_shift(2,~ye&65535);ye-- >0;)z[z.l++]=pe[ce++]}return z.l}function le(pe,z){for(var ce=0,ye=0,$e=ue?new Uint16Array(32768):[];ye<pe.length;){var De=Math.min(65535,pe.length-ye);if(De<10){for(ce=Se(z,ce,+(ye+De==pe.length)),ce&7&&(ce+=8-(ce&7)),z.l=ce/8|0,z.write_shift(2,De),z.write_shift(2,~De&65535);De-- >0;)z[z.l++]=pe[ye++];ce=z.l*8;continue}ce=Se(z,ce,+(ye+De==pe.length)+2);for(var Ge=0;De-- >0;){var Be=pe[ye];Ge=(Ge<<5^Be)&32767;var qe=-1,St=0;if((qe=$e[Ge])&&(qe|=ye&-32768,qe>ye&&(qe-=32768),qe<ye))for(;pe[qe+St]==pe[ye+St]&&St<250;)++St;if(St>2){Be=K[St],Be<=22?ce=kt(z,ce,ge[Be+1]>>1)-1:(kt(z,ce,3),ce+=5,kt(z,ce,ge[Be-23]>>5),ce+=3);var ie=Be<8?0:Be-4>>2;ie>0&&(Ct(z,ce,St-ve[Be]),ce+=ie),Be=oe[ye-qe],ce=kt(z,ce,ge[Be]>>3),ce-=3;var fe=Be<4?0:Be-2>>1;fe>0&&(Ct(z,ce,ye-qe-Ee[Be]),ce+=fe);for(var _e=0;_e<St;++_e)$e[Ge]=ye&32767,Ge=(Ge<<5^pe[ye])&32767,++ye;De-=St-1}else Be<=143?Be=Be+48:ce=Qe(z,ce,1),ce=kt(z,ce,ge[Be]),$e[Ge]=ye&32767,++ye}ce=kt(z,ce,0)-1}return z.l=(ce+7)/8|0,z.l}return function(z,ce){return z.length<8?Y(z,ce):le(z,ce)}})();function It(q){var oe=un(50+Math.floor(q.length*1.1)),ae=Br(q,oe);return oe.slice(0,ae)}var er=ue?new Uint16Array(32768):Kt(32768),Ir=ue?new Uint16Array(32768):Kt(32768),Tr=ue?new Uint16Array(128):Kt(128),tr=1,Da=1;function Oa(q,oe){var ae=ze(q,oe)+257;oe+=5;var se=ze(q,oe)+1;oe+=5;var K=Tt(q,oe)+4;oe+=4;for(var Y=0,le=ue?new Uint8Array(19):Kt(19),pe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],z=1,ce=ue?new Uint8Array(8):Kt(8),ye=ue?new Uint8Array(8):Kt(8),$e=le.length,De=0;De<K;++De)le[Z[De]]=Y=rt(q,oe),z<Y&&(z=Y),ce[Y]++,oe+=3;var Ge=0;for(ce[0]=0,De=1;De<=z;++De)ye[De]=Ge=Ge+ce[De-1]<<1;for(De=0;De<$e;++De)(Ge=le[De])!=0&&(pe[De]=ye[Ge]++);var Be=0;for(De=0;De<$e;++De)if(Be=le[De],Be!=0){Ge=ge[pe[De]]>>8-Be;for(var qe=(1<<7-Be)-1;qe>=0;--qe)Tr[Ge|qe<<Be]=Be&7|De<<3}var St=[];for(z=1;St.length<ae+se;)switch(Ge=Tr[Re(q,oe)],oe+=Ge&7,Ge>>>=3){case 16:for(Y=3+Ze(q,oe),oe+=2,Ge=St[St.length-1];Y-- >0;)St.push(Ge);break;case 17:for(Y=3+rt(q,oe),oe+=3;Y-- >0;)St.push(0);break;case 18:for(Y=11+Re(q,oe),oe+=7;Y-- >0;)St.push(0);break;default:St.push(Ge),z<Ge&&(z=Ge);break}var ie=St.slice(0,ae),fe=St.slice(ae);for(De=ae;De<286;++De)ie[De]=0;for(De=se;De<30;++De)fe[De]=0;return tr=Rr(ie,er,286),Da=Rr(fe,Ir,30),oe}function He(q,oe){if(q[0]==3&&!(q[1]&3))return[Cl(oe),2];for(var ae=0,se=0,K=AP(oe||1<<18),Y=0,le=K.length>>>0,pe=0,z=0;(se&1)==0;){if(se=rt(q,ae),ae+=3,se>>>1)se>>1==1?(pe=9,z=5):(ae=Oa(q,ae),pe=tr,z=Da);else{ae&7&&(ae+=8-(ae&7));var ce=q[ae>>>3]|q[(ae>>>3)+1]<<8;if(ae+=32,ce>0)for(!oe&&le<Y+ce&&(K=yr(K,Y+ce),le=K.length);ce-- >0;)K[Y++]=q[ae>>>3],ae+=8;continue}for(;;){!oe&&le<Y+32767&&(K=yr(K,Y+32767),le=K.length);var ye=Ce(q,ae,pe),$e=se>>>1==1?Pr[ye]:er[ye];if(ae+=$e&15,$e>>>=4,($e>>>8&255)===0)K[Y++]=$e;else{if($e==256)break;$e-=257;var De=$e<8?0:$e-4>>2;De>5&&(De=0);var Ge=Y+ve[$e];De>0&&(Ge+=Ce(q,ae,De),ae+=De),ye=Ce(q,ae,z),$e=se>>>1==1?da[ye]:Ir[ye],ae+=$e&15,$e>>>=4;var Be=$e<4?0:$e-2>>1,qe=Ee[$e];for(Be>0&&(qe+=Ce(q,ae,Be),ae+=Be),!oe&&le<Ge&&(K=yr(K,Ge+100),le=K.length);Y<Ge;)K[Y]=K[Y-qe],++Y}}}return oe?[K,ae+7>>>3]:[K.slice(0,Y),ae+7>>>3]}function Ie(q,oe){var ae=q.slice(q.l||0),se=He(ae,oe);return q.l+=se[1],se[0]}function lt(q,oe){if(q)typeof console<"u"&&console.error(oe);else throw new Error(oe)}function Ke(q,oe){var ae=q;On(ae,0);var se=[],K=[],Y={FileIndex:se,FullPaths:K};E(Y,{root:oe.root});for(var le=ae.length-4;(ae[le]!=80||ae[le+1]!=75||ae[le+2]!=5||ae[le+3]!=6)&&le>=0;)--le;ae.l=le+4,ae.l+=4;var pe=ae.read_shift(2);ae.l+=6;var z=ae.read_shift(4);for(ae.l=z,le=0;le<pe;++le){ae.l+=20;var ce=ae.read_shift(4),ye=ae.read_shift(4),$e=ae.read_shift(2),De=ae.read_shift(2),Ge=ae.read_shift(2);ae.l+=8;var Be=ae.read_shift(4),qe=l(ae.slice(ae.l+$e,ae.l+$e+De));ae.l+=$e+De+Ge;var St=ae.l;ae.l=Be+4,pt(ae,ce,ye,Y,qe),ae.l=St}return Y}function pt(q,oe,ae,se,K){q.l+=2;var Y=q.read_shift(2),le=q.read_shift(2),pe=o(q);if(Y&8257)throw new Error("Unsupported ZIP encryption");for(var z=q.read_shift(4),ce=q.read_shift(4),ye=q.read_shift(4),$e=q.read_shift(2),De=q.read_shift(2),Ge="",Be=0;Be<$e;++Be)Ge+=String.fromCharCode(q[q.l++]);if(De){var qe=l(q.slice(q.l,q.l+De));(qe[21589]||{}).mt&&(pe=qe[21589].mt),((K||{})[21589]||{}).mt&&(pe=K[21589].mt)}q.l+=De;var St=q.slice(q.l,q.l+ce);switch(le){case 8:St=G(q,ye);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+le)}var ie=!1;Y&8&&(z=q.read_shift(4),z==134695760&&(z=q.read_shift(4),ie=!0),ce=q.read_shift(4),ye=q.read_shift(4)),ce!=oe&&lt(ie,"Bad compressed size: "+oe+" != "+ce),ye!=ae&&lt(ie,"Bad uncompressed size: "+ae+" != "+ye),it(se,Ge,St,{unsafe:!0,mt:pe})}function Nt(q,oe){var ae=oe||{},se=[],K=[],Y=un(1),le=ae.compression?8:0,pe=0,z=0,ce=0,ye=0,$e=0,De=q.FullPaths[0],Ge=De,Be=q.FileIndex[0],qe=[],St=0;for(z=1;z<q.FullPaths.length;++z)if(Ge=q.FullPaths[z].slice(De.length),Be=q.FileIndex[z],!(!Be.size||!Be.content||Ge=="Sh33tJ5")){var ie=ye,fe=un(Ge.length);for(ce=0;ce<Ge.length;++ce)fe.write_shift(1,Ge.charCodeAt(ce)&127);fe=fe.slice(0,fe.l),qe[$e]=pce.buf(Be.content,0);var _e=Be.content;le==8&&(_e=V(_e)),Y=un(30),Y.write_shift(4,67324752),Y.write_shift(2,20),Y.write_shift(2,pe),Y.write_shift(2,le),Be.mt?i(Y,Be.mt):Y.write_shift(4,0),Y.write_shift(-4,qe[$e]),Y.write_shift(4,_e.length),Y.write_shift(4,Be.content.length),Y.write_shift(2,fe.length),Y.write_shift(2,0),ye+=Y.length,se.push(Y),ye+=fe.length,se.push(fe),ye+=_e.length,se.push(_e),Y=un(46),Y.write_shift(4,33639248),Y.write_shift(2,0),Y.write_shift(2,20),Y.write_shift(2,pe),Y.write_shift(2,le),Y.write_shift(4,0),Y.write_shift(-4,qe[$e]),Y.write_shift(4,_e.length),Y.write_shift(4,Be.content.length),Y.write_shift(2,fe.length),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(4,0),Y.write_shift(4,ie),St+=Y.l,K.push(Y),St+=fe.length,K.push(fe),++$e}return Y=un(22),Y.write_shift(4,101010256),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,$e),Y.write_shift(2,$e),Y.write_shift(4,St),Y.write_shift(4,ye),Y.write_shift(2,0),yl([yl(se),yl(K),Y])}var Rt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Pt(q,oe){if(q.ctype)return q.ctype;var ae=q.name||"",se=ae.match(/\.([^\.]+)$/);return se&&Rt[se[1]]||oe&&(se=(ae=oe).match(/[\.\\]([^\.\\])+$/),se&&Rt[se[1]])?Rt[se[1]]:"application/octet-stream"}function Dr(q){for(var oe=CP(q),ae=[],se=0;se<oe.length;se+=76)ae.push(oe.slice(se,se+76));return ae.join(`\r
`)+`\r
`}function pa(q){var oe=q.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ce){var ye=ce.charCodeAt(0).toString(16).toUpperCase();return"="+(ye.length==1?"0"+ye:ye)});oe=oe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),oe.charAt(0)==`
`&&(oe="=0D"+oe.slice(1)),oe=oe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ae=[],se=oe.split(`\r
`),K=0;K<se.length;++K){var Y=se[K];if(Y.length==0){ae.push("");continue}for(var le=0;le<Y.length;){var pe=76,z=Y.slice(le,le+pe);z.charAt(pe-1)=="="?pe--:z.charAt(pe-2)=="="?pe-=2:z.charAt(pe-3)=="="&&(pe-=3),z=Y.slice(le,le+pe),le+=pe,le<Y.length&&(z+="="),ae.push(z)}}return ae.join(`\r
`)}function oa(q){for(var oe=[],ae=0;ae<q.length;++ae){for(var se=q[ae];ae<=q.length&&se.charAt(se.length-1)=="=";)se=se.slice(0,se.length-1)+q[++ae];oe.push(se)}for(var K=0;K<oe.length;++K)oe[K]=oe[K].replace(/[=][0-9A-Fa-f]{2}/g,function(Y){return String.fromCharCode(parseInt(Y.slice(1),16))});return Pi(oe.join(`\r
`))}function ot(q,oe,ae){for(var se="",K="",Y="",le,pe=0;pe<10;++pe){var z=oe[pe];if(!z||z.match(/^\s*$/))break;var ce=z.match(/^(.*?):\s*([^\s].*)$/);if(ce)switch(ce[1].toLowerCase()){case"content-location":se=ce[2].trim();break;case"content-type":Y=ce[2].trim();break;case"content-transfer-encoding":K=ce[2].trim();break}}switch(++pe,K.toLowerCase()){case"base64":le=Pi(qs(oe.slice(pe).join("")));break;case"quoted-printable":le=oa(oe.slice(pe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+K)}var ye=it(q,se.slice(ae.length),le,{unsafe:!0});Y&&(ye.ctype=Y)}function Sr(q,oe){if(R(q.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ae=oe&&oe.root||"",se=(Hr&&Buffer.isBuffer(q)?q.toString("binary"):R(q)).split(`\r
`),K=0,Y="";for(K=0;K<se.length;++K)if(Y=se[K],!!/^Content-Location:/i.test(Y)&&(Y=Y.slice(Y.indexOf("file")),ae||(ae=Y.slice(0,Y.lastIndexOf("/")+1)),Y.slice(0,ae.length)!=ae))for(;ae.length>0&&(ae=ae.slice(0,ae.length-1),ae=ae.slice(0,ae.lastIndexOf("/")+1),Y.slice(0,ae.length)!=ae););var le=(se[1]||"").match(/boundary="(.*?)"/);if(!le)throw new Error("MAD cannot find boundary");var pe="--"+(le[1]||""),z=[],ce=[],ye={FileIndex:z,FullPaths:ce};E(ye);var $e,De=0;for(K=0;K<se.length;++K){var Ge=se[K];Ge!==pe&&Ge!==pe+"--"||(De++&&ot(ye,se.slice($e,K),ae),$e=K)}return ye}function Ot(q,oe){var ae=oe||{},se=ae.boundary||"SheetJS";se="------="+se;for(var K=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+se.slice(2)+'"',"","",""],Y=q.FullPaths[0],le=Y,pe=q.FileIndex[0],z=1;z<q.FullPaths.length;++z)if(le=q.FullPaths[z].slice(Y.length),pe=q.FileIndex[z],!(!pe.size||!pe.content||le=="Sh33tJ5")){le=le.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(St){return"_x"+St.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(St){return"_u"+St.charCodeAt(0).toString(16)+"_"});for(var ce=pe.content,ye=Hr&&Buffer.isBuffer(ce)?ce.toString("binary"):R(ce),$e=0,De=Math.min(1024,ye.length),Ge=0,Be=0;Be<=De;++Be)(Ge=ye.charCodeAt(Be))>=32&&Ge<128&&++$e;var qe=$e>=De*4/5;K.push(se),K.push("Content-Location: "+(ae.root||"file:///C:/SheetJS/")+le),K.push("Content-Transfer-Encoding: "+(qe?"quoted-printable":"base64")),K.push("Content-Type: "+Pt(pe,le)),K.push(""),K.push(qe?pa(ye):Dr(ye))}return K.push(se+`--\r
`),K.join(`\r
`)}function xe(q){var oe={};return E(oe,q),oe}function it(q,oe,ae,se){var K=se&&se.unsafe;K||E(q);var Y=!K&&Vr.find(q,oe);if(!Y){var le=q.FullPaths[0];oe.slice(0,le.length)==le?le=oe:(le.slice(-1)!="/"&&(le+="/"),le=(le+oe).replace("//","/")),Y={name:s(oe),type:2},q.FileIndex.push(Y),q.FullPaths.push(le),K||Vr.utils.cfb_gc(q)}return Y.content=ae,Y.size=ae?ae.length:0,se&&(se.CLSID&&(Y.clsid=se.CLSID),se.mt&&(Y.mt=se.mt),se.ct&&(Y.ct=se.ct)),Y}function dt(q,oe){E(q);var ae=Vr.find(q,oe);if(ae){for(var se=0;se<q.FileIndex.length;++se)if(q.FileIndex[se]==ae)return q.FileIndex.splice(se,1),q.FullPaths.splice(se,1),!0}return!1}function gt(q,oe,ae){E(q);var se=Vr.find(q,oe);if(se){for(var K=0;K<q.FileIndex.length;++K)if(q.FileIndex[K]==se)return q.FileIndex[K].name=s(ae),q.FullPaths[K]=ae,!0}return!1}function ft(q){O(q,!0)}return t.find=F,t.read=N,t.parse=f,t.write=X,t.writeFile=Q,t.utils={cfb_new:xe,cfb_add:it,cfb_del:dt,cfb_mov:gt,cfb_gc:ft,ReadShift:Kh,CheckField:lL,prep_blob:On,bconcat:yl,use_zlib:I,_deflateRaw:It,_inflateRaw:Ie,consts:re},t})();function gce(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function ro(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function eS(e){for(var t=[],r=ro(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}var ug=new Date(1899,11,30,0,0,0);function hs(e,t){var r=e.getTime(),n=ug.getTime()+(e.getTimezoneOffset()-ug.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var U$=new Date,xce=ug.getTime()+(U$.getTimezoneOffset()-ug.getTimezoneOffset())*6e4,FP=U$.getTimezoneOffset();function xx(e){var t=new Date;return t.setTime(e*24*60*60*1e3+xce),t.getTimezoneOffset()!==FP&&t.setTime(t.getTime()+(t.getTimezoneOffset()-FP)*6e4),t}function yce(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var $P=new Date("2017-02-19T19:06:09.000Z"),H$=isNaN($P.getFullYear())?new Date("2/19/17"):$P,vce=H$.getFullYear()==2017;function kn(e,t){var r=new Date(e);if(vce)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(H$.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Oc(e,t){if(Hr&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Rh(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Rh(C$(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Rh(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Rh(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function Mn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Mn(e[r]));return t}function $a(e,t){for(var r="";r.length<t;)r+=e;return r}function Fi(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var bce=["january","february","march","april","may","june","july","august","september","october","november","december"];function vu(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&bce.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var wce=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var i=r.split(n),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}})();function q$(e){return e?e.content&&e.type?Oc(e.content,!0):e.data?Ph(e.data):e.asNodeBuffer&&Hr?Ph(e.asNodeBuffer().toString("binary")):e.asBinary?Ph(e.asBinary()):e._data&&e._data.getContent?Ph(Oc(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function W$(e){if(!e)return null;if(e.data)return _P(e.data);if(e.asNodeBuffer&&Hr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?_P(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function jce(e){return e&&e.name.slice(-4)===".bin"?W$(e):q$(e)}function si(e,t){for(var r=e.FullPaths||ro(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function tS(e,t){var r=si(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ya(e,t,r){if(!r)return jce(tS(e,t));if(!t)return null;try{return Ya(e,t)}catch{return null}}function Ls(e,t,r){if(!r)return q$(tS(e,t));if(!t)return null;try{return Ls(e,t)}catch{return null}}function Nce(e,t,r){return W$(tS(e,t))}function LP(e){for(var t=e.FullPaths||ro(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function kce(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Hr?n=Bc(r):n=qle(r),Vr.utils.cfb_add(e,t,n)}Vr.utils.cfb_add(e,t,r)}else e.file(t,r)}function z$(e,t){switch(t.type){case"base64":return Vr.read(e,{type:"base64"});case"binary":return Vr.read(e,{type:"binary"});case"buffer":case"array":return Vr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Mh(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var K$=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Sce=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,BP=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,_ce=/<[^>]*>/g,Zn=K$.match(BP)?BP:_ce,Ece=/<\w*:/,Cce=/<(\/?)\w+:/;function xr(e,t,r){for(var n={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var o=e.match(Sce),l=0,d="",u=0,f="",m="",p=1;if(o)for(u=0;u!=o.length;++u){for(m=o[u],i=0;i!=m.length&&m.charCodeAt(i)!==61;++i);for(f=m.slice(0,i).trim();m.charCodeAt(i+1)==32;)++i;for(p=(s=m.charCodeAt(i+1))==34||s==39?1:0,d=m.slice(i+1+p,m.length-p),l=0;l!=f.length&&f.charCodeAt(l)!==58;++l);if(l===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),n[f]=d,n[f.toLowerCase()]=d;else{var g=(l===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(l+1);if(n[g]&&f.slice(l-3,l)=="ext")continue;n[g]=d,n[g.toLowerCase()]=d}}return n}function io(e){return e.replace(Cce,"<$1")}var V$={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Ace=eS(V$),Xr=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,d){return V$[l]||String.fromCharCode(parseInt(d,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,d){return String.fromCharCode(parseInt(d,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}})(),Tce=/[&<>'"]/g,Dce=/[\u0000-\u001f]/g;function rS(e){var t=e+"";return t.replace(Tce,function(r){return Ace[r]}).replace(/\n/g,"<br/>").replace(Dce,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var UP=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function Ca(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function hj(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function HP(e){var t=Cl(2*e.length),r,n,s=1,i=0,o=0,l;for(n=0;n<e.length;n+=s)s=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function qP(e){return Bc(e,"binary").toString("utf8")}var Lm="foo bar baz",ba=Hr&&(qP(Lm)==hj(Lm)&&qP||HP(Lm)==hj(Lm)&&HP)||hj,Rh=Hr?function(e){return Bc(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Y0=(function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),G$=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}})(),Oce=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),Pce=/<\/?(?:vt:)?variant>/g,Ice=/<(?:vt:)([^>]*)>([\s\S]*)</;function WP(e,t){var r=xr(e),n=e.match(Oce(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var o=i.replace(Pce,"").match(Ice);o&&s.push({v:ba(o[2]),t:o[1]})}),s}var Mce=/(^\s|\s$|\n)/;function Rce(e){return ro(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Fce(e,t,r){return"<"+e+(r!=null?Rce(r):"")+(t!=null?(t.match(Mce)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function aS(e){if(Hr&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return ba(Uc(Jk(e)));throw new Error("Bad input format: expected Buffer or string")}var X0=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,$ce={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},Lce=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function Bce(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function Uce(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=n?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|n}var zP=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,i=e[0][n].length;s<i;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},KP=Hr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Bc(t)})):zP(e)}:zP,VP=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(Oo(e,s)));return n.join("").replace(us,"")},nS=Hr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(us,""):VP(e,t,r)}:VP,GP=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},Y$=Hr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):GP(e,t,r)}:GP,YP=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(Ad(e,s)));return n.join("")},gf=Hr?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):YP(t,r,n)}:YP,X$=function(e,t){var r=Rs(e,t);return r>0?gf(e,t+4,t+4+r-1):""},J$=X$,Q$=function(e,t){var r=Rs(e,t);return r>0?gf(e,t+4,t+4+r-1):""},Z$=Q$,eL=function(e,t){var r=2*Rs(e,t);return r>0?gf(e,t+4,t+4+r-1):""},tL=eL,rL=function(t,r){var n=Rs(t,r);return n>0?nS(t,r+4,r+4+n):""},aL=rL,nL=function(e,t){var r=Rs(e,t);return r>0?gf(e,t+4,t+4+r):""},sL=nL,iL=function(e,t){return Bce(e,t)},hg=iL,oL=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Hr&&(J$=function(t,r){if(!Buffer.isBuffer(t))return X$(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Z$=function(t,r){if(!Buffer.isBuffer(t))return Q$(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},tL=function(t,r){if(!Buffer.isBuffer(t))return eL(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},aL=function(t,r){if(!Buffer.isBuffer(t))return rL(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},sL=function(t,r){if(!Buffer.isBuffer(t))return nL(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},hg=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):iL(t,r)},oL=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Ad=function(e,t){return e[t]},Oo=function(e,t){return e[t+1]*256+e[t]},Hce=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Rs=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},lc=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},qce=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Kh(e,t){var r="",n,s,i=[],o,l,d,u;switch(t){case"dbcs":if(u=this.l,Hr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(d=0;d<e;++d)r+=String.fromCharCode(Oo(this,u)),u+=2;e*=2;break;case"utf8":r=gf(this,this.l,this.l+e);break;case"utf16le":e*=2,r=nS(this,this.l,this.l+e);break;case"wstr":return Kh.call(this,e,"dbcs");case"lpstr-ansi":r=J$(this,this.l),e=4+Rs(this,this.l);break;case"lpstr-cp":r=Z$(this,this.l),e=4+Rs(this,this.l);break;case"lpwstr":r=tL(this,this.l),e=4+2*Rs(this,this.l);break;case"lpp4":e=4+Rs(this,this.l),r=aL(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Rs(this,this.l),r=sL(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=Ad(this,this.l+e++))!==0;)i.push($m(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=Oo(this,this.l+e))!==0;)i.push($m(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,d=0;d<e;++d){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Ad(this,u),this.l=u+1,l=Kh.call(this,e-d,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push($m(Oo(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,d=0;d!=e;++d){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Ad(this,u),this.l=u+1,l=Kh.call(this,e-d,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push($m(Ad(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return n=Ad(this,this.l),this.l++,n;case 2:return n=(t==="i"?Hce:Oo)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?lc:qce)(this,this.l),this.l+=4,n):(s=Rs(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=hg(this,this.l):s=hg([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=Y$(this,this.l,e);break}}return this.l+=e,r}var Wce=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},zce=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Kce=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Vce(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Kce(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Wce(this,t,this.l);break;case 8:if(n=8,r==="f"){Uce(this,t,this.l);break}case 16:break;case-4:n=4,zce(this,t,this.l);break}return this.l+=n,this}function lL(e,t){var r=Y$(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function On(e,t){e.l=t,e.read_shift=Kh,e.chk=lL,e.write_shift=Vce}function Qn(e,t){e.l+=t}function un(e){var t=Cl(e);return On(t,0),t}function Yo(e,t,r){if(e){var n,s,i;On(e,e.l||0);for(var o=e.length,l=0,d=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=yg[l]||yg[65535];for(n=e.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=e.read_shift(1))&127)<<7*s;d=e.l+i;var f=u.f&&u.f(e,i,r);if(e.l=d,t(f,u,l))return}}}function u2(){var e=[],t=Hr?256:2048,r=function(u){var f=un(u);return On(f,0),f},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(u){return n&&u<n.length-n.l?n:(s(),n=r(Math.max(u+1,t)))},o=function(){return s(),yl(e)},l=function(u){s(),n=u,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function Vh(e,t,r){var n=Mn(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function XP(e,t,r){var n=Mn(e);return n.s=Vh(n.s,t.s,r),n.e=Vh(n.e,t.s,r),n}function Gh(e,t){if(e.cRel&&e.c<0)for(e=Mn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Mn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=kr(e);return!e.cRel&&e.cRel!=null&&(r=Xce(r)),!e.rRel&&e.rRel!=null&&(r=Gce(r)),r}function fj(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+mn(e.s.c)+":"+(e.e.cRel?"":"$")+mn(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Rn(e.s.r)+":"+(e.e.rRel?"":"$")+Rn(e.e.r):Gh(e.s,t.biff)+":"+Gh(e.e,t.biff)}function sS(e){return parseInt(Yce(e),10)-1}function Rn(e){return""+(e+1)}function Gce(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Yce(e){return e.replace(/\$(\d+)$/,"$1")}function iS(e){for(var t=Jce(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function mn(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Xce(e){return e.replace(/^([A-Z])/,"$$$1")}function Jce(e){return e.replace(/^\$([A-Z])/,"$1")}function Qce(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ds(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function kr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Fu(e){var t=e.indexOf(":");return t==-1?{s:ds(e),e:ds(e)}:{s:ds(e.slice(0,t)),e:ds(e.slice(t+1))}}function Gr(e,t){return typeof t>"u"||typeof t=="number"?Gr(e.s,e.e):(typeof e!="string"&&(e=kr(e)),typeof t!="string"&&(t=kr(t)),e==t?e:e+":"+t)}function Ba(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=e.length;for(r=0;n<i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function JP(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=ui(e.z,r?hs(t):t)}catch{}try{return e.w=ui((e.XF||{}).numFmtId||(r?14:0),r?hs(t):t)}catch{return""+t}}function Wo(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Wc[e.v]||e.v:t==null?JP(e,e.v):JP(e,t))}function Ml(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function cL(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var d=typeof n.origin=="string"?ds(n.origin):n.origin;o=d.r,l=d.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var f=Ba(i["!ref"]);u.s.c=f.s.c,u.s.r=f.s.r,u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),o==-1&&(u.e.r=o=f.e.r+1)}for(var m=0;m!=t.length;++m)if(t[m]){if(!Array.isArray(t[m]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=t[m].length;++p)if(!(typeof t[m][p]>"u")){var g={v:t[m][p]},b=o+m,y=l+p;if(u.s.r>b&&(u.s.r=b),u.s.c>y&&(u.s.c=y),u.e.r<b&&(u.e.r=b),u.e.c<y&&(u.e.c=y),t[m][p]&&typeof t[m][p]=="object"&&!Array.isArray(t[m][p])&&!(t[m][p]instanceof Date))g=t[m][p];else if(Array.isArray(g.v)&&(g.f=t[m][p][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||Cr[14],n.cellDates?(g.t="d",g.w=ui(g.z,hs(g.v))):(g.t="n",g.v=hs(g.v),g.w=ui(g.z,g.v))):g.t="s";if(s)i[b]||(i[b]=[]),i[b][y]&&i[b][y].z&&(g.z=i[b][y].z),i[b][y]=g;else{var v=kr({c:y,r:b});i[v]&&i[v].z&&(g.z=i[v].z),i[v]=g}}}return u.s.c<1e7&&(i["!ref"]=Gr(u)),i}function $u(e,t){return cL(null,e,t)}function Zce(e){return e.read_shift(4,"i")}function Jn(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function ede(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function oS(e,t){var r=e.l,n=e.read_shift(1),s=Jn(e),i=[],o={t:s,h:s};if((n&1)!==0){for(var l=e.read_shift(4),d=0;d!=l;++d)i.push(ede(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}var tde=oS;function fi(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Hc(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var rde=Jn;function lS(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var ade=Jn,h2=lS;function cS(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?hg([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):lc(t,0)>>2;return r?s/100:s}function dL(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var qc=dL;function Yn(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function nde(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),d=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var u=wc[s];u&&(t.rgb=Q0(u));break;case 2:t.rgb=Q0([o,l,d]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function sde(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function uL(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function ide(e){return uL(e,1)}function ode(e){return uL(e,2)}var dS=2,vs=3,Bm=11,QP=12,fg=19,Um=64,lde=65,cde=71,dde=4108,ude=4126,wn=80,hL=81,hde=[wn,hL],fde={1:{n:"CodePage",t:dS},2:{n:"Category",t:wn},3:{n:"PresentationFormat",t:wn},4:{n:"ByteCount",t:vs},5:{n:"LineCount",t:vs},6:{n:"ParagraphCount",t:vs},7:{n:"SlideCount",t:vs},8:{n:"NoteCount",t:vs},9:{n:"HiddenCount",t:vs},10:{n:"MultimediaClipCount",t:vs},11:{n:"ScaleCrop",t:Bm},12:{n:"HeadingPairs",t:dde},13:{n:"TitlesOfParts",t:ude},14:{n:"Manager",t:wn},15:{n:"Company",t:wn},16:{n:"LinksUpToDate",t:Bm},17:{n:"CharacterCount",t:vs},19:{n:"SharedDoc",t:Bm},22:{n:"HyperlinksChanged",t:Bm},23:{n:"AppVersion",t:vs,p:"version"},24:{n:"DigSig",t:lde},26:{n:"ContentType",t:wn},27:{n:"ContentStatus",t:wn},28:{n:"Language",t:wn},29:{n:"Version",t:wn},255:{},2147483648:{n:"Locale",t:fg},2147483651:{n:"Behavior",t:fg},1919054434:{}},mde={1:{n:"CodePage",t:dS},2:{n:"Title",t:wn},3:{n:"Subject",t:wn},4:{n:"Author",t:wn},5:{n:"Keywords",t:wn},6:{n:"Comments",t:wn},7:{n:"Template",t:wn},8:{n:"LastAuthor",t:wn},9:{n:"RevNumber",t:wn},10:{n:"EditTime",t:Um},11:{n:"LastPrinted",t:Um},12:{n:"CreatedDate",t:Um},13:{n:"ModifiedDate",t:Um},14:{n:"PageCount",t:vs},15:{n:"WordCount",t:vs},16:{n:"CharCount",t:vs},17:{n:"Thumbnail",t:cde},18:{n:"Application",t:wn},19:{n:"DocSecurity",t:vs},255:{},2147483648:{n:"Locale",t:fg},2147483651:{n:"Behavior",t:fg},1919054434:{}},ZP={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},pde=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function gde(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var xde=gde([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),wc=Mn(xde),Wc={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},fL={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},e6={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function yde(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function vde(e){var t=yde();if(!e||!e.match)return t;var r={};if((e.match(Zn)||[]).forEach(function(n){var s=xr(n);switch(s[0].replace(Ece,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[e6[s.ContentType]]!==void 0&&t[e6[s.ContentType]].push(s.PartName);break}}),t.xmlns!==$ce.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}var $d={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function f2(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Yh(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(Zn)||[]).forEach(function(s){var i=xr(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Mh(i.Target,t);r[l]=o,n[i.Id]=o}}),r["!id"]=n,r}var bde="application/vnd.oasis.opendocument.spreadsheet";function wde(e,t){for(var r=aS(e),n,s;n=X0.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=xr(n[0],!1),s.path=="/"&&s.type!==bde)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}var Xh=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],jde=(function(){for(var e=new Array(Xh.length),t=0;t<Xh.length;++t){var r=Xh[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function mL(e){var t={};e=ba(e);for(var r=0;r<Xh.length;++r){var n=Xh[r],s=e.match(jde[r]);s!=null&&s.length>0&&(t[n[1]]=Xr(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=kn(t[n[1]]))}return t}var Nde=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function pL(e,t,r,n){var s=[];if(typeof e=="string")s=WP(e,n);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(f){return{v:f}}));var o=typeof t=="string"?WP(t,n).map(function(f){return f.v}):t,l=0,d=0;if(o.length>0)for(var u=0;u!==s.length;u+=2){switch(d=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=d,r.SheetNames=o.slice(l,l+d);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=d,r.DefinedNames=o.slice(l,l+d);break;case"Charts":case"Diagramme":r.Chartsheets=d,r.ChartNames=o.slice(l,l+d);break}l+=d}}function kde(e,t,r){var n={};return t||(t={}),e=ba(e),Nde.forEach(function(s){var i=(e.match(Y0(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=Xr(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(n[s[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&pL(n.HeadingPairs,n.TitlesOfParts,t,r),t}var Sde=/<[^>]+>[^<]*/g;function _de(e,t){var r={},n="",s=e.match(Sde);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=xr(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Xr(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var d=o.split(">"),u=d[0].slice(4),f=d[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Xr(f);break;case"bool":r[n]=Ca(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(f);break;case"filetime":case"date":r[n]=kn(f);break;case"cy":case"error":r[n]=Xr(f);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,d)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}var Ede={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},mj;function Cde(e,t,r){mj||(mj=eS(Ede)),t=mj[t]||t,e[t]=r}function uS(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function gL(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function xL(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function yL(e,t,r){return t===31?xL(e):gL(e,t,r)}function m2(e,t,r){return yL(e,t,r===!1?0:4)}function Ade(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return yL(e,t,0)}function Tde(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(us,""),e.l-s&2&&(e.l+=2)}return r}function Dde(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(us,"");return r}function Ode(e){var t=e.l,r=mg(e,hL);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=mg(e,vs);return[r,n]}function Pde(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(Ode(e));return r}function t6(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);n[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(us,"").replace(Ih,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function vL(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function Ide(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function mg(e,t,r){var n=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==QP&&n!==t&&hde.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===QP?n:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return gL(e,n,4).replace(us,"");case 31:return xL(e);case 64:return uS(e);case 65:return vL(e);case 71:return Ide(e);case 80:return m2(e,n,!i.raw).replace(us,"");case 81:return Ade(e,n).replace(us,"");case 4108:return Pde(e);case 4126:case 4127:return n==4127?Tde(e):Dde(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function r6(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,d=-1,u={};for(o=0;o!=s;++o){var f=e.read_shift(4),m=e.read_shift(4);i[o]=[f,m+r]}i.sort(function(S,w){return S[1]-w[1]});var p={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var g=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,g=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],g=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],g=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(g=!1,e.l=i[o][1]),g)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var b=t[i[o][0]];if(p[b.n]=mg(e,b.t,{raw:!0}),b.p==="version"&&(p[b.n]=String(p[b.n]>>16)+"."+("0000"+String(p[b.n]&65535)).slice(-4)),b.n=="CodePage")switch(p[b.n]){case 0:p[b.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Ii(l=p[b.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[b.n])}}else if(i[o][0]===1){if(l=p.CodePage=mg(e,dS),Ii(l),d!==-1){var y=e.l;e.l=i[d][1],u=t6(e,l),e.l=y}}else if(i[o][0]===0){if(l===0){d=o,e.l=i[o+1][1];continue}u=t6(e,l)}else{var v=u[i[o][0]],k;switch(e[e.l]){case 65:e.l+=4,k=vL(e);break;case 30:e.l+=4,k=m2(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,k=m2(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,k=e.read_shift(4,"i");break;case 19:e.l+=4,k=e.read_shift(4);break;case 5:e.l+=4,k=e.read_shift(8,"f");break;case 11:e.l+=4,k=qa(e,4);break;case 64:e.l+=4,k=kn(uS(e));break;default:throw new Error("unparsed value: "+e[e.l])}p[v]=k}}return e.l=r+n,p}function a6(e,t,r){var n=e.content;if(!n)return{};On(n,0);var s,i,o,l,d=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),f=n.read_shift(16);if(f!==Vr.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),l=n.read_shift(4),s===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);s===2&&(o=n.read_shift(16),d=n.read_shift(4));var m=r6(n,t),p={SystemIdentifier:u};for(var g in m)p[g]=m[g];if(p.FMTID=i,s===1)return p;if(d-n.l==2&&(n.l+=2),n.l!==d)throw new Error("Length mismatch 2: "+n.l+" !== "+d);var b;try{b=r6(n,null)}catch{}for(g in b)p[g]=b[g];return p.FMTID=[i,o],p}function hl(e,t){return e.read_shift(t),null}function Mde(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function qa(e,t){return e.read_shift(t)===1}function Xa(e){return e.read_shift(2,"u")}function bL(e,t){return Mde(e,t,Xa)}function Rde(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function xf(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=n?e.read_shift(n,s):"";return o}function Fde(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,i=1+(r&1),o=0,l,d={};s&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var u=i==2?"dbcs-cont":"sbcs-cont",f=t===0?"":e.read_shift(t,u);return s&&(e.l+=4*o),n&&(e.l+=l),d.t=f,s||(d.raw="<t>"+d.t+"</t>",d.r=d.t),d}function Pc(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function yf(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Pc(e,n,r)}function zc(e,t,r){if(r.biff>5)return yf(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function $de(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Lde(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(us,"");return n&&(e.l+=24),s}function Bde(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(us,"");return r+o}function Ude(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Lde(e);case"0303000000000000c000000000000046":return Bde(e);default:throw new Error("Unsupported Moniker "+r)}}function Hm(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(us,""):"";return r}function Hde(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var i,o,l,d,u="",f,m;s&16&&(i=Hm(e,r-e.l)),s&128&&(o=Hm(e,r-e.l)),(s&257)===257&&(l=Hm(e,r-e.l)),(s&257)===1&&(d=Ude(e,r-e.l)),s&8&&(u=Hm(e,r-e.l)),s&32&&(f=e.read_shift(16)),s&64&&(m=uS(e)),e.l=r;var p=o||l||d||"";p&&u&&(p+="#"+u),p||(p="#"+u),s&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var g={Target:p};return f&&(g.guid=f),m&&(g.time=m),i&&(g.Tooltip=i),g}function wL(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function jL(e,t){var r=wL(e);return r[3]=0,r}function oo(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function qde(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Wde(e,t,r){return t===0?"":zc(e,t,r)}function zde(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),i=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[s,i,o]}function NL(e){var t=e.read_shift(2),r=cS(e);return[t,r]}function Kde(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=xf(e,t,r),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,s}function yx(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function kL(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var Vde=kL;function SL(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function Gde(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Yde(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function qn(e){e.l+=2,e.l+=e.read_shift(2)}var Xde={0:qn,4:qn,5:qn,6:qn,7:Yde,8:qn,9:qn,10:qn,11:qn,12:qn,13:Gde,14:qn,15:qn,16:qn,17:qn,18:qn,19:qn,20:qn,21:SL};function Jde(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(Xde[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function qm(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function Qde(e,t){return t===0||e.read_shift(2),1200}function Zde(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=zc(e,0,r);return e.read_shift(t+n-e.l),s}function eue(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function tue(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=xf(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:s,dt:i,name:o}}function rue(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(Fde(e));return i.Count=n,i.Unique=s,i}function aue(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function nue(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function sue(e){var t=qde(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function iue(e){return e.read_shift(2),e.read_shift(4)}function n6(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function oue(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),d=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:i,CurTab:o,FirstTab:l,Selected:d,TabRatio:u}}function lue(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function cue(){}function due(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=xf(e,0,r),n}function uue(e){var t=oo(e);return t.isst=e.read_shift(4),t}function hue(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=oo(e);r.biff==2&&e.l++;var i=yf(e,n-e.l,r);return s.val=i,s}function fue(e,t,r){var n=e.read_shift(2),s=zc(e,0,r);return[n,s]}var mue=zc;function s6(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),d=e.read_shift(2);return e.l=n,{s:{r:i,c:l},e:{r:o,c:d}}}function pue(e){var t=e.read_shift(2),r=e.read_shift(2),n=NL(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function gue(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(NL(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:o,rkrec:i}}function xue(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:o,ixfe:i}}function yue(e,t,r,n){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),d=e.read_shift(2);return s.patternType=pde[l>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=d&127,s.icvBack=d>>7&127,s.fsxButton=d>>14&1),s}function vue(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=yue(e,t,n.fStyle,r),n}function bue(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function i6(e,t,r){var n=oo(e);(r.biff==2||t==9)&&++e.l;var s=Rde(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function wue(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=oo(e),s=Yn(e);return n.val=s,n}var o6=Wde;function jue(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=Pc(e,i),l=[];n>e.l;)l.push(yf(e));return[i,s,o,l]}function l6(e,t,r){var n=e.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=Kde(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var Nue=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function c6(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),d=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),d=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Pc(e,o,r);s&32&&(u=Nue[u.charCodeAt(0)]);var f=n-e.l;r&&r.biff==2&&--f;var m=n==e.l||l===0||!(f>0)?[]:nme(e,f,r,l);return{chKey:i,Name:u,itab:d,rgce:m}}function _L(e,t,r){if(r.biff<8)return kue(e,t,r);for(var n=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(zde(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function kue(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=xf(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function Sue(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),i=Pc(e,n,r),o=Pc(e,s,r);return[i,o]}function _ue(e,t,r){var n=kL(e);e.l++;var s=e.read_shift(1);return t-=8,[sme(e,t,r),s,n]}function d6(e,t,r){var n=Vde(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,rme(e,t,r)]}function Eue(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function Cue(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=zc(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},l,o,i]}}function Aue(e,t,r){return Cue(e,t,r)}function Tue(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(yx(e));return r}function Due(e,t,r){if(r&&r.biff<8)return Pue(e,t,r);var n=SL(e),s=Jde(e,t-22,n[1]);return{cmo:n,ft:s}}var Oue={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function Pue(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((Oue[n]||Qn)(e,t,r)),{cmo:[s,n,i],ft:o}}function Iue(e,t,r){var n=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=$de(e,6,r);var l=e.read_shift(2);e.read_shift(2),Xa(e,2);var d=e.read_shift(2);e.l+=d;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var f=e[e.l],m=Pc(e,e.lens[u+1]-e.lens[u]-1);if(s+=m,s.length>=(f?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function Mue(e,t){var r=yx(e);e.l+=16;var n=Hde(e,t-24);return[r,n]}function Rue(e,t){e.read_shift(2);var r=yx(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(us,""),[r,n]}function Fue(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=ZP[r]||r,r=e.read_shift(2),t[1]=ZP[r]||r,t}function $ue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(jL(e));return r}function Lue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(jL(e));return r}function Bue(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function EL(e,t,r){if(!r.cellStyles)return Qn(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),d=e.read_shift(2);n==2&&(e.l+=2);var u={s,e:i,w:o,ixfe:l,flags:d};return(r.biff>=5||!r.biff)&&(u.level=d>>8&7),u}function Uue(e,t){var r={};return t<32||(e.l+=16,r.header=Yn(e),r.footer=Yn(e),e.l+=2),r}function Hue(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}var que=oo,Wue=bL,zue=yf;function Kue(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function Vue(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=oo(e);++e.l;var s=zc(e,t-7,r);return n.t="str",n.val=s,n}function Gue(e){var t=oo(e);++e.l;var r=Yn(e);return t.t="n",t.val=r,t}function Yue(e){var t=oo(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function Xue(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Jue(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Que(e,t,r){var n=e.l+t,s=oo(e),i=e.read_shift(2),o=Pc(e,i,r);return e.l=n,s.t="str",s.val=o,s}var Zue=[2,3,48,49,131,139,140,245],u6=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=eS({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,d){var u=[],f=Cl(1);switch(d.type){case"base64":f=Pi(qs(l));break;case"binary":f=Pi(l);break;case"buffer":case"array":f=l;break}On(f,0);var m=f.read_shift(1),p=!!(m&136),g=!1,b=!1;switch(m){case 2:break;case 3:break;case 48:g=!0,p=!0;break;case 49:g=!0,p=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+m.toString(16))}var y=0,v=521;m==2&&(y=f.read_shift(2)),f.l+=3,m!=2&&(y=f.read_shift(4)),y>1048576&&(y=1e6),m!=2&&(v=f.read_shift(2));var k=f.read_shift(2),S=d.codepage||1252;m!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(S=e[f[f.l]]),f.l+=1,f.l+=2),b&&(f.l+=36);for(var w=[],A={},C=Math.min(f.length,m==2?521:v-10-(g?264:0)),N=b?32:11;f.l<C&&f[f.l]!=13;)switch(A={},A.name=V0.utils.decode(S,f.slice(f.l,f.l+N)).replace(/[\u0000\r\n].*$/g,""),f.l+=N,A.type=String.fromCharCode(f.read_shift(1)),m!=2&&!b&&(A.offset=f.read_shift(4)),A.len=f.read_shift(1),m==2&&(A.offset=f.read_shift(2)),A.dec=f.read_shift(1),A.name.length&&w.push(A),m!=2&&(f.l+=b?13:14),A.type){case"B":(!g||A.len!=8)&&d.WTF&&console.log("Skipping "+A.name+":"+A.type);break;case"G":case"P":d.WTF&&console.log("Skipping "+A.name+":"+A.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+A.type)}if(f[f.l]!==13&&(f.l=v-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=v;var E=0,_=0;for(u[0]=[],_=0;_!=w.length;++_)u[0][_]=w[_].name;for(;y-- >0;){if(f[f.l]===42){f.l+=k;continue}for(++f.l,u[++E]=[],_=0,_=0;_!=w.length;++_){var O=f.slice(f.l,f.l+w[_].len);f.l+=w[_].len,On(O,0);var B=V0.utils.decode(S,O);switch(w[_].type){case"C":B.trim().length&&(u[E][_]=B.replace(/\s+$/,""));break;case"D":B.length===8?u[E][_]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):u[E][_]=B;break;case"F":u[E][_]=parseFloat(B.trim());break;case"+":case"I":u[E][_]=b?O.read_shift(-4,"i")^2147483648:O.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":u[E][_]=!0;break;case"N":case"F":u[E][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+m.toString(16));u[E][_]="##MEMO##"+(b?parseInt(B.trim(),10):O.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(u[E][_]=+B||0);break;case"@":u[E][_]=new Date(O.read_shift(-8,"f")-621356832e5);break;case"T":u[E][_]=new Date((O.read_shift(4)-2440588)*864e5+O.read_shift(4));break;case"Y":u[E][_]=O.read_shift(4,"i")/1e4+O.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][_]=-O.read_shift(-8,"f");break;case"B":if(g&&w[_].len==8){u[E][_]=O.read_shift(8,"f");break}case"G":case"P":O.l+=w[_].len;break;case"0":if(w[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[_].type)}}}if(m!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return d&&d.sheetRows&&(u=u.slice(0,d.sheetRows)),d.DBF=w,u}function n(l,d){var u=d||{};u.dateNF||(u.dateNF="yyyymmdd");var f=$u(r(l,u),u);return f["!cols"]=u.DBF.map(function(m){return{wch:m.len,DBF:m}}),delete u.DBF,f}function s(l,d){try{return Ml(n(l,d),d)}catch(u){if(d&&d.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,d){var u=d||{};if(+u.codepage>=0&&Ii(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var f=u2(),m=w2(l,{header:1,raw:!0,cellDates:!0}),p=m[0],g=m.slice(1),b=l["!cols"]||[],y=0,v=0,k=0,S=1;for(y=0;y<p.length;++y){if(((b[y]||{}).DBF||{}).name){p[y]=b[y].DBF.name,++k;continue}if(p[y]!=null){if(++k,typeof p[y]=="number"&&(p[y]=p[y].toString(10)),typeof p[y]!="string")throw new Error("DBF Invalid column name "+p[y]+" |"+typeof p[y]+"|");if(p.indexOf(p[y])!==y){for(v=0;v<1024;++v)if(p.indexOf(p[y]+"_"+v)==-1){p[y]+="_"+v;break}}}}var w=Ba(l["!ref"]),A=[],C=[],N=[];for(y=0;y<=w.e.c-w.s.c;++y){var E="",_="",O=0,B=[];for(v=0;v<g.length;++v)g[v][y]!=null&&B.push(g[v][y]);if(B.length==0||p[y]==null){A[y]="?";continue}for(v=0;v<B.length;++v){switch(typeof B[v]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=B[v]instanceof Date?"D":"C";break;default:_="C"}O=Math.max(O,String(B[v]).length),E=E&&E!=_?"C":_}O>250&&(O=250),_=((b[y]||{}).DBF||{}).type,_=="C"&&b[y].DBF.len>O&&(O=b[y].DBF.len),E=="B"&&_=="N"&&(E="N",N[y]=b[y].DBF.dec,O=b[y].DBF.len),C[y]=E=="C"||_=="N"?O:i[E]||0,S+=C[y],A[y]=E}var F=f.next(32);for(F.write_shift(4,318902576),F.write_shift(4,g.length),F.write_shift(2,296+32*k),F.write_shift(2,S),y=0;y<4;++y)F.write_shift(4,0);for(F.write_shift(4,0|(+t[_$]||3)<<8),y=0,v=0;y<p.length;++y)if(p[y]!=null){var D=f.next(32),H=(p[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);D.write_shift(1,H,"sbcs"),D.write_shift(1,A[y]=="?"?"C":A[y],"sbcs"),D.write_shift(4,v),D.write_shift(1,C[y]||i[A[y]]||0),D.write_shift(1,N[y]||0),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(1,0),D.write_shift(4,0),D.write_shift(4,0),v+=C[y]||i[A[y]]||0}var ne=f.next(264);for(ne.write_shift(4,13),y=0;y<65;++y)ne.write_shift(4,0);for(y=0;y<g.length;++y){var W=f.next(S);for(W.write_shift(1,0),v=0;v<p.length;++v)if(p[v]!=null)switch(A[v]){case"L":W.write_shift(1,g[y][v]==null?63:g[y][v]?84:70);break;case"B":W.write_shift(8,g[y][v]||0,"f");break;case"N":var ee="0";for(typeof g[y][v]=="number"&&(ee=g[y][v].toFixed(N[v]||0)),k=0;k<C[v]-ee.length;++k)W.write_shift(1,32);W.write_shift(1,ee,"sbcs");break;case"D":g[y][v]?(W.write_shift(4,("0000"+g[y][v].getFullYear()).slice(-4),"sbcs"),W.write_shift(2,("00"+(g[y][v].getMonth()+1)).slice(-2),"sbcs"),W.write_shift(2,("00"+g[y][v].getDate()).slice(-2),"sbcs")):W.write_shift(8,"00000000","sbcs");break;case"C":var re=String(g[y][v]!=null?g[y][v]:"").slice(0,C[v]);for(W.write_shift(1,re,"sbcs"),k=0;k<C[v]-re.length;++k)W.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:s,to_sheet:n,from_sheet:o}})(),ehe=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+ro(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,g){var b=e[g];return typeof b=="number"?EP(b):b},n=function(p,g,b){var y=g.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return y==59?p:EP(y)};e["|"]=254;function s(p,g){switch(g.type){case"base64":return i(qs(p),g);case"binary":return i(p,g);case"buffer":return i(Hr&&Buffer.isBuffer(p)?p.toString("binary"):Uc(p),g);case"array":return i(Oc(p),g)}throw new Error("Unrecognized type "+g.type)}function i(p,g){var b=p.split(/[\n\r]+/),y=-1,v=-1,k=0,S=0,w=[],A=[],C=null,N={},E=[],_=[],O=[],B=0,F;for(+g.codepage>=0&&Ii(+g.codepage);k!==b.length;++k){B=0;var D=b[k].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),H=D.replace(/;;/g,"\0").split(";").map(function(Z){return Z.replace(/\u0000/g,";")}),ne=H[0],W;if(D.length>0)switch(ne){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":H[1].charAt(0)=="P"&&A.push(D.slice(3).replace(/;;/g,";"));break;case"C":var ee=!1,re=!1,Q=!1,R=!1,X=-1,L=-1;for(S=1;S<H.length;++S)switch(H[S].charAt(0)){case"A":break;case"X":v=parseInt(H[S].slice(1))-1,re=!0;break;case"Y":for(y=parseInt(H[S].slice(1))-1,re||(v=0),F=w.length;F<=y;++F)w[F]=[];break;case"K":W=H[S].slice(1),W.charAt(0)==='"'?W=W.slice(1,W.length-1):W==="TRUE"?W=!0:W==="FALSE"?W=!1:isNaN(Fi(W))?isNaN(vu(W).getDate())||(W=kn(W)):(W=Fi(W),C!==null&&Ru(C)&&(W=xx(W))),ee=!0;break;case"E":R=!0;var I=Wd(H[S].slice(1),{r:y,c:v});w[y][v]=[w[y][v],I];break;case"S":Q=!0,w[y][v]=[w[y][v],"S5S"];break;case"G":break;case"R":X=parseInt(H[S].slice(1))-1;break;case"C":L=parseInt(H[S].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+D)}if(ee&&(w[y][v]&&w[y][v].length==2?w[y][v][0]=W:w[y][v]=W,C=null),Q){if(R)throw new Error("SYLK shared formula cannot have own formula");var G=X>-1&&w[X][L];if(!G||!G[1])throw new Error("SYLK shared formula cannot find base");w[y][v][1]=FL(G[1],{r:y-X,c:v-L})}break;case"F":var V=0;for(S=1;S<H.length;++S)switch(H[S].charAt(0)){case"X":v=parseInt(H[S].slice(1))-1,++V;break;case"Y":for(y=parseInt(H[S].slice(1))-1,F=w.length;F<=y;++F)w[F]=[];break;case"M":B=parseInt(H[S].slice(1))/20;break;case"F":break;case"G":break;case"P":C=A[parseInt(H[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(O=H[S].slice(1).split(" "),F=parseInt(O[0],10);F<=parseInt(O[1],10);++F)B=parseInt(O[2],10),_[F-1]=B===0?{hidden:!0}:{wch:B},bu(_[F-1]);break;case"C":v=parseInt(H[S].slice(1))-1,_[v]||(_[v]={});break;case"R":y=parseInt(H[S].slice(1))-1,E[y]||(E[y]={}),B>0?(E[y].hpt=B,E[y].hpx=Z0(B)):B===0&&(E[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+D)}V<1&&(C=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+D)}}return E.length>0&&(N["!rows"]=E),_.length>0&&(N["!cols"]=_),g&&g.sheetRows&&(w=w.slice(0,g.sheetRows)),[w,N]}function o(p,g){var b=s(p,g),y=b[0],v=b[1],k=$u(y,g);return ro(v).forEach(function(S){k[S]=v[S]}),k}function l(p,g){return Ml(o(p,g),g)}function d(p,g,b,y){var v="C;Y"+(b+1)+";X"+(y+1)+";K";switch(p.t){case"n":v+=p.v||0,p.f&&!p.F&&(v+=";E"+B0e(p.f,{r:b,c:y}));break;case"b":v+=p.v?"TRUE":"FALSE";break;case"e":v+=p.w||p.v;break;case"d":v+='"'+(p.w||p.v)+'"';break;case"s":v+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(p,g){g.forEach(function(b,y){var v="F;W"+(y+1)+" "+(y+1)+" ";b.hidden?v+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=gg(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=xg(b.wpx)),typeof b.wch=="number"&&(v+=Math.round(b.wch))),v.charAt(v.length-1)!=" "&&p.push(v)})}function f(p,g){g.forEach(function(b,y){var v="F;";b.hidden?v+="M0;":b.hpt?v+="M"+20*b.hpt+";":b.hpx&&(v+="M"+20*IL(b.hpx)+";"),v.length>2&&p.push(v+"R"+(y+1))})}function m(p,g){var b=["ID;PWXL;N;E"],y=[],v=Ba(p["!ref"]),k,S=Array.isArray(p),w=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),p["!cols"]&&u(b,p["!cols"]),p["!rows"]&&f(b,p["!rows"]),b.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var A=v.s.r;A<=v.e.r;++A)for(var C=v.s.c;C<=v.e.c;++C){var N=kr({r:A,c:C});k=S?(p[A]||[])[C]:p[N],!(!k||k.v==null&&(!k.f||k.F))&&y.push(d(k,p,A,C))}return b.join(w)+w+y.join(w)+w+"E"+w}return{to_workbook:l,to_sheet:o,from_sheet:m}})(),the=(function(){function e(i,o){switch(o.type){case"base64":return t(qs(i),o);case"binary":return t(i,o);case"buffer":return t(Hr&&Buffer.isBuffer(i)?i.toString("binary"):Uc(i),o);case"array":return t(Oc(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),d=-1,u=-1,f=0,m=[];f!==l.length;++f){if(l[f].trim()==="BOT"){m[++d]=[],u=0;continue}if(!(d<0)){var p=l[f].trim().split(","),g=p[0],b=p[1];++f;for(var y=l[f]||"";(y.match(/["]/g)||[]).length&1&&f<l.length-1;)y+=`
`+l[++f];switch(y=y.trim(),+g){case-1:if(y==="BOT"){m[++d]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?m[d][u]=!0:y==="FALSE"?m[d][u]=!1:isNaN(Fi(b))?isNaN(vu(b).getDate())?m[d][u]=b:m[d][u]=kn(b):m[d][u]=Fi(b),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),m[d][u++]=y!==""?y:null;break}if(y==="EOD")break}}return o&&o.sheetRows&&(m=m.slice(0,o.sheetRows)),m}function r(i,o){return $u(e(i,o),o)}function n(i,o){return Ml(r(i,o),o)}var s=(function(){var i=function(d,u,f,m,p){d.push(u),d.push(f+","+m),d.push('"'+p.replace(/"/g,'""')+'"')},o=function(d,u,f,m){d.push(u+","+f),d.push(u==1?'"'+m.replace(/"/g,'""')+'"':m)};return function(d){var u=[],f=Ba(d["!ref"]),m,p=Array.isArray(d);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,f.e.r-f.s.r+1,""),i(u,"TUPLES",0,f.e.c-f.s.c+1,""),i(u,"DATA",0,0,"");for(var g=f.s.r;g<=f.e.r;++g){o(u,-1,0,"BOT");for(var b=f.s.c;b<=f.e.c;++b){var y=kr({r:g,c:b});if(m=p?(d[g]||[])[b]:d[y],!m){o(u,1,0,"");continue}switch(m.t){case"n":var v=m.w;!v&&m.v!=null&&(v=m.v),v==null?m.f&&!m.F?o(u,1,0,"="+m.f):o(u,1,0,""):o(u,0,v,"V");break;case"b":o(u,0,m.v?1:0,m.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(m.v)?m.v:'="'+m.v+'"');break;case"d":m.w||(m.w=ui(m.z||Cr[14],hs(kn(m.v)))),o(u,0,m.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var k=`\r
`,S=u.join(k);return S}})();return{to_workbook:n,to_sheet:r,from_sheet:s}})(),rhe=(function(){function e(m){return m.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(m){return m.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(m,p){for(var g=m.split(`
`),b=-1,y=-1,v=0,k=[];v!==g.length;++v){var S=g[v].trim().split(":");if(S[0]==="cell"){var w=ds(S[1]);if(k.length<=w.r)for(b=k.length;b<=w.r;++b)k[b]||(k[b]=[]);switch(b=w.r,y=w.c,S[2]){case"t":k[b][y]=e(S[3]);break;case"v":k[b][y]=+S[3];break;case"vtf":var A=S[S.length-1];case"vtc":switch(S[3]){case"nl":k[b][y]=!!+S[4];break;default:k[b][y]=+S[4];break}S[2]=="vtf"&&(k[b][y]=[k[b][y],A])}}}return p&&p.sheetRows&&(k=k.slice(0,p.sheetRows)),k}function n(m,p){return $u(r(m,p),p)}function s(m,p){return Ml(n(m,p),p)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),d="--SocialCalcSpreadsheetControlSave--";function u(m){if(!m||!m["!ref"])return"";for(var p=[],g=[],b,y="",v=Fu(m["!ref"]),k=Array.isArray(m),S=v.s.r;S<=v.e.r;++S)for(var w=v.s.c;w<=v.e.c;++w)if(y=kr({r:S,c:w}),b=k?(m[S]||[])[w]:m[y],!(!b||b.v==null||b.t==="z")){switch(g=["cell",y,"t"],b.t){case"s":case"str":g.push(t(b.v));break;case"n":b.f?(g[2]="vtf",g[3]="n",g[4]=b.v,g[5]=t(b.f)):(g[2]="v",g[3]=b.v);break;case"b":g[2]="vt"+(b.f?"f":"c"),g[3]="nl",g[4]=b.v?"1":"0",g[5]=t(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var A=hs(kn(b.v));g[2]="vtc",g[3]="nd",g[4]=""+A,g[5]=b.w||ui(b.z||Cr[14],A);break;case"e":continue}p.push(g.join(":"))}return p.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function f(m){return[i,o,l,o,u(m),d].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:f}})(),J0=(function(){function e(f,m,p,g,b){b.raw?m[p][g]=f:f===""||(f==="TRUE"?m[p][g]=!0:f==="FALSE"?m[p][g]=!1:isNaN(Fi(f))?isNaN(vu(f).getDate())?m[p][g]=f:m[p][g]=kn(f):m[p][g]=Fi(f))}function t(f,m){var p=m||{},g=[];if(!f||f.length===0)return g;for(var b=f.split(/[\r\n]/),y=b.length-1;y>=0&&b[y].length===0;)--y;for(var v=10,k=0,S=0;S<=y;++S)k=b[S].indexOf(" "),k==-1?k=b[S].length:k++,v=Math.max(v,k);for(S=0;S<=y;++S){g[S]=[];var w=0;for(e(b[S].slice(0,v).trim(),g,S,w,p),w=1;w<=(b[S].length-v)/10+1;++w)e(b[S].slice(v+(w-1)*10,v+w*10).trim(),g,S,w,p)}return p.sheetRows&&(g=g.slice(0,p.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(f){for(var m={},p=!1,g=0,b=0;g<f.length;++g)(b=f.charCodeAt(g))==34?p=!p:!p&&b in r&&(m[b]=(m[b]||0)+1);b=[];for(g in m)Object.prototype.hasOwnProperty.call(m,g)&&b.push([m[g],g]);if(!b.length){m=n;for(g in m)Object.prototype.hasOwnProperty.call(m,g)&&b.push([m[g],g])}return b.sort(function(y,v){return y[0]-v[0]||n[y[1]]-n[v[1]]}),r[b.pop()[1]]||44}function i(f,m){var p=m||{},g="",b=p.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(g=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(g=f.charAt(4),f=f.slice(6)):g=s(f.slice(0,1024)):p&&p.FS?g=p.FS:g=s(f.slice(0,1024));var v=0,k=0,S=0,w=0,A=0,C=g.charCodeAt(0),N=!1,E=0,_=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var O=p.dateNF!=null?fce(p.dateNF):null;function B(){var F=f.slice(w,A),D={};if(F.charAt(0)=='"'&&F.charAt(F.length-1)=='"'&&(F=F.slice(1,-1).replace(/""/g,'"')),F.length===0)D.t="z";else if(p.raw)D.t="s",D.v=F;else if(F.trim().length===0)D.t="s",D.v=F;else if(F.charCodeAt(0)==61)F.charCodeAt(1)==34&&F.charCodeAt(F.length-1)==34?(D.t="s",D.v=F.slice(2,-1).replace(/""/g,'"')):H0e(F)?(D.t="n",D.f=F.slice(1)):(D.t="s",D.v=F);else if(F=="TRUE")D.t="b",D.v=!0;else if(F=="FALSE")D.t="b",D.v=!1;else if(!isNaN(S=Fi(F)))D.t="n",p.cellText!==!1&&(D.w=F),D.v=S;else if(!isNaN(vu(F).getDate())||O&&F.match(O)){D.z=p.dateNF||Cr[14];var H=0;O&&F.match(O)&&(F=mce(F,p.dateNF,F.match(O)||[]),H=1),p.cellDates?(D.t="d",D.v=kn(F,H)):(D.t="n",D.v=hs(kn(F,H))),p.cellText!==!1&&(D.w=ui(D.z,D.v instanceof Date?hs(D.v):D.v)),p.cellNF||delete D.z}else D.t="s",D.v=F;if(D.t=="z"||(p.dense?(b[v]||(b[v]=[]),b[v][k]=D):b[kr({c:k,r:v})]=D),w=A+1,_=f.charCodeAt(w),y.e.c<k&&(y.e.c=k),y.e.r<v&&(y.e.r=v),E==C)++k;else if(k=0,++v,p.sheetRows&&p.sheetRows<=v)return!0}e:for(;A<f.length;++A)switch(E=f.charCodeAt(A)){case 34:_===34&&(N=!N);break;case C:case 10:case 13:if(!N&&B())break e;break}return A-w>0&&B(),b["!ref"]=Gr(y),b}function o(f,m){return!(m&&m.PRN)||m.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?i(f,m):$u(t(f,m),m)}function l(f,m){var p="",g=m.type=="string"?[0,0,0,0]:vS(f,m);switch(m.type){case"base64":p=qs(f);break;case"binary":p=f;break;case"buffer":m.codepage==65001?p=f.toString("utf8"):m.codepage&&typeof V0<"u"||(p=Hr&&Buffer.isBuffer(f)?f.toString("binary"):Uc(f));break;case"array":p=Oc(f);break;case"string":p=f;break;default:throw new Error("Unrecognized type "+m.type)}return g[0]==239&&g[1]==187&&g[2]==191?p=ba(p.slice(3)):m.type!="string"&&m.type!="buffer"&&m.codepage==65001?p=ba(p):m.type=="binary"&&typeof V0<"u",p.slice(0,19)=="socialcalc:version:"?rhe.to_sheet(m.type=="string"?p:ba(p),m):o(p,m)}function d(f,m){return Ml(l(f,m),m)}function u(f){for(var m=[],p=Ba(f["!ref"]),g,b=Array.isArray(f),y=p.s.r;y<=p.e.r;++y){for(var v=[],k=p.s.c;k<=p.e.c;++k){var S=kr({r:y,c:k});if(g=b?(f[y]||[])[k]:f[S],!g||g.v==null){v.push("          ");continue}for(var w=(g.w||(Wo(g),g.w)||"").slice(0,10);w.length<10;)w+=" ";v.push(w+(k===0?" ":""))}m.push(v.join(""))}return m.join(`
`)}return{to_workbook:d,to_sheet:l,from_sheet:u}})();function ahe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=ehe.to_workbook(e,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return J0.to_workbook(e,t)}}var Jh=(function(){function e(I,G,V){if(I){On(I,I.l||0);for(var Z=V.Enum||X;I.l<I.length;){var ve=I.read_shift(2),Ee=Z[ve]||Z[65535],Te=I.read_shift(2),ue=I.l+Te,ge=Ee.f&&Ee.f(I,Te,V);if(I.l=ue,G(ge,Ee,ve))return}}}function t(I,G){switch(G.type){case"base64":return r(Pi(qs(I)),G);case"binary":return r(Pi(I),G);case"buffer":case"array":return r(I,G)}throw"Unsupported type "+G.type}function r(I,G){if(!I)return I;var V=G||{},Z=V.dense?[]:{},ve="Sheet1",Ee="",Te=0,ue={},ge=[],Fe=[],J={s:{r:0,c:0},e:{r:0,c:0}},Ze=V.sheetRows||0;if(I[2]==0&&(I[3]==8||I[3]==9)&&I.length>=16&&I[14]==5&&I[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(I[2]==2)V.Enum=X,e(I,function(Re,Ce,Se){switch(Se){case 0:V.vers=Re,Re>=4096&&(V.qpro=!0);break;case 6:J=Re;break;case 204:Re&&(Ee=Re);break;case 222:Ee=Re;break;case 15:case 51:V.qpro||(Re[1].v=Re[1].v.slice(1));case 13:case 14:case 16:Se==14&&(Re[2]&112)==112&&(Re[2]&15)>1&&(Re[2]&15)<15&&(Re[1].z=V.dateNF||Cr[14],V.cellDates&&(Re[1].t="d",Re[1].v=xx(Re[1].v))),V.qpro&&Re[3]>Te&&(Z["!ref"]=Gr(J),ue[ve]=Z,ge.push(ve),Z=V.dense?[]:{},J={s:{r:0,c:0},e:{r:0,c:0}},Te=Re[3],ve=Ee||"Sheet"+(Te+1),Ee="");var Qe=V.dense?(Z[Re[0].r]||[])[Re[0].c]:Z[kr(Re[0])];if(Qe){Qe.t=Re[1].t,Qe.v=Re[1].v,Re[1].z!=null&&(Qe.z=Re[1].z),Re[1].f!=null&&(Qe.f=Re[1].f);break}V.dense?(Z[Re[0].r]||(Z[Re[0].r]=[]),Z[Re[0].r][Re[0].c]=Re[1]):Z[kr(Re[0])]=Re[1];break}},V);else if(I[2]==26||I[2]==14)V.Enum=L,I[2]==14&&(V.qpro=!0,I.l=0),e(I,function(Re,Ce,Se){switch(Se){case 204:ve=Re;break;case 22:Re[1].v=Re[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Re[3]>Te&&(Z["!ref"]=Gr(J),ue[ve]=Z,ge.push(ve),Z=V.dense?[]:{},J={s:{r:0,c:0},e:{r:0,c:0}},Te=Re[3],ve="Sheet"+(Te+1)),Ze>0&&Re[0].r>=Ze)break;V.dense?(Z[Re[0].r]||(Z[Re[0].r]=[]),Z[Re[0].r][Re[0].c]=Re[1]):Z[kr(Re[0])]=Re[1],J.e.c<Re[0].c&&(J.e.c=Re[0].c),J.e.r<Re[0].r&&(J.e.r=Re[0].r);break;case 27:Re[14e3]&&(Fe[Re[14e3][0]]=Re[14e3][1]);break;case 1537:Fe[Re[0]]=Re[1],Re[0]==Te&&(ve=Re[1]);break}},V);else throw new Error("Unrecognized LOTUS BOF "+I[2]);if(Z["!ref"]=Gr(J),ue[Ee||ve]=Z,ge.push(Ee||ve),!Fe.length)return{SheetNames:ge,Sheets:ue};for(var rt={},Tt=[],ze=0;ze<Fe.length;++ze)ue[ge[ze]]?(Tt.push(Fe[ze]||ge[ze]),rt[Fe[ze]]=ue[Fe[ze]]||ue[ge[ze]]):(Tt.push(Fe[ze]),rt[Fe[ze]]={"!ref":"A1"});return{SheetNames:Tt,Sheets:rt}}function n(I,G){var V=G||{};if(+V.codepage>=0&&Ii(+V.codepage),V.type=="string")throw new Error("Cannot write WK1 to JS string");var Z=u2(),ve=Ba(I["!ref"]),Ee=Array.isArray(I),Te=[];Ni(Z,0,i(1030)),Ni(Z,6,d(ve));for(var ue=Math.min(ve.e.r,8191),ge=ve.s.r;ge<=ue;++ge)for(var Fe=Rn(ge),J=ve.s.c;J<=ve.e.c;++J){ge===ve.s.r&&(Te[J]=mn(J));var Ze=Te[J]+Fe,rt=Ee?(I[ge]||[])[J]:I[Ze];if(!(!rt||rt.t=="z"))if(rt.t=="n")(rt.v|0)==rt.v&&rt.v>=-32768&&rt.v<=32767?Ni(Z,13,g(ge,J,rt.v)):Ni(Z,14,y(ge,J,rt.v));else{var Tt=Wo(rt);Ni(Z,15,m(ge,J,Tt.slice(0,239)))}}return Ni(Z,1),Z.end()}function s(I,G){var V=G||{};if(+V.codepage>=0&&Ii(+V.codepage),V.type=="string")throw new Error("Cannot write WK3 to JS string");var Z=u2();Ni(Z,0,o(I));for(var ve=0,Ee=0;ve<I.SheetNames.length;++ve)(I.Sheets[I.SheetNames[ve]]||{})["!ref"]&&Ni(Z,27,R(I.SheetNames[ve],Ee++));var Te=0;for(ve=0;ve<I.SheetNames.length;++ve){var ue=I.Sheets[I.SheetNames[ve]];if(!(!ue||!ue["!ref"])){for(var ge=Ba(ue["!ref"]),Fe=Array.isArray(ue),J=[],Ze=Math.min(ge.e.r,8191),rt=ge.s.r;rt<=Ze;++rt)for(var Tt=Rn(rt),ze=ge.s.c;ze<=ge.e.c;++ze){rt===ge.s.r&&(J[ze]=mn(ze));var Re=J[ze]+Tt,Ce=Fe?(ue[rt]||[])[ze]:ue[Re];if(!(!Ce||Ce.t=="z"))if(Ce.t=="n")Ni(Z,23,B(rt,ze,Te,Ce.v));else{var Se=Wo(Ce);Ni(Z,22,E(rt,ze,Te,Se.slice(0,239)))}}++Te}}return Ni(Z,1),Z.end()}function i(I){var G=un(2);return G.write_shift(2,I),G}function o(I){var G=un(26);G.write_shift(2,4096),G.write_shift(2,4),G.write_shift(4,0);for(var V=0,Z=0,ve=0,Ee=0;Ee<I.SheetNames.length;++Ee){var Te=I.SheetNames[Ee],ue=I.Sheets[Te];if(!(!ue||!ue["!ref"])){++ve;var ge=Fu(ue["!ref"]);V<ge.e.r&&(V=ge.e.r),Z<ge.e.c&&(Z=ge.e.c)}}return V>8191&&(V=8191),G.write_shift(2,V),G.write_shift(1,ve),G.write_shift(1,Z),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(1,1),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(4,0),G}function l(I,G,V){var Z={s:{c:0,r:0},e:{c:0,r:0}};return G==8&&V.qpro?(Z.s.c=I.read_shift(1),I.l++,Z.s.r=I.read_shift(2),Z.e.c=I.read_shift(1),I.l++,Z.e.r=I.read_shift(2),Z):(Z.s.c=I.read_shift(2),Z.s.r=I.read_shift(2),G==12&&V.qpro&&(I.l+=2),Z.e.c=I.read_shift(2),Z.e.r=I.read_shift(2),G==12&&V.qpro&&(I.l+=2),Z.s.c==65535&&(Z.s.c=Z.e.c=Z.s.r=Z.e.r=0),Z)}function d(I){var G=un(8);return G.write_shift(2,I.s.c),G.write_shift(2,I.s.r),G.write_shift(2,I.e.c),G.write_shift(2,I.e.r),G}function u(I,G,V){var Z=[{c:0,r:0},{t:"n",v:0},0,0];return V.qpro&&V.vers!=20768?(Z[0].c=I.read_shift(1),Z[3]=I.read_shift(1),Z[0].r=I.read_shift(2),I.l+=2):(Z[2]=I.read_shift(1),Z[0].c=I.read_shift(2),Z[0].r=I.read_shift(2)),Z}function f(I,G,V){var Z=I.l+G,ve=u(I,G,V);if(ve[1].t="s",V.vers==20768){I.l++;var Ee=I.read_shift(1);return ve[1].v=I.read_shift(Ee,"utf8"),ve}return V.qpro&&I.l++,ve[1].v=I.read_shift(Z-I.l,"cstr"),ve}function m(I,G,V){var Z=un(7+V.length);Z.write_shift(1,255),Z.write_shift(2,G),Z.write_shift(2,I),Z.write_shift(1,39);for(var ve=0;ve<Z.length;++ve){var Ee=V.charCodeAt(ve);Z.write_shift(1,Ee>=128?95:Ee)}return Z.write_shift(1,0),Z}function p(I,G,V){var Z=u(I,G,V);return Z[1].v=I.read_shift(2,"i"),Z}function g(I,G,V){var Z=un(7);return Z.write_shift(1,255),Z.write_shift(2,G),Z.write_shift(2,I),Z.write_shift(2,V,"i"),Z}function b(I,G,V){var Z=u(I,G,V);return Z[1].v=I.read_shift(8,"f"),Z}function y(I,G,V){var Z=un(13);return Z.write_shift(1,255),Z.write_shift(2,G),Z.write_shift(2,I),Z.write_shift(8,V,"f"),Z}function v(I,G,V){var Z=I.l+G,ve=u(I,G,V);if(ve[1].v=I.read_shift(8,"f"),V.qpro)I.l=Z;else{var Ee=I.read_shift(2);A(I.slice(I.l,I.l+Ee),ve),I.l+=Ee}return ve}function k(I,G,V){var Z=G&32768;return G&=-32769,G=(Z?I:0)+(G>=8192?G-16384:G),(Z?"":"$")+(V?mn(G):Rn(G))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function A(I,G){On(I,0);for(var V=[],Z=0,ve="",Ee="",Te="",ue="";I.l<I.length;){var ge=I[I.l++];switch(ge){case 0:V.push(I.read_shift(8,"f"));break;case 1:Ee=k(G[0].c,I.read_shift(2),!0),ve=k(G[0].r,I.read_shift(2),!1),V.push(Ee+ve);break;case 2:{var Fe=k(G[0].c,I.read_shift(2),!0),J=k(G[0].r,I.read_shift(2),!1);Ee=k(G[0].c,I.read_shift(2),!0),ve=k(G[0].r,I.read_shift(2),!1),V.push(Fe+J+":"+Ee+ve)}break;case 3:if(I.l<I.length){console.error("WK1 premature formula end");return}break;case 4:V.push("("+V.pop()+")");break;case 5:V.push(I.read_shift(2));break;case 6:{for(var Ze="";ge=I[I.l++];)Ze+=String.fromCharCode(ge);V.push('"'+Ze.replace(/"/g,'""')+'"')}break;case 8:V.push("-"+V.pop());break;case 23:V.push("+"+V.pop());break;case 22:V.push("NOT("+V.pop()+")");break;case 20:case 21:ue=V.pop(),Te=V.pop(),V.push(["AND","OR"][ge-20]+"("+Te+","+ue+")");break;default:if(ge<32&&w[ge])ue=V.pop(),Te=V.pop(),V.push(Te+w[ge]+ue);else if(S[ge]){if(Z=S[ge][1],Z==69&&(Z=I[I.l++]),Z>V.length){console.error("WK1 bad formula parse 0x"+ge.toString(16)+":|"+V.join("|")+"|");return}var rt=V.slice(-Z);V.length-=Z,V.push(S[ge][0]+"("+rt.join(",")+")")}else return ge<=7?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=24?console.error("WK1 unsupported op "+ge.toString(16)):ge<=30?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=115?console.error("WK1 unsupported function opcode "+ge.toString(16)):console.error("WK1 unrecognized opcode "+ge.toString(16))}}V.length==1?G[1].f=""+V[0]:console.error("WK1 bad formula parse |"+V.join("|")+"|")}function C(I){var G=[{c:0,r:0},{t:"n",v:0},0];return G[0].r=I.read_shift(2),G[3]=I[I.l++],G[0].c=I[I.l++],G}function N(I,G){var V=C(I);return V[1].t="s",V[1].v=I.read_shift(G-4,"cstr"),V}function E(I,G,V,Z){var ve=un(6+Z.length);ve.write_shift(2,I),ve.write_shift(1,V),ve.write_shift(1,G),ve.write_shift(1,39);for(var Ee=0;Ee<Z.length;++Ee){var Te=Z.charCodeAt(Ee);ve.write_shift(1,Te>=128?95:Te)}return ve.write_shift(1,0),ve}function _(I,G){var V=C(I);V[1].v=I.read_shift(2);var Z=V[1].v>>1;if(V[1].v&1)switch(Z&7){case 0:Z=(Z>>3)*5e3;break;case 1:Z=(Z>>3)*500;break;case 2:Z=(Z>>3)/20;break;case 3:Z=(Z>>3)/200;break;case 4:Z=(Z>>3)/2e3;break;case 5:Z=(Z>>3)/2e4;break;case 6:Z=(Z>>3)/16;break;case 7:Z=(Z>>3)/64;break}return V[1].v=Z,V}function O(I,G){var V=C(I),Z=I.read_shift(4),ve=I.read_shift(4),Ee=I.read_shift(2);if(Ee==65535)return Z===0&&ve===3221225472?(V[1].t="e",V[1].v=15):Z===0&&ve===3489660928?(V[1].t="e",V[1].v=42):V[1].v=0,V;var Te=Ee&32768;return Ee=(Ee&32767)-16446,V[1].v=(1-Te*2)*(ve*Math.pow(2,Ee+32)+Z*Math.pow(2,Ee)),V}function B(I,G,V,Z){var ve=un(14);if(ve.write_shift(2,I),ve.write_shift(1,V),ve.write_shift(1,G),Z==0)return ve.write_shift(4,0),ve.write_shift(4,0),ve.write_shift(2,65535),ve;var Ee=0,Te=0,ue=0,ge=0;return Z<0&&(Ee=1,Z=-Z),Te=Math.log2(Z)|0,Z/=Math.pow(2,Te-31),ge=Z>>>0,(ge&2147483648)==0&&(Z/=2,++Te,ge=Z>>>0),Z-=ge,ge|=2147483648,ge>>>=0,Z*=Math.pow(2,32),ue=Z>>>0,ve.write_shift(4,ue),ve.write_shift(4,ge),Te+=16383+(Ee?32768:0),ve.write_shift(2,Te),ve}function F(I,G){var V=O(I);return I.l+=G-14,V}function D(I,G){var V=C(I),Z=I.read_shift(4);return V[1].v=Z>>6,V}function H(I,G){var V=C(I),Z=I.read_shift(8,"f");return V[1].v=Z,V}function ne(I,G){var V=H(I);return I.l+=G-10,V}function W(I,G){return I[I.l+G-1]==0?I.read_shift(G,"cstr"):""}function ee(I,G){var V=I[I.l++];V>G-1&&(V=G-1);for(var Z="";Z.length<V;)Z+=String.fromCharCode(I[I.l++]);return Z}function re(I,G,V){if(!(!V.qpro||G<21)){var Z=I.read_shift(1);I.l+=17,I.l+=1,I.l+=2;var ve=I.read_shift(G-21,"cstr");return[Z,ve]}}function Q(I,G){for(var V={},Z=I.l+G;I.l<Z;){var ve=I.read_shift(2);if(ve==14e3){for(V[ve]=[0,""],V[ve][0]=I.read_shift(2);I[I.l];)V[ve][1]+=String.fromCharCode(I[I.l]),I.l++;I.l++}}return V}function R(I,G){var V=un(5+I.length);V.write_shift(2,14e3),V.write_shift(2,G);for(var Z=0;Z<I.length;++Z){var ve=I.charCodeAt(Z);V[V.l++]=ve>127?95:ve}return V[V.l++]=0,V}var X={0:{n:"BOF",f:Xa},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:b},15:{n:"LABEL",f},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:W},222:{n:"SHEETNAMELP",f:ee},65535:{n:""}},L={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:N},23:{n:"NUMBER17",f:O},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:F},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Q},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:D},38:{n:"??"},39:{n:"NUMBER27",f:H},40:{n:"FORMULA28",f:ne},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:W},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:re},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}})();function nhe(e){var t={},r=e.match(Zn),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=xr(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=Yk[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var she=(function(){var e=Y0("t"),t=Y0("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Xr(o[1])},d=i.match(t);return d&&(l.s=nhe(d[1])),l}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(s).map(r).filter(function(l){return l.v})}})(),ihe=(function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var d=s.valign||"";return d=="superscript"||d=="super"?d="sup":d=="subscript"&&(d="sub"),d!=""&&(i.push("<"+d+">"),o.push("</"+d+">")),o.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}})(),ohe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,lhe=/<(?:\w+:)?r>/,che=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function hS(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Xr(ba(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=ba(e),r&&(n.h=rS(n.t))):e.match(lhe)&&(n.r=ba(e),n.t=Xr(ba((e.replace(che,"").match(ohe)||[]).join("").replace(Zn,""))),r&&(n.h=ihe(she(n.r)))),n):{t:""}}var dhe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,uhe=/<(?:\w+:)?(?:si|sstItem)>/g,hhe=/<\/(?:\w+:)?(?:si|sstItem)>/;function fhe(e,t){var r=[],n="";if(!e)return r;var s=e.match(dhe);if(s){n=s[2].replace(uhe,"").split(hhe);for(var i=0;i!=n.length;++i){var o=hS(n[i].trim(),t);o!=null&&(r[r.length]=o)}s=xr(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}function mhe(e){return[e.read_shift(4),e.read_shift(4)]}function phe(e,t){var r=[],n=!1;return Yo(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function CL(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function $o(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function ghe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=$o(e,4),t.U=$o(e,4),t.W=$o(e,4),t}function xhe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function yhe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(xhe(e));return t}function vhe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function bhe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=$o(e,4),t.U=$o(e,4),t.W=$o(e,4),t}function whe(e){var t=bhe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function AL(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function TL(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function jhe(e){var t=$o(e);switch(t.Minor){case 2:return[t.Minor,Nhe(e)];case 3:return[t.Minor,khe()];case 4:return[t.Minor,She(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Nhe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=AL(e,r),s=TL(e,e.length-e.l);return{t:"Std",h:n,v:s}}function khe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function She(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(Zn,function(i){var o=xr(i);switch(io(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function _he(e,t){var r={},n=r.EncryptionVersionInfo=$o(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=AL(e,s),t-=s,r.EncryptionVerifier=TL(e,t),r}function Ehe(e){var t={},r=t.EncryptionVersionInfo=$o(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function Che(e){var t=0,r,n=CL(e),s=n.length+1,i,o,l,d,u;for(r=Cl(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,d=t<<1&32767,u=l|d,t=u^o;return t^52811}var DL=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},s=function(o,l){return n(o^l)},i=function(o){for(var l=t[o.length-1],d=104,u=o.length-1;u>=0;--u)for(var f=o[u],m=0;m!=7;++m)f&64&&(l^=r[d]),f*=2,--d;return l};return function(o){for(var l=CL(o),d=i(l),u=l.length,f=Cl(16),m=0;m!=16;++m)f[m]=0;var p,g,b;for((u&1)===1&&(p=d>>8,f[u]=s(e[0],p),--u,p=d&255,g=l[l.length-1],f[u]=s(g,p));u>0;)--u,p=d>>8,f[u]=s(l[u],p),--u,p=d&255,f[u]=s(l[u],p);for(u=15,b=15-l.length;b>0;)p=d>>8,f[u]=s(e[b],p),--u,--b,p=d&255,f[u]=s(l[u],p),--u,--b;return f}})(),Ahe=function(e,t,r,n,s){s||(s=t),n||(n=DL(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=n[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,n]},The=function(e){var t=0,r=DL(e);return function(n){var s=Ahe("",n,t,r);return t=s[1],s[0]}};function Dhe(e,t,r,n){var s={key:Xa(e),verificationBytes:Xa(e)};return r.password&&(s.verifier=Che(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=The(r.password)),s}function Ohe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=Ehe(e):n.Data=_he(e,t),n}function Phe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?Ohe(e,t-2,n):Dhe(e,r.biff>=8?t:t-2,r,n),n}var Ihe=(function(){function e(s,i){switch(i.type){case"base64":return t(qs(s),i);case"binary":return t(s,i);case"buffer":return t(Hr&&Buffer.isBuffer(s)?s.toString("binary"):Uc(s),i);case"array":return t(Oc(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},d=s.match(/\\trowd.*?\\row\b/g);if(!d.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:d.length-1}};return d.forEach(function(f,m){Array.isArray(l)&&(l[m]=[]);for(var p=/\\\w+\b/g,g=0,b,y=-1;b=p.exec(f);){switch(b[0]){case"\\cell":var v=f.slice(g,p.lastIndex-b[0].length);if(v[0]==" "&&(v=v.slice(1)),++y,v.length){var k={v,t:"s"};Array.isArray(l)?l[m][y]=k:l[kr({r:m,c:y})]=k}break}g=p.lastIndex}y>u.e.c&&(u.e.c=y)}),l["!ref"]=Gr(u),l}function r(s,i){return Ml(e(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],o=Ba(s["!ref"]),l,d=Array.isArray(s),u=o.s.r;u<=o.e.r;++u){i.push("\\trowd\\trautofit1");for(var f=o.s.c;f<=o.e.c;++f)i.push("\\cellx"+(f+1));for(i.push("\\pard\\intbl"),f=o.s.c;f<=o.e.c;++f){var m=kr({r:u,c:f});l=d?(s[u]||[])[f]:s[m],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(Wo(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function Mhe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Q0(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Rhe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),i=Math.min(t,r,n),o=s-i;if(o===0)return[0,0,t];var l=0,d=0,u=s+i;switch(d=o/(u>1?2-u:u),s){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,d,u/2]}function Fhe(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),i=n-s/2,o=[i,i,i],l=6*t,d;if(r!==0)switch(l|0){case 0:case 6:d=s*l,o[0]+=s,o[1]+=d;break;case 1:d=s*(2-l),o[0]+=d,o[1]+=s;break;case 2:d=s*(l-2),o[1]+=s,o[2]+=d;break;case 3:d=s*(4-l),o[1]+=d,o[2]+=s;break;case 4:d=s*(l-4),o[2]+=s,o[0]+=d;break;case 5:d=s*(6-l),o[2]+=d,o[0]+=s;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function pg(e,t){if(t===0)return e;var r=Rhe(Mhe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Q0(Fhe(r))}var OL=6,$he=15,Lhe=1,is=OL;function gg(e){return Math.floor((e+Math.round(128/is)/256)*is)}function xg(e){return Math.floor((e-5)/is*100+.5)/100}function p2(e){return Math.round((e*is+5)/is*256)/256}function pj(e){return p2(xg(gg(e)))}function fS(e){var t=Math.abs(e-pj(e)),r=is;if(t>.005)for(is=Lhe;is<$he;++is)Math.abs(e-pj(e))<=t&&(t=Math.abs(e-pj(e)),r=is);is=r}function bu(e){e.width?(e.wpx=gg(e.width),e.wch=xg(e.wpx),e.MDW=is):e.wpx?(e.wch=xg(e.wpx),e.width=p2(e.wch),e.MDW=is):typeof e.wch=="number"&&(e.width=p2(e.wch),e.wpx=gg(e.width),e.MDW=is),e.customWidth&&delete e.customWidth}var Bhe=96,PL=Bhe;function IL(e){return e*96/PL}function Z0(e){return e*PL/96}var Uhe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Hhe(e,t,r,n){t.Borders=[];var s={},i=!1;(e[0].match(Zn)||[]).forEach(function(o){var l=xr(o);switch(io(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=Ca(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=Ca(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function qhe(e,t,r,n){t.Fills=[];var s={},i=!1;(e[0].match(Zn)||[]).forEach(function(o){var l=xr(o);switch(io(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function Whe(e,t,r,n){t.Fonts=[];var s={},i=!1;(e[0].match(Zn)||[]).forEach(function(o){var l=xr(o);switch(io(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=ba(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?Ca(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?Ca(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?Ca(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?Ca(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?Ca(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?Ca(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?Ca(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=Yk[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=Ca(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var d=wc[s.color.index];s.color.index==81&&(d=wc[1]),d||(d=wc[1]),s.color.rgb=d[0].toString(16)+d[1].toString(16)+d[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=pg(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function zhe(e,t,r){t.NumberFmt=[];for(var n=ro(Cr),s=0;s<n.length;++s)t.NumberFmt[n[s]]=Cr[n[s]];var i=e[0].match(Zn);if(i)for(s=0;s<i.length;++s){var o=xr(i[s]);switch(io(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Xr(ba(o.formatCode)),d=parseInt(o.numFmtId,10);if(t.NumberFmt[d]=l,d>0){if(d>392){for(d=392;d>60&&t.NumberFmt[d]!=null;--d);t.NumberFmt[d]=l}bc(l,d)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}var Wm=["numFmtId","fillId","fontId","borderId","xfId"],zm=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Khe(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(Zn)||[]).forEach(function(i){var o=xr(i),l=0;switch(io(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<Wm.length;++l)n[Wm[l]]&&(n[Wm[l]]=parseInt(n[Wm[l]],10));for(l=0;l<zm.length;++l)n[zm[l]]&&(n[zm[l]]=Ca(n[zm[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var d={};o.vertical&&(d.vertical=o.vertical),o.horizontal&&(d.horizontal=o.horizontal),o.textRotation!=null&&(d.textRotation=o.textRotation),o.indent&&(d.indent=o.indent),o.wrapText&&(d.wrapText=Ca(o.wrapText)),n.alignment=d;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}var Vhe=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,d,u){var f={};if(!l)return f;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var m;return(m=l.match(t))&&zhe(m,f,u),(m=l.match(s))&&Whe(m,f,d,u),(m=l.match(n))&&qhe(m,f,d,u),(m=l.match(i))&&Hhe(m,f,d,u),(m=l.match(r))&&Khe(m,f,u),f}})();function Ghe(e,t){var r=e.read_shift(2),n=Jn(e);return[r,n]}function Yhe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=sde(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var d=e.read_shift(1);switch(d>0&&(n.charset=d),e.l++,n.color=nde(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Jn(e),n}var Xhe=Qn;function Jhe(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}var Qhe=Qn;function Zhe(e,t,r){var n={};n.NumberFmt=[];for(var s in Cr)n.NumberFmt[s]=Cr[s];n.CellXf=[],n.Fonts=[];var i=[],o=!1;return Yo(e,function(d,u,f){switch(f){case 44:n.NumberFmt[d[0]]=d[1],bc(d[1],d[0]);break;case 43:n.Fonts.push(d),d.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(d.color.rgb=pg(t.themeElements.clrScheme[d.color.theme].rgb,d.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(d);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(f),o=!0;break;case 38:i.pop(),o=!1;break;default:if(u.T>0)i.push(f);else if(u.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}var e0e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function t0e(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(Zn)||[]).forEach(function(s){var i=xr(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[e0e.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function r0e(){}function a0e(){}var n0e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,s0e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,i0e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function o0e(e,t,r){t.themeElements={};var n;[["clrScheme",n0e,t0e],["fontScheme",s0e,r0e],["fmtScheme",i0e,a0e]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var l0e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function ML(e,t){(!e||e.length===0)&&(e=c0e());var r,n={};if(!(r=e.match(l0e)))throw new Error("themeElements not found in theme");return o0e(r[0],n,t),n.raw=e,n}function c0e(e,t){var r=[K$];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function d0e(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var o;try{o=z$(i,{type:"array"})}catch{return}var l=Ls(o,"theme/theme/theme1.xml",!0);if(l)return ML(l,r)}}function u0e(e){return e.read_shift(4)}function h0e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=f0e(e,4);break;case 2:t.xclrValue=wL(e);break;case 3:t.xclrValue=u0e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function f0e(e,t){return Qn(e,t)}function m0e(e,t){return Qn(e,t)}function p0e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=h0e(e);break;case 6:n[1]=m0e(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function g0e(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(p0e(e,r-e.l));return{ixfe:n,ext:i}}function x0e(e,t){t.forEach(function(r){r[0]})}function y0e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Jn(e)}}function v0e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function b0e(e){return e.l+=4,e.read_shift(4)!=0}function w0e(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return Yo(e,function(d,u,f){switch(f){case 335:n.Types.push({name:d.name});break;case 51:d.forEach(function(m){l==1?n.Cell.push({type:n.Types[m[0]-1].name,index:m[1]}):l==0&&n.Value.push({type:n.Types[m[0]-1].name,index:m[1]})});break;case 337:l=d?1:0;break;case 338:l=2;break;case 35:i.push(f),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!u.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}function j0e(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,i=2,o;return e.replace(Zn,function(l){var d=xr(l);switch(io(d[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:d.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==d.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[d.t-1].name,index:+d.v}):i==0&&n.Value.push({type:n.Types[d.t-1].name,index:+d.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+d.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+d[0]+" in metadata")}return l}),n}function N0e(e){var t=[];if(!e)return t;var r=1;return(e.match(Zn)||[]).forEach(function(n){var s=xr(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function k0e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=kr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function S0e(e,t,r){var n=[];return Yo(e,function(i,o,l){switch(l){case 63:n.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function _0e(e,t,r,n){if(!e)return e;var s=n||{},i=!1;Yo(e,function(l,d,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!d.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function E0e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}function h6(e,t,r,n){var s=Array.isArray(e),i;t.forEach(function(o){var l=ds(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var d=Ba(e["!ref"]||"BDWGO1000001:A1");d.s.r>l.r&&(d.s.r=l.r),d.e.r<l.r&&(d.e.r=l.r),d.s.c>l.c&&(d.s.c=l.c),d.e.c<l.c&&(d.e.c=l.c);var u=Gr(d);u!==e["!ref"]&&(e["!ref"]=u)}i.c||(i.c=[]);var f={a:o.author,t:o.t,r:o.r,T:r};o.h&&(f.h=o.h);for(var m=i.c.length-1;m>=0;--m){if(!r&&i.c[m].T)return;r&&!i.c[m].T&&i.c.splice(m,1)}if(r&&n){for(m=0;m<n.length;++m)if(f.a==n[m].id){f.a=n[m].name||f.a;break}}i.c.push(f)})}function C0e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var d=xr(l[0]),u={author:d.authorId&&r[d.authorId]||"sheetjsghost",ref:d.ref,guid:d.guid},f=ds(d.ref);if(!(t.sheetRows&&t.sheetRows<=f.r)){var m=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!m&&!!m[1]&&hS(m[1])||{r:"",t:"",h:""};u.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),u.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=p.h),n.push(u)}}}}),n}function A0e(e,t){var r=[],n=!1,s={},i=0;return e.replace(Zn,function(l,d){var u=xr(l);switch(io(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=d+l.length;break;case"</text>":s.t=e.slice(i,d).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function T0e(e,t){var r=[],n=!1;return e.replace(Zn,function(i){var o=xr(i);switch(io(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function D0e(e){var t={};t.iauthor=e.read_shift(4);var r=qc(e);return t.rfx=r.s,t.ref=kr(r.s),e.l+=16,t}var O0e=Jn;function P0e(e,t){var r=[],n=[],s={},i=!1;return Yo(e,function(l,d,u){switch(u){case 632:n.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!d.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}var I0e="application/vnd.ms-office.vbaProject";function M0e(e){var t=Vr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Vr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),Vr.write(t)}function R0e(){return{"!type":"dialog"}}function F0e(){return{"!type":"dialog"}}function $0e(){return{"!type":"macro"}}function L0e(){return{"!type":"macro"}}var Wd=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,i,o){var l=!1,d=!1;i.length==0?d=!0:i.charAt(0)=="["&&(d=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,f=o.length>0?parseInt(o,10)|0:0;return l?f+=t.c:--f,d?u+=t.r:--u,s+(l?"":"$")+mn(f)+(d?"":"$")+Rn(u)}return function(s,i){return t=i,s.replace(e,r)}})(),RL=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,B0e=(function(){return function(t,r){return t.replace(RL,function(n,s,i,o,l,d){var u=iS(o)-(i?0:r.c),f=sS(d)-(l?0:r.r),m=f==0?"":l?f+1:"["+f+"]",p=u==0?"":i?u+1:"["+u+"]";return s+"R"+m+"C"+p})}})();function FL(e,t){return e.replace(RL,function(r,n,s,i,o,l){return n+(s=="$"?s+i:mn(iS(i)+t.c))+(o=="$"?o+l:Rn(sS(l)+t.r))})}function U0e(e,t,r){var n=Fu(t),s=n.s,i=ds(r),o={r:i.r-s.r,c:i.c-s.c};return FL(e,o)}function H0e(e){return e.length!=1}function f6(e){return e.replace(/_xlfn\./g,"")}function Va(e){e.l+=1}function Al(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function $L(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return LL(e);r.biff==12&&(n=4)}var s=e.read_shift(n),i=e.read_shift(n),o=Al(e),l=Al(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function LL(e){var t=Al(e),r=Al(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function q0e(e,t,r){if(r.biff<8)return LL(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=Al(e),o=Al(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function BL(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return W0e(e);var n=e.read_shift(r&&r.biff==12?4:2),s=Al(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function W0e(e){var t=Al(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function z0e(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function K0e(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return V0e(e);var s=e.read_shift(n>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function V0e(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function G0e(e,t,r){var n=(e[e.l++]&96)>>5,s=$L(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function Y0e(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=$L(e,i,r);return[n,s,o]}function X0e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function J0e(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,s]}function Q0e(e,t,r){var n=(e[e.l++]&96)>>5,s=q0e(e,t-1,r);return[n,s]}function Z0e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function m6(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function efe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function tfe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function rfe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function afe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function nfe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function UL(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function sfe(e){return e.read_shift(2),UL(e)}function ife(e){return e.read_shift(2),UL(e)}function ofe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=BL(e,0,r);return[n,s]}function lfe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=K0e(e,0,r);return[n,s]}function cfe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=BL(e,0,r);return[n,s,i]}function dfe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[ume[s],WL[s],n]}function ufe(e,t,r){var n=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:hfe(e);return[s,(i[0]===0?WL:dme)[i[1]]]}function hfe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function ffe(e,t,r){e.l+=r&&r.biff==2?3:4}function mfe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function pfe(e){return e.l++,Wc[e.read_shift(1)]}function gfe(e){return e.l++,e.read_shift(2)}function xfe(e){return e.l++,e.read_shift(1)!==0}function yfe(e){return e.l++,Yn(e)}function vfe(e,t,r){return e.l++,xf(e,t-1,r)}function bfe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=qa(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Wc[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Yn(e);break;case 2:r[1]=zc(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function wfe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?qc:yx)(e));return s}function jfe(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=bfe(e,r.biff);return o}function Nfe(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function kfe(e,t,r){if(r.biff==5)return Sfe(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[n,s,i]}function Sfe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function _fe(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Efe(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Cfe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function Afe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,s]}var Tfe=Qn,Dfe=Qn,Ofe=Qn;function vf(e,t,r){return e.l+=2,[z0e(e)]}function mS(e){return e.l+=6,[]}var Pfe=vf,Ife=mS,Mfe=mS,Rfe=vf;function HL(e){return e.l+=2,[Xa(e),e.read_shift(2)&1]}var Ffe=vf,$fe=HL,Lfe=mS,Bfe=vf,Ufe=vf,Hfe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function qfe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=Hfe[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:s,C:i}}function Wfe(e){return e.l+=2,[e.read_shift(4)]}function zfe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Kfe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Vfe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Gfe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Yfe(e){return e.l+=4,[0,0]}var p6={1:{n:"PtgExp",f:mfe},2:{n:"PtgTbl",f:Ofe},3:{n:"PtgAdd",f:Va},4:{n:"PtgSub",f:Va},5:{n:"PtgMul",f:Va},6:{n:"PtgDiv",f:Va},7:{n:"PtgPower",f:Va},8:{n:"PtgConcat",f:Va},9:{n:"PtgLt",f:Va},10:{n:"PtgLe",f:Va},11:{n:"PtgEq",f:Va},12:{n:"PtgGe",f:Va},13:{n:"PtgGt",f:Va},14:{n:"PtgNe",f:Va},15:{n:"PtgIsect",f:Va},16:{n:"PtgUnion",f:Va},17:{n:"PtgRange",f:Va},18:{n:"PtgUplus",f:Va},19:{n:"PtgUminus",f:Va},20:{n:"PtgPercent",f:Va},21:{n:"PtgParen",f:Va},22:{n:"PtgMissArg",f:Va},23:{n:"PtgStr",f:vfe},26:{n:"PtgSheet",f:zfe},27:{n:"PtgEndSheet",f:Kfe},28:{n:"PtgErr",f:pfe},29:{n:"PtgBool",f:xfe},30:{n:"PtgInt",f:gfe},31:{n:"PtgNum",f:yfe},32:{n:"PtgArray",f:Z0e},33:{n:"PtgFunc",f:dfe},34:{n:"PtgFuncVar",f:ufe},35:{n:"PtgName",f:Nfe},36:{n:"PtgRef",f:ofe},37:{n:"PtgArea",f:G0e},38:{n:"PtgMemArea",f:_fe},39:{n:"PtgMemErr",f:Tfe},40:{n:"PtgMemNoMem",f:Dfe},41:{n:"PtgMemFunc",f:Efe},42:{n:"PtgRefErr",f:Cfe},43:{n:"PtgAreaErr",f:X0e},44:{n:"PtgRefN",f:lfe},45:{n:"PtgAreaN",f:Q0e},46:{n:"PtgMemAreaN",f:Vfe},47:{n:"PtgMemNoMemN",f:Gfe},57:{n:"PtgNameX",f:kfe},58:{n:"PtgRef3d",f:cfe},59:{n:"PtgArea3d",f:Y0e},60:{n:"PtgRefErr3d",f:Afe},61:{n:"PtgAreaErr3d",f:J0e},255:{}},Xfe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Jfe={1:{n:"PtgElfLel",f:HL},2:{n:"PtgElfRw",f:Bfe},3:{n:"PtgElfCol",f:Pfe},6:{n:"PtgElfRwV",f:Ufe},7:{n:"PtgElfColV",f:Rfe},10:{n:"PtgElfRadical",f:Ffe},11:{n:"PtgElfRadicalS",f:Lfe},13:{n:"PtgElfColS",f:Ife},15:{n:"PtgElfColSV",f:Mfe},16:{n:"PtgElfRadicalLel",f:$fe},25:{n:"PtgList",f:qfe},29:{n:"PtgSxName",f:Wfe},255:{}},Qfe={0:{n:"PtgAttrNoop",f:Yfe},1:{n:"PtgAttrSemi",f:nfe},2:{n:"PtgAttrIf",f:rfe},4:{n:"PtgAttrChoose",f:efe},8:{n:"PtgAttrGoto",f:tfe},16:{n:"PtgAttrSum",f:ffe},32:{n:"PtgAttrBaxcel",f:m6},33:{n:"PtgAttrBaxcel",f:m6},64:{n:"PtgAttrSpace",f:sfe},65:{n:"PtgAttrSpaceSemi",f:ife},128:{n:"PtgAttrIfError",f:afe},255:{}};function bf(e,t,r,n){if(n.biff<8)return Qn(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=jfe(e,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=wfe(e,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(Qn(e,t)),i}function wf(e,t,r){for(var n=e.l+t,s,i,o=[];n!=e.l;)t=n-e.l,i=e[e.l],s=p6[i]||p6[Xfe[i]],(i===24||i===25)&&(s=(i===24?Jfe:Qfe)[e[e.l+1]]),!s||!s.f?Qn(e,t):o.push([s.n,s.f(e,t,r)]);return o}function Zfe(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],i=0;i<n.length;++i){var o=n[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var eme={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function tme(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function qL(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function g6(e,t,r){var n=qL(e,t,r);return n=="#REF"?n:tme(n,r)}function Vn(e,t,r,n,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],d,u,f,m=0,p=0,g,b="";if(!e[0]||!e[0][0])return"";for(var y=-1,v="",k=0,S=e[0].length;k<S;++k){var w=e[0][k];switch(w[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(d=l.pop(),u=l.pop(),y>=0){switch(e[0][y][1][0]){case 0:v=$a(" ",e[0][y][1][1]);break;case 1:v=$a("\r",e[0][y][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}u=u+v,y=-1}l.push(u+eme[w[0]]+d);break;case"PtgIsect":d=l.pop(),u=l.pop(),l.push(u+" "+d);break;case"PtgUnion":d=l.pop(),u=l.pop(),l.push(u+","+d);break;case"PtgRange":d=l.pop(),u=l.pop(),l.push(u+":"+d);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=Vh(w[1][1],o,s),l.push(Gh(f,i));break;case"PtgRefN":f=r?Vh(w[1][1],r,s):w[1][1],l.push(Gh(f,i));break;case"PtgRef3d":m=w[1][1],f=Vh(w[1][2],o,s),b=g6(n,m,s),l.push(b+"!"+Gh(f,i));break;case"PtgFunc":case"PtgFuncVar":var A=w[1][0],C=w[1][1];A||(A=0),A&=127;var N=A==0?[]:l.slice(-A);l.length-=A,C==="User"&&(C=N.shift()),l.push(C+"("+N.join(",")+")");break;case"PtgBool":l.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(w[1]);break;case"PtgNum":l.push(String(w[1]));break;case"PtgStr":l.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(w[1]);break;case"PtgAreaN":g=XP(w[1][1],r?{s:r}:o,s),l.push(fj(g,s));break;case"PtgArea":g=XP(w[1][1],o,s),l.push(fj(g,s));break;case"PtgArea3d":m=w[1][1],g=w[1][2],b=g6(n,m,s),l.push(b+"!"+fj(g,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=w[1][2];var E=(n.names||[])[p-1]||(n[0]||[])[p],_=E?E.Name:"SH33TJSNAME"+String(p);_&&_.slice(0,6)=="_xlfn."&&!s.xlfn&&(_=_.slice(6)),l.push(_);break;case"PtgNameX":var O=w[1][1];p=w[1][2];var B;if(s.biff<=5)O<0&&(O=-O),n[O]&&(B=n[O][p]);else{var F="";if(((n[O]||[])[0]||[])[0]==14849||(((n[O]||[])[0]||[])[0]==1025?n[O][p]&&n[O][p].itab>0&&(F=n.SheetNames[n[O][p].itab-1]+"!"):F=n.SheetNames[p-1]+"!"),n[O]&&n[O][p])F+=n[O][p].Name;else if(n[0]&&n[0][p])F+=n[0][p].Name;else{var D=(qL(n,O,s)||"").split(";;");D[p-1]?F=D[p-1]:F+="SH33TJSERRX"}l.push(F);break}B||(B={Name:"SH33TJSERRY"}),l.push(B.Name);break;case"PtgParen":var H="(",ne=")";if(y>=0){switch(v="",e[0][y][1][0]){case 2:H=$a(" ",e[0][y][1][1])+H;break;case 3:H=$a("\r",e[0][y][1][1])+H;break;case 4:ne=$a(" ",e[0][y][1][1])+ne;break;case 5:ne=$a("\r",e[0][y][1][1])+ne;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}l.push(H+l.pop()+ne);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":f={c:w[1][1],r:w[1][0]};var W={c:r.c,r:r.r};if(n.sharedf[kr(f)]){var ee=n.sharedf[kr(f)];l.push(Vn(ee,o,W,n,s))}else{var re=!1;for(d=0;d!=n.arrayf.length;++d)if(u=n.arrayf[d],!(f.c<u[0].s.c||f.c>u[0].e.c)&&!(f.r<u[0].s.r||f.r>u[0].e.r)){l.push(Vn(u[1],o,W,n,s)),re=!0;break}re||l.push(w[1])}break;case"PtgArray":l.push("{"+Zfe(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=k;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var Q=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&Q.indexOf(e[0][k][0])==-1){w=e[0][y];var R=!0;switch(w[1][0]){case 4:R=!1;case 0:v=$a(" ",w[1][1]);break;case 5:R=!1;case 1:v=$a("\r",w[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}l.push((R?v:"")+l.pop()+(R?"":v)),y=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function rme(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Qn(e,t-2)];var l=wf(e,o,r);return t!==o+s&&(i=bf(e,t-o-s,l,r)),e.l=n,[l,i]}function ame(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Qn(e,t-2)];var l=wf(e,o,r);return t!==o+s&&(i=bf(e,t-o-s,l,r)),e.l=n,[l,i]}function nme(e,t,r,n){var s=e.l+t,i=wf(e,n,r),o;return s!==e.l&&(o=bf(e,s-e.l,i,r)),[i,o]}function sme(e,t,r){var n=e.l+t,s,i=e.read_shift(2),o=wf(e,i,r);return i==65535?[[],Qn(e,t-2)]:(t!==i+2&&(s=bf(e,n-i-2,o,r)),[o,s])}function ime(e){var t;if(Oo(e,e.l+6)!==65535)return[Yn(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function gj(e,t,r){var n=e.l+t,s=oo(e);r.biff==2&&++e.l;var i=ime(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=ame(e,n-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function vx(e,t,r){var n=e.read_shift(4),s=wf(e,n,r),i=e.read_shift(4),o=i>0?bf(e,i,s,r):null;return[s,o]}var ome=vx,bx=vx,lme=vx,cme=vx,dme={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},WL={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},ume={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function x6(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function xj(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var Qh={},zd={};function Zh(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function zL(e,t,r,n,s,i){try{n.cellNF&&(e.z=Cr[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=kn(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Cr[t]==null&&bc(hce[t]||"General",t),e.t==="e")e.w=e.w||Wc[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=G0(e.v);else if(e.t==="d"){var o=hs(e.v);(o|0)===o?e.w=o.toString(10):e.w=G0(o)}else{if(e.v===void 0)return"";e.w=Dc(e.v,zd)}else e.t==="d"?e.w=ui(t,hs(e.v),zd):e.w=ui(t,e.v,zd)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=pg(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=pg(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&i.Fills)throw l}}}function hme(e,t){var r=Ba(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Gr(r))}var fme=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,mme=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,pme=/<(?:\w:)?hyperlink [^>]*>/mg,gme=/"(\w*:\w*)"/,xme=/<(?:\w:)?col\b[^>]*[\/]?>/g,yme=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,vme=/<(?:\w:)?pageMargins[^>]*\/>/g,KL=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,bme=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,wme=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function jme(e,t,r,n,s,i,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},d={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",f="",m=e.match(mme);m?(u=e.slice(0,m.index),f=e.slice(m.index+m[0].length)):u=f=e;var p=u.match(KL);p?pS(p[0],l,s,r):(p=u.match(bme))&&Nme(p[0],p[1]||"",l,s,r);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var b=u.slice(g,g+50).match(gme);b&&hme(l,b[1])}var y=u.match(wme);y&&y[1]&&Ame(y[1],s);var v=[];if(t.cellStyles){var k=u.match(xme);k&&_me(v,k)}m&&Tme(m[1],l,t,d,i,o);var S=f.match(yme);S&&(l["!autofilter"]=Eme(S[0]));var w=[],A=f.match(fme);if(A)for(g=0;g!=A.length;++g)w[g]=Ba(A[g].slice(A[g].indexOf('"')+1));var C=f.match(pme);C&&kme(l,C,n);var N=f.match(vme);if(N&&(l["!margins"]=Sme(xr(N[0]))),!l["!ref"]&&d.e.c>=d.s.c&&d.e.r>=d.s.r&&(l["!ref"]=Gr(d)),t.sheetRows>0&&l["!ref"]){var E=Ba(l["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>d.e.r&&(E.e.r=d.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>d.e.c&&(E.e.c=d.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Gr(E))}return v.length>0&&(l["!cols"]=v),w.length>0&&(l["!merges"]=w),l}function pS(e,t,r,n){var s=xr(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Xr(ba(s.codeName)))}function Nme(e,t,r,n,s){pS(e.slice(0,e.indexOf(">")),r,n,s)}function kme(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var i=xr(ba(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+Xr(i.location))):(i.Target="#"+Xr(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=Ba(i.ref),d=l.s.r;d<=l.e.r;++d)for(var u=l.s.c;u<=l.e.c;++u){var f=kr({c:u,r:d});n?(e[d]||(e[d]=[]),e[d][u]||(e[d][u]={t:"z",v:void 0}),e[d][u].l=i):(e[f]||(e[f]={t:"z",v:void 0}),e[f].l=i)}}}function Sme(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function _me(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=xr(t[n],!0);s.hidden&&(s.hidden=Ca(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,fS(s.width)),bu(s);i<=o;)e[i++]=Mn(s)}}function Eme(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var Cme=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Ame(e,t){t.Views||(t.Views=[{}]),(e.match(Cme)||[]).forEach(function(r,n){var s=xr(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),Ca(s.rightToLeft)&&(t.Views[n].RTL=!0)})}var Tme=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=Y0("v"),o=Y0("f");return function(d,u,f,m,p,g){for(var b=0,y="",v=[],k=[],S=0,w=0,A=0,C="",N,E,_=0,O=0,B,F,D=0,H=0,ne=Array.isArray(g.CellXf),W,ee=[],re=[],Q=Array.isArray(u),R=[],X={},L=!1,I=!!f.sheetStubs,G=d.split(t),V=0,Z=G.length;V!=Z;++V){y=G[V].trim();var ve=y.length;if(ve!==0){var Ee=0;e:for(b=0;b<ve;++b)switch(y[b]){case">":if(y[b-1]!="/"){++b;break e}if(f&&f.cellStyles){if(E=xr(y.slice(Ee,b),!0),_=E.r!=null?parseInt(E.r,10):_+1,O=-1,f.sheetRows&&f.sheetRows<_)continue;X={},L=!1,E.ht&&(L=!0,X.hpt=parseFloat(E.ht),X.hpx=Z0(X.hpt)),E.hidden=="1"&&(L=!0,X.hidden=!0),E.outlineLevel!=null&&(L=!0,X.level=+E.outlineLevel),L&&(R[_-1]=X)}break;case"<":Ee=b;break}if(Ee>=b)break;if(E=xr(y.slice(Ee,b),!0),_=E.r!=null?parseInt(E.r,10):_+1,O=-1,!(f.sheetRows&&f.sheetRows<_)){m.s.r>_-1&&(m.s.r=_-1),m.e.r<_-1&&(m.e.r=_-1),f&&f.cellStyles&&(X={},L=!1,E.ht&&(L=!0,X.hpt=parseFloat(E.ht),X.hpx=Z0(X.hpt)),E.hidden=="1"&&(L=!0,X.hidden=!0),E.outlineLevel!=null&&(L=!0,X.level=+E.outlineLevel),L&&(R[_-1]=X)),v=y.slice(b).split(e);for(var Te=0;Te!=v.length&&v[Te].trim().charAt(0)=="<";++Te);for(v=v.slice(Te),b=0;b!=v.length;++b)if(y=v[b].trim(),y.length!==0){if(k=y.match(r),S=b,w=0,A=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,k!=null&&k.length===2){for(S=0,C=k[1],w=0;w!=C.length&&!((A=C.charCodeAt(w)-64)<1||A>26);++w)S=26*S+A;--S,O=S}else++O;for(w=0;w!=y.length&&y.charCodeAt(w)!==62;++w);if(++w,E=xr(y.slice(0,w),!0),E.r||(E.r=kr({r:_-1,c:O})),C=y.slice(w),N={t:""},(k=C.match(i))!=null&&k[1]!==""&&(N.v=Xr(k[1])),f.cellFormula){if((k=C.match(o))!=null&&k[1]!==""){if(N.f=Xr(ba(k[1])).replace(/\r\n/g,`
`),f.xlfn||(N.f=f6(N.f)),k[0].indexOf('t="array"')>-1)N.F=(C.match(s)||[])[1],N.F.indexOf(":")>-1&&ee.push([Ba(N.F),N.F]);else if(k[0].indexOf('t="shared"')>-1){F=xr(k[0]);var ue=Xr(ba(k[1]));f.xlfn||(ue=f6(ue)),re[parseInt(F.si,10)]=[F,ue,E.r]}}else(k=C.match(/<f[^>]*\/>/))&&(F=xr(k[0]),re[F.si]&&(N.f=U0e(re[F.si][1],re[F.si][2],E.r)));var ge=ds(E.r);for(w=0;w<ee.length;++w)ge.r>=ee[w][0].s.r&&ge.r<=ee[w][0].e.r&&ge.c>=ee[w][0].s.c&&ge.c<=ee[w][0].e.c&&(N.F=ee[w][1])}if(E.t==null&&N.v===void 0)if(N.f||N.F)N.v=0,N.t="n";else if(I)N.t="z";else continue;else N.t=E.t||"n";switch(m.s.c>O&&(m.s.c=O),m.e.c<O&&(m.e.c=O),N.t){case"n":if(N.v==""||N.v==null){if(!I)continue;N.t="z"}else N.v=parseFloat(N.v);break;case"s":if(typeof N.v>"u"){if(!I)continue;N.t="z"}else B=Qh[parseInt(N.v,10)],N.v=B.t,N.r=B.r,f.cellHTML&&(N.h=B.h);break;case"str":N.t="s",N.v=N.v!=null?ba(N.v):"",f.cellHTML&&(N.h=rS(N.v));break;case"inlineStr":k=C.match(n),N.t="s",k!=null&&(B=hS(k[1]))?(N.v=B.t,f.cellHTML&&(N.h=B.h)):N.v="";break;case"b":N.v=Ca(N.v);break;case"d":f.cellDates?N.v=kn(N.v,1):(N.v=hs(kn(N.v,1)),N.t="n");break;case"e":(!f||f.cellText!==!1)&&(N.w=N.v),N.v=fL[N.v];break}if(D=H=0,W=null,ne&&E.s!==void 0&&(W=g.CellXf[E.s],W!=null&&(W.numFmtId!=null&&(D=W.numFmtId),f.cellStyles&&W.fillId!=null&&(H=W.fillId))),zL(N,D,H,f,p,g),f.cellDates&&ne&&N.t=="n"&&Ru(Cr[D])&&(N.t="d",N.v=xx(N.v)),E.cm&&f.xlmeta){var Fe=(f.xlmeta.Cell||[])[+E.cm-1];Fe&&Fe.type=="XLDAPR"&&(N.D=!0)}if(Q){var J=ds(E.r);u[J.r]||(u[J.r]=[]),u[J.r][J.c]=N}else u[E.r]=N}}}}R.length>0&&(u["!rows"]=R)}})();function Dme(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}var Ome=qc;function Pme(){}function Ime(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=rde(e),r}function Mme(e){var t=fi(e);return[t]}function Rme(e){var t=Hc(e);return[t]}function Fme(e){var t=fi(e),r=e.read_shift(1);return[t,r,"b"]}function $me(e){var t=Hc(e),r=e.read_shift(1);return[t,r,"b"]}function Lme(e){var t=fi(e),r=e.read_shift(1);return[t,r,"e"]}function Bme(e){var t=Hc(e),r=e.read_shift(1);return[t,r,"e"]}function Ume(e){var t=fi(e),r=e.read_shift(4);return[t,r,"s"]}function Hme(e){var t=Hc(e),r=e.read_shift(4);return[t,r,"s"]}function qme(e){var t=fi(e),r=Yn(e);return[t,r,"n"]}function VL(e){var t=Hc(e),r=Yn(e);return[t,r,"n"]}function Wme(e){var t=fi(e),r=cS(e);return[t,r,"n"]}function zme(e){var t=Hc(e),r=cS(e);return[t,r,"n"]}function Kme(e){var t=fi(e),r=oS(e);return[t,r,"is"]}function Vme(e){var t=fi(e),r=Jn(e);return[t,r,"str"]}function Gme(e){var t=Hc(e),r=Jn(e);return[t,r,"str"]}function Yme(e,t,r){var n=e.l+t,s=fi(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=bx(e,n-e.l,r);o[3]=Vn(l,null,s,r.supbooks,r)}else e.l=n;return o}function Xme(e,t,r){var n=e.l+t,s=fi(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=bx(e,n-e.l,r);o[3]=Vn(l,null,s,r.supbooks,r)}else e.l=n;return o}function Jme(e,t,r){var n=e.l+t,s=fi(e);s.r=r["!row"];var i=Yn(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=bx(e,n-e.l,r);o[3]=Vn(l,null,s,r.supbooks,r)}else e.l=n;return o}function Qme(e,t,r){var n=e.l+t,s=fi(e);s.r=r["!row"];var i=Jn(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=bx(e,n-e.l,r);o[3]=Vn(l,null,s,r.supbooks,r)}else e.l=n;return o}var Zme=qc;function epe(e,t){var r=e.l+t,n=qc(e),s=lS(e),i=Jn(e),o=Jn(e),l=Jn(e);e.l=r;var d={rfx:n,relId:s,loc:i,display:l};return o&&(d.Tooltip=o),d}function tpe(){}function rpe(e,t,r){var n=e.l+t,s=dL(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=ome(e,n-e.l,r);o[1]=l}else e.l=n;return o}function ape(e,t,r){var n=e.l+t,s=qc(e),i=[s];if(r.cellFormula){var o=cme(e,n-e.l,r);i[1]=o,e.l=n}else e.l=n;return i}var npe=["left","right","top","bottom","header","footer"];function spe(e){var t={};return npe.forEach(function(r){t[r]=Yn(e)}),t}function ipe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function ope(){}function lpe(){}function cpe(e,t,r,n,s,i,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var d=l.dense?[]:{},u,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},m=!1,p=!1,g,b,y,v,k,S,w,A,C,N=[];l.biff=12,l["!row"]=0;var E=0,_=!1,O=[],B={},F=l.supbooks||s.supbooks||[[]];if(F.sharedf=B,F.arrayf=O,F.SheetNames=s.SheetNames||s.Sheets.map(function(Q){return Q.name}),!l.supbooks&&(l.supbooks=F,s.Names))for(var D=0;D<s.Names.length;++D)F[0][D+1]=s.Names[D];var H=[],ne=[],W=!1;yg[16]={n:"BrtShortReal",f:VL};var ee;if(Yo(e,function(R,X,L){if(!p)switch(L){case 148:u=R;break;case 0:g=R,l.sheetRows&&l.sheetRows<=g.r&&(p=!0),A=Rn(v=g.r),l["!row"]=g.r,(R.hidden||R.hpt||R.level!=null)&&(R.hpt&&(R.hpx=Z0(R.hpt)),ne[R.r]=R);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(b={t:R[2]},R[2]){case"n":b.v=R[1];break;case"s":w=Qh[R[1]],b.v=w.t,b.r=w.r;break;case"b":b.v=!!R[1];break;case"e":b.v=R[1],l.cellText!==!1&&(b.w=Wc[b.v]);break;case"str":b.t="s",b.v=R[1];break;case"is":b.t="s",b.v=R[1].t;break}if((y=o.CellXf[R[0].iStyleRef])&&zL(b,y.numFmtId,null,l,i,o),k=R[0].c==-1?k+1:R[0].c,l.dense?(d[v]||(d[v]=[]),d[v][k]=b):d[mn(k)+A]=b,l.cellFormula){for(_=!1,E=0;E<O.length;++E){var I=O[E];g.r>=I[0].s.r&&g.r<=I[0].e.r&&k>=I[0].s.c&&k<=I[0].e.c&&(b.F=Gr(I[0]),_=!0)}!_&&R.length>3&&(b.f=R[3])}if(f.s.r>g.r&&(f.s.r=g.r),f.s.c>k&&(f.s.c=k),f.e.r<g.r&&(f.e.r=g.r),f.e.c<k&&(f.e.c=k),l.cellDates&&y&&b.t=="n"&&Ru(Cr[y.numFmtId])){var G=gc(b.v);G&&(b.t="d",b.v=new Date(G.y,G.m-1,G.d,G.H,G.M,G.S,G.u))}ee&&(ee.type=="XLDAPR"&&(b.D=!0),ee=void 0);break;case 1:case 12:if(!l.sheetStubs||m)break;b={t:"z",v:void 0},k=R[0].c==-1?k+1:R[0].c,l.dense?(d[v]||(d[v]=[]),d[v][k]=b):d[mn(k)+A]=b,f.s.r>g.r&&(f.s.r=g.r),f.s.c>k&&(f.s.c=k),f.e.r<g.r&&(f.e.r=g.r),f.e.c<k&&(f.e.c=k),ee&&(ee.type=="XLDAPR"&&(b.D=!0),ee=void 0);break;case 176:N.push(R);break;case 49:ee=((l.xlmeta||{}).Cell||[])[R-1];break;case 494:var V=n["!id"][R.relId];for(V?(R.Target=V.Target,R.loc&&(R.Target+="#"+R.loc),R.Rel=V):R.relId==""&&(R.Target="#"+R.loc),v=R.rfx.s.r;v<=R.rfx.e.r;++v)for(k=R.rfx.s.c;k<=R.rfx.e.c;++k)l.dense?(d[v]||(d[v]=[]),d[v][k]||(d[v][k]={t:"z",v:void 0}),d[v][k].l=R):(S=kr({c:k,r:v}),d[S]||(d[S]={t:"z",v:void 0}),d[S].l=R);break;case 426:if(!l.cellFormula)break;O.push(R),C=l.dense?d[v][k]:d[mn(k)+A],C.f=Vn(R[1],f,{r:g.r,c:k},F,l),C.F=Gr(R[0]);break;case 427:if(!l.cellFormula)break;B[kr(R[0].s)]=R[1],C=l.dense?d[v][k]:d[mn(k)+A],C.f=Vn(R[1],f,{r:g.r,c:k},F,l);break;case 60:if(!l.cellStyles)break;for(;R.e>=R.s;)H[R.e--]={width:R.w/256,hidden:!!(R.flags&1),level:R.level},W||(W=!0,fS(R.w/256)),bu(H[R.e+1]);break;case 161:d["!autofilter"]={ref:Gr(R)};break;case 476:d["!margins"]=R;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),R.name&&(s.Sheets[r].CodeName=R.name),(R.above||R.left)&&(d["!outline"]={above:R.above,left:R.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),R.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:m=!0;break;case 36:m=!1;break;case 37:m=!0;break;case 38:m=!1;break;default:if(!X.T){if(!m||l.WTF)throw new Error("Unexpected record 0x"+L.toString(16))}}},l),delete l.supbooks,delete l["!row"],!d["!ref"]&&(f.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(d["!ref"]=Gr(u||f)),l.sheetRows&&d["!ref"]){var re=Ba(d["!ref"]);l.sheetRows<=+re.e.r&&(re.e.r=l.sheetRows-1,re.e.r>f.e.r&&(re.e.r=f.e.r),re.e.r<re.s.r&&(re.s.r=re.e.r),re.e.c>f.e.c&&(re.e.c=f.e.c),re.e.c<re.s.c&&(re.s.c=re.e.c),d["!fullref"]=d["!ref"],d["!ref"]=Gr(re))}return N.length>0&&(d["!merges"]=N),H.length>0&&(d["!cols"]=H),ne.length>0&&(d["!rows"]=ne),d}function dpe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=Xr((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[t,s,n]}function upe(e,t,r,n,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,d=0,u="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(m){var p=dpe(m);f.s.r=f.s.c=0,f.e.c=l,u=mn(l),p[0].forEach(function(g,b){o[u+Rn(b)]={t:"n",v:g,z:p[1]},d=b}),f.e.r<d&&(f.e.r=d),++l}),l>0&&(o["!ref"]=Gr(f)),o}function hpe(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(KL);return l&&pS(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function fpe(e,t){e.l+=10;var r=Jn(e);return{name:r}}function mpe(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Yo(e,function(d,u,f){switch(f){case 550:i["!rel"]=d;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),d.name&&(s.Sheets[r].CodeName=d.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},t),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var GL=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],ppe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],gpe=[],xpe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function y6(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var i=t[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Ca(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function v6(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ca(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function YL(e){v6(e.WBProps,GL),v6(e.CalcPr,xpe),y6(e.WBView,ppe),y6(e.Sheets,gpe),zd.date1904=Ca(e.WBProps.date1904)}var ype="][*?/\\".split("");function vpe(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return ype.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var bpe=/<\w+:workbook/;function wpe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},o=0;if(e.replace(Zn,function(d,u){var f=xr(d);switch(io(f[0])){case"<?xml":break;case"<workbook":d.match(bpe)&&(s="xmlns"+d.match(/<(\w+):/)[1]),r.xmlns=f[s];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":GL.forEach(function(m){if(f[m[0]]!=null)switch(m[2]){case"bool":r.WBProps[m[0]]=Ca(f[m[0]]);break;case"int":r.WBProps[m[0]]=parseInt(f[m[0]],10);break;default:r.WBProps[m[0]]=f[m[0]]}}),f.codeName&&(r.WBProps.CodeName=ba(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=Xr(ba(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=ba(f.name),f.comment&&(i.Comment=f.comment),f.localSheetId&&(i.Sheet=+f.localSheetId),Ca(f.hidden||"0")&&(i.Hidden=!0),o=u+d.length;break;case"</definedName>":i.Ref=Xr(ba(e.slice(o,u))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return d}),Lce.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return YL(r),r}function jpe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=h2(e),r.name=Jn(e),r}function Npe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?Jn(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function kpe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function Spe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=ade(e),o=lme(e,0,r),l=lS(e);e.l=n;var d={Name:i,Ptg:o};return s<268435455&&(d.Sheet=s),l&&(d.Comment=l),d}function _pe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],yg[16]={n:"BrtFRTArchID$",f:kpe},Yo(e,function(d,u,f){switch(f){case 156:o.SheetNames.push(d.name),r.Sheets.push(d);break;case 153:r.WBProps=d;break;case 39:d.Sheet!=null&&(t.SID=d.Sheet),d.Ref=Vn(d.Ptg,null,null,o,t),delete t.SID,delete d.Ptg,i.push(d);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([f,d]):o[0]=[f,d],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(d),o.XTI=o.XTI.concat(d);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(f),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(f),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},t),YL(r),r.Names=i,r.supbooks=o,r}function Epe(e,t,r){return t.slice(-4)===".bin"?_pe(e,r):wpe(e,r)}function Cpe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?cpe(e,n,r,s,i,o,l):jme(e,n,r,s,i,o,l)}function Ape(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?mpe(e,n,r,s,i):hpe(e,n,r,s,i)}function Tpe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?$0e():L0e()}function Dpe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?R0e():F0e()}function Ope(e,t,r,n){return t.slice(-4)===".bin"?Zhe(e,r,n):Vhe(e,r,n)}function Ppe(e,t,r){return ML(e,r)}function Ipe(e,t,r){return t.slice(-4)===".bin"?phe(e,r):fhe(e,r)}function Mpe(e,t,r){return t.slice(-4)===".bin"?P0e(e,r):C0e(e,r)}function Rpe(e,t,r){return t.slice(-4)===".bin"?S0e(e):N0e(e)}function Fpe(e,t,r,n){return r.slice(-4)===".bin"?_0e(e,t,r,n):void 0}function $pe(e,t,r){return t.slice(-4)===".bin"?w0e(e,t,r):j0e(e,t,r)}var XL=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,JL=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function ji(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(XL),i,o,l,d;if(s)for(d=0;d!=s.length;++d)i=s[d].match(JL),(o=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),n[l]=i[2].slice(1,i[2].length-1));return n}function Lpe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(XL),s,i,o,l;if(n)for(l=0;l!=n.length;++l)s=n[l].match(JL),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var e0;function Bpe(e,t){var r=e0[e]||Xr(e);return r==="General"?Dc(t):ui(r,t)}function Upe(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Ca(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=kn(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Xr(t)]=s}function Hpe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Wc[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=G0(e.v):e.w=Dc(e.v):e.w=Bpe(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var n=e0[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&Ru(n)){var s=gc(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function qpe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=Uhe[n.Pattern]||n.Pattern)}e[t.ID]=t}function Wpe(e,t,r,n,s,i,o,l,d,u){var f="General",m=n.StyleID,p={};u=u||{};var g=[],b=0;for(m===void 0&&l&&(m=l.StyleID),m===void 0&&o&&(m=o.StyleID);i[m]!==void 0&&(i[m].nf&&(f=i[m].nf),i[m].Interior&&g.push(i[m].Interior),!!i[m].Parent);)m=i[m].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ca(e);break;case"String":n.t="s",n.r=UP(Xr(e)),n.v=e.indexOf("<")>-1?Xr(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(kn(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Xr(e):n.v<60&&(n.v=n.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=fL[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=UP(t||e));break}if(Hpe(n,f,u),u.cellFormula!==!1)if(n.Formula){var y=Xr(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=Wd(y,s),delete n.Formula,n.ArrayRange=="RC"?n.F=Wd("RC:RC",s):n.ArrayRange&&(n.F=Wd(n.ArrayRange,s),d.push([Ba(n.F),n.F]))}else for(b=0;b<d.length;++b)s.r>=d[b][0].s.r&&s.r<=d[b][0].e.r&&s.c>=d[b][0].s.c&&s.c<=d[b][0].e.c&&(n.F=d[b][1]);u.cellStyles&&(g.forEach(function(v){!p.patternType&&v.patternType&&(p.patternType=v.patternType)}),n.s=p),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function zpe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function yj(e,t){var r=t||{};L$();var n=Ph(aS(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=ba(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=Mn(r);return o.type="string",J0.to_workbook(n,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ce){s.indexOf("<"+Ce)>=0&&(i=!0)}),i)return ege(n,r);e0={"General Number":"General","General Date":Cr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Cr[15],"Short Date":Cr[14],"Long Time":Cr[19],"Medium Time":Cr[18],"Short Time":Cr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Cr[2],Standard:Cr[4],Percent:Cr[10],Scientific:Cr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,d=[],u,f={},m=[],p=r.dense?[]:{},g="",b={},y={},v=ji('<Data ss:Type="String">'),k=0,S=0,w=0,A={s:{r:2e6,c:2e6},e:{r:0,c:0}},C={},N={},E="",_=0,O=[],B={},F={},D=0,H=[],ne=[],W={},ee=[],re,Q=!1,R=[],X=[],L={},I=0,G=0,V={Sheets:[],WBProps:{date1904:!1}},Z={};X0.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ve="";l=X0.exec(n);)switch(l[3]=(ve=l[3]).toLowerCase()){case"data":if(ve=="data"){if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&d.push([l[3],!0]);break}if(d[d.length-1][1])break;l[1]==="/"?Wpe(n.slice(k,l.index),E,v,d[d.length-1][0]=="comment"?W:b,{c:S,r:w},C,ee[S],y,R,r):(E="",v=ji(l[0]),k=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(ne.length>0&&(b.c=ne),(!r.sheetRows||r.sheetRows>w)&&b.v!==void 0&&(r.dense?(p[w]||(p[w]=[]),p[w][S]=b):p[mn(S)+Rn(w)]=b),b.HRef&&(b.l={Target:Xr(b.HRef)},b.HRefScreenTip&&(b.l.Tooltip=b.HRefScreenTip),delete b.HRef,delete b.HRefScreenTip),(b.MergeAcross||b.MergeDown)&&(I=S+(parseInt(b.MergeAcross,10)|0),G=w+(parseInt(b.MergeDown,10)|0),O.push({s:{c:S,r:w},e:{c:I,r:G}})),!r.sheetStubs)b.MergeAcross?S=I+1:++S;else if(b.MergeAcross||b.MergeDown){for(var Ee=S;Ee<=I;++Ee)for(var Te=w;Te<=G;++Te)(Ee>S||Te>w)&&(r.dense?(p[Te]||(p[Te]=[]),p[Te][Ee]={t:"z"}):p[mn(Ee)+Rn(Te)]={t:"z"});S=I+1}else++S;else b=Lpe(l[0]),b.Index&&(S=+b.Index-1),S<A.s.c&&(A.s.c=S),S>A.e.c&&(A.e.c=S),l[0].slice(-2)==="/>"&&++S,ne=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(w<A.s.r&&(A.s.r=w),w>A.e.r&&(A.e.r=w),l[0].slice(-2)==="/>"&&(y=ji(l[0]),y.Index&&(w=+y.Index-1)),S=0,++w):(y=ji(l[0]),y.Index&&(w=+y.Index-1),L={},(y.AutoFitHeight=="0"||y.Height)&&(L.hpx=parseInt(y.Height,10),L.hpt=IL(L.hpx),X[w]=L),y.Hidden=="1"&&(L.hidden=!0,X[w]=L));break;case"worksheet":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));m.push(g),A.s.r<=A.e.r&&A.s.c<=A.e.c&&(p["!ref"]=Gr(A),r.sheetRows&&r.sheetRows<=A.e.r&&(p["!fullref"]=p["!ref"],A.e.r=r.sheetRows-1,p["!ref"]=Gr(A))),O.length&&(p["!merges"]=O),ee.length>0&&(p["!cols"]=ee),X.length>0&&(p["!rows"]=X),f[g]=p}else A={s:{r:2e6,c:2e6},e:{r:0,c:0}},w=S=0,d.push([l[3],!1]),u=ji(l[0]),g=Xr(u.Name),p=r.dense?[]:{},O=[],R=[],X=[],Z={name:g,Hidden:0},V.Sheets.push(Z);break;case"table":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;d.push([l[3],!1]),ee=[],Q=!1}break;case"style":l[1]==="/"?qpe(C,N,r):N=ji(l[0]);break;case"numberformat":N.nf=Xr(ji(l[0]).Format||"General"),e0[N.nf]&&(N.nf=e0[N.nf]);for(var ue=0;ue!=392&&Cr[ue]!=N.nf;++ue);if(ue==392){for(ue=57;ue!=392;++ue)if(Cr[ue]==null){bc(N.nf,ue);break}}break;case"column":if(d[d.length-1][0]!=="table")break;if(re=ji(l[0]),re.Hidden&&(re.hidden=!0,delete re.Hidden),re.Width&&(re.wpx=parseInt(re.Width,10)),!Q&&re.wpx>10){Q=!0,is=OL;for(var ge=0;ge<ee.length;++ge)ee[ge]&&bu(ee[ge])}Q&&bu(re),ee[re.Index-1||ee.length]=re;for(var Fe=0;Fe<+re.Span;++Fe)ee[ee.length]=Mn(re);break;case"namedrange":if(l[1]==="/")break;V.Names||(V.Names=[]);var J=xr(l[0]),Ze={Name:J.Name,Ref:Wd(J.RefersTo.slice(1),{r:0,c:0})};V.Sheets.length>0&&(Ze.Sheet=V.Sheets.length-1),V.Names.push(Ze);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?E+=n.slice(_,l.index):_=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;N.Interior=ji(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?Cde(B,ve,n.slice(D,l.index)):D=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else d.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));zpe(W),ne.push(W)}else d.push([l[3],!1]),u=ji(l[0]),W={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var rt=ji(l[0]);p["!autofilter"]={ref:Wd(rt.Range).replace(/\$/g,"")},d.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&d.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&d.push([l[3],!0]);break;case"null":break;default:if(d.length==0&&l[3]=="document"||d.length==0&&l[3]=="uof")return S6(n,r);var Tt=!0;switch(d[d.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Tt=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Tt=!1}break;case"excelworkbook":switch(l[3]){case"date1904":V.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Tt=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:Tt=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(D,l.index)){case"SheetHidden":Z.Hidden=1;break;case"SheetVeryHidden":Z.Hidden=2;break}else D=l.index+l[0].length;break;case"header":p["!margins"]||Zh(p["!margins"]={},"xlml"),isNaN(+xr(l[0]).Margin)||(p["!margins"].header=+xr(l[0]).Margin);break;case"footer":p["!margins"]||Zh(p["!margins"]={},"xlml"),isNaN(+xr(l[0]).Margin)||(p["!margins"].footer=+xr(l[0]).Margin);break;case"pagemargins":var ze=xr(l[0]);p["!margins"]||Zh(p["!margins"]={},"xlml"),isNaN(+ze.Top)||(p["!margins"].top=+ze.Top),isNaN(+ze.Left)||(p["!margins"].left=+ze.Left),isNaN(+ze.Right)||(p["!margins"].right=+ze.Right),isNaN(+ze.Bottom)||(p["!margins"].bottom=+ze.Bottom);break;case"displayrighttoleft":V.Views||(V.Views=[]),V.Views[0]||(V.Views[0]={}),V.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Tt=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Tt=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Tt=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Tt=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Tt=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Tt=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Tt=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Tt=!1}break;case"smarttags":break;default:Tt=!1;break}if(Tt||l[3].match(/!\[CDATA/))break;if(!d[d.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+d.join("|");if(d[d.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?Upe(F,ve,H,n.slice(D,l.index)):(H=l,D=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+d.join("|")}var Re={};return!r.bookSheets&&!r.bookProps&&(Re.Sheets=f),Re.SheetNames=m,Re.Workbook=V,Re.SSF=Mn(Cr),Re.Props=B,Re.Custprops=F,Re}function g2(e,t){switch(yS(t=t||{}),t.type||"base64"){case"base64":return yj(qs(e),t);case"binary":case"buffer":case"file":return yj(e,t);case"array":return yj(Uc(e),t)}}function Kpe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=ide(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=ode(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var Vpe=[60,1084,2066,2165,2175];function Gpe(e,t,r,n,s){var i=n,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var d=Oo(r,r.l),u=x2[d],f=0;u!=null&&Vpe.indexOf(d)>-1;)i=Oo(r,r.l+2),f=r.l+4,d==2066?f+=4:(d==2165||d==2175)&&(f+=12),l=r.slice(f,r.l+4+i),o.push(l),r.l+=4+i,u=x2[d=Oo(r,r.l)];var m=yl(o);On(m,0);var p=0;m.lens=[];for(var g=0;g<o.length;++g)m.lens.push(p),p+=o[g].length;if(m.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+m.length+" < "+n;return t.f(m,m.length,s)}function Wi(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Cr[n])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Wc[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=G0(e.v):e.w=Dc(e.v):e.w=ui(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&n&&e.t=="n"&&Ru(Cr[n]||String(n))){var s=gc(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Km(e,t,r){return{v:e,ixfe:t,t:r}}function Ype(e,t){var r={opts:{}},n={},s=t.dense?[]:{},i={},o={},l=null,d=[],u="",f={},m,p="",g,b,y,v,k={},S=[],w,A,C=[],N=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},O=function(It){return It<8?wc[It]:It<64&&N[It-8]||wc[It]},B=function(It,er,Ir){var Tr=er.XF.data;if(!(!Tr||!Tr.patternType||!Ir||!Ir.cellStyles)){er.s={},er.s.patternType=Tr.patternType;var tr;(tr=Q0(O(Tr.icvFore)))&&(er.s.fgColor={rgb:tr}),(tr=Q0(O(Tr.icvBack)))&&(er.s.bgColor={rgb:tr})}},F=function(It,er,Ir){if(!(L>1)&&!(Ir.sheetRows&&It.r>=Ir.sheetRows)){if(Ir.cellStyles&&er.XF&&er.XF.data&&B(It,er,Ir),delete er.ixfe,delete er.XF,m=It,p=kr(It),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),It.r<o.s.r&&(o.s.r=It.r),It.c<o.s.c&&(o.s.c=It.c),It.r+1>o.e.r&&(o.e.r=It.r+1),It.c+1>o.e.c&&(o.e.c=It.c+1),Ir.cellFormula&&er.f){for(var Tr=0;Tr<S.length;++Tr)if(!(S[Tr][0].s.c>It.c||S[Tr][0].s.r>It.r)&&!(S[Tr][0].e.c<It.c||S[Tr][0].e.r<It.r)){er.F=Gr(S[Tr][0]),(S[Tr][0].s.c!=It.c||S[Tr][0].s.r!=It.r)&&delete er.f,er.f&&(er.f=""+Vn(S[Tr][1],o,It,R,D));break}}Ir.dense?(s[It.r]||(s[It.r]=[]),s[It.r][It.c]=er):s[p]=er}},D={enc:!1,sbcch:0,snames:[],sharedf:k,arrayf:S,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(D.password=t.password);var H,ne=[],W=[],ee=[],re=[],Q=!1,R=[];R.SheetNames=D.snames,R.sharedf=D.sharedf,R.arrayf=D.arrayf,R.names=[],R.XTI=[];var X=0,L=0,I=0,G=[],V=[],Z;D.codepage=1200,Ii(1200);for(var ve=!1;e.l<e.length-1;){var Ee=e.l,Te=e.read_shift(2);if(Te===0&&X===10)break;var ue=e.l===e.length?0:e.read_shift(2),ge=x2[Te];if(ge&&ge.f){if(t.bookSheets&&X===133&&Te!==133)break;if(X=Te,ge.r===2||ge.r==12){var Fe=e.read_shift(2);if(ue-=2,!D.enc&&Fe!==Te&&((Fe&255)<<8|Fe>>8)!==Te)throw new Error("rt mismatch: "+Fe+"!="+Te);ge.r==12&&(e.l+=10,ue-=10)}var J={};if(Te===10?J=ge.f(e,ue,D):J=Gpe(Te,ge,e,ue,D),L==0&&[9,521,1033,2057].indexOf(X)===-1)continue;switch(Te){case 34:r.opts.Date1904=E.WBProps.date1904=J;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(D.enc||(e.l=0),D.enc=J,!t.password)throw new Error("File is password-protected");if(J.valid==null)throw new Error("Encryption scheme unsupported");if(!J.valid)throw new Error("Password is incorrect");break;case 92:D.lastuser=J;break;case 66:var Ze=Number(J);switch(Ze){case 21010:Ze=1200;break;case 32768:Ze=1e4;break;case 32769:Ze=1252;break}Ii(D.codepage=Ze),ve=!0;break;case 317:D.rrtabid=J;break;case 25:D.winlocked=J;break;case 439:r.opts.RefreshAll=J;break;case 12:r.opts.CalcCount=J;break;case 16:r.opts.CalcDelta=J;break;case 17:r.opts.CalcIter=J;break;case 13:r.opts.CalcMode=J;break;case 14:r.opts.CalcPrecision=J;break;case 95:r.opts.CalcSaveRecalc=J;break;case 15:D.CalcRefMode=J;break;case 2211:r.opts.FullCalc=J;break;case 129:J.fDialog&&(s["!type"]="dialog"),J.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),J.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:C.push(J);break;case 430:R.push([J]),R[R.length-1].XTI=[];break;case 35:case 547:R[R.length-1].push(J);break;case 24:case 536:Z={Name:J.Name,Ref:Vn(J.rgce,o,null,R,D)},J.itab>0&&(Z.Sheet=J.itab-1),R.names.push(Z),R[0]||(R[0]=[],R[0].XTI=[]),R[R.length-1].push(J),J.Name=="_xlnm._FilterDatabase"&&J.itab>0&&J.rgce&&J.rgce[0]&&J.rgce[0][0]&&J.rgce[0][0][0]=="PtgArea3d"&&(V[J.itab-1]={ref:Gr(J.rgce[0][0][1][2])});break;case 22:D.ExternCount=J;break;case 23:R.length==0&&(R[0]=[],R[0].XTI=[]),R[R.length-1].XTI=R[R.length-1].XTI.concat(J),R.XTI=R.XTI.concat(J);break;case 2196:if(D.biff<8)break;Z!=null&&(Z.Comment=J[1]);break;case 18:s["!protect"]=J;break;case 19:J!==0&&D.WTF&&console.error("Password verifier: "+J);break;case 133:i[J.pos]=J,D.snames.push(J.name);break;case 10:{if(--L)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=Gr(o),t.sheetRows&&t.sheetRows<=o.e.r){var rt=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Gr(o),o.e.r=rt}o.e.r++,o.e.c++}ne.length>0&&(s["!merges"]=ne),W.length>0&&(s["!objects"]=W),ee.length>0&&(s["!cols"]=ee),re.length>0&&(s["!rows"]=re),E.Sheets.push(_)}u===""?f=s:n[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(D.biff===8&&(D.biff={9:2,521:3,1033:4}[Te]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[J.BIFFVer]||8),D.biffguess=J.BIFFVer==0,J.BIFFVer==0&&J.dt==4096&&(D.biff=5,ve=!0,Ii(D.codepage=28591)),D.biff==8&&J.BIFFVer==0&&J.dt==16&&(D.biff=2),L++)break;if(s=t.dense?[]:{},D.biff<8&&!ve&&(ve=!0,Ii(D.codepage=t.codepage||1252)),D.biff<5||J.BIFFVer==0&&J.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var Tt={pos:e.l-ue,name:u};i[Tt.pos]=Tt,D.snames.push(u)}else u=(i[Ee]||{name:""}).name;J.dt==32&&(s["!type"]="chart"),J.dt==64&&(s["!type"]="macro"),ne=[],W=[],D.arrayf=S=[],ee=[],re=[],Q=!1,_={Hidden:(i[Ee]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[J.r]||[])[J.c]:s[kr({c:J.c,r:J.r})])&&++J.c,w={ixfe:J.ixfe,XF:C[J.ixfe]||{},v:J.val,t:"n"},I>0&&(w.z=G[w.ixfe>>8&63]),Wi(w,t,r.opts.Date1904),F({c:J.c,r:J.r},w,t);break;case 5:case 517:w={ixfe:J.ixfe,XF:C[J.ixfe],v:J.val,t:J.t},I>0&&(w.z=G[w.ixfe>>8&63]),Wi(w,t,r.opts.Date1904),F({c:J.c,r:J.r},w,t);break;case 638:w={ixfe:J.ixfe,XF:C[J.ixfe],v:J.rknum,t:"n"},I>0&&(w.z=G[w.ixfe>>8&63]),Wi(w,t,r.opts.Date1904),F({c:J.c,r:J.r},w,t);break;case 189:for(var ze=J.c;ze<=J.C;++ze){var Re=J.rkrec[ze-J.c][0];w={ixfe:Re,XF:C[Re],v:J.rkrec[ze-J.c][1],t:"n"},I>0&&(w.z=G[w.ixfe>>8&63]),Wi(w,t,r.opts.Date1904),F({c:ze,r:J.r},w,t)}break;case 6:case 518:case 1030:{if(J.val=="String"){l=J;break}if(w=Km(J.val,J.cell.ixfe,J.tt),w.XF=C[w.ixfe],t.cellFormula){var Ce=J.formula;if(Ce&&Ce[0]&&Ce[0][0]&&Ce[0][0][0]=="PtgExp"){var Se=Ce[0][0][1][0],Qe=Ce[0][0][1][1],kt=kr({r:Se,c:Qe});k[kt]?w.f=""+Vn(J.formula,o,J.cell,R,D):w.F=((t.dense?(s[Se]||[])[Qe]:s[kt])||{}).F}else w.f=""+Vn(J.formula,o,J.cell,R,D)}I>0&&(w.z=G[w.ixfe>>8&63]),Wi(w,t,r.opts.Date1904),F(J.cell,w,t),l=J}break;case 7:case 519:if(l)l.val=J,w=Km(J,l.cell.ixfe,"s"),w.XF=C[w.ixfe],t.cellFormula&&(w.f=""+Vn(l.formula,o,l.cell,R,D)),I>0&&(w.z=G[w.ixfe>>8&63]),Wi(w,t,r.opts.Date1904),F(l.cell,w,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{S.push(J);var Ct=kr(J[0].s);if(g=t.dense?(s[J[0].s.r]||[])[J[0].s.c]:s[Ct],t.cellFormula&&g){if(!l||!Ct||!g)break;g.f=""+Vn(J[1],o,J[0],R,D),g.F=Gr(J[0])}}break;case 1212:{if(!t.cellFormula)break;if(p){if(!l)break;k[kr(l.cell)]=J[0],g=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[kr(l.cell)],(g||{}).f=""+Vn(J[0],o,m,R,D)}}break;case 253:w=Km(d[J.isst].t,J.ixfe,"s"),d[J.isst].h&&(w.h=d[J.isst].h),w.XF=C[w.ixfe],I>0&&(w.z=G[w.ixfe>>8&63]),Wi(w,t,r.opts.Date1904),F({c:J.c,r:J.r},w,t);break;case 513:t.sheetStubs&&(w={ixfe:J.ixfe,XF:C[J.ixfe],t:"z"},I>0&&(w.z=G[w.ixfe>>8&63]),Wi(w,t,r.opts.Date1904),F({c:J.c,r:J.r},w,t));break;case 190:if(t.sheetStubs)for(var yr=J.c;yr<=J.C;++yr){var Kt=J.ixfe[yr-J.c];w={ixfe:Kt,XF:C[Kt],t:"z"},I>0&&(w.z=G[w.ixfe>>8&63]),Wi(w,t,r.opts.Date1904),F({c:yr,r:J.r},w,t)}break;case 214:case 516:case 4:w=Km(J.val,J.ixfe,"s"),w.XF=C[w.ixfe],I>0&&(w.z=G[w.ixfe>>8&63]),Wi(w,t,r.opts.Date1904),F({c:J.c,r:J.r},w,t);break;case 0:case 512:L===1&&(o=J);break;case 252:d=J;break;case 1054:if(D.biff==4){G[I++]=J[1];for(var Rr=0;Rr<I+163&&Cr[Rr]!=J[1];++Rr);Rr>=163&&bc(J[1],I+163)}else bc(J[1],J[0]);break;case 30:{G[I++]=J;for(var Pr=0;Pr<I+163&&Cr[Pr]!=J;++Pr);Pr>=163&&bc(J,I+163)}break;case 229:ne=ne.concat(J);break;case 93:W[J.cmo[0]]=D.lastobj=J;break;case 438:D.lastobj.TxO=J;break;case 127:D.lastobj.ImData=J;break;case 440:for(v=J[0].s.r;v<=J[0].e.r;++v)for(y=J[0].s.c;y<=J[0].e.c;++y)g=t.dense?(s[v]||[])[y]:s[kr({c:y,r:v})],g&&(g.l=J[1]);break;case 2048:for(v=J[0].s.r;v<=J[0].e.r;++v)for(y=J[0].s.c;y<=J[0].e.c;++y)g=t.dense?(s[v]||[])[y]:s[kr({c:y,r:v})],g&&g.l&&(g.l.Tooltip=J[1]);break;case 28:{if(D.biff<=5&&D.biff>=2)break;g=t.dense?(s[J[0].r]||[])[J[0].c]:s[kr(J[0])];var da=W[J[2]];g||(t.dense?(s[J[0].r]||(s[J[0].r]=[]),g=s[J[0].r][J[0].c]={t:"z"}):g=s[kr(J[0])]={t:"z"},o.e.r=Math.max(o.e.r,J[0].r),o.s.r=Math.min(o.s.r,J[0].r),o.e.c=Math.max(o.e.c,J[0].c),o.s.c=Math.min(o.s.c,J[0].c)),g.c||(g.c=[]),b={a:J[1],t:da.TxO.t},g.c.push(b)}break;case 2173:x0e(C[J.ixfe],J.ext);break;case 125:{if(!D.cellStyles)break;for(;J.e>=J.s;)ee[J.e--]={width:J.w/256,level:J.level||0,hidden:!!(J.flags&1)},Q||(Q=!0,fS(J.w/256)),bu(ee[J.e+1])}break;case 520:{var ur={};J.level!=null&&(re[J.r]=ur,ur.level=J.level),J.hidden&&(re[J.r]=ur,ur.hidden=!0),J.hpt&&(re[J.r]=ur,ur.hpt=J.hpt,ur.hpx=Z0(J.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Zh(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Te]]=J;break;case 161:s["!margins"]||Zh(s["!margins"]={}),s["!margins"].header=J.header,s["!margins"].footer=J.footer;break;case 574:J.RTL&&(E.Views[0].RTL=!0);break;case 146:N=J;break;case 2198:H=J;break;case 140:A=J;break;case 442:u?_.CodeName=J||_.name:E.WBProps.CodeName=J||"ThisWorkbook";break}}else ge||console.error("Missing Info for XLS Record 0x"+Te.toString(16)),e.l+=ue}return r.SheetNames=ro(i).sort(function(Br,It){return Number(Br)-Number(It)}).map(function(Br){return i[Br].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&V.forEach(function(Br,It){r.Sheets[r.SheetNames[It]]["!autofilter"]=Br}),r.Strings=d,r.SSF=Mn(Cr),D.enc&&(r.Encryption=D.enc),H&&(r.Themes=H),r.Metadata={},A!==void 0&&(r.Metadata.Country=A),R.names.length>0&&(E.Names=R.names),r.Workbook=E,r}var b6={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Xpe(e,t,r){var n=Vr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=a6(n,fde,b6.DSI);for(var i in s)t[i]=s[i]}catch(u){if(r.WTF)throw u}var o=Vr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=a6(o,mde,b6.SI);for(var d in l)t[d]==null&&(t[d]=l[d])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(pL(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function QL(e,t){t||(t={}),yS(t),E$(),t.codepage&&Xk(t.codepage);var r,n;if(e.FullPaths){if(Vr.find(e,"/encryption"))throw new Error("File is password-protected");r=Vr.find(e,"!CompObj"),n=Vr.find(e,"/Workbook")||Vr.find(e,"/Book")}else{switch(t.type){case"base64":e=Pi(qs(e));break;case"binary":e=Pi(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}On(e,0),n={content:e}}var s,i;if(r&&Kpe(r),t.bookProps&&!t.bookSheets)s={};else{var o=Hr?"buffer":"array";if(n&&n.content)s=Ype(n.content,t);else if((i=Vr.find(e,"PerfectOffice_MAIN"))&&i.content)s=Jh.to_workbook(i.content,(t.type=o,t));else if((i=Vr.find(e,"NativeContent_MAIN"))&&i.content)s=Jh.to_workbook(i.content,(t.type=o,t));else throw(i=Vr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Vr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=M0e(e))}var l={};return e.FullPaths&&Xpe(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}var yg={0:{f:Dme},1:{f:Mme},2:{f:Wme},3:{f:Lme},4:{f:Fme},5:{f:qme},6:{f:Vme},7:{f:Ume},8:{f:Qme},9:{f:Jme},10:{f:Yme},11:{f:Xme},12:{f:Rme},13:{f:zme},14:{f:Bme},15:{f:$me},16:{f:VL},17:{f:Gme},18:{f:Hme},19:{f:oS},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Spe},40:{},42:{},43:{f:Yhe},44:{f:Ghe},45:{f:Xhe},46:{f:Qhe},47:{f:Jhe},48:{},49:{f:Zce},50:{},51:{f:v0e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:EL},62:{f:Kme},63:{f:k0e},64:{f:ope},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Qn,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:ipe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Ime},148:{f:Ome,p:16},151:{f:tpe},152:{},153:{f:Npe},154:{},155:{},156:{f:jpe},157:{},158:{},159:{T:1,f:mhe},160:{T:-1},161:{T:1,f:qc},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Zme},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:y0e},336:{T:-1},337:{f:b0e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:h2},357:{},358:{},359:{},360:{T:1},361:{},362:{f:_L},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:rpe},427:{f:ape},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:spe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Pme},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:epe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:h2},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:O0e},633:{T:1},634:{T:-1},635:{T:1,f:D0e},636:{T:-1},637:{f:tde},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:fpe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:lpe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},x2={6:{f:gj},10:{f:hl},12:{f:Xa},13:{f:Xa},14:{f:qa},15:{f:qa},16:{f:Yn},17:{f:qa},18:{f:qa},19:{f:Xa},20:{f:o6},21:{f:o6},23:{f:_L},24:{f:c6},25:{f:qa},26:{},27:{},28:{f:Aue},29:{},34:{f:qa},35:{f:l6},38:{f:Yn},39:{f:Yn},40:{f:Yn},41:{f:Yn},42:{f:qa},43:{f:qa},47:{f:Phe},49:{f:due},51:{f:Xa},60:{},61:{f:oue},64:{f:qa},65:{f:cue},66:{f:Xa},77:{},80:{},81:{},82:{},85:{f:Xa},89:{},90:{},91:{},92:{f:Zde},93:{f:Due},94:{},95:{f:qa},96:{},97:{},99:{f:qa},125:{f:EL},128:{f:bue},129:{f:eue},130:{f:Xa},131:{f:qa},132:{f:qa},133:{f:tue},134:{},140:{f:Fue},141:{f:Xa},144:{},146:{f:Lue},151:{},152:{},153:{},154:{},155:{},156:{f:Xa},157:{},158:{},160:{f:Wue},161:{f:Uue},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:gue},190:{f:xue},193:{f:hl},197:{},198:{},199:{},200:{},201:{},202:{f:qa},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Xa},220:{},221:{f:qa},222:{},224:{f:vue},225:{f:Qde},226:{f:hl},227:{},229:{f:Tue},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:rue},253:{f:uue},255:{f:aue},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:bL},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:qa},353:{f:hl},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:jue},431:{f:qa},432:{},433:{},434:{},437:{},438:{f:Iue},439:{f:qa},440:{f:Mue},441:{},442:{f:yf},443:{},444:{f:Xa},445:{},446:{},448:{f:hl},449:{f:iue,r:2},450:{f:hl},512:{f:s6},513:{f:que},515:{f:wue},516:{f:hue},517:{f:i6},519:{f:zue},520:{f:nue},523:{},545:{f:d6},549:{f:n6},566:{},574:{f:lue},638:{f:pue},659:{},1048:{},1054:{f:fue},1084:{},1212:{f:_ue},2048:{f:Rue},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:qm},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:hl},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Bue,r:12},2173:{f:g0e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:qa,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Sue,r:12},2197:{},2198:{f:d0e,r:12},2199:{},2200:{},2201:{},2202:{f:Eue,r:12},2203:{f:hl},2204:{},2205:{},2206:{},2207:{},2211:{f:sue},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Xa},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Hue},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:$ue},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:s6},1:{},2:{f:Yue},3:{f:Gue},4:{f:Vue},5:{f:i6},7:{f:Xue},8:{},9:{f:qm},11:{},22:{f:Xa},30:{f:mue},31:{},32:{},33:{f:d6},36:{},37:{f:n6},50:{f:Jue},62:{},52:{},67:{},68:{f:Xa},69:{},86:{},126:{},127:{f:Kue},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Que},223:{},234:{},354:{},421:{},518:{f:gj},521:{f:qm},536:{f:c6},547:{f:l6},561:{},579:{},1030:{f:gj},1033:{f:qm},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Ni(e,t,r,n){var s=t;if(!isNaN(s)){var i=(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&oL(r)&&e.push(r)}}function w6(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,d=wce(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,f=0,m=0,p=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},b=[];for(o=0;o<d.length;++o){var y=d[o].trim(),v=y.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}f=0;continue}if(!(v!="<td"&&v!="<th")){var k=y.split(/<\/t[dh]>/i);for(l=0;l<k.length;++l){var S=k[l].trim();if(S.match(/<t[dh]/i)){for(var w=S,A=0;w.charAt(0)=="<"&&(A=w.indexOf(">"))>-1;)w=w.slice(A+1);for(var C=0;C<b.length;++C){var N=b[C];N.s.c==f&&N.s.r<u&&u<=N.e.r&&(f=N.e.c+1,C=-1)}var E=xr(S.slice(0,S.indexOf(">")));p=E.colspan?+E.colspan:1,((m=+E.rowspan)>1||p>1)&&b.push({s:{r:u,c:f},e:{r:u+(m||1)-1,c:f+p-1}});var _=E.t||E["data-t"]||"";if(!w.length){f+=p;continue}if(w=G$(w),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>f&&(g.s.c=f),g.e.c<f&&(g.e.c=f),!w.length){f+=p;continue}var O={t:"s",v:w};r.raw||!w.trim().length||_=="s"||(w==="TRUE"?O={t:"b",v:!0}:w==="FALSE"?O={t:"b",v:!1}:isNaN(Fi(w))?isNaN(vu(w).getDate())||(O={t:"d",v:kn(w)},r.cellDates||(O={t:"n",v:hs(O.v)}),O.z=r.dateNF||Cr[14]):O={t:"n",v:Fi(w)}),r.dense?(n[u]||(n[u]=[]),n[u][f]=O):n[kr({r:u,c:f})]=O,f+=p}}}}return n["!ref"]=Gr(g),b.length&&(n["!merges"]=b),n}function Jpe(e,t,r,n){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,d=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>o)&&!(s[u].e.r<r||s[u].e.c<o)){if(s[u].s.r<r||s[u].s.c<o){l=-1;break}l=s[u].e.r-s[u].s.r+1,d=s[u].e.c-s[u].s.c+1;break}if(!(l<0)){var f=kr({r,c:o}),m=n.dense?(e[r]||[])[o]:e[f],p=m&&m.v!=null&&(m.h||rS(m.w||(Wo(m),m.w)||""))||"",g={};l>1&&(g.rowspan=l),d>1&&(g.colspan=d),n.editable?p='<span contenteditable="true">'+p+"</span>":m&&(g["data-t"]=m&&m.t||"z",m.v!=null&&(g["data-v"]=m.v),m.z!=null&&(g["data-z"]=m.z),m.l&&(m.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+m.l.Target+'">'+p+"</a>")),g.id=(n.id||"sjs")+"-"+f,i.push(Fce("td",p,g))}}var b="<tr>";return b+i.join("")+"</tr>"}var Qpe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Zpe="</body></html>";function ege(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Ml(w6(r[0],t),t);var n=bS();return r.forEach(function(s,i){wS(n,w6(s,t),"Sheet"+(i+1))}),n}function tge(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function rge(e,t){var r=t||{},n=r.header!=null?r.header:Qpe,s=r.footer!=null?r.footer:Zpe,i=[n],o=Fu(e["!ref"]);r.dense=Array.isArray(e),i.push(tge(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(Jpe(e,o,l,r));return i.push("</table>"+s),i.join("")}function ZL(e,t,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var o=typeof n.origin=="string"?ds(n.origin):n.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),d=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var f=Fu(e["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),s==-1&&(u.e.r=s=f.e.r+1)}var m=[],p=0,g=e["!rows"]||(e["!rows"]=[]),b=0,y=0,v=0,k=0,S=0,w=0;for(e["!cols"]||(e["!cols"]=[]);b<l.length&&y<d;++b){var A=l[b];if(j6(A)){if(n.display)continue;g[y]={hidden:!0}}var C=A.children;for(v=k=0;v<C.length;++v){var N=C[v];if(!(n.display&&j6(N))){var E=N.hasAttribute("data-v")?N.getAttribute("data-v"):N.hasAttribute("v")?N.getAttribute("v"):G$(N.innerHTML),_=N.getAttribute("data-z")||N.getAttribute("z");for(p=0;p<m.length;++p){var O=m[p];O.s.c==k+i&&O.s.r<y+s&&y+s<=O.e.r&&(k=O.e.c+1-i,p=-1)}w=+N.getAttribute("colspan")||1,((S=+N.getAttribute("rowspan")||1)>1||w>1)&&m.push({s:{r:y+s,c:k+i},e:{r:y+s+(S||1)-1,c:k+i+(w||1)-1}});var B={t:"s",v:E},F=N.getAttribute("data-t")||N.getAttribute("t")||"";E!=null&&(E.length==0?B.t=F||"z":n.raw||E.trim().length==0||F=="s"||(E==="TRUE"?B={t:"b",v:!0}:E==="FALSE"?B={t:"b",v:!1}:isNaN(Fi(E))?isNaN(vu(E).getDate())||(B={t:"d",v:kn(E)},n.cellDates||(B={t:"n",v:hs(B.v)}),B.z=n.dateNF||Cr[14]):B={t:"n",v:Fi(E)})),B.z===void 0&&_!=null&&(B.z=_);var D="",H=N.getElementsByTagName("A");if(H&&H.length)for(var ne=0;ne<H.length&&!(H[ne].hasAttribute("href")&&(D=H[ne].getAttribute("href"),D.charAt(0)!="#"));++ne);D&&D.charAt(0)!="#"&&(B.l={Target:D}),n.dense?(e[y+s]||(e[y+s]=[]),e[y+s][k+i]=B):e[kr({c:k+i,r:y+s})]=B,u.e.c<k+i&&(u.e.c=k+i),k+=w}}++y}return m.length&&(e["!merges"]=(e["!merges"]||[]).concat(m)),u.e.r=Math.max(u.e.r,y-1+s),e["!ref"]=Gr(u),y>=d&&(e["!fullref"]=Gr((u.e.r=l.length-b+y-1+s,u))),e}function e8(e,t){var r=t||{},n=r.dense?[]:{};return ZL(n,e,t)}function age(e,t){return Ml(e8(e,t),t)}function j6(e){var t="",r=nge(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function nge(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function sge(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Xr(t.replace(/<[^>]*>/g,""));return[r]}var N6={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function t8(e,t){var r=t||{},n=aS(e),s=[],i,o,l={name:""},d="",u=0,f,m,p={},g=[],b=r.dense?[]:{},y,v,k={value:""},S="",w=0,A=[],C=-1,N=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,O={},B=[],F={},D=0,H=0,ne=[],W=1,ee=1,re=[],Q={Names:[]},R={},X=["",""],L=[],I={},G="",V=0,Z=!1,ve=!1,Ee=0;for(X0.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=X0.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?b["!ref"]=Gr(E):b["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(b["!fullref"]=b["!ref"],E.e.r=r.sheetRows-1,b["!ref"]=Gr(E)),B.length&&(b["!merges"]=B),ne.length&&(b["!rows"]=ne),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),g.push(f.name),p[f.name]=b,ve=!1):y[0].charAt(y[0].length-2)!=="/"&&(f=xr(y[0],!1),C=N=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,b=r.dense?[]:{},B=[],ne=[],ve=!0);break;case"table-row-group":y[1]==="/"?--_:++_;break;case"table-row":case"":if(y[1]==="/"){C+=W,W=1;break}if(m=xr(y[0],!1),m.?C=m.-1:C==-1&&(C=0),W=+m["number-rows-repeated"]||1,W<10)for(Ee=0;Ee<W;++Ee)_>0&&(ne[C+Ee]={level:_});N=-1;break;case"covered-table-cell":y[1]!=="/"&&++N,r.sheetStubs&&(r.dense?(b[C]||(b[C]=[]),b[C][N]={t:"z"}):b[kr({r:C,c:N})]={t:"z"}),S="",A=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++N,k=xr(y[0],!1),ee=parseInt(k["number-columns-repeated"]||"1",10),v={t:"z",v:null},k.formula&&r.cellFormula!=!1&&(v.f=x6(Xr(k.formula))),(k.||k["value-type"])=="string"&&(v.t="s",v.v=Xr(k["string-value"]||""),r.dense?(b[C]||(b[C]=[]),b[C][N]=v):b[kr({r:C,c:N})]=v),N+=ee-1;else if(y[1]!=="/"){++N,S="",w=0,A=[],ee=1;var Te=W?C+W-1:C;if(N>E.e.c&&(E.e.c=N),N<E.s.c&&(E.s.c=N),C<E.s.r&&(E.s.r=C),Te>E.e.r&&(E.e.r=Te),k=xr(y[0],!1),L=[],I={},v={t:k.||k["value-type"],v:null},r.cellFormula)if(k.formula&&(k.formula=Xr(k.formula)),k["number-matrix-columns-spanned"]&&k["number-matrix-rows-spanned"]&&(D=parseInt(k["number-matrix-rows-spanned"],10)||0,H=parseInt(k["number-matrix-columns-spanned"],10)||0,F={s:{r:C,c:N},e:{r:C+D-1,c:N+H-1}},v.F=Gr(F),re.push([F,v.F])),k.formula)v.f=x6(k.formula);else for(Ee=0;Ee<re.length;++Ee)C>=re[Ee][0].s.r&&C<=re[Ee][0].e.r&&N>=re[Ee][0].s.c&&N<=re[Ee][0].e.c&&(v.F=re[Ee][1]);switch((k["number-columns-spanned"]||k["number-rows-spanned"])&&(D=parseInt(k["number-rows-spanned"],10)||0,H=parseInt(k["number-columns-spanned"],10)||0,F={s:{r:C,c:N},e:{r:C+D-1,c:N+H-1}},B.push(F)),k["number-columns-repeated"]&&(ee=parseInt(k["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Ca(k["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(k.value);break;case"percentage":v.t="n",v.v=parseFloat(k.value);break;case"currency":v.t="n",v.v=parseFloat(k.value);break;case"date":v.t="d",v.v=kn(k["date-value"]),r.cellDates||(v.t="n",v.v=hs(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=yce(k["time-value"])/86400,r.cellDates&&(v.t="d",v.v=xx(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(k.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",k["string-value"]!=null&&(S=Xr(k["string-value"]),A=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(Z=!1,v.t==="s"&&(v.v=S||"",A.length&&(v.R=A),Z=w==0),R.Target&&(v.l=R),L.length>0&&(v.c=L,L=[]),S&&r.cellText!==!1&&(v.w=S),Z&&(v.t="z",delete v.v),(!Z||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=C))for(var ue=0;ue<W;++ue){if(ee=parseInt(k["number-columns-repeated"]||"1",10),r.dense)for(b[C+ue]||(b[C+ue]=[]),b[C+ue][N]=ue==0?v:Mn(v);--ee>0;)b[C+ue][N+ee]=Mn(v);else for(b[kr({r:C+ue,c:N})]=v;--ee>0;)b[kr({r:C+ue,c:N+ee})]=Mn(v);E.e.c<=N&&(E.e.c=N)}ee=parseInt(k["number-columns-repeated"]||"1",10),N+=ee-1,ee=0,v={},S="",A=[]}R={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i;I.t=S,A.length&&(I.R=A),I.a=G,L.push(I)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);G="",V=0,S="",w=0,A=[];break;case"creator":y[1]==="/"?G=n.slice(V,y.index):V=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);S="",w=0,A=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(O[l.name]=d,(i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&(d="",l=xr(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=xr(y[0],!1),d+=N6[y[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=xr(y[0],!1),d+=N6[y[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":d+=n.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":o=xr(y[0],!1),X=xj(o["cell-range-address"]);var ge={Name:o.name,Ref:X[0]+"!"+X[1]};ve&&(ge.Sheet=g.length),Q.Names.push(ge);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!k||!k["string-value"])){var Fe=sge(n.slice(w,y.index));S=(S.length>0?S+`
`:"")+Fe[0]}else xr(y[0],!1),w=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{X=xj(xr(y[0])["target-range-address"]),p[X[0]]["!autofilter"]={ref:X[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(R=xr(y[0],!1),!R.href)break;R.Target=Xr(R.href),delete R.href,R.Target.charAt(0)=="#"&&R.Target.indexOf(".")>-1?(X=xj(R.Target.slice(1)),R.Target="#"+X[0]+"!"+X[1]):R.Target.match(/^\.\.[\\\/]/)&&(R.Target=R.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var J={Sheets:p,SheetNames:g,Workbook:Q};return r.bookSheets&&delete J.Sheets,J}function k6(e,t){t=t||{},si(e,"META-INF/manifest.xml")&&wde(Ya(e,"META-INF/manifest.xml"),t);var r=Ls(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=t8(ba(r),t);return si(e,"meta.xml")&&(n.Props=mL(Ya(e,"meta.xml"))),n}function S6(e,t){return t8(e,t)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function gS(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function y2(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):ba(Uc(e))}function v2(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function _6(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function ige(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function ef(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function pn(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Xn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=ef(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var d=r[0];e[r[0]++]>=128;);l=e.slice(d,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=ef(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var u={data:l,type:i};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function xS(e,t){return e?.map(function(r){return t(r.data)})||[]}function oge(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=ef(e,n),i=Xn(e.slice(n[0],n[0]+s));n[0]+=s;var o={id:pn(i[1][0].data),messages:[]};i[2].forEach(function(l){var d=Xn(l.data),u=pn(d[3][0].data);o.messages.push({meta:d,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=i[3])!=null&&t[0]&&(o.merge=pn(i[3][0].data)>>>0>0),r.push(o)}return r}function lge(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=ef(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var d=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,d=(t[r[0]++]&224)<<3,d|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(d=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(d=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[v2(s)],d==0)throw new Error("Invalid offset 0");if(d>s[0].length)throw new Error("Invalid offset beyond length");if(u>=d)for(s.push(s[0].slice(-d)),u-=d;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-d,-d+u))}}var f=v2(s);if(f.length!=n)throw new Error("Unexpected length: ".concat(f.length," != ").concat(n));return f}function cge(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(lge(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return v2(t)}function dge(e,t,r,n){var s=gS(e),i=s.getUint32(4,!0),o=(n>1?12:8)+_6(i&(n>1?3470:398))*4,l=-1,d=-1,u=NaN,f=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=_6(i&(n>1?12288:4096))*4,i&16&&(d=s.getUint32(o,!0),o+=4),i&32&&(u=s.getFloat64(o,!0),o+=8),i&64&&(f.setTime(f.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var m;switch(e[2]){case 0:break;case 2:m={t:"n",v:u};break;case 3:m={t:"s",v:t[d]};break;case 5:m={t:"d",v:f};break;case 6:m={t:"b",v:u>0};break;case 7:m={t:"n",v:u/86400};break;case 8:m={t:"e",v:0};break;case 9:if(l>-1)m={t:"s",v:r[l]};else if(d>-1)m={t:"s",v:t[d]};else if(!isNaN(u))m={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return m}function uge(e,t,r){var n=gS(e),s=n.getUint32(8,!0),i=12,o=-1,l=-1,d=NaN,u=NaN,f=new Date(2001,0,1);s&1&&(d=ige(e,i),i+=16),s&2&&(u=n.getFloat64(i,!0),i+=8),s&4&&(f.setTime(f.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=n.getUint32(i,!0),i+=4),s&16&&(o=n.getUint32(i,!0),i+=4);var m;switch(e[1]){case 0:break;case 2:m={t:"n",v:d};break;case 3:m={t:"s",v:t[l]};break;case 5:m={t:"d",v:f};break;case 6:m={t:"b",v:u>0};break;case 7:m={t:"n",v:u/86400};break;case 8:m={t:"e",v:0};break;case 9:if(o>-1)m={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:m={t:"n",v:d};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return m}function hge(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return dge(e,t,r,e[0]);case 5:return uge(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function _l(e){var t=Xn(e);return ef(t[1][0].data)}function E6(e,t){var r=Xn(t.data),n=pn(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=Xn(o.data),d=pn(l[1][0].data)>>>0;switch(n){case 1:i[d]=y2(l[3][0].data);break;case 8:{var u=e[_l(l[9][0].data)][0],f=Xn(u.data),m=e[_l(f[1][0].data)][0],p=pn(m.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var g=Xn(m.data);i[d]=g[3].map(function(b){return y2(b.data)}).join("")}break}}),i}function fge(e,t){var r,n,s,i,o,l,d,u,f,m,p,g,b,y,v=Xn(e),k=pn(v[1][0].data)>>>0,S=pn(v[2][0].data)>>>0,w=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&pn(v[8][0].data)>0||!1,A,C;if((i=(s=v[7])==null?void 0:s[0])!=null&&i.data&&t!=0)A=(l=(o=v[7])==null?void 0:o[0])==null?void 0:l.data,C=(u=(d=v[6])==null?void 0:d[0])==null?void 0:u.data;else if((m=(f=v[4])==null?void 0:f[0])!=null&&m.data&&t!=1)A=(g=(p=v[4])==null?void 0:p[0])==null?void 0:g.data,C=(y=(b=v[3])==null?void 0:b[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var N=w?4:1,E=gS(A),_=[],O=0;O<A.length/2;++O){var B=E.getUint16(O*2,!0);B<65535&&_.push([O,B])}if(_.length!=S)throw"Expected ".concat(S," cells, found ").concat(_.length);var F=[];for(O=0;O<_.length-1;++O)F[_[O][0]]=C.subarray(_[O][1]*N,_[O+1][1]*N);return _.length>=1&&(F[_[_.length-1][0]]=C.subarray(_[_.length-1][1]*N)),{R:k,cells:F}}function mge(e,t){var r,n=Xn(t.data),s=(r=n?.[7])!=null&&r[0]?pn(n[7][0].data)>>>0>0?1:0:-1,i=xS(n[5],function(o){return fge(o,s)});return{nrows:pn(n[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(d,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=d}),o},[])}}function pge(e,t,r){var n,s=Xn(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(pn(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(pn(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=Gr(i);var o=Xn(s[4][0].data),l=E6(e,e[_l(o[4][0].data)][0]),d=(n=o[17])!=null&&n[0]?E6(e,e[_l(o[17][0].data)][0]):[],u=Xn(o[3][0].data),f=0;u[1].forEach(function(m){var p=Xn(m.data),g=e[_l(p[2][0].data)][0],b=pn(g.meta[1][0].data);if(b!=6002)throw new Error("6001 unexpected reference to ".concat(b));var y=mge(e,g);y.data.forEach(function(v,k){v.forEach(function(S,w){var A=kr({r:f+k,c:w}),C=hge(S,l,d);C&&(r[A]=C)})}),f+=y.nrows})}function gge(e,t){var r=Xn(t.data),n={"!ref":"A1"},s=e[_l(r[2][0].data)],i=pn(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return pge(e,s[0],n),n}function xge(e,t){var r,n=Xn(t.data),s={name:(r=n[1])!=null&&r[0]?y2(n[1][0].data):"",sheets:[]},i=xS(n[2],_l);return i.forEach(function(o){e[o].forEach(function(l){var d=pn(l.meta[1][0].data);d==6e3&&s.sheets.push(gge(e,l))})}),s}function yge(e,t){var r=bS(),n=Xn(t.data),s=xS(n[1],_l);if(s.forEach(function(i){e[i].forEach(function(o){var l=pn(o.meta[1][0].data);if(l==2){var d=xge(e,o);d.sheets.forEach(function(u,f){wS(r,u,f==0?d.name:d.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function vj(e){var t,r,n,s,i={},o=[];if(e.FullPaths.forEach(function(d){if(d.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(d){if(d.name.match(/\.iwa$/)){var u;try{u=cge(d.content)}catch(m){return console.log("?? "+d.content.length+" "+(m.message||m))}var f;try{f=oge(u)}catch(m){return console.log("## "+(m.message||m))}f.forEach(function(m){i[m.id]=m.messages,o.push(m.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(n=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&pn(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(d){i[d].forEach(function(u){var f=pn(u.meta[1][0].data)>>>0;if(f==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return yge(i,l)}function vge(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function yS(e){vge([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function bge(e){return $d.WS.indexOf(e)>-1?"sheet":e==$d.CS?"chart":e==$d.DS?"dialog":e==$d.MS?"macro":e&&e.length?e:"sheet"}function wge(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,bge(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function jge(e,t,r,n,s,i,o,l,d,u,f,m){try{i[n]=Yh(Ls(e,r,!0),t);var p=Ya(e,t),g;switch(l){case"sheet":g=Cpe(p,t,s,d,i[n],u,f,m);break;case"chart":if(g=Ape(p,t,s,d,i[n],u,f,m),!g||!g["!drawel"])break;var b=Mh(g["!drawel"].Target,t),y=f2(b),v=E0e(Ls(e,b,!0),Yh(Ls(e,y,!0),b)),k=Mh(v,b),S=f2(k);g=upe(Ls(e,k,!0),k,d,Yh(Ls(e,S,!0),k),u,g);break;case"macro":g=Tpe(p,t,s,d,i[n],u,f,m);break;case"dialog":g=Dpe(p,t,s,d,i[n],u,f,m);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=g;var w=[];i&&i[n]&&ro(i[n]).forEach(function(A){var C="";if(i[n][A].Type==$d.CMNT){C=Mh(i[n][A].Target,t);var N=Mpe(Ya(e,C,!0),C,d);if(!N||!N.length)return;h6(g,N,!1)}i[n][A].Type==$d.TCMNT&&(C=Mh(i[n][A].Target,t),w=w.concat(A0e(Ya(e,C,!0),d)))}),w&&w.length&&h6(g,w,!0,d.people||[])}catch(A){if(d.WTF)throw A}}function ri(e){return e.charAt(0)=="/"?e.slice(1):e}function Nge(e,t){if(L$(),t=t||{},yS(t),si(e,"META-INF/manifest.xml")||si(e,"objectdata.xml"))return k6(e,t);if(si(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof vj<"u"){if(e.FileIndex)return vj(e);var r=Vr.utils.cfb_new();return LP(e).forEach(function(ne){kce(r,ne,Nce(e,ne))}),vj(r)}throw new Error("Unsupported NUMBERS file")}if(!si(e,"[Content_Types].xml"))throw si(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):si(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=LP(e),s=vde(Ls(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",Ya(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!Ya(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var d={},u={};if(!t.bookSheets&&!t.bookProps){if(Qh=[],s.sst)try{Qh=Ipe(Ya(e,ri(s.sst)),s.sst,t)}catch(ne){if(t.WTF)throw ne}t.cellStyles&&s.themes.length&&(d=Ppe(Ls(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=Ope(Ya(e,ri(s.style)),s.style,d,t))}s.links.map(function(ne){try{var W=Yh(Ls(e,f2(ri(ne))),ne);return Fpe(Ya(e,ri(ne)),W,ne,t)}catch{}});var f=Epe(Ya(e,ri(s.workbooks[0])),s.workbooks[0],t),m={},p="";s.coreprops.length&&(p=Ya(e,ri(s.coreprops[0]),!0),p&&(m=mL(p)),s.extprops.length!==0&&(p=Ya(e,ri(s.extprops[0]),!0),p&&kde(p,m,t)));var g={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(p=Ls(e,ri(s.custprops[0]),!0),p&&(g=_de(p,t)));var b={};if((t.bookSheets||t.bookProps)&&(f.Sheets?o=f.Sheets.map(function(W){return W.name}):m.Worksheets&&m.SheetNames.length>0&&(o=m.SheetNames),t.bookProps&&(b.Props=m,b.Custprops=g),t.bookSheets&&typeof o<"u"&&(b.SheetNames=o),t.bookSheets?b.SheetNames:t.bookProps))return b;o={};var y={};t.bookDeps&&s.calcchain&&(y=Rpe(Ya(e,ri(s.calcchain)),s.calcchain));var v=0,k={},S,w;{var A=f.Sheets;m.Worksheets=A.length,m.SheetNames=[];for(var C=0;C!=A.length;++C)m.SheetNames[C]=A[C].name}var N=i?"bin":"xml",E=s.workbooks[0].lastIndexOf("/"),_=(s.workbooks[0].slice(0,E+1)+"_rels/"+s.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");si(e,_)||(_="xl/_rels/workbook."+N+".rels");var O=Yh(Ls(e,_,!0),_.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=$pe(Ya(e,ri(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=T0e(Ya(e,ri(s.people[0])),t)),O&&(O=wge(O,f.Sheets));var B=Ya(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=m.Worksheets;++v){var F="sheet";if(O&&O[v]?(S="xl/"+O[v][1].replace(/[\/]?xl\//,""),si(e,S)||(S=O[v][1]),si(e,S)||(S=_.replace(/_rels\/.*$/,"")+O[v][1]),F=O[v][2]):(S="xl/worksheets/sheet"+(v+1-B)+"."+N,S=S.replace(/sheet0\./,"sheet.")),w=S.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(m.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var D=!1,H=0;H!=t.sheets.length;++H)typeof t.sheets[H]=="number"&&t.sheets[H]==v&&(D=1),typeof t.sheets[H]=="string"&&t.sheets[H].toLowerCase()==m.SheetNames[v].toLowerCase()&&(D=1);if(!D)continue e}}jge(e,S,w,m.SheetNames[v],v,k,o,F,t,f,d,u)}return b={Directory:s,Workbook:f,Props:m,Custprops:g,Deps:y,Sheets:o,SheetNames:m.SheetNames,Strings:Qh,Styles:u,Themes:d,SSF:Mn(Cr)},t&&t.bookFiles&&(e.files?(b.keys=n,b.files=e.files):(b.keys=[],b.files={},e.FullPaths.forEach(function(ne,W){ne=ne.replace(/^Root Entry[\/]/,""),b.keys.push(ne),b.files[ne]=e.FileIndex[W]}))),t&&t.bookVBA&&(s.vba.length>0?b.vbaraw=Ya(e,ri(s.vba[0]),!0):s.defaults&&s.defaults.bin===I0e&&(b.vbaraw=Ya(e,"xl/vbaProject.bin",!0))),b}function kge(e,t){var r=t||{},n="Workbook",s=Vr.find(e,n);try{if(n="/!DataSpaces/Version",s=Vr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(ghe(s.content),n="/!DataSpaces/DataSpaceMap",s=Vr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=yhe(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Vr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=vhe(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Vr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);whe(s.content)}catch{}if(n="/EncryptionInfo",s=Vr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=jhe(s.content);if(n="/EncryptedPackage",s=Vr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function vS(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=qs(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Sge(e,t){return Vr.find(e,"EncryptedPackage")?kge(e,t):QL(e,t)}function _ge(e,t){var r,n=e,s=t||{};return s.type||(s.type=Hr&&Buffer.isBuffer(e)?"buffer":"base64"),r=z$(n,s),Nge(r,s)}function r8(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return g2(e.slice(r),t);default:break e}return J0.to_workbook(e,t)}function Ege(e,t){var r="",n=vS(e,t);switch(t.type){case"base64":r=qs(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Oc(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ba(r)),t.type="binary",r8(r,t)}function Cge(e,t){var r=e;return t.type=="base64"&&(r=qs(r)),r=V0.utils.decode(1200,r.slice(2),"str"),t.type="binary",r8(r,t)}function Age(e){return e.match(/[^\x00-\x7F]/)?Rh(e):e}function bj(e,t,r,n){return n?(r.type="string",J0.to_workbook(e,r)):J0.to_workbook(t,r)}function b2(e,t){E$();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return b2(new Uint8Array(e),(r=Mn(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),zd={},r.dateNF&&(zd.dateNF=r.dateNF),r.type||(r.type=Hr&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Hr?"buffer":"binary",n=gce(e),typeof Uint8Array<"u"&&!Hr&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=Age(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Mn(r),r.type="array",b2(Jk(n),r)}switch((s=vS(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return Sge(Vr.read(n,r),r);break;case 9:if(s[1]<=8)return QL(n,r);break;case 60:return g2(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return ahe(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return the.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?_ge(n,r):bj(e,n,r,i);case 239:return s[3]===60?g2(n,r):bj(e,n,r,i);case 255:if(s[1]===254)return Cge(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Jh.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Jh.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return u6.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return Ihe.to_workbook(n,r);break;case 10:case 13:case 32:return Ege(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Zue.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?u6.to_workbook(n,r):bj(e,n,r,i)}function Tge(e,t,r,n,s,i,o,l){var d=Rn(r),u=l.defval,f=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),m=!0,p=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!o||e[r])for(var g=t.s.c;g<=t.e.c;++g){var b=o?e[r][g]:e[n[g]+d];if(b===void 0||b.t===void 0){if(u===void 0)continue;i[g]!=null&&(p[i[g]]=u);continue}var y=b.v;switch(b.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(i[g]!=null){if(y==null)if(b.t=="e"&&y===null)p[i[g]]=null;else if(u!==void 0)p[i[g]]=u;else if(f&&y===null)p[i[g]]=null;else continue;else p[i[g]]=f&&(b.t!=="n"||b.t==="n"&&l.rawNumbers!==!1)?y:Wo(b,y,l);y!=null&&(m=!1)}}return{row:p,isempty:m}}function w2(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],o=0,l="",d={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},f=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof f){case"string":d=Ba(f);break;case"number":d=Ba(e["!ref"]),d.s.r=f;break;default:d=f}n>0&&(s=0);var m=Rn(d.s.r),p=[],g=[],b=0,y=0,v=Array.isArray(e),k=d.s.r,S=0,w={};v&&!e[k]&&(e[k]=[]);var A=u.skipHidden&&e["!cols"]||[],C=u.skipHidden&&e["!rows"]||[];for(S=d.s.c;S<=d.e.c;++S)if(!(A[S]||{}).hidden)switch(p[S]=mn(S),r=v?e[k][S]:e[p[S]+m],n){case 1:i[S]=S-d.s.c;break;case 2:i[S]=p[S];break;case 3:i[S]=u.header[S-d.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Wo(r,null,u),y=w[o]||0,!y)w[o]=1;else{do l=o+"_"+y++;while(w[l]);w[o]=y,w[l]=1}i[S]=l}for(k=d.s.r+s;k<=d.e.r;++k)if(!(C[k]||{}).hidden){var N=Tge(e,d,k,p,n,i,v,u);(N.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(g[b++]=N.row)}return g.length=b,g}var C6=/"/g;function Dge(e,t,r,n,s,i,o,l){for(var d=!0,u=[],f="",m=Rn(r),p=t.s.c;p<=t.e.c;++p)if(n[p]){var g=l.dense?(e[r]||[])[p]:e[n[p]+m];if(g==null)f="";else if(g.v!=null){d=!1,f=""+(l.rawNumbers&&g.t=="n"?g.v:Wo(g,null,l));for(var b=0,y=0;b!==f.length;++b)if((y=f.charCodeAt(b))===s||y===i||y===34||l.forceQuotes){f='"'+f.replace(C6,'""')+'"';break}f=="ID"&&(f='"ID"')}else g.f!=null&&!g.F?(d=!1,f="="+g.f,f.indexOf(",")>=0&&(f='"'+f.replace(C6,'""')+'"')):f="";u.push(f)}return l.blankrows===!1&&d?null:u.join(o)}function a8(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=Ba(e["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,d=l.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),f="",m=[];n.dense=Array.isArray(e);for(var p=n.skipHidden&&e["!cols"]||[],g=n.skipHidden&&e["!rows"]||[],b=s.s.c;b<=s.e.c;++b)(p[b]||{}).hidden||(m[b]=mn(b));for(var y=0,v=s.s.r;v<=s.e.r;++v)(g[v]||{}).hidden||(f=Dge(e,s,v,m,o,d,i,n),f!=null&&(n.strip&&(f=f.replace(u,"")),(f||n.blankrows!==!1)&&r.push((y++?l:"")+f)));return delete n.dense,r.join("")}function Oge(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=a8(e,t);return r}function Pge(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=Ba(e["!ref"]),i="",o=[],l,d=[],u=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=mn(l);for(var f=s.s.r;f<=s.e.r;++f)for(i=Rn(f),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=u?(e[f]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}d[d.length]=t+"="+n}return d}function n8(e,t,r){var n=r||{},s=+!n.skipHeader,i=e||{},o=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var d=typeof n.origin=="string"?ds(n.origin):n.origin;o=d.r,l=d.c}var u,f={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var m=Ba(i["!ref"]);f.e.c=Math.max(f.e.c,m.e.c),f.e.r=Math.max(f.e.r,m.e.r),o==-1&&(o=m.e.r+1,f.e.r=o+t.length-1+s)}else o==-1&&(o=0,f.e.r=t.length-1+s);var p=n.header||[],g=0;t.forEach(function(y,v){ro(y).forEach(function(k){(g=p.indexOf(k))==-1&&(p[g=p.length]=k);var S=y[k],w="z",A="",C=kr({c:l+g,r:o+v+s});u=tf(i,C),S&&typeof S=="object"&&!(S instanceof Date)?i[C]=S:(typeof S=="number"?w="n":typeof S=="boolean"?w="b":typeof S=="string"?w="s":S instanceof Date?(w="d",n.cellDates||(w="n",S=hs(S)),A=n.dateNF||Cr[14]):S===null&&n.nullError&&(w="e",S=0),u?(u.t=w,u.v=S,delete u.w,delete u.R,A&&(u.z=A)):i[C]=u={t:w,v:S},A&&(u.z=A))})}),f.e.c=Math.max(f.e.c,l+p.length-1);var b=Rn(o);if(s)for(g=0;g<p.length;++g)i[mn(g+l)+b]={t:"s",v:p[g]};return i["!ref"]=Gr(f),i}function Ige(e,t){return n8(null,e,t)}function tf(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=ds(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?tf(e,kr(t)):tf(e,kr({r:t,c:r||0}))}function Mge(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function bS(){return{SheetNames:[],Sheets:{}}}function wS(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(vpe(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Rge(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=Mge(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function Fge(e,t){return e.z=t,e}function s8(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function $ge(e,t,r){return s8(e,"#"+t,r)}function Lge(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function Bge(e,t,r,n){for(var s=typeof t!="string"?t:Ba(t),i=typeof t=="string"?t:Gr(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var d=tf(e,o,l);d.t="n",d.F=i,delete d.v,o==s.s.r&&l==s.s.c&&(d.f=r,n&&(d.D=!0))}return e}var Uge={encode_col:mn,encode_row:Rn,encode_cell:kr,encode_range:Gr,decode_col:iS,decode_row:sS,split_cell:Qce,decode_cell:ds,decode_range:Fu,format_cell:Wo,sheet_add_aoa:cL,sheet_add_json:n8,sheet_add_dom:ZL,aoa_to_sheet:$u,json_to_sheet:Ige,table_to_sheet:e8,table_to_book:age,sheet_to_csv:a8,sheet_to_txt:Oge,sheet_to_json:w2,sheet_to_html:rge,sheet_to_formulae:Pge,sheet_to_row_object_array:w2,sheet_get_cell:tf,book_new:bS,book_append_sheet:wS,book_set_sheet_visibility:Rge,cell_set_number_format:Fge,cell_set_hyperlink:s8,cell_set_internal_link:$ge,cell_add_comment:Lge,sheet_set_array_formula:Bge,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Hge={"Chicken Momos":6,"Chicken Cheese Momos":6,"Veg Momos":6,"Paneer Momos":6,"Corn Cheese Momos":6,"Chicken Kurkure Momos":6,"Veg Kurkure Momos":6};function qge({context:e,selectedStoreId:t}){const[r,n]=P.useState([]),[s,i]=P.useState(!0),[o,l]=P.useState(!1),[d,u]=P.useState(new Date().toISOString().split("T")[0]),[f,m]=P.useState("today"),[p,g]=P.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),[b,y]=P.useState(new Date().getDay()),[v,k]=P.useState(!1),[S,w]=P.useState(Hge),[A,C]=P.useState(new Set),N=t||e.user?.storeId||null,E=R=>{C(X=>{const L=new Set(X);return L.has(R)?L.delete(R):L.add(R),L})};P.useEffect(()=>{const R=localStorage.getItem("momoPlateConfig");if(R)try{w(JSON.parse(R))}catch(X){console.error("Failed to load plate config:",X)}},[]);const _=(R,X)=>{const L={...S,[R]:X};w(L),localStorage.setItem("momoPlateConfig",JSON.stringify(L))};P.useEffect(()=>{O()},[N]);const O=async()=>{try{i(!0);let X=(await Mg(e.user?.accessToken||"")).data||[];X=X.filter(L=>!!L&&!!L.storeId),N&&(X=X.filter(L=>L.storeId===N)),X.sort((L,I)=>new Date(I.date).getTime()-new Date(L.date).getTime()),n(X)}catch(R){console.error("Error loading sales data:",R),Qt.error("Failed to load sales data")}finally{i(!1)}},B=R=>new Promise((X,L)=>{const I=new FileReader;I.onload=G=>{try{const V=G.target?.result,Z=b2(V,{type:"binary"}),ve=Z.SheetNames[0],Ee=Z.Sheets[ve],Te=Uge.sheet_to_json(Ee),ue=F(Te);X(ue)}catch(V){L(V)}},I.onerror=()=>L(new Error("Failed to read file")),I.readAsBinaryString(R)}),F=R=>{const X={"Chicken Momos":0,"Chicken Cheese Momos":0,"Veg Momos":0,"Paneer Momos":0,"Corn Cheese Momos":0,"Chicken Kurkure Momos":0,"Veg Kurkure Momos":0};return R.forEach(L=>{const I=String(L.Item||""),G=Number(L["Total Quantity"]||L["Total Qua"]||0);if(!G||G===0||!I)return;const V=I.toLowerCase();if(V.includes("mania")&&V.includes("combo"))return;if(V.includes("platter")){V.includes("non veg")?(X["Chicken Momos"]+=6*G,X["Chicken Cheese Momos"]+=6*G):V.includes("veg")&&(X["Paneer Momos"]+=4*G,X["Veg Momos"]+=4*G,X["Corn Cheese Momos"]+=4*G);return}let Z=6;if(V.includes("burger")){let ue=1;const ge=I.match(/(\d+)\s*(?:pcs|pieces|piece)/i);ge&&(ue=parseInt(ge[1])),Z=ue*2}else{const Te=I.match(/(\d+)\s*(?:pcs|pieces|piece)/i);if(Te){let ue=parseInt(Te[1]);const ge=I.match(/pack of\s*(\d+)/i);ge&&(ue*=parseInt(ge[1])),Z=ue}}const ve=G*Z;if(["drink","cola","campa","water","beverage","soup"].some(Te=>V.includes(Te)))return;let Ee="Other";V.includes("kurkure")?V.includes("chicken")?Ee="Chicken Kurkure Momos":V.includes("veg")&&(Ee="Veg Kurkure Momos"):V.includes("paneer")?Ee="Paneer Momos":V.includes("corn")&&V.includes("cheese")?Ee="Corn Cheese Momos":V.includes("chicken")&&V.includes("cheese")?Ee="Chicken Cheese Momos":V.includes("chicken")?Ee="Chicken Momos":V.includes("veg")&&(Ee="Veg Momos"),Ee in X&&(X[Ee]+=ve)}),X},D=async R=>{const X=R.target.files?.[0];if(!X)return;if(!X.name.endsWith(".xlsx")&&!X.name.endsWith(".xls")&&!X.name.endsWith(".csv")){Qt.error("Please upload an Excel (.xlsx, .xls) or CSV file");return}let L="",I="";const G=/_(\d{2})_(\d{2})_(\d{4})-\d{2}_\d{2}_\d{4}\./;let V=X.name.match(G);if(V){const[,ve,Ee,Te]=V;L=`${Te}-${Ee}-${ve}`,I="range format"}else{const ve=/_(\d{2})_(\d{2})_(\d{4})\./;if(V=X.name.match(ve),V){const[,Ee,Te,ue]=V;L=`${ue}-${Te}-${Ee}`,I="single date format"}else{const Ee=/(\d{4})-(\d{2})-(\d{2})/;V=X.name.match(Ee),V&&(L=V[0],I="ISO date format")}}const Z=L||d;if(L?(console.log(` Extracted date from filename (${I}): ${X.name} -> ${L}`),u(L),Qt.success(` Using date from filename: ${L}`,{duration:2e3})):(console.log(` Using manually selected date: ${d}`),Qt.info(` Using manually selected date: ${d}`,{duration:2e3})),!Z){Qt.error("Please select a date before uploading");return}if(!N){Qt.error("Store ID not found");return}try{l(!0),Qt.info("Processing file...",{duration:2e3});const ve=await B(X);Qt.info("Uploading to server...",{duration:2e3});const Ee=e.stores?.find(ue=>ue.id===N)?.name||"Unknown Store",Te={id:`SALES-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,date:Z,storeId:N,storeName:Ee,data:ve,uploadedBy:e.user?.name||"Unknown",uploadedAt:new Date().toISOString()};await x5(Te,e.user?.accessToken||""),Qt.success(` Sales data uploaded for ${Z}!`),await O(),R.target.value=""}catch(ve){console.error("Error uploading file:",ve),Qt.error(`Failed to process file: ${ve instanceof Error?ve.message:"Unknown error"}`)}finally{l(!1)}},H=async R=>{if(window.confirm("Are you sure you want to delete this sales record?"))try{await y5(R,e.user?.accessToken||""),Qt.success("Sales record deleted"),await O()}catch(X){console.error("Error deleting record:",X),Qt.error("Failed to delete record")}},ne=R=>Object.values(R).reduce((X,L)=>X+L,0),W=R=>{const X=["#ef4444","#f97316","#22c55e","#3b82f6","#eab308","#8b5cf6","#06b6d4"];return X[R%X.length]},ee=R=>({today:"Today",yesterday:"Yesterday",thisWeek:"This Week",previousWeek:"Previous Week",thisMonth:"This Month",previousMonth:"Previous Month",thisYear:"This Year",lastYear:"Last Year",custom:"Custom"})[R],re=(R,X)=>{const L=new Date;L.setHours(0,0,0,0);let I,G;switch(R){case"today":I=new Date(L),G=new Date(L);break;case"yesterday":I=new Date(L),I.setDate(L.getDate()-1),G=new Date(I);break;case"thisWeek":I=new Date(L),I.setDate(L.getDate()-L.getDay()),G=new Date(L);break;case"previousWeek":I=new Date(L),I.setDate(L.getDate()-L.getDay()-7),G=new Date(I),G.setDate(I.getDate()+6);break;case"thisMonth":I=new Date(L.getFullYear(),L.getMonth(),1),G=new Date(L);break;case"previousMonth":I=new Date(L.getFullYear(),L.getMonth()-1,1),G=new Date(L.getFullYear(),L.getMonth(),0);break;case"thisYear":I=new Date(L.getFullYear(),0,1),G=new Date(L);break;case"lastYear":I=new Date(L.getFullYear()-1,0,1),G=new Date(L.getFullYear()-1,11,31);break;case"custom":return{start:X?.from||L.toISOString().split("T")[0],end:X?.to||L.toISOString().split("T")[0]};default:I=new Date(L),G=new Date(L)}return{start:I.toISOString().split("T")[0],end:G.toISOString().split("T")[0]}},Q=(R,X)=>{const L=new Date;L.setHours(0,0,0,0);let I,G;switch(R){case"today":I=new Date(L),I.setDate(L.getDate()-1),G=new Date(I);break;case"yesterday":I=new Date(L),I.setDate(L.getDate()-2),G=new Date(I);break;case"thisWeek":const V=new Date(L);V.setDate(L.getDate()-L.getDay());const Z=L.getDay();I=new Date(V),I.setDate(V.getDate()-7),G=new Date(I),G.setDate(I.getDate()+Z);break;case"previousWeek":I=new Date(L),I.setDate(L.getDate()-L.getDay()-14),G=new Date(I),G.setDate(I.getDate()+6);break;case"thisMonth":new Date(L.getFullYear(),L.getMonth(),1);const ve=L.getDate();I=new Date(L.getFullYear(),L.getMonth()-1,1),G=new Date(L.getFullYear(),L.getMonth()-1,ve);break;case"previousMonth":I=new Date(L.getFullYear(),L.getMonth()-2,1),G=new Date(L.getFullYear(),L.getMonth()-1,0);break;case"thisYear":const Ee=new Date(L.getFullYear(),0,1),Te=Math.floor((L.getTime()-Ee.getTime())/(1e3*60*60*24));I=new Date(L.getFullYear()-1,0,1),G=new Date(I),G.setDate(I.getDate()+Te);break;case"lastYear":I=new Date(L.getFullYear()-2,0,1),G=new Date(L.getFullYear()-2,11,31);break;case"custom":if(X){const ue=new Date(X.from),ge=new Date(X.to),Fe=Math.ceil((ge.getTime()-ue.getTime())/(1e3*60*60*24)),J=new Date(ue);J.setDate(ue.getDate()-Fe-1);const Ze=new Date(ue);return Ze.setDate(ue.getDate()-1),{start:J.toISOString().split("T")[0],end:Ze.toISOString().split("T")[0]}}return{start:"",end:""};default:I=new Date(L),I.setDate(L.getDate()-1),G=new Date(I)}return{start:I.toISOString().split("T")[0],end:G.toISOString().split("T")[0]}};return s?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading sales data..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl shadow-lg p-6 border border-purple-100",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[a.jsx(Qm,{className:"w-7 h-7 text-purple-600"}),"Daily Sales Data"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Upload daily sales XLSX files to track momo sales by category"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(Ns,{value:d,onChange:u,max:new Date().toISOString().split("T")[0]}),a.jsxs("button",{onClick:()=>k(!v),className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105",children:[a.jsx(Gi,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Plate Config"})]}),a.jsxs("label",{className:`px-6 py-2.5 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 cursor-pointer flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105 ${o?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx(cc,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:o?"Uploading...":"Upload XLSX"}),a.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:D,disabled:o,className:"hidden"})]})]})]}),a.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-xl p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-900",children:[a.jsx("p",{className:"font-medium mb-1",children:"File Format Requirements:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-800",children:[a.jsxs("li",{children:["Must contain columns: ",a.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Item"})," and ",a.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Total Quantity"})]}),a.jsx("li",{children:'Item names should include momo type (e.g., "Chicken Pan-Fried Momos (8 pcs)")'}),a.jsx("li",{children:"Quantity should be the number of plates/items sold"})]})]})]})})]}),v&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Plate Configuration"}),a.jsx("p",{className:"text-sm text-blue-100",children:"Set how many pieces are in each plate for each momo type"})]}),a.jsx("button",{onClick:()=>k(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(Ar,{className:"w-6 h-6"})})]})}),a.jsx("div",{className:"p-6 space-y-4",children:Object.keys(S).map((R,X)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl border-2 border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:W(X)}}),a.jsx("label",{className:"text-gray-900 font-medium",children:R})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",min:"1",max:"20",value:S[R],onChange:L=>_(R,parseInt(L.target.value)||6),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-center font-semibold"}),a.jsx("span",{className:"text-gray-600 text-sm",children:"pieces/plate"})]})]},R))}),a.jsx("div",{className:"p-6 bg-blue-50 border-t-2 border-blue-200",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(lr,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-900",children:[a.jsx("p",{className:"font-medium mb-1",children:"How it works:"}),a.jsxs("p",{children:["This configuration determines how pieces are converted to plates in the display. For example, if Chicken Momos has 6 pieces/plate and you sold 262 pieces, it will show as ",a.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded",children:"262 pcs / 44 plates"}),"."]})]})]})}),a.jsx("div",{className:"p-4 bg-gray-50 rounded-b-2xl flex justify-end",children:a.jsx("button",{onClick:()=>k(!1),className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg",children:"Done"})})]})}),r.length>0&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[a.jsx(C2,{className:"w-7 h-7 text-teal-600"}),"Sales Trends by Category"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Analyze momo sales patterns across different time periods"})]}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:["today","yesterday","thisWeek","previousWeek","thisMonth","previousMonth","thisYear","lastYear","custom"].map(R=>a.jsx("button",{onClick:()=>m(R),className:`px-4 py-2 rounded-xl text-sm transition-all duration-300 transform hover:scale-105 ${f===R?"bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:ee(R)},R))})]}),f==="custom"&&a.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-xl p-4",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(Ns,{label:"From Date",value:p.from,onChange:R=>g({...p,from:R})}),a.jsx(Ns,{label:"To Date",value:p.to,onChange:R=>g({...p,to:R})})]})}),(()=>{const R=["Chicken Momos","Chicken Cheese Momos","Veg Momos","Paneer Momos","Corn Cheese Momos","Chicken Kurkure Momos","Veg Kurkure Momos"],X=re(f,p),L=Q(f,p),I={};R.forEach(V=>I[V]=0),r.forEach(V=>{V.date>=X.start&&V.date<=X.end&&Object.entries(V.data).forEach(([Z,ve])=>{Z in I&&(I[Z]+=ve)})});const G={};return R.forEach(V=>G[V]=0),r.forEach(V=>{V.date>=L.start&&V.date<=L.end&&Object.entries(V.data).forEach(([Z,ve])=>{Z in G&&(G[Z]+=ve)})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:R.map((V,Z)=>{const ve=I[V]||0,Ee=G[V]||0;let Te=0;Ee>0?Te=(ve-Ee)/Ee*100:ve>0&&(Te=100);const ue=Te>0,ge=Te<0,Fe=W(Z);return a.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-xl p-5 border-2 border-gray-200 hover:shadow-lg transition-all duration-300 hover:scale-102",style:{borderLeftColor:Fe,borderLeftWidth:"4px"},children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:V}),a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Fe}})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-1",children:ve.toLocaleString()}),a.jsx("p",{className:"text-xs text-gray-500",children:"pieces sold"})]}),Ee>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${ue?"bg-green-100":ge?"bg-red-100":"bg-gray-100"}`,children:[ue&&a.jsx(_i,{className:"w-3 h-3 text-green-600"}),ge&&a.jsx(Si,{className:"w-3 h-3 text-red-600"}),a.jsxs("span",{className:`text-xs font-semibold ${ue?"text-green-700":ge?"text-red-700":"text-gray-700"}`,children:[Math.abs(Te).toFixed(1),"%"]})]}),a.jsx("span",{className:"text-xs text-gray-500",children:"vs previous"})]}),Ee===0&&ve>0&&a.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"New sales in this period"}),Ee===0&&ve===0&&a.jsx("div",{className:"text-xs text-gray-400",children:"No data for both periods"})]},V)})})})(),a.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{const R={"Chicken Momos":0,"Chicken Cheese Momos":0,"Veg Momos":0,"Paneer Momos":0,"Corn Cheese Momos":0,"Chicken Kurkure Momos":0,"Veg Kurkure Momos":0};let X=[...r];if(f==="custom")X=X.filter(G=>G.date>=p.from&&G.date<=p.to);else{const G=new Date,V=new Date;f==="today"?V.setDate(G.getDate()):f==="yesterday"?V.setDate(G.getDate()-1):f==="thisWeek"?V.setDate(G.getDate()-G.getDay()):f==="previousWeek"?V.setDate(G.getDate()-G.getDay()-7):f==="thisMonth"?(V.setMonth(G.getMonth()),V.setDate(1)):f==="previousMonth"?(V.setMonth(G.getMonth()-1),V.setDate(1)):f==="thisYear"?(V.setFullYear(G.getFullYear()),V.setMonth(0),V.setDate(1)):f==="lastYear"&&(V.setFullYear(G.getFullYear()-1),V.setMonth(0),V.setDate(1)),X=X.filter(Z=>new Date(Z.date)>=V)}X.forEach(G=>{Object.entries(G.data).forEach(([V,Z])=>{R[V]+=Z})});const L=Object.values(R).reduce((G,V)=>G+V,0),I=Object.entries(R).sort((G,V)=>V[1]-G[1])[0];return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-xl p-4 border-2 border-teal-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Sales"}),a.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:L.toLocaleString()}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"pieces"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border-2 border-purple-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Top Category"}),a.jsx("p",{className:"text-lg text-gray-900",style:{fontWeight:"600"},children:I?.[0]?.split(" ")[0]||"N/A"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[I?.[1]?.toLocaleString()||0," pcs"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-4 border-2 border-pink-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg per Period"}),a.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:X.length>0?Math.round(L/X.length).toLocaleString():0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"pieces"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border-2 border-blue-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Data Points"}),a.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:X.length}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"records"})]})]})})()})]}),r.length>0&&(()=>{const R={0:{dayName:"Sunday",counts:{}},1:{dayName:"Monday",counts:{}},2:{dayName:"Tuesday",counts:{}},3:{dayName:"Wednesday",counts:{}},4:{dayName:"Thursday",counts:{}},5:{dayName:"Friday",counts:{}},6:{dayName:"Saturday",counts:{}}},X=["Chicken Momos","Chicken Cheese Momos","Veg Momos","Paneer Momos","Corn Cheese Momos","Chicken Kurkure Momos","Veg Kurkure Momos"];Object.keys(R).forEach(V=>{X.forEach(Z=>{R[V].counts[Z]=[]})}),r.forEach(V=>{const ve=new Date(V.date).getDay().toString();Object.entries(V.data).forEach(([Ee,Te])=>{R[ve].counts[Ee]&&R[ve].counts[Ee].push(Te)})});const L=Object.entries(R).map(([V,Z])=>{const ve={day:Z.dayName,dayNum:parseInt(V)};return X.forEach(Ee=>{const Te=Z.counts[Ee],ue=Te.length>0?Math.round(Te.reduce((ge,Fe)=>ge+Fe,0)/Te.length):0;ve[Ee]=ue}),ve}),I=L.find(V=>V.dayNum===b);I&&X.map((V,Z)=>({category:V,average:I[V],fill:W(Z)}));const G=[{num:0,name:"Sun",fullName:"Sunday"},{num:1,name:"Mon",fullName:"Monday"},{num:2,name:"Tue",fullName:"Tuesday"},{num:3,name:"Wed",fullName:"Wednesday"},{num:4,name:"Thu",fullName:"Thursday"},{num:5,name:"Fri",fullName:"Friday"},{num:6,name:"Sat",fullName:"Saturday"}];return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[a.jsx(fa,{className:"w-7 h-7 text-indigo-600"}),"Weekly Pattern Analysis"]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Average momo sales by day of the week across all records"}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:G.map(V=>a.jsx("button",{onClick:()=>y(V.num),className:`px-4 py-2 rounded-xl text-sm transition-all duration-300 transform hover:scale-105 ${b===V.num?"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:V.name},V.num))})]}),(()=>{const V={};X.forEach(ve=>{let Ee=0,Te="";L.forEach(ue=>{ue[ve]>Ee&&(Ee=ue[ve],Te=ue.day)}),V[ve]={day:Te,avg:Ee}});const Z=L.find(ve=>ve.dayNum===b);return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:X.map((ve,Ee)=>{const Te=Z?.[ve]||0,ue=V[ve];let ge=0;const Fe=Z?.day===ue.day;ue.avg>0&&Te>0&&(ge=(Te-ue.avg)/ue.avg*100);const J=W(Ee);return a.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-xl p-5 border-2 border-gray-200 hover:shadow-lg transition-all duration-300 hover:scale-102",style:{borderLeftColor:J,borderLeftWidth:"4px"},children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:ve}),a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:J}})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-1",children:Math.round(Te).toLocaleString()}),a.jsx("p",{className:"text-xs text-gray-500",children:"avg pieces/day"})]}),Fe?a.jsx("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg bg-yellow-100",children:a.jsx("span",{className:"text-xs font-semibold text-yellow-700",children:" Best day"})}):Te>0&&ue.avg>0?a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${ge>=0?"bg-green-100":"bg-red-100"}`,children:[ge>=0?a.jsx(_i,{className:"w-3 h-3 text-green-600"}):a.jsx(Si,{className:"w-3 h-3 text-red-600"}),a.jsxs("span",{className:`text-xs font-semibold ${ge>=0?"text-green-700":"text-red-700"}`,children:[Math.abs(ge).toFixed(1),"%"]})]}),a.jsxs("span",{className:"text-xs text-gray-500",children:["vs ",ue.day.slice(0,3)]})]}),a.jsxs("p",{className:"text-xs text-gray-400",children:["Best: ",Math.round(ue.avg)," on ",ue.day]})]}):a.jsx("div",{className:"text-xs text-gray-400",children:"No sales data"})]},ve)})})})(),a.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(()=>{X.forEach(ge=>{let Fe=0;L.forEach(J=>{J[ge]>Fe&&(Fe=J[ge],J.day)})});const V=L.reduce((ge,Fe)=>{const J=X.reduce((rt,Tt)=>rt+(ge[Tt]||0),0);return X.reduce((rt,Tt)=>rt+(Fe[Tt]||0),0)>J?Fe:ge}),Z=X.reduce((ge,Fe)=>ge+(V[Fe]||0),0),ve=L.reduce((ge,Fe)=>{const J=X.reduce((rt,Tt)=>rt+(ge[Tt]||0),0);return X.reduce((rt,Tt)=>rt+(Fe[Tt]||0),0)<J?Fe:ge}),Ee=X.reduce((ge,Fe)=>ge+(ve[Fe]||0),0),Te=L.find(ge=>ge.dayNum===b),ue=Te?Object.entries(Te).filter(([ge])=>X.includes(ge)).sort((ge,Fe)=>Fe[1]-ge[1])[0]:null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border-2 border-green-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" Busiest Day"}),a.jsx("p",{className:"text-xl text-gray-900",style:{fontWeight:"700"},children:V.day}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Z.toLocaleString()," pcs avg"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 border-2 border-orange-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" Quietest Day"}),a.jsx("p",{className:"text-xl text-gray-900",style:{fontWeight:"700"},children:ve.day}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Ee.toLocaleString()," pcs avg"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border-2 border-purple-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" Top Seller Today"}),a.jsx("p",{className:"text-base text-gray-900",style:{fontWeight:"600"},children:ue?.[0]||"N/A"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ue?`${ue[1].toLocaleString()} pcs avg`:"No data"})]})]})})()})]})})(),r.length===0?a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center border border-gray-100",children:[a.jsx(Qm,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Sales Data Yet"}),a.jsx("p",{className:"text-gray-600",children:"Upload your first sales file to get started"})]}):a.jsx("div",{className:"space-y-4",children:r.map((R,X)=>{const L=ne(R.data),I=new Date(R.date),G=A.has(R.id),V=R.storeName&&R.storeName!=="Unknown Store"?R.storeName:e.stores?.find(Z=>Z.id===R.storeId)?.name||R.storeName||"Unknown Store";return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-4 text-white cursor-pointer",onClick:()=>E(R.id),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ur,{className:"w-5 h-5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:I.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsxs("p",{className:"text-sm text-purple-100",children:[V,"  Total: ",L.toLocaleString()," pieces"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:Z=>{Z.stopPropagation(),H(R.id)},className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Delete record",children:a.jsx(ws,{className:"w-5 h-5"})}),a.jsx("button",{className:"p-2 hover:bg-white/20 rounded-lg transition-all duration-300",title:G?"Expand":"Collapse",children:a.jsx("svg",{className:`w-5 h-5 transform transition-transform duration-300 ${G?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})}),!G&&a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(R.data).map(([Z,ve],Ee)=>{const Te=ve||0,ue=L>0?(Te/L*100).toFixed(1):"0",ge=W(Ee),Fe=S[Z]||6,J=Math.floor(Te/Fe);return a.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border-2 border-gray-200 hover:shadow-md transition-all duration-300 hover:scale-105",style:{borderLeftColor:ge,borderLeftWidth:"4px"},children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx(Zt,{className:"w-5 h-5 text-gray-400"}),a.jsxs("span",{className:"text-xs font-semibold text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[ue,"%"]})]}),a.jsx("h4",{className:"text-sm text-gray-600 mb-1",children:Z}),a.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:Te.toLocaleString()}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"pieces"}),a.jsx("span",{className:"text-xs text-gray-400",children:""}),a.jsxs("p",{className:"text-xs text-gray-600 font-semibold",children:[J," plates"]})]})]},Z)})}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:[a.jsxs("span",{children:["Uploaded by ",R.uploadedBy]}),a.jsx("span",{children:new Date(R.uploadedAt).toLocaleString()})]})]})]},R.id)})})]})}function A6({context:e,selectedStoreId:t,onOpenRecalibration:r,locationType:n}){const s=e.user?.role==="cluster_head",i=e.user?.role==="manager",o=e.user?.designation==="production_incharge",l=e.user?.designation==="store_incharge",d=(s||i)&&!o&&!l,u=d?"pending":"history",[f,m]=P.useState(u),[p,g]=P.useState([]),[b,y]=P.useState([]),[v,k]=P.useState(null),[S,w]=P.useState(!1),[A,C]=P.useState(new Date().toISOString().substring(0,7)),[N,E]=P.useState(null),[_,O]=P.useState(!1),B=s&&!t||s&&n==="production_house"?"all-cluster-locations":t||e.user?.storeId;console.log(" RecalibrationReports - ID Debug:"),console.log("  - selectedStoreId (prop):",t),console.log("  - context.user?.storeId:",e.user?.storeId),console.log("  - effectiveStoreId (computed):",B),console.log("  - locationType:",n),console.log("  - isClusterHead:",s),console.log("  - Production Houses:",e.productionHouses?.map(Q=>({id:Q.id,name:Q.name}))),P.useEffect(()=>{f==="pending"&&d?F():f==="history"?D():f==="wastage"&&H()},[f,A,B,s,i,o,l]);async function F(){try{w(!0);const Q=await O5(e.user?.accessToken||"");g(Q.recalibrations||[])}catch(Q){console.error("Error fetching pending recalibrations:",Q),Qt.error("Failed to fetch pending recalibrations")}finally{w(!1)}}async function D(){if(B)try{w(!0),console.log(" Fetching recalibration history:"),console.log("  - effectiveStoreId:",B),console.log("  - selectedStoreId:",t),console.log("  - locationType:",n),console.log("  - isClusterHead:",s),console.log("  - user.storeId:",e.user?.storeId);const Q=await sp(e.user?.accessToken||"",B,n);console.log(" History response:",Q),console.log(" History records found:",Q?.history?.length||0),Q?.history?.length>0&&console.log(" Sample record locationIds:",Q.history.slice(0,3).map(R=>R.locationId)),y(Q.history||[])}catch(Q){console.error("Error fetching recalibration history:",Q),Qt.error("Failed to fetch recalibration history")}finally{w(!1)}}async function H(){try{w(!0),console.log(" Fetching wastage report:"),console.log("  - month:",A),console.log("  - effectiveStoreId:",B),console.log("  - selectedStoreId:",t),console.log("  - locationType:",n),console.log("  - isClusterHead:",s);const Q=await H5(e.user?.accessToken||"",A,B,n);console.log(" Wastage response:",Q),console.log(" Wastage items found:",Q?.items?.length||0),Q?.items?.length>0&&console.log(" Sample item locationIds:",Q.items.slice(0,3).map(R=>R.locationId)),k(Q)}catch(Q){console.error("Error fetching wastage report:",Q),Qt.error("Failed to fetch wastage report")}finally{w(!1)}}async function ne(Q){try{await P5(e.user?.accessToken||"",Q),Qt.success("Recalibration approved successfully"),F()}catch(R){console.error("Error approving recalibration:",R),Qt.error("Failed to approve recalibration")}}async function W(Q){const R=prompt("Please enter reason for rejection:");if(R)try{await I5(e.user?.accessToken||"",Q,R),Qt.success("Recalibration rejected"),F()}catch(X){console.error("Error rejecting recalibration:",X),Qt.error("Failed to reject recalibration")}}function ee(Q){E(Q),O(!0)}const re=Q=>new Date(Q).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white flex-1",children:[a.jsx("h2",{className:"text-2xl mb-2",children:"Stock Recalibration Reports"}),a.jsxs("p",{className:"text-purple-100",children:[f==="pending"&&"Review and approve monthly stock recalibrations",f==="history"&&"View historical recalibration records",f==="wastage"&&"Analyze monthly wastage and counting errors"]})]}),r&&f==="history"&&n!=="production_house"&&a.jsxs("button",{onClick:r,className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-xl hover:from-emerald-700 hover:to-green-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(Ur,{className:"w-5 h-5"}),"New Recalibration"]})]}),a.jsxs("div",{className:"flex gap-2 bg-white rounded-lg p-2 shadow-sm",children:[d&&a.jsx("button",{onClick:()=>m("pending"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${f==="pending"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pending Approval"}),a.jsx("button",{onClick:()=>m("history"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${f==="history"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"History"}),a.jsx("button",{onClick:()=>m("wastage"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${f==="wastage"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Wastage Report"})]}),f==="wastage"&&a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Month"}),a.jsx("input",{type:"month",value:A,onChange:Q=>C(Q.target.value),className:"px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"})]}),S?a.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[a.jsx(_o,{className:"w-12 h-12 text-purple-600 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]}):a.jsxs(a.Fragment,{children:[f==="pending"&&a.jsx("div",{className:"space-y-4",children:p.length===0?a.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[a.jsx(lr,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No pending recalibrations"})]}):p.map(Q=>a.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border-2 border-gray-200 hover:border-purple-300 transition-all",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-1",children:Q.locationName}),a.jsxs("p",{className:"text-sm text-gray-500",children:[re(Q.date),"  ",Q.locationType==="production_house"?"Production House":"Store"]})]}),a.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:"Pending Approval"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Wastage Items"}),a.jsx("p",{className:"text-xl text-red-700",children:Q.items?.filter(R=>R.adjustmentType==="wastage").length||0})]}),a.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-orange-600 mb-1",children:"Counting Errors"}),a.jsx("p",{className:"text-xl text-orange-700",children:Q.items?.filter(R=>R.adjustmentType==="counting_error").length||0})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Total Items"}),a.jsx("p",{className:"text-xl text-blue-700",children:Q.items?.length||0})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>ee(Q),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx(No,{className:"w-4 h-4"}),"View Details"]}),a.jsxs("button",{onClick:()=>ne(Q.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(lr,{className:"w-4 h-4"}),"Approve"]}),a.jsxs("button",{onClick:()=>W(Q.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[a.jsx(en,{className:"w-4 h-4"}),"Reject"]})]})]},Q.id))}),f==="history"&&a.jsx("div",{className:"space-y-4",children:b.length===0?a.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[a.jsx(Ur,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No recalibration history found"})]}):b.map(Q=>a.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border-2 border-gray-200",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-1",children:Q.locationName}),a.jsx("p",{className:"text-sm text-gray-500",children:re(Q.date)})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${Q.status==="approved"?"bg-green-100 text-green-700":Q.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:Q.status?.charAt(0).toUpperCase()+Q.status?.slice(1)||"Pending"})]}),a.jsxs("button",{onClick:()=>ee(Q),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:[a.jsx(No,{className:"w-4 h-4"}),"View Details"]})]},Q.id))}),f==="wastage"&&a.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:!v||v.items?.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Nc,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No wastage data for selected month"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-lg p-4 text-white",children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Wastage"}),a.jsx("p",{className:"text-2xl",children:v.summary?.totalWastage||0}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"items"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-4 text-white",children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Counting Errors"}),a.jsx("p",{className:"text-2xl",children:v.summary?.totalCountingErrors||0}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"items"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-4 text-white",children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Recalibrations"}),a.jsx("p",{className:"text-2xl",children:v.summary?.totalRecalibrations||0}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"this month"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-4 text-white",children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Locations"}),a.jsx("p",{className:"text-2xl",children:v.summary?.uniqueLocations||0}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"stores/houses"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Wastage & Error Details"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-100",children:[a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Item Name"}),a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Location"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"System Qty"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Actual Qty"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Difference"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Type"}),a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Notes"})]})}),a.jsx("tbody",{children:v.items?.map((Q,R)=>a.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[a.jsx("td",{className:"p-3 text-sm text-gray-900",children:Q.itemName}),a.jsx("td",{className:"p-3 text-sm text-gray-600",children:Q.locationName}),a.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[Q.systemQuantity," ",Q.unit]}),a.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[Q.actualQuantity," ",Q.unit]}),a.jsxs("td",{className:`p-3 text-sm text-center ${Q.difference<0?"text-red-600":"text-green-600"}`,children:[Q.difference>0?"+":"",Q.difference]}),a.jsx("td",{className:"p-3 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Q.adjustmentType==="wastage"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:Q.adjustmentType==="wastage"?"Wastage":"Counting Error"})}),a.jsx("td",{className:"p-3 text-sm text-gray-600",children:Q.notes||"-"})]},R))})]})})]})]})})]}),_&&N&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 text-white",children:[a.jsx("h3",{className:"text-xl mb-1",children:N.locationName}),a.jsxs("p",{className:"text-purple-100 text-sm",children:[re(N.date),"  ",N.locationType==="production_house"?"Production House":"Store"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-100",children:[a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Item"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"System Qty"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Actual Qty"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Difference"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Type"}),a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Notes"})]})}),a.jsx("tbody",{children:N.items?.map((Q,R)=>a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsxs("td",{className:"p-3 text-sm text-gray-900",children:[Q.itemName,a.jsx("span",{className:"text-xs text-gray-500 block",children:Q.category})]}),a.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[Q.systemQuantity," ",Q.unit]}),a.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[Q.actualQuantity," ",Q.unit]}),a.jsxs("td",{className:`p-3 text-sm text-center ${Q.difference<0?"text-red-600":Q.difference>0?"text-green-600":"text-gray-600"}`,children:[Q.difference>0?"+":"",Q.difference]}),a.jsx("td",{className:"p-3 text-center",children:Q.adjustmentType?a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Q.adjustmentType==="wastage"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:Q.adjustmentType==="wastage"?"Wastage":"Counting Error"}):a.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),a.jsx("td",{className:"p-3 text-sm text-gray-600",children:Q.notes||"-"})]},R))})]})})}),a.jsx("div",{className:"p-6 border-t border-gray-200",children:a.jsx("button",{onClick:()=>O(!1),className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})})]})}const Wge=localStorage.getItem("DEBUG_MODE")==="true",zi=Wge,Ts={info:"",debug:"",warn:"",error:"",success:"",api:"",db:"",user:"",store:"",production:"",inventory:"",sales:"",analytics:""};class zge{info(t,...r){console.log(`${Ts.info} ${t}`,...r)}success(t,...r){console.log(`${Ts.success} ${t}`,...r)}warn(t,...r){console.warn(`${Ts.warn} ${t}`,...r)}error(t,r,...n){console.error(`${Ts.error} ${t}`,r,...n)}debug(t,...r){zi&&console.log(`${Ts.debug} ${t}`,...r)}debugUser(t,...r){zi&&console.log(`${Ts.user} ${t}`,...r)}debugStore(t,...r){zi&&console.log(`${Ts.store} ${t}`,...r)}debugProduction(t,...r){zi&&console.log(`${Ts.production} ${t}`,...r)}debugInventory(t,...r){zi&&console.log(`${Ts.inventory} ${t}`,...r)}debugSales(t,...r){zi&&console.log(`${Ts.sales} ${t}`,...r)}debugAnalytics(t,...r){zi&&console.log(`${Ts.analytics} ${t}`,...r)}debugApi(t,...r){zi&&console.log(`${Ts.api} ${t}`,...r)}debugDb(t,...r){zi&&console.log(`${Ts.db} ${t}`,...r)}enableDebug(){localStorage.setItem("DEBUG_MODE","true"),console.log(" Debug mode enabled. Refresh the page to see debug logs.")}disableDebug(){localStorage.removeItem("DEBUG_MODE"),console.log(" Debug mode disabled. Refresh the page.")}isDebugEnabled(){return zi}}const ia=new zge;typeof window<"u"&&(window.logger=ia);function Kge(e,t){if(e.length===0)return"";const r=Object.keys(e[0]),n=r.join(","),s=e.map(i=>r.map(o=>{let l=i[o];return typeof l=="object"&&l!==null&&(l=JSON.stringify(l)),typeof l=="string"&&(l=l.replace(/"/g,'""'),(l.includes(",")||l.includes(`
`)||l.includes('"'))&&(l=`"${l}"`)),l??""}).join(","));return[n,...s].join(`
`)}function wx(e,t,r){const n=Kge(t),s=new Blob([n],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),o=URL.createObjectURL(s);i.setAttribute("href",o),i.setAttribute("download",`${e}_${new Date().toISOString().split("T")[0]}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)}function Vge(e,t){const r=JSON.stringify(t,null,2),n=new Blob([r],{type:"application/json;charset=utf-8;"}),s=document.createElement("a"),i=URL.createObjectURL(n);s.setAttribute("href",i),s.setAttribute("download",`${e}_${new Date().toISOString().split("T")[0]}.json`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}function Gge(e,t){const r=e.map(n=>({Date:n.date,Store:n.storeName||t||"N/A","Cash Amount":n.cashAmount||0,"Paytm Amount":n.paytmAmount||0,"Online Sales":n.onlineSales||0,"Total Revenue":(n.cashAmount||0)+(n.paytmAmount||0)+(n.onlineSales||0),"Created By":n.createdBy||"N/A","Created At":n.createdAt?new Date(n.createdAt).toLocaleString():"N/A"}));wx("sales_report",r)}function Yge(e,t){const r=e.map(n=>({Date:n.date,Store:n.storeName||t||"N/A",Category:n.category,Item:n.itemName,Quantity:n.quantity,Unit:n.unit||"N/A","Unit Cost":n.unitCost||0,"Total Cost":n.totalCost||0,Vendor:n.vendor||"N/A","Created By":n.createdBy||"N/A","Created At":n.createdAt?new Date(n.createdAt).toLocaleString():"N/A"}));wx("inventory_report",r)}function Xge(e,t){const r=e.map(n=>({Date:n.date,Store:n.storeName||t||"N/A",Category:n.category,Description:n.description||"N/A",Amount:n.amount,"Payment Mode":n.paymentMode||"N/A","Created By":n.createdBy||"N/A","Created At":n.createdAt?new Date(n.createdAt).toLocaleString():"N/A"}));wx("overhead_report",r)}function Jge(e,t){const r=e.map(n=>({Date:n.date,Store:n.storeName||t||"N/A","Approval Status":n.approvalStatus||"pending","Chicken Momos":n.chickenMomos?.final||0,"Chicken Cheese Momos":n.chickenCheeseMomos?.final||0,"Veg Momos":n.vegMomos?.final||0,"Cheese Corn Momos":n.cheeseCornMomos?.final||0,"Paneer Momos":n.paneerMomos?.final||0,"Veg Kurkure Momos":n.vegKurkureMomos?.final||0,"Chicken Kurkure Momos":n.chickenKurkureMomos?.final||0,"Total Production":(n.chickenMomos?.final||0)+(n.chickenCheeseMomos?.final||0)+(n.vegMomos?.final||0)+(n.cheeseCornMomos?.final||0)+(n.paneerMomos?.final||0)+(n.vegKurkureMomos?.final||0)+(n.chickenKurkureMomos?.final||0),"Dough Wastage":n.wastage?.dough||0,"Stuffing Wastage":n.wastage?.stuffing||0,"Batter Wastage":n.wastage?.batter||0,"Coating Wastage":n.wastage?.coating||0,"Total Wastage":(n.wastage?.dough||0)+(n.wastage?.stuffing||0)+(n.wastage?.batter||0)+(n.wastage?.coating||0),"Created By":n.createdBy||"N/A","Approved By":n.approvedBy||"N/A"}));wx("production_report",r)}function Qge(e){const t={generatedAt:new Date().toISOString(),storeName:e.storeName||"All Stores",dateRange:e.dateRange,summary:{totalRevenue:e.metrics.totalRevenue,totalExpenses:e.metrics.totalExpenses,netProfit:e.metrics.netProfit,profitMargin:e.metrics.profitMargin,salesRecords:e.salesData.length,inventoryRecords:e.inventoryData.length,overheadRecords:e.overheadData.length,productionRecords:e.productionData?.length||0},salesData:e.salesData,inventoryData:e.inventoryData,overheadData:e.overheadData,productionData:e.productionData||[]};Vge("analytics_report",t)}function Zge(e){e.salesData.length>0&&Gge(e.salesData,e.storeName),e.inventoryData.length>0&&setTimeout(()=>Yge(e.inventoryData,e.storeName),100),e.overheadData.length>0&&setTimeout(()=>Xge(e.overheadData,e.storeName),200),e.productionData&&e.productionData.length>0&&setTimeout(()=>Jge(e.productionData,e.storeName),300)}function exe({category:e,items:t,totalAmount:r,onClose:n}){const s=Object.values(t.reduce((l,d)=>{const u=d.itemName||d.description||"Unknown",f=d.unitPrice||d.amount||0,m=d.quantity||1,p=d.totalCost||d.totalPrice||d.amount||0;l[u]||(l[u]={itemName:u,totalSpent:0,quantity:0,avgUnitPrice:0,firstUnitPrice:f,lastUnitPrice:f,priceChange:0,priceChangePercent:0,transactionCount:0,firstDate:d.date,lastDate:d.date});const g=l[u];return g.totalSpent+=p,g.quantity+=m,g.transactionCount+=1,d.date<g.firstDate&&(g.firstDate=d.date,g.firstUnitPrice=f),d.date>g.lastDate&&(g.lastDate=d.date,g.lastUnitPrice=f),l},{})).map(l=>{const d=l.quantity>0?l.totalSpent/l.quantity:0,u=l.lastUnitPrice-l.firstUnitPrice,f=l.firstUnitPrice>0?u/l.firstUnitPrice*100:0;return{itemName:l.itemName,totalSpent:l.totalSpent,quantity:l.quantity,avgUnitPrice:d,firstUnitPrice:l.firstUnitPrice,lastUnitPrice:l.lastUnitPrice,priceChange:u,priceChangePercent:f,transactionCount:l.transactionCount}}),i=[...s].sort((l,d)=>d.totalSpent-l.totalSpent),o=[...s].filter(l=>l.transactionCount>1&&Math.abs(l.priceChangePercent)>.1).sort((l,d)=>Math.abs(d.priceChangePercent)-Math.abs(l.priceChangePercent));return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(C2,{className:"w-7 h-7"}),e," Breakdown"]}),a.jsxs("p",{className:"text-purple-100 mt-1",children:["Total Spent: ",r.toFixed(2),"  ",t.length," transactions  ",i.length," unique items"]})]}),a.jsx("button",{onClick:n,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors",children:a.jsx(ea,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-6 border-2 border-blue-200",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Zt,{className:"w-5 h-5 text-blue-600"}),"Top Items by Spend"]}),a.jsx("div",{className:"space-y-3",children:i.slice(0,10).map((l,d)=>{const u=l.totalSpent/r*100;return a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"bg-blue-600 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center",children:d+1}),a.jsx("span",{className:"font-medium text-gray-900",children:l.itemName})]}),a.jsxs("div",{className:"text-sm text-gray-600 mt-1 ml-8",children:[l.quantity.toFixed(2)," units  ",l.avgUnitPrice.toFixed(2),"/unit avg"]})]}),a.jsxs("div",{className:"text-right ml-4",children:[a.jsxs("div",{className:"font-bold text-gray-900",children:["",l.totalSpent.toFixed(2)]}),a.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:[u.toFixed(1),"%"]})]})]}),a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full",style:{width:`${u}%`}})})})]},`top-${l.itemName}-${d}`)})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-lg p-6 border-2 border-orange-200",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(fa,{className:"w-5 h-5 text-orange-600"}),"Biggest Price Fluctuations"]}),o.length===0?a.jsxs("div",{className:"bg-white rounded-lg p-8 text-center text-gray-500",children:[a.jsx(Nc,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),a.jsx("p",{children:"No significant price changes detected"}),a.jsx("p",{className:"text-sm mt-1",children:"Items need multiple purchases to show fluctuations"})]}):a.jsx("div",{className:"space-y-3",children:o.slice(0,10).map((l,d)=>{const u=l.priceChange>0;return a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900",children:l.itemName}),a.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[l.transactionCount," purchases tracked"]})]}),a.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 rounded-full text-sm font-bold ${u?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:[u?a.jsx(fa,{className:"w-4 h-4"}):a.jsx(Nc,{className:"w-4 h-4"}),u?"+":"",l.priceChangePercent.toFixed(1),"%"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3 text-sm",children:[a.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Initial Price"}),a.jsxs("div",{className:"font-semibold text-gray-900",children:["",l.firstUnitPrice.toFixed(2)]})]}),a.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Latest Price"}),a.jsxs("div",{className:"font-semibold text-gray-900",children:["",l.lastUnitPrice.toFixed(2)]})]})]}),a.jsxs("div",{className:`mt-2 text-xs font-medium ${u?"text-red-600":"text-green-600"}`,children:[u?"Increased":"Decreased"," by ",Math.abs(l.priceChange).toFixed(2),"/unit"]})]},`fluc-${l.itemName}-${d}`)})})]})]}),a.jsxs("div",{className:"mt-6 bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-6 border-2 border-purple-200",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(ca,{className:"w-5 h-5 text-purple-600"}),"Summary Statistics"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Total Items"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.length})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Transactions"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.length})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Avg per Item"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.length>0?`${(r/i.length).toFixed(0)}`:"0"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Price Volatility"}),a.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[o.length,a.jsx("span",{className:"text-sm text-gray-600 font-normal ml-1",children:"items"})]})]})]})]})]})]})})}const Vm=({active:e,payload:t,label:r})=>e&&t&&t.length?a.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[a.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((n,s)=>a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.color}}),a.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[n.name,":"]}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:["",n.value.toLocaleString()]})]},s))]}):null,txe=({active:e,payload:t})=>{if(e&&t&&t.length){const r=t[0];return a.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:r.payload.fill}}),a.jsx("p",{className:"text-gray-900",style:{fontSize:"14px",fontWeight:"600"},children:r.name})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between gap-4",children:[a.jsx("span",{className:"text-gray-600",style:{fontSize:"13px"},children:"Amount:"}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:["",r.value.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between gap-4",children:[a.jsx("span",{className:"text-gray-600",style:{fontSize:"13px"},children:"Percentage:"}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[r.payload.percentage,"%"]})]})]})]})}return null},rxe=({active:e,payload:t,label:r})=>e&&t&&t.length?a.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[a.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((n,s)=>a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.color}}),a.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[n.name,":"]}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[n.value.toFixed(2)," kg"]})]},s))]}):null;function j2({context:e,selectedStoreId:t,highlightRequestId:r,onNavigateToManageItems:n}){const[s,i]=P.useState([]),[o,l]=P.useState([]),[d,u]=P.useState(!1),[f,m]=P.useState([]),[p,g]=P.useState(!1);P.useEffect(()=>{(async()=>{if(e.user?.accessToken){u(!0);try{const[we,he]=await Promise.all([Og(e.user.accessToken),Pg(e.user.accessToken)]);i(we||[]),l(he||[])}catch(we){console.error("Error loading online sales/payout data:",we)}finally{u(!1)}}})()},[e.user?.accessToken]),P.useEffect(()=>{(async()=>{if(e.user?.accessToken){g(!0);try{const we=await U2(e.user.accessToken);m(we||[])}catch(we){console.error("Error loading loans data:",we)}finally{g(!1)}}})()},[e.user?.accessToken]);const b=U=>U.category==="service_charge"&&U.description?.includes("Aggregator Commission")||U.category==="commission",y=e.user?.role==="cluster_head",v=e.user?.role==="manager",k=e.user?.role==="audit",S=e.user?.designation==="production_incharge",w=e.user?.designation==="store_incharge",[A,C]=P.useState(S?"production":"store"),[N,E]=P.useState(t||(y||v||S||k?null:e.user?.storeId)||null),_=A==="store"?N:null;ia.debugStore("Analytics effectiveStoreId:",_),ia.debugStore("Analytics mode:",A),console.log(" Local selected store ID:",N),console.log(" All stores in context:",e.stores),console.log(" Number of stores:",e.stores?.length);const[O,B]=P.useState(r?"production-requests":"profit"),[F,D]=P.useState(null);P.useEffect(()=>{ia.debugAnalytics("activeView changed to:",O)},[O]),P.useEffect(()=>{A==="production"&&O!=="production"&&O!=="recalibration-reports"&&O!=="production-requests"?B("production"):(O==="production"||O==="recalibration-reports"||O==="production-requests")&&A==="store"?B("profit"):O==="store-recalibration"&&A==="production"&&B("production")},[A]);const[H,ne]=P.useState("revenue"),[W,ee]=P.useState("thisMonth"),[re,Q]=P.useState("thisMonth"),R=()=>{const U=new Date,we=U.getFullYear(),he=String(U.getMonth()+1).padStart(2,"0"),be=String(U.getDate()).padStart(2,"0");return{from:`${we}-${he}-01`,to:`${we}-${he}-${be}`}},[X,L]=P.useState(R()),[I,G]=P.useState(0),[V,Z]=P.useState([]),[ve,Ee]=P.useState(!1),[Te,ue]=P.useState(!0),[ge,Fe]=P.useState([]),[J,Ze]=P.useState([]),[rt,Tt]=P.useState(!1),[ze,Re]=P.useState([]),[Ce,Se]=P.useState(null),[Qe,kt]=P.useState(null),[Ct,yr]=P.useState({chickenMomos:{dough:25,stuffing:15},chickenCheeseMomos:{dough:25,stuffing:18},vegMomos:{dough:25,stuffing:12},cheeseCornMomos:{dough:25,stuffing:16},paneerMomos:{dough:25,stuffing:14},vegKurkure:{dough:28,stuffing:12,batter:10,coating:5},chickenKurkure:{dough:28,stuffing:15,batter:10,coating:5}}),[Kt,Rr]=P.useState(!1),[Pr,da]=P.useState(null),[ur,Br]=P.useState(5),[It,er]=P.useState(5),[Ir,Tr]=P.useState({chicken:{high:1200,medium:600,low:300},chickenCheese:{high:600,medium:300,low:150},veg:{high:600,medium:300,low:150},cheeseCorn:{high:600,medium:300,low:150},paneer:{high:600,medium:300,low:150},vegKurkure:{high:400,medium:200,low:100},chickenKurkure:{high:400,medium:200,low:100}}),[tr,Da]=P.useState(!1),[Oa,He]=P.useState({}),[Ie,lt]=P.useState(()=>{const U=localStorage.getItem("momosPerPlate");return U?parseInt(U,10):6}),[Ke,pt]=P.useState(!1),[Nt,Rt]=P.useState(6),[Pt,Dr]=P.useState(S&&e.user?.storeId||null),pa=e.salesData,oa=e.inventory,ot=e.overheads,Sr=e.fixedCosts,Ot=e.productionData,[xe,it]=P.useState(()=>{const U=Ot.map(we=>we.date).filter((we,he,be)=>be.indexOf(we)===he).sort((we,he)=>he.localeCompare(we));return U.length>0?U[0]:Na()}),[dt,gt]=P.useState(()=>{const U=Ot.filter(we=>we.approvalStatus==="approved").map(we=>we.date).filter((we,he,be)=>be.indexOf(we)===he).sort((we,he)=>he.localeCompare(we));return U.length>0?U[0]:Na()}),[ft,q]=P.useState("thisMonth"),[oe,ae]=P.useState(""),[se,K]=P.useState(""),Y=()=>{const U=new Date;U.setHours(0,0,0,0);const we=je=>{const me=je.getFullYear(),de=String(je.getMonth()+1).padStart(2,"0"),Me=String(je.getDate()).padStart(2,"0");return`${me}-${de}-${Me}`};let he,be;switch(ft){case"today":he=new Date(U),be=new Date(U);break;case"yesterday":he=new Date(U),he.setDate(he.getDate()-1),be=new Date(he);break;case"thisWeek":he=new Date(U);const je=he.getDay(),me=je===0?-6:1-je;he.setDate(he.getDate()+me),be=new Date(U);break;case"previousWeek":he=new Date(U);const de=he.getDay(),Me=de===0?-13:-(de+6);he.setDate(he.getDate()+Me),be=new Date(he),be.setDate(he.getDate()+6);break;case"thisMonth":he=new Date(U.getFullYear(),U.getMonth(),1),be=new Date(U);break;case"previousMonth":he=new Date(U.getFullYear(),U.getMonth()-1,1),be=new Date(U.getFullYear(),U.getMonth(),0);break;case"thisYear":he=new Date(U.getFullYear(),0,1),be=new Date(U);break;case"previousYear":he=new Date(U.getFullYear()-1,0,1),be=new Date(U.getFullYear()-1,11,31);break;case"custom":oe&&se?(he=new Date(oe+"T00:00:00"),be=new Date(se+"T00:00:00")):(he=new Date(U),be=new Date(U));break;default:he=new Date(U),be=new Date(U)}return{startDate:we(he),endDate:we(be)}},le=()=>{const U=new Date;U.setHours(0,0,0,0);const we=je=>{const me=je.getFullYear(),de=String(je.getMonth()+1).padStart(2,"0"),Me=String(je.getDate()).padStart(2,"0");return`${me}-${de}-${Me}`};let he,be;switch(ft){case"today":he=new Date(U),he.setDate(U.getDate()-1),be=new Date(he);break;case"yesterday":he=new Date(U),he.setDate(U.getDate()-2),be=new Date(he);break;case"thisWeek":const je=new Date(U);je.setDate(U.getDate()-U.getDay());const me=U.getDay();he=new Date(je),he.setDate(je.getDate()-7),be=new Date(he),be.setDate(he.getDate()+me);break;case"previousWeek":he=new Date(U),he.setDate(U.getDate()-U.getDay()-14),be=new Date(he),be.setDate(he.getDate()+6);break;case"thisMonth":const de=U.getDate();he=new Date(U.getFullYear(),U.getMonth()-1,1),be=new Date(U.getFullYear(),U.getMonth()-1,de);break;case"previousMonth":he=new Date(U.getFullYear(),U.getMonth()-2,1),be=new Date(U.getFullYear(),U.getMonth()-1,0);break;case"thisYear":const Me=new Date(U.getFullYear(),0,1),Je=Math.floor((U.getTime()-Me.getTime())/(1e3*60*60*24));he=new Date(U.getFullYear()-1,0,1),be=new Date(he),be.setDate(he.getDate()+Je);break;case"previousYear":he=new Date(U.getFullYear()-2,0,1),be=new Date(U.getFullYear()-2,11,31);break;case"custom":if(oe&&se){const ct=new Date(oe),et=new Date(se),Ue=Math.ceil((et.getTime()-ct.getTime())/(1e3*60*60*24)),bt=new Date(ct);bt.setDate(ct.getDate()-Ue-1);const Vt=new Date(ct);return Vt.setDate(ct.getDate()-1),{startDate:we(bt),endDate:we(Vt)}}else he=new Date(U),he.setDate(U.getDate()-1),be=new Date(he);break;default:he=new Date(U),he.setDate(U.getDate()-1),be=new Date(he)}return{startDate:we(he),endDate:we(be)}};P.useEffect(()=>{const U=Pt,we=Ot.filter(he=>{if(!U)return!0;const be=he.storeId===U,je=he.productionHouseId===U,me=he.productionHouseId||he.storeId;return be||je||me===U}).map(he=>he.date).filter((he,be,je)=>je.indexOf(he)===be).sort((he,be)=>be.localeCompare(he));we.length>0?it(we[0]):it(Na())},[Pt,Ot]),P.useEffect(()=>{console.log(" Carry-Forward useEffect triggered:",{analyticsMode:A,selectedProductionHouseId:Pt,hasProductionData:!!e.productionData?.length,hasProductionRequests:!!e.productionRequests?.length}),A==="production"&&Pt?(console.log(" Conditions met - fetching opening balance..."),pe()):console.log(" Conditions not met for carry-forward")},[Pt,A,e.productionData,e.productionRequests]),P.useEffect(()=>{if((y||v||k)&&A==="production"&&!Pt&&e.productionHouses&&e.productionHouses.length>0){const U=e.productionHouses[0];console.log(" Auto-selecting first production house for Cluster Head/Manager:",U.id,U.name),Dr(U.id)}},[A,y,v,e.productionHouses]);async function pe(){try{const U=new Date().toISOString().substring(0,7);console.log(" Starting opening balance calculation:"),console.log("   Current month:",U),console.log("   Selected production house ID:",Pt),console.log("   Available production data records:",Ot.length),console.log("   Available production requests:",e.productionRequests?.length||0),console.log("   Available stores (local):",ze.length);const we=ze.length>0?ze:e.stores||[];let he=Pt;if(Pt&&Pt.startsWith("STORE-")){const me=we.find(de=>de.id===Pt);me?.productionHouseId&&(he=me.productionHouseId,console.log("   Resolved production house UUID:",he))}if(!he){console.log("    No production house UUID available, skipping recalibration fetch"),Se(null),kt(null);return}let be=await Bj(e.user?.accessToken||"",he,"production_house");if(!be?.record&&he){console.log("   No recalibration found with UUID, checking with mapped store ID...");const me=we.filter(de=>de.productionHouseId===he);if(console.log("   Stores mapped to this production house:",me.map(de=>({id:de.id,name:de.name}))),me&&me.length>0)for(const de of me){console.log("   Trying to fetch recalibration with store ID:",de.id);const Me=await Bj(e.user?.accessToken||"",de.id,"production_house");if(Me?.record){console.log("    Found recalibration using store ID:",de.id),be=Me;break}}}console.log(" Recalibration Response:",be);let je=null;if(be?.record){const me=be.record.date.substring(0,7),de=parseInt(be.record.date.substring(8,10));console.log(" Recalibration date comparison:",{recalDate:me,recalDay:de,currentMonth:U,isFirstOfMonth:de===1,match:me===U}),me===U?(console.log(" Current month recalibration found - using as opening balance"),console.log(`   Recalibration date: ${be.record.date} (day ${de})`),console.log("   Recalibration items:",be.record.items),je={},be.record.items.forEach(Me=>{const Je=e.inventoryItems?.find(ct=>ct.id===Me.itemId||ct.name===Me.itemId);if(Je){const et=Je.name.replace(/_([a-z])/g,Ue=>Ue[1].toUpperCase()).replace(/Momo(s)?$/i,"");je[et]=Me.actualQuantity,console.log(`   Opening balance: ${Me.itemId} -> ${et} = ${Me.actualQuantity}`)}else je[Me.itemId]=Me.actualQuantity,console.log(`   Opening balance item not found in inventory: ${Me.itemId}, using as-is`)}),console.log("   Parsed opening balance:",je)):(console.log(" Recalibration from previous month, calculating forward..."),je=z(be.record,U))}else console.log(" No recalibration found, calculating from previous month..."),je=ce(he);Se(be?.record||null),kt(je),console.log(" Opening Balance Calculated:",je)}catch(U){console.error("Error fetching recalibration:",U)}}function z(U,we){const he=U.date.substring(0,7),be={};U.items.forEach(Me=>{const Je=e.inventoryItems?.find(ct=>ct.id===Me.itemId||ct.name===Me.itemId);if(Je){const et=Je.name.replace(/_([a-z])/g,Ue=>Ue[1].toUpperCase()).replace(/Momo(s)?$/i,"");be[et]=Me.actualQuantity,console.log(`   Recalibration item mapping: ${Me.itemId} -> ${et} = ${Me.actualQuantity}`)}else be[Me.itemId]=Me.actualQuantity,console.log(`   Recalibration item not found in inventory: ${Me.itemId}, using as-is`)});const je=new Date(he+"-01"),me=new Date(we+"-01");let de=new Date(je);for(de.setMonth(de.getMonth()+1);de<me;){const Me=de.toISOString().substring(0,7),Je=ye(Pt,Me),ct=$e(Pt,Me);["chicken","chickenCheese","veg","cheeseCorn","paneer","vegKurkure","chickenKurkure"].forEach(et=>{be[et]=(be[et]||0)+(Je[et]||0)-(ct[et]||0)}),de.setMonth(de.getMonth()+1)}return be}function ce(U){const we=new Date().toISOString().substring(0,7),[he,be]=we.split("-").map(Number);let je=he,me=be-1;me===0&&(me=12,je=he-1);const de=`${je}-${String(me).padStart(2,"0")}`;console.log(" Calculating previous month closing stock for:",de),console.log("   Current month:",we," Previous month:",de);const Me=ye(U,de),Je=$e(U,de),ct={};return["chicken","chickenCheese","veg","cheeseCorn","paneer","vegKurkure","chickenKurkure"].forEach(et=>{ct[et]=(Me[et]||0)-(Je[et]||0)}),console.log("  Previous month production:",Me),console.log("  Previous month deliveries:",Je),console.log("  Calculated closing stock:",ct),ct}function ye(U,we){if(!U)return console.log(" getMonthProduction called with null phId"),{};console.log(` Getting production for phId: ${U}, month: ${we}`),console.log(`   Total production records available: ${Ot.length}`);const he=Ot.filter(be=>{if(!be.date.startsWith(we))return!1;const je=be.storeId===U,me=be.productionHouseId===U;let de=be.productionHouseId;(!de||de.startsWith("STORE-"))&&be.storeId&&(de=(ze.length>0?ze:e.stores||[]).find(et=>et.id===be.storeId)?.productionHouseId||null);const Me=de||be.storeId;return je||me||Me===U});return console.log(`   Filtered production records: ${he.length}`),he.reduce((be,je)=>({chicken:be.chicken+(je.chickenMomos?.final||0),chickenCheese:be.chickenCheese+(je.chickenCheeseMomos?.final||0),veg:be.veg+(je.vegMomos?.final||0),cheeseCorn:be.cheeseCorn+(je.cheeseCornMomos?.final||0),paneer:be.paneer+(je.paneerMomos?.final||0),vegKurkure:be.vegKurkure+(je.vegKurkureMomos?.final||0),chickenKurkure:be.chickenKurkure+(je.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}function $e(U,we){if(!U)return console.log(" getMonthDeliveries called with null phId"),{};console.log(` Getting deliveries for phId: ${U}, month: ${we}`),console.log(`   Total production requests available: ${e.productionRequests?.length||0}`);const he=ze.length>0?ze:e.stores||[];let be=U;if(U&&U.startsWith("STORE-")){const me=he.find(de=>de.id===U);me?.productionHouseId&&(be=me.productionHouseId,console.log(`   Resolved UUID: ${be}`))}const je=(e.productionRequests||[]).filter(me=>{if(me.status!=="delivered")return!1;const de=me.deliveredDate||me.requestDate||me.createdAt;return!de||!de.startsWith(we)?!1:he.find(Je=>Je.id===me.storeId)?.productionHouseId===be});return console.log(`   Filtered delivered requests: ${je.length}`),je.reduce((me,de)=>({chicken:me.chicken+(de.chickenMomos||0),chickenCheese:me.chickenCheese+(de.chickenCheeseMomos||0),veg:me.veg+(de.vegMomos||0),cheeseCorn:me.cheeseCorn+(de.cheeseCornMomos||0),paneer:me.paneer+(de.paneerMomos||0),vegKurkure:me.vegKurkure+(de.vegKurkureMomos||0),chickenKurkure:me.chickenKurkure+(de.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}ia.isDebugEnabled()&&(ia.debugAnalytics("Production Data Debug:"),ia.debugAnalytics("  - Total production records:",Ot.length),ia.debugAnalytics("  - Production data records:",Ot.map(U=>({id:U.id,date:U.date,storeId:U.storeId,productionHouseId:U.productionHouseId,approvalStatus:U.approvalStatus,chickenMomos:U.chickenMomos?.final||0,totalProduction:(U.chickenMomos?.final||0)+(U.vegMomos?.final||0)+(U.chickenCheeseMomos?.final||0)+(U.cheeseCornMomos?.final||0)+(U.paneerMomos?.final||0)+(U.vegKurkureMomos?.final||0)+(U.chickenKurkureMomos?.final||0)}))),ia.debugAnalytics("  - Selected production house ID:",Pt),ia.debugAnalytics("  - Analytics mode:",A),ia.debugAnalytics("  - User storeId:",e.user?.storeId),ia.debugAnalytics("  - User designation:",e.user?.designation),ia.debugAnalytics("  - Is Production Incharge:",S),ia.debugAnalytics("  - Available production houses:",e.productionHouses.map(U=>({id:U.id,name:U.name}))),ia.debugAnalytics("  - Available stores:",e.stores?.map(U=>({id:U.id,name:U.name,productionHouseId:U.productionHouseId}))),ia.debugAnalytics("  - Production Incharge Specific:"),ia.debugAnalytics("     - User storeId (should be production house ID):",e.user?.storeId),ia.debugAnalytics("     - Does user storeId match any production house?",e.productionHouses.find(U=>U.id===e.user?.storeId)),ia.debugAnalytics("     - Production data storeIds:",[...new Set(Ot.map(U=>U.storeId))]),ia.debugAnalytics("     - Production data productionHouseIds:",[...new Set(Ot.map(U=>U.productionHouseId))]),ia.debugAnalytics("     - Stores that map to user production house:",e.stores?.filter(U=>U.productionHouseId===e.user?.storeId).map(U=>({id:U.id,name:U.name}))));const De=(U,we="date")=>{const he=new Date,be=new Date(he.getFullYear(),he.getMonth(),he.getDate());return U.filter(je=>{if(!je||!je[we])return!1;try{const me=new Date(je[we]);if(isNaN(me.getTime()))return!1;const de=new Date(me.getFullYear(),me.getMonth(),me.getDate());switch(W){case"today":return de.getTime()===be.getTime();case"yesterday":const Me=new Date(be);return Me.setDate(Me.getDate()-1),de.getTime()===Me.getTime();case"thisWeek":const Je=new Date(be),ct=be.getDay(),et=ct===0?-6:1-ct;return Je.setDate(be.getDate()+et),de>=Je&&de<=be;case"thisMonth":const Ue=new Date(be.getFullYear(),be.getMonth(),1);return de>=Ue&&de<=be;case"lastWeek":const bt=new Date(be),Vt=be.getDay(),gr=Vt===0?-13:-(Vt+6);bt.setDate(be.getDate()+gr);const Lr=new Date(bt);return Lr.setDate(bt.getDate()+6),de>=bt&&de<=Lr;case"lastMonth":const hr=new Date(be.getFullYear(),be.getMonth()-1,1),$t=new Date(be.getFullYear(),be.getMonth(),0);return de>=hr&&de<=$t;case"custom":const Nr=new Date(X.from),Or=new Date(X.to);return de>=Nr&&de<=Or;default:return!0}}catch(me){return console.error("Error filtering by time range:",me,"Item:",je),!1}})},Ge=De(pa),Be=De(oa),qe=ot.filter(U=>{const we=new Date,he=new Date(we.getFullYear(),we.getMonth(),we.getDate());if(U.category==="personal_expense"&&U.expenseMonth){const me=U.expenseMonth;switch(W){case"today":case"yesterday":return!1;case"thisWeek":case"lastWeek":return!1;case"thisMonth":const de=`${he.getFullYear()}-${String(he.getMonth()+1).padStart(2,"0")}`;return me===de;case"lastMonth":const Me=new Date(he.getFullYear(),he.getMonth()-1,1),Je=`${Me.getFullYear()}-${String(Me.getMonth()+1).padStart(2,"0")}`;return me===Je;case"custom":const ct=new Date(X.from),et=new Date(X.to),Ue=new Date(me+"-01"),bt=new Date(Ue.getFullYear(),Ue.getMonth(),1),Vt=new Date(Ue.getFullYear(),Ue.getMonth()+1,0);return bt<=et&&Vt>=ct;default:return!0}}const be=new Date(U.date),je=new Date(be.getFullYear(),be.getMonth(),be.getDate());switch(W){case"today":return je.getTime()===he.getTime();case"yesterday":const me=new Date(he);return me.setDate(me.getDate()-1),je.getTime()===me.getTime();case"thisWeek":const de=new Date(he),Me=he.getDay(),Je=Me===0?-6:1-Me;return de.setDate(he.getDate()+Je),je>=de&&je<=he;case"thisMonth":const ct=new Date(he.getFullYear(),he.getMonth(),1);return je>=ct&&je<=he;case"lastWeek":const et=new Date(he),Ue=he.getDay(),bt=Ue===0?-13:-(Ue+6);et.setDate(he.getDate()+bt);const Vt=new Date(et);return Vt.setDate(et.getDate()+6),je>=et&&je<=Vt;case"lastMonth":const gr=new Date(he.getFullYear(),he.getMonth()-1,1),Lr=new Date(he.getFullYear(),he.getMonth(),0);return je>=gr&&je<=Lr;case"custom":const hr=new Date(X.from),$t=new Date(X.to);return je>=hr&&je<=$t;default:return!0}}),St=De(Sr);console.log(" Before time filtering - payoutsData:",ge.length,"payouts"),console.log(" Payouts before filtering:",ge.map(U=>({id:U.id,date:U.date,amount:U.amount}))),console.log(" Sample payout object:",ge[0]),console.log(" All payout dates as strings:",ge.map(U=>U.date).join(", "));const ie=De(ge,"date");console.log(" After time filtering - timeFilteredPayoutsData:",ie.length,"payouts"),console.log(" Time filter:",W),console.log(" Current date for reference:",new Date().toISOString());const fe=P.useMemo(()=>{ia.debugSales("=== SALES DATA FILTERING ==="),ia.debugSales("Total sales records (time-filtered):",Ge.length),ia.debugSales("effectiveStoreId:",_),console.log("User role:",e.user?.role),console.log("All sales storeIds:",Ge.map(be=>be.storeId)),console.log("User storeId:",e.user?.storeId);const U=Ge.filter(be=>{const je=new Date(be.date);return je.getDate()===28&&je.getMonth()===11});if(console.log("December 28th sales found:",U.length),U.forEach(be=>{console.log(`  - Date: ${be.date}, StoreId: ${be.storeId}, Revenue: ${(be.paytmAmount||0)+(be.cashAmount||0)+(be.onlineSales||0)}`)}),!_)return console.log("No store filter - returning all",Ge.length,"sales"),Ge;const we=Ge.filter(be=>be.storeId===_);console.log("After store filtering (exact match only):",we.length,"sales"),console.log("Filtered sales details:",we.map(be=>({date:be.date,storeId:be.storeId,total:(be.offlineSales||0)+(be.onlineSales||0)})));const he=Ge.filter(be=>be.storeId!==_);return console.log("Filtered out (all non-matching storeIds):",he.length,"sales"),he.length>0&&console.log("Sample filtered out sales storeIds:",he.slice(0,5).map(be=>be.storeId)),console.log(" === END DEBUG ==="),we},[Ge,_]),_e=P.useMemo(()=>{console.log(" === INVENTORY DATA FILTERING DEBUG ==="),console.log("Total inventory records (time-filtered):",Be.length),console.log("effectiveStoreId:",_);const U=Be.filter(he=>{const be=new Date(he.date);return be.getDate()===28&&be.getMonth()===11});if(console.log("December 28th inventory found:",U.length),U.forEach(he=>{console.log(`  - Date: ${he.date}, StoreId: ${he.storeId}, Cost: ${he.totalCost||0}`)}),!_)return console.log("No store filter - returning all",Be.length,"inventory items"),Be;const we=Be.filter(he=>he.storeId===_);return console.log("After store filtering (exact match only):",we.length,"inventory items"),console.log(" === END INVENTORY DEBUG ==="),we},[Be,_]),nt=P.useMemo(()=>{console.log(" === OVERHEAD DATA FILTERING DEBUG ==="),console.log("Total overhead records (time-filtered):",qe.length),console.log("effectiveStoreId:",_);const U=qe.filter(he=>{const be=new Date(he.date);return be.getDate()===28&&be.getMonth()===11});if(console.log("December 28th overhead found:",U.length),U.forEach(he=>{console.log(`  - Date: ${he.date}, StoreId: ${he.storeId}, Amount: ${he.amount||0}`)}),!_)return console.log("No store filter - returning all",qe.length,"overhead items"),qe;const we=qe.filter(he=>he.storeId===_);return console.log("After store filtering (exact match only):",we.length,"overhead items"),console.log("Filtered overhead storeIds:",we.map(he=>({date:he.date,storeId:he.storeId,amount:he.amount}))),console.log(" === END OVERHEAD DEBUG ==="),we},[qe,_]),xt=P.useMemo(()=>_?St.filter(U=>U.storeId===_):St,[St,_]),ut=P.useMemo(()=>_?J.filter(U=>U.storeId===_):J,[J,_]),Dt=P.useMemo(()=>{let U=ie;if(_){const we=ut.map(he=>he.id);U=U.filter(he=>we.includes(he.employeeId))}return U},[ie,ut,_]);P.useEffect(()=>{(async()=>{try{console.log(" === LOADING PAYOUTS AND EMPLOYEES ===");const[we,he]=await Promise.all([Co(),El()]);console.log(" Raw payouts from API:",we),console.log(" Number of payouts:",we?.length||0),console.log(" Payout dates:",we?.map(be=>({id:be.id,date:be.payoutDate,amount:be.amount}))),console.log(" Number of employees:",he?.length||0),Fe(we||[]),Ze(he||[]),console.log(" === END LOADING PAYOUTS AND EMPLOYEES ===")}catch(we){console.error(" Error loading payouts and employees:",we),Fe([]),Ze([])}})()},[]),P.useEffect(()=>{(async()=>{if(console.log(" Store Loading Check:",{isClusterHead:y,analyticsMode:A,shouldLoad:y||A==="production"}),!(!y&&A!=="production"))try{const we=await Nu();Re(we),console.log(" Loaded stores for analytics:",we.length,"stores"),console.log(" Store details:",we.map(he=>({id:he.id,name:he.name,productionHouseId:he.productionHouseId})))}catch(we){console.error(" Error loading stores:",we)}})()},[y,A]);const Wr=async()=>{try{const U=ju(),{data:{session:we}}=await U.auth.getSession();return we?.access_token||null}catch(U){return console.error("Error getting fresh token:",U),null}};P.useEffect(()=>{(async()=>{if(e.user)try{ue(!0);const we=await Wr();if(!we){console.error("No valid access token available");return}const he=Na();if(e.user.role==="cluster_head"){const je=(await l5(we)).filter(Me=>Me.leaveDate===he&&Me.status==="approved"),me=await li(we),de=new Map(me.map(Me=>[Me.employeeId,Me]));if(e.user.storeId){const Me=me.filter(et=>et.storeId===e.user.storeId||et.storeId===null||et.storeId===void 0).map(et=>et.employeeId),Je=je.filter(et=>Me.includes(et.employeeId)),ct=Je.map(et=>({...et,employeeName:de.get(et.employeeId)?.name||"Unknown",storeId:de.get(et.employeeId)?.storeId||"N/A",storeName:de.get(et.employeeId)?.storeName||"N/A"}));G(Je.length),Z(ct)}else{const Me=je.map(Je=>({...Je,employeeName:de.get(Je.employeeId)?.name||"Unknown",storeId:de.get(Je.employeeId)?.storeId||"N/A",storeName:de.get(Je.employeeId)?.storeName||"N/A"}));G(je.length),Z(Me)}}else if(e.user.role==="manager"&&e.user.employeeId){const be=await kc(e.user.employeeId,we),je=new Map(be.map(de=>[de.employeeId,de]));let me=[];for(const de of be){const ct=(await ku(de.employeeId,we)).filter(et=>et.leaveDate===he&&et.status==="approved").map(et=>({...et,employeeName:je.get(et.employeeId)?.name||"Unknown",storeId:je.get(et.employeeId)?.storeId||"N/A",storeName:je.get(et.employeeId)?.storeName||"N/A"}));me.push(...ct)}G(me.length),Z(me)}else G(0),Z([])}catch(we){console.error("Error loading today's leaves:",we),G(0)}finally{ue(!1)}})()},[e.user]),P.useEffect(()=>{console.log(" Analytics - highlightRequestId changed:",r),r&&(console.log(" Analytics - Switching to production-requests tab"),B("production-requests"))},[r]);const Xt=()=>{switch(W){case"today":return"Today";case"yesterday":return"Yesterday";case"thisWeek":return"This week";case"thisMonth":return"This month";case"lastWeek":return"Last week";case"lastMonth":return"Last month";case"custom":return`${X.from} to ${X.to}`;default:return"Current period"}},pr=(U,we,he)=>{const be=he?f.filter(me=>me.storeId===he):f;let je=0;return be.forEach(me=>{if(!me.interestRate||me.interestRate===0)return;const de=new Date(me.loanDate),Me=new Date(U),Je=new Date(we),ct=me.status==="repaid"&&me.repaymentDate?new Date(me.repaymentDate):Je,et=de>Me?de:Me,Ue=ct<Je?ct:Je;if(et<Ue){const bt=Math.floor((Ue.getTime()-et.getTime())/864e5)+1,Vt=me.loanAmount*me.interestRate*bt/3e3;je+=Math.max(0,Vt),console.log(` Interest for loan ${me.id}:`,{storeName:me.storeName,principal:me.loanAmount,rate:me.interestRate,loanDate:me.loanDate,repaymentDate:me.repaymentDate,status:me.status,overlapStart:et.toISOString().split("T")[0],overlapEnd:Ue.toISOString().split("T")[0],days:bt,interest:Vt.toFixed(2)})}}),console.log(` Total accrued interest for period ${U} to ${we}:`,je.toFixed(2)),je},rr=()=>{console.log(" === METRICS CALCULATION DEBUG ==="),console.log("Time filter:",W),console.log("Filtered sales data count:",fe.length),console.log("Filtered inventory data count:",_e.length),console.log("Filtered overhead data count:",nt.length),console.log("Filtered fixed costs data count:",xt.length);const U=fe.reduce((ht,Pe)=>ht+(Pe.paytmAmount||0)+(Pe.cashAmount||0)+(Pe.onlineSales||0),0);console.log("Total revenue calculated:",U);const we=fe.reduce((ht,Pe)=>ht+(Pe.onlineSales||0),0),he=fe.reduce((ht,Pe)=>ht+(Pe.paytmAmount||0)+(Pe.cashAmount||0),0),be=_e.reduce((ht,Pe)=>ht+(Pe.totalCost||0),0);console.log("Inventory expenses:",be);const je=nt.filter(ht=>!b(ht)).reduce((ht,Pe)=>ht+(Pe.amount||0),0);console.log(" DEBUG COMMISSION - Calculating from online sales/payout data");const me=s.filter(ht=>{const Pe=(()=>{switch(W){case"today":return ht.date===Na();case"yesterday":const Er=new Date;return Er.setDate(Er.getDate()-1),ht.date===Er.toISOString().split("T")[0];case"thisWeek":const ir=new Date,Fr=new Date(ir);return Fr.setDate(ir.getDate()-ir.getDay()),new Date(ht.date)>=Fr&&new Date(ht.date)<=ir;case"lastWeek":const _r=new Date;_r.setDate(_r.getDate()-_r.getDay()-1);const ha=new Date(_r);return ha.setDate(_r.getDate()-6),new Date(ht.date)>=ha&&new Date(ht.date)<=_r;case"thisMonth":const Kr=new Date().toISOString().slice(0,7);return ht.date.startsWith(Kr);case"lastMonth":const Zr=new Date;Zr.setMonth(Zr.getMonth()-1);const zs=Zr.toISOString().slice(0,7);return ht.date.startsWith(zs);case"custom":return ht.date>=X.from&&ht.date<=X.to;default:return!0}})(),wt=_?ht.storeId===_:!0;return Pe&&wt}),de=o.filter(ht=>{const Pe=(()=>{switch(W){case"today":return ht.date===Na();case"yesterday":const Er=new Date;return Er.setDate(Er.getDate()-1),ht.date===Er.toISOString().split("T")[0];case"thisWeek":const ir=new Date,Fr=new Date(ir);return Fr.setDate(ir.getDate()-ir.getDay()),new Date(ht.date)>=Fr&&new Date(ht.date)<=ir;case"lastWeek":const _r=new Date;_r.setDate(_r.getDate()-_r.getDay()-1);const ha=new Date(_r);return ha.setDate(_r.getDate()-6),new Date(ht.date)>=ha&&new Date(ht.date)<=_r;case"thisMonth":const Kr=new Date().toISOString().slice(0,7);return ht.date.startsWith(Kr);case"lastMonth":const Zr=new Date;Zr.setMonth(Zr.getMonth()-1);const zs=Zr.toISOString().slice(0,7);return ht.date.startsWith(zs);case"custom":return ht.date>=X.from&&ht.date<=X.to;default:return!0}})(),wt=_?ht.storeId===_:!0;return Pe&&wt}),Me=me.reduce((ht,Pe)=>ht+(Pe.swiggySales||0)+(Pe.zomatoSales||0),0),Je=de.reduce((ht,Pe)=>ht+(Pe.swiggyPayout||0)+(Pe.zomatoPayout||0),0),ct=Me-Je;console.log(" DEBUG COMMISSION - Filtered online sales:",me.length),console.log(" DEBUG COMMISSION - Filtered online payouts:",de.length),console.log(" DEBUG COMMISSION - Total online sales:",Me),console.log(" DEBUG COMMISSION - Total online payouts:",Je),console.log(" DEBUG COMMISSION - Commission expenses:",ct);const et=xt.filter(ht=>ht.category==="electricity").reduce((ht,Pe)=>ht+(Pe.amount||0),0),Ue=xt.filter(ht=>ht.category==="rent").reduce((ht,Pe)=>ht+(Pe.amount||0),0);console.log(" === CONTRACT WORKER SALARY DEBUG ==="),console.log("Total filteredSalesData:",fe.length);const bt=fe.filter(ht=>(ht.employeeSalary||0)>0);console.log("Sales with employee salary:",bt.length),console.log("Sales with salary data:",bt.map(ht=>({date:ht.date,salary:ht.employeeSalary})));const Vt=fe.reduce((ht,Pe)=>ht+(Pe.employeeSalary||0),0);console.log("Total contract worker expenses:",Vt),console.log(" === END CONTRACT WORKER SALARY DEBUG ===");let gr=0;if(console.log(" === PERMANENT EMPLOYEE SALARY DEBUG ==="),console.log("Time filter:",W),console.log("Total filteredPayoutsData:",Dt.length),console.log("Payouts data:",Dt),console.log("Filtered employees:",ut.length),W==="thisMonth"||W==="lastMonth"||W==="custom"){let ht=Dt;if(_){const Pe=ut.map(wt=>wt.id);ht=ht.filter(wt=>Pe.includes(wt.employeeId)),console.log("Store filtered payouts:",ht.length)}console.log("Relevant payouts for calculation:",ht),gr=ht.reduce((Pe,wt)=>{const Er=ut.find(ir=>ir.id===wt.employeeId);return console.log("Processing payout:",wt.id,"employeeId:",wt.employeeId,"amount:",wt.amount,"employee found:",Er?`${Er.name} (${Er.type})`:"NOT FOUND"),Er&&Er.type==="fulltime"?(console.log("   Including permanent employee payout:",wt.amount),Pe+(wt.amount||0)):(console.log("   Skipping (not fulltime or employee not found)"),Pe)},0),console.log("Total permanent employee expenses calculated:",gr)}else console.log("Skipping permanent employee calculation - time filter is:",W);console.log(" === END PERMANENT EMPLOYEE SALARY DEBUG ===");const Lr=Vt+gr,hr=et+Ue+Lr,$t=()=>{const ht=new Date;switch(W){case"today":const Pe=Na();return{startDate:Pe,endDate:Pe};case"yesterday":const wt=new Date;wt.setDate(wt.getDate()-1);const Er=wt.toISOString().split("T")[0];return{startDate:Er,endDate:Er};case"thisWeek":const ir=new Date(ht);return ir.setDate(ht.getDate()-ht.getDay()),{startDate:ir.toISOString().split("T")[0],endDate:Na()};case"lastWeek":const Fr=new Date;Fr.setDate(Fr.getDate()-Fr.getDay()-1);const _r=new Date(Fr);return _r.setDate(Fr.getDate()-6),{startDate:_r.toISOString().split("T")[0],endDate:Fr.toISOString().split("T")[0]};case"thisMonth":return{startDate:`${new Date().toISOString().slice(0,7)}-01`,endDate:Na()};case"lastMonth":const Kr=new Date;Kr.setMonth(Kr.getMonth()-1);const Zr=Kr.toISOString().slice(0,7),zs=new Date(Kr.getFullYear(),Kr.getMonth()+1,0).getDate();return{startDate:`${Zr}-01`,endDate:`${Zr}-${zs}`};case"custom":return{startDate:X.from,endDate:X.to};default:return{startDate:Na(),endDate:Na()}}},{startDate:Nr,endDate:Or}=$t(),ar=pr(Nr,Or,_||void 0);console.log(" Interest expense for period:",ar.toFixed(2));const zr=be+je+hr+ct+ar,tt=U-zr,Wt=U>0?tt/U*100:0;return console.log("Total expenses:",zr),console.log("Commission expenses:",ct),console.log("Net profit:",tt),console.log(" === END METRICS DEBUG ==="),{totalRevenue:U,onlineRevenue:we,offlineRevenue:he,commissionExpenses:ct,interestExpenses:ar,totalExpenses:zr,inventoryExpenses:be,overheadExpenses:je,fixedCostsTotal:hr,electricityExpenses:et,rentExpenses:Ue,salaryExpenses:Lr,contractWorkerExpenses:Vt,permanentEmployeeExpenses:gr,netProfit:tt,profitMargin:Wt}},Ve=P.useMemo(()=>rr(),[fe,_e,nt,xt,Dt,f,W,X]),vt=()=>{const U={};return fe.forEach(we=>{const be=new Date(we.date).toLocaleString("default",{month:"short"});U[be]||(U[be]={month:be,revenue:0,expenses:0,profit:0});const je=(we.paytmAmount||0)+(we.cashAmount||0)+(we.onlineSales||0);U[be].revenue+=je}),_e.forEach(we=>{const be=new Date(we.date).toLocaleString("default",{month:"short"});U[be]||(U[be]={month:be,revenue:0,expenses:0,profit:0}),U[be].expenses+=we.totalCost||0}),nt.forEach(we=>{const be=new Date(we.date).toLocaleString("default",{month:"short"});U[be]||(U[be]={month:be,revenue:0,expenses:0,profit:0}),U[be].expenses+=we.amount||0}),Object.keys(U).forEach(we=>{U[we].profit=U[we].revenue-U[we].expenses}),Object.values(U)};P.useMemo(()=>vt(),[fe,_e,nt]);const Ft=()=>{const U=new Date,we=new Date(U.getFullYear(),U.getMonth(),U.getDate()),he=[],be=me=>{const de=me.getFullYear(),Me=String(me.getMonth()+1).padStart(2,"0"),Je=String(me.getDate()).padStart(2,"0");return`${de}-${Me}-${Je}`},je=me=>{const de=be(me),Me=me.toLocaleDateString("default",{month:"short",day:"numeric"}),Je=fe.filter(Lr=>Lr.date===de),ct=Je.reduce((Lr,hr)=>Lr+(hr.onlineSales||0),0),Ue=s.filter(Lr=>Lr.date===de).reduce((Lr,hr)=>Lr+(hr.swiggySales||0)+(hr.zomatoSales||0),0),bt=ct+Ue,Vt=Je.reduce((Lr,hr)=>Lr+(hr.paytmAmount||0)+(hr.cashAmount||0),0),gr=bt+Vt;he.push({period:Me,online:bt,offline:Vt,total:gr})};if(W==="today")je(we);else if(W==="yesterday"){const me=new Date(we);me.setDate(me.getDate()-1),je(me)}else if(W==="thisWeek"){const me=we.getDay(),de=me===0?-6:1-me,Me=new Date(we);Me.setDate(we.getDate()+de);let Je=new Date(Me);for(;Je<=we;)je(new Date(Je)),Je.setDate(Je.getDate()+1)}else if(W==="thisMonth"){const me=new Date(we.getFullYear(),we.getMonth(),1);let de=new Date(me);for(;de<=we;)je(new Date(de)),de.setDate(de.getDate()+1)}else if(W==="lastWeek"){const me=we.getDay(),de=me===0?-13:-(me+6),Me=new Date(we);Me.setDate(we.getDate()+de);let Je=new Date(Me);for(let ct=0;ct<7;ct++)je(new Date(Je)),Je.setDate(Je.getDate()+1)}else if(W==="lastMonth"){const me=new Date(we.getFullYear(),we.getMonth()-1,1),de=new Date(we.getFullYear(),we.getMonth(),0);let Me=new Date(me);for(;Me<=de;)je(new Date(Me)),Me.setDate(Me.getDate()+1)}else if(W==="custom"){const me={};return fe.forEach(de=>{const Je=new Date(de.date).toLocaleDateString("default",{month:"short",year:"2-digit"});me[Je]||(me[Je]={period:Je,online:0,offline:0,total:0});const ct=de.onlineSales||0,et=(de.paytmAmount||0)+(de.cashAmount||0);me[Je].online+=ct,me[Je].offline+=et,me[Je].total+=ct+et}),s.forEach(de=>{const Je=new Date(de.date).toLocaleDateString("default",{month:"short",year:"2-digit"});me[Je]||(me[Je]={period:Je,online:0,offline:0,total:0});const ct=(de.swiggySales||0)+(de.zomatoSales||0);me[Je].online+=ct,me[Je].total+=ct}),Object.values(me)}return he},ua=P.useMemo(()=>Ft(),[fe,s,W]),Ws=()=>{const U={};console.log(" === CHART DATA PREPARATION DEBUG ==="),fe.forEach(je=>{const me=je.date;U[me]||(U[me]={revenue:0,expenses:0,profit:0});const de=(je.paytmAmount||0)+(je.cashAmount||0)+(je.onlineSales||0);U[me].revenue+=de,U[me].expenses+=je.employeeSalary||0});const we=s.filter(je=>{const me=(()=>{switch(W){case"today":return je.date===Na();case"yesterday":const Me=new Date;return Me.setDate(Me.getDate()-1),je.date===Me.toISOString().split("T")[0];case"thisWeek":const Je=new Date,ct=new Date(Je);return ct.setDate(Je.getDate()-Je.getDay()),new Date(je.date)>=ct&&new Date(je.date)<=Je;case"lastWeek":const et=new Date;et.setDate(et.getDate()-et.getDay()-1);const Ue=new Date(et);return Ue.setDate(et.getDate()-6),new Date(je.date)>=Ue&&new Date(je.date)<=et;case"thisMonth":const bt=new Date().toISOString().slice(0,7);return je.date.startsWith(bt);case"lastMonth":const Vt=new Date;Vt.setMonth(Vt.getMonth()-1);const gr=Vt.toISOString().slice(0,7);return je.date.startsWith(gr);case"custom":return je.date>=X.from&&je.date<=X.to;default:return!0}})(),de=_?je.storeId===_:!0;return me&&de}),he=o.filter(je=>{const me=(()=>{switch(W){case"today":return je.date===Na();case"yesterday":const Me=new Date;return Me.setDate(Me.getDate()-1),je.date===Me.toISOString().split("T")[0];case"thisWeek":const Je=new Date,ct=new Date(Je);return ct.setDate(Je.getDate()-Je.getDay()),new Date(je.date)>=ct&&new Date(je.date)<=Je;case"lastWeek":const et=new Date;et.setDate(et.getDate()-et.getDay()-1);const Ue=new Date(et);return Ue.setDate(et.getDate()-6),new Date(je.date)>=Ue&&new Date(je.date)<=et;case"thisMonth":const bt=new Date().toISOString().slice(0,7);return je.date.startsWith(bt);case"lastMonth":const Vt=new Date;Vt.setMonth(Vt.getMonth()-1);const gr=Vt.toISOString().slice(0,7);return je.date.startsWith(gr);case"custom":return je.date>=X.from&&je.date<=X.to;default:return!0}})(),de=_?je.storeId===_:!0;return me&&de});we.forEach(je=>{const me=je.date;U[me]||(U[me]={revenue:0,expenses:0,profit:0});const de=(je.swiggySales||0)+(je.zomatoSales||0);U[me].onlineSales||(U[me].onlineSales=0),U[me].onlineSales+=de}),he.forEach(je=>{const me=je.date;U[me]||(U[me]={revenue:0,expenses:0,profit:0});const de=(je.swiggyPayout||0)+(je.zomatoPayout||0);U[me].onlinePayouts||(U[me].onlinePayouts=0),U[me].onlinePayouts+=de}),Object.keys(U).forEach(je=>{const me=U[je].onlineSales||0,de=U[je].onlinePayouts||0,Me=me-de;U[je].expenses+=Me,console.log(`Date ${je}: onlineSales=${me}, onlinePayouts=${de}, commission=${Me}`)}),_e.forEach(je=>{const me=je.date;U[me]||(U[me]={revenue:0,expenses:0,profit:0}),U[me].expenses+=je.totalCost||0}),nt.forEach(je=>{const me=je.date;U[me]||(U[me]={revenue:0,expenses:0,profit:0}),U[me].expenses+=je.amount||0}),xt.forEach(je=>{const me=je.date;U[me]||(U[me]={revenue:0,expenses:0,profit:0}),U[me].expenses+=je.amount||0}),Dt.forEach(je=>{const me=je.date;U[me]||(U[me]={revenue:0,expenses:0,profit:0});const de=ut.find(Me=>Me.id===je.employeeId);de&&de.type==="fulltime"&&(U[me].expenses+=je.amount||0)});const be=Object.keys(U).sort().map(je=>{const me=U[je],de=me.revenue-me.expenses;return console.log(`Chart data for ${je}: revenue=${me.revenue}, expenses=${me.expenses}, profit=${de}`),{period:new Date(je).toLocaleDateString("en-IN",{month:"short",day:"numeric"}),revenue:Math.round(me.revenue),expenses:Math.round(me.expenses),profit:Math.round(de)}});return console.log(" === END CHART DATA DEBUG ==="),be},Ua=P.useMemo(()=>Ws(),[fe,_e,nt,xt,Dt,ut,s,o,W,_,X]),Sa=(()=>{const U={},we={},he={};return _e.forEach(je=>{const me=je.category||"Other";let de=wg[me]||me;(me==="meat"||me==="dairy")&&(de=" Meat & Dairy"),U[de]||(U[de]=0,we[de]=[],he[de]="inventory"),U[de]+=je.totalCost||0,we[de].push(je)}),nt.forEach(je=>{if(b(je))return;const me=je.category||"Other",de=_2[me]||me;U[de]||(U[de]=0,we[de]=[],he[de]="overhead"),U[de]+=je.amount||0,we[de].push(je)}),xt.forEach(je=>{const me=je.category||"Other",de=E2[me]||me;U[de]||(U[de]=0,we[de]=[],he[de]="fixed"),U[de]+=je.amount||0,we[de].push(je)}),Ve.salaryExpenses>0&&(U[" Salaries"]=Ve.salaryExpenses,we[" Salaries"]=[],he[" Salaries"]="salary"),Ve.commissionExpenses>0&&(U[" Aggregator Commission"]=Ve.commissionExpenses,we[" Aggregator Commission"]=[],he[" Aggregator Commission"]="commission"),Ve.interestExpenses>0&&(U[" Loan Interest"]=Ve.interestExpenses,we[" Loan Interest"]=[],he[" Loan Interest"]="interest"),Object.keys(U).map(je=>({name:je,value:U[je],percentage:parseFloat((U[je]/Ve.totalExpenses*100).toFixed(1)),items:we[je]||[],type:he[je]})).sort((je,me)=>me.value-je.value)})(),jr=["#ec4899","#a78bfa","#fbbf24","#34d399","#60a5fa","#f87171","#fb923c","#8b5cf6","#10b981","#f59e0b"],es=fe.filter(we=>we.approvalRequired===!1&&we.approvedBy).reduce((we,he)=>{const be=he.salesDiscrepancy!==void 0?he.salesDiscrepancy:he.cashOffset||0;return we+(be<0?Math.abs(be):0)},0),Rl=Ve.netProfit,Fn=Rl-es;return a.jsxs("div",{className:"min-h-screen bg-gray-50 p-3 sm:p-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-4 sm:mb-8 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl text-gray-900 mb-1 sm:mb-2",children:"Analytics Dashboard"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Track revenue, expenses, and profitability"})]}),y&&!1]}),!Te&&(e.user?.role==="cluster_head"||e.user?.role==="manager")&&a.jsx("div",{onClick:()=>Ee(!0),className:`mb-4 sm:mb-6 rounded-lg shadow-sm border-2 p-4 transition-all cursor-pointer hover:shadow-md ${I===0?"bg-green-50 border-green-200 hover:bg-green-100":"bg-orange-50 border-orange-200 hover:bg-orange-100"}`,children:a.jsx("div",{className:"flex items-center gap-3",children:I===0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(La,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-green-900",children:[a.jsx("span",{className:"text-green-600",children:""})," Everyone is working today"]}),a.jsx("p",{className:"text-sm text-green-700 mt-0.5",children:e.user.storeId?"No employees on leave in this store":"No employees on leave across all stores"})]}),a.jsx("div",{className:"text-green-600 text-sm",children:"Click to view"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:a.jsx(QE,{className:"w-5 h-5 text-orange-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-orange-900",children:[a.jsx("span",{className:"text-orange-700",children:I})," ",I===1?"person is":"people are"," on leave today"]}),a.jsx("p",{className:"text-sm text-orange-700 mt-0.5",children:e.user.storeId?"In this store":"Across all stores"})]}),a.jsx("div",{className:"text-orange-600 text-sm",children:"Click to view details"})]})})}),(y||v||S||w||k)&&a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl shadow-lg mb-6 p-4 border border-purple-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-purple-900",style:{fontSize:"16px",fontWeight:"700"},children:w?"Store Analytics Dashboard":k?"Audit Analytics Dashboard":"Analytics Dashboard"}),!w&&a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-1 shadow-sm",children:[a.jsx("button",{onClick:()=>C("store"),className:`px-4 py-2 rounded-md transition-all duration-200 ${A==="store"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Sd,{className:"w-4 h-4"}),a.jsx("span",{style:{fontSize:"14px",fontWeight:"600"},children:"Store Analytics"})]})}),a.jsx("button",{onClick:()=>C("production"),className:`px-4 py-2 rounded-md transition-all duration-200 ${A==="production"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Za,{className:"w-4 h-4"}),a.jsx("span",{style:{fontSize:"14px",fontWeight:"600"},children:"Production Analytics"})]})})]})]}),a.jsx("p",{className:"text-purple-700 text-sm",children:A==="store"?"Track revenue, expenses, and profitability across stores":"Monitor production metrics, wastage, and SOP compliance"})]}),A==="store"&&a.jsx(a.Fragment,{children:y||v||S||k?a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Store Selection"}),a.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Select a store to view its analytics data"})]}),a.jsxs("select",{value:N||"",onChange:U=>E(U.target.value||null),className:"px-4 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"14px",fontWeight:"600"},children:[a.jsx("option",{value:"",children:"All Stores"}),e.stores?.map(U=>a.jsxs("option",{value:U.id,children:[U.name," (ID: ",U.id,")"]},U.id))]})]})}):e.user?.storeId&&a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Sd,{className:"w-6 h-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Your Store Analytics"}),a.jsxs("p",{className:"text-blue-700 text-sm mt-1",children:["Viewing data for: ",e.stores?.find(U=>U.id===e.user?.storeId)?.name||"Your Store"]})]})]})})}),A==="production"&&a.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl shadow-lg mb-6 p-4 border border-orange-200",children:y||v||k?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-orange-900",style:{fontSize:"16px",fontWeight:"700"},children:"Production House Selection"}),a.jsx("p",{className:"text-orange-700 text-sm mt-1",children:"View production metrics and recalibration data for a specific production house"})]}),a.jsxs("select",{value:Pt||"",onChange:U=>{const we=U.target.value||null;console.log(" Production Analytics - Production House Selector Changed:",we),Dr(we)},className:"px-4 py-2 bg-white border-2 border-orange-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500",style:{fontSize:"14px",fontWeight:"600"},children:[!Pt&&a.jsx("option",{value:"",children:"Select Production House"}),e.productionHouses?.map(U=>a.jsxs("option",{value:U.id,children:[U.name," (ID: ",U.id,")"]},U.id))]})]}):S&&e.user?.storeId?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Za,{className:"w-6 h-6 text-orange-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-orange-900",style:{fontSize:"16px",fontWeight:"700"},children:"Your Production House Analytics"}),a.jsxs("p",{className:"text-orange-700 text-sm mt-1",children:["Viewing data for: ",(()=>{const U=e.stores?.find(he=>he.id===e.user?.storeId);return e.productionHouses?.find(he=>he.id===U?.productionHouseId)?.name||"Your Production House"})()]})]})]}):null}),a.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl shadow-lg mb-6 p-2 border border-gray-200",children:A==="store"?a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-2",children:[a.jsxs("button",{onClick:()=>B("profit"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${O==="profit"?"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-lg shadow-emerald-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(fa,{className:`w-6 h-6 ${O==="profit"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Profit Analysis"})]}),O==="profit"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-emerald-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>B("expense"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${O==="expense"?"bg-gradient-to-br from-rose-500 to-rose-600 text-white shadow-lg shadow-rose-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(ca,{className:`w-6 h-6 ${O==="expense"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Expenses"})]}),O==="expense"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-rose-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>B("sales"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${O==="sales"?"bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(Sd,{className:`w-6 h-6 ${O==="sales"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Sales"})]}),O==="sales"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-blue-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>B("datacapture"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${O==="datacapture"?"bg-gradient-to-br from-purple-500 to-purple-600 text-white shadow-lg shadow-purple-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(Zt,{className:`w-6 h-6 ${O==="datacapture"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Data Capture"})]}),O==="datacapture"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-purple-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>B("production-requests"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${O==="production-requests"?"bg-gradient-to-br from-indigo-500 to-indigo-600 text-white shadow-lg shadow-indigo-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(W9,{className:`w-6 h-6 ${O==="production-requests"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Stock Requests"})]}),O==="production-requests"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-indigo-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>B("store-recalibration"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${O==="store-recalibration"?"bg-gradient-to-br from-teal-500 to-teal-600 text-white shadow-lg shadow-teal-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(lr,{className:`w-6 h-6 ${O==="store-recalibration"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Recalibration"})]}),O==="store-recalibration"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-teal-500 rounded-full"})]})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("button",{onClick:()=>B("production"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${O==="production"?"bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(Za,{className:`w-6 h-6 ${O==="production"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Production"})]}),O==="production"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-orange-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>{console.log(" Recalibration button clicked!"),B("recalibration-reports")},className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${O==="recalibration-reports"?"bg-gradient-to-br from-teal-500 to-teal-600 text-white shadow-lg shadow-teal-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(lr,{className:`w-6 h-6 ${O==="recalibration-reports"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Recalibration"})]}),O==="recalibration-reports"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-teal-500 rounded-full"})]})]})}),O==="profit"&&a.jsx("div",{children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Profit Analysis"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Revenue, expenses, and profit breakdown"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[a.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"thisWeek",label:"This Week"},{value:"thisMonth",label:"This Month"},{value:"lastWeek",label:"Last Week"},{value:"lastMonth",label:"Last Month"},{value:"custom",label:"Custom"}].map(U=>a.jsx("button",{onClick:()=>ee(U.value),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${W===U.value?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:U.label},U.value))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>{const U=e.stores?.find(we=>we.id===t)?.name||"All_Stores";Qge({salesData:fe,inventoryData:_e,overheadData:nt,metrics:Ve,storeName:U,dateRange:W==="custom"?X:void 0}),Qt.success("Analytics report exported!")},className:"px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-1.5 text-xs sm:text-sm whitespace-nowrap",children:[a.jsx(Ms,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Export"}),a.jsx("span",{className:"sm:hidden",children:"JSON"})]}),a.jsxs("button",{onClick:()=>{const U=e.stores?.find(we=>we.id===t)?.name||"All_Stores";Zge({salesData:fe,inventoryData:_e,overheadData:nt,storeName:U}),Qt.success("Data exported as CSV files!")},className:"px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-1.5 text-xs sm:text-sm whitespace-nowrap",children:[a.jsx(ks,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"CSV"})]})]})]})]}),W==="custom"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ur,{className:"w-4 h-4 text-gray-500"}),a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),a.jsx("input",{type:"date",value:X.from,onChange:U=>L({...X,from:U.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),a.jsx("input",{type:"date",value:X.to,onChange:U=>L({...X,to:U.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-blue-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Revenue"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",Ve.totalRevenue.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600",children:Xt()})]}),a.jsxs("div",{className:"bg-red-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Expenses"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",Ve.totalExpenses.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600",children:Xt()})]}),a.jsxs("div",{className:"bg-orange-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Aggregator Commission"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",Ve.commissionExpenses.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600",children:Ve.onlineRevenue>0?`${(Ve.commissionExpenses/Ve.onlineRevenue*100).toFixed(1)}% of online`:"No data"})]}),a.jsxs("div",{className:"bg-green-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Net Profit"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",Fn.toLocaleString()]}),Ve.totalRevenue>0?a.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[a.jsx(fa,{className:"w-3 h-3"}),"Includes commission"]}):a.jsx("div",{className:"text-xs text-gray-600",children:"No data yet"})]}),a.jsxs("div",{className:"bg-yellow-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Profit Margin"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:[Ve.profitMargin.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-gray-600",children:"Of total revenue"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8 border-2 border-indigo-200",children:[a.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(fa,{className:"w-5 h-5 text-indigo-600"}),"Profit Breakdown"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"Unrealized Profit"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-indigo-600 mb-2",children:["",Rl.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-500",children:"Before cash discrepancies"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"Cash Discrepancy (Loss)"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-red-600 mb-2",children:["-",es.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-500",children:"Approved losses"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border-2 border-green-300",children:[a.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 mb-2 flex items-center gap-1",children:["Realized Profit",a.jsx("span",{className:"text-xs text-green-600",children:"(Actual)"})]}),a.jsxs("div",{className:"text-xl sm:text-2xl text-green-600 mb-2",children:["",Fn.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-500",children:Ve.totalRevenue>0?`${(Fn/Ve.totalRevenue*100).toFixed(1)}% margin`:"No data yet"})]})]}),es>0&&a.jsx("div",{className:"mt-4 bg-amber-50 border border-amber-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Ar,{className:"w-4 h-4 text-amber-600 mt-0.5"}),a.jsxs("div",{className:"text-xs text-amber-800",children:[a.jsx("strong",{children:"Impact:"})," Cash discrepancies represent actual cash shortages that have been approved by management and reduce the realized profit by ",es.toLocaleString(),"."]})]})})]}),a.jsxs("div",{className:"mb-6 sm:mb-8 overflow-x-auto",children:[a.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:["Daily Performance - ",Xt()]}),a.jsx("div",{className:"min-w-[300px]",children:a.jsx(zn,{width:"100%",height:300,children:a.jsxs(Fd,{data:Ua,children:[a.jsx(bs,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(Dn,{dataKey:"period",stroke:"#666",tick:{fontSize:11}}),a.jsx(jn,{stroke:"#666",tick:{fontSize:11}}),a.jsx(Ea,{content:a.jsx(Vm,{})}),a.jsx(Ss,{wrapperStyle:{fontSize:"12px"}}),a.jsx(ss,{type:"monotone",dataKey:"revenue",stroke:"#8b5cf6",strokeWidth:2.5,name:"Revenue",dot:{fill:"#8b5cf6",r:4}}),a.jsx(ss,{type:"monotone",dataKey:"expenses",stroke:"#ef4444",strokeWidth:2.5,name:"Expenses",dot:{fill:"#ef4444",r:4}}),a.jsx(ss,{type:"monotone",dataKey:"profit",stroke:"#10b981",strokeWidth:2.5,name:"Profit",dot:{fill:"#10b981",r:4}})]})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[a.jsx(fa,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"}),a.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Daily Profitability"})]}),Ua.length>0?a.jsxs(a.Fragment,{children:[a.jsx(zn,{width:"100%",height:200,children:a.jsxs(pc,{data:Ua,children:[a.jsx(bs,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(Dn,{dataKey:"period",stroke:"#666",tick:{fontSize:10}}),a.jsx(jn,{stroke:"#666",tick:{fontSize:10}}),a.jsx(Ea,{content:a.jsx(Vm,{})}),a.jsx(hn,{dataKey:"profit",fill:"#10b981",name:"Daily Profit",radius:[4,4,0,0]})]})}),a.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Best Day"}),a.jsx("div",{className:"text-sm font-bold text-green-600",children:Ua.length>0?`${Math.max(...Ua.map(U=>U.profit)).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Worst Day"}),a.jsx("div",{className:"text-sm font-bold text-red-600",children:Ua.length>0?`${Math.min(...Ua.map(U=>U.profit)).toLocaleString()}`:"N/A"})]})]})]}):a.jsx("div",{className:"text-center text-gray-500 py-8",children:"No data available"})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[a.jsx(ca,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600"}),a.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Profitability Metrics"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-purple-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Profit Margin"}),a.jsxs("div",{className:`text-lg font-bold ${Ve.profitMargin>30?"text-green-600":Ve.profitMargin>15?"text-yellow-600":"text-red-600"}`,children:[Ve.profitMargin.toFixed(1),"%"]})]}),a.jsx("div",{className:"text-xs text-gray-600",children:Ve.profitMargin>30?" Excellent":Ve.profitMargin>15?" Good":Ve.profitMargin>0?" Low":" Loss"})]}),a.jsxs("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Cost-to-Revenue"}),a.jsx("div",{className:`text-lg font-bold ${Ve.totalRevenue>0&&Ve.totalExpenses/Ve.totalRevenue<.7?"text-green-600":"text-orange-600"}`,children:Ve.totalRevenue>0?`${(Ve.totalExpenses/Ve.totalRevenue*100).toFixed(1)}%`:"N/A"})]}),a.jsx("div",{className:"text-xs text-gray-600",children:Ve.totalRevenue>0&&Ve.totalExpenses/Ve.totalRevenue<.7?" Efficient operations":" High cost ratio"})]}),a.jsxs("div",{className:"bg-green-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Avg Daily Profit"}),a.jsx("div",{className:"text-lg font-bold text-green-600",children:Ua.length>0?`${Math.round(Ua.reduce((U,we)=>U+we.profit,0)/Ua.length).toLocaleString()}`:"N/A"})]}),a.jsx("div",{className:"text-xs text-gray-600",children:"Per day in selected period"})]}),Ve.commissionExpenses>0&&a.jsxs("div",{className:"bg-orange-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Commission Impact"}),a.jsx("div",{className:"text-lg font-bold text-orange-600",children:Ve.totalRevenue>0?`${(Ve.commissionExpenses/(Ve.totalRevenue+Ve.commissionExpenses)*100).toFixed(1)}%`:"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-600",children:["",Ve.commissionExpenses.toLocaleString()," paid to aggregators"]})]})]})]})]})]})}),O==="expense"&&a.jsx("div",{children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Expense Breakdown"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Detailed analysis of all expenses by category"})]}),a.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"thisWeek",label:"This Week"},{value:"thisMonth",label:"This Month"},{value:"lastWeek",label:"Last Week"},{value:"lastMonth",label:"Last Month"},{value:"custom",label:"Custom"}].map(U=>a.jsx("button",{onClick:()=>ee(U.value),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${W===U.value?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:U.label},U.value))})]}),W==="custom"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ur,{className:"w-4 h-4 text-gray-500"}),a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),a.jsx("input",{type:"date",value:X.from,onChange:U=>L({...X,from:U.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),a.jsx("input",{type:"date",value:X.to,onChange:U=>L({...X,to:U.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-100 to-red-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Expenses"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ve.totalExpenses.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-pink-100 to-pink-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Inventory Costs"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ve.inventoryExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(Ve.inventoryExpenses/Ve.totalExpenses*100).toFixed(1),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Overhead Costs"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ve.overheadExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(Ve.overheadExpenses/Ve.totalExpenses*100).toFixed(1),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Commission"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ve.commissionExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[Ve.totalExpenses>0?(Ve.commissionExpenses/Ve.totalExpenses*100).toFixed(1):"0.0","% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-indigo-100 to-indigo-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Fixed Costs"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",(Ve.fixedCostsTotal||0).toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[((Ve.fixedCostsTotal||0)/Ve.totalExpenses*100).toFixed(1),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Salary Costs"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ve.salaryExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(Ve.salaryExpenses/Ve.totalExpenses*100).toFixed(1),"% of total"]})]})]}),a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Expense Distribution"}),a.jsxs("div",{className:"relative mb-8",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl blur-xl opacity-50"}),a.jsx("div",{className:"relative bg-white rounded-2xl p-8 shadow-lg",children:a.jsx(zn,{width:"100%",height:500,children:a.jsxs(k$,{children:[a.jsx("defs",{children:jr.map((U,we)=>a.jsxs("linearGradient",{id:`gradient-${we}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:U,stopOpacity:.9}),a.jsx("stop",{offset:"100%",stopColor:U,stopOpacity:.7})]},`gradient-${we}`))}),a.jsx(so,{data:Sa,cx:"50%",cy:"50%",labelLine:{stroke:"#666",strokeWidth:1.5,strokeDasharray:"3 3"},label:({name:U,percentage:we})=>`${U}: ${we}%`,outerRadius:180,innerRadius:90,fill:"#8884d8",dataKey:"value",paddingAngle:3,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:Sa.map((U,we)=>a.jsx(Jd,{fill:`url(#gradient-${we%jr.length})`,stroke:"#fff",strokeWidth:4},`cell-${we}`))}),a.jsx(Ea,{content:a.jsx(txe,{})})]})})})]}),a.jsxs("div",{className:"space-y-6",children:[Sa.filter(U=>U.type==="inventory").length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2 px-2",children:" Inventory Items"}),a.jsx("div",{className:"space-y-2",children:Sa.filter(U=>U.type==="inventory").map((U,we)=>{const he=Sa.indexOf(U);return a.jsxs("div",{className:"group border border-gray-200 rounded-lg p-3 hover:shadow-md hover:border-gray-300 transition-all cursor-pointer bg-white",onClick:()=>{D({category:U.name,items:U.items||[],amount:U.value})},children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:`linear-gradient(135deg, ${jr[he%jr.length]}, ${jr[(he+1)%jr.length]})`}}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:U.name})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["",U.value.toLocaleString()]}),a.jsxs("span",{className:"text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-1 rounded min-w-[3rem] text-center",children:[U.percentage,"%"]})]})]}),a.jsx("div",{className:"mt-2 h-1 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${U.percentage}%`,background:`linear-gradient(90deg, ${jr[he%jr.length]}, ${jr[(he+1)%jr.length]})`}})})]},U.name)})})]}),Sa.filter(U=>U.type==="overhead").length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2 px-2",children:" Overhead Costs"}),a.jsx("div",{className:"space-y-2",children:Sa.filter(U=>U.type==="overhead").map((U,we)=>{const he=Sa.indexOf(U);return a.jsxs("div",{className:"group border border-gray-200 rounded-lg p-3 hover:shadow-md hover:border-gray-300 transition-all cursor-pointer bg-white",onClick:()=>{D({category:U.name,items:U.items||[],amount:U.value})},children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:`linear-gradient(135deg, ${jr[he%jr.length]}, ${jr[(he+1)%jr.length]})`}}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:U.name})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["",U.value.toLocaleString()]}),a.jsxs("span",{className:"text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-1 rounded min-w-[3rem] text-center",children:[U.percentage,"%"]})]})]}),a.jsx("div",{className:"mt-2 h-1 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${U.percentage}%`,background:`linear-gradient(90deg, ${jr[he%jr.length]}, ${jr[(he+1)%jr.length]})`}})})]},U.name)})})]}),Sa.filter(U=>U.type==="fixed").length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2 px-2",children:" Fixed Costs"}),a.jsx("div",{className:"space-y-2",children:Sa.filter(U=>U.type==="fixed").map((U,we)=>{const he=Sa.indexOf(U);return a.jsxs("div",{className:"group border border-gray-200 rounded-lg p-3 hover:shadow-md hover:border-gray-300 transition-all cursor-pointer bg-white",onClick:()=>{D({category:U.name,items:U.items||[],amount:U.value})},children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:`linear-gradient(135deg, ${jr[he%jr.length]}, ${jr[(he+1)%jr.length]})`}}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:U.name})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["",U.value.toLocaleString()]}),a.jsxs("span",{className:"text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-1 rounded min-w-[3rem] text-center",children:[U.percentage,"%"]})]})]}),a.jsx("div",{className:"mt-2 h-1 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${U.percentage}%`,background:`linear-gradient(90deg, ${jr[he%jr.length]}, ${jr[(he+1)%jr.length]})`}})})]},U.name)})})]}),Sa.filter(U=>U.type==="salary").length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2 px-2",children:" Salaries"}),a.jsx("div",{className:"space-y-2",children:Sa.filter(U=>U.type==="salary").map((U,we)=>{const he=Sa.indexOf(U);return a.jsxs("div",{className:"group border border-gray-200 rounded-lg p-3 hover:shadow-md hover:border-gray-300 transition-all cursor-pointer bg-white",onClick:()=>{D({category:U.name,items:U.items||[],amount:U.value})},children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:`linear-gradient(135deg, ${jr[he%jr.length]}, ${jr[(he+1)%jr.length]})`}}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:U.name})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["",U.value.toLocaleString()]}),a.jsxs("span",{className:"text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-1 rounded min-w-[3rem] text-center",children:[U.percentage,"%"]})]})]}),a.jsx("div",{className:"mt-2 h-1 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${U.percentage}%`,background:`linear-gradient(90deg, ${jr[he%jr.length]}, ${jr[(he+1)%jr.length]})`}})})]},U.name)})})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Salary Breakdown"}),(W==="thisMonth"||W==="lastMonth"||W==="custom")&&Ve.permanentEmployeeExpenses>0&&a.jsx("div",{className:"mb-3 bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Ar,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("p",{className:"text-xs text-blue-800",children:[a.jsx("strong",{children:"Note:"})," Permanent employee salaries (",Ve.permanentEmployeeExpenses.toLocaleString(),") are monthly payouts and included in this view. Contract worker wages are date-filtered."]})]})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Contract Workers"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",Ve.contractWorkerExpenses.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Daily wages from sales data"})]}),a.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Permanent Employees"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",Ve.permanentEmployeeExpenses.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:W==="thisMonth"||W==="lastMonth"||W==="custom"?"Total monthly salary payouts (all periods)":"Only shown in monthly views"})]})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Overhead Costs"}),a.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Total Overheads"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",Ve.overheadExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[(Ve.overheadExpenses/Ve.totalExpenses*100).toFixed(1),"% of total expenses"]}),a.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Fuel, travel, marketing, and other variable costs"})]})]})]}),a.jsxs("div",{className:"mt-6 sm:mt-8 border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Fixed Costs Breakdown"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-4",children:"Monthly fixed expenses breakdown"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Fixed Costs"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",Ve.fixedCostsTotal.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(Ve.fixedCostsTotal/Ve.totalExpenses*100).toFixed(1),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Electricity"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",Ve.electricityExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[Ve.fixedCostsTotal>0?(Ve.electricityExpenses/Ve.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Rent"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",Ve.rentExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[Ve.fixedCostsTotal>0?(Ve.rentExpenses/Ve.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Salaries"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",Ve.salaryExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[Ve.fixedCostsTotal>0?(Ve.salaryExpenses/Ve.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsx("div",{className:"min-w-[300px]",children:a.jsx(zn,{width:"100%",height:280,children:a.jsxs(pc,{data:[{name:" Electricity",amount:Ve.electricityExpenses,fill:"#fbbf24"},{name:" Rent",amount:Ve.rentExpenses,fill:"#fb923c"},{name:" Salaries",amount:Ve.salaryExpenses,fill:"#a78bfa"}],barCategoryGap:"30%",children:[a.jsx(bs,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(Dn,{dataKey:"name",stroke:"#666",tick:{fontSize:12}}),a.jsx(jn,{stroke:"#666",tick:{fontSize:12}}),a.jsx(Ea,{content:a.jsx(Vm,{})}),a.jsx(hn,{dataKey:"amount",name:"Amount",radius:[8,8,0,0],maxBarSize:80,children:[{name:" Electricity",amount:Ve.electricityExpenses,fill:"#fbbf24"},{name:" Rent",amount:Ve.rentExpenses,fill:"#fb923c"},{name:" Salaries",amount:Ve.salaryExpenses,fill:"#a78bfa"}].map((U,we)=>a.jsx(Jd,{fill:U.fill},`cell-${we}`))})]})})})})]})]})}),O==="sales"&&a.jsxs("div",{children:[a.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-2 mb-6 border border-gray-200",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>ne("revenue"),className:`flex-1 px-6 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 ${H==="revenue"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Sd,{className:"w-5 h-5"}),a.jsx("span",{className:"font-semibold",children:"Revenue Tracking"})]})}),a.jsx("button",{onClick:()=>ne("category"),className:`flex-1 px-6 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 ${H==="category"?"bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow-lg":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Qm,{className:"w-5 h-5"}),a.jsx("span",{className:"font-semibold",children:"Category Sales"})]})})]})}),H==="revenue"&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Revenue Analytics"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Track daily revenue from Paytm, Cash, and Online sales"})]}),a.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"thisWeek",label:"This Week"},{value:"thisMonth",label:"This Month"},{value:"lastWeek",label:"Last Week"},{value:"lastMonth",label:"Last Month"},{value:"custom",label:"Custom"}].map(U=>a.jsx("button",{onClick:()=>ee(U.value),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${W===U.value?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:U.label},U.value))})]}),W==="custom"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ur,{className:"w-4 h-4 text-gray-500"}),a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),a.jsx("input",{type:"date",value:X.from,onChange:U=>L({...X,from:U.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),a.jsx("input",{type:"date",value:X.to,onChange:U=>L({...X,to:U.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Sales"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ve.totalRevenue.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600",children:Xt()})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Online Sales"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ve.onlineRevenue.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(Ve.onlineRevenue/Ve.totalRevenue*100).toFixed(0),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Offline Sales"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ve.offlineRevenue.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(Ve.offlineRevenue/Ve.totalRevenue*100).toFixed(0),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-amber-100 to-amber-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Net Profit"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Fn.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[Ve.totalRevenue>0?(Fn/Ve.totalRevenue*100).toFixed(1):"0.0","% margin"]})]})]}),a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:["Sales Trend - ",Xt()]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsx("div",{className:"min-w-[300px]",children:a.jsx(zn,{width:"100%",height:300,children:a.jsxs(pc,{data:ua,barCategoryGap:"25%",children:[a.jsx(bs,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(Dn,{dataKey:"period",stroke:"#666",tick:{fontSize:12}}),a.jsx(jn,{stroke:"#666",tick:{fontSize:12}}),a.jsx(Ea,{content:a.jsx(Vm,{})}),a.jsx(Ss,{wrapperStyle:{fontSize:"12px"}}),a.jsx(hn,{dataKey:"online",stackId:"a",fill:"#60a5fa",name:"Online Sales",radius:[0,0,0,0],maxBarSize:80}),a.jsx(hn,{dataKey:"offline",stackId:"a",fill:"#a78bfa",name:"Offline Sales",radius:[8,8,0,0],maxBarSize:80}),a.jsx(ss,{type:"monotone",dataKey:"total",stroke:"#f59e0b",strokeWidth:3,dot:{fill:"#f59e0b",r:5},name:"Total Sales Trend"})]})})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Sd,{className:"w-5 h-5 text-green-600"}),a.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Payment Methods"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Online Payments"}),a.jsxs("span",{className:"text-sm text-green-600",children:[(Ve.onlineRevenue/Ve.totalRevenue*100).toFixed(1),"%"]})]}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",Ve.onlineRevenue.toLocaleString()]})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Cash & Paytm"}),a.jsxs("span",{className:"text-sm text-blue-600",children:[(Ve.offlineRevenue/Ve.totalRevenue*100).toFixed(1),"%"]})]}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",Ve.offlineRevenue.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(fa,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Performance Insights"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Daily Revenue Average"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",fe.length>0?(Ve.totalRevenue/fe.length).toFixed(0):0]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Per day"})]}),a.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Daily Profit Average"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",fe.length>0?(Ve.netProfit/fe.length).toFixed(0):0]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Per day"})]}),a.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Best Performing Day"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",fe.length>0?Math.max(...fe.map(U=>(U.paytmAmount||0)+(U.cashAmount||0)+(U.onlineSales||0))).toLocaleString():0]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Highest daily revenue"})]})]})]})]})]}),H==="category"&&a.jsx(qge,{context:e,selectedStoreId:t})]}),O==="datacapture"&&a.jsx("div",{children:a.jsx(Fle,{context:e,selectedStoreId:t})}),O==="production"&&a.jsxs("div",{children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Production Date Range"}),a.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"View production data for a selected time period"})]}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"thisWeek",label:"This Week"},{value:"previousWeek",label:"Previous Week"},{value:"thisMonth",label:"This Month"},{value:"previousMonth",label:"Previous Month"},{value:"thisYear",label:"This Year"},{value:"previousYear",label:"Previous Year"},{value:"custom",label:"Custom Range"}].map(U=>a.jsx("button",{onClick:()=>q(U.value),className:`px-4 py-2 rounded-lg text-sm border-2 transition-all ${ft===U.value?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-blue-300 hover:border-blue-500"}`,style:{fontSize:"14px",fontWeight:"600"},children:U.label},U.value))})}),ft==="custom"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 bg-white/50 p-3 rounded-lg border border-blue-200",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-xs text-blue-700 block mb-1",children:"Start Date"}),a.jsx("input",{type:"date",value:oe,onChange:U=>ae(U.target.value),className:"w-full px-3 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-xs text-blue-700 block mb-1",children:"End Date"}),a.jsx("input",{type:"date",value:se,onChange:U=>K(U.target.value),className:"w-full px-3 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"bg-white/70 rounded-lg p-3 border border-blue-200",children:[a.jsx("div",{className:"text-xs text-blue-700 mb-1",children:"Selected Range:"}),a.jsx("div",{className:"text-sm text-blue-900 font-semibold",children:(()=>{const{startDate:U,endDate:we}=Y(),he=Kn(U),be=Kn(we);return U===we?he:`${he} - ${be}`})()})]})]})}),a.jsx("div",{className:"hidden",children:a.jsx("select",{value:xe||"",onChange:U=>it(U.target.value||null),className:"px-4 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"14px",fontWeight:"600"},children:(()=>{const U=Pt;return Ot.filter(he=>{if(!U)return!0;const be=he.storeId===U,je=he.productionHouseId===U,me=he.productionHouseId||he.storeId;return be||je||me===U}).map(he=>he.date).filter((he,be,je)=>je.indexOf(he)===be).sort((he,be)=>be.localeCompare(he)).map(he=>a.jsx("option",{value:he,children:Kn(he)},he))})()})}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 mb-6",children:(()=>{const U=Pt;console.log(" Production Summary Cards Filter Debug:"),console.log("  - analyticsMode:",A),console.log("  - selectedProductionHouseId:",Pt),console.log("  - effectiveStoreId:",_),console.log("  - filterById:",U),console.log("  - Total production records:",Ot.length);const we=U?e.productionHouses?.find(Pe=>Pe.id===U):null;console.log("  - Selected production house object:",we);const{startDate:he,endDate:be}=Y();console.log(" Date Range Filter:",{rangeType:ft,startDate:he,endDate:be,customStart:oe,customEnd:se});const je=Ot.filter(Pe=>{if(Pe.date<he||Pe.date>be)return console.log(" Date filter excluded record:",{date:Pe.date,startDate:he,endDate:be}),!1;if(!U)return!0;console.log(" Filtering production record:",{recordStoreId:Pe.storeId,recordProductionHouseId:Pe.productionHouseId,filterById:U,date:Pe.date});const wt=Pe.storeId===U,Er=Pe.productionHouseId===U;let ir=Pe.productionHouseId;if((!ir||ir.startsWith("STORE-"))&&Pe.storeId){const ha=ze.length>0?ze:e.stores||[],Kr=ha.find(Zr=>Zr.id===Pe.storeId);console.log("     Production Summary - Store lookup:",{pStoreId:Pe.storeId,localStoresCount:ze.length,contextStoresCount:e.stores?.length||0,allStoresCount:ha.length,foundStore:Kr?{id:Kr.id,name:Kr.name,productionHouseId:Kr.productionHouseId}:null}),ir=Kr?.productionHouseId||null}const Fr=ir||Pe.storeId;return console.log("   Checking record:",{recordId:Pe.id.slice(0,8),recordStoreId:Pe.storeId,recordProductionHouseId:Pe.productionHouseId,resolvedProductionHouseId:ir,phId:Fr,filterById:U,matchesStoreId:wt,matchesProductionHouseId:Er,localStores:ze.length,match:wt||Er||Fr===U}),wt||Er||Fr===U});console.log("  - Filtered production records:",je.length);const me=je.reduce((Pe,wt)=>Pe+(wt.chickenMomos?.final||0),0),de=je.reduce((Pe,wt)=>Pe+(wt.chickenCheeseMomos?.final||0),0),Me=je.reduce((Pe,wt)=>Pe+(wt.vegMomos?.final||0),0),Je=je.reduce((Pe,wt)=>Pe+(wt.cheeseCornMomos?.final||0),0),ct=je.reduce((Pe,wt)=>Pe+(wt.paneerMomos?.final||0),0),et=je.reduce((Pe,wt)=>Pe+(wt.vegKurkureMomos?.final||0),0),Ue=je.reduce((Pe,wt)=>Pe+(wt.chickenKurkureMomos?.final||0),0),bt=je.reduce((Pe,wt)=>Pe+(wt.wastage?.dough||0)+(wt.wastage?.stuffing||0)+(wt.wastage?.batter||0)+(wt.wastage?.coating||0),0),Vt=je.filter(Pe=>Pe.approvalStatus==="approved").length,gr=je.filter(Pe=>Pe.approvalStatus==="pending").length,Lr=le(),hr=Ot.filter(Pe=>{if(Pe.date<Lr.startDate||Pe.date>Lr.endDate)return!1;if(!U)return!0;const wt=Pe.storeId===U,Er=Pe.productionHouseId===U;let ir=Pe.productionHouseId;(!ir||ir.startsWith("STORE-"))&&Pe.storeId&&(ir=(ze.length>0?ze:e.stores||[]).find(Zr=>Zr.id===Pe.storeId)?.productionHouseId||null);const Fr=ir||Pe.storeId;return wt||Er||Fr===U}),$t=hr.reduce((Pe,wt)=>Pe+(wt.chickenMomos?.final||0),0),Nr=hr.reduce((Pe,wt)=>Pe+(wt.chickenCheeseMomos?.final||0),0),Or=hr.reduce((Pe,wt)=>Pe+(wt.vegMomos?.final||0),0),ar=hr.reduce((Pe,wt)=>Pe+(wt.cheeseCornMomos?.final||0),0),zr=hr.reduce((Pe,wt)=>Pe+(wt.paneerMomos?.final||0),0),tt=hr.reduce((Pe,wt)=>Pe+(wt.vegKurkureMomos?.final||0),0),Wt=hr.reduce((Pe,wt)=>Pe+(wt.chickenKurkureMomos?.final||0),0),ht=(Pe,wt)=>wt===0?Pe>0?100:0:(Pe-wt)/wt*100;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl shadow-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(bo,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Momos"})]}),a.jsx("p",{className:"text-2xl text-gray-900",children:me.toLocaleString()}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"pieces"}),$t>0&&(()=>{const Pe=ht(me,$t);return a.jsxs("div",{className:`flex items-center gap-1 ${Pe>=0?"text-green-600":"text-red-600"}`,children:[Pe>=0?a.jsx(_i,{className:"w-3 h-3"}):a.jsx(Si,{className:"w-3 h-3"}),a.jsxs("span",{className:"text-xs font-semibold",children:[Math.abs(Pe).toFixed(1),"%"]})]})})()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl shadow-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(bo,{className:"w-5 h-5 text-yellow-600"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Cheese"})]}),a.jsx("p",{className:"text-2xl text-gray-900",children:de.toLocaleString()}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"pieces"}),Nr>0&&(()=>{const Pe=ht(de,Nr);return a.jsxs("div",{className:`flex items-center gap-1 ${Pe>=0?"text-green-600":"text-red-600"}`,children:[Pe>=0?a.jsx(_i,{className:"w-3 h-3"}):a.jsx(Si,{className:"w-3 h-3"}),a.jsxs("span",{className:"text-xs font-semibold",children:[Math.abs(Pe).toFixed(1),"%"]})]})})()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl shadow-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(bo,{className:"w-5 h-5 text-green-600"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Veg Momos"})]}),a.jsx("p",{className:"text-2xl text-gray-900",children:Me.toLocaleString()}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"pieces"}),Or>0&&(()=>{const Pe=ht(Me,Or);return a.jsxs("div",{className:`flex items-center gap-1 ${Pe>=0?"text-green-600":"text-red-600"}`,children:[Pe>=0?a.jsx(_i,{className:"w-3 h-3"}):a.jsx(Si,{className:"w-3 h-3"}),a.jsxs("span",{className:"text-xs font-semibold",children:[Math.abs(Pe).toFixed(1),"%"]})]})})()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl shadow-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(bo,{className:"w-5 h-5 text-amber-600"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Cheese Corn"})]}),a.jsx("p",{className:"text-2xl text-gray-900",children:Je.toLocaleString()}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"pieces"}),ar>0&&(()=>{const Pe=ht(Je,ar);return a.jsxs("div",{className:`flex items-center gap-1 ${Pe>=0?"text-green-600":"text-red-600"}`,children:[Pe>=0?a.jsx(_i,{className:"w-3 h-3"}):a.jsx(Si,{className:"w-3 h-3"}),a.jsxs("span",{className:"text-xs font-semibold",children:[Math.abs(Pe).toFixed(1),"%"]})]})})()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl shadow-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(bo,{className:"w-5 h-5 text-blue-600"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Paneer Momos"})]}),a.jsx("p",{className:"text-2xl text-gray-900",children:ct.toLocaleString()}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"pieces"}),zr>0&&(()=>{const Pe=ht(ct,zr);return a.jsxs("div",{className:`flex items-center gap-1 ${Pe>=0?"text-green-600":"text-red-600"}`,children:[Pe>=0?a.jsx(_i,{className:"w-3 h-3"}):a.jsx(Si,{className:"w-3 h-3"}),a.jsxs("span",{className:"text-xs font-semibold",children:[Math.abs(Pe).toFixed(1),"%"]})]})})()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-lime-50 to-lime-100 rounded-xl shadow-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(bo,{className:"w-5 h-5 text-lime-600"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Veg Kurkure"})]}),a.jsx("p",{className:"text-2xl text-gray-900",children:et.toLocaleString()}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"pieces"}),tt>0&&(()=>{const Pe=ht(et,tt);return a.jsxs("div",{className:`flex items-center gap-1 ${Pe>=0?"text-green-600":"text-red-600"}`,children:[Pe>=0?a.jsx(_i,{className:"w-3 h-3"}):a.jsx(Si,{className:"w-3 h-3"}),a.jsxs("span",{className:"text-xs font-semibold",children:[Math.abs(Pe).toFixed(1),"%"]})]})})()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl shadow-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(bo,{className:"w-5 h-5 text-orange-600"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Kurkure"})]}),a.jsx("p",{className:"text-2xl text-gray-900",children:Ue.toLocaleString()}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"pieces"}),Wt>0&&(()=>{const Pe=ht(Ue,Wt);return a.jsxs("div",{className:`flex items-center gap-1 ${Pe>=0?"text-green-600":"text-red-600"}`,children:[Pe>=0?a.jsx(_i,{className:"w-3 h-3"}):a.jsx(Si,{className:"w-3 h-3"}),a.jsxs("span",{className:"text-xs font-semibold",children:[Math.abs(Pe).toFixed(1),"%"]})]})})()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-red-100 to-red-200 rounded-xl shadow-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ws,{className:"w-5 h-5 text-red-700"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Total Wastage"})]}),a.jsx("p",{className:"text-2xl text-gray-900",children:bt.toFixed(2)}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"kg"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-xl shadow-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(YE,{className:"w-5 h-5 text-green-700"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Approved"})]}),a.jsx("p",{className:"text-2xl text-gray-900",children:Vt}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"records"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-xl shadow-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Ar,{className:"w-5 h-5 text-yellow-700"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Pending"})]}),a.jsx("p",{className:"text-2xl text-gray-900",children:gr}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"records"})]})]})})()}),a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6 border-2 border-orange-200",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl text-gray-900 mb-1 flex items-center gap-2",children:[a.jsx(Zt,{className:"w-6 h-6 text-orange-600"}),"Production House Stock Status"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Opening balance + This month produced - Sent to stores (delivered requests)"})]}),A==="production"&&(v||S)&&a.jsxs("div",{className:"flex gap-2 items-start",children:[a.jsxs("button",{onClick:()=>{He(JSON.parse(JSON.stringify(Ir))),Da(!0)},className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-lg hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 shadow-lg",title:"Configure Stock Alert Thresholds",children:[a.jsx(Gi,{className:"w-5 h-5"}),"Alert Settings"]}),a.jsxs("button",{onClick:()=>{Rt(Ie),pt(!0)},className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-lg hover:from-blue-700 hover:to-blue-600 transition-all flex items-center gap-2 shadow-lg",title:"Configure Momos Per Plate",children:[a.jsx(Gi,{className:"w-5 h-5"}),"Plate Settings"]}),S&&a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("button",{onClick:()=>Tt(!0),className:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg font-semibold",title:"Recalibrate production house stock (available on 1st of each month)",children:[a.jsx(Ur,{className:"w-5 h-5"}),"Recalibrate Stock"]}),Ce&&Ce.date&&a.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Last recalibrated: ",Kn(Ce.date)," IST"]}),Qe&&!Ce&&a.jsx("p",{className:"text-xs text-blue-600 text-center",children:" Using auto carry-forward from previous month"})]}),(v||y)&&n&&a.jsxs("button",{onClick:()=>{console.log(" Manage Items button clicked in Analytics"),n()},className:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg font-semibold",title:"Manage inventory items",children:[a.jsx(Zt,{className:"w-5 h-5"}),"Manage Items"]})]}),A==="store"&&e.user?.role==="cluster_head"&&e.productionHouses&&e.productionHouses.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Production House:"}),a.jsxs("select",{value:Pt||"all",onChange:U=>{const we=U.target.value==="all"?null:U.target.value;console.log(" Production House Selector Changed:",we),Dr(we)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Production Houses"}),e.productionHouses.map(U=>a.jsxs("option",{value:U.id,children:[U.name," (ID: ",U.id,")"]},U.id))]})]})]})}),(()=>{const U=Pt;console.log(" Production House Stock Status Filter Debug:"),console.log("  - analyticsMode:",A),console.log("  - selectedProductionHouseId:",Pt),console.log("  - effectiveProductionHouseId:",U);const we=U?e.productionHouses?.find(tt=>tt.id===U):null;console.log("  - Selected production house for stock:",we),console.log("  - Total production records available:",Ot.length),Ot.length>0&&Ot.length<=3&&console.log("  - All production records:",Ot.map(tt=>({id:tt.id,storeId:tt.storeId,productionHouseId:tt.productionHouseId,date:tt.date})));const he=Ot.filter(tt=>{if(!U)return!0;const Wt=tt.storeId===U,ht=tt.productionHouseId===U;let Pe=tt.productionHouseId;(!Pe||Pe.startsWith("STORE-"))&&tt.storeId&&(Pe=(ze.length>0?ze:e.stores||[]).find(Fr=>Fr.id===tt.storeId)?.productionHouseId||null);const wt=Pe||tt.storeId;return Wt||ht||wt===U});console.log("  - Filtered production for stock status:",he.length),he.length>0&&console.log("  - Sample production record:",{id:he[0].id,storeId:he[0].storeId,productionHouseId:he[0].productionHouseId,date:he[0].date});const be=new Date().toISOString().substring(0,7),je=he.filter(tt=>tt.date.startsWith(be));console.log("  - Monthly filtered production:",je.length,"for month:",be),je.length>0&&console.log("  - Sample monthly production record:",je[0]);const me=e.inventoryItems?.filter(tt=>tt.category==="finished_product"&&tt.isActive&&(tt.linkedEntityType==="global"||tt.linkedEntityType==="production_house"&&tt.linkedEntityId===U))||[],de=tt=>tt.replace(/_([a-z])/g,Wt=>Wt[1].toUpperCase()),Me=tt=>{const Wt=tt.replace(/_momo(s)?$/i,"");return de(Wt)},Je={};me.forEach(tt=>{const Wt=Me(tt.name);Je[Wt]=0}),je.filter(tt=>tt.approvalStatus==="approved").forEach(tt=>{me.forEach(Wt=>{const ht=Me(Wt.name),Pe=tt.data?.[Wt.name];let wt=0;if(Pe!=null)wt=typeof Pe=="object"?Pe.final||Pe.quantity||0:Pe;else{const Er=tt[ht+"Momos"],ir=tt[ht];Er?wt=typeof Er=="object"?Er.final||0:Er:ir&&(wt=typeof ir=="object"?ir.final||0:ir)}Je[ht]=(Je[ht]||0)+wt})});let ct=U;if(U&&U.startsWith("STORE-")){const tt=e.stores?.find(Wt=>Wt.id===U);tt?.productionHouseId&&(ct=tt.productionHouseId,console.log(" Resolved production house UUID:",{userStoreId:U,resolvedUUID:ct}))}const et=e.productionRequests?.filter(tt=>{if(tt.status!=="delivered")return!1;const Wt=tt.deliveredDate||tt.requestDate||tt.createdAt;if(!Wt||!Wt.startsWith(be))return console.log(" Filtered out request - wrong month:",{requestId:tt.id.slice(0,8),requestDate:Wt,currentMonth:be,matches:Wt?.startsWith(be)}),!1;const ht=ze.length>0?ze:e.stores||[],Pe=ht.find(wt=>wt.id===tt.storeId);if(ct){const wt=Pe?.productionHouseId===ct;return console.log(" Checking production request:",{requestId:tt.id.slice(0,8),storeId:tt.storeId,storeName:Pe?.name,storeProductionHouseId:Pe?.productionHouseId,productionHouseUUID:ct,deliveredDate:tt.deliveredDate,availableStores:ht.length,matches:wt}),wt}return!0})||[];console.log(" Production Stock Calculation:",{effectiveProductionHouseId:U,isProductionIncharge:e.user?.designation==="production_incharge",totalProductionRequests:e.productionRequests?.length||0,deliveredRequests:e.productionRequests?.filter(tt=>tt.status==="delivered").length||0,fulfilledRequestsCount:et.length,stores:e.stores?.map(tt=>({id:tt.id,name:tt.name,productionHouseId:tt.productionHouseId}))||[],filteredProductionRecords:he.length,allProductionData:Ot.map(tt=>({id:tt.id.slice(0,8),date:tt.date,productionHouseId:tt.productionHouseId,storeId:tt.storeId,resolvedId:tt.productionHouseId||tt.storeId})),sampleRequest:et[0],sampleRequestData:et[0]?{id:et[0].id,storeId:et[0].storeId,requestDate:et[0].requestDate,status:et[0].status,chickenMomos:et[0].chickenMomos,vegMomos:et[0].vegMomos}:null});const Ue={};me.forEach(tt=>{const Wt=Me(tt.name);Ue[Wt]=0}),et.forEach(tt=>{me.forEach(Wt=>{const ht=Me(Wt.name),Pe=tt[ht+"Momos"]||tt[ht]||0;Ue[ht]=(Ue[ht]||0)+Pe})});const bt={};me.forEach(tt=>{const Wt=Me(tt.name);bt[Wt]=Qe?.[Wt]||Qe?.[tt.name]||Qe?.[tt.id]||0}),console.log(" Stock Calculation with Carry-Forward:"),console.log("  previousMonthStock (raw):",Qe),console.log("  Opening Balance (processed):",bt),console.log("  Current Month Production (APPROVED ONLY):",Je),console.log("  Current Month Deliveries:",Ue),console.log("   Production Records Debug:"),console.log("    Total monthly production records:",je.length),console.log("    Approved monthly production records:",je.filter(tt=>tt.approvalStatus==="approved").length),console.log("    Sample production records:",je.slice(0,3).map(tt=>({id:tt.id.slice(0,8),date:tt.date,approvalStatus:tt.approvalStatus,hasData:!!tt.data,dataKeys:tt.data?Object.keys(tt.data):[],sampleValue:tt.data?tt.data[Object.keys(tt.data)[0]]:null})));const Vt=window.__midMonthRecalibration,gr=Ce?.date,Lr=Vt&&gr;Lr&&(console.log("   Mid-Month Recalibration Detected:"),console.log("    Recalibration date:",gr),console.log("    Recalibration stock:",Vt));const hr={};if(Lr){const tt=gr;console.log("    Recalibration date (date only):",tt.substring(0,10));const Wt={};me.forEach(Pe=>{const wt=Me(Pe.name);Wt[wt]=0}),he.filter(Pe=>Pe.approvalStatus==="approved").forEach(Pe=>{const wt=tt.substring(0,10),Er=Pe.date>wt;console.log("   Checking production after recalibration:",{id:Pe.id.slice(0,8),date:Pe.date,recalDateOnly:wt,isAfter:Er,hasData:!!Pe.data,dataKeys:Pe.data?Object.keys(Pe.data):[],approvalStatus:Pe.approvalStatus}),Er&&me.forEach(ir=>{const Fr=Me(ir.name),_r=Pe.data?.[ir.name];let ha=0;if(_r!=null)ha=typeof _r=="object"?_r.final||_r.quantity||0:_r;else{const Kr=Pe[Fr+"Momos"],Zr=Pe[Fr];Kr?ha=typeof Kr=="object"?Kr.final||0:Kr:Zr&&(ha=typeof Zr=="object"?Zr.final||0:Zr)}ha>0&&console.log(`     Adding production after recalibration: ${ir.name} (${Fr}) = ${ha}`),Wt[Fr]=(Wt[Fr]||0)+ha})});const ht={};me.forEach(Pe=>{const wt=Me(Pe.name);ht[wt]=0}),et.forEach(Pe=>{const wt=Pe.deliveredDate||Pe.requestDate||Pe.createdAt;wt&&wt>tt&&me.forEach(Er=>{const ir=Me(Er.name),Fr=Pe[ir+"Momos"]||Pe[ir]||0;ht[ir]=(ht[ir]||0)+Fr})}),console.log("    Production AFTER recalibration:",Wt),console.log("    Deliveries AFTER recalibration:",ht),me.forEach(Pe=>{const wt=Me(Pe.name),Er=Vt[wt]||0,ir=Wt[wt]||0,Fr=ht[wt]||0;hr[wt]=Er+ir-Fr,console.log(`    ${wt}: ${Er} (recal) + ${ir} (prod after) - ${Fr} (del after) = ${hr[wt]}`)})}else me.forEach(tt=>{const Wt=Me(tt.name);hr[Wt]=(bt[Wt]||0)+(Je[Wt]||0)-(Ue[Wt]||0)});console.log("  Final Stock:",hr),window.__currentProductionHouseStock=hr;const $t=e.inventoryItems?.filter(tt=>tt.category==="finished_product"&&tt.isActive&&(tt.linkedEntityType==="global"||tt.linkedEntityType==="production_house"&&tt.linkedEntityId===U))||[];console.log(" Finished Products for Stock Display:",$t.map(tt=>{const Wt=Me(tt.name);return{name:tt.name,displayName:tt.displayName,stock:hr[Wt]}}));const Nr=tt=>tt.replace(/_([a-z])/g,Wt=>Wt[1].toUpperCase()),Or={chicken:"purple",chickenCheese:"pink",chicken_cheese:"pink",veg:"green",cheeseCorn:"yellow",cheese_corn:"yellow",paneer:"blue",vegKurkure:"teal",veg_kurkure:"teal",chickenKurkure:"red",chicken_kurkure:"red"},ar=$t.map(tt=>{const Wt=tt.name.replace(/_momo(s)?$/i,""),ht=Nr(Wt);return{key:tt.name,camelKey:ht,label:tt.displayName,color:Or[Wt]||Or[ht]||"indigo",unit:tt.unit}}),zr=Object.values(bt).some(tt=>tt>0);return he.length===0&&!zr?a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[a.jsx(Zt,{className:"w-12 h-12 text-blue-400 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg text-gray-900 mb-2",children:"No Production Data"}),a.jsx("p",{className:"text-sm text-gray-600",children:U?"No production records found for the selected production house.":"No production records found. Start logging production to see stock status."})]}):a.jsxs(a.Fragment,{children:[bt&&Object.values(bt).some(tt=>tt>0)&&a.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4 rounded",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(lr,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-blue-900",children:"Automatic Stock Carry-Forward Active"}),a.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["Stock calculation: ",a.jsx("span",{className:"font-mono",children:"Opening Balance + This Month's Production - Deliveries"})]}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:Ce&&Ce.date?`Opening balance from recalibration on ${Kn(Ce.date)} (IST)`:"Opening balance auto-calculated from previous month's closing stock"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:ar.map(({key:tt,camelKey:Wt,label:ht,color:Pe,unit:wt})=>{const Er=bt[Wt]||bt[tt]||0,ir=Je[Wt]||Je[tt]||0,Fr=Ue[Wt]||Ue[tt]||0,_r=hr[Wt]||hr[tt]||0,ha=Er>0||ir>0||Fr>0||_r!==void 0,Kr=Ir[Wt]??Ir[tt]??{high:600,medium:300,low:150},Zr=_r<Kr.low,zs=_r>=Kr.low&&_r<Kr.medium,Fl=_r>=Kr.medium&&_r<Kr.high,Uu=_r>=Kr.high;let Ks="",mi="",lo="";_r<0?(Ks=" Over-distributed",mi="bg-red-100 border-red-300 text-red-800",lo="text-red-600"):ha&&Zr?(Ks=" Critical: Below Low Threshold",mi="bg-red-100 border-red-300 text-red-800",lo="text-red-600"):ha&&zs?(Ks=" Low: Between Low & Medium",mi="bg-orange-100 border-orange-300 text-orange-800",lo="text-orange-600"):ha&&Fl?(Ks=" Medium: Between Medium & High",mi="bg-yellow-100 border-yellow-300 text-yellow-800",lo="text-yellow-700"):ha&&Uu&&(Ks=" Healthy: Above High Threshold",mi="bg-green-100 border-green-300 text-green-800",lo="text-green-600");const $n=ir>0?(_r/ir*100).toFixed(0):"0";return a.jsxs("div",{className:`bg-gradient-to-br from-${Pe}-50 to-${Pe}-100 border-2 border-${Pe}-200 rounded-xl p-4 hover:shadow-lg transition-all duration-300`,children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:ht}),a.jsx("div",{className:"space-y-2",children:ha?a.jsxs(a.Fragment,{children:[Er>0&&a.jsxs("div",{className:"flex justify-between items-center bg-blue-100 px-3 py-2 rounded-lg",children:[a.jsx("span",{className:"text-sm text-blue-700 font-semibold",children:"Opening Balance:"}),a.jsx("span",{className:"text-xl font-bold text-blue-800",children:Er})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"This Month Produced:"}),a.jsx("span",{className:`text-lg font-bold text-${Pe}-600`,children:ir})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Sent to Stores:"}),a.jsx("span",{className:`text-lg font-bold text-${Pe}-700`,children:Fr})]}),a.jsxs("div",{className:"border-t-2 border-gray-300 pt-2 mt-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Stock Available:"}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:`text-2xl font-bold ${lo||`text-${Pe}-800`}`,children:[_r," pcs / ",Math.round(_r/Ie)," plates"]})})]}),ir>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:a.jsxs("span",{children:[$n,"% remaining"]})}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${Zr||_r<0?"bg-red-500":zs?"bg-orange-500":Fl?"bg-yellow-500":Uu?"bg-green-500":`bg-${Pe}-500`}`,style:{width:`${Math.min(100,Math.max(0,Number($n)))}%`}})})]})]}),Ks&&a.jsx("div",{className:`border rounded-lg px-2 py-1 mt-2 ${mi}`,children:a.jsx("p",{className:"text-xs font-semibold",children:Ks})}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg px-2 py-1 mt-2",children:a.jsxs("div",{className:"grid grid-cols-3 gap-1 text-xs",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600",children:"Low"}),a.jsx("div",{className:"font-semibold text-red-600",children:Kr.low})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600",children:"Med"}),a.jsx("div",{className:"font-semibold text-yellow-600",children:Kr.medium})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600",children:"High"}),a.jsx("div",{className:"font-semibold text-green-600",children:Kr.high})]})]})})]}):a.jsxs("div",{className:"bg-white/80 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Current Stock"}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-2xl font-bold text-gray-400",children:"0"}),a.jsx("span",{className:"text-xs text-gray-500",children:wt||"pieces"})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg px-2 py-1 mt-2",children:a.jsx("p",{className:"text-xs text-yellow-800",children:" Track in production logging to see stock"})})]})})]},tt)})})]})})()]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Momo Production Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Daily, weekly, monthly, and yearly production trends"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:[{filter:"today",label:"Today"},{filter:"yesterday",label:"Yesterday"},{filter:"thisWeek",label:"This Week"},{filter:"lastWeek",label:"Last Week"},{filter:"thisMonth",label:"This Month"},{filter:"lastMonth",label:"Last Month"},{filter:"custom",label:"Custom"}].map(({filter:U,label:we})=>a.jsx("button",{onClick:()=>ee(U),className:`px-3 py-2 rounded-lg text-xs sm:text-sm transition-colors ${W===U?"bg-orange-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:we},U))})]}),W==="custom"&&a.jsx("div",{className:"mb-6 bg-blue-50 p-4 rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"From Date"}),a.jsx("input",{type:"date",value:X.from,onChange:U=>L({...X,from:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"To Date"}),a.jsx("input",{type:"date",value:X.to,onChange:U=>L({...X,to:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})}),(()=>{const U=A==="production"?Pt:e.user?.designation==="production_incharge"?_:Pt,we=new Date,he=we.toISOString().split("T")[0],be=new Date(we.getTime()-1440*60*1e3).toISOString().split("T")[0],je=new Date(we);je.setDate(we.getDate()-we.getDay()),je.setHours(0,0,0,0);const me=new Date(je);me.setDate(je.getDate()-7);const de=new Date(je);de.setDate(je.getDate()-1);const Me=new Date(we.getFullYear(),we.getMonth(),1),Je=new Date(we.getFullYear(),we.getMonth()-1,1),ct=new Date(we.getFullYear(),we.getMonth(),0);let et=Ot.filter($t=>{if(U){const Nr=$t.storeId===U,Or=$t.productionHouseId===U;let ar=$t.productionHouseId;(!ar||ar.startsWith("STORE-"))&&$t.storeId&&(ar=e.stores?.find(ht=>ht.id===$t.storeId)?.productionHouseId||null);const zr=ar||$t.storeId;if(!(Nr||Or||zr===U))return!1}return!0}),Ue=[],bt=[],Vt="",gr="";if(W==="today")Ue=et.filter($t=>$t.date===he),bt=et.filter($t=>$t.date===be),Vt="Today",gr="vs Yesterday";else if(W==="yesterday"){Ue=et.filter(Nr=>Nr.date===be);const $t=new Date(we.getTime()-2880*60*1e3).toISOString().split("T")[0];bt=et.filter(Nr=>Nr.date===$t),Vt="Yesterday",gr="vs Day Before"}else if(W==="thisWeek")Ue=et.filter($t=>{const Nr=new Date($t.date);return Nr>=je&&Nr<=we}),bt=et.filter($t=>{const Nr=new Date($t.date);return Nr>=me&&Nr<=de}),Vt="This Week",gr="vs Last Week";else if(W==="lastWeek"){Ue=et.filter(Or=>{const ar=new Date(Or.date);return ar>=me&&ar<=de});const $t=new Date(me);$t.setDate(me.getDate()-7);const Nr=new Date(me);Nr.setDate(me.getDate()-1),bt=et.filter(Or=>{const ar=new Date(Or.date);return ar>=$t&&ar<=Nr}),Vt="Last Week",gr="vs Week Before"}else if(W==="thisMonth"){Ue=et.filter(Or=>{const ar=new Date(Or.date);return ar>=Me&&ar<=we});const $t=we.getDate(),Nr=new Date(we.getFullYear(),we.getMonth()-1,$t);bt=et.filter(Or=>{const ar=new Date(Or.date);return ar>=Je&&ar<=Nr}),Vt="This Month",gr=`vs Last Month (Day 1-${$t})`}else if(W==="lastMonth"){Ue=et.filter(ar=>{const zr=new Date(ar.date);return zr>=Je&&zr<=ct});const $t=ct.getDate(),Nr=new Date(we.getFullYear(),we.getMonth()-2,1),Or=new Date(we.getFullYear(),we.getMonth()-2,$t);bt=et.filter(ar=>{const zr=new Date(ar.date);return zr>=Nr&&zr<=Or}),Vt="Last Month",gr=`vs Month Before (Day 1-${$t})`}else if(W==="custom"){Ue=et.filter(tt=>tt.date>=X.from&&tt.date<=X.to);const $t=new Date(X.from),Nr=new Date(X.to),Or=Math.ceil((Nr.getTime()-$t.getTime())/(1e3*60*60*24)),ar=new Date($t);ar.setDate($t.getDate()-Or-1);const zr=new Date($t);zr.setDate($t.getDate()-1),bt=et.filter(tt=>{const Wt=new Date(tt.date);return Wt>=ar&&Wt<=zr}),Vt=`${X.from} to ${X.to}`,gr="vs Previous Period"}const Lr=[{key:"chickenMomos",label:"Chicken Momos",color:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",solid:"#ef4444"}},{key:"chickenCheeseMomos",label:"Chicken Cheese",color:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300",solid:"#f97316"}},{key:"vegMomos",label:"Veg Momos",color:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",solid:"#10b981"}},{key:"cheeseCornMomos",label:"Cheese Corn",color:{bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-300",solid:"#fbbf24"}},{key:"paneerMomos",label:"Paneer Momos",color:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300",solid:"#3b82f6"}},{key:"vegKurkureMomos",label:"Veg Kurkure",color:{bg:"bg-lime-100",text:"text-lime-700",border:"border-lime-300",solid:"#84cc16"}},{key:"chickenKurkureMomos",label:"Chicken Kurkure",color:{bg:"bg-amber-100",text:"text-amber-700",border:"border-amber-300",solid:"#f59e0b"}}],hr=($t,Nr)=>$t.reduce((Or,ar)=>Or+(ar[Nr]?.final||0),0);return a.jsxs("div",{children:[a.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Period:"})," ",Vt,"  ",a.jsx("span",{className:"font-medium",children:"Total Production Records:"})," ",Ue.length]}),Ue.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(Zt,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No production data for this period"})]}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Lr.map($t=>{const Nr=hr(Ue,$t.key),Or=hr(bt,$t.key);let ar=0,zr="same";return Or>0?(ar=(Nr-Or)/Or*100,ar>0?zr="up":ar<0&&(zr="down")):Nr>0&&(ar=100,zr="up"),a.jsx("div",{className:`${$t.color.bg} ${$t.color.border} border-2 rounded-xl p-4 transition-all hover:shadow-lg`,children:a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-10 h-10 ${$t.color.text} rounded-full flex items-center justify-center bg-white`,children:a.jsx(bo,{className:"w-5 h-5"})}),a.jsx("div",{className:"text-sm font-bold text-gray-800",children:$t.label})]}),Or>0&&a.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${zr==="up"?"bg-green-100 text-green-700":zr==="down"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:[zr==="up"&&a.jsx(_i,{className:"w-3 h-3"}),zr==="down"&&a.jsx(Si,{className:"w-3 h-3"}),zr==="same"&&a.jsx(T2,{className:"w-3 h-3"}),Math.abs(ar).toFixed(0),"%"]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[a.jsx("div",{className:`text-3xl font-bold ${$t.color.text} mb-1`,children:Nr.toLocaleString()}),a.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"pieces produced"})]}),Or>0&&a.jsxs("div",{className:"text-xs text-gray-500 text-center pt-1 border-t border-gray-200",children:[gr,": ",Or.toLocaleString()," pcs"]})]})},$t.key)})})]})})()]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Wastage Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Track and minimize production wastage"})]})}),(()=>{const U=A==="production"?Pt:e.user?.designation==="production_incharge"?_:Pt,we=U?ze.filter(de=>de.productionHouseId===U).map(de=>de.id):[],he=de=>{if(!U)return!0;const Me=de.storeId===U,Je=de.productionHouseId===U,ct=de.productionHouseId||de.storeId,et=we.includes(de.storeId)||we.includes(de.productionHouseId);return Me||Je||ct===U||et};window.wastageFilterHelper={matchesProductionHouse:he,mappedStoreIds:we,filterById:U};const be=Ot.filter(he),je=be.reduce((de,Me)=>de+(Me.wastage?.dough||0)+(Me.wastage?.stuffing||0)+(Me.wastage?.batter||0)+(Me.wastage?.coating||0),0),me=be.filter(de=>(de.wastage?.dough||0)>0||(de.wastage?.stuffing||0)>0||(de.wastage?.batter||0)>0||(de.wastage?.coating||0)>0);return console.log(" Wastage Analysis Debug:",{analyticsMode:A,selectedProductionHouseId:Pt,filterById:U,mappedStoreIds:we,totalProductionRecords:Ot.length,filteredProductionRecords:be.length,recordsWithWastage:me.length,totalWastageAllTime:je,sampleWastageData:be.slice(0,3).map(de=>({date:de.date,storeId:de.storeId,productionHouseId:de.productionHouseId,wastage:de.wastage}))}),be.length===0?a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[a.jsx("p",{className:"text-yellow-800 font-medium",children:" No production data found"}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Please select a production house or ensure production data has been logged."})]}):me.length===0&&be.length>0?a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("p",{className:"text-blue-800 font-medium",children:" No wastage data recorded"}),a.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Found ",be.length," production record(s), but no wastage has been logged yet. Wastage values can be entered in the Production Management section."]})]}):null})(),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-3",children:"Daily Wastage Trend"}),a.jsx(zn,{width:"100%",height:250,children:a.jsxs(Fd,{data:(()=>{const U=[];for(let we=4;we>=0;we--){const he=new Date;he.setDate(he.getDate()-we);const be=he.toISOString().split("T")[0],je=window.wastageFilterHelper,de=Ot.filter(Me=>je.matchesProductionHouse(Me)&&Me.date===be).reduce((Me,Je)=>Me+(Je.wastage?.dough||0)+(Je.wastage?.stuffing||0)+(Je.wastage?.batter||0)+(Je.wastage?.coating||0),0);U.push({date:be.substring(5),wastage:de})}return U})(),children:[a.jsx(bs,{strokeDasharray:"3 3",stroke:"#fca5a5"}),a.jsx(Dn,{dataKey:"date",tick:{fontSize:10}}),a.jsx(jn,{tick:{fontSize:10}}),a.jsx(Ea,{}),a.jsx(ss,{type:"monotone",dataKey:"wastage",stroke:"#dc2626",strokeWidth:2})]})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-3",children:"Weekly Wastage Trend"}),a.jsx(zn,{width:"100%",height:250,children:a.jsxs(Fd,{data:(()=>{const U=[];for(let we=4;we>=0;we--){const he=new Date;he.setDate(he.getDate()-we*7);const be=new Date(he.setDate(he.getDate()-he.getDay())),je=new Date(be);je.setDate(je.getDate()+6);const me=window.wastageFilterHelper,Me=Ot.filter(Je=>me.matchesProductionHouse(Je)&&Je.date>=be.toISOString().split("T")[0]&&Je.date<=je.toISOString().split("T")[0]).reduce((Je,ct)=>Je+(ct.wastage?.dough||0)+(ct.wastage?.stuffing||0)+(ct.wastage?.batter||0)+(ct.wastage?.coating||0),0);U.push({week:`W${5-we}`,wastage:Me})}return U})(),children:[a.jsx(bs,{strokeDasharray:"3 3",stroke:"#fed7aa"}),a.jsx(Dn,{dataKey:"week",tick:{fontSize:10}}),a.jsx(jn,{tick:{fontSize:10}}),a.jsx(Ea,{}),a.jsx(ss,{type:"monotone",dataKey:"wastage",stroke:"#ea580c",strokeWidth:2})]})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-3",children:"Monthly Wastage Trend"}),a.jsx(zn,{width:"100%",height:250,children:a.jsxs(Fd,{data:(()=>{const U=[];for(let we=4;we>=0;we--){const he=new Date;he.setMonth(he.getMonth()-we);const be=he.toISOString().substring(0,7),je=window.wastageFilterHelper,de=Ot.filter(Me=>je.matchesProductionHouse(Me)&&Me.date.startsWith(be)).reduce((Me,Je)=>Me+(Je.wastage?.dough||0)+(Je.wastage?.stuffing||0)+(Je.wastage?.batter||0)+(Je.wastage?.coating||0),0);U.push({month:be.substring(5),wastage:de})}return U})(),children:[a.jsx(bs,{strokeDasharray:"3 3",stroke:"#fde68a"}),a.jsx(Dn,{dataKey:"month",tick:{fontSize:10}}),a.jsx(jn,{tick:{fontSize:10}}),a.jsx(Ea,{}),a.jsx(ss,{type:"monotone",dataKey:"wastage",stroke:"#ca8a04",strokeWidth:2})]})})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl text-gray-900",children:"Wastage Breakdown by Type"}),a.jsx("div",{className:"flex gap-2",children:["daily","weekly","monthly","yearly","custom"].map(U=>a.jsx("button",{onClick:()=>Q(U),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${re===U?"bg-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:U.charAt(0).toUpperCase()+U.slice(1)},U))})]}),a.jsx(zn,{width:"100%",height:400,children:a.jsxs(pc,{data:(()=>{const U=window.wastageFilterHelper,we=Ot.filter(be=>{if(!U.matchesProductionHouse(be))return!1;if(re==="custom")return be.date>=X.from&&be.date<=X.to;const je=new Date,me=new Date(be.date);if(re==="daily"){const de=new Date(je);return de.setDate(de.getDate()-5),me>=de}else if(re==="weekly"){const de=new Date(je);return de.setDate(de.getDate()-35),me>=de}else if(re==="monthly"){const de=new Date(je);return de.setMonth(de.getMonth()-5),me>=de}else if(re==="yearly"){const de=new Date(je);return de.setFullYear(de.getFullYear()-5),me>=de}return!0}),he=new Map;return we.forEach(be=>{let je=be.date,me=be.date;if(re==="weekly"){const Me=new Date(be.date),Je=new Date(Me.setDate(Me.getDate()-Me.getDay())),ct=new Date(Je);ct.setDate(ct.getDate()+6),je=Je.toISOString().split("T")[0],me=`${Je.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${ct.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else re==="monthly"?(je=be.date.substring(0,7),me=je):re==="yearly"&&(je=be.date.substring(0,4),me=je);he.has(je)||he.set(je,{period:me,dough:0,stuffing:0,batter:0,coating:0});const de=he.get(je);de.dough+=be.wastage?.dough||0,de.stuffing+=be.wastage?.stuffing||0,de.batter+=be.wastage?.batter||0,de.coating+=be.wastage?.coating||0}),Array.from(he.values()).sort((be,je)=>be.period.localeCompare(je.period))})(),children:[a.jsx(bs,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),a.jsx(Dn,{dataKey:"period",tick:{fontSize:12},angle:re==="weekly"?-15:0,textAnchor:re==="weekly"?"end":"middle",height:re==="weekly"?60:30}),a.jsx(jn,{tick:{fontSize:12},label:{value:"kg",angle:-90,position:"insideLeft"}}),a.jsx(Ea,{content:a.jsx(rxe,{})}),a.jsx(Ss,{}),a.jsx(hn,{dataKey:"dough",name:"Dough",fill:"#dc2626"}),a.jsx(hn,{dataKey:"stuffing",name:"Stuffing",fill:"#f97316"}),a.jsx(hn,{dataKey:"batter",name:"Batter",fill:"#fbbf24"}),a.jsx(hn,{dataKey:"coating",name:"Coating",fill:"#a855f7"})]})})]}),y&&a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg border-2 border-blue-200 p-6 mt-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl text-gray-900 flex items-center gap-2",children:[a.jsx(YE,{className:"w-6 h-6 text-blue-600"}),"SOP Maintenance - Threshold Limits"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set standard ingredient usage per piece (in grams)"})]}),Kt?a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>{yr(Pr),Br(It),Rr(!1),Qt.success("SOP thresholds and diversion limit updated successfully")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[a.jsx(So,{className:"w-4 h-4"}),"Save"]}),a.jsxs("button",{onClick:()=>{Rr(!1),da(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors flex items-center gap-2",children:[a.jsx(ea,{className:"w-4 h-4"}),"Cancel"]})]}):a.jsxs("button",{onClick:()=>{da(JSON.parse(JSON.stringify(Ct))),er(ur),Rr(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(ep,{className:"w-4 h-4"}),"Edit SOP"]})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-900 font-semibold flex items-center gap-2",children:[a.jsx(Ar,{className:"w-5 h-5 text-yellow-600"}),"Maximum Allowed Diversion from SOP"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set the acceptable deviation range (%) from SOP standards. Using too little OR too much is non-compliant."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm text-gray-700",children:"Max Diversion:"}),a.jsx("input",{type:"number",min:"0",max:"20",step:"1",value:Kt?It:ur,onChange:U=>{Kt&&er(Number(U.target.value))},disabled:!Kt,className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"}),a.jsx("span",{className:"text-gray-700",children:"%"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(Kt?Pr:Ct).map(([U,we])=>{const he={chickenMomos:"Chicken Momos",chickenCheeseMomos:"Chicken Cheese Momos",vegMomos:"Veg Momos",cheeseCornMomos:"Cheese Corn Momos",paneerMomos:"Paneer Momos",vegKurkure:"Veg Kurkure",chickenKurkure:"Chicken Kurkure"};return a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[a.jsx("h4",{className:"text-gray-900 mb-3",children:he[U]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Dough (g/pc)"}),a.jsx("input",{type:"number",value:we.dough,disabled:!Kt,onChange:be=>{Kt&&da({...Pr,[U]:{...Pr[U],dough:Number(be.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${Kt?"bg-white":"bg-gray-100"}`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Stuffing (g/pc)"}),a.jsx("input",{type:"number",value:we.stuffing,disabled:!Kt,onChange:be=>{Kt&&da({...Pr,[U]:{...Pr[U],stuffing:Number(be.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${Kt?"bg-white":"bg-gray-100"}`})]}),we.batter!==void 0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Batter (g/pc)"}),a.jsx("input",{type:"number",value:we.batter,disabled:!Kt,onChange:be=>{Kt&&da({...Pr,[U]:{...Pr[U],batter:Number(be.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${Kt?"bg-white":"bg-gray-100"}`})]}),we.coating!==void 0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Coating (g/pc)"}),a.jsx("input",{type:"number",value:we.coating,disabled:!Kt,onChange:be=>{Kt&&da({...Pr,[U]:{...Pr[U],coating:Number(be.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${Kt?"bg-white":"bg-gray-100"}`})]})]})]},U)})})]}),a.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6 mt-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-xl text-gray-900 flex items-center gap-2",children:[a.jsx(fa,{className:"w-6 h-6 text-indigo-600"}),"Daily Ingredient Usage & SOP Compliance"]}),a.jsx(Ns,{label:"Date:",value:dt,onChange:gt})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Regular momos only - Actual usage per piece vs SOP limits with diversion %"})]}),a.jsx("div",{className:"space-y-6",children:(()=>{const U=A==="production"?Pt:e.user?.designation==="production_incharge"?_:Pt;console.log(" SOP Compliance Filter - analyticsMode:",A),console.log(" SOP Compliance Filter - selectedProductionHouseId:",Pt),console.log(" SOP Compliance Filter - effectiveStoreId:",_),console.log(" SOP Compliance Filter - filterById:",U),console.log(" SOP Compliance Filter - user designation:",e.user?.designation),console.log(" SOP Compliance Filter - sopComplianceDate:",dt),console.log(" SOP Compliance Filter - All production dates:",[...new Set(Ot.map(be=>be.date))]),console.log(" SOP Compliance Filter - Total production records:",Ot.length),console.log(" SOP Compliance Filter - Approved production records:",Ot.filter(be=>be.approvalStatus==="approved").length);const we=[dt],he=[];for(const be of we){const je=Ot.filter(Me=>{const Je=A==="production"?Pt:e.user?.designation==="production_incharge"?_:Pt,et=(ze.length>0?ze:e.stores||[]).filter(ar=>ar.productionHouseId===Je).map(ar=>ar.id),Ue=Me.storeId===Je,bt=Me.productionHouseId===Je,gr=(Me.productionHouseId||Me.storeId)===Je,Lr=Me.storeId&&et.includes(Me.storeId),hr=Me.date===be,$t=Me.approvalStatus==="approved",Nr=Ue||bt||gr||Lr,Or=Nr&&hr&&$t;return console.log(" SOP Compliance - Checking production record:",{date:Me.date,storeId:Me.storeId,productionHouseId:Me.productionHouseId,approvalStatus:Me.approvalStatus,filterById:Je,mappedStoreIds:et,matchesStoreId:Ue,matchesProductionHouseId:bt,matchesFallback:gr,matchesMappedStore:Lr,matchesDate:hr,isApproved:$t,passesFilter:Nr,finalResult:Or}),Je&&!Nr?!1:hr&&$t});if(console.log(` SOP Compliance - Date ${be}: Found ${je.length} production records`),je.length===0)continue;const me={chickenMomos:"chickenMomos",chickenCheeseMomos:"chickenCheeseMomos",vegMomos:"vegMomos",cheeseCornMomos:"cheeseCornMomos",paneerMomos:"paneerMomos",vegKurkureMomos:"vegKurkure",chickenKurkureMomos:"chickenKurkure"},de={};je.forEach(Me=>{["chickenMomos","chickenCheeseMomos","vegMomos","cheeseCornMomos","paneerMomos"].forEach(Je=>{const ct=Me[Je];if(ct&&ct.final>0){const et=me[Je];de[et]||(de[et]={quantity:0,totalDough:0,totalStuffing:0,totalBatter:0,totalCoating:0}),de[et].quantity+=ct.final,de[et].totalDough+=ct.dough||0,de[et].totalStuffing+=ct.stuffing||0}}),["vegKurkureMomos","chickenKurkureMomos"].forEach(Je=>{const ct=Me[Je];if(ct&&ct.final>0){const et=me[Je];de[et]||(de[et]={quantity:0,totalDough:0,totalStuffing:0,totalBatter:0,totalCoating:0}),de[et].quantity+=ct.final,de[et].totalBatter+=ct.batter||0,de[et].totalCoating+=ct.coating||0}})}),he.push({date:be,usage:de})}return he.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(Ar,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),a.jsxs("p",{children:["No approved production data found for ",Kn(dt)]}),a.jsx("p",{className:"text-sm mt-1",children:"Production entries must be approved to appear here"})]}):he.map(({date:be,usage:je})=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("h4",{className:"text-gray-900 mb-4",children:Kn(be)}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(je).map(([me,de])=>{if(de.quantity===0||me==="vegKurkure"||me==="chickenKurkure")return null;const Me={chickenMomos:"Chicken Momos",chickenCheeseMomos:"Chicken Cheese",vegMomos:"Veg Momos",cheeseCornMomos:"Cheese Corn",paneerMomos:"Paneer Momos",vegKurkure:"Veg Kurkure",chickenKurkure:"Chicken Kurkure"},Je=de.quantity>0?de.totalDough*1e3/de.quantity:0,ct=de.quantity>0?de.totalStuffing*1e3/de.quantity:0,et=de.quantity>0?de.totalBatter*1e3/de.quantity:0,Ue=de.quantity>0?de.totalCoating*1e3/de.quantity:0,bt=Ct[me].dough>0?(Je-Ct[me].dough)/Ct[me].dough*100:0,Vt=Ct[me].stuffing>0?(ct-Ct[me].stuffing)/Ct[me].stuffing*100:0,gr=Ct[me].batter>0?(et-Ct[me].batter)/Ct[me].batter*100:0,Lr=Ct[me].coating>0?(Ue-Ct[me].coating)/Ct[me].coating*100:0,hr=1-ur/100,$t=1+ur/100,Nr=Je>=Ct[me].dough*hr&&Je<=Ct[me].dough*$t,Or=ct>=Ct[me].stuffing*hr&&ct<=Ct[me].stuffing*$t,ar=!Ct[me].batter||et>=Ct[me].batter*hr&&et<=Ct[me].batter*$t,zr=!Ct[me].coating||Ue>=Ct[me].coating*hr&&Ue<=Ct[me].coating*$t,tt=Nr&&Or&&ar&&zr;return a.jsxs("div",{className:`p-3 rounded-lg border-2 ${tt?"bg-green-50 border-green-300":"bg-red-50 border-red-300"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm text-gray-900",children:Me[me]}),tt?a.jsx(So,{className:"w-5 h-5 text-green-600"}):a.jsx(Ar,{className:"w-5 h-5 text-red-600"})]}),a.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["Qty: ",de.quantity," pcs"]}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:`flex justify-between items-center ${Nr?"text-gray-700":"text-red-700 font-semibold"}`,children:[a.jsx("span",{children:"Dough:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:[Je.toFixed(1),"g / ",Ct[me].dough,"g"]}),a.jsxs("div",{className:`text-[10px] ${Math.abs(bt)>ur?"text-red-600":"text-green-600"}`,children:[bt>0?"+":"",bt.toFixed(1),"%"]})]})]}),a.jsxs("div",{className:`flex justify-between items-center ${Or?"text-gray-700":"text-red-700 font-semibold"}`,children:[a.jsx("span",{children:"Stuffing:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:[ct.toFixed(1),"g / ",Ct[me].stuffing,"g"]}),a.jsxs("div",{className:`text-[10px] ${Math.abs(Vt)>ur?"text-red-600":"text-green-600"}`,children:[Vt>0?"+":"",Vt.toFixed(1),"%"]})]})]}),Ct[me].batter&&a.jsxs("div",{className:`flex justify-between items-center ${ar?"text-gray-700":"text-red-700 font-semibold"}`,children:[a.jsx("span",{children:"Batter:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:[et.toFixed(1),"g / ",Ct[me].batter,"g"]}),a.jsxs("div",{className:`text-[10px] ${Math.abs(gr)>ur?"text-red-600":"text-green-600"}`,children:[gr>0?"+":"",gr.toFixed(1),"%"]})]})]}),Ct[me].coating&&a.jsxs("div",{className:`flex justify-between items-center ${zr?"text-gray-700":"text-red-700 font-semibold"}`,children:[a.jsx("span",{children:"Coating:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:[Ue.toFixed(1),"g / ",Ct[me].coating,"g"]}),a.jsxs("div",{className:`text-[10px] ${Math.abs(Lr)>ur?"text-red-600":"text-green-600"}`,children:[Lr>0?"+":"",Lr.toFixed(1),"%"]})]})]})]})]},me)})})]},be))})()})]})]})]}),O==="production-requests"&&a.jsx("div",{children:a.jsx(Lle,{context:e,highlightRequestId:r||null,selectedStoreId:N,onNavigateToManageItems:n})}),O==="recalibration-reports"&&a.jsx("div",{children:a.jsx(A6,{context:e,selectedStoreId:A==="production"?Pt:t,onOpenRecalibration:()=>Tt(!0),locationType:"production_house"})}),O==="store-recalibration"&&a.jsx("div",{children:a.jsx(A6,{context:e,selectedStoreId:_,locationType:"store"})})]}),rt&&a.jsx(W2,{context:e,selectedStoreId:A==="production"?Pt:_,currentCalculatedStock:A==="production"?window.__currentProductionHouseStock:void 0,onClose:()=>{Tt(!1),A==="production"&&(console.log(" Recalibration modal closed - refreshing data..."),kt(null),Se(null),setTimeout(()=>{console.log(" Timeout complete - fetching latest recalibration..."),pe()},1500))},onSaveSuccess:()=>{console.log(" Recalibration saved successfully - triggering immediate refresh!"),kt(null),Se(null),window.__currentProductionHouseStock=null,setTimeout(()=>{pe()},500)},isProductionHouse:A==="production"}),tr&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 p-6 rounded-t-2xl",children:[a.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),a.jsxs("div",{className:"relative flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center border-2 border-white/30",children:a.jsx(Gi,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl text-white",children:"Stock Alert Thresholds"}),a.jsx("p",{className:"text-white/80 text-sm",children:"Customize alert levels for each momo type"})]})]}),a.jsx("button",{onClick:()=>{Da(!1),He({})},className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-all",children:a.jsx(ea,{className:"w-6 h-6 text-white"})})]})]}),a.jsxs("div",{className:"p-6 bg-blue-50 border-b-2 border-blue-200",children:[a.jsx("h3",{className:"text-gray-900 font-semibold mb-2",children:"How it works:"}),a.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Set three threshold levels for each momo type. When stock falls below these levels, color-coded alerts will appear on the stock cards."}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-green-200",children:[a.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"High: Stock above high threshold"})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-yellow-200",children:[a.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Medium: Between medium and high"})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-orange-200",children:[a.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Low: Between low and medium"})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-red-200",children:[a.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Critical: Below low threshold or zero"})]})]})]}),a.jsx("div",{className:"p-6 space-y-6",children:(e.inventoryItems?.filter(he=>he.category==="finished_product"&&he.isActive)||[]).map(he=>{const be=he.name.replace(/_([a-z])/g,je=>je[1].toUpperCase());return{key:he.name,camelKey:be,label:he.displayName}}).map(({key:he,camelKey:be,label:je})=>{const me=Oa[be]??Ir[be]??{high:600,medium:300,low:150};return a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4",children:[a.jsx("h3",{className:"text-gray-900 font-semibold mb-3",children:je}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-green-700 font-semibold mb-1 block",children:"High Threshold (plates)"}),a.jsx("input",{type:"number",value:me.high,onChange:de=>{He({...Oa,[be]:{...me,high:Number(de.target.value)}})},className:"w-full px-3 py-2 border-2 border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-green-50",placeholder:"e.g., 1200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-yellow-700 font-semibold mb-1 block",children:"Medium Threshold (plates)"}),a.jsx("input",{type:"number",value:me.medium,onChange:de=>{He({...Oa,[be]:{...me,medium:Number(de.target.value)}})},className:"w-full px-3 py-2 border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-yellow-50",placeholder:"e.g., 600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-red-700 font-semibold mb-1 block",children:"Low Threshold (plates)"}),a.jsx("input",{type:"number",value:me.low,onChange:de=>{He({...Oa,[be]:{...me,low:Number(de.target.value)}})},className:"w-full px-3 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent bg-red-50",placeholder:"e.g., 300"})]})]})]},be)})}),a.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl border-t-2 border-gray-200 flex justify-between items-center",children:[a.jsx("button",{onClick:()=>{Da(!1),He({})},className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),a.jsxs("button",{onClick:()=>{Tr(Oa),Da(!1),He({}),Qt.success("Stock alert thresholds updated successfully")},className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2",children:[a.jsx(So,{className:"w-5 h-5"}),"Save Thresholds"]})]})]})}),Ke&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full",children:[a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-600 via-blue-500 to-blue-600 p-6 rounded-t-2xl",children:[a.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),a.jsxs("div",{className:"relative flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center border-2 border-white/30",children:a.jsx(Gi,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl text-white",children:"Plate Conversion Settings"}),a.jsx("p",{className:"text-white/80 text-sm",children:"Configure momos per plate"})]})]}),a.jsx("button",{onClick:()=>{pt(!1),Rt(Ie)},className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-all",children:a.jsx(ea,{className:"w-6 h-6 text-white"})})]})]}),a.jsxs("div",{className:"p-6 bg-blue-50 border-b-2 border-blue-200",children:[a.jsx("h3",{className:"text-gray-900 font-semibold mb-2",children:"How it works:"}),a.jsxs("p",{className:"text-sm text-gray-700",children:["Stock will be displayed as both pieces and plates. For example, if you have 170 momos and each plate contains 6 momos, it will show as ",a.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded",children:"170 pcs / 28 plates"}),"."]})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("label",{className:"text-gray-900 font-semibold mb-3 block",children:"Momos Per Plate"}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-300 rounded-xl p-4",children:[a.jsx("input",{type:"number",min:"1",max:"20",value:Nt,onChange:U=>{const we=Number(U.target.value);we>=1&&we<=20&&Rt(we)},className:"w-full px-4 py-3 border-2 border-blue-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-center text-2xl font-bold",placeholder:"6"}),a.jsx("p",{className:"text-xs text-blue-700 mt-2 text-center",children:"Enter a number between 1 and 20"})]}),a.jsxs("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Preview:"}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Stock Available:"}),a.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["170 pcs / ",Math.round(170/Nt)," plates"]})]})]})]}),a.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl border-t-2 border-gray-200 flex justify-between items-center",children:[a.jsx("button",{onClick:()=>{pt(!1),Rt(Ie)},className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),a.jsxs("button",{onClick:()=>{lt(Nt),localStorage.setItem("momosPerPlate",Nt.toString()),pt(!1),Qt.success(`Plate conversion updated: ${Nt} momos per plate`)},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl hover:from-blue-700 hover:to-blue-600 transition-all flex items-center gap-2",children:[a.jsx(So,{className:"w-5 h-5"}),"Save Settings"]})]})]})}),ve&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(QE,{className:"w-6 h-6"}),a.jsx("h3",{className:"text-xl",children:"Leave Details - Today"})]}),a.jsx("button",{onClick:()=>Ee(!1),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-colors",children:a.jsx(ea,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-80px)]",children:I===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(La,{className:"w-8 h-8 text-green-600"})}),a.jsx("p",{className:"text-lg text-gray-900 mb-2",children:"Everyone is working today! "}),a.jsx("p",{className:"text-sm text-gray-600",children:e.user?.storeId?"No employees on leave in this store":"No employees on leave across all stores"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("p",{className:"text-gray-700",children:[a.jsx("span",{className:"text-xl font-bold text-orange-600",children:I})," ",I===1?"employee":"employees"," on leave"]})}),a.jsx("div",{className:"space-y-3",children:V.map((U,we)=>a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:a.jsx(La,{className:"w-5 h-5 text-orange-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900 font-semibold",children:U.employeeName}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Employee ID: ",U.employeeId]})]})]}),a.jsxs("div",{className:"ml-12 space-y-1",children:[U.storeName&&U.storeName!=="N/A"&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Zt,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-gray-700",children:U.storeName}),U.storeId&&U.storeId!=="N/A"&&a.jsxs("span",{className:"text-gray-500",children:["(",U.storeId,")"]})]}),U.reason&&a.jsxs("div",{className:"flex items-start gap-2 text-sm mt-2",children:[a.jsx(ks,{className:"w-4 h-4 text-gray-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 font-medium",children:"Reason:"}),a.jsx("p",{className:"text-gray-700",children:U.reason})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm mt-2",children:[a.jsx(Ur,{className:"w-4 h-4 text-gray-500"}),a.jsxs("span",{className:"text-gray-600",children:["Date: ",Kn(U.leaveDate)]})]})]})]}),a.jsx("div",{className:"ml-4",children:a.jsx("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Approved"})})]})},U.id||we))})]})}),a.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end border-t border-gray-200",children:a.jsx("button",{onClick:()=>Ee(!1),className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})}),F&&a.jsx(exe,{category:F.category,items:F.items,totalAmount:F.amount,onClose:()=>D(null)})]})}function T6({userRole:e,selectedStoreId:t,currentUserId:r}){const[n,s]=P.useState("today"),[i,o]=P.useState(""),[l,d]=P.useState(""),[u,f]=P.useState("csv"),[m,p]=P.useState(!1),[g,b]=P.useState(!1),[y,v]=P.useState(null),[k,S]=P.useState(null),w=ju();P.useEffect(()=>{(async()=>{const{data:{session:D}}=await w.auth.getSession();D?.access_token&&S(D.access_token)})()},[]);const A=()=>{const F=new Date;let D,H;switch(n){case"today":D=F.toISOString().split("T")[0],H=D;break;case"weekly":const ne=new Date(F);ne.setDate(F.getDate()-7),D=ne.toISOString().split("T")[0],H=F.toISOString().split("T")[0];break;case"monthly":const W=new Date(F.getFullYear(),F.getMonth(),1),ee=new Date(F.getFullYear(),F.getMonth()+1,0);D=W.toISOString().split("T")[0],H=ee.toISOString().split("T")[0];break;case"custom":D=i,H=l;break}return{startDate:D,endDate:H}},C=async()=>{const{startDate:F,endDate:D}=A();if(!F||!D)return alert("Please select a valid date range"),null;if(!k)return alert("Not authenticated. Please log in again."),null;try{p(!0);const[H,ne,W,ee,re,Q]=await Promise.all([_g(k),Eg(k),I2(k),El(),Co(),Cg()]),R=(ue,ge="date")=>ue.filter(Fe=>{const J=Fe[ge],Ze=J>=F&&J<=D;if(t){const Tt=Fe.storeId===t;return Ze&&Tt}return Ze}),X=R(H),L=R(ne),I=R(W),G=R(re),V=R(Q);console.log("Export Data Debug:",{selectedStoreId:t,totalInventory:H.length,filteredInventory:X.length,totalSales:W.length,filteredSales:I.length,totalOverheads:ne.length,filteredOverheads:L.length,sampleSalesStoreIds:W.slice(0,3).map(ue=>({date:ue.date,storeId:ue.storeId})),sampleOverheadStoreIds:ne.slice(0,3).map(ue=>({date:ue.date,storeId:ue.storeId}))});const Z=X.reduce((ue,ge)=>ue+(ge.totalCost||0),0),ve=L.reduce((ue,ge)=>ue+(ge.amount||0),0),Ee=I.reduce((ue,ge)=>ue+(ge.offlineSales||0)+(ge.onlineSales||0),0),Te=G.reduce((ue,ge)=>ue+(ge.amount||0),0);return{startDate:F,endDate:D,storeId:t,inventory:X,overheads:L,sales:I,employees:ee,payouts:G,production:V,summary:{totalInventorySpend:Z,totalOverheadSpend:ve,totalSales:Ee,totalPayouts:Te}}}catch(H){return console.error("Error fetching export data:",H),alert("Failed to fetch data for export"),null}finally{p(!1)}},N=async()=>{const F=await C();F&&(v(F),b(!0))},E=F=>{let D=`Data Export Report
`;return D+=`Period: ${F.startDate} to ${F.endDate}
`,F.storeId&&(D+=`Store ID: ${F.storeId}
`),D+=`Generated on: ${new Date().toLocaleString()}

`,D+=`SUMMARY
`,D+=`Total Inventory Spend,${F.summary.totalInventorySpend.toLocaleString()}
`,D+=`Total Overhead Spend,${F.summary.totalOverheadSpend.toLocaleString()}
`,D+=`Total Sales,${F.summary.totalSales.toLocaleString()}
`,D+=`Total Payouts,${F.summary.totalPayouts.toLocaleString()}
`,D+=`Net Profit/Loss,${(F.summary.totalSales-F.summary.totalInventorySpend-F.summary.totalOverheadSpend-F.summary.totalPayouts).toLocaleString()}

`,D+=`
INVENTORY ITEMS
`,D+=`Date,Category,Item Name,Quantity,Unit,Price per Unit,Total Cost
`,F.inventory.forEach(H=>{D+=`${H.date},"${H.category}","${H.itemName}",${H.quantity},"${H.unit}",${H.price||0},${H.totalCost}
`}),F.production&&F.production.length>0&&(D+=`
PRODUCTION DATA
`,D+=`Date,Chicken Momos,Chicken Cheese,Veg Momos,Cheese Corn,Paneer,Veg Kurkure,Chicken Kurkure,Wastage (kg)
`,F.production.forEach(H=>{D+=`${H.date},${H.chickenMomos?.final||0},${H.chickenCheeseMomos?.final||0},${H.vegMomos?.final||0},${H.cheeseCornMomos?.final||0},${H.paneerMomos?.final||0},${H.vegKurkureMomos?.final||0},${H.chickenKurkureMomos?.final||0},${H.wastage?.total||0}
`})),D+=`
OVERHEAD EXPENSES
`,D+=`Date,Category,Description,Amount
`,F.overheads.forEach(H=>{D+=`${H.date},"${H.category}","${H.description||"-"}",${H.amount}
`}),D+=`
SALES DATA
`,D+=`Date,Offline Sales (Paytm),Offline Sales (Cash),Online Sales,Employee Salaries,Cash in Hand,Cash Offset,Status
`,F.sales.forEach(H=>{D+=`${H.date},${H.paytmAmount||0},${H.cashAmount||0},${H.onlineSales||0},${H.employeeSalary||0},${H.actualCashInHand||0},${H.cashOffset||0},"${H.approvalRequired?"Pending Approval":"Approved"}"
`}),D+=`
EMPLOYEE PAYOUTS
`,D+=`Date,Employee Name,Employee ID,Amount
`,F.payouts.forEach(H=>{const ne=F.employees.find(W=>W.id===H.employeeId);D+=`${H.date},"${H.employeeName}","${ne?.employeeId||"-"}",${H.amount}
`}),D+=`
EMPLOYEE MASTER LIST
`,D+=`Employee ID,Name,Type,Role,Phone,Daily Rate
`,F.employees.forEach(H=>{D+=`"${H.employeeId}","${H.name}","${H.type}","${H.role||"-"}","${H.phone}",${H.dailyRate||"-"}
`}),D},_=F=>E(F),O=F=>`
      <html>
        <head>
          <title>Data Export Report</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; }
            h1 { color: #333; border-bottom: 2px solid #4F46E5; padding-bottom: 10px; }
            h2 { color: #4F46E5; margin-top: 30px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #4F46E5; color: white; }
            .summary { background-color: #f0f9ff; padding: 15px; border-radius: 8px; margin: 20px 0; }
            .summary-item { display: flex; justify-content: space-between; padding: 5px 0; }
          </style>
        </head>
        <body>
          <h1>Data Export Report</h1>
          <p><strong>Period:</strong> ${F.startDate} to ${F.endDate}</p>
          ${F.storeId?`<p><strong>Store ID:</strong> ${F.storeId}</p>`:""}
          <p><strong>Generated on:</strong> ${new Date().toLocaleString()}</p>
          
          <div class="summary">
            <h2>Summary</h2>
            <div class="summary-item"><span>Total Inventory Spend:</span><span>${F.summary.totalInventorySpend.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Overhead Spend:</span><span>${F.summary.totalOverheadSpend.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Sales:</span><span>${F.summary.totalSales.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Payouts:</span><span>${F.summary.totalPayouts.toLocaleString()}</span></div>
            <div class="summary-item"><strong>Net Profit/Loss:</strong><strong>${(F.summary.totalSales-F.summary.totalInventorySpend-F.summary.totalOverheadSpend-F.summary.totalPayouts).toLocaleString()}</strong></div>
          </div>

          <h2>Inventory Items</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Category</th><th>Item Name</th><th>Quantity</th><th>Unit</th><th>Price/Unit</th><th>Total Cost</th></tr>
            </thead>
            <tbody>
              ${F.inventory.map(H=>`
                <tr>
                  <td>${H.date}</td>
                  <td>${H.category}</td>
                  <td>${H.itemName}</td>
                  <td>${H.quantity}</td>
                  <td>${H.unit}</td>
                  <td>${H.price||0}</td>
                  <td>${H.totalCost}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          ${F.production&&F.production.length>0?`
          <h2>Production Data</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Chicken Momos</th><th>Chicken Cheese</th><th>Veg Momos</th><th>Cheese Corn</th><th>Paneer</th><th>Veg Kurkure</th><th>Chicken Kurkure</th><th>Wastage (kg)</th></tr>
            </thead>
            <tbody>
              ${F.production.map(H=>`
                <tr>
                  <td>${H.date}</td>
                  <td>${H.chickenMomos?.final||0}</td>
                  <td>${H.chickenCheeseMomos?.final||0}</td>
                  <td>${H.vegMomos?.final||0}</td>
                  <td>${H.cheeseCornMomos?.final||0}</td>
                  <td>${H.paneerMomos?.final||0}</td>
                  <td>${H.vegKurkureMomos?.final||0}</td>
                  <td>${H.chickenKurkureMomos?.final||0}</td>
                  <td>${H.wastage?.total||0}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
          `:""}

          <h2>Overhead Expenses</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Category</th><th>Description</th><th>Amount</th></tr>
            </thead>
            <tbody>
              ${F.overheads.map(H=>`
                <tr>
                  <td>${H.date}</td>
                  <td>${H.category}</td>
                  <td>${H.description||"-"}</td>
                  <td>${H.amount}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <h2>Sales Data</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Offline (Paytm)</th><th>Offline (Cash)</th><th>Online</th><th>Salaries</th><th>Cash in Hand</th><th>Cash Offset</th><th>Status</th></tr>
            </thead>
            <tbody>
              ${F.sales.map(H=>`
                <tr>
                  <td>${H.date}</td>
                  <td>${H.paytmAmount||0}</td>
                  <td>${H.cashAmount||0}</td>
                  <td>${H.onlineSales||0}</td>
                  <td>${H.employeeSalary||0}</td>
                  <td>${H.actualCashInHand||0}</td>
                  <td>${H.cashOffset||0}</td>
                  <td>${H.approvalRequired?"Pending":"Approved"}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <h2>Employee Payouts</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Employee Name</th><th>Employee ID</th><th>Amount</th></tr>
            </thead>
            <tbody>
              ${F.payouts.map(H=>{const ne=F.employees.find(W=>W.id===H.employeeId);return`
                  <tr>
                    <td>${H.date}</td>
                    <td>${H.employeeName}</td>
                    <td>${ne?.employeeId||"-"}</td>
                    <td>${H.amount}</td>
                  </tr>
                `}).join("")}
            </tbody>
          </table>

          <h2>Employee Master List</h2>
          <table>
            <thead>
              <tr><th>Employee ID</th><th>Name</th><th>Type</th><th>Role</th><th>Phone</th><th>Daily Rate</th></tr>
            </thead>
            <tbody>
              ${F.employees.map(H=>`
                <tr>
                  <td>${H.employeeId}</td>
                  <td>${H.name}</td>
                  <td>${H.type}</td>
                  <td>${H.role||"-"}</td>
                  <td>${H.phone}</td>
                  <td>${H.dailyRate?""+H.dailyRate:"-"}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        </body>
      </html>
    `,B=async()=>{const F=await C();if(!F)return;let D,H,ne;const W=`${F.startDate}_to_${F.endDate}`;switch(u){case"csv":D=E(F),H="text/csv",ne=`export_${W}.csv`;break;case"excel":D=_(F),H="application/vnd.ms-excel",ne=`export_${W}.xls`;break;case"pdf":D=O(F),H="text/html",ne=`export_${W}.html`;break;default:return}const ee=new Blob([D],{type:H}),re=URL.createObjectURL(ee),Q=document.createElement("a");Q.href=re,Q.download=ne,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),URL.revokeObjectURL(re),alert(`Data exported successfully as ${ne}`)};return a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Export Data"}),a.jsx("p",{className:"text-gray-600",children:"Download comprehensive reports in multiple formats"}),t&&a.jsxs("div",{className:"mt-2 inline-block bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm",children:["Store: ",t]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Ur,{className:"w-5 h-5 text-purple-600"}),"Select Date Range"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[a.jsxs("button",{onClick:()=>s("today"),className:`p-4 rounded-lg border-2 transition-all ${n==="today"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[a.jsx("div",{className:"font-medium",children:"Today"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Current day"})]}),a.jsxs("button",{onClick:()=>s("weekly"),className:`p-4 rounded-lg border-2 transition-all ${n==="weekly"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[a.jsx("div",{className:"font-medium",children:"Last 7 Days"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Weekly data"})]}),a.jsxs("button",{onClick:()=>s("monthly"),className:`p-4 rounded-lg border-2 transition-all ${n==="monthly"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[a.jsx("div",{className:"font-medium",children:"This Month"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Monthly data"})]}),a.jsxs("button",{onClick:()=>s("custom"),className:`p-4 rounded-lg border-2 transition-all ${n==="custom"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[a.jsx("div",{className:"font-medium",children:"Custom"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Select range"})]})]}),n==="custom"&&a.jsx("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Start Date"}),a.jsx("input",{type:"date",value:i,onChange:F=>o(F.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"End Date"}),a.jsx("input",{type:"date",value:l,onChange:F=>d(F.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(ks,{className:"w-5 h-5 text-blue-600"}),"Select Export Format"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("button",{onClick:()=>f("csv"),className:`p-4 rounded-lg border-2 transition-all ${u==="csv"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[a.jsx(ZB,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("div",{className:"font-medium",children:"CSV"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Excel compatible"})]}),a.jsxs("button",{onClick:()=>f("excel"),className:`p-4 rounded-lg border-2 transition-all ${u==="excel"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[a.jsx(Qm,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("div",{className:"font-medium",children:"Excel"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"XLS format"})]}),a.jsxs("button",{onClick:()=>f("pdf"),className:`p-4 rounded-lg border-2 transition-all ${u==="pdf"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[a.jsx(ks,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("div",{className:"font-medium",children:"PDF/HTML"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Print ready"})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#E8D5F2] to-[#D4B5F0] rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Export Will Include:"}),a.jsxs("ul",{className:"space-y-1 text-sm text-gray-700",children:[a.jsx("li",{children:" Complete Inventory Items with quantities and costs"}),a.jsx("li",{children:" Production Data with all momo types and wastage"}),a.jsx("li",{children:" All Overhead Expenses categorized"}),a.jsx("li",{children:" Sales Data with payment breakdowns"}),a.jsx("li",{children:" Employee Payouts with detailed records"}),a.jsx("li",{children:" Employee Master List"}),a.jsx("li",{children:" Financial Summary with profit/loss calculations"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:N,disabled:m,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 border-2 border-purple-600 text-purple-700 rounded-lg hover:bg-purple-50 transition-colors disabled:opacity-50",children:[a.jsx(ks,{className:"w-5 h-5"}),"Preview Data"]}),a.jsxs("button",{onClick:B,disabled:m,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-colors disabled:opacity-50",children:[a.jsx(Ms,{className:"w-5 h-5"}),m?"Generating...":"Export Data"]})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Export Tips"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" CSV files can be opened in Excel, Google Sheets, or any spreadsheet application"}),a.jsx("li",{children:" PDF/HTML exports are best for printing or sharing reports"}),a.jsx("li",{children:" Custom date ranges allow you to export specific time periods"}),a.jsx("li",{children:" All monetary values are in Indian Rupees ()"})]})]})]})}),e==="cluster_head"&&a.jsx("div",{className:"mt-6 bg-red-50 border-2 border-red-200 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-white text-lg",children:""})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Production Data Cleanup"}),a.jsxs("p",{className:"text-sm text-red-800 mb-4",children:["Remove ALL transactional data (inventory logs, sales, stock requests, production data, notifications, etc.) to prepare for production launch.",a.jsx("strong",{className:"block mt-2",children:" This will DELETE:"})]}),a.jsxs("ul",{className:"text-sm text-red-800 space-y-1 ml-4 mb-3",children:[a.jsx("li",{children:" All inventory purchase logs"}),a.jsx("li",{children:" All sales records"}),a.jsx("li",{children:" All production logs & requests"}),a.jsx("li",{children:" All stock requests & recalibrations"}),a.jsx("li",{children:" All overhead & fixed costs"}),a.jsx("li",{children:" All notifications"})]}),a.jsx("p",{className:"text-sm text-green-800 mb-4",children:a.jsx("strong",{className:"block mt-2",children:" This will PRESERVE:"})}),a.jsxs("ul",{className:"text-sm text-green-800 space-y-1 ml-4 mb-4",children:[a.jsx("li",{children:" Inventory Items (product metadata)"}),a.jsx("li",{children:" Employee Master Data"}),a.jsx("li",{children:" Employee Payouts, Timesheets & Leaves"}),a.jsx("li",{children:" Stores & Production Houses"})]}),a.jsxs("button",{onClick:async()=>{if(confirm(` CRITICAL WARNING: This will PERMANENTLY remove ALL transactional data:

 Inventory logs, Sales, Production data, Stock requests, Overheads, Fixed costs, Notifications

 PRESERVED: Inventory items metadata, Employee master data, Payouts, Timesheets, Leaves, Stores, Production houses

This action CANNOT be undone!

Are you absolutely sure you want to proceed?`))try{p(!0);const F=await RI();alert(` ${F.message}

 Total Deleted: ${F.totalDeleted} records

 Breakdown:
- Inventory Logs: ${F.stats.inventory}
- Sales: ${F.stats.sales}
- Item Sales: ${F.stats.itemSales}
- Overheads: ${F.stats.overheads}
- Fixed Costs: ${F.stats.fixedCosts}
- Stock Requests: ${F.stats.stockRequests}
- Stock Recalibrations: ${F.stats.stockRecalibrations}
- Production Data: ${F.stats.productionData}
- Production Requests: ${F.stats.productionRequests}
- Notifications: ${F.stats.notifications}`),window.location.reload()}catch(F){console.error("Error during cleanup:",F),alert(` Failed to cleanup production data: ${F.message}`)}finally{p(!1)}},disabled:m,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:[a.jsx("span",{children:""}),m?"Cleaning up...":"Cleanup Production Data"]}),a.jsx("p",{className:"text-xs text-red-700 mt-3",children:" This action cannot be undone. Make sure you have exported all necessary data first."})]})]})})]}),g&&y&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Data Preview"}),a.jsx("button",{onClick:()=>b(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(ea,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Summary"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Inventory"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalInventorySpend.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Overheads"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalOverheadSpend.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Sales"}),a.jsxs("div",{className:"text-xl text-green-600",children:["",y.summary.totalSales.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Payouts"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalPayouts.toLocaleString()]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-purple-200",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-medium text-gray-900",children:"Net Profit/Loss:"}),a.jsxs("span",{className:`text-xl font-bold ${y.summary.totalSales-y.summary.totalInventorySpend-y.summary.totalOverheadSpend-y.summary.totalPayouts>=0?"text-green-600":"text-red-600"}`,children:["",(y.summary.totalSales-y.summary.totalInventorySpend-y.summary.totalOverheadSpend-y.summary.totalPayouts).toLocaleString()]})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Inventory Items"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.inventory.length})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Production Logs"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.production?.length||0})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Overhead Entries"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.overheads.length})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Sales Records"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.sales.length})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Payout Records"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.payouts.length})]})]}),a.jsxs("div",{className:"text-sm text-gray-600 text-center",children:[a.jsxs("p",{children:["Period: ",y.startDate," to ",y.endDate]}),y.storeId&&a.jsxs("p",{children:["Store ID: ",y.storeId]}),a.jsx("p",{className:"mt-2",children:'Click "Export Data" to download the complete report'})]})]})]})})]})}const axe=(e,t,r,n,s,i)=>{const o=s.reduce((u,f)=>u+f.amount,0),l=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>Payslip - ${r} ${n}</title>
      <style>
        body {
          font-family: 'Arial', sans-serif;
          margin: 0;
          padding: 20px;
          color: #333;
        }
        .payslip-container {
          max-width: 800px;
          margin: 0 auto;
          border: 2px solid #9333ea;
          padding: 30px;
          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
        }
        .header {
          text-align: center;
          border-bottom: 3px solid #9333ea;
          padding-bottom: 20px;
          margin-bottom: 30px;
        }
        .company-name {
          font-size: 32px;
          font-weight: bold;
          color: #9333ea;
          margin-bottom: 5px;
        }
        .company-tagline {
          font-size: 14px;
          color: #666;
          font-style: italic;
        }
        .payslip-title {
          font-size: 24px;
          color: #9333ea;
          margin: 20px 0 10px 0;
          font-weight: bold;
        }
        .payslip-period {
          font-size: 16px;
          color: #666;
          margin-bottom: 20px;
        }
        .info-section {
          display: table;
          width: 100%;
          margin-bottom: 30px;
        }
        .info-row {
          display: table-row;
        }
        .info-label {
          display: table-cell;
          padding: 10px 0;
          font-weight: bold;
          color: #9333ea;
          width: 40%;
        }
        .info-value {
          display: table-cell;
          padding: 10px 0;
          color: #333;
        }
        .payment-table {
          width: 100%;
          border-collapse: collapse;
          margin: 20px 0;
          background: white;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .payment-table th {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 12px;
          text-align: left;
          font-weight: bold;
        }
        .payment-table td {
          padding: 12px;
          border-bottom: 1px solid #e5e7eb;
        }
        .payment-table tr:last-child td {
          border-bottom: none;
        }
        .payment-table tr:nth-child(even) {
          background: #faf5ff;
        }
        .total-section {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 20px;
          margin-top: 30px;
          border-radius: 8px;
          text-align: center;
        }
        .total-label {
          font-size: 18px;
          margin-bottom: 10px;
        }
        .total-amount {
          font-size: 36px;
          font-weight: bold;
        }
        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 2px solid #9333ea;
          text-align: center;
          font-size: 12px;
          color: #666;
        }
        .signature-section {
          margin-top: 60px;
          display: flex;
          justify-content: space-between;
        }
        .signature-box {
          text-align: center;
          width: 45%;
        }
        .signature-line {
          border-top: 2px solid #9333ea;
          margin-top: 50px;
          padding-top: 10px;
          font-weight: bold;
          color: #9333ea;
        }
        @media print {
          body {
            padding: 0;
          }
          .payslip-container {
            border: none;
            box-shadow: none;
          }
        }
      </style>
    </head>
    <body>
      <div class="payslip-container">
        <div class="header">
          <div class="company-name">BHANDAR-IMS</div>
          <div class="company-tagline">Food Business Inventory Management System</div>
          <div class="payslip-title">SALARY SLIP</div>
          <div class="payslip-period">For the Month of ${r} ${n}</div>
        </div>
        
        <div class="info-section">
          <div class="info-row">
            <div class="info-label">Employee Name:</div>
            <div class="info-value">${e}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee ID:</div>
            <div class="info-value">${t}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee Type:</div>
            <div class="info-value">${i==="fulltime"?"Permanent":"Contract"}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Payment Date:</div>
            <div class="info-value">${new Date().toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})}</div>
          </div>
        </div>

        <table class="payment-table">
          <thead>
            <tr>
              <th>Payment Date</th>
              <th>Description</th>
              <th style="text-align: right;">Amount ()</th>
            </tr>
          </thead>
          <tbody>
            ${s.map(u=>`
              <tr>
                <td>${new Date(u.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}</td>
                <td>${i==="fulltime"?"Salary Payment":"Daily Wage Payment"}</td>
                <td style="text-align: right;">${u.amount.toLocaleString("en-IN")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="total-section">
          <div class="total-label">Net ${i==="fulltime"?"Salary":"Payment"} for ${r} ${n}</div>
          <div class="total-amount">${o.toLocaleString("en-IN")}</div>
        </div>

        <div class="signature-section">
          <div class="signature-box">
            <div class="signature-line">Employee Signature</div>
          </div>
          <div class="signature-box">
            <div class="signature-line">Authorized Signatory</div>
          </div>
        </div>

        <div class="footer">
          <p>This is a computer-generated payslip and does not require a signature.</p>
          <p> ${n} Bhandar-IMS. All rights reserved.</p>
        </div>
      </div>
    </body>
    </html>
  `,d=window.open("","_blank");d&&(d.document.write(l),d.document.close(),d.onload=()=>{d.print()})};function D6({employeeId:e}){const[t,r]=P.useState(null),[n,s]=P.useState([]),[i,o]=P.useState(!0),[l,d]=P.useState("payouts"),[u,f]=P.useState(()=>{const W=new Date;return`${W.getFullYear()}-${String(W.getMonth()+1).padStart(2,"0")}`}),[m,p]=P.useState(null),[g,b]=P.useState(null),[y,v]=P.useState([]),[k,S]=P.useState(!1),[w,A]=P.useState("");P.useEffect(()=>{C()},[e]);const C=async()=>{try{o(!0);const W=await El(),ee=W.find(re=>re.employeeId===e);if(ee){r(ee);const Q=(await Co()).filter(L=>L.employeeId===ee.id);s(Q);const X=(await $2()).filter(L=>L.employeeId===ee.id);if(v(X),ee.inchargeId){const L=W.find(I=>I.id===ee.inchargeId);if(L&&(p(L),L.inchargeId)){const I=W.find(G=>G.id===L.inchargeId);I&&b(I)}}}}catch(W){console.error("Error loading employee data:",W)}finally{o(!1)}},N=async()=>{try{const W=parseFloat(w);if(!W||W<=0){alert("Please enter a valid amount");return}if(!t.monthlySalary){alert("Your salary information is not available. Please contact HR.");return}if(W>t.monthlySalary){alert("Advance amount cannot exceed your monthly salary");return}if(y.find(V=>V.status==="pending"||V.status==="approved"&&V.remainingAmount>0)){alert("You already have an active or pending salary advance. Please wait for it to be processed or completed.");return}const re=W/4,Q=new Date,R=`${Q.getFullYear()}-${String(Q.getMonth()+1).padStart(2,"0")}`,X=[];for(let V=0;V<4;V++){const Z=new Date(Q.getFullYear(),Q.getMonth()+V,1),ve=`${Z.getFullYear()}-${String(Z.getMonth()+1).padStart(2,"0")}`;X.push({month:ve,amount:re,deducted:!1})}const L=new Date(Q.getFullYear(),Q.getMonth()+3,1),I=`${L.getFullYear()}-${String(L.getMonth()+1).padStart(2,"0")}`,G={employeeId:t.id,employeeName:t.name,employeeEmployeeId:t.employeeId,amount:W,requestDate:new Date().toISOString(),status:"pending",installments:4,monthlyDeduction:re,remainingAmount:W,startMonth:R,endMonth:I,deductions:X};await L2(G),alert("Salary advance request submitted successfully! Your request will be reviewed by the Cluster Head."),S(!1),A(""),C()}catch(W){console.error("Error applying for salary advance:",W),alert("Failed to submit salary advance request. Please try again.")}},_=(()=>{if(!u)return n;const[W,ee]=u.split("-");return n.filter(re=>{const Q=new Date(re.date);return Q.getFullYear()===parseInt(W)&&Q.getMonth()+1===parseInt(ee)})})(),O=_.reduce((W,ee)=>W+ee.amount,0),B=(W,ee)=>!W&&!ee?"N/A":W?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",operations_manager:"Operations Manager",store_ops:"Store Operations",production_ops:"Production Operations"}[W]||W:{cluster_head:"Cluster Head",manager:"Manager",employee:"Employee"}[ee||""]||ee||"N/A",F=W=>["January","February","March","April","May","June","July","August","September","October","November","December"][W],H=(()=>{const W=new Date,ee=[];for(let re=0;re<12;re++){const Q=new Date(W.getFullYear(),W.getMonth()-re,1),R=F(Q.getMonth()),X=Q.getFullYear().toString(),L=n.filter(Z=>{const ve=new Date(Z.date);return ve.getMonth()===Q.getMonth()&&ve.getFullYear()===Q.getFullYear()}),I=L.reduce((Z,ve)=>Z+ve.amount,0),G=new Date(Q.getFullYear(),Q.getMonth()+1,5),V=W>=G;ee.push({month:R,year:X,payouts:L,total:I,isAvailable:V})}return ee})(),ne=()=>{const W=[],ee=new Date;for(let re=0;re<12;re++){const Q=new Date(ee.getFullYear(),ee.getMonth()-re,1),R=`${Q.getFullYear()}-${String(Q.getMonth()+1).padStart(2,"0")}`;W.push({value:R,label:Q.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}return W};return i?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your data..."})]})}):t?a.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Welcome, ",t.name,"!"]}),a.jsx("p",{className:"text-gray-600",children:"View your payout history and employee details"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl shadow-sm p-6 mb-6",children:[a.jsx("h2",{className:"text-lg text-gray-900 mb-4",children:"Employee Information"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Employee ID"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.employeeId})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Name"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.name})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Type"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.type==="fulltime"?" Permanent":" Contract"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Role"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.role||"N/A"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Phone"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.phone})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Email"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.email||"N/A"})]}),t.dailyRate&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Daily Rate"}),a.jsxs("div",{className:"font-medium text-gray-900",children:["",t.dailyRate]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"My Details"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>d("payouts"),className:`px-6 py-2 rounded-lg transition-colors ${l==="payouts"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ii,{className:"w-4 h-4"}),a.jsx("span",{children:"My Payouts"})]})}),a.jsx("button",{onClick:()=>d("advance"),className:`px-6 py-2 rounded-lg transition-colors ${l==="advance"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Po,{className:"w-4 h-4"}),a.jsx("span",{children:"Salary Advance"})]})}),a.jsx("button",{onClick:()=>d("manager"),className:`px-6 py-2 rounded-lg transition-colors ${l==="manager"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tn,{className:"w-4 h-4"}),a.jsx("span",{children:"My Manager"})]})})]})]}),a.jsxs("div",{className:"p-6",children:[l==="payouts"&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("h3",{className:"text-lg text-gray-900 flex items-center gap-2",children:[a.jsx(Ur,{className:"w-5 h-5 text-blue-600"}),"Select Month"]})}),a.jsx("select",{value:u,onChange:W=>f(W.target.value),className:"w-full md:w-auto px-4 py-2 border border-gray-300 rounded-lg",children:ne().map(W=>a.jsx("option",{value:W.value,children:W.label},W.value))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-6 border border-green-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Total Payouts"}),a.jsx(ca,{className:"w-5 h-5 text-green-600"})]}),a.jsxs("div",{className:"text-2xl text-gray-900",children:["",O.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[_.length," payment",_.length!==1?"s":""]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg p-6 border border-blue-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Average Payout"}),a.jsx(fa,{className:"w-5 h-5 text-blue-600"})]}),a.jsxs("div",{className:"text-2xl text-gray-900",children:["",_.length>0?Math.round(O/_.length).toLocaleString():0]}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Per payment"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-6 border border-purple-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Payment Days"}),a.jsx(ii,{className:"w-5 h-5 text-purple-600"})]}),a.jsx("div",{className:"text-2xl text-gray-900",children:_.length}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"This month"})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl overflow-hidden mb-6",children:[a.jsx("div",{className:"p-4 bg-white border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:"Payout History"})}),_.length===0?a.jsxs("div",{className:"p-12 text-center bg-white",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ii,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h4",{className:"text-lg text-gray-900 mb-2",children:"No Payouts Yet"}),a.jsx("p",{className:"text-gray-600",children:"No payouts recorded for the selected month."})]}):a.jsx("div",{className:"overflow-x-auto bg-white",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Status"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:_.sort((W,ee)=>new Date(ee.date).getTime()-new Date(W.date).getTime()).map(W=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:new Date(W.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),a.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-green-600",children:["",W.amount.toLocaleString()]}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:t.type==="fulltime"?"Salary":"Daily Wage"}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:" Paid"})})]},W.id))})]})})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl overflow-hidden",children:[a.jsxs("div",{className:"p-4 bg-white border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ks,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-lg text-gray-900",children:"Monthly Payslips"})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Payslips are available for download after the 4th of each month"})]}),a.jsx("div",{className:"p-6 bg-white",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:H.map((W,ee)=>a.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${W.isAvailable&&W.payouts.length>0?"border-purple-300 bg-gradient-to-br from-purple-50 to-pink-50 hover:shadow-lg":"border-gray-200 bg-gray-50 opacity-60"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-900 font-semibold",children:[W.month," ",W.year]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[W.payouts.length," payment",W.payouts.length!==1?"s":""]})]}),W.isAvailable&&W.payouts.length>0?a.jsxs("button",{onClick:()=>axe(t.name,t.employeeId,W.month,W.year,W.payouts,t.type),className:"flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",title:"Download Payslip",children:[a.jsx(Ms,{className:"w-4 h-4"}),"Download"]}):a.jsx("div",{className:"px-3 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm cursor-not-allowed",children:W.payouts.length===0?"No Data":"Not Available"})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-300",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Amount"}),a.jsxs("p",{className:"text-xl text-gray-900 font-semibold",children:["",W.total.toLocaleString("en-IN")]})]})]},ee))})})]})]}),l==="advance"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 font-semibold",children:"Salary Advance"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Apply for salary advance with automatic 4-month recovery"})]}),t.type==="fulltime"&&a.jsxs("button",{onClick:()=>S(!0),disabled:y.some(W=>W.status==="pending"||W.status==="approved"&&W.remainingAmount>0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Po,{className:"w-5 h-5"}),a.jsx("span",{children:"Apply for Advance"})]})]}),t.type!=="fulltime"&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-yellow-800 font-medium",children:"Not Available"}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Salary advance is only available for permanent employees"})]})]})}),y.length>0?a.jsx("div",{className:"space-y-4",children:y.map(W=>a.jsxs("div",{className:`border-2 rounded-xl p-6 ${W.status==="pending"?"border-yellow-300 bg-yellow-50":W.status==="approved"?"border-green-300 bg-green-50":"border-red-300 bg-red-50"}`,children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["",W.amount.toLocaleString("en-IN")," Advance"]}),W.status==="pending"&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200",children:[a.jsx(Aa,{className:"w-3 h-3"}),"Pending Approval"]}),W.status==="approved"&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:[a.jsx(lr,{className:"w-3 h-3"}),"Approved"]}),W.status==="rejected"&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 border border-red-200",children:[a.jsx(en,{className:"w-3 h-3"}),"Rejected"]})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Applied on ",new Date(W.requestDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]})}),W.status==="rejected"&&W.rejectionReason&&a.jsxs("div",{className:"bg-red-100 border border-red-200 rounded-lg p-3 mb-4",children:[a.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:"Rejection Reason:"}),a.jsx("p",{className:"text-sm text-red-700",children:W.rejectionReason})]}),W.status==="approved"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Monthly Deduction"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",W.monthlyDeduction.toLocaleString("en-IN")]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Remaining Balance"}),a.jsxs("p",{className:"text-lg font-semibold text-orange-600",children:["",W.remainingAmount.toLocaleString("en-IN")]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Start Month"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:(()=>{const[ee,re]=W.startMonth.split("-");return new Date(parseInt(ee),parseInt(re)-1,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})()})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"End Month"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:(()=>{const[ee,re]=W.endMonth.split("-");return new Date(parseInt(ee),parseInt(re)-1,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})()})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4",children:[a.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Deduction Schedule"}),a.jsx("div",{className:"space-y-2",children:W.deductions.map((ee,re)=>a.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${ee.deducted?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[ee.deducted?a.jsx(lr,{className:"w-5 h-5 text-green-600"}):a.jsx(Aa,{className:"w-5 h-5 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(ee.month+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}),ee.deducted&&ee.deductedDate&&a.jsxs("p",{className:"text-xs text-gray-600",children:["Deducted on ",new Date(ee.deductedDate).toLocaleDateString("en-IN")]})]})]}),a.jsxs("p",{className:`text-sm font-semibold ${ee.deducted?"text-green-700":"text-gray-700"}`,children:["",ee.amount.toLocaleString("en-IN")]})]},re))})]})]})]},W.id))}):a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[a.jsx(Po,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600 font-medium mb-1",children:"No Salary Advances Yet"}),a.jsx("p",{className:"text-sm text-gray-500",children:t.type==="fulltime"?'Click "Apply for Advance" to request a salary advance':"Salary advance is only available for permanent employees"})]})]}),l==="manager"&&a.jsx("div",{children:m?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl flex-shrink-0",children:m.name.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-2xl text-gray-900 mb-1",children:m.name}),a.jsx("p",{className:"text-sm text-purple-700 font-medium mb-3",children:"Your Manager / Incharge"}),a.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:m.type==="fulltime"?"Permanent Employee":"Contract Employee"})]})]})}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[a.jsxs("h4",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Td,{className:"w-5 h-5 text-blue-600"}),"Contact Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(Td,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Phone Number"}),a.jsx("div",{className:"font-medium text-gray-900",children:m.phone||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(jc,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Email Address"}),a.jsx("div",{className:"font-medium text-gray-900",children:m.email||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(Jm,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Role / Position"}),a.jsx("div",{className:"font-medium text-gray-900",children:B(m.designation,m.role)||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(tn,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Employee ID"}),a.jsx("div",{className:"font-medium text-gray-900",children:m.employeeId||"N/A"})]})]})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Manager"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" Your manager is responsible for processing your payouts and leave requests"}),a.jsx("li",{children:" For any work-related queries or concerns, please contact your manager"}),a.jsx("li",{children:" Your manager has been assigned by the cluster head to oversee your work"})]})]})]})}),g&&a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl flex-shrink-0",children:g.name.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-2xl text-gray-900 mb-1",children:g.name}),a.jsx("p",{className:"text-sm text-purple-700 font-medium mb-3",children:"Senior Manager / Incharge"}),a.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:g.type==="fulltime"?"Permanent Employee":"Contract Employee"})]})]})}),g&&a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[a.jsxs("h4",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Td,{className:"w-5 h-5 text-blue-600"}),"Contact Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(Td,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Phone Number"}),a.jsx("div",{className:"font-medium text-gray-900",children:g.phone||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(jc,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Email Address"}),a.jsx("div",{className:"font-medium text-gray-900",children:g.email||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(Jm,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Role / Position"}),a.jsx("div",{className:"font-medium text-gray-900",children:B(g.designation,g.role)||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(tn,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Employee ID"}),a.jsx("div",{className:"font-medium text-gray-900",children:g.employeeId||"N/A"})]})]})]})]}),g&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Senior Manager"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" Your senior manager is responsible for processing your payouts and leave requests"}),a.jsx("li",{children:" For any work-related queries or concerns, please contact your senior manager"}),a.jsx("li",{children:" Your senior manager has been assigned by the cluster head to oversee your work"})]})]})]})})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(tn,{className:"w-10 h-10 text-gray-400"})}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Manager Assigned"}),a.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"You don't have a manager or incharge assigned yet. Please contact your cluster head for more information."})]})})]})]}),l==="payouts"&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Payouts"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" All payouts are processed and recorded by your manager or cluster head"}),a.jsx("li",{children:" This dashboard shows only your personal payout history"}),a.jsx("li",{children:" For any discrepancies, please contact your manager"}),a.jsx("li",{children:" Payment history is available for the last 12 months"})]})]})]})}),k&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Apply for Salary Advance"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Amount will be deducted over 4 months"})]}),a.jsx("button",{onClick:()=>{S(!1),A("")},className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(en,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-purple-700 mb-1",children:"Your Monthly Salary"}),a.jsxs("p",{className:"text-2xl font-semibold text-purple-900",children:["",t.monthlySalary?.toLocaleString("en-IN")||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Advance Amount ()"}),a.jsx("input",{type:"number",value:w,onChange:W=>A(W.target.value),placeholder:"Enter amount",max:t.monthlySalary||0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum: ",t.monthlySalary?.toLocaleString("en-IN")]})]}),w&&parseFloat(w)>0&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Deduction Schedule:"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-blue-800",children:"Monthly Deduction:"}),a.jsxs("span",{className:"font-semibold text-blue-900",children:["",(parseFloat(w)/4).toLocaleString("en-IN")]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-blue-800",children:"Duration:"}),a.jsx("span",{className:"font-semibold text-blue-900",children:"4 Months"})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-blue-800",children:"Total Amount:"}),a.jsxs("span",{className:"font-semibold text-blue-900",children:["",parseFloat(w).toLocaleString("en-IN")]})]})]})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Ar,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Important:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[a.jsx("li",{children:"Your request will be sent to Cluster Head for approval"}),a.jsx("li",{children:"The amount will be deducted equally over 4 months"}),a.jsx("li",{children:"Deductions will start from your next salary payment"}),a.jsx("li",{children:"You cannot apply for another advance until this one is recovered"})]})]})]})})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{S(!1),A("")},className:"flex-1 px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),a.jsx("button",{onClick:N,disabled:!w||parseFloat(w)<=0||parseFloat(w)>(t.monthlySalary||0),className:"flex-1 px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:"Submit Request"})]})]})})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 max-w-md w-full text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-3xl",children:""})}),a.jsx("h2",{className:"text-xl text-gray-900 mb-2",children:"Employee Not Found"}),a.jsx("p",{className:"text-gray-600",children:"Your employee profile hasn't been set up yet. Please contact your manager or cluster head."})]})})}function N2({context:e,selectedStoreId:t}){const[r,n]=P.useState(new Date().toISOString().split("T")[0]),[s,i]=P.useState("entry"),[o,l]=P.useState(!1),[d,u]=P.useState(!1),[f,m]=P.useState(!1),p=e.user?.designation==="production_incharge",g=e.user?.role==="manager"&&e.user?.designation!=="store_incharge"&&e.user?.designation!=="production_incharge",b=e.user?.role==="cluster_head",y=p,v=g,k=g||b,S=P.useMemo(()=>{const _=t||e.user?.storeId;ia.debugProduction("ProductionManagement - effectiveStoreId:",_),ia.debugProduction("ProductionManagement - selectedStoreId prop:",t),ia.debugProduction("ProductionManagement - user storeId:",e.user?.storeId);const O=_?e.productionData.filter(B=>B.storeId===_):e.productionData;return ia.debugProduction("ProductionManagement - filtered production count:",O.length),O.find(B=>B.date===r)},[e.productionData,r,t,e.user?.storeId]),[w,A]=P.useState({date:r,chickenMomos:{dough:0,stuffing:0,final:0},chickenCheeseMomos:{dough:0,stuffing:0,final:0},vegMomos:{dough:0,stuffing:0,final:0},cheeseCornMomos:{dough:0,stuffing:0,final:0},paneerMomos:{dough:0,stuffing:0,final:0},vegKurkureMomos:{batter:0,coating:0,final:0},chickenKurkureMomos:{batter:0,coating:0,final:0},wastage:{dough:0,stuffing:0,batter:0,coating:0},sauces:{panfriedSauce:0,chilliChickenSauce:0,spicyKoreanSauce:0,hotGarlicSauce:0,tandooriSauce:0,soupPremix:0,greenMayoChutney:0,spicyRedChutney:0}});P.useEffect(()=>{A(S?{date:S.date,chickenMomos:S.chickenMomos,chickenCheeseMomos:S.chickenCheeseMomos,vegMomos:S.vegMomos,cheeseCornMomos:S.cheeseCornMomos,paneerMomos:S.paneerMomos,vegKurkureMomos:S.vegKurkureMomos,chickenKurkureMomos:S.chickenKurkureMomos,wastage:S.wastage,sauces:S.sauces}:{date:r,chickenMomos:{dough:0,stuffing:0,final:0},chickenCheeseMomos:{dough:0,stuffing:0,final:0},vegMomos:{dough:0,stuffing:0,final:0},cheeseCornMomos:{dough:0,stuffing:0,final:0},paneerMomos:{dough:0,stuffing:0,final:0},vegKurkureMomos:{batter:0,coating:0,final:0},chickenKurkureMomos:{batter:0,coating:0,final:0},wastage:{dough:0,stuffing:0,batter:0,coating:0},sauces:{panfriedSauce:0,chilliChickenSauce:0,spicyKoreanSauce:0,hotGarlicSauce:0,tandooriSauce:0,soupPremix:0,greenMayoChutney:0,spicyRedChutney:0}})},[r,S]);const C=async _=>{if(_.preventDefault(),o){ia.warn("Submission already in progress, ignoring duplicate request");return}const O={...w,date:r,createdBy:e.user?.employeeId||e.user?.email||"unknown",approvalStatus:"pending",approvedBy:null,approvedAt:null,storeId:e.user?.storeId||void 0,productionHouseId:e.user?.storeId||void 0};console.log(" Saving Production Data:"),console.log("  - User storeId:",e.user?.storeId),console.log("  - Production data storeId:",O.storeId),console.log("  - Production data productionHouseId:",O.productionHouseId),console.log("  - Full production data:",O);try{l(!0),S?(await e.updateProductionData(S.id,O),alert("Production data updated successfully!")):(await e.addProductionData(O),alert("Production data saved successfully!"))}catch(B){console.error("Error saving production data:",B),alert("Failed to save production data. Please try again.")}finally{l(!1)}},N=async()=>{if(S){if(d){console.log(" Approval already in progress, ignoring duplicate request");return}try{u(!0),await e.approveProductionData(S.id);const _=e.productionHouses.find(O=>O.productionHeadId===e.user?.employeeId);if(_&&S){const O={..._.inventory},B=S;Object.entries({chickenMomos:"chicken",chickenCheeseMomos:"chickenCheese",vegMomos:"veg",cheeseCornMomos:"cheeseCorn",paneerMomos:"paneer",vegKurkureMomos:"vegKurkure",chickenKurkureMomos:"chickenKurkure"}).forEach(([D,H])=>{const ne=B[D]?.final||0;ne>0&&(O[H]=(O[H]||0)+ne,console.log(`   Added ${ne} ${H} from ${D}`))}),B.items&&Object.entries(B.items).forEach(([D,H])=>{const ne=H?.final||0;ne>0&&(O[D]=(O[D]||0)+ne,console.log(`   Added ${ne} ${D} from dynamic items`))}),await e.updateProductionHouseInventory(_.id,O),console.log(" Production house inventory updated after approval:",O)}alert("Production data approved successfully! Inventory updated.")}catch(_){console.error("Error approving production:",_),alert("Failed to approve production data. Please try again.")}finally{u(!1)}}},E=async()=>{if(confirm("This will remove duplicate pending production entries, keeping only the original entry for each date. Continue?")){m(!0);try{const _=await MI();_.success&&(Qt.success(_.message),_.duplicatesFound>0?(console.log(" Cleanup Details:",_.details),Qt.info("Refreshing data...",{duration:2e3}),setTimeout(()=>{window.location.reload()},2e3)):(Qt.info("No duplicate entries found!"),m(!1)))}catch(_){console.error("Error cleaning up duplicates:",_),Qt.error("Failed to clean up duplicates. Please try again."),m(!1)}}};return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[a.jsx(Za,{className:"w-8 h-8 text-orange-600"}),"Production Management"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Log daily production data for momos, sauces, and track wastage"})]}),b&&s==="approvals"&&a.jsxs("button",{onClick:E,disabled:f,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg",children:[a.jsx(tB,{className:"w-4 h-4"}),f?"Cleaning...":"Clean Duplicates"]})]}),k&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-1 mb-6 flex gap-2",children:[a.jsx("button",{onClick:()=>i("entry"),className:`flex-1 px-6 py-3 rounded-lg transition-all ${s==="entry"?"bg-orange-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:"Production Entry"}),a.jsxs("button",{onClick:()=>i("approvals"),className:`flex-1 px-6 py-3 rounded-lg transition-all flex items-center justify-center gap-2 ${s==="approvals"?"bg-orange-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["Pending Approvals",(()=>{const _=e.productionData.filter(O=>O.approvalStatus==="pending"&&(!e.user?.storeId||O.storeId===e.user.storeId)).length;return _>0&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s==="approvals"?"bg-white text-orange-600":"bg-orange-600 text-white"}`,children:_})})()]})]}),s==="approvals"&&k&&a.jsx("div",{className:"space-y-4",children:(()=>{const _=e.productionData.filter(O=>O.approvalStatus==="pending"&&(!e.user?.storeId||O.storeId===e.user.storeId)).sort((O,B)=>new Date(B.date).getTime()-new Date(O.date).getTime());return _.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx(lr,{className:"w-16 h-16 mx-auto text-green-500 mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"All Caught Up!"}),a.jsx("p",{className:"text-gray-600",children:"No pending production approvals at this time."})]}):_.map(O=>{const B=O.chickenMomos.final+O.chickenCheeseMomos.final+O.vegMomos.final+O.cheeseCornMomos.final+O.paneerMomos.final+O.vegKurkureMomos.final+O.chickenKurkureMomos.final,F=O.wastage.dough+O.wastage.stuffing+O.wastage.batter+O.wastage.coating;return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-yellow-300",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Qa,{className:"w-5 h-5 text-yellow-600"}),a.jsx("h3",{className:"text-xl text-gray-900",children:new Date(O.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Submitted by: ",O.createdBy]})]}),a.jsxs("button",{onClick:async()=>{try{await e.approveProductionData(O.id),alert("Production data approved successfully!")}catch{alert("Failed to approve production data. Please try again.")}},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[a.jsx(Eo,{className:"w-5 h-5"}),"Approve"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Production"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[B," pcs"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Wastage"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[F.toFixed(2)," kg"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Kurkure Production"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[O.vegKurkureMomos.final+O.chickenKurkureMomos.final," pcs"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Regular Momos"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[O.chickenMomos.final+O.chickenCheeseMomos.final+O.vegMomos.final+O.cheeseCornMomos.final+O.paneerMomos.final," ","pcs"]})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-3",children:"Production Breakdown:"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2 text-xs",children:[O.chickenMomos.final>0&&a.jsxs("div",{className:"bg-red-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Chicken"}),a.jsxs("p",{className:"text-gray-900",children:[O.chickenMomos.final," pcs"]})]}),O.chickenCheeseMomos.final>0&&a.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Chk Cheese"}),a.jsxs("p",{className:"text-gray-900",children:[O.chickenCheeseMomos.final," pcs"]})]}),O.vegMomos.final>0&&a.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Veg"}),a.jsxs("p",{className:"text-gray-900",children:[O.vegMomos.final," pcs"]})]}),O.cheeseCornMomos.final>0&&a.jsxs("div",{className:"bg-amber-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Cheese Corn"}),a.jsxs("p",{className:"text-gray-900",children:[O.cheeseCornMomos.final," pcs"]})]}),O.paneerMomos.final>0&&a.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Paneer"}),a.jsxs("p",{className:"text-gray-900",children:[O.paneerMomos.final," pcs"]})]}),O.vegKurkureMomos.final>0&&a.jsxs("div",{className:"bg-lime-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Veg Kurkure"}),a.jsxs("p",{className:"text-gray-900",children:[O.vegKurkureMomos.final," pcs"]})]}),O.chickenKurkureMomos.final>0&&a.jsxs("div",{className:"bg-orange-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Chk Kurkure"}),a.jsxs("p",{className:"text-gray-900",children:[O.chickenKurkureMomos.final," pcs"]})]})]})]})]},O.id)})})()}),s==="entry"&&a.jsxs(a.Fragment,{children:[a.jsx(Rg,{selectedDate:r,onDateChange:n}),S&&S.approvalStatus==="pending"&&a.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qa,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("p",{className:"text-gray-900",children:["Production data for ",new Date(r).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," is awaiting approval from Operations Manager."]})]})}),S&&S.approvalStatus==="approved"&&a.jsx("div",{className:"bg-green-50 border-2 border-green-300 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(lr,{className:"w-5 h-5 text-green-600"}),a.jsxs("p",{className:"text-gray-900",children:[" Production data approved by ",S.approvedBy]})]})}),v&&S&&S.approvalStatus==="pending"&&a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-300 rounded-xl p-6 mb-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Eo,{className:"w-6 h-6 text-blue-600"}),"Approval Required"]}),a.jsxs("p",{className:"text-gray-700 mb-4",children:["Production data submitted by ",S.createdBy," is awaiting your approval."]}),a.jsxs("button",{onClick:N,disabled:d,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Eo,{className:"w-5 h-5"}),d?"Approving...":"Approve Production Data"]})]}),a.jsxs("form",{onSubmit:C,className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(D9,{className:"w-6 h-6 text-orange-600"}),"Regular Momos (Dough + Stuffing)"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.chickenMomos.dough,onChange:_=>A({...w,chickenMomos:{...w.chickenMomos,dough:parseFloat(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.chickenMomos.stuffing,onChange:_=>A({...w,chickenMomos:{...w.chickenMomos,stuffing:parseFloat(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:w.chickenMomos.final,onChange:_=>A({...w,chickenMomos:{...w.chickenMomos,final:parseInt(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Cheese Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.chickenCheeseMomos.dough,onChange:_=>A({...w,chickenCheeseMomos:{...w.chickenCheeseMomos,dough:parseFloat(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.chickenCheeseMomos.stuffing,onChange:_=>A({...w,chickenCheeseMomos:{...w.chickenCheeseMomos,stuffing:parseFloat(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:w.chickenCheeseMomos.final,onChange:_=>A({...w,chickenCheeseMomos:{...w.chickenCheeseMomos,final:parseInt(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Veg Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.vegMomos.dough,onChange:_=>A({...w,vegMomos:{...w.vegMomos,dough:parseFloat(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.vegMomos.stuffing,onChange:_=>A({...w,vegMomos:{...w.vegMomos,stuffing:parseFloat(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:w.vegMomos.final,onChange:_=>A({...w,vegMomos:{...w.vegMomos,final:parseInt(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Cheese Corn Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.cheeseCornMomos.dough,onChange:_=>A({...w,cheeseCornMomos:{...w.cheeseCornMomos,dough:parseFloat(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.cheeseCornMomos.stuffing,onChange:_=>A({...w,cheeseCornMomos:{...w.cheeseCornMomos,stuffing:parseFloat(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:w.cheeseCornMomos.final,onChange:_=>A({...w,cheeseCornMomos:{...w.cheeseCornMomos,final:parseInt(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Paneer Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.paneerMomos.dough,onChange:_=>A({...w,paneerMomos:{...w.paneerMomos,dough:parseFloat(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.paneerMomos.stuffing,onChange:_=>A({...w,paneerMomos:{...w.paneerMomos,stuffing:parseFloat(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:w.paneerMomos.final,onChange:_=>A({...w,paneerMomos:{...w.paneerMomos,final:parseInt(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(Za,{className:"w-6 h-6 text-purple-600"}),"Kurkure Momos (Batter + Coating)"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-lime-50 to-lime-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Veg Kurkure Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batter (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.vegKurkureMomos.batter,onChange:_=>A({...w,vegKurkureMomos:{...w.vegKurkureMomos,batter:parseFloat(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coating Mix (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.vegKurkureMomos.coating,onChange:_=>A({...w,vegKurkureMomos:{...w.vegKurkureMomos,coating:parseFloat(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Kurkure (pcs)"}),a.jsx("input",{type:"number",value:w.vegKurkureMomos.final,onChange:_=>A({...w,vegKurkureMomos:{...w.vegKurkureMomos,final:parseInt(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Kurkure Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batter (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.chickenKurkureMomos.batter,onChange:_=>A({...w,chickenKurkureMomos:{...w.chickenKurkureMomos,batter:parseFloat(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coating Mix (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.chickenKurkureMomos.coating,onChange:_=>A({...w,chickenKurkureMomos:{...w.chickenKurkureMomos,coating:parseFloat(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Kurkure (pcs)"}),a.jsx("input",{type:"number",value:w.chickenKurkureMomos.final,onChange:_=>A({...w,chickenKurkureMomos:{...w.chickenKurkureMomos,final:parseInt(_.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(ws,{className:"w-6 h-6 text-red-600"}),"Wastage Tracking"]}),a.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Dough Wastage (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.wastage.dough,onChange:_=>A({...w,wastage:{...w.wastage,dough:parseFloat(_.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Stuffing Wastage (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.wastage.stuffing,onChange:_=>A({...w,wastage:{...w.wastage,stuffing:parseFloat(_.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Batter Wastage (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.wastage.batter,onChange:_=>A({...w,wastage:{...w.wastage,batter:parseFloat(_.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Coating Wastage (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.wastage.coating,onChange:_=>A({...w,wastage:{...w.wastage,coating:parseFloat(_.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(bo,{className:"w-6 h-6 text-pink-600"}),"Sauces & Chutneys"]}),a.jsx("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Panfried Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:w.sauces.panfriedSauce,onChange:_=>A({...w,sauces:{...w.sauces,panfriedSauce:parseFloat(_.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chilli Chicken Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:w.sauces.chilliChickenSauce,onChange:_=>A({...w,sauces:{...w.sauces,chilliChickenSauce:parseFloat(_.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Spicy Korean Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:w.sauces.spicyKoreanSauce,onChange:_=>A({...w,sauces:{...w.sauces,spicyKoreanSauce:parseFloat(_.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Hot Garlic Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:w.sauces.hotGarlicSauce,onChange:_=>A({...w,sauces:{...w.sauces,hotGarlicSauce:parseFloat(_.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Tandoori Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:w.sauces.tandooriSauce,onChange:_=>A({...w,sauces:{...w.sauces,tandooriSauce:parseFloat(_.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Soup Premix (L)"}),a.jsx("input",{type:"number",step:"0.01",value:w.sauces.soupPremix,onChange:_=>A({...w,sauces:{...w.sauces,soupPremix:parseFloat(_.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Green Mayo Chutney (L)"}),a.jsx("input",{type:"number",step:"0.01",value:w.sauces.greenMayoChutney,onChange:_=>A({...w,sauces:{...w.sauces,greenMayoChutney:parseFloat(_.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Spicy Red Chutney (L)"}),a.jsx("input",{type:"number",step:"0.01",value:w.sauces.spicyRedChutney,onChange:_=>A({...w,sauces:{...w.sauces,spicyRedChutney:parseFloat(_.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]})]})})]}),y&&a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",disabled:o,className:"px-8 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Submitting...":S?"Update Production Data":"Save Production Data"})})]})]})]})}function nxe({user:e,inventory:t,overheads:r,fixedCosts:n,salesData:s,categorySalesData:i,productionData:o,productionHouses:l,stockRequests:d,productionRequests:u,employees:f,stores:m,inventoryItems:p,onLogout:g,onDataUpdate:b}){const[y,v]=P.useState("analytics"),[k,S]=P.useState(null),[w,A]=P.useState(new Date().toISOString().split("T")[0]),C={inventory:t,overheads:r,fixedCosts:n,salesData:s,categorySalesData:i,productionData:o,productionHouses:l,stockRequests:d,productionRequests:u,employees:f,stores:m,managedStoreIds:[],managedProductionHouseIds:[],inventoryItems:p,loadInventoryItems:async()=>{},addInventoryItem:async()=>{},addOverheadItem:async()=>{},addFixedCostItem:async()=>{},updateInventoryItem:async()=>{},updateOverheadItem:async()=>{},updateFixedCostItem:async()=>{},deleteInventoryItem:async()=>{},deleteOverheadItem:async()=>{},deleteFixedCostItem:async()=>{},addSalesData:async()=>{},updateSalesData:async()=>{},approveSalesData:async()=>{},requestSalesApproval:async()=>{},approveDiscrepancy:async()=>{},rejectDiscrepancy:async()=>{},addProductionData:async()=>{},updateProductionData:async()=>{},approveProductionData:async()=>{},addProductionHouse:async()=>{},updateProductionHouse:async()=>{},updateProductionHouseInventory:async()=>{},deleteProductionHouse:async()=>{},setProductionHouses:()=>{},createStockRequest:async()=>{},fulfillStockRequest:async()=>{},cancelStockRequest:async()=>{},isManager:!1,user:e},N=[{id:"analytics",label:"Analytics",icon:C2},{id:"inventory",label:"Inventory",icon:Zt},{id:"sales",label:"Sales",icon:ca},{id:"production",label:"Production",icon:Za},{id:"payroll",label:"Payroll",icon:La}];return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("nav",{className:"bg-gradient-to-r from-slate-600 via-slate-700 to-slate-800 shadow-xl sticky top-0 z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white/20 rounded-lg backdrop-blur-sm",children:a.jsx(WB,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-white text-lg font-bold",children:"Bhandar-IMS"}),a.jsx("p",{className:"text-xs text-slate-200",children:"Audit Dashboard"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-right hidden sm:block",children:[a.jsx("p",{className:"text-sm font-medium text-white",children:e.name}),a.jsxs("p",{className:"text-xs text-slate-200 flex items-center justify-end gap-1",children:[a.jsx(No,{className:"w-3 h-3"}),"Read-Only Access"]})]}),a.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all backdrop-blur-sm",children:[a.jsx(Eh,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]}),a.jsx("div",{className:"flex gap-2 pb-3 overflow-x-auto",children:N.map(E=>a.jsxs("button",{onClick:()=>v(E.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all whitespace-nowrap ${y===E.id?"bg-white text-slate-800 shadow-lg":"text-white hover:bg-white/10"}`,children:[a.jsx(E.icon,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:E.label})]},E.id))})]})}),a.jsx("div",{className:"bg-amber-50 border-b border-amber-200 px-4 py-3",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 text-amber-800",children:[a.jsx(No,{className:"w-5 h-5 flex-shrink-0"}),a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:"Audit Mode:"})," You have read-only access to all data. You cannot create, edit, or delete any records."]})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[y==="analytics"&&a.jsx(j2,{context:C,selectedStoreId:k}),y==="inventory"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Inventory View"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View-only access to inventory data"})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg",children:[a.jsx(No,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Read-Only"})]})]}),a.jsx(Hj,{context:C,selectedStoreId:k})]}),y==="sales"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Sales Data"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View-only access to sales records"})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg",children:[a.jsx(No,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Read-Only"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Date"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Store"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Offline Sales"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Online Sales"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Cash"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Paytm"}),a.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Status"})]})}),a.jsx("tbody",{children:s.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-12 text-gray-500",children:"No sales data available"})}):s.sort((E,_)=>new Date(_.date).getTime()-new Date(E.date).getTime()).slice(0,50).map(E=>{const _=m.find(O=>O.id===E.storeId);return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:new Date(E.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),a.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:_?.name||"Unknown Store"}),a.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:["",E.offlineSales.toLocaleString("en-IN")]}),a.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:["",E.onlineSales.toLocaleString("en-IN")]}),a.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:["",E.cashAmount.toLocaleString("en-IN")]}),a.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:["",E.paytmAmount.toLocaleString("en-IN")]}),a.jsx("td",{className:"py-3 px-4 text-center",children:a.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${E.approvalStatus==="approved"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:E.approvalStatus==="approved"?"Approved":"Pending"})})]},E.id)})})]})})]}),y==="production"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Production Data"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View-only access to production records"})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg",children:[a.jsx(No,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Read-Only"})]})]}),a.jsx(N2,{context:C,selectedStoreId:k})]}),y==="payroll"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Payroll Data"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View-only access to payroll records"})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg",children:[a.jsx(No,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Read-Only"})]})]}),a.jsx(Gk,{userRole:"audit",selectedDate:w,userName:e.name,userEmail:e.email,employees:f,stores:m})]})]})]})}function sxe({onLogin:e,onSignup:t,error:r}){const[n,s]=P.useState(!1),[i,o]=P.useState({email:"",password:"",name:"",role:"employee",employeeId:""}),[l,d]=P.useState(!1),u=async f=>{if(f.preventDefault(),l){console.log(" Submission already in progress, ignoring duplicate request");return}d(!0);try{n?await t(i.email,i.password,i.name,i.role):await e(i.email,i.password)}finally{d(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 sm:p-8",children:[a.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 bg-blue-600 rounded-full mb-3 sm:mb-4",children:a.jsx(Zt,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})}),a.jsx("h1",{className:"text-gray-900 mb-2",children:"Inventory Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:n?"Create your account":"Sign in to your account"})]}),r&&a.jsx("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-xs sm:text-sm text-red-600",children:r})}),a.jsxs("form",{onSubmit:u,className:"space-y-3 sm:space-y-4",children:[n&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Full Name"}),a.jsx("input",{type:"text",value:i.name,onChange:f=>o({...i,name:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your name",required:n})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Role"}),a.jsxs("select",{value:i.role,onChange:f=>o({...i,role:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",required:n,children:[a.jsx("option",{value:"employee",children:"Employee (View your payouts)"}),a.jsx("option",{value:"manager",children:"Manager (Manage inventory)"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head (View & approve)"}),a.jsx("option",{value:"audit",children:"Audit (View reports)"})]})]}),i.role==="employee"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Employee ID"}),a.jsx("input",{type:"text",value:i.employeeId,onChange:f=>o({...i,employeeId:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your Employee ID",required:n&&i.role==="employee"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must match the ID created by your manager"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:i.email,onChange:f=>o({...i,email:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your email",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Password"}),a.jsx("input",{type:"password",value:i.password,onChange:f=>o({...i,password:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your password",required:!0,minLength:6}),n&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters"})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-base touch-manipulation",children:l?a.jsxs(a.Fragment,{children:[a.jsx(Io,{className:"w-5 h-5 animate-spin"}),a.jsx("span",{children:"Processing..."})]}):a.jsxs(a.Fragment,{children:[n?a.jsx(Bs,{className:"w-5 h-5"}):a.jsx(NB,{className:"w-5 h-5"}),n?"Create Account":"Sign In"]})})]}),a.jsx("div",{className:"mt-4 sm:mt-6 text-center",children:a.jsx("button",{onClick:()=>{s(!n),o({email:"",password:"",name:"",role:"employee",employeeId:""})},className:"text-sm text-blue-600 hover:text-blue-700 active:text-blue-800 touch-manipulation",children:n?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})}function ixe({user:e}){const[t,r]=P.useState(u(new Date)),[n,s]=P.useState([]),[i,o]=P.useState(!1),[l,d]=P.useState([]);P.useEffect(()=>{m(),p()},[t]);function u(_){const O=new Date(_),B=O.getDay(),F=O.getDate()-B+(B===0?-6:1);return new Date(O.setDate(F))}function f(_){const O=[];for(let B=0;B<7;B++){const F=new Date(_);F.setDate(_.getDate()+B),O.push(F)}return O}const m=async()=>{try{o(!0);const _=await l0(e.employeeId);s(_)}catch(_){console.error("Error loading timesheet:",_)}finally{o(!1)}},p=async()=>{try{const _=await ku(e.employeeId);d(_.filter(O=>O.status==="approved"||O.status==="pending"))}catch(_){console.error("Error loading leaves:",_)}},g=_=>{const O=_.toISOString().split("T")[0];return l.some(B=>B.leaveDate===O)},b=_=>{const O=_.toISOString().split("T")[0],B=n.find(F=>F.date===O);return B||{employeeId:e.employeeId,date:O,startTime:"",endTime:"",totalHours:0,status:"pending",isLeave:g(_)}},y=(_,O)=>{if(!_||!O)return 0;const[B,F]=_.split(":").map(Number),[D,H]=O.split(":").map(Number),ne=B*60+F;return(D*60+H-ne)/60},v=(_,O,B)=>{const F=_.toISOString().split("T")[0],D=n.find(W=>W.date===F);let H;D?H={...D,[O]:B}:H={employeeId:e.employeeId,date:F,startTime:O==="startTime"?B:"",endTime:O==="endTime"?B:"",totalHours:0,status:"pending",isLeave:!1},H.totalHours=y(H.startTime,H.endTime);const ne=n.filter(W=>W.date!==F);s([...ne,H])},k=async _=>{const O=b(_);if(!O.startTime||!O.endTime){alert("Please enter both start and end times");return}if(O.totalHours<4){alert("For half day, minimum 4 hours required");return}try{o(!0),await(void 0)(O),await m(),alert("Timesheet saved successfully")}catch(B){console.error("Error saving timesheet:",B),alert("Error saving timesheet")}finally{o(!1)}},S=async()=>{const O=f(t).map(B=>b(B)).filter(B=>B.startTime&&B.endTime);if(O.length===0){alert("Please enter timesheet data for at least one day");return}for(const B of O)if(B.totalHours<4){alert(`${B.date}: Minimum 4 hours required for half day`);return}try{o(!0),await(void 0)(O),await m(),alert("Week timesheet saved successfully")}catch(B){console.error("Error saving week timesheet:",B),alert("Error saving week timesheet")}finally{o(!1)}},w=()=>{const _=new Date(t);_.setDate(_.getDate()-7),r(_)},A=()=>{const _=new Date(t);_.setDate(_.getDate()+7),r(_)},C=async()=>{try{o(!0);const _=new Date(t);_.setDate(_.getDate()-7);const O=f(_),B=await l0(e.employeeId),F=O.map(W=>{const ee=W.toISOString().split("T")[0];return B.find(re=>re.date===ee)}).filter(Boolean);if(F.length===0){alert("No timesheet data found in previous week to copy"),o(!1);return}const D=f(t),H=[];if(D.forEach((W,ee)=>{const re=W.toISOString().split("T")[0],Q=F[ee],R=n.find(L=>L.date===re);!g(W)&&Q&&Q.startTime&&Q.endTime&&(!R||R.status!=="approved")&&H.push({employeeId:e.employeeId,date:re,startTime:Q.startTime,endTime:Q.endTime,totalHours:Q.totalHours,status:"pending",isLeave:!1})}),H.length===0){alert("All days in current week are either on leave or already have approved entries"),o(!1);return}const ne=[...n];H.forEach(W=>{const ee=ne.findIndex(re=>re.date===W.date);ee>=0?ne[ee]=W:ne.push(W)}),s(ne),alert(`Copied ${H.length} day(s) from previous week! Don't forget to save.`)}catch(_){console.error("Error copying from previous week:",_),alert("Error copying data from previous week")}finally{o(!1)}},N=f(t),E=new Date(t);return E.setDate(E.getDate()+6),a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"My Timesheet"}),a.jsx("p",{className:"text-gray-600",children:"Track your daily working hours"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:[a.jsx(Sj,{className:"w-4 h-4"}),"Previous Week"]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center gap-2 justify-center mb-1",children:[a.jsx(Ur,{className:"w-5 h-5 text-purple-600"}),a.jsxs("span",{className:"text-lg text-gray-900",children:[t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," - ",E.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Week View"})]}),a.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:["Next Week",a.jsx(kl,{className:"w-4 h-4"})]})]}),a.jsx("div",{className:"flex justify-center pt-2 border-t border-gray-200",children:a.jsxs("button",{onClick:C,disabled:i,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg hover:from-blue-600 hover:to-cyan-600 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(V9,{className:"w-4 h-4"}),"Copy from Previous Week"]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left",children:"Date"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Day"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Start Time"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"End Time"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Total Hours"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Action"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:N.map((_,O)=>{const B=b(_),F=g(_);return a.jsxs("tr",{className:F?"bg-yellow-50":O%2===0?"bg-gray-50":"bg-white",children:[a.jsx("td",{className:"px-6 py-4 text-gray-900",children:_.toLocaleDateString("en-US",{month:"short",day:"numeric"})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:_.toLocaleDateString("en-US",{weekday:"short"})}),a.jsx("td",{className:"px-6 py-4",children:F?a.jsx("span",{className:"text-yellow-700 text-sm",children:"On Leave"}):a.jsx("input",{type:"time",value:B.startTime,onChange:D=>v(_,"startTime",D.target.value),disabled:B.status==="approved",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100"})}),a.jsx("td",{className:"px-6 py-4",children:F?a.jsx("span",{className:"text-yellow-700 text-sm",children:"On Leave"}):a.jsx("input",{type:"time",value:B.endTime,onChange:D=>v(_,"endTime",D.target.value),disabled:B.status==="approved",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100"})}),a.jsx("td",{className:"px-6 py-4",children:F?a.jsx("span",{className:"text-yellow-700",children:"-"}):a.jsx("span",{className:`${B.totalHours>=4?"text-green-700":B.totalHours>0?"text-red-700":"text-gray-500"}`,children:B.totalHours>0?`${B.totalHours.toFixed(2)} hrs`:"-"})}),a.jsx("td",{className:"px-6 py-4",children:F?a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[a.jsx(Ar,{className:"w-4 h-4"}),"Leave"]}):B.status==="approved"?a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:[a.jsx(lr,{className:"w-4 h-4"}),"Approved"]}):B.status==="rejected"?a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm",children:[a.jsx(en,{className:"w-4 h-4"}),"Rejected"]}):B.startTime&&B.endTime?a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[a.jsx(Aa,{className:"w-4 h-4"}),"Pending"]}):a.jsx("span",{className:"text-gray-400 text-sm",children:"Not filled"})}),a.jsx("td",{className:"px-6 py-4",children:!F&&B.status!=="approved"&&a.jsxs("button",{onClick:()=>k(_),disabled:i||!B.startTime||!B.endTime,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:[a.jsx(Lo,{className:"w-4 h-4"}),"Save"]})})]},O)})})]})})}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsxs("button",{onClick:S,disabled:i,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg disabled:opacity-50",children:[a.jsx(Lo,{className:"w-5 h-5"}),"Save Entire Week"]})})]})})}function oxe({user:e}){const[t,r]=P.useState([]),[n,s]=P.useState(0),[i,o]=P.useState(0),[l,d]=P.useState(!1),[u,f]=P.useState(!1),[m,p]=P.useState({leaveDate:"",leaveType:"full",isAdvanceLeave:!1,reason:""});P.useEffect(()=>{g(),b()},[]),P.useEffect(()=>{y()},[t,n]);const g=async()=>{try{d(!0);const w=await ku(e.employeeId);r(w)}catch(w){console.error("Error loading leaves:",w)}finally{d(!1)}},b=async()=>{try{const w=await d5(e.employeeId,e.joiningDate||"2024-01-01");s(w)}catch(w){console.error("Error calculating leave balance:",w)}},y=()=>{const A=t.filter(C=>C.status==="pending").reduce((C,N)=>{const E=N.leaveType||"full";return C+(E==="half"?.5:1)},0);o(n-A)},v=async()=>{if(!m.leaveDate||!m.reason){alert("Please fill all fields");return}if(t.find(C=>C.leaveDate===m.leaveDate)){alert("Leave already applied for this date");return}const A=m.leaveType==="half"?.5:1;if(m.isAdvanceLeave){const C=new Date,N=C.getMonth(),E=C.getFullYear(),O=t.filter(F=>{const D=new Date(F.leaveDate);return F.isAdvanceLeave&&F.status==="approved"&&D.getMonth()===N&&D.getFullYear()===E}).reduce((F,D)=>{const H=D.leaveType||"full";return F+(H==="half"?.5:1)},0);if(O+A>2){alert(`You can only take maximum 2 days of advance leave per month. You have already used ${O} day(s).`);return}if(t.filter(F=>{const D=new Date(F.leaveDate);return F.status==="approved"&&D.getMonth()===N&&D.getFullYear()===E}).reduce((F,D)=>{const H=D.leaveType||"full";return F+(H==="half"?.5:1)},0)+A>5){alert("Maximum 5 days of leave allowed per month (including advance leave).");return}}else if(n<A){alert(`Insufficient leave balance. You have ${n} day(s) remaining. Consider applying for advance leave (max 2 days).`);return}try{d(!0);const C={employeeId:e.employeeId,leaveDate:m.leaveDate,leaveType:m.leaveType,isAdvanceLeave:m.isAdvanceLeave,reason:m.reason,status:"pending",appliedAt:new Date().toISOString()};await c5(C),await g(),await b(),p({leaveDate:"",leaveType:"full",isAdvanceLeave:!1,reason:""}),f(!1),alert("Leave application submitted successfully")}catch(C){console.error("Error applying leave:",C),alert("Error applying leave")}finally{d(!1)}},k=w=>{switch(w){case"approved":return a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:[a.jsx(lr,{className:"w-4 h-4"}),"Approved"]});case"rejected":return a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm",children:[a.jsx(en,{className:"w-4 h-4"}),"Rejected"]});default:return a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[a.jsx(Aa,{className:"w-4 h-4"}),"Pending"]})}},S=[...t].sort((w,A)=>new Date(A.leaveDate).getTime()-new Date(w.leaveDate).getTime());return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Leave Management"}),a.jsx("p",{className:"text-gray-600",children:"Apply for leaves and track your leave balance"})]}),a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-lg mb-4 opacity-90",children:"Leave Balance"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm opacity-75 mb-1",children:"Current Balance"}),a.jsxs("div",{className:`text-5xl mb-1 ${n<0?"text-red-200":""}`,children:[n,n<0&&a.jsx("span",{className:"text-sm ml-2 bg-red-500/30 px-2 py-1 rounded",children:"Negative"})]}),a.jsx("p",{className:"text-xs opacity-75",children:n<0?"You have taken advance leave - will be deducted next month":"approved leaves deducted"})]}),i!==n&&a.jsxs("div",{className:"pt-4 border-t border-white/20",children:[a.jsx("div",{className:"text-sm opacity-75 mb-1",children:"Projected Balance"}),a.jsx("div",{className:`text-3xl mb-1 ${i<0?"text-red-200":""}`,children:i}),a.jsx("p",{className:"text-xs opacity-75",children:"if all pending leaves are approved"})]}),a.jsx("p",{className:"text-sm opacity-75 mt-4",children:"3 leaves/month  max 5 days (3 regular + 2 advance)"})]}),a.jsx("div",{className:"bg-white/20 rounded-full p-6",children:a.jsx(Ur,{className:"w-16 h-16"})})]})}),a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>f(!u),className:"flex items-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors shadow-md",children:[a.jsx(Xi,{className:"w-5 h-5"}),"Apply for Leave"]})}),u&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Apply for Leave"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Leave Date"}),a.jsx("input",{type:"date",value:m.leaveDate,onChange:w=>p({...m,leaveDate:w.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Leave Type"}),a.jsxs("select",{value:m.leaveType,onChange:w=>p({...m,leaveType:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"full",children:"Full Day"}),a.jsx("option",{value:"half",children:"Half Day"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Reason"}),a.jsx("input",{type:"text",value:m.reason,onChange:w=>p({...m,reason:w.target.value}),placeholder:"Enter reason for leave",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),a.jsx("div",{className:"mb-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:m.isAdvanceLeave,onChange:w=>p({...m,isAdvanceLeave:w.target.checked}),className:"mt-1 w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:"Apply as Advance Leave"}),a.jsxs("div",{className:"text-xs text-gray-600",children:[a.jsx(Ar,{className:"w-4 h-4 inline mr-1"}),"You can take up to 2 days advance leave per month. This will make your balance negative and will be deducted from next month's quota.",a.jsx("br",{}),a.jsx("span",{className:"font-medium",children:"Maximum total: 5 days/month (3 regular + 2 advance)"})]})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:v,disabled:l,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-300",children:"Submit Application"}),a.jsx("button",{onClick:()=>f(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:"Leave History"})}),l?a.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):S.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Ur,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No leave applications yet"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Leave Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Reason"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Applied On"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Approved By"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:S.map((w,A)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(w.leaveDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(w.leaveType||"full")==="full"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:(w.leaveType||"full")==="full"?"Full Day":"Half Day"}),w.isAdvanceLeave&&a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Advance"})]})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:w.reason}),a.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:w.appliedAt?new Date(w.appliedAt).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"-"}),a.jsx("td",{className:"px-6 py-4",children:k(w.status)}),a.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:w.approvedBy||"-"})]},A))})]})})]}),a.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"text-sm text-blue-900",children:[a.jsx("p",{className:"mb-2",children:a.jsx("strong",{children:"Leave Policy:"})}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"3 leaves are credited on the 1st of each month (Jan: 3, Feb: 6, Mar: 9, etc.)"}),a.jsx("li",{children:"Unused leaves carry forward within the year"}),a.jsx("li",{children:"All unused leaves lapse on December 31st (reset to 0)"}),a.jsx("li",{children:"New year starts fresh with 3 leaves on January 1st"}),a.jsx("li",{children:"All leave applications require manager approval"}),a.jsx("li",{children:"Approved leaves will prevent timesheet entry for that day"})]})]})]})})]})})}function lxe({managerId:e}){const[t,r]=P.useState(!1),[n,s]=P.useState(null),i=async()=>{r(!0),s(null);const o={serverVersion:null,managerRoute:null,allEmployees:null};try{console.log("Testing server health...");const l=await fetch(`https://${In}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees`,{headers:{Authorization:`Bearer ${rn}`}});o.allEmployees={status:l.status,ok:l.ok,data:l.ok?await l.json():await l.text()},console.log("Testing manager route with ID:",e);const d=`https://${In}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees/manager/${e}`;console.log("Full URL:",d);const u=await fetch(d,{headers:{Authorization:`Bearer ${rn}`}});console.log("Manager route status:",u.status);const f=await u.text();console.log("Manager route response:",f),o.managerRoute={url:d,status:u.status,ok:u.ok,data:f?JSON.parse(f):null},s(o)}catch(l){console.error("Route test error:",l),s({error:l instanceof Error?l.message:String(l),tests:o})}finally{r(!1)}};return a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(VE,{className:"w-6 h-6 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Route Debugger"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Test if the manager route is working"})]})]}),a.jsx("button",{onClick:i,disabled:t,className:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:t?a.jsxs(a.Fragment,{children:[a.jsx(bB,{className:"w-4 h-4 animate-spin"}),"Testing Routes..."]}):a.jsxs(a.Fragment,{children:[a.jsx(VE,{className:"w-4 h-4"}),"Test Routes"]})}),n&&a.jsxs("div",{className:"mt-4 space-y-3",children:[n.error&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:a.jsxs("p",{className:"text-sm text-red-800",children:[a.jsx("strong",{children:"Error:"})," ",n.error]})}),n.allEmployees&&a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.allEmployees.ok?a.jsx(lr,{className:"w-4 h-4 text-green-600"}):a.jsx(en,{className:"w-4 h-4 text-red-600"}),a.jsxs("span",{className:"font-medium text-sm",children:["GET /unified-employees - ",n.allEmployees.status]})]}),a.jsx("pre",{className:"text-xs bg-gray-50 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(n.allEmployees.data,null,2)})]}),n.managerRoute&&a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.managerRoute.ok?a.jsx(lr,{className:"w-4 h-4 text-green-600"}):a.jsx(en,{className:"w-4 h-4 text-red-600"}),a.jsxs("span",{className:"font-medium text-sm",children:["GET /unified-employees/manager/",e," - ",n.managerRoute.status]})]}),a.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:["URL: ",n.managerRoute.url]}),a.jsx("pre",{className:"text-xs bg-gray-50 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(n.managerRoute.data,null,2)})]})]})]})}function cxe({managerId:e,role:t,selectedStoreId:r,isIncharge:n=!1,inchargeDesignation:s=null}){const[i,o]=P.useState([]),[l,d]=P.useState(""),[u,f]=P.useState([]),[m,p]=P.useState(!1);console.log("ApproveTimesheets: managerId prop =",e),console.log("ApproveTimesheets: role prop =",t),console.log("ApproveTimesheets: isIncharge =",n),console.log("ApproveTimesheets: inchargeDesignation =",s);const g=P.useMemo(()=>{let N=i;return r&&(N=N.filter(E=>E.storeId===r||E.storeId===null||E.storeId===void 0)),n&&e&&(N=N.filter(E=>E.inchargeId===e)),N},[i,r,n,e]);P.useEffect(()=>{b()},[]),P.useEffect(()=>{g.length>0&&!g.find(N=>N.employeeId===l)?d(g[0].employeeId):g.length===0&&d("")},[g]),P.useEffect(()=>{l&&y()},[l]);const b=async()=>{try{console.log("ApproveTimesheets: Loading employees/managers for role:",t,"isIncharge:",n);let N;t==="cluster_head"?(console.log("ApproveTimesheets: Calling getManagersByClusterHead with clusterHeadId:",e),N=await Ag(e),console.log("ApproveTimesheets: Received managers:",N),N.length>0&&(console.log(" MANAGERS RETURNED:"),N.forEach(E=>{console.log(`  - ${E.employeeId} (${E.name}) - clusterHeadId: ${E.clusterHeadId}, role: ${E.role}`)}))):n?(console.log("ApproveTimesheets: Calling getEmployeesByIncharge with inchargeId:",e),N=await R2(e),console.log("ApproveTimesheets: Received employees under incharge:",N)):(console.log("ApproveTimesheets: Calling getEmployeesByManager with managerId:",e),N=await kc(e),console.log("ApproveTimesheets: Received employees:",N)),o(N),N.length>0?d(N[0].employeeId):console.log("ApproveTimesheets: No employees/managers found")}catch(N){console.error("Error loading employees:",N)}},y=async()=>{try{p(!0);const N=await l0(l);f(N.filter(E=>E.status==="pending"))}catch(N){console.error("Error loading timesheets:",N)}finally{p(!1)}},v=async N=>{try{p(!0),await(void 0)(N,e),await y(),alert("Timesheet approved successfully")}catch(E){console.error("Error approving timesheet:",E),alert("Error approving timesheet")}finally{p(!1)}},k=async N=>{const E=prompt("Enter rejection reason:");if(E)try{p(!0),await(void 0)(N,e,E),await y(),alert("Timesheet rejected")}catch(_){console.error("Error rejecting timesheet:",_),alert("Error rejecting timesheet")}finally{p(!1)}},S=u.length,w=i.find(N=>N.employeeId===l),A=t==="cluster_head"?"Operations Manager":"Employee",C=t==="cluster_head"?"Operations Managers":"Employees";return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Approve ",A," Timesheets"]}),a.jsx("p",{className:"text-gray-600",children:t==="cluster_head"?"Review and approve manager timesheet entries. Contract workers are paid per day worked and do not require attendance approval.":"Review and approve employee timesheet entries"})]}),!e&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-red-900 font-medium",children:"Manager ID Not Found"}),a.jsx("p",{className:"text-sm text-red-700",children:"Your account doesn't have an employee ID set. Please contact the administrator or log out and log back in."})]})]})}),e&&i.length===0&&a.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-blue-900 font-medium",children:["No ",C," Found"]}),a.jsx("p",{className:"text-sm text-blue-700",children:t==="cluster_head"?`No managers are assigned to you (${e}). To fix this:`:"You don't have any employees assigned to you yet."}),t==="cluster_head"&&a.jsxs("ul",{className:"text-xs text-blue-700 mt-2 ml-4 space-y-1",children:[a.jsxs("li",{children:[" Go to ",a.jsx("strong",{children:"Employee Management"}),"  ",a.jsx("strong",{children:"Hierarchy Management"})," tab"]}),a.jsxs("li",{children:[" Click ",a.jsx("strong",{children:"Edit"})," on each manager (e.g., BM004)"]}),a.jsxs("li",{children:[" Make sure ",a.jsx("strong",{children:"Cluster Head ID"})," is set to your ID: ",a.jsx("strong",{children:e})]}),a.jsxs("li",{children:[" Click ",a.jsx("strong",{children:"Save Changes"})]})]}),a.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["Your ID: ",e]})]})]})}),e&&i.length===0&&a.jsx(lxe,{managerId:e}),S>0&&a.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-yellow-900 font-medium",children:[S," timesheet",S>1?"s":""," pending approval"]}),a.jsx("p",{className:"text-sm text-yellow-700",children:"Review and take action on pending requests"})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",A]}),a.jsxs("select",{value:l,onChange:N=>d(N.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsxs("option",{value:"",children:["-- Select ",A," --"]}),g.map(N=>a.jsxs("option",{value:N.employeeId,children:[N.name," (",N.employeeId,")"]},N.employeeId))]}),t==="cluster_head"&&i.length>0&&a.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsxs("p",{className:"text-xs text-blue-900 font-medium mb-2",children:[" Debug: ",i.length," manager",i.length>1?"s":""," with clusterHeadId = ",e]}),a.jsx("div",{className:"space-y-1",children:i.map(N=>a.jsxs("div",{className:"text-xs text-blue-800 flex items-center gap-2",children:[a.jsx("span",{className:"px-2 py-0.5 bg-blue-100 rounded",children:N.employeeId}),a.jsx("span",{children:N.name}),a.jsxs("span",{className:"text-blue-600",children:["(",N.role,")"]})]},N.employeeId))}),a.jsxs("p",{className:"text-xs text-blue-700 mt-2",children:[" If you see unexpected managers here, go to ",a.jsx("strong",{children:"Employee Management  Hierarchy"})," and check their Cluster Head ID"]})]})]}),w&&a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(tn,{className:"w-8 h-8"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl mb-1",children:w.name}),a.jsxs("p",{className:"text-sm opacity-90",children:["Employee ID: ",w.employeeId]}),a.jsxs("p",{className:"text-sm opacity-90",children:["Email: ",w.email]})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:"Pending Timesheets"})}),m?a.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):u.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Aa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No pending timesheets for this employee"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Day"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Start Time"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"End Time"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Total Hours"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map((N,E)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(N.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:new Date(N.date).toLocaleDateString("en-US",{weekday:"short"})}),a.jsx("td",{className:"px-6 py-4 text-gray-900",children:N.startTime}),a.jsx("td",{className:"px-6 py-4 text-gray-900",children:N.endTime}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:`${N.totalHours>=8?"text-green-700":N.totalHours>=4?"text-yellow-700":"text-red-700"}`,children:[N.totalHours.toFixed(2)," hrs"]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[a.jsx(Aa,{className:"w-4 h-4"}),"Pending"]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>v(N.id),disabled:m,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50",children:[a.jsx(lr,{className:"w-4 h-4"}),"Approve"]}),a.jsxs("button",{onClick:()=>k(N.id),disabled:m,className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm disabled:opacity-50",children:[a.jsx(en,{className:"w-4 h-4"}),"Reject"]})]})})]},E))})]})})]})]})})}function dxe({managerId:e,managerName:t,role:r,selectedStoreId:n,isIncharge:s=!1,inchargeDesignation:i=null}){const[o,l]=P.useState([]),[d,u]=P.useState(""),[f,m]=P.useState([]),[p,g]=P.useState(!1);console.log("ApproveLeaves: managerId prop =",e),console.log("ApproveLeaves: role prop =",r),console.log("ApproveLeaves: isIncharge =",s),console.log("ApproveLeaves: inchargeDesignation =",i);const b=P.useMemo(()=>{let E=o;return n&&(E=E.filter(_=>_.storeId===n||_.storeId===null||_.storeId===void 0)),s&&e&&(E=E.filter(_=>_.inchargeId===e)),E},[o,n,s,e]);P.useEffect(()=>{y()},[]),P.useEffect(()=>{b.length>0&&!b.find(E=>E.employeeId===d)?u(b[0].employeeId):b.length===0&&u("")},[b]),P.useEffect(()=>{d&&v()},[d]);const y=async()=>{try{console.log("ApproveLeaves: Loading employees/managers for role:",r,"isIncharge:",s);let E;r==="cluster_head"?(console.log("ApproveLeaves: Calling getManagersByClusterHead with clusterHeadId:",e),E=await Ag(e),console.log("ApproveLeaves: Received managers:",E)):s?(console.log("ApproveLeaves: Calling getEmployeesByIncharge with inchargeId:",e),E=await R2(e),console.log("ApproveLeaves: Received employees under incharge:",E)):(console.log("ApproveLeaves: Calling getEmployeesByManager with managerId:",e),E=await kc(e),console.log("ApproveLeaves: Received employees:",E)),l(E),E.length>0?u(E[0].employeeId):console.log("ApproveLeaves: No employees/managers found")}catch(E){console.error("Error loading employees:",E)}},v=async()=>{try{g(!0);const E=await ku(d);m(E.filter(_=>_.status==="pending"))}catch(E){console.error("Error loading leaves:",E)}finally{g(!1)}},k=async E=>{try{g(!0),console.log("Attempting to approve leave:",E),console.log("api.approveLeave function exists?",typeof Lj),console.log("Available API functions:",Object.keys(dW).filter(_=>_.includes("Leave"))),await Lj(E,e,t),await v(),alert("Leave approved successfully")}catch(_){console.error("Error approving leave:",_),alert("Error approving leave")}finally{g(!1)}},S=async E=>{const _=prompt("Enter rejection reason:");if(_)try{g(!0),await u5(E,e,t,_),await v(),alert("Leave rejected")}catch(O){console.error("Error rejecting leave:",O),alert("Error rejecting leave")}finally{g(!1)}},w=f.length,A=o.find(E=>E.employeeId===d),C=r==="cluster_head"?"Operations Manager":"Employee",N=r==="cluster_head"?"Operations Managers":"Employees";return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Approve ",C," Leaves"]}),a.jsx("p",{className:"text-gray-600",children:r==="cluster_head"?"Review and approve manager leave applications. Contract workers do not require leave approval.":"Review and approve employee leave applications"})]}),w>0&&a.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-yellow-900 font-medium",children:[w," leave application",w>1?"s":""," pending approval"]}),a.jsx("p",{className:"text-sm text-yellow-700",children:"Review and take action on pending requests"})]})]})}),e&&o.length===0&&a.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-blue-900 font-medium",children:["No ",N," Found"]}),a.jsx("p",{className:"text-sm text-blue-700",children:r==="cluster_head"?`No managers are assigned to you (${e}). To fix this:`:"You don't have any employees assigned to you yet."}),r==="cluster_head"&&a.jsxs("ul",{className:"text-xs text-blue-700 mt-2 ml-4 space-y-1",children:[a.jsxs("li",{children:[" Go to ",a.jsx("strong",{children:"Employee Management"}),"  ",a.jsx("strong",{children:"Hierarchy Management"})," tab"]}),a.jsxs("li",{children:[" Click ",a.jsx("strong",{children:"Edit"})," on each manager (e.g., BM004)"]}),a.jsxs("li",{children:[" Make sure ",a.jsx("strong",{children:"Cluster Head ID"})," is set to your ID: ",a.jsx("strong",{children:e})]}),a.jsxs("li",{children:[" Click ",a.jsx("strong",{children:"Save Changes"})]})]}),a.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["Your ID: ",e]})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",C]}),a.jsxs("select",{value:d,onChange:E=>u(E.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsxs("option",{value:"",children:["-- Select ",C," --"]}),b.map(E=>a.jsxs("option",{value:E.employeeId,children:[E.name," (",E.employeeId,")"]},E.employeeId))]})]}),A&&a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(tn,{className:"w-8 h-8"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl mb-1",children:A.name}),a.jsxs("p",{className:"text-sm opacity-90",children:["Employee ID: ",A.employeeId]}),a.jsxs("p",{className:"text-sm opacity-90",children:["Email: ",A.email]})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:"Pending Leave Applications"})}),p?a.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):f.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Ur,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No pending leave applications for this employee"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Leave Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Leave Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Reason"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Applied On"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map((E,_)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(E.leaveDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(E.leaveType||"full")==="full"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:(E.leaveType||"full")==="full"?"Full Day":"Half Day"})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:E.reason}),a.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:E.appliedAt?new Date(E.appliedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>k(E.id),disabled:p,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50",children:[a.jsx(lr,{className:"w-4 h-4"}),"Approve"]}),a.jsxs("button",{onClick:()=>S(E.id),disabled:p,className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm disabled:opacity-50",children:[a.jsx(en,{className:"w-4 h-4"}),"Reject"]})]})})]},_))})]})})]})]})})}function uxe({managerId:e,role:t}){const[r,n]=P.useState([]),[s,i]=P.useState([]),[o,l]=P.useState(!1),[d,u]=P.useState({});P.useEffect(()=>{f()},[]);const f=async()=>{try{if(l(!0),t==="manager"){const m=await kc(e);n(m);const p={};for(const g of m){const[b,y]=await Promise.all([l0(g.employeeId),ku(g.employeeId)]);p[g.employeeId]={pendingTimesheets:b.filter(v=>v.status==="pending").length,pendingLeaves:y.filter(v=>v.status==="pending").length,approvedTimesheets:b.filter(v=>v.status==="approved").length,totalLeaves:y.filter(v=>v.status==="approved").length}}u(p)}else{const m=await Ag(e);i(m);const p={};for(const g of m){const b=await kc(g.employeeId);p[g.employeeId]={employeeCount:b.length,...g.stats}}u(p)}}catch(m){if(m instanceof Error&&(m.message==="Not authenticated"||m.message==="Unauthorized"))return;console.error("Error loading data:",m)}finally{l(!1)}};return o?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6 flex items-center justify-center",children:a.jsx("div",{className:"text-gray-500",children:"Loading..."})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:t==="manager"?"My Team":"Manager Overview"}),a.jsx("p",{className:"text-gray-600",children:t==="manager"?"View all employees under your management":"View all managers and their team performance"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(La,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:t==="manager"?r.length:s.length}),a.jsx("div",{className:"text-sm opacity-90",children:t==="manager"?"Total Employees":"Total Managers"})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(Aa,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:Object.values(d).reduce((m,p)=>m+(p.pendingTimesheets||0),0)}),a.jsx("div",{className:"text-sm opacity-90",children:"Pending Timesheets"})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(Ur,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:Object.values(d).reduce((m,p)=>m+(p.pendingLeaves||0),0)}),a.jsx("div",{className:"text-sm opacity-90",children:"Pending Leaves"})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:t==="manager"?"Employee List":"Manager List"})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:(t==="manager"?r:s).map(m=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-xl",children:m.name.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg text-gray-900",children:m.name}),a.jsx("p",{className:"text-sm text-gray-600",children:m.employeeId})]})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(jc,{className:"w-4 h-4"}),m.email]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Ur,{className:"w-4 h-4"}),"Joined: ",m.joiningDate?new Date(m.joiningDate).toLocaleDateString():"N/A"]})]}),d[m.employeeId]&&a.jsx("div",{className:"border-t border-gray-200 pt-4",children:a.jsx("div",{className:"grid grid-cols-2 gap-3",children:t==="manager"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Pending Timesheets"}),a.jsx("div",{className:"text-xl text-yellow-700",children:d[m.employeeId].pendingTimesheets})]}),a.jsxs("div",{className:"bg-pink-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Pending Leaves"}),a.jsx("div",{className:"text-xl text-pink-700",children:d[m.employeeId].pendingLeaves})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Approved Timesheets"}),a.jsx("div",{className:"text-xl text-green-700",children:d[m.employeeId].approvedTimesheets})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Total Leaves"}),a.jsx("div",{className:"text-xl text-blue-700",children:d[m.employeeId].totalLeaves})]})]}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 col-span-2",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Employees"}),a.jsx("div",{className:"text-2xl text-purple-700",children:d[m.employeeId].employeeCount})]})})})})]},m.employeeId))}),(t==="manager"?r:s).length===0&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(tn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:t==="manager"?"No employees found":"No managers found"})]})]})]})})}function i8({employee:e,onClose:t,onSave:r,clusterHeadId:n}){const[s,i]=P.useState({role:e.role,designation:e.designation||null,department:e.department||null,clusterHeadId:e.clusterHeadId||"",storeId:e.storeId||""}),[o,l]=P.useState(!1),[d,u]=P.useState([]);P.useEffect(()=>{f()},[]);const f=async()=>{try{const p=await Nu();u(p)}catch(p){console.error("Error loading stores:",p)}},m=async()=>{try{l(!0);const p={role:s.role,designation:s.designation,department:s.department,storeId:s.storeId||null};s.role==="manager"&&(p.clusterHeadId=s.clusterHeadId||null),await Dg(e.employeeId,p),alert("Employee details updated successfully!"),r(),t()}catch(p){console.error("Error updating employee:",p),alert("Failed to update employee details")}finally{l(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:a.jsx(tn,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:"Edit Employee Details"}),a.jsxs("p",{className:"text-sm text-purple-100",children:[e.name," (",e.employeeId,")"]})]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(ea,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[a.jsx(tn,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Name:"}),a.jsx("span",{children:e.name})]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[a.jsx(jc,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Email:"}),a.jsx("span",{children:e.email})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Jm,{className:"w-4 h-4 inline mr-2"}),"Role (System Permission Level)"]}),a.jsxs("select",{value:s.role,onChange:p=>i({...s,role:p.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Role determines system permissions (who can manage whom)"})]}),s.role==="manager"&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(La,{className:"w-4 h-4 inline mr-2"}),"Cluster Head ID (Optional)"]}),a.jsx("input",{type:"text",value:s.clusterHeadId,onChange:p=>i({...s,clusterHeadId:p.target.value}),placeholder:"e.g., BM005 (leave empty if reporting to another manager)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only for top-level managers. Leave empty if this manager reports to another manager (set via Hierarchy tab instead)."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Jm,{className:"w-4 h-4 inline mr-2"}),"Designation (Job Title)"]}),a.jsxs("select",{value:s.designation||"",onChange:p=>i({...s,designation:p.target.value||null}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No Designation"}),a.jsx("option",{value:"operations_incharge",children:"Operations Incharge"}),a.jsx("option",{value:"store_incharge",children:"Store Incharge"}),a.jsx("option",{value:"production_incharge",children:"Production Incharge"}),a.jsx("option",{value:"store_ops",children:"Store Operations"}),a.jsx("option",{value:"production_ops",children:"Production Operations"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Designation is the job title (appears in organization chart)"})]}),(s.designation==="store_incharge"||s.designation==="store_ops")&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Nl,{className:"w-4 h-4 inline mr-2"}),"Store Assignment"]}),a.jsxs("select",{value:s.storeId||"",onChange:p=>i({...s,storeId:p.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No Store"}),d.map(p=>a.jsx("option",{value:p.id,children:p.name},p.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Assign to a specific store location"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Nl,{className:"w-4 h-4 inline mr-2"}),"Department"]}),a.jsxs("select",{value:s.department||"",onChange:p=>i({...s,department:p.target.value||null}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No Department"}),a.jsx("option",{value:"store_operations",children:"Store Operations"}),a.jsx("option",{value:"production",children:"Production"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Department determines which operations they can manage"})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Understanding Role vs Designation:"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("li",{children:[" ",a.jsx("strong",{children:"Role"})," = System permission level (employee/manager/cluster_head)"]}),a.jsxs("li",{children:[" ",a.jsx("strong",{children:"Designation"})," = Job title (Store Incharge, Operations Manager, etc.)"]}),a.jsx("li",{children:' Example: BM008 can have role="manager" + designation="store_incharge"'}),a.jsx("li",{children:' This allows them to manage employees while having "Store Incharge" as their title'})]})]})]}),a.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex items-center justify-end gap-3 rounded-b-2xl border-t",children:[a.jsx("button",{onClick:t,className:"px-6 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:m,disabled:o,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[a.jsx(Lo,{className:"w-4 h-4"}),o?"Saving...":"Save Changes"]})]})]})})}function hxe({clusterHeadId:e}){const[t,r]=P.useState([]),[n,s]=P.useState([]),[i,o]=P.useState([]),[l,d]=P.useState(!1),[u,f]=P.useState(null),[m,p]=P.useState({}),[g,b]=P.useState(null),[y,v]=P.useState(null);P.useEffect(()=>{k()},[]);const k=async()=>{try{d(!0);const B=await li();console.log("All employees loaded:",B),console.log("Current cluster head ID:",e);const F=B.filter(W=>(W.role==="employee"||W.role==="manager")&&W.role!=="cluster_head");r(F),console.log("Filtered employees and managers:",F);const D=B.filter(W=>W.role==="manager"&&W.clusterHeadId===e);s(D);const H=B.filter(W=>W.role==="cluster_head");o(H),console.log("Available managers (role=manager, clusterHeadId="+e+"):",D),console.log("Available cluster heads:",H);const ne={};F.forEach(W=>{W.managerId&&(ne[W.employeeId]=W.managerId)}),p(ne)}catch(B){if(B instanceof Error&&(B.message==="Not authenticated"||B.message==="Unauthorized"))return;console.error("Error loading data:",B),alert("Failed to load data")}finally{d(!1)}},S=(B,F)=>{p(D=>({...D,[B]:F}))},w=async B=>{try{f(B);const F=m[B];if(!F){alert("Please select a manager");return}await Tg(B,F),alert("Manager assigned successfully!"),await k()}catch(F){console.error("Error assigning manager:",F),alert("Failed to assign manager")}finally{f(null)}},A=async(B,F)=>{if(confirm(`Are you sure you want to promote ${F} to Manager? This will:

1. Change their role from Employee to Manager
2. Set their cluster head to ${e}
3. Allow them to manage other employees

Continue?`))try{b(B),await Dg(B,{role:"manager",clusterHeadId:e}),alert(`${F} has been promoted to Manager!`),await k()}catch(D){console.error("Error promoting to manager:",D),alert("Failed to promote employee to manager")}finally{b(null)}},C=t.filter(B=>!B.managerId),N=t.filter(B=>B.managerId),E=B=>{if(!B)return"Unassigned";const F=n.find(H=>H.employeeId===B);if(F)return F.name;const D=i.find(H=>H.employeeId===B);return D?`${D.name} (Cluster Head)`:"Unknown Manager"},_=B=>{const F=[];return B.role==="manager"?(F.push(...i),F.push(...n.filter(D=>D.employeeId!==B.employeeId))):F.push(...n.filter(D=>D.employeeId!==B.employeeId)),F},O=B=>{if(!B)return a.jsx("span",{className:"text-gray-400 italic",children:"No designation"});const F={operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",store_ops:"Store Operations",production_ops:"Production Operations"};return a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:F[B]||B})};return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-gray-500",children:"Loading..."})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Assign Managers to Employees"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Manage employee-manager relationships across your organization"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(La,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Employees"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(lr,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Assigned"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N.length})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:a.jsx(Ar,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Unassigned"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C.length})]})]})})]}),n.length===0?a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 text-center",children:[a.jsx(Ar,{className:"w-12 h-12 text-yellow-600 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-2",children:"No Managers Available"}),a.jsx("p",{className:"text-yellow-700",children:"You need to create managers first before assigning them to employees."})]}):a.jsxs(a.Fragment,{children:[C.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-t-xl px-6 py-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-red-900 flex items-center gap-2",children:[a.jsx(Ar,{className:"w-5 h-5"}),"Unassigned Employees (",C.length,")"]}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:"These employees need to be assigned to a manager"})]}),a.jsx("div",{className:"bg-white rounded-b-xl shadow-sm border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assign Manager"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(B=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.name}),a.jsx("div",{className:"text-sm text-gray-500",children:B.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:B.employeeId}),B.role==="employee"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Employee"}),B.role==="manager"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Manager"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O(B.designation)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("select",{value:m[B.employeeId]||"",onChange:F=>S(B.employeeId,F.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[a.jsx("option",{value:"",children:"Select a manager..."}),_(B).map(F=>a.jsxs("option",{value:F.employeeId,children:[F.name," (",F.employeeId,")"]},F.employeeId))]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>w(B.employeeId),disabled:!m[B.employeeId]||u===B.employeeId,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[a.jsx(Lo,{className:"w-4 h-4"}),u===B.employeeId?"Saving...":"Assign"]}),B.role==="employee"&&a.jsxs("button",{onClick:()=>A(B.employeeId,B.name),disabled:g===B.employeeId,className:"inline-flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[a.jsx(GE,{className:"w-4 h-4"}),g===B.employeeId?"Promoting...":"Promote"]}),a.jsxs("button",{onClick:()=>v(B),className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[a.jsx(ep,{className:"w-4 h-4"}),"Edit"]})]})})]},B.employeeId))})]})})]}),N.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-t-xl px-6 py-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-green-900 flex items-center gap-2",children:[a.jsx(lr,{className:"w-5 h-5"}),"Assigned Employees (",N.length,")"]}),a.jsx("p",{className:"text-sm text-green-700 mt-1",children:"These employees are already assigned to managers"})]}),a.jsx("div",{className:"bg-white rounded-b-xl shadow-sm border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Manager"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reassign Manager"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(B=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.name}),a.jsx("div",{className:"text-sm text-gray-500",children:B.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:B.employeeId}),B.role==="employee"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Employee"}),B.role==="manager"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Manager"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O(B.designation)}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:E(B.managerId)}),B.managerId&&a.jsx("div",{className:"text-xs text-gray-500",children:B.managerId})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("select",{value:m[B.employeeId]||B.managerId||"",onChange:F=>S(B.employeeId,F.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[a.jsx("option",{value:"",children:"Select a manager..."}),_(B).map(F=>a.jsxs("option",{value:F.employeeId,children:[F.name," (",F.employeeId,")"]},F.employeeId))]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>w(B.employeeId),disabled:!m[B.employeeId]||m[B.employeeId]===B.managerId||u===B.employeeId,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[a.jsx(Lo,{className:"w-4 h-4"}),u===B.employeeId?"Saving...":"Update"]}),B.role==="employee"&&a.jsxs("button",{onClick:()=>A(B.employeeId,B.name),disabled:g===B.employeeId,className:"inline-flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[a.jsx(GE,{className:"w-4 h-4"}),g===B.employeeId?"Promoting...":"Promote"]}),a.jsxs("button",{onClick:()=>v(B),className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[a.jsx(ep,{className:"w-4 h-4"}),"Edit"]})]})})]},B.employeeId))})]})})]}),t.length===0&&a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-12 text-center",children:[a.jsx(La,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Employees Found"}),a.jsx("p",{className:"text-gray-600",children:"There are no employees in the system yet. Create employees first through the Employee Management tab."})]})]}),y&&a.jsx(i8,{employee:y,onClose:()=>v(null),onSave:k,clusterHeadId:e})]})}function O6({currentUser:e}){const[t,r]=P.useState([]),[n,s]=P.useState(!0);P.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const f=await li(),m=f.find(k=>k.employeeId===e.employeeId);if(!m){s(!1);return}console.log("[Hierarchy Debug] Current user record:",m);const p=[m];let g=m,b=0;const y=10;for(;g&&b<y;){const k=g.clusterHeadId||g.managerId||g.inchargeId;if(console.log("[Hierarchy Debug] Looking for superior ID:",k,"for",g.name),!k)break;const S=f.find(w=>w.employeeId===k);if(console.log("[Hierarchy Debug] Found superior:",S),S){if(p.some(w=>w.employeeId===S.employeeId)){console.log("[Hierarchy Debug] Circular reference detected, breaking");break}if(p.push(S),g=S,S.role==="cluster_head"){console.log("[Hierarchy Debug] Reached cluster head");break}}else break;b++}const v=p.reverse();console.log("[Hierarchy Debug] Final reporting chain (top to bottom):",v),r(v)}catch(f){console.error("Error loading hierarchy:",f)}finally{s(!1)}},o=f=>f.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2),l=(f,m)=>!f&&!m?"N/A":f?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",operations_manager:"Operations Manager",store_ops:"Store Operations",production_ops:"Production Operations"}[f]||f:{cluster_head:"Cluster Head",manager:"Manager",employee:"Employee"}[m||""]||m||"N/A",d=(f,m)=>m?"bg-gradient-to-br from-purple-500 to-pink-500 ring-4 ring-purple-200":f.role==="cluster_head"?"bg-gradient-to-br from-blue-500 to-indigo-500":f.role==="manager"||f.designation?.includes("incharge")||f.designation==="operations_manager"?"bg-gradient-to-br from-green-400 to-emerald-500":"bg-gradient-to-br from-gray-400 to-gray-500",u=(f,m)=>m?"bg-gradient-to-r from-purple-100 to-pink-100 border-purple-300":f.role==="cluster_head"?"bg-gradient-to-r from-blue-100 to-indigo-100 border-blue-300":f.role==="manager"||f.designation?.includes("incharge")||f.designation==="operations_manager"?"bg-gradient-to-r from-green-100 to-emerald-100 border-green-300":"bg-gray-100 border-gray-300";return n?a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsx("div",{className:"text-gray-500",children:"Loading hierarchy..."})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Employee Hierarchy"}),a.jsx("p",{className:"text-gray-600",children:"View your reporting chain from top to bottom"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8",children:t.length>0?a.jsx("div",{className:"flex flex-col items-center",children:t.map((f,m)=>{const p=f.employeeId===e.employeeId,g=m===t.length-1;return a.jsxs("div",{className:"w-full flex flex-col items-center",children:[a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"inline-block",children:[a.jsx("div",{className:`w-28 h-28 rounded-2xl flex items-center justify-center mb-4 ${d(f,p)}`,children:a.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xl text-gray-700",children:o(f.name)})})}),a.jsxs("div",{className:`px-6 py-3 rounded-lg border-2 ${u(f,p)}`,children:[a.jsx("p",{className:"font-semibold text-gray-900",children:f.name}),a.jsx("p",{className:"text-sm text-gray-700",children:l(f.designation,f.role)}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:f.employeeId}),p&&a.jsx("p",{className:"text-xs text-purple-600 mt-1 font-semibold",children:"(You)"})]})]})}),!g&&a.jsxs("div",{className:"flex flex-col items-center my-6",children:[a.jsx("div",{className:"w-px h-8 bg-gray-300"}),a.jsx(nf,{className:"w-6 h-6 text-gray-400"}),a.jsx("div",{className:"w-px h-8 bg-gray-300"})]})]},f.employeeId)})}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Nl,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg text-gray-600 mb-2",children:"No Hierarchy Found"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Your organizational hierarchy hasn't been set up yet."})]})}),a.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Legend"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 ring-4 ring-purple-200 rounded-lg"}),a.jsx("span",{className:"text-sm text-gray-700",children:"You (Current User)"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-lg"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Cluster Head"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-emerald-500 rounded-lg"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Manager / Incharge"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-400 to-gray-500 rounded-lg"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Employee"})]})]})]})]})})}function o8({user:e,selectedStoreId:t,isIncharge:r=!1,inchargeDesignation:n=null}){const[s,i]=P.useState(()=>e.role==="employee"||e.role==="manager"?"timesheet":e.role==="cluster_head"?"approve-timesheet":"timesheet"),[o,l]=P.useState(0),[d,u]=P.useState(!1),f=e.role==="employee",m=e.role==="manager",p=e.role==="cluster_head";return console.log("AttendancePortal: user =",e),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50",children:[(m||p)&&!e.employeeId&&a.jsx("div",{className:"bg-red-50 border-b border-red-200 p-4",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-sm",children:"!"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-red-900 font-medium",children:"Employee ID Not Found"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Your account doesn't have an employee ID associated with it. This means:"}),a.jsxs("ul",{className:"text-sm text-red-700 mt-2 list-disc list-inside space-y-1",children:[a.jsx("li",{children:"You won't be able to see employees assigned to you"}),a.jsx("li",{children:"Approval workflows won't work properly"}),a.jsx("li",{children:"Employees you create won't be linked to your account"})]}),a.jsxs("p",{className:"text-sm text-red-800 mt-2 font-medium",children:[a.jsx("strong",{children:"Solution:"})," Log out and log back in. If the problem persists, your account needs to be recreated through the Employee Management system."]}),a.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Debug Info: email=",e.email,", role=",e.role,", employeeId=",e.employeeId||"NULL"]})]})]})})}),a.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-40",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center overflow-x-auto py-4 gap-2 scrollbar-hide",children:[f&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>i("timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Aa,{className:"w-4 h-4"}),"Update Timesheet"]}),a.jsxs("button",{onClick:()=>i("leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Ur,{className:"w-4 h-4"}),"Apply for Leave"]}),a.jsxs("button",{onClick:()=>i("hierarchy"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="hierarchy"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(X6,{className:"w-4 h-4"}),"Hierarchy"]})]}),m&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>i("timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Aa,{className:"w-4 h-4"}),"My Timesheet"]}),a.jsxs("button",{onClick:()=>i("leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Ur,{className:"w-4 h-4"}),"My Leave"]}),a.jsxs("button",{onClick:()=>i("approve-timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Eo,{className:"w-4 h-4"}),"Approve Timesheets"]}),a.jsxs("button",{onClick:()=>i("approve-leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Eo,{className:"w-4 h-4"}),"Approve Leaves"]}),a.jsxs("button",{onClick:()=>i("team"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="team"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(La,{className:"w-4 h-4"}),"My Team"]})]}),p&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>i("approve-timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Eo,{className:"w-4 h-4"}),"Approve Manager Timesheets"]}),a.jsxs("button",{onClick:()=>i("approve-leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Eo,{className:"w-4 h-4"}),"Approve Manager Leaves"]}),a.jsxs("button",{onClick:()=>i("managers"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="managers"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(La,{className:"w-4 h-4"}),"Manager Overview"]}),a.jsxs("button",{onClick:()=>i("assign-managers"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="assign-managers"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(cU,{className:"w-4 h-4"}),"Assign Managers"]})]})]})})}),a.jsxs("div",{children:[s==="timesheet"&&a.jsx(ixe,{user:{employeeId:e.employeeId||"",name:e.name,email:e.email}}),s==="leave"&&a.jsx(oxe,{user:{employeeId:e.employeeId||"",name:e.name,email:e.email,joiningDate:e.joiningDate}}),s==="approve-timesheet"&&(m||p||r)&&a.jsx(cxe,{managerId:e.employeeId||"",role:e.role,selectedStoreId:t,isIncharge:r,inchargeDesignation:n}),s==="approve-leave"&&(m||p||r)&&a.jsx(dxe,{managerId:e.employeeId||"",managerName:e.name,role:e.role,selectedStoreId:t,isIncharge:r,inchargeDesignation:n}),s==="team"&&m&&a.jsx(uxe,{managerId:e.employeeId||"",role:"manager"},o),s==="hierarchy"&&f&&a.jsx(O6,{currentUser:{employeeId:e.employeeId||"",role:e.role,email:e.email,name:e.name}},o),s==="managers"&&p&&a.jsx(O6,{currentUser:{employeeId:e.employeeId||"",role:e.role,email:e.email,name:e.name}},o),s==="assign-managers"&&p&&a.jsx(hxe,{clusterHeadId:e.employeeId||""},o)]})]})}function l8({manager:e,level:t=0}){const r=e.managers&&e.managers.length>0||e.employees&&e.employees.length>0,n=s=>s?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",store_ops:"Store Operations",production_ops:"Production Operations"}[s]||s:"Manager";return a.jsxs("div",{className:"mb-4 last:mb-0 border border-gray-200 rounded-lg bg-white",children:[a.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(kl,{className:"w-5 h-5 text-gray-400"}),a.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white",children:a.jsx(Di,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:"text-gray-900",children:e.name}),a.jsx("span",{className:"px-2 py-1 bg-green-600 text-white text-xs rounded",children:n(e.designation)})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[e.employeeId,"  ",e.email]})]})]})}),r&&a.jsxs("div",{className:"p-4 space-y-4 bg-gray-50",children:[e.managers&&e.managers.length>0&&a.jsx("div",{className:"space-y-3",children:e.managers.map(s=>a.jsx(l8,{manager:s,level:t+1},s.employeeId))}),e.employees&&e.employees.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Direct Reports:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.employees.map(s=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-pink-50 rounded-lg border border-pink-100",children:[a.jsx(kl,{className:"w-4 h-4 text-gray-400"}),a.jsx("div",{className:"w-8 h-8 bg-pink-600 rounded-full flex items-center justify-center text-white text-sm",children:a.jsx(tn,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm text-gray-900 truncate",children:s.name}),a.jsx("div",{className:"text-xs text-gray-600 truncate",children:s.employeeId})]})]},s.employeeId))})]})]})]})}function fxe({userRole:e,selectedStoreId:t,accessToken:r}){const[n,s]=P.useState([]),[i,o]=P.useState([]),[l,d]=P.useState([]),[u,f]=P.useState({totalClusterHeads:0,totalManagers:0,totalEmployees:0}),[m,p]=P.useState(!1),[g,b]=P.useState(!1),[y,v]=P.useState(!1),[k,S]=P.useState(null),[w,A]=P.useState(null),[C,N]=P.useState([]),[E,_]=P.useState([]);P.useEffect(()=>{O()},[t]);const O=async()=>{if(!r){console.error("No access token available");return}try{p(!0);const D=await o5(t);if(console.log("[Hierarchy Frontend] Received data:",{hierarchyCount:D.hierarchy?.length||0,unassignedManagersCount:D.unassignedManagers?.length||0,unassignedEmployeesCount:D.unassignedEmployees?.length||0,stats:D.stats,selectedStoreId:t}),s(D.hierarchy||[]),o(D.unassignedManagers||[]),d(D.unassignedEmployees||[]),f(D.stats||{totalClusterHeads:0,totalManagers:0,totalEmployees:0}),e==="cluster_head")try{const W=await z5(r);N(W)}catch{console.log("User not authorized to view all cluster heads")}const ne=(await li()).filter(W=>W.role==="manager");_(ne)}catch(D){console.error("Error loading hierarchy:",D),D instanceof Error&&!D.message.includes("JWT")&&!D.message.includes("Unauthorized")&&alert("Failed to load organizational hierarchy")}finally{p(!1)}},B=async(D,H)=>{try{await(void 0)(D,H),alert("Cluster head assigned successfully!"),b(!1),S(null),await O()}catch(ne){console.error("Error assigning cluster head:",ne),alert("Failed to assign cluster head")}},F=async(D,H)=>{try{await Tg(D,H),alert("Manager assigned successfully!"),v(!1),A(null),await O()}catch(ne){console.error("Error assigning manager:",ne),alert("Failed to assign manager")}};return m?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6 flex items-center justify-center",children:a.jsx("div",{className:"text-gray-500",children:"Loading hierarchy..."})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Organizational Hierarchy"}),a.jsx("p",{className:"text-gray-600",children:"Manage reporting relationships across the organization"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Nl,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:u.totalClusterHeads}),a.jsx("div",{className:"text-sm opacity-90",children:"Cluster Heads"})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Di,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:u.totalManagers}),a.jsx("div",{className:"text-sm opacity-90",children:"Managers"})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(La,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:u.totalEmployees}),a.jsx("div",{className:"text-sm opacity-90",children:"Employees"})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Organizational Structure"}),a.jsx(X6,{className:"w-6 h-6 text-purple-600"})]}),n.length===0&&i.length===0&&l.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Nl,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No employees found. Create employees to get started."})]}):a.jsxs(a.Fragment,{children:[n.length>0&&a.jsx("div",{className:"space-y-6 mb-6",children:n.map(D=>a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white",children:a.jsx(Nl,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-lg text-gray-900",children:D.name}),a.jsx("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs rounded",children:"Cluster Head"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[D.employeeId,"  ",D.email]})]})]})}),D.managers&&D.managers.length>0&&a.jsx("div",{className:"p-4 bg-gray-50",children:D.managers.map(H=>a.jsx(l8,{manager:H},H.employeeId))})]},D.employeeId))}),i.length>0&&i.some(D=>D.employees&&D.employees.length>0||D.incharges&&D.incharges.length>0)&&a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsx("h3",{className:"text-lg text-gray-900 font-semibold",children:"Managers and Their Teams"}),i.filter(D=>D.employees&&D.employees.length>0||D.incharges&&D.incharges.length>0).map(D=>a.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center text-white",children:a.jsx(Di,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:"text-gray-900",children:D.name}),a.jsx("span",{className:"px-2 py-1 bg-purple-600 text-white text-xs rounded",children:"Manager"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[D.employeeId,"  ",D.email]})]})]})}),(D.incharges||D.employees)&&a.jsxs("div",{className:"p-4 space-y-4",children:[D.incharges&&D.incharges.length>0&&a.jsx("div",{className:"space-y-3",children:D.incharges.map(H=>a.jsxs("div",{className:"border border-indigo-200 rounded-lg overflow-hidden bg-indigo-50/50",children:[a.jsx("div",{className:"bg-gradient-to-r from-indigo-100 to-indigo-200 p-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(kl,{className:"w-4 h-4 text-indigo-400"}),a.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center text-white",children:a.jsx(Di,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-900",children:H.name}),a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs rounded",children:H.designation==="store_incharge"?"Store Incharge":"Production Incharge"})]}),a.jsx("div",{className:"text-xs text-gray-600",children:H.employeeId})]})]})}),H.employees&&H.employees.length>0&&a.jsx("div",{className:"p-3",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:H.employees.map(ne=>a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded border border-indigo-100",children:[a.jsx(kl,{className:"w-3 h-3 text-gray-300"}),a.jsx("div",{className:"w-6 h-6 bg-pink-500 rounded-full flex items-center justify-center text-white text-xs",children:a.jsx(tn,{className:"w-3 h-3"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-xs text-gray-900 truncate",children:ne.name}),a.jsx("div",{className:"text-xs text-gray-500 truncate",children:ne.employeeId})]})]},ne.employeeId))})})]},H.employeeId))}),D.employees&&D.employees.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Direct Reports:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:D.employees.map(H=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-pink-50 rounded-lg",children:[a.jsx(kl,{className:"w-4 h-4 text-gray-400"}),a.jsx("div",{className:"w-8 h-8 bg-pink-600 rounded-full flex items-center justify-center text-white text-sm",children:a.jsx(tn,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm text-gray-900 truncate",children:H.name}),a.jsx("div",{className:"text-xs text-gray-600 truncate",children:H.employeeId})]})]},H.employeeId))})]})]})]},D.employeeId))]})]})]}),(i.length>0||l.length>0)&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg text-gray-900",children:"Unassigned Managers"}),a.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 text-sm rounded-full",children:i.length})]}),a.jsx("div",{className:"space-y-3",children:i.map(D=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(Di,{className:"w-5 h-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:D.name}),a.jsx("div",{className:"text-sm text-gray-600",children:D.employeeId})]})]})}),e==="cluster_head"&&a.jsx("button",{onClick:()=>{S(D),b(!0)},className:"w-full px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:"Assign Cluster Head"})]},D.employeeId))})]}),l.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg text-gray-900",children:"Unassigned Employees"}),a.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 text-sm rounded-full",children:l.length})]}),a.jsx("div",{className:"space-y-3",children:l.map(D=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center",children:a.jsx(tn,{className:"w-5 h-5 text-pink-600"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:D.name}),a.jsx("div",{className:"text-sm text-gray-600",children:D.employeeId})]})]})}),(e==="cluster_head"||e==="manager")&&a.jsx("button",{onClick:()=>{A(D),v(!0)},className:"w-full px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:"Assign Manager"})]},D.employeeId))})]})]}),g&&k&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-xl text-gray-900 mb-4",children:"Assign Cluster Head to Manager"}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Manager: ",a.jsx("strong",{children:k.name})," (",k.employeeId,")"]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Cluster Head"}),a.jsxs("select",{id:"clusterHeadSelect",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",defaultValue:"",children:[a.jsx("option",{value:"",disabled:!0,children:"Choose a cluster head..."}),C.map(D=>a.jsxs("option",{value:D.employeeId,children:[D.name," (",D.employeeId,")"]},D.employeeId))]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{const D=document.getElementById("clusterHeadSelect");D.value?B(k.employeeId,D.value):alert("Please select a cluster head")},className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:shadow-lg transition-all",children:"Assign"}),a.jsx("button",{onClick:()=>{b(!1),S(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})}),y&&w&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-xl text-gray-900 mb-4",children:"Assign Manager to Employee"}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Employee: ",a.jsx("strong",{children:w.name})," (",w.employeeId,")"]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Manager"}),a.jsxs("select",{id:"managerSelect",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",defaultValue:"",children:[a.jsx("option",{value:"",disabled:!0,children:"Choose a manager..."}),E.map(D=>a.jsxs("option",{value:D.employeeId,children:[D.name," (",D.employeeId,")"]},D.employeeId))]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{const D=document.getElementById("managerSelect");D.value?F(w.employeeId,D.value):alert("Please select a manager")},className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:shadow-lg transition-all",children:"Assign"}),a.jsx("button",{onClick:()=>{v(!1),A(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})})]})})}function mxe({user:e,selectedStoreId:t}){const[r,n]=P.useState("employees"),[s,i]=P.useState([]),[o,l]=P.useState([]),[d,u]=P.useState(!1),[f,m]=P.useState([]),[p,g]=P.useState(!1),[b,y]=P.useState(!1),[v,k]=P.useState(!1),[S,w]=P.useState(null),[A,C]=P.useState(""),[N,E]=P.useState(null),[_,O]=P.useState(!1),[B,F]=P.useState(!1),[D,H]=P.useState(null),[ne,W]=P.useState(""),[ee,re]=P.useState(""),[Q,R]=P.useState(!1),[X,L]=P.useState(null),[I,G]=P.useState(""),[V,Z]=P.useState("manager"),[ve,Ee]=P.useState([]),[Te,ue]=P.useState([]),[ge,Fe]=P.useState(!1),[J,Ze]=P.useState(null),[rt,Tt]=P.useState("employee"),[ze,Re]=P.useState(!1),[Ce,Se]=P.useState(null),[Qe,kt]=P.useState(""),[Ct,yr]=P.useState(!1),[Kt,Rr]=P.useState(null),[Pr,da]=P.useState(!1),[ur,Br]=P.useState(null),[It,er]=P.useState("none"),[Ir,Tr]=P.useState(!1),[tr,Da]=P.useState(null),[Oa,He]=P.useState(""),[Ie,lt]=P.useState({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""});console.log("EmployeeManagement: Current user:",e),console.log("EmployeeManagement: User employeeId:",e.employeeId),console.log("EmployeeManagement: User role:",e.role);const Ke=e.role==="manager",pt=e.role==="cluster_head";P.useEffect(()=>{Ie.role==="cluster_head"&&lt(z=>({...z,employmentType:"fulltime"}))},[Ie.role]),P.useEffect(()=>{Rt(),pt&&Nt()},[t]);const Nt=async()=>{try{const z=await Nu();m(z)}catch(z){if(z instanceof Error&&(z.message==="Not authenticated"||z.message==="Unauthorized"))return;console.error("Error loading stores:",z)}},Rt=async()=>{try{g(!0);let z;Ke&&e.employeeId?(console.log(" Loading employees for manager:",e.employeeId),z=await kc(e.employeeId),console.log(" Loaded employees:",z)):pt?(console.log(" Loading all employees for cluster head"),z=await li(),t&&(z=z.filter(ce=>ce.storeId===t||ce.storeId===null||ce.storeId===void 0))):z=await li(),i(z);try{const ce=await WI();l(ce)}catch(ce){console.error("Error loading archived employees:",ce)}}catch(z){console.error("Error loading employees:",z),alert("Failed to load employees")}finally{g(!1)}},Pt=async()=>{try{const ce=(await li()).map($e=>{const De=$e.employeeId.match(/BM(\d+)/);return De?parseInt(De[1]):0}).filter($e=>$e>0);return`BM${(ce.length>0?Math.max(...ce)+1:1).toString().padStart(3,"0")}`}catch(z){return console.error("Error generating employee ID:",z),`BM${Date.now().toString().slice(-3)}`}},Dr=(z,ce)=>{const ye=z.target.files?.[0];if(!ye)return;const $e=new FileReader;$e.onloadend=()=>{const De=$e.result;ce==="front"?W(De):re(De)},$e.readAsDataURL(ye)},pa=async()=>{if(!Ie.name||!Ie.email||!Ie.password){alert("Please fill all required fields");return}if(Ke&&Ie.role==="manager"){alert("Only Cluster Heads can create managers");return}try{g(!0);const z=await Pt(),ce={employeeId:z,name:Ie.name,email:Ie.email,password:Ie.password,role:Ie.role,employmentType:Ie.employmentType,joiningDate:Ie.joiningDate,dob:Ie.dob,phone:Ie.phone,status:"active",createdBy:e.email,createdAt:new Date().toISOString()};Ie.role==="employee"?(ce.managerId=e.employeeId,Ke&&e.storeId&&(ce.storeId=e.storeId)):Ie.role==="manager"&&(ce.clusterHeadId=e.employeeId,Ie.storeId&&(ce.storeId=Ie.storeId)),ne&&(ce.aadharFront=ne),ee&&(ce.aadharBack=ee),await zI(ce),alert(` Employee created successfully!
      
Employee ID: ${z}
Name: ${Ie.name}
Email: ${Ie.email}
Password: ${Ie.password}

 IMPORTANT: Save these credentials!
The employee can now login with their email and password.`),lt({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""}),W(""),re(""),y(!1),await Rt()}catch(z){console.error("Error creating employee:",z),alert("Failed to create employee. Email might already be in use.")}finally{g(!1)}},oa=async z=>{if(confirm("Are you sure you want to delete this employee?"))try{g(!0),await KI(z),alert("Employee deleted successfully"),await Rt()}catch(ce){console.error("Error deleting employee:",ce),alert("Failed to delete employee")}finally{g(!1)}},ot=z=>{w(z),k(!0)},Sr=async()=>{if(!tr||!Oa){alert("Please enter a new password");return}try{g(!0);const z=await GI(tr.employeeId,Oa);alert(` Password reset successfully!

Employee: ${z.credentials.employeeId} - ${tr.name}
Email: ${z.credentials.email}
New Password: ${z.credentials.password}

 IMPORTANT: Save these credentials and share them with the employee!`),Tr(!1),Da(null),He("")}catch(z){console.error("Error resetting password:",z),alert("Failed to reset password: "+(z instanceof Error?z.message:"Unknown error"))}finally{g(!1)}},Ot=async()=>{if(S)try{g(!0);const z={name:S.name,email:S.email,role:S.role,employmentType:S.employmentType,joiningDate:S.joiningDate,dob:S.dob,phone:S.phone,status:S.status};console.log("Updating employee with data:",z),await Dg(S.employeeId,z),alert("Employee updated successfully!"),k(!1),w(null),await Rt()}catch(z){console.error("Error updating employee - full error:",z),console.error("Error updating employee - error message:",z instanceof Error?z.message:String(z)),alert(`Failed to update employee: ${z instanceof Error?z.message:String(z)}`)}finally{g(!1)}},xe=()=>{const z=s.length,ce=s.filter(Ge=>Ge.role==="manager").length,ye=s.filter(Ge=>Ge.employmentType==="fulltime").length,$e=s.filter(Ge=>Ge.employmentType==="contract").length,De=s.filter(Ge=>Ge.status==="active").length;return{total:z,managers:ce,fulltime:ye,contract:$e,active:De}},it=async()=>{if(confirm("This will assign storeIds to all employees based on their manager's store. Continue?"))try{g(!0);const z=await YI();H(z),F(!0),await Rt()}catch(z){console.error("Error running migration:",z),alert(`Migration failed: ${z instanceof Error?z.message:String(z)}`)}finally{g(!1)}},dt=async()=>{if(confirm("This will sync all employee designations (Store Incharge/Production Incharge) to their auth accounts. This ensures incharges can access their full features when they log in. Continue?"))try{g(!0);const z=await e5();alert(` Successfully synced ${z.synced} employee designations!

${z.skipped>0?`Skipped ${z.skipped} employees (no designation or no auth account)`:""}

 Store incharges should now log out and log back in to see their full features.`),await Rt()}catch(z){console.error("Error syncing designations:",z),alert(`Sync failed: ${z instanceof Error?z.message:String(z)}`)}finally{g(!1)}},gt=async z=>{try{const ce=await li(),ye=ce.filter(De=>De.role==="manager"),$e=ce.filter(De=>De.designation==="store_incharge"||De.designation==="production_incharge");Ee(ye),ue($e),L(z),z.inchargeId?(Z("incharge"),G(z.inchargeId)):(Z("manager"),G(z.managerId||"")),R(!0)}catch(ce){console.error("Error loading managers:",ce),alert("Failed to load managers")}},ft=async()=>{if(!X||!I){alert("Please select a supervisor");return}try{g(!0),V==="incharge"?(await ZI(X.employeeId,I),alert("Incharge assigned successfully! Employee has been assigned to their department.")):(await Tg(X.employeeId,I),alert("Operations Manager assigned successfully! Employee's store has been updated to match their new manager.")),R(!1),L(null),G(""),await Rt()}catch(z){console.error("Error assigning supervisor:",z),alert(`Failed to assign supervisor: ${z instanceof Error?z.message:String(z)}`)}finally{g(!1)}},q=z=>{if(!z)return"No manager assigned";const ce=s.find(ye=>ye.employeeId===z);return ce?`${ce.name} (${ce.employeeId})`:`Manager ${z}`},oe=z=>{Ze(z),Tt(z.role),Fe(!0)},ae=async()=>{if(J)try{g(!0),await XI(J.employeeId,rt),alert(`Role updated successfully from "${J.role}" to "${rt}"!`),Fe(!1),Ze(null),await Rt()}catch(z){console.error("Error updating role:",z),alert(`Failed to update role: ${z instanceof Error?z.message:String(z)}`)}finally{g(!1)}},se=z=>{Se(z),kt(z.storeId||""),Re(!0)},K=async()=>{if(!(!Ce||!Qe))try{g(!0),await JI(Ce.employeeId,Qe);const z=f.find(ce=>ce.id===Qe)?.name||Qe;alert(`Store updated successfully! ${Ce.name} is now assigned to ${z}`),Re(!1),Se(null),await Rt()}catch(z){console.error("Error updating store:",z),alert(`Failed to update store: ${z instanceof Error?z.message:String(z)}`)}finally{g(!1)}},Y=z=>{Br(z),z.designation==="store_incharge"?er("store_incharge"):z.designation==="production_incharge"?er("production_incharge"):er("none"),da(!0)},le=async()=>{if(ur)try{g(!0);const z=It==="none"?null:It,ce=It==="store_incharge"?"store_operations":It==="production_incharge"?"production":null;await QI(ur.employeeId,z,ce);const ye=It==="store_incharge"?"Store Incharge":It==="production_incharge"?"Production Incharge":"Regular Employee";alert(`Designation updated! ${ur.name} is now ${ye}`),da(!1),Br(null),await Rt()}catch(z){console.error("Error updating designation:",z),alert(`Failed to update designation: ${z instanceof Error?z.message:String(z)}`)}finally{g(!1)}},pe=xe();return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Employee Management"}),a.jsx("p",{className:"text-gray-600",children:"Unified employee, manager, and contract worker management"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),a.jsx("p",{className:"text-2xl text-gray-900",children:pe.total})]}),a.jsx(La,{className:"w-8 h-8 text-purple-500"})]})}),pt&&a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Managers"}),a.jsx("p",{className:"text-2xl text-gray-900",children:pe.managers})]}),a.jsx(La,{className:"w-8 h-8 text-blue-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Full-Time"}),a.jsx("p",{className:"text-2xl text-gray-900",children:pe.fulltime})]}),a.jsx(ks,{className:"w-8 h-8 text-green-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Contract"}),a.jsx("p",{className:"text-2xl text-gray-900",children:pe.contract})]}),a.jsx(ks,{className:"w-8 h-8 text-orange-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),a.jsx("p",{className:"text-2xl text-gray-900",children:pe.active})]}),a.jsx(La,{className:"w-8 h-8 text-pink-500"})]})})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:a.jsxs("div",{className:"flex border-b border-gray-200",children:[a.jsx("button",{onClick:()=>n("employees"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="employees"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(La,{className:"w-5 h-5"}),a.jsx("span",{children:"Employee List"})]})}),a.jsx("button",{onClick:()=>n("hierarchy"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="hierarchy"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(La,{className:"w-5 h-5"}),a.jsx("span",{children:"Hierarchy"})]})}),a.jsx("button",{onClick:()=>n("payroll"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="payroll"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(ca,{className:"w-5 h-5"}),a.jsx("span",{children:"Payroll"})]})}),a.jsx("button",{onClick:()=>n("attendance"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="attendance"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Aa,{className:"w-5 h-5"}),a.jsx("span",{children:"Attendance"})]})})]})}),r==="hierarchy"?a.jsx(fxe,{userRole:e.role,selectedStoreId:t,accessToken:e.accessToken}):r==="payroll"?a.jsx(Gk,{userRole:e.role,selectedDate:new Date().toISOString().split("T")[0],userEmployeeId:e.employeeId,userName:e.name,selectedStoreId:t}):r==="attendance"?a.jsx(o8,{user:{employeeId:e.employeeId,name:e.name,email:e.email,role:e.role},selectedStoreId:t}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(J6,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search by name, ID, or email...",value:A,onChange:z=>C(z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg transition-all",children:[a.jsx(Bs,{className:"w-5 h-5"}),"Add ",pt?"Employee/Manager":"Employee"]}),pt&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>O(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:[a.jsx(fB,{className:"w-5 h-5"}),"Create Login Accounts"]}),a.jsxs("button",{onClick:it,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-lg hover:shadow-lg transition-all disabled:opacity-50",title:"Assign store IDs to existing employees based on their manager's store",children:[a.jsx(_o,{className:"w-5 h-5"}),"Migrate Stores"]}),a.jsxs("button",{onClick:dt,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:shadow-lg transition-all disabled:opacity-50",title:"Sync employee designations to auth accounts so incharges can access their full features",children:[a.jsx(Di,{className:"w-5 h-5"}),"Sync Designations"]})]})]})]})}),b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:a.jsxs("h2",{className:"text-2xl",children:["Create New ",pt?"Employee/Manager":"Employee"]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[pt&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role *"}),a.jsxs("select",{value:Ie.role,onChange:z=>lt({...Ie,role:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employment Type *"}),a.jsxs("select",{value:Ie.employmentType,onChange:z=>lt({...Ie,employmentType:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:Ie.role==="cluster_head",children:[a.jsx("option",{value:"fulltime",children:"Full-Time"}),Ie.role!=="cluster_head"&&a.jsx("option",{value:"contract",children:"Contract"})]}),Ie.role==="cluster_head"&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cluster heads are always full-time employees"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Full Name *"}),a.jsx("input",{type:"text",value:Ie.name,onChange:z=>lt({...Ie,name:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter full name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Email *"}),a.jsx("input",{type:"email",value:Ie.email,onChange:z=>lt({...Ie,email:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"employee@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Password *"}),a.jsx("input",{type:"password",value:Ie.password,onChange:z=>lt({...Ie,password:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Create a password"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date of Birth"}),a.jsx("input",{type:"date",value:Ie.dob,onChange:z=>lt({...Ie,dob:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",value:Ie.phone,onChange:z=>lt({...Ie,phone:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"+91 9876543210"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Joining Date *"}),a.jsx("input",{type:"date",value:Ie.joiningDate,onChange:z=>lt({...Ie,joiningDate:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),pt&&Ie.role==="manager"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Assign to Store *"}),a.jsxs("select",{value:Ie.storeId,onChange:z=>lt({...Ie,storeId:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a store..."}),f.map(z=>a.jsxs("option",{value:z.id,children:[z.name," ",z.location&&`- ${z.location}`]},z.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Manager will be assigned to this store"})]}),Ke&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsx("p",{className:"text-sm text-blue-800",children:" Employee will be assigned to your store automatically"})}),Ie.role==="employee"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Front)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[a.jsx(cc,{className:"w-5 h-5"}),ne?"Change Front":"Upload Front",a.jsx("input",{type:"file",accept:"image/*",onChange:z=>Dr(z,"front"),className:"hidden"})]}),ne&&a.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Back)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[a.jsx(cc,{className:"w-5 h-5"}),ee?"Change Back":"Upload Back",a.jsx("input",{type:"file",accept:"image/*",onChange:z=>Dr(z,"back"),className:"hidden"})]}),ee&&a.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:pa,disabled:p,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Creating...":"Create Employee"}),a.jsx("button",{onClick:()=>{y(!1),lt({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""}),W(""),re("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),v&&S&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:a.jsx("h2",{className:"text-2xl",children:"Edit Employee"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[pt&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role *"}),a.jsxs("select",{value:S.role,onChange:z=>w({...S,role:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employment Type *"}),a.jsxs("select",{value:S.employmentType,onChange:z=>w({...S,employmentType:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"fulltime",children:"Full-Time"}),a.jsx("option",{value:"contract",children:"Contract"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Full Name *"}),a.jsx("input",{type:"text",value:S.name,onChange:z=>w({...S,name:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter full name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Email *"}),a.jsx("input",{type:"email",value:S.email,onChange:z=>w({...S,email:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"employee@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date of Birth"}),a.jsx("input",{type:"date",value:S.dob,onChange:z=>w({...S,dob:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",value:S.phone,onChange:z=>w({...S,phone:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"+91 9876543210"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Joining Date *"}),a.jsx("input",{type:"date",value:S.joiningDate,onChange:z=>w({...S,joiningDate:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),S.role==="employee"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Front)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[a.jsx(cc,{className:"w-5 h-5"}),ne?"Change Front":"Upload Front",a.jsx("input",{type:"file",accept:"image/*",onChange:z=>Dr(z,"front"),className:"hidden"})]}),ne&&a.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Back)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[a.jsx(cc,{className:"w-5 h-5"}),ee?"Change Back":"Upload Back",a.jsx("input",{type:"file",accept:"image/*",onChange:z=>Dr(z,"back"),className:"hidden"})]}),ee&&a.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:Ot,disabled:p,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Updating...":"Update Employee"}),a.jsx("button",{onClick:()=>{k(!1),w(null),W(""),re("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gradient-to-r from-purple-100 to-pink-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Role"}),pt&&a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Store"}),pt&&a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Designation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Joining Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p?a.jsx("tr",{children:a.jsx("td",{colSpan:pt?10:8,className:"px-6 py-8 text-center text-gray-500",children:"Loading employees..."})}):(()=>{const z=s.filter(ce=>A===""||ce.employeeId.toLowerCase().includes(A.toLowerCase())||ce.name.toLowerCase().includes(A.toLowerCase())||ce.email.toLowerCase().includes(A.toLowerCase()));return z.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:pt?10:8,className:"px-6 py-8 text-center text-gray-500",children:A?"No employees found matching your search":"No employees found"})}):z.map(ce=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:ce.employeeId})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:ce.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:ce.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${ce.role==="manager"?"bg-blue-100 text-blue-700":ce.role==="cluster_head"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:ce.role==="manager"?"Manager":ce.role==="cluster_head"?"Cluster Head":"Employee"})}),pt&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ce.storeId?a.jsx("span",{className:"text-sm text-gray-900",children:f.find(ye=>ye.id===ce.storeId)?.name||ce.storeId}):a.jsx("span",{className:"text-sm text-red-600",children:"No Store"})}),pt&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ce.designation==="operations_incharge"?a.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:"Operations Incharge"}):ce.designation==="store_incharge"?a.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:"Store Incharge"}):ce.designation==="production_incharge"?a.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:"Production Incharge"}):ce.designation==="store_ops"?a.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 rounded text-xs",children:"Store Ops"}):ce.designation==="production_ops"?a.jsx("span",{className:"px-2 py-1 bg-green-50 text-green-600 rounded text-xs",children:"Production Ops"}):a.jsx("span",{className:"text-sm text-gray-400",children:""})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${ce.employmentType==="fulltime"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:ce.employmentType==="fulltime"?"Full-Time":"Contract"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:new Date(ce.joiningDate).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${ce.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ce.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>E(ce),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:a.jsx(ks,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>oa(ce.employeeId),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:a.jsx(ws,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>ot(ce),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit Full Profile",children:a.jsx(Vi,{className:"w-5 h-5"})}),pt&&a.jsx("button",{onClick:()=>{Rr(ce),yr(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Role & Designation",children:a.jsx(Di,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>{Da(ce),Tr(!0)},className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Reset Password",children:a.jsx(pB,{className:"w-5 h-5"})}),pt&&ce.role==="employee"&&a.jsx("button",{onClick:()=>gt(ce),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Assign Supervisor (Manager or Incharge)",children:a.jsx(Di,{className:"w-5 h-5"})}),pt&&ce.role!=="cluster_head"&&a.jsx("button",{onClick:()=>se(ce),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Change Store",children:a.jsx(eo,{className:"w-5 h-5"})}),pt&&ce.role==="employee"&&a.jsx("button",{onClick:()=>Y(ce),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Assign Designation (Store/Production Incharge)",children:a.jsx(Di,{className:"w-5 h-5"})}),pt&&!["employee","manager","cluster_head"].includes(ce.role)&&a.jsx("button",{onClick:()=>oe(ce),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Fix Role (Invalid Role Detected)",children:a.jsx(Ar,{className:"w-5 h-5"})})]})})]},ce.employeeId))})()})]})})}),pt&&o.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Aa,{className:"w-6 h-6 text-gray-500"}),a.jsxs("h3",{className:"text-xl text-gray-700",children:["Past Employees (",o.length,")"]})]}),a.jsx("button",{onClick:()=>u(!d),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:d?"Hide":"Show"})]}),d&&a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Joining Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Release Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Total Earnings"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Duration"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(z=>{const ce=new Date(z.joiningDate||z.createdAt),ye=new Date(z.releasedAt),$e=ye.getTime()-ce.getTime(),De=Math.floor($e/(1e3*60*60*24)),Ge=Math.floor(De/365),Be=Math.floor(De%365/30),qe=De%30;let St="";return Ge>0&&(St+=`${Ge}y `),Be>0&&(St+=`${Be}m `),(qe>0||St==="")&&(St+=`${qe}d`),a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm",children:z.employeeId})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:z.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${z.role==="manager"?"bg-blue-100 text-blue-700":z.role==="cluster_head"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:z.role==="cluster_head"?"Cluster Head":z.role.charAt(0).toUpperCase()+z.role.slice(1)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:new Date(z.joiningDate||z.createdAt).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:ye.toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"text-green-600",children:["",z.totalEarnings?.toLocaleString()||"0"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:St.trim()})]},z.employeeId)})})]})})]}),N&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:a.jsx("h2",{className:"text-2xl",children:"Employee Details"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Employee ID"}),a.jsx("p",{className:"text-gray-900",children:N.employeeId})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Name"}),a.jsx("p",{className:"text-gray-900",children:N.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),a.jsx("p",{className:"text-gray-900",children:N.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Role"}),a.jsx("p",{className:"text-gray-900",children:N.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Employment Type"}),a.jsx("p",{className:"text-gray-900",children:N.employmentType})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Joining Date"}),a.jsx("p",{className:"text-gray-900",children:new Date(N.joiningDate).toLocaleDateString()})]}),N.dob&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Date of Birth"}),a.jsx("p",{className:"text-gray-900",children:new Date(N.dob).toLocaleDateString()})]}),N.phone&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),a.jsx("p",{className:"text-gray-900",children:N.phone})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),a.jsx("p",{className:"text-gray-900",children:N.status})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Created By"}),a.jsx("p",{className:"text-gray-900",children:N.createdBy})]}),N.designation&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Designation"}),a.jsx("p",{className:"text-gray-900",children:N.designation==="store_incharge"?"Store Incharge":"Production Incharge"})]}),N.department&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Department"}),a.jsx("p",{className:"text-gray-900",children:N.department==="store_operations"?"Store Operations":"Production"})]}),N.managerId&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Reports To (Manager)"}),a.jsx("p",{className:"text-gray-900",children:q(N.managerId)})]}),N.inchargeId&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Reports To (Incharge)"}),a.jsx("p",{className:"text-gray-900",children:q(N.inchargeId)})]})]}),N.aadharFront&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Aadhar Card (Front)"}),a.jsx("img",{src:N.aadharFront,alt:"Aadhar Front",className:"w-full rounded-lg border border-gray-300"})]}),N.aadharBack&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Aadhar Card (Back)"}),a.jsx("img",{src:N.aadharBack,alt:"Aadhar Back",className:"w-full rounded-lg border border-gray-300"})]}),a.jsx("button",{onClick:()=>E(null),className:"w-full bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Close"})]})]})}),_&&a.jsx(S$,{onClose:()=>O(!1),employees:s.filter(z=>z.status==="active")}),B&&D&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-green-600 to-teal-600 text-white p-6 rounded-t-xl",children:a.jsx("h2",{className:"text-2xl",children:"Store Migration Complete"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[a.jsx("h3",{className:"text-lg text-green-900 mb-2",children:"Migration Summary"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-700",children:"Total Employees"}),a.jsx("p",{className:"text-2xl text-green-900",children:D.summary.total})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-700",children:" Updated"}),a.jsx("p",{className:"text-2xl text-green-900",children:D.summary.updated})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-700",children:" Skipped"}),a.jsx("p",{className:"text-2xl text-green-900",children:D.summary.skipped})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-yellow-700",children:" Needs Manual"}),a.jsx("p",{className:"text-2xl text-yellow-900",children:D.summary.needsManualAssignment||0})]}),D.summary.errors>0&&a.jsxs("div",{className:"col-span-2",children:[a.jsx("p",{className:"text-sm text-red-700",children:" Errors"}),a.jsx("p",{className:"text-2xl text-red-900",children:D.summary.errors})]})]})]}),D.updates&&D.updates.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Successfully Updated"}),a.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"ID"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Name"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Role"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Store ID"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:D.updates.map((z,ce)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.employeeId}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.name}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:z.role}),a.jsx("td",{className:"px-4 py-2 text-sm text-blue-600",children:z.assignedStoreId})]},ce))})]})})]}),D.manualAssignmentNeeded&&D.manualAssignmentNeeded.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Needs Manual Store Assignment"}),a.jsx("div",{className:"max-h-60 overflow-y-auto border border-yellow-200 rounded-lg bg-yellow-50",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-yellow-100 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"ID"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Name"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Role"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Reason"})]})}),a.jsx("tbody",{className:"divide-y divide-yellow-200",children:D.manualAssignmentNeeded.map((z,ce)=>a.jsxs("tr",{className:"hover:bg-yellow-100",children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.employeeId}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.name}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:z.role}),a.jsx("td",{className:"px-4 py-2 text-sm text-yellow-800",children:z.reason})]},ce))})]})}),a.jsx("div",{className:"mt-3 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",a.jsx("strong",{children:"Action Required:"})," Go to Store Management to assign stores to managers, or assign managers to employees who don't have one."]})})]}),D.errorDetails&&D.errorDetails.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Errors"}),a.jsx("div",{className:"max-h-60 overflow-y-auto border border-red-200 rounded-lg bg-red-50",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-red-100 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"ID"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Name"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Role"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Error"})]})}),a.jsx("tbody",{className:"divide-y divide-red-200",children:D.errorDetails.map((z,ce)=>a.jsxs("tr",{className:"hover:bg-red-100",children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.employeeId}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.name}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:z.role}),a.jsx("td",{className:"px-4 py-2 text-sm text-red-800",children:z.reason})]},ce))})]})})]}),a.jsx("button",{onClick:()=>F(!1),className:"w-full bg-gradient-to-r from-green-600 to-teal-600 text-white py-3 rounded-lg hover:shadow-lg transition-all",children:"Close"})]})]})}),Q&&X&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Assign Supervisor"}),a.jsxs("p",{className:"text-sm text-purple-100 mt-1",children:[X.name," (",X.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[(X.managerId||X.inchargeId)&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm text-blue-700 mb-1",children:"Current Supervisor"}),a.jsx("p",{className:"text-blue-900",children:X.inchargeId?`${q(X.inchargeId)} (Incharge)`:q(X.managerId||"")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Supervisor Type *"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",value:"manager",checked:V==="manager",onChange:z=>{Z(z.target.value),G("")},className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Operations Manager"})]}),a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",value:"incharge",checked:V==="incharge",onChange:z=>{Z(z.target.value),G("")},className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Store/Production Incharge"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",V==="manager"?"Operations Manager":"Incharge"," *"]}),a.jsxs("select",{value:I,onChange:z=>G(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsxs("option",{value:"",children:["Select ",V==="manager"?"a manager":"an incharge","..."]}),V==="manager"?ve.map(z=>a.jsxs("option",{value:z.employeeId,children:[z.name," (",z.employeeId,")",z.storeId?` - Store: ${z.storeId}`:" - No store assigned"]},z.employeeId)):Te.map(z=>a.jsxs("option",{value:z.employeeId,children:[z.name," (",z.employeeId,") - ",z.designation==="store_incharge"?"Store Incharge":"Production Incharge"]},z.employeeId))]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" ",V==="manager"?"Employee's store will be automatically updated to match their manager's store":"Employee will be assigned to the incharge's department"]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:ft,disabled:p||!I,className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Assigning...":"Assign Supervisor"}),a.jsx("button",{onClick:()=>{R(!1),L(null),G(""),Z("manager")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),ge&&J&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-orange-600 to-red-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Fix Employee Role"}),a.jsxs("p",{className:"text-sm text-orange-100 mt-1",children:[J.name," (",J.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-orange-600 mt-0.5"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-orange-800 mb-1",children:[a.jsx("strong",{children:"Invalid Role Detected:"}),' "',J.role,'"']}),a.jsx("p",{className:"text-xs text-orange-700",children:"This role is not recognized by the system. Please select a valid role below."})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Correct Role *"}),a.jsxs("select",{value:rt,onChange:z=>Tt(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee - Regular staff (can be fulltime or contract)"}),a.jsx("option",{value:"manager",children:"Manager - Manages employees and a store"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head - Manages multiple stores"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:' Most workers (kitchen staff, delivery, etc.) should be "Employee"'})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:ae,disabled:p,className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Updating...":"Update Role"}),a.jsx("button",{onClick:()=>{Fe(!1),Ze(null)},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),ze&&Ce&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Change Employee Store"}),a.jsxs("p",{className:"text-sm text-blue-100 mt-1",children:[Ce.name," (",Ce.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(eo,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-blue-900 mb-1",children:[a.jsx("strong",{children:"Current Store:"})," ",Ce.storeId?f.find(z=>z.id===Ce.storeId)?.name||Ce.storeId:"No store assigned"]}),a.jsx("p",{className:"text-xs text-blue-700",children:"Select a new store below to reassign this employee."})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select New Store *"}),a.jsxs("select",{value:Qe,onChange:z=>kt(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a store..."}),f.map(z=>a.jsxs("option",{value:z.id,children:[z.name," - ",z.location]},z.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" This will update the employee's store assignment immediately"})]}),Qe&&Qe!==Ce.storeId&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:a.jsx("p",{className:"text-xs text-yellow-800",children:" This will move the employee to a different store. Their manager assignment will remain unchanged."})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:K,disabled:p||!Qe,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Updating...":"Update Store"}),a.jsx("button",{onClick:()=>{Re(!1),Se(null),kt("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),Pr&&ur&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Assign Employee Designation"}),a.jsxs("p",{className:"text-sm text-indigo-100 mt-1",children:[ur.name," (",ur.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Di,{className:"w-5 h-5 text-indigo-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-indigo-900 mb-1",children:a.jsx("strong",{children:"Department Incharge Designations"})}),a.jsx("p",{className:"text-xs text-indigo-700",children:"Assign employees as Store Incharge or Production Incharge. They will manage other employees in their department."})]})]})}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[a.jsxs("p",{className:"text-sm text-blue-900",children:[a.jsx("strong",{children:"Current Designation:"})," ",ur.designation==="store_incharge"?"Store Incharge":ur.designation==="production_incharge"?"Production Incharge":"Regular Employee"]}),ur.department&&a.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["Department: ",ur.department==="store_operations"?"Store Operations":"Production"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Designation"}),a.jsxs("select",{value:It,onChange:z=>er(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[a.jsx("option",{value:"none",children:"Regular Employee (No Designation)"}),a.jsx("option",{value:"store_incharge",children:"Store Incharge - Store Operations Department"}),a.jsx("option",{value:"production_incharge",children:"Production Incharge - Production Department"})]})]}),It!=="none"&&a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-xs text-gray-700",children:[It==="store_incharge"&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"Store Incharge Responsibilities:"}),a.jsx("br",{})," Customer-facing operations and administration",a.jsx("br",{})," Manages Cashier, Kitchen Helper, Store Staff/Assistant",a.jsx("br",{})," Reports to Operations Manager"]}),It==="production_incharge"&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"Production Incharge Responsibilities:"}),a.jsx("br",{})," Food preparation, quality control, production planning",a.jsx("br",{})," Manages Momo Makers and production team",a.jsx("br",{})," Reports to Operations Manager"]})]})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:le,disabled:p,className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Assigning...":"Assign Designation"}),a.jsx("button",{onClick:()=>{da(!1),Br(null),er("none")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),Ir&&tr&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-orange-600 to-red-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Reset Password"}),a.jsxs("p",{className:"text-sm text-orange-100 mt-1",children:[tr.name," (",tr.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:[a.jsx("strong",{children:" Important:"})," After resetting, save the new credentials and share them securely with the employee."]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Current Email"}),a.jsx("input",{type:"text",value:tr.email,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"New Password *"}),a.jsx("input",{type:"text",value:Oa,onChange:z=>He(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter new password",autoFocus:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters. Use a strong, memorable password."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:Sr,disabled:p||!Oa,className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Resetting...":"Reset Password"}),a.jsx("button",{onClick:()=>{Tr(!1),Da(null),He("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),Ct&&Kt&&a.jsx(i8,{employee:Kt,onClose:()=>{yr(!1),Rr(null)},onSave:()=>{Rt()}})]})]})})}function P6({onNavigate:e}){const[t,r]=P.useState([]),[n,s]=P.useState(!1),[i,o]=P.useState(!1);P.useEffect(()=>{l();const g=setInterval(l,3e4);return()=>clearInterval(g)},[]);const l=async()=>{try{const g=await FI();r(g)}catch{r([])}},d=async g=>{try{await $I(g),r(t.map(b=>b.id===g?{...b,read:!0}:b))}catch(b){console.error("Error marking notification as read:",b)}},u=async()=>{o(!0);try{await LI(),r(t.map(g=>({...g,read:!0})))}catch(g){console.error("Error marking all as read:",g)}finally{o(!1)}},f=g=>{if(g.read||d(g.id),e)switch(g.type){case"sales_pending":case"sales_approved":case"sales_rejected":case"discrepancy_request":case"discrepancy_approved":case"discrepancy_rejected":e("sales",g.relatedDate||void 0);break;case"timesheet_pending":case"timesheet_approved":case"timesheet_rejected":e("attendance");break;case"leave_pending":case"leave_approved":case"leave_rejected":e("leave");break;case"production_pending":case"production_approved":e("production",g.relatedDate||void 0);break;case"production_request_new":case"production_request_accepted":case"production_request_in-preparation":case"production_request_prepared":case"production_request_shipped":case"production_request_delivered":e("production-requests",g.relatedDate||void 0,g.relatedId||void 0);break;case"stock_request_new":case"stock_request_fulfilled":case"stock_request_partial":case"stock_request_cancelled":e("stock-requests",g.relatedDate||void 0,g.relatedId||void 0);break;case"stock_request_delayed":e("production-requests",g.relatedDate||void 0,g.relatedId||void 0);break}s(!1)},m=g=>g.includes("approved")?a.jsx(lr,{className:"w-5 h-5 text-green-600"}):g.includes("rejected")?a.jsx(ea,{className:"w-5 h-5 text-red-600"}):g.includes("pending")||g.includes("request")?a.jsx(Aa,{className:"w-5 h-5 text-orange-600"}):g.includes("logged")?a.jsx(lr,{className:"w-5 h-5 text-blue-600"}):a.jsx(Qa,{className:"w-5 h-5 text-blue-600"}),p=t.filter(g=>!g.read).length;return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>s(!n),className:"relative p-2 text-white hover:bg-white/20 rounded-full transition-all backdrop-blur-sm border border-white/30","aria-label":"Notifications",children:[a.jsx(kj,{className:"w-6 h-6"}),p>0&&a.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full animate-pulse shadow-lg",children:p>99?"99+":p})]}),n&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),a.jsxs("div",{className:"fixed md:absolute left-4 right-4 md:left-auto md:right-0 mt-2 md:w-96 bg-white rounded-lg shadow-2xl border border-gray-200 z-50 max-h-[80vh] md:max-h-[600px] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-gray-900",children:"Notifications"}),p>0&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[p," unread"]})]}),p>0&&a.jsx("button",{onClick:u,disabled:i,className:"text-sm text-blue-600 hover:text-blue-700 disabled:opacity-50",children:"Mark all read"})]}),a.jsx("div",{className:"overflow-y-auto flex-1",children:t.length===0?a.jsxs("div",{className:"p-8 text-center text-gray-500",children:[a.jsx(kj,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),a.jsx("p",{children:"No notifications"})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:t.map(g=>a.jsx("button",{onClick:()=>f(g),className:`w-full text-left p-4 hover:bg-gray-50 transition-colors ${g.read?"":"bg-blue-50"}`,children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:m(g.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-sm ${g.read?"text-gray-700":"font-medium text-gray-900"}`,children:g.title}),a.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:g.message}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:pxe(g.createdAt)})]}),!g.read&&a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})})]})},g.id))})})]})]})]})}function pxe(e){const t=new Date(e),r=new Date,n=r.getTime()-t.getTime(),s=Math.floor(n/6e4),i=Math.floor(n/36e5),o=Math.floor(n/864e5);return s<1?"Just now":s<60?`${s}m ago`:i<24?`${i}h ago`:o<7?`${o}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==r.getFullYear()?"numeric":void 0})}const gxe=P.memo(function({stores:t,selectedStoreId:r,onStoreChange:n,showAllStores:s=!0}){const i=t.find(l=>l.id===r),o=!r;return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-purple-500 to-pink-500 rounded-xl shadow-lg p-[2px]",children:a.jsxs("div",{className:"bg-white rounded-[10px] p-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl flex items-center justify-center",children:a.jsx(eo,{className:"w-6 h-6 text-purple-600"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Current Store View"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:r||"all",onChange:l=>n(l.target.value==="all"?null:l.target.value),className:"w-full appearance-none bg-transparent border-none text-base font-semibold text-gray-900 focus:ring-0 focus:outline-none cursor-pointer pr-8",style:{paddingRight:"2rem"},children:[s&&a.jsx("option",{value:"all",children:" All Stores (Combined View)"}),t.map(l=>a.jsxs("option",{value:l.id,children:[" ",l.name," ",l.location&&`- ${l.location}`]},l.id))]}),a.jsx(nf,{className:"absolute right-0 top-1/2 -translate-y-1/2 w-5 h-5 text-purple-600 pointer-events-none"})]}),i?.location&&a.jsxs("div",{className:"flex items-center gap-1 mt-1 text-sm text-gray-600",children:[a.jsx(A2,{className:"w-3 h-3"}),a.jsx("span",{children:i.location})]})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 px-4 py-2 rounded-lg border border-purple-200",children:[a.jsx("div",{className:"text-xs text-gray-600 text-center",children:"Total Stores"}),a.jsx("div",{className:"text-2xl font-bold text-purple-600 text-center",children:t.length})]})})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${o?"bg-blue-500":"bg-green-500"} animate-pulse`}),a.jsx("span",{className:"text-gray-600",children:o?"Viewing all store data":`Viewing ${i?.name||"store"} only`})]}),a.jsxs("span",{className:"text-purple-600 font-medium",children:[o?t.length:1," store",o&&t.length!==1||!o&&!1?"s":""," active"]})]})})]})}),t.length<=5&&a.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[s&&a.jsx("button",{onClick:()=>n(null),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${o?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:" All Stores"}),t.map(l=>a.jsxs("button",{onClick:()=>n(l.id),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${r===l.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" ",l.name]},l.id))]})]})});function xxe(){const[e,t]=P.useState(!1),[r,n]=P.useState(!1),[s,i]=P.useState(""),[o,l]=P.useState(null),d=async()=>{try{t(!0),i(""),n(!1);const u=await fetch(`https://${In}.supabase.co/functions/v1/make-server-c2dd9b9d/setup-cluster-head`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${rn}`},body:JSON.stringify({email:"subham.tewari@bunnymomos.com",password:"Subham@186",name:"Subham Tewari"})}),f=await u.json();if(!u.ok)throw new Error(f.error||f.details||"Failed to setup account");n(!0),l(f),console.log("Setup successful:",f)}catch(u){console.error("Setup error:",u),i(u instanceof Error?u.message:"Failed to setup account")}finally{t(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center p-6",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Bs,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Setup Cluster Head Account"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"This will create a cluster head account for Subham Tewari"})]}),s&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-red-900",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:s})]})]}),r&&o&&a.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx(lr,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-900",children:"Success!"}),a.jsx("p",{className:"text-sm text-green-700 mt-1",children:o.message})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Email:"}),a.jsx("span",{className:"font-medium text-gray-900",children:o.email})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Employee ID:"}),a.jsx("span",{className:"font-medium text-purple-600",children:o.employeeId})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Password:"}),a.jsx("span",{className:"font-medium text-gray-900",children:"Subham@186"})]})]}),a.jsx("p",{className:"text-xs text-green-700 mt-3",children:"You can now log in with these credentials"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Email:"}),a.jsx("span",{className:"font-medium text-gray-900",children:"subham.tewari@bunnymomos.com"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Password:"}),a.jsx("span",{className:"font-medium text-gray-900",children:"Subham@186"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Name:"}),a.jsx("span",{className:"font-medium text-gray-900",children:"Subham Tewari"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Role:"}),a.jsx("span",{className:"font-medium text-purple-600",children:"Cluster Head"})]})]}),a.jsx("button",{onClick:d,disabled:e||r,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Setting up..."]}):r?a.jsxs(a.Fragment,{children:[a.jsx(lr,{className:"w-5 h-5"}),"Account Created"]}):a.jsxs(a.Fragment,{children:[a.jsx(Bs,{className:"w-5 h-5"}),"Create Cluster Head Account"]})}),r&&a.jsx("a",{href:"/login",className:"block w-full text-center bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all",children:"Go to Login"})]}),a.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("p",{className:"text-xs text-blue-900 font-medium mb-2",children:"What this will do:"}),a.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[a.jsx("li",{children:" Delete any existing account with this email"}),a.jsx("li",{children:" Create a new cluster head account"}),a.jsx("li",{children:" Generate a unique employee ID (e.g., BM001)"}),a.jsx("li",{children:" Set up proper permissions and access"})]})]})]})})}function yxe({onStoreCreated:e,userRole:t}){const[r,n]=P.useState([]),[s,i]=P.useState([]),[o,l]=P.useState([]),[d,u]=P.useState(!0),[f,m]=P.useState(!1),[p,g]=P.useState(null),[b,y]=P.useState(null),[v,k]=P.useState(null),[S,w]=P.useState(""),[A,C]=P.useState(""),[N,E]=P.useState(!1),[_,O]=P.useState(""),[B,F]=P.useState(""),[D,H]=P.useState(!1),[ne,W]=P.useState(""),[ee,re]=P.useState(!1),[Q,R]=P.useState(""),[X,L]=P.useState(!1);P.useEffect(()=>{I(),G(),V()},[]);const I=async()=>{try{const Ce=await Nu();n(Ce)}catch(Ce){if(Ce instanceof Error&&(Ce.message==="Not authenticated"||Ce.message==="Unauthorized"))return;console.error("Error loading stores:",Ce)}finally{u(!1)}},G=async()=>{try{const Se=(await li()).filter(Qe=>Qe.role==="manager");i(Se)}catch(Ce){console.error("Error loading managers:",Ce)}},V=async()=>{try{const Ce=await c0();l(Ce)}catch(Ce){console.error("Error loading production houses:",Ce)}},Z=async Ce=>{if(Ce.preventDefault(),!S.trim()){alert("Please enter a store name");return}E(!0);try{await M2(S,A),w(""),C(""),m(!1),await I(),e&&e()}catch(Se){console.error("Error creating store:",Se),alert(Se.message||"Failed to create store")}finally{E(!1)}},ve=Ce=>{g(Ce.id),O(Ce.name),F(Ce.location)},Ee=async Ce=>{if(!_.trim()){alert("Please enter a store name");return}H(!0);try{await HI(Ce,_,B),g(null),await I()}catch(Se){console.error("Error updating store:",Se),alert(Se.message||"Failed to update store")}finally{H(!1)}},Te=()=>{g(null),O(""),F("")},ue=Ce=>{y(Ce.id),W(Ce.managerId||"")},ge=async Ce=>{if(!ne){alert("Please select a manager");return}re(!0);try{await BI(Ce,ne),y(null),W(""),await I(),await G(),alert("Manager assigned successfully!")}catch(Se){console.error("Error assigning manager:",Se),alert(Se.message||"Failed to assign manager")}finally{re(!1)}},Fe=()=>{y(null),W("")},J=async Ce=>{if(confirm(`Migrate all existing data (inventory, sales, payroll, employees) to ${Ce.name}? This will assign all data without a store to this store.`))try{const Se=await qI(Ce.id);alert(` Migration successful!

Inventory: ${Se.migratedCount.inventory}
Overheads: ${Se.migratedCount.overheads}
Sales: ${Se.migratedCount.sales}
Employees: ${Se.migratedCount.employees}
Timesheets: ${Se.migratedCount.timesheets}
Leaves: ${Se.migratedCount.leaves}
Payouts: ${Se.migratedCount.payouts}`)}catch(Se){console.error("Error migrating data:",Se),alert(Se.message||"Failed to migrate data")}},Ze=Ce=>{k(Ce.id),R(Ce.productionHouseId||"")},rt=async Ce=>{if(!Q){alert("Please select a production house");return}L(!0);try{await UI(Ce,Q),k(null),R(""),await I(),await V(),e&&e(),alert("Production house assigned successfully!")}catch(Se){console.error("Error assigning production house:",Se),alert(Se.message||"Failed to assign production house")}finally{L(!1)}},Tt=()=>{k(null),R("")},ze=Ce=>{if(!Ce)return null;const Se=s.find(Qe=>Qe.employeeId===Ce);return Se?`${Se.name} (${Se.employeeId})`:"Unknown Manager"},Re=Ce=>{if(!Ce)return null;const Se=o.find(Qe=>Qe.id===Ce);return Se?`${Se.name} (${Se.id})`:"Unknown Production House"};return d?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"text-gray-500",children:"Loading stores..."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-gray-900 mb-1",children:" Store Management"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage your stores and assign managers"})]}),a.jsxs("button",{onClick:()=>m(!f),className:"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:[a.jsx(Xi,{className:"w-5 h-5"}),"Create Store"]})]}),f&&a.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Create New Store"}),a.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:["Store Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:S,onChange:Ce=>w(Ce.target.value),placeholder:"e.g., Downtown Branch, Main Street Store",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location (Optional)"}),a.jsx("input",{type:"text",value:A,onChange:Ce=>C(Ce.target.value),placeholder:"e.g., 123 Main St, City",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"submit",disabled:N,className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-50",children:N?"Creating...":"Create Store"}),a.jsx("button",{type:"button",onClick:()=>{m(!1),w(""),C("")},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.length===0?a.jsxs("div",{className:"col-span-full bg-white rounded-lg border border-gray-200 p-8 text-center",children:[a.jsx(eo,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),a.jsx("p",{className:"text-gray-500 mb-2",children:"No stores yet"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Create your first store to get started"})]}):r.map(Ce=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:p===Ce.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Store Name"}),a.jsx("input",{type:"text",value:_,onChange:Se=>O(Se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location"}),a.jsx("input",{type:"text",value:B,onChange:Se=>F(Se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>Ee(Ce.id),disabled:D,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm disabled:opacity-50",children:[a.jsx(So,{className:"w-4 h-4"}),"Save"]}),a.jsxs("button",{onClick:Te,disabled:D,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[a.jsx(ea,{className:"w-4 h-4"}),"Cancel"]})]})]}):b===Ce.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-gray-900",children:["Assign Manager to ",Ce.name]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Select Manager"}),a.jsxs("select",{value:ne,onChange:Se=>W(Se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Choose a manager..."}),s.filter(Se=>!Se.storeId||Se.storeId===Ce.id).map(Se=>a.jsxs("option",{value:Se.employeeId,children:[Se.name," (",Se.employeeId,")"]},Se.employeeId))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only unassigned managers or current manager shown"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>ge(Ce.id),disabled:ee||!ne,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm disabled:opacity-50",children:[a.jsx(So,{className:"w-4 h-4"}),ee?"Assigning...":"Assign"]}),a.jsxs("button",{onClick:Fe,disabled:ee,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[a.jsx(ea,{className:"w-4 h-4"}),"Cancel"]})]})]}):v===Ce.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-gray-900",children:["Assign Production House to ",Ce.name]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Select Production House"}),a.jsxs("select",{value:Q,onChange:Se=>R(Se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Choose a production house..."}),o.map(Se=>a.jsx("option",{value:Se.id,children:Se.name},Se.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select which production house will serve this store"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>rt(Ce.id),disabled:X||!Q,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm disabled:opacity-50",children:[a.jsx(So,{className:"w-4 h-4"}),X?"Assigning...":"Assign"]}),a.jsxs("button",{onClick:Tt,disabled:X,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[a.jsx(ea,{className:"w-4 h-4"}),"Cancel"]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(eo,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-gray-900",children:Ce.name})]}),a.jsx("button",{onClick:()=>ve(Ce),className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:a.jsx(Vi,{className:"w-4 h-4"})})]}),Ce.location&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[a.jsx(A2,{className:"w-4 h-4"}),a.jsx("span",{children:Ce.location})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-200 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(tn,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-600",children:Ce.managerId?a.jsx("span",{className:"text-green-600",children:ze(Ce.managerId)}):a.jsx("span",{className:"text-orange-600",children:"No Manager Assigned"})})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Za,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-600",children:Ce.productionHouseId?a.jsx("span",{className:"text-green-600",children:Re(Ce.productionHouseId)}):a.jsx("span",{className:"text-orange-600",children:"No Production House Mapped"})})]}),a.jsxs("button",{onClick:()=>ue(Ce),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:[a.jsx(Di,{className:"w-4 h-4"}),Ce.managerId?"Change Manager":"Assign Manager"]}),a.jsxs("button",{onClick:()=>Ze(Ce),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-sm",children:[a.jsx(Za,{className:"w-4 h-4"}),Ce.productionHouseId?"Change Production House":"Assign Production House"]}),t==="cluster_head"&&a.jsxs("button",{onClick:()=>J(Ce),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:[a.jsx(Ms,{className:"w-4 h-4"}),"Migrate Data"]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["ID: ",Ce.id]})]})]})},Ce.id))})]})}function vxe({context:e,stores:t,employees:r,onRefreshStores:n}){const[s,i]=P.useState(!1),[o,l]=P.useState(!1),[d,u]=P.useState({}),[f,m]=P.useState({name:"",location:"",productionHeadId:""}),[p,g]=P.useState({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}}),b=r.filter(N=>N.designation==="production_incharge");P.useEffect(()=>{y()},[e.productionData,e.productionRequests,e.productionHouses]);const y=async()=>{if(!e.user?.accessToken||!e.productionHouses)return;const N={},E=new Date().toISOString().substring(0,7);for(const _ of e.productionHouses)try{const O=await(void 0)(e.user.accessToken,_.id,"production_house");let B={};O?.record&&O.record.date.substring(0,7)===E?O.record.items.forEach(ee=>{const re=e.inventoryItems?.find(Q=>Q.id===ee.itemId||Q.name===ee.itemId);if(re){const R=re.name.replace(/_([a-z])/g,X=>X[1].toUpperCase()).replace(/Momo(s)?$/i,"");B[R]=ee.actualQuantity}}):B={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};const F=(e.productionData||[]).filter(ee=>ee.productionHouseId===_.id&&ee.date.substring(0,7)===E&&ee.approvalStatus==="approved"),D={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};F.forEach(ee=>{const re=e.inventoryItems?.find(Q=>Q.id===ee.itemId);if(re){const R=re.name.replace(/_([a-z])/g,X=>X[1].toUpperCase()).replace(/Momo(s)?$/i,"");D[R]=(D[R]||0)+ee.quantityProduced}});const H=(e.productionRequests||[]).filter(ee=>ee.productionHouseId===_.id&&ee.status==="fulfilled"&&ee.fulfilledDate&&ee.fulfilledDate.substring(0,7)===E),ne={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};H.forEach(ee=>{ne.chicken+=ee.chickenMomos||ee.chicken||0,ne.chickenCheese+=ee.chickenCheeseMomos||ee.chickenCheese||0,ne.veg+=ee.vegMomos||ee.veg||0,ne.cheeseCorn+=ee.cheeseCornMomos||ee.cheeseCorn||0,ne.paneer+=ee.paneerMomos||ee.paneer||0,ne.vegKurkure+=ee.vegKurkureMomos||ee.vegKurkure||0,ne.chickenKurkure+=ee.chickenKurkureMomos||ee.chickenKurkure||0});const W={};Object.keys(B).forEach(ee=>{W[ee]=(B[ee]||0)+(D[ee]||0)-(ne[ee]||0)}),N[_.id]=W}catch(O){console.error(`Error calculating stock for ${_.name}:`,O),N[_.id]={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}}u(N)},v=async N=>{N.preventDefault();try{await e.addProductionHouse({name:f.name,location:f.location,productionHeadId:f.productionHeadId||null,inventory:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0},createdBy:e.user?.employeeId||e.user?.email||"unknown"}),alert("Production house created successfully!"),i(!1),m({name:"",location:"",productionHeadId:""})}catch(E){console.error("Error creating production house:",E),alert("Failed to create production house. Please try again.")}},k=async(N,E)=>{try{if(!e.user?.accessToken)return;await j5(e.user.accessToken,N,E),await e.updateProductionHouse(N,{productionHeadId:E}),alert("Production head assigned successfully! Please refresh the page for changes to take effect.")}catch(_){console.error("Error assigning production head:",_),alert("Failed to assign production head. Please try again.")}},S=async(N,E)=>{try{if(!e.user?.accessToken)return;await N5(e.user.accessToken,N,E),alert("Store assigned to production house successfully!"),n()}catch(_){console.error("Error assigning store:",_),alert("Failed to assign store. Please try again.")}},w=async(N,E)=>{if(window.confirm(`Are you sure you want to delete "${E}"?

This action cannot be undone.`))try{await e.deleteProductionHouse(N),alert("Production house deleted successfully!")}catch(O){console.error("Error deleting production house:",O),alert("Failed to delete production house. Please try again.")}},A=async()=>{if(!p.fromHouseId||!p.toHouseId){alert("Please select both source and destination production houses");return}if(p.fromHouseId===p.toHouseId){alert("Source and destination cannot be the same");return}const N=Object.values(p.quantities).reduce((B,F)=>B+F,0);if(N===0){alert("Please enter quantities to transfer");return}const E=e.productionHouses.find(B=>B.id===p.fromHouseId),_=e.productionHouses.find(B=>B.id===p.toHouseId);if(window.confirm(`Transfer ${N} pieces from "${E?.name}" to "${_?.name}"?

This action cannot be undone.`))try{if(!e.user?.accessToken){alert("Not authenticated");return}await _5(e.user.accessToken,p.fromHouseId,p.toHouseId,p.quantities);const B=await c0(e.user.accessToken);e.setProductionHouses(B),alert("Inventory transferred successfully!"),l(!1),g({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}})}catch(B){console.error("Error transferring inventory:",B),alert(`Failed to transfer inventory: ${B.message||"Unknown error"}`)}},C=()=>{const N=e.productionHouses.find(E=>E.id===p.fromHouseId);if(!N){alert("Please select a source production house first");return}g({...p,quantities:{chicken:N.inventory.chicken,chickenCheese:N.inventory.chickenCheese,veg:N.inventory.veg,cheeseCorn:N.inventory.cheeseCorn,paneer:N.inventory.paneer,vegKurkure:N.inventory.vegKurkure,chickenKurkure:N.inventory.chickenKurkure}})};return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[a.jsx(Za,{className:"w-8 h-8 text-purple-600"}),"Production House Management"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Manage production houses, inventory, and store mappings"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(Zt,{className:"w-5 h-5"}),"Transfer Inventory"]}),a.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[a.jsx(Xi,{className:"w-5 h-5"}),"New Production House"]})]})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Create New Production House"}),a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Name *"}),a.jsx("input",{type:"text",required:!0,value:f.name,onChange:N=>m({...f,name:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Main Production House"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location *"}),a.jsx("input",{type:"text",required:!0,value:f.location,onChange:N=>m({...f,location:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Sector 21, Dwarka"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Production Head (Optional)"}),a.jsxs("select",{value:f.productionHeadId,onChange:N=>m({...f,productionHeadId:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Production Head"}),b.map(N=>a.jsxs("option",{value:N.employeeId,children:[N.name," (",N.employeeId,")"]},N.employeeId))]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{i(!1),m({name:"",location:"",productionHeadId:""})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Create"})]})]})]})}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("h2",{className:"text-2xl text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(Zt,{className:"w-6 h-6 text-blue-600"}),"Transfer Inventory Between Production Houses"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Source Production House *"}),a.jsxs("select",{value:p.fromHouseId,onChange:N=>g({...p,fromHouseId:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select source..."}),e.productionHouses.map(N=>a.jsxs("option",{value:N.id,children:[N.name," - ",N.location]},N.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Destination Production House *"}),a.jsxs("select",{value:p.toHouseId,onChange:N=>g({...p,toHouseId:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select destination..."}),e.productionHouses.filter(N=>N.id!==p.fromHouseId).map(N=>a.jsxs("option",{value:N.id,children:[N.name," - ",N.location]},N.id))]})]})]}),p.fromHouseId&&(()=>{const N=e.productionHouses.find(E=>E.id===p.fromHouseId);return N?a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-2 border-blue-200",children:[a.jsxs("h3",{className:"text-sm text-gray-900 mb-3",children:["Available Stock at ",N.name]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2",children:[a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Chicken"}),a.jsx("div",{className:"text-sm text-gray-900",children:N.inventory.chicken})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Chicken Cheese"}),a.jsx("div",{className:"text-sm text-gray-900",children:N.inventory.chickenCheese})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Veg"}),a.jsx("div",{className:"text-sm text-gray-900",children:N.inventory.veg})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Cheese Corn"}),a.jsx("div",{className:"text-sm text-gray-900",children:N.inventory.cheeseCorn})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Paneer"}),a.jsx("div",{className:"text-sm text-gray-900",children:N.inventory.paneer})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Veg Kurkure"}),a.jsx("div",{className:"text-sm text-gray-900",children:N.inventory.vegKurkure})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Chicken Kurkure"}),a.jsx("div",{className:"text-sm text-gray-900",children:N.inventory.chickenKurkure})]})]})]}):null})(),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm text-gray-900",children:"Transfer Quantities"}),a.jsx("button",{type:"button",onClick:C,className:"px-3 py-1.5 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition-colors",children:"Transfer All"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken"}),a.jsx("input",{type:"number",min:"0",value:p.quantities.chicken,onChange:N=>g({...p,quantities:{...p.quantities,chicken:parseInt(N.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken Cheese"}),a.jsx("input",{type:"number",min:"0",value:p.quantities.chickenCheese,onChange:N=>g({...p,quantities:{...p.quantities,chickenCheese:parseInt(N.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Veg"}),a.jsx("input",{type:"number",min:"0",value:p.quantities.veg,onChange:N=>g({...p,quantities:{...p.quantities,veg:parseInt(N.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Cheese Corn"}),a.jsx("input",{type:"number",min:"0",value:p.quantities.cheeseCorn,onChange:N=>g({...p,quantities:{...p.quantities,cheeseCorn:parseInt(N.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Paneer"}),a.jsx("input",{type:"number",min:"0",value:p.quantities.paneer,onChange:N=>g({...p,quantities:{...p.quantities,paneer:parseInt(N.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Veg Kurkure"}),a.jsx("input",{type:"number",min:"0",value:p.quantities.vegKurkure,onChange:N=>g({...p,quantities:{...p.quantities,vegKurkure:parseInt(N.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken Kurkure"}),a.jsx("input",{type:"number",min:"0",value:p.quantities.chickenKurkure,onChange:N=>g({...p,quantities:{...p.quantities,chickenKurkure:parseInt(N.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]})]})]}),a.jsx("div",{className:"bg-green-50 rounded-lg p-4 border-2 border-green-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-900",children:"Total Pieces to Transfer:"}),a.jsx("span",{className:"text-2xl text-green-600",children:Object.values(p.quantities).reduce((N,E)=>N+E,0)})]})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{l(!1),g({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"button",onClick:A,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Transfer Inventory"})]})]})]})}),a.jsx("div",{className:"space-y-6",children:e.productionHouses.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx(Za,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Production Houses Yet"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first production house to get started"}),a.jsxs("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors inline-flex items-center gap-2",children:[a.jsx(Xi,{className:"w-5 h-5"}),"Create Production House"]})]}):e.productionHouses.map(N=>{const E=b.find(B=>B.employeeId===N.productionHeadId),_=t.filter(B=>B.productionHouseId===N.id),O=Object.values(N.inventory).reduce((B,F)=>B+F,0);return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl text-gray-900 mb-2",children:N.name}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(cB,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm font-mono bg-purple-100 text-purple-800 px-2 py-1 rounded",children:["ID: ",N.id]})]}),a.jsxs("div",{className:"flex items-center gap-4 text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(A2,{className:"w-4 h-4"}),a.jsx("span",{children:N.location})]}),E&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tn,{className:"w-4 h-4"}),a.jsxs("span",{children:[E.name," (",E.employeeId,")"]})]})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Total Inventory"}),a.jsxs("div",{className:"text-2xl text-purple-600",children:[O," pcs"]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h4",{className:"text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx(Zt,{className:"w-5 h-5 text-purple-600"}),"Current Stock Levels"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:[a.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken"}),a.jsx("div",{className:"text-lg text-gray-900",children:N.inventory.chicken})]}),a.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken Cheese"}),a.jsx("div",{className:"text-lg text-gray-900",children:N.inventory.chickenCheese})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Veg"}),a.jsx("div",{className:"text-lg text-gray-900",children:N.inventory.veg})]}),a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Cheese Corn"}),a.jsx("div",{className:"text-lg text-gray-900",children:N.inventory.cheeseCorn})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Paneer"}),a.jsx("div",{className:"text-lg text-gray-900",children:N.inventory.paneer})]}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Veg Kurkure"}),a.jsx("div",{className:"text-lg text-gray-900",children:N.inventory.vegKurkure})]}),a.jsxs("div",{className:"bg-pink-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken Kurkure"}),a.jsx("div",{className:"text-lg text-gray-900",children:N.inventory.chickenKurkure})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm text-gray-700",children:"Assign Production Head"}),E&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:async()=>{if(e.user?.accessToken)try{const F=await(await fetch("https://xssxnhrzxvtejavoqgwg.supabase.co/functions/v1/make-server-c2dd9b9d/production",{headers:{Authorization:`Bearer ${e.user.accessToken}`}})).json();console.log(" ALL PRODUCTION RECORDS:",F.production);const D=F.production.filter(H=>H.storeId==="STORE-1766938921191-9LCH05"||H.productionHouseId==="STORE-1766938921191-9LCH05"||H.productionHouseId===N.id);console.log(" Records related to this production house:",D),console.log(" Current Production House ID:",N.id),console.log(" Records by productionHouseId:"),D.forEach(H=>{console.log(`  - Record ${H.id.slice(0,8)} (${H.date}): storeId=${H.storeId}, productionHouseId=${H.productionHouseId}`)}),alert(`Found ${D.length} records related to this production house.

Check console for details (F12).`)}catch(B){console.error("Error fetching production data:",B),alert("Failed to fetch data. Check console.")}},className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",title:"Show current production records in console for debugging",children:" Debug Records"}),a.jsx("button",{onClick:async()=>{if(!e.user?.accessToken)return;const B=window.prompt(`Enter the OLD storeId to fix (the wrong ID that production records currently have):

For example: STORE-1766938921191-9LCH05

This will update all production records from that ID to the correct production house ID: ${N.id}`);if(!(!B||B.trim()==="")&&window.confirm(`Fix production records with OLD ID: ${B}?

This will update them to use the correct production house ID: ${N.id}`))try{const F=await k5(e.user.accessToken,N.id,B.trim());alert(` Fixed ${F.updatedCount} production records!

Please refresh the page.`),window.location.reload()}catch(F){console.error("Error fixing records:",F),alert("Failed to fix records. Please try again.")}},className:"px-3 py-1.5 bg-orange-600 text-white text-sm rounded-lg hover:bg-orange-700 transition-colors",title:"Fix old production records that have wrong productionHouseId",children:" Fix Old Records"})]})]}),a.jsxs("select",{value:N.productionHeadId||"",onChange:B=>k(N.id,B.target.value),className:"w-full md:w-96 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No Production Head Assigned"}),b.map(B=>a.jsxs("option",{value:B.employeeId,children:[B.name," (",B.employeeId,")"]},B.employeeId))]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-900 mb-3",children:["Mapped Stores (",_.length,")"]}),_.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:_.map(B=>a.jsx("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:B.name}),a.jsx("div",{className:"text-sm text-gray-600",children:B.location})]})},B.id))}):a.jsx("p",{className:"text-gray-500 text-sm",children:"No stores mapped to this production house yet"})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("button",{onClick:()=>w(N.id,N.name),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[a.jsx(ws,{className:"w-5 h-5"}),"Delete Production House"]})})]},N.id)})}),e.productionHouses.length>0&&a.jsxs("div",{className:"mt-8 bg-yellow-50 rounded-xl p-6 border-2 border-yellow-200",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:" Unmapped Stores"}),t.filter(N=>!N.productionHouseId).length===0?a.jsx("p",{className:"text-gray-600",children:"All stores are mapped to production houses "}):a.jsx("div",{className:"space-y-3",children:t.filter(N=>!N.productionHouseId).map(N=>a.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:N.name}),a.jsx("div",{className:"text-sm text-gray-600",children:N.location})]}),a.jsxs("select",{onChange:E=>E.target.value&&S(N.id,E.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",defaultValue:"",children:[a.jsx("option",{value:"",children:"Assign to Production House"}),e.productionHouses.map(E=>a.jsx("option",{value:E.id,children:E.name},E.id))]})]},N.id))})]})]})}function bxe({context:e}){const[t,r]=P.useState([]),[n,s]=P.useState([]),[i,o]=P.useState(!1),[l,d]=P.useState(!1);P.useEffect(()=>{e.managedStoreIds&&e.managedProductionHouseIds&&(r(e.managedStoreIds),s(e.managedProductionHouseIds))},[e.managedStoreIds,e.managedProductionHouseIds]),P.useEffect(()=>{const g=JSON.stringify([...t].sort())!==JSON.stringify([...e.managedStoreIds||[]].sort()),b=JSON.stringify([...n].sort())!==JSON.stringify([...e.managedProductionHouseIds||[]].sort());d(g||b)},[t,n,e.managedStoreIds,e.managedProductionHouseIds]);const u=g=>{r(b=>b.includes(g)?b.filter(y=>y!==g):[...b,g])},f=g=>{s(b=>b.includes(g)?b.filter(y=>y!==g):[...b,g])},m=async()=>{if(!e.user?.employeeId||!e.user?.accessToken){Qt.error("Employee ID not found");return}o(!0);try{await W5(e.user.accessToken,e.user.employeeId,t,n),Qt.success("Cluster assignments updated successfully! Refreshing..."),setTimeout(()=>{window.location.reload()},1e3)}catch(g){console.error("Error updating cluster assignments:",g),Qt.error("Failed to update cluster assignments")}finally{o(!1)}},p=()=>{r(e.managedStoreIds||[]),s(e.managedProductionHouseIds||[])};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Gi,{className:"w-8 h-8"}),a.jsx("h2",{className:"text-2xl",children:"Cluster Management"})]}),a.jsx("p",{className:"text-purple-100",children:"Assign stores and production houses to your cluster. You'll be able to view reports and analytics for all assigned locations."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:[a.jsx(eo,{className:"w-8 h-8 mb-2 opacity-90"}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Assigned Stores"}),a.jsx("p",{className:"text-3xl",children:t.length}),a.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["of ",e.stores.length," total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:[a.jsx(Nl,{className:"w-8 h-8 mb-2 opacity-90"}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Production Houses"}),a.jsx("p",{className:"text-3xl",children:n.length}),a.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["of ",e.productionHouses.length," total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white",children:[a.jsx(La,{className:"w-8 h-8 mb-2 opacity-90"}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Locations"}),a.jsx("p",{className:"text-3xl",children:t.length+n.length}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"in your cluster"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(eo,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-lg text-gray-900",children:"Stores"}),a.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[t.length," selected"]})]}),e.stores.length===0?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No stores available"}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.stores.map(g=>{const b=t.includes(g.id);return a.jsxs("button",{onClick:()=>u(g.id),className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all text-left ${b?"border-purple-500 bg-purple-50":"border-gray-200 bg-white hover:border-purple-300"}`,children:[a.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center ${b?"border-purple-500 bg-purple-500":"border-gray-300 bg-white"}`,children:b&&a.jsx(lr,{className:"w-4 h-4 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-gray-900",children:g.name}),a.jsx("p",{className:"text-xs text-gray-500",children:g.location})]})]},g.id)})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Nl,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-lg text-gray-900",children:"Production Houses"}),a.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[n.length," selected"]})]}),e.productionHouses.length===0?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No production houses available"}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.productionHouses.map(g=>{const b=n.includes(g.id);return a.jsxs("button",{onClick:()=>f(g.id),className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all text-left ${b?"border-purple-500 bg-purple-50":"border-gray-200 bg-white hover:border-purple-300"}`,children:[a.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center ${b?"border-purple-500 bg-purple-500":"border-gray-300 bg-white"}`,children:b&&a.jsx(lr,{className:"w-4 h-4 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-gray-900",children:g.name}),a.jsx("p",{className:"text-xs text-gray-500",children:g.location})]})]},g.id)})})]}),l&&a.jsx("div",{className:"sticky bottom-0 bg-white border-t-2 border-gray-200 p-4 rounded-lg shadow-lg",children:a.jsxs("div",{className:"flex gap-3 max-w-4xl mx-auto",children:[a.jsx("button",{onClick:p,disabled:i,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50",children:"Cancel Changes"}),a.jsx("button",{onClick:m,disabled:i,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(lr,{className:"w-5 h-5"}),"Save Cluster Assignments"]})})]})})]})}function wxe({context:e}){const[t,r]=P.useState([]),[n,s]=P.useState(!0),[i,o]=P.useState(!1),[l,d]=P.useState(null),[u,f]=P.useState([]),[m,p]=P.useState([]),[g,b]=P.useState(""),[y,v]=P.useState(""),[k,S]=P.useState(""),[w,A]=P.useState(""),[C,N]=P.useState(""),[E,_]=P.useState(!1);P.useEffect(()=>{O(),B(),F()},[e.user]);const O=async()=>{if(e.user?.accessToken)try{s(!0);const re=await H2(e.user.accessToken);r(re)}catch(re){console.error("Error loading investors:",re),Qt.error("Failed to load investors")}finally{s(!1)}},B=async()=>{if(e.user?.accessToken)try{const re=await Y5(e.user.accessToken);f(re)}catch(re){console.error("Error loading loans:",re)}},F=async()=>{if(e.user?.accessToken)try{const re=await X5(e.user.accessToken);p(re)}catch(re){console.error("Error loading repayments:",re)}},D=async re=>{if(re.preventDefault(),!!e.user?.accessToken)try{_(!0);const Q={name:g,contactNumber:y,email:k,address:w,notes:C,createdBy:e.user.email};l?(await V5(e.user.accessToken,l.id,Q),Qt.success("Investor updated successfully")):(await K5(e.user.accessToken,Q),Qt.success("Investor added successfully")),W(),o(!1),O()}catch(Q){console.error("Error saving investor:",Q),Qt.error("Failed to save investor")}finally{_(!1)}},H=re=>{d(re),b(re.name),v(re.contactNumber||""),S(re.email||""),A(re.address||""),N(re.notes||""),o(!0)},ne=async re=>{if(e.user?.accessToken&&confirm("Are you sure you want to delete this investor?"))try{await G5(e.user.accessToken,re),Qt.success("Investor deleted successfully"),O()}catch(Q){console.error("Error deleting investor:",Q),Qt.error("Failed to delete investor")}},W=()=>{b(""),v(""),S(""),A(""),N(""),d(null)},ee=re=>{const Q=u.filter(V=>V.investorId===re),R=Q.reduce((V,Z)=>V+Z.loanAmount,0),X=Q.reduce((V,Z)=>V+Z.repaidAmount,0),L=Q.reduce((V,Z)=>{const ve=(Z.interestRate||0)/100*Z.loanAmount;return V+ve},0),I=Q.filter(V=>V.status==="active").length,G=R+L-X;return{totalLent:R,totalRepaid:X,totalInterest:L,activeLoans:I,outstanding:G,investorLoans:Q}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Investors & Investment Analytics"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage investors and track loan repayments"})]}),a.jsxs("button",{onClick:()=>{W(),o(!0)},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-lg hover:from-purple-700 hover:to-pink-600 transition-all shadow-lg",children:[a.jsx(Bs,{className:"w-5 h-5"}),"Add Investor"]})]}),n?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):t.length===0?a.jsxs("div",{className:"bg-gray-50 rounded-xl p-12 text-center border-2 border-dashed border-gray-300",children:[a.jsx(tn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Investors Yet"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Add your first investor to start tracking investments and loans"}),a.jsxs("button",{onClick:()=>{W(),o(!0)},className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-lg hover:from-purple-700 hover:to-pink-600 transition-all shadow-lg",children:[a.jsx(Bs,{className:"w-5 h-5"}),"Add First Investor"]})]}):a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.map(re=>{const Q=ee(re.id);return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-2 border-purple-100 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-500 p-6 text-white",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center",children:a.jsx(tn,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:re.name}),re.contactNumber&&a.jsxs("div",{className:"flex items-center gap-2 text-purple-100 text-sm mt-1",children:[a.jsx(Td,{className:"w-3 h-3"}),re.contactNumber]})]})]}),re.email&&a.jsxs("div",{className:"flex items-center gap-2 text-purple-100 text-sm",children:[a.jsx(jc,{className:"w-3 h-3"}),re.email]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>H(re),className:"p-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:a.jsx(ep,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>ne(re.id),className:"p-2 bg-white/20 hover:bg-red-500 rounded-lg transition-colors",children:a.jsx(ws,{className:"w-4 h-4"})})]})]})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(fa,{className:"w-4 h-4 text-purple-600"}),"Investment Summary"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total Lent"}),a.jsxs("p",{className:"text-xl font-bold text-blue-600",children:["",Q.totalLent.toLocaleString()]})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total Repaid"}),a.jsxs("p",{className:"text-xl font-bold text-green-600",children:["",Q.totalRepaid.toLocaleString()]})]}),a.jsxs("div",{className:"bg-amber-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Interest Accrued"}),a.jsxs("p",{className:"text-xl font-bold text-amber-600",children:["",Q.totalInterest.toFixed(2)]})]}),a.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Outstanding"}),a.jsxs("p",{className:"text-xl font-bold text-red-600",children:["",Q.outstanding.toFixed(2)]})]})]}),Q.activeLoans>0&&a.jsx("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm font-semibold text-purple-900",children:[Q.activeLoans," Active Loan",Q.activeLoans!==1?"s":""]})}),Q.investorLoans.length>0&&a.jsxs("div",{className:"mt-4 pt-4 border-t",children:[a.jsx("h5",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Recent Loans"}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:Q.investorLoans.slice(0,5).map(R=>a.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-gray-50 rounded",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-gray-900",children:["",R.loanAmount.toLocaleString()]}),a.jsxs("p",{className:"text-xs text-gray-600",children:[R.loanDate,"  ",R.interestRate||0,"% interest"]})]}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${R.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:R.status})]},R.id))})]}),re.notes&&a.jsxs("div",{className:"mt-4 pt-4 border-t",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Notes"}),a.jsx("p",{className:"text-sm text-gray-800",children:re.notes})]})]})]},re.id)})}),i&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>{o(!1),W()},children:a.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:re=>re.stopPropagation(),children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(Bs,{className:"w-6 h-6"}),l?"Edit Investor":"Add New Investor"]}),a.jsx("p",{className:"text-purple-100 mt-1",children:"Enter investor details"})]}),a.jsx("button",{onClick:()=>{o(!1),W()},className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(en,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:D,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Investor Name *"}),a.jsxs("div",{className:"relative",children:[a.jsx(tn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 w-5 h-5"}),a.jsx("input",{type:"text",value:g,onChange:re=>b(re.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter investor name",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Contact Number"}),a.jsxs("div",{className:"relative",children:[a.jsx(Td,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 w-5 h-5"}),a.jsx("input",{type:"tel",value:y,onChange:re=>v(re.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter contact number"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(jc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 w-5 h-5"}),a.jsx("input",{type:"email",value:k,onChange:re=>S(re.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter email address"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(_9,{className:"absolute left-3 top-3 text-gray-500 w-5 h-5"}),a.jsx("textarea",{value:w,onChange:re=>A(re.target.value),rows:2,className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter address"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes"}),a.jsx("textarea",{value:C,onChange:re=>N(re.target.value),rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Additional notes about this investor"})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:()=>{o(!1),W()},className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",disabled:E,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:E||!g,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:E?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(lr,{className:"w-5 h-5"}),l?"Update Investor":"Add Investor"]})})]})]})]})})]})}function jxe({context:e,stores:t,employees:r,onRefreshStores:n}){const s=e.user?.role==="cluster_head",[i,o]=P.useState("assets"),[l,d]=P.useState(s?"cluster-management":"stores");return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 rounded-2xl p-8 shadow-xl",children:[a.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center border-2 border-white/30",children:a.jsx(Zt,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl text-white mb-1",children:"Investments & Assets Management"}),a.jsx("p",{className:"text-white/80 text-sm",children:"Manage your investors, stores, and production houses"})]})]}),a.jsxs("div",{className:"flex gap-3 mb-4",children:[a.jsxs("button",{onClick:()=>o("assets"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="assets"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Zt,{className:"w-5 h-5"}),a.jsx("span",{children:"Assets"})]}),a.jsxs("button",{onClick:()=>o("investments"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="investments"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(fa,{className:"w-5 h-5"}),a.jsx("span",{children:"Investments"})]})]}),i==="assets"&&a.jsxs("div",{className:"flex gap-3",children:[s&&a.jsxs("button",{onClick:()=>d("cluster-management"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${l==="cluster-management"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Gi,{className:"w-5 h-5"}),a.jsx("span",{children:"Cluster Settings"})]}),a.jsxs("button",{onClick:()=>d("stores"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${l==="stores"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(eo,{className:"w-5 h-5"}),a.jsx("span",{children:"Stores"})]}),a.jsxs("button",{onClick:()=>d("production-houses"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${l==="production-houses"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Za,{className:"w-5 h-5"}),a.jsx("span",{children:"Production Houses"})]})]})]})]})}),a.jsx("div",{children:i==="investments"?a.jsx(wxe,{context:e}):l==="cluster-management"?a.jsx(bxe,{context:e}):l==="stores"?a.jsx(yxe,{onStoreCreated:n,userRole:e.user?.role}):a.jsx(vxe,{context:e,stores:t,employees:r,onRefreshStores:n})})]})}function I6({context:e,stores:t}){const[r,n]=P.useState("my-requests"),[s,i]=P.useState(!1),[o,l]=P.useState({requestId:null,quantities:{},notes:""}),d=e.user?.designation==="store_incharge",u=e.user?.designation==="production_incharge",f=t.find(C=>C.id===e.user?.storeId),m=e.productionHouses.find(C=>C.productionHeadId===e.user?.employeeId),[p,g]=P.useState({chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),b=async C=>{if(C.preventDefault(),!f){alert("You must be assigned to a store to create requests");return}if(!f.productionHouseId){alert("Your store is not mapped to any production house. Contact cluster head.");return}const N=e.productionHouses.find(_=>_.id===f.productionHouseId);if(!N){alert("Production house not found");return}if(!Object.values(p).some(_=>_>0)){alert("Please enter at least one quantity greater than 0");return}try{const _={storeId:f.id,storeName:f.name,productionHouseId:N.id,productionHouseName:N.name,requestedBy:e.user?.employeeId||"",requestedByName:e.user?.name||"",requestDate:new Date().toISOString().split("T")[0],requestedQuantities:p};console.log(" FRONTEND: About to create stock request with data:",_),console.log(" User employeeId:",e.user?.employeeId),console.log(" User name:",e.user?.name),console.log(" Has access token:",!!e.user?.accessToken),await e.createStockRequest(_),console.log(" FRONTEND: Stock request created successfully!"),alert("Stock request created successfully!"),i(!1),g({chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}catch(_){console.error(" FRONTEND: Error creating stock request:",_),console.error(" Error details:",JSON.stringify(_,null,2)),alert("Failed to create stock request. Please try again.")}},y=async C=>{m&&l({requestId:C.id,quantities:{...C.requestedQuantities},notes:""})},v=async C=>{if(C.preventDefault(),!!o.requestId)try{await e.fulfillStockRequest(o.requestId,o.quantities,e.user?.employeeId||"",e.user?.name||"",o.notes||void 0),alert("Stock request fulfilled successfully!"),l({requestId:null,quantities:{},notes:""})}catch(N){console.error("Error fulfilling request:",N),alert("Failed to fulfill request. Please try again.")}},k=d?e.stockRequests.filter(C=>C.storeId===e.user?.storeId):[],S=u&&m?e.stockRequests.filter(C=>C.productionHouseId===m.id&&C.status==="pending"):[],w=C=>{switch(C){case"pending":return"bg-yellow-100 text-yellow-800";case"fulfilled":return"bg-green-100 text-green-800";case"partially_fulfilled":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},A=C=>{switch(C){case"pending":return a.jsx(Aa,{className:"w-4 h-4"});case"fulfilled":return a.jsx(lr,{className:"w-4 h-4"});case"partially_fulfilled":return a.jsx(fa,{className:"w-4 h-4"});case"cancelled":return a.jsx(en,{className:"w-4 h-4"});default:return a.jsx(Ar,{className:"w-4 h-4"})}};return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[a.jsx(Zt,{className:"w-8 h-8 text-blue-600"}),"Stock Request Management"]}),a.jsxs("p",{className:"text-gray-600 mt-2",children:[d&&"Request stock from your production house",u&&"Fulfill stock requests from stores"]})]}),d&&a.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(Zm,{className:"w-5 h-5"}),"New Request"]})]}),d&&f&&!f.productionHouseId&&a.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-xl p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"text-red-900",children:"Your store is not mapped to any production house. Please contact your cluster head to assign a production house."})]})}),(d||u)&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-1 mb-6 flex gap-2",children:[d&&a.jsxs("button",{onClick:()=>n("my-requests"),className:`flex-1 px-6 py-3 rounded-lg transition-all ${r==="my-requests"?"bg-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["My Requests (",k.length,")"]}),u&&a.jsxs("button",{onClick:()=>n("pending-fulfillment"),className:`flex-1 px-6 py-3 rounded-lg transition-all flex items-center justify-center gap-2 ${r==="pending-fulfillment"?"bg-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["Pending Fulfillment",S.length>0&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r==="pending-fulfillment"?"bg-white text-blue-600":"bg-blue-600 text-white"}`,children:S.length})]})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Create Stock Request"}),a.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Momos"}),a.jsx("input",{type:"number",min:"0",value:p.chicken,onChange:C=>g({...p,chicken:parseInt(C.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Cheese Momos"}),a.jsx("input",{type:"number",min:"0",value:p.chickenCheese,onChange:C=>g({...p,chickenCheese:parseInt(C.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Veg Momos"}),a.jsx("input",{type:"number",min:"0",value:p.veg,onChange:C=>g({...p,veg:parseInt(C.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cheese Corn Momos"}),a.jsx("input",{type:"number",min:"0",value:p.cheeseCorn,onChange:C=>g({...p,cheeseCorn:parseInt(C.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Paneer Momos"}),a.jsx("input",{type:"number",min:"0",value:p.paneer,onChange:C=>g({...p,paneer:parseInt(C.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Veg Kurkure Momos"}),a.jsx("input",{type:"number",min:"0",value:p.vegKurkure,onChange:C=>g({...p,vegKurkure:parseInt(C.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Kurkure Momos"}),a.jsx("input",{type:"number",min:"0",value:p.chickenKurkure,onChange:C=>g({...p,chickenKurkure:parseInt(C.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Request"})]})]})]})}),o.requestId&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Fulfill Stock Request"}),a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[a.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:a.jsx("p",{className:"text-sm text-blue-900",children:"Adjust quantities based on available inventory. You can fulfill partially if stock is limited."})}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(o.quantities).map(([C,N])=>{const E=m?.inventory[C]||0;return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:[C.replace(/([A-Z])/g," $1").replace(/^./,_=>_.toUpperCase()),a.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(Available: ",E,")"]})]}),a.jsx("input",{type:"number",min:"0",max:E,value:N,onChange:_=>l({...o,quantities:{...o.quantities,[C]:parseInt(_.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]},C)})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Notes (Optional)"}),a.jsx("textarea",{value:o.notes,onChange:C=>l({...o,notes:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Any notes about this fulfillment..."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>l({requestId:null,quantities:{},notes:""}),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Fulfill Request"})]})]})]})}),a.jsxs("div",{className:"space-y-4",children:[r==="my-requests"&&k.length===0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx(Zt,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Stock Requests Yet"}),a.jsx("p",{className:"text-gray-600",children:"Create your first stock request to get momos from the production house"})]}),r==="pending-fulfillment"&&S.length===0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx(lr,{className:"w-16 h-16 mx-auto text-green-500 mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"All Caught Up!"}),a.jsx("p",{className:"text-gray-600",children:"No pending stock requests to fulfill"})]}),r==="my-requests"&&k.map(C=>a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs("h3",{className:"text-lg text-gray-900",children:["Request to ",C.productionHouseName]}),a.jsxs("span",{className:`px-3 py-1 rounded-full text-xs flex items-center gap-1 ${w(C.status)}`,children:[A(C.status),C.status.replace("_"," ").toUpperCase()]})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Requested on ",new Date(C.requestDate).toLocaleDateString()]})]})}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:Object.entries(C.requestedQuantities).map(([N,E])=>E>0&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:N.replace(/([A-Z])/g," $1").replace(/^./,_=>_.toUpperCase())}),a.jsx("div",{className:"text-lg text-gray-900",children:C.fulfilledQuantities?`${C.fulfilledQuantities[N]} / ${E}`:E})]},N))}),C.notes&&a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:[a.jsx("div",{className:"text-xs text-blue-900 mb-1",children:"Notes from Production Head:"}),a.jsx("div",{className:"text-sm text-blue-900",children:C.notes})]}),C.fulfilledBy&&a.jsxs("div",{className:"text-sm text-gray-600",children:["Fulfilled by ",C.fulfilledByName," on ",new Date(C.fulfillmentDate).toLocaleDateString()]})]},C.id)),r==="pending-fulfillment"&&S.map(C=>a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-yellow-300",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs("h3",{className:"text-lg text-gray-900",children:["Request from ",C.storeName]}),a.jsxs("span",{className:`px-3 py-1 rounded-full text-xs flex items-center gap-1 ${w(C.status)}`,children:[A(C.status),"PENDING"]})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Requested by ",C.requestedByName," on ",new Date(C.requestDate).toLocaleDateString()]})]}),a.jsxs("button",{onClick:()=>y(C),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[a.jsx(lr,{className:"w-4 h-4"}),"Fulfill"]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(C.requestedQuantities).map(([N,E])=>{const _=m?.inventory[N]||0,O=_>=E;return E>0&&a.jsxs("div",{className:`rounded-lg p-3 ${O?"bg-green-50":"bg-red-50"}`,children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:N.replace(/([A-Z])/g," $1").replace(/^./,B=>B.toUpperCase())}),a.jsx("div",{className:"text-lg text-gray-900",children:E}),a.jsxs("div",{className:`text-xs ${O?"text-green-600":"text-red-600"}`,children:["Available: ",_]})]},N)})})]},C.id))]})]})}const Nxe=(e,t)=>{const r=new Array(e.length+t.length);for(let n=0;n<e.length;n++)r[n]=e[n];for(let n=0;n<t.length;n++)r[e.length+n]=t[n];return r},kxe=(e,t)=>({classGroupId:e,validator:t}),c8=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),vg="-",M6=[],Sxe="arbitrary..",_xe=e=>{const t=Cxe(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return Exe(o);const l=o.split(vg),d=l[0]===""&&l.length>1?1:0;return d8(l,d,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const d=n[o],u=r[o];return d?u?Nxe(u,d):d:u||M6}return r[o]||M6}}},d8=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const s=e[t],i=r.nextPart.get(s);if(i){const u=d8(e,t+1,i);if(u)return u}const o=r.validators;if(o===null)return;const l=t===0?e.join(vg):e.slice(t).join(vg),d=o.length;for(let u=0;u<d;u++){const f=o[u];if(f.validator(l))return f.classGroupId}},Exe=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),n=t.slice(0,r);return n?Sxe+n:void 0})(),Cxe=e=>{const{theme:t,classGroups:r}=e;return Axe(r,t)},Axe=(e,t)=>{const r=c8();for(const n in e){const s=e[n];jS(s,r,n,t)}return r},jS=(e,t,r,n)=>{const s=e.length;for(let i=0;i<s;i++){const o=e[i];Txe(o,t,r,n)}},Txe=(e,t,r,n)=>{if(typeof e=="string"){Dxe(e,t,r);return}if(typeof e=="function"){Oxe(e,t,r,n);return}Pxe(e,t,r,n)},Dxe=(e,t,r)=>{const n=e===""?t:u8(t,e);n.classGroupId=r},Oxe=(e,t,r,n)=>{if(Ixe(e)){jS(e(n),t,r,n);return}t.validators===null&&(t.validators=[]),t.validators.push(kxe(r,e))},Pxe=(e,t,r,n)=>{const s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[l,d]=s[o];jS(d,u8(t,l),r,n)}},u8=(e,t)=>{let r=e;const n=t.split(vg),s=n.length;for(let i=0;i<s;i++){const o=n[i];let l=r.nextPart.get(o);l||(l=c8(),r.nextPart.set(o,l)),r=l}return r},Ixe=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Mxe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),n=Object.create(null);const s=(i,o)=>{r[i]=o,t++,t>e&&(t=0,n=r,r=Object.create(null))};return{get(i){let o=r[i];if(o!==void 0)return o;if((o=n[i])!==void 0)return s(i,o),o},set(i,o){i in r?r[i]=o:s(i,o)}}},k2="!",R6=":",Rxe=[],F6=(e,t,r,n,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:n,isExternal:s}),Fxe=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=s=>{const i=[];let o=0,l=0,d=0,u;const f=s.length;for(let y=0;y<f;y++){const v=s[y];if(o===0&&l===0){if(v===R6){i.push(s.slice(d,y)),d=y+1;continue}if(v==="/"){u=y;continue}}v==="["?o++:v==="]"?o--:v==="("?l++:v===")"&&l--}const m=i.length===0?s:s.slice(d);let p=m,g=!1;m.endsWith(k2)?(p=m.slice(0,-1),g=!0):m.startsWith(k2)&&(p=m.slice(1),g=!0);const b=u&&u>d?u-d:void 0;return F6(i,g,p,b)};if(t){const s=t+R6,i=n;n=o=>o.startsWith(s)?i(o.slice(s.length)):F6(Rxe,!1,o,void 0,!0)}if(r){const s=n;n=i=>r({className:i,parseClassName:s})}return n},$xe=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,n)=>{t.set(r,1e6+n)}),r=>{const n=[];let s=[];for(let i=0;i<r.length;i++){const o=r[i],l=o[0]==="[",d=t.has(o);l||d?(s.length>0&&(s.sort(),n.push(...s),s=[]),n.push(o)):s.push(o)}return s.length>0&&(s.sort(),n.push(...s)),n}},Lxe=e=>({cache:Mxe(e.cacheSize),parseClassName:Fxe(e),sortModifiers:$xe(e),..._xe(e)}),Bxe=/\s+/,Uxe=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],l=e.trim().split(Bxe);let d="";for(let u=l.length-1;u>=0;u-=1){const f=l[u],{isExternal:m,modifiers:p,hasImportantModifier:g,baseClassName:b,maybePostfixModifierPosition:y}=r(f);if(m){d=f+(d.length>0?" "+d:d);continue}let v=!!y,k=n(v?b.substring(0,y):b);if(!k){if(!v){d=f+(d.length>0?" "+d:d);continue}if(k=n(b),!k){d=f+(d.length>0?" "+d:d);continue}v=!1}const S=p.length===0?"":p.length===1?p[0]:i(p).join(":"),w=g?S+k2:S,A=w+k;if(o.indexOf(A)>-1)continue;o.push(A);const C=s(k,v);for(let N=0;N<C.length;++N){const E=C[N];o.push(w+E)}d=f+(d.length>0?" "+d:d)}return d},Hxe=(...e)=>{let t=0,r,n,s="";for(;t<e.length;)(r=e[t++])&&(n=h8(r))&&(s&&(s+=" "),s+=n);return s},h8=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=h8(e[n]))&&(r&&(r+=" "),r+=t);return r},qxe=(e,...t)=>{let r,n,s,i;const o=d=>{const u=t.reduce((f,m)=>m(f),e());return r=Lxe(u),n=r.cache.get,s=r.cache.set,i=l,l(d)},l=d=>{const u=n(d);if(u)return u;const f=Uxe(d,r);return s(d,f),f};return i=o,(...d)=>i(Hxe(...d))},Wxe=[],ln=e=>{const t=r=>r[e]||Wxe;return t.isThemeGetter=!0,t},f8=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,m8=/^\((?:(\w[\w-]*):)?(.+)\)$/i,zxe=/^\d+\/\d+$/,Kxe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Vxe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Gxe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Yxe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Xxe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,kd=e=>zxe.test(e),Mr=e=>!!e&&!Number.isNaN(Number(e)),fl=e=>!!e&&Number.isInteger(Number(e)),wj=e=>e.endsWith("%")&&Mr(e.slice(0,-1)),vo=e=>Kxe.test(e),Jxe=()=>!0,Qxe=e=>Vxe.test(e)&&!Gxe.test(e),p8=()=>!1,Zxe=e=>Yxe.test(e),eye=e=>Xxe.test(e),tye=e=>!Ht(e)&&!qt(e),rye=e=>Lu(e,y8,p8),Ht=e=>f8.test(e),tc=e=>Lu(e,v8,Qxe),jj=e=>Lu(e,oye,Mr),$6=e=>Lu(e,g8,p8),aye=e=>Lu(e,x8,eye),Gm=e=>Lu(e,b8,Zxe),qt=e=>m8.test(e),Sh=e=>Bu(e,v8),nye=e=>Bu(e,lye),L6=e=>Bu(e,g8),sye=e=>Bu(e,y8),iye=e=>Bu(e,x8),Ym=e=>Bu(e,b8,!0),Lu=(e,t,r)=>{const n=f8.exec(e);return n?n[1]?t(n[1]):r(n[2]):!1},Bu=(e,t,r=!1)=>{const n=m8.exec(e);return n?n[1]?t(n[1]):r:!1},g8=e=>e==="position"||e==="percentage",x8=e=>e==="image"||e==="url",y8=e=>e==="length"||e==="size"||e==="bg-size",v8=e=>e==="length",oye=e=>e==="number",lye=e=>e==="family-name",b8=e=>e==="shadow",cye=()=>{const e=ln("color"),t=ln("font"),r=ln("text"),n=ln("font-weight"),s=ln("tracking"),i=ln("leading"),o=ln("breakpoint"),l=ln("container"),d=ln("spacing"),u=ln("radius"),f=ln("shadow"),m=ln("inset-shadow"),p=ln("text-shadow"),g=ln("drop-shadow"),b=ln("blur"),y=ln("perspective"),v=ln("aspect"),k=ln("ease"),S=ln("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],C=()=>[...A(),qt,Ht],N=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],_=()=>[qt,Ht,d],O=()=>[kd,"full","auto",..._()],B=()=>[fl,"none","subgrid",qt,Ht],F=()=>["auto",{span:["full",fl,qt,Ht]},fl,qt,Ht],D=()=>[fl,"auto",qt,Ht],H=()=>["auto","min","max","fr",qt,Ht],ne=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],W=()=>["start","end","center","stretch","center-safe","end-safe"],ee=()=>["auto",..._()],re=()=>[kd,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",..._()],Q=()=>[e,qt,Ht],R=()=>[...A(),L6,$6,{position:[qt,Ht]}],X=()=>["no-repeat",{repeat:["","x","y","space","round"]}],L=()=>["auto","cover","contain",sye,rye,{size:[qt,Ht]}],I=()=>[wj,Sh,tc],G=()=>["","none","full",u,qt,Ht],V=()=>["",Mr,Sh,tc],Z=()=>["solid","dashed","dotted","double"],ve=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ee=()=>[Mr,wj,L6,$6],Te=()=>["","none",b,qt,Ht],ue=()=>["none",Mr,qt,Ht],ge=()=>["none",Mr,qt,Ht],Fe=()=>[Mr,qt,Ht],J=()=>[kd,"full",..._()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[vo],breakpoint:[vo],color:[Jxe],container:[vo],"drop-shadow":[vo],ease:["in","out","in-out"],font:[tye],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[vo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[vo],shadow:[vo],spacing:["px",Mr],text:[vo],"text-shadow":[vo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",kd,Ht,qt,v]}],container:["container"],columns:[{columns:[Mr,Ht,qt,l]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:C()}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[fl,"auto",qt,Ht]}],basis:[{basis:[kd,"full","auto",l,..._()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Mr,kd,"auto","initial","none",Ht]}],grow:[{grow:["",Mr,qt,Ht]}],shrink:[{shrink:["",Mr,qt,Ht]}],order:[{order:[fl,"first","last","none",qt,Ht]}],"grid-cols":[{"grid-cols":B()}],"col-start-end":[{col:F()}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":B()}],"row-start-end":[{row:F()}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":H()}],"auto-rows":[{"auto-rows":H()}],gap:[{gap:_()}],"gap-x":[{"gap-x":_()}],"gap-y":[{"gap-y":_()}],"justify-content":[{justify:[...ne(),"normal"]}],"justify-items":[{"justify-items":[...W(),"normal"]}],"justify-self":[{"justify-self":["auto",...W()]}],"align-content":[{content:["normal",...ne()]}],"align-items":[{items:[...W(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...W(),{baseline:["","last"]}]}],"place-content":[{"place-content":ne()}],"place-items":[{"place-items":[...W(),"baseline"]}],"place-self":[{"place-self":["auto",...W()]}],p:[{p:_()}],px:[{px:_()}],py:[{py:_()}],ps:[{ps:_()}],pe:[{pe:_()}],pt:[{pt:_()}],pr:[{pr:_()}],pb:[{pb:_()}],pl:[{pl:_()}],m:[{m:ee()}],mx:[{mx:ee()}],my:[{my:ee()}],ms:[{ms:ee()}],me:[{me:ee()}],mt:[{mt:ee()}],mr:[{mr:ee()}],mb:[{mb:ee()}],ml:[{ml:ee()}],"space-x":[{"space-x":_()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":_()}],"space-y-reverse":["space-y-reverse"],size:[{size:re()}],w:[{w:[l,"screen",...re()]}],"min-w":[{"min-w":[l,"screen","none",...re()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...re()]}],h:[{h:["screen","lh",...re()]}],"min-h":[{"min-h":["screen","lh","none",...re()]}],"max-h":[{"max-h":["screen","lh",...re()]}],"font-size":[{text:["base",r,Sh,tc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,qt,jj]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",wj,Ht]}],"font-family":[{font:[nye,Ht,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,qt,Ht]}],"line-clamp":[{"line-clamp":[Mr,"none",qt,jj]}],leading:[{leading:[i,..._()]}],"list-image":[{"list-image":["none",qt,Ht]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",qt,Ht]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Q()}],"text-color":[{text:Q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:[Mr,"from-font","auto",qt,tc]}],"text-decoration-color":[{decoration:Q()}],"underline-offset":[{"underline-offset":[Mr,"auto",qt,Ht]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qt,Ht]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qt,Ht]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:R()}],"bg-repeat":[{bg:X()}],"bg-size":[{bg:L()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},fl,qt,Ht],radial:["",qt,Ht],conic:[fl,qt,Ht]},iye,aye]}],"bg-color":[{bg:Q()}],"gradient-from-pos":[{from:I()}],"gradient-via-pos":[{via:I()}],"gradient-to-pos":[{to:I()}],"gradient-from":[{from:Q()}],"gradient-via":[{via:Q()}],"gradient-to":[{to:Q()}],rounded:[{rounded:G()}],"rounded-s":[{"rounded-s":G()}],"rounded-e":[{"rounded-e":G()}],"rounded-t":[{"rounded-t":G()}],"rounded-r":[{"rounded-r":G()}],"rounded-b":[{"rounded-b":G()}],"rounded-l":[{"rounded-l":G()}],"rounded-ss":[{"rounded-ss":G()}],"rounded-se":[{"rounded-se":G()}],"rounded-ee":[{"rounded-ee":G()}],"rounded-es":[{"rounded-es":G()}],"rounded-tl":[{"rounded-tl":G()}],"rounded-tr":[{"rounded-tr":G()}],"rounded-br":[{"rounded-br":G()}],"rounded-bl":[{"rounded-bl":G()}],"border-w":[{border:V()}],"border-w-x":[{"border-x":V()}],"border-w-y":[{"border-y":V()}],"border-w-s":[{"border-s":V()}],"border-w-e":[{"border-e":V()}],"border-w-t":[{"border-t":V()}],"border-w-r":[{"border-r":V()}],"border-w-b":[{"border-b":V()}],"border-w-l":[{"border-l":V()}],"divide-x":[{"divide-x":V()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":V()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Z(),"hidden","none"]}],"divide-style":[{divide:[...Z(),"hidden","none"]}],"border-color":[{border:Q()}],"border-color-x":[{"border-x":Q()}],"border-color-y":[{"border-y":Q()}],"border-color-s":[{"border-s":Q()}],"border-color-e":[{"border-e":Q()}],"border-color-t":[{"border-t":Q()}],"border-color-r":[{"border-r":Q()}],"border-color-b":[{"border-b":Q()}],"border-color-l":[{"border-l":Q()}],"divide-color":[{divide:Q()}],"outline-style":[{outline:[...Z(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Mr,qt,Ht]}],"outline-w":[{outline:["",Mr,Sh,tc]}],"outline-color":[{outline:Q()}],shadow:[{shadow:["","none",f,Ym,Gm]}],"shadow-color":[{shadow:Q()}],"inset-shadow":[{"inset-shadow":["none",m,Ym,Gm]}],"inset-shadow-color":[{"inset-shadow":Q()}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Q()}],"ring-offset-w":[{"ring-offset":[Mr,tc]}],"ring-offset-color":[{"ring-offset":Q()}],"inset-ring-w":[{"inset-ring":V()}],"inset-ring-color":[{"inset-ring":Q()}],"text-shadow":[{"text-shadow":["none",p,Ym,Gm]}],"text-shadow-color":[{"text-shadow":Q()}],opacity:[{opacity:[Mr,qt,Ht]}],"mix-blend":[{"mix-blend":[...ve(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ve()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Mr]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ee()}],"mask-image-linear-from-color":[{"mask-linear-from":Q()}],"mask-image-linear-to-color":[{"mask-linear-to":Q()}],"mask-image-t-from-pos":[{"mask-t-from":Ee()}],"mask-image-t-to-pos":[{"mask-t-to":Ee()}],"mask-image-t-from-color":[{"mask-t-from":Q()}],"mask-image-t-to-color":[{"mask-t-to":Q()}],"mask-image-r-from-pos":[{"mask-r-from":Ee()}],"mask-image-r-to-pos":[{"mask-r-to":Ee()}],"mask-image-r-from-color":[{"mask-r-from":Q()}],"mask-image-r-to-color":[{"mask-r-to":Q()}],"mask-image-b-from-pos":[{"mask-b-from":Ee()}],"mask-image-b-to-pos":[{"mask-b-to":Ee()}],"mask-image-b-from-color":[{"mask-b-from":Q()}],"mask-image-b-to-color":[{"mask-b-to":Q()}],"mask-image-l-from-pos":[{"mask-l-from":Ee()}],"mask-image-l-to-pos":[{"mask-l-to":Ee()}],"mask-image-l-from-color":[{"mask-l-from":Q()}],"mask-image-l-to-color":[{"mask-l-to":Q()}],"mask-image-x-from-pos":[{"mask-x-from":Ee()}],"mask-image-x-to-pos":[{"mask-x-to":Ee()}],"mask-image-x-from-color":[{"mask-x-from":Q()}],"mask-image-x-to-color":[{"mask-x-to":Q()}],"mask-image-y-from-pos":[{"mask-y-from":Ee()}],"mask-image-y-to-pos":[{"mask-y-to":Ee()}],"mask-image-y-from-color":[{"mask-y-from":Q()}],"mask-image-y-to-color":[{"mask-y-to":Q()}],"mask-image-radial":[{"mask-radial":[qt,Ht]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ee()}],"mask-image-radial-from-color":[{"mask-radial-from":Q()}],"mask-image-radial-to-color":[{"mask-radial-to":Q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[Mr]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ee()}],"mask-image-conic-from-color":[{"mask-conic-from":Q()}],"mask-image-conic-to-color":[{"mask-conic-to":Q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:R()}],"mask-repeat":[{mask:X()}],"mask-size":[{mask:L()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",qt,Ht]}],filter:[{filter:["","none",qt,Ht]}],blur:[{blur:Te()}],brightness:[{brightness:[Mr,qt,Ht]}],contrast:[{contrast:[Mr,qt,Ht]}],"drop-shadow":[{"drop-shadow":["","none",g,Ym,Gm]}],"drop-shadow-color":[{"drop-shadow":Q()}],grayscale:[{grayscale:["",Mr,qt,Ht]}],"hue-rotate":[{"hue-rotate":[Mr,qt,Ht]}],invert:[{invert:["",Mr,qt,Ht]}],saturate:[{saturate:[Mr,qt,Ht]}],sepia:[{sepia:["",Mr,qt,Ht]}],"backdrop-filter":[{"backdrop-filter":["","none",qt,Ht]}],"backdrop-blur":[{"backdrop-blur":Te()}],"backdrop-brightness":[{"backdrop-brightness":[Mr,qt,Ht]}],"backdrop-contrast":[{"backdrop-contrast":[Mr,qt,Ht]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Mr,qt,Ht]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Mr,qt,Ht]}],"backdrop-invert":[{"backdrop-invert":["",Mr,qt,Ht]}],"backdrop-opacity":[{"backdrop-opacity":[Mr,qt,Ht]}],"backdrop-saturate":[{"backdrop-saturate":[Mr,qt,Ht]}],"backdrop-sepia":[{"backdrop-sepia":["",Mr,qt,Ht]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":_()}],"border-spacing-x":[{"border-spacing-x":_()}],"border-spacing-y":[{"border-spacing-y":_()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",qt,Ht]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Mr,"initial",qt,Ht]}],ease:[{ease:["linear","initial",k,qt,Ht]}],delay:[{delay:[Mr,qt,Ht]}],animate:[{animate:["none",S,qt,Ht]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,qt,Ht]}],"perspective-origin":[{"perspective-origin":C()}],rotate:[{rotate:ue()}],"rotate-x":[{"rotate-x":ue()}],"rotate-y":[{"rotate-y":ue()}],"rotate-z":[{"rotate-z":ue()}],scale:[{scale:ge()}],"scale-x":[{"scale-x":ge()}],"scale-y":[{"scale-y":ge()}],"scale-z":[{"scale-z":ge()}],"scale-3d":["scale-3d"],skew:[{skew:Fe()}],"skew-x":[{"skew-x":Fe()}],"skew-y":[{"skew-y":Fe()}],transform:[{transform:[qt,Ht,"","none","gpu","cpu"]}],"transform-origin":[{origin:C()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:J()}],"translate-x":[{"translate-x":J()}],"translate-y":[{"translate-y":J()}],"translate-z":[{"translate-z":J()}],"translate-none":["translate-none"],accent:[{accent:Q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qt,Ht]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qt,Ht]}],fill:[{fill:["none",...Q()]}],"stroke-w":[{stroke:[Mr,Sh,tc,jj]}],stroke:[{stroke:["none",...Q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},dye=qxe(cye);function w8(...e){return dye(br(e))}function Wa({className:e,...t}){return a.jsx("div",{"data-slot":"card",className:w8("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function B6(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function uye(...e){return t=>{let r=!1;const n=e.map(s=>{const i=B6(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():B6(e[s],null)}}}}var hye=Symbol.for("react.lazy"),bg=o9[" use ".trim().toString()];function fye(e){return typeof e=="object"&&e!==null&&"then"in e}function j8(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===hye&&"_payload"in e&&fye(e._payload)}function mye(e){const t=gye(e),r=P.forwardRef((n,s)=>{let{children:i,...o}=n;j8(i)&&typeof bg=="function"&&(i=bg(i._payload));const l=P.Children.toArray(i),d=l.find(yye);if(d){const u=d.props.children,f=l.map(m=>m===d?P.Children.count(u)>1?P.Children.only(null):P.isValidElement(u)?u.props.children:null:m);return a.jsx(t,{...o,ref:s,children:P.isValidElement(u)?P.cloneElement(u,void 0,f):null})}return a.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}var pye=mye("Slot");function gye(e){const t=P.forwardRef((r,n)=>{let{children:s,...i}=r;if(j8(s)&&typeof bg=="function"&&(s=bg(s._payload)),P.isValidElement(s)){const o=bye(s),l=vye(i,s.props);return s.type!==P.Fragment&&(l.ref=n?uye(n,o):o),P.cloneElement(s,l)}return P.Children.count(s)>1?P.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var xye=Symbol("radix.slottable");function yye(e){return P.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===xye}function vye(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function bye(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const U6=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,H6=br,wye=(e,t)=>r=>{var n;if(t?.variants==null)return H6(e,r?.class,r?.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(u=>{const f=r?.[u],m=i?.[u];if(f===null)return null;const p=U6(f)||U6(m);return s[u][p]}),l=r&&Object.entries(r).reduce((u,f)=>{let[m,p]=f;return p===void 0||(u[m]=p),u},{}),d=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,f)=>{let{class:m,className:p,...g}=f;return Object.entries(g).every(b=>{let[y,v]=b;return Array.isArray(v)?v.includes({...i,...l}[y]):{...i,...l}[y]===v})?[...u,m,p]:u},[]);return H6(e,o,d,r?.class,r?.className)},jye=wye("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function rf({className:e,variant:t,asChild:r=!1,...n}){const s=r?pye:"span";return a.jsx(s,{"data-slot":"badge",className:w8(jye({variant:t}),e),...n})}function Nye({context:e,stores:t}){const r=P.useMemo(()=>{const s=new Date;s.setDate(s.getDate()-30);const i=e.salesData.filter(y=>new Date(y.date)>=s),o=i.length>0?i.length/30:0,l=e.productionData.filter(y=>new Date(y.date)>=s),d={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};l.forEach(y=>{d.chicken+=y.chickenMomos?.final||0,d.chickenCheese+=y.chickenCheeseMomos?.final||0,d.veg+=y.vegMomos?.final||0,d.cheeseCorn+=y.cheeseCornMomos?.final||0,d.paneer+=y.paneerMomos?.final||0,d.vegKurkure+=y.vegKurkureMomos?.final||0,d.chickenKurkure+=y.chickenKurkureMomos?.final||0});const u=Object.fromEntries(Object.entries(d).map(([y,v])=>[y,l.length>0?v/30:0])),f=7,m=[];for(let y=1;y<=f;y++){const v=new Date;v.setDate(v.getDate()+y);const k=v.getDay(),S=k===0||k===6?1.3:1;m.push({date:v.toISOString().split("T")[0],dayName:v.toLocaleDateString("en-US",{weekday:"short"}),expectedDemand:Math.round(o*S*100),recommendedProduction:Math.round(o*S*110),isWeekend:k===0||k===6})}const p=t.map(y=>{const k=e.stockRequests.filter(N=>N.storeId===y.id&&N.status==="fulfilled").reduce((N,E)=>N+(E.fulfilledQuantities?Object.values(E.fulfilledQuantities).reduce((_,O)=>_+O,0):0),0),w=e.salesData.filter(N=>N.storeId===y.id&&new Date(N.date)>=s).length/30,A=w>0?k/(w*10):99;let C="low";return A<2?C="critical":A<4?C="high":A<7&&(C="medium"),{storeName:y.name,currentStock:k,avgDailySales:Math.round(w*10),daysUntilStockout:Math.round(A),riskLevel:C,recommendedOrder:Math.round(w*10*7)}}),g=Object.entries(u).map(([y,v])=>{const k=v,S=Math.round(k*1.15),w=k>0?85:0;return{product:y.replace(/([A-Z])/g," $1").trim(),current:Math.round(k),recommended:S,efficiency:w,status:k>=S*.9?"optimal":"increase_needed"}}).filter(y=>y.current>0||y.recommended>0),b=[];for(let y=0;y<6;y++){const v=new Date;v.setMonth(v.getMonth()-(5-y));const k=e.salesData.filter(S=>{const w=new Date(S.date);return w.getMonth()===v.getMonth()&&w.getFullYear()===v.getFullYear()}).reduce((S,w)=>S+(w.onlineSales||0)+(w.offlineSales||0),0);b.push({month:v.toLocaleDateString("en-US",{month:"short"}),sales:k})}return{forecast:m,storeRisks:p,optimalSchedule:g,monthlyTrend:b,avgDailyProductionByType:u}},[e,t]),n=s=>{switch(s){case"critical":return"bg-red-100 text-red-800 border-red-300";case"high":return"bg-orange-100 text-orange-800 border-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:a.jsx(D2,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl",children:"Predictive Analytics"}),a.jsx("p",{className:"text-muted-foreground",children:"AI-powered forecasting and recommendations"})]})]}),a.jsxs(Wa,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[a.jsx(Ur,{className:"h-5 w-5 text-purple-600"}),"7-Day Demand Forecast"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3",children:r.forecast.map(s=>a.jsxs("div",{className:`p-4 rounded-lg border-2 ${s.isWeekend?"bg-purple-50 border-purple-200":"bg-gray-50 border-gray-200"}`,children:[a.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:s.dayName}),a.jsx("p",{className:"text-sm mb-2",children:new Date(s.date).getDate()}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Expected"}),a.jsx("p",{className:"text-lg",children:s.expectedDemand})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-green-600",children:"Recommended"}),a.jsx("p",{className:"text-lg text-green-600",children:s.recommendedProduction})]})]})]},s.date))})]}),a.jsxs(Wa,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[a.jsx(Ar,{className:"h-5 w-5 text-orange-600"}),"Stock-out Risk by Store"]}),a.jsx("div",{className:"space-y-3",children:r.storeRisks.map(s=>a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"text-sm",children:s.storeName}),a.jsxs(rf,{className:`${n(s.riskLevel)} border`,children:[s.riskLevel.toUpperCase()," RISK"]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Current Stock"}),a.jsx("p",{className:"text-lg",children:s.currentStock})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Avg Daily Sales"}),a.jsx("p",{className:"text-lg",children:s.avgDailySales})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Days Until Stock-out"}),a.jsx("p",{className:`text-lg ${s.daysUntilStockout<3?"text-red-600":s.daysUntilStockout<7?"text-orange-600":"text-green-600"}`,children:s.daysUntilStockout})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Recommended Order"}),a.jsx("p",{className:"text-lg text-blue-600",children:s.recommendedOrder})]})]})]},s.storeName))})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(Wa,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"Weekly Demand Forecast"}),a.jsx(zn,{width:"100%",height:300,children:a.jsxs(pc,{data:r.forecast,children:[a.jsx(bs,{strokeDasharray:"3 3"}),a.jsx(Dn,{dataKey:"dayName",tick:{fontSize:12}}),a.jsx(jn,{tick:{fontSize:12}}),a.jsx(Ea,{}),a.jsx(Ss,{}),a.jsx(hn,{dataKey:"expectedDemand",fill:"#8b5cf6",name:"Expected"}),a.jsx(hn,{dataKey:"recommendedProduction",fill:"#10b981",name:"Recommended"})]})})]}),a.jsxs(Wa,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"6-Month Sales Trend"}),a.jsx(zn,{width:"100%",height:300,children:a.jsxs(Fd,{data:r.monthlyTrend,children:[a.jsx(bs,{strokeDasharray:"3 3"}),a.jsx(Dn,{dataKey:"month",tick:{fontSize:12}}),a.jsx(jn,{tick:{fontSize:12}}),a.jsx(Ea,{}),a.jsx(Ss,{}),a.jsx(ss,{type:"monotone",dataKey:"sales",stroke:"#ec4899",strokeWidth:2,name:"Sales ()"})]})})]})]}),a.jsxs(Wa,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[a.jsx(fa,{className:"h-5 w-5 text-blue-600"}),"Optimal Production Schedule"]}),a.jsx("div",{className:"space-y-3",children:r.optimalSchedule.map(s=>a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"text-sm capitalize",children:s.product}),a.jsx(rf,{className:s.status==="optimal"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800",children:s.status==="optimal"?"OPTIMAL":"INCREASE NEEDED"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Current"}),a.jsxs("span",{children:[s.current,"/day"]})]}),a.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-purple-500",style:{width:`${s.current/s.recommended*100}%`}})})]}),a.jsx(g9,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("div",{className:"w-24 text-right",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Target"}),a.jsx("p",{className:"text-lg text-green-600",children:s.recommended})]})]})]},s.product))})]})]})}function kye({context:e,stores:t}){const[r,n]=P.useState("score"),[s,i]=P.useState("30days"),o=P.useMemo(()=>{const f=s==="7days"?7:s==="30days"?30:90,m=new Date;m.setDate(m.getDate()-f);const p=new Date;p.setDate(p.getDate()-f*2);const g=new Date(m),b=t.map(y=>{const v=e.salesData.filter(ee=>ee.storeId===y.id&&new Date(ee.date)>=m).reduce((ee,re)=>ee+(re.onlineSales||0)+(re.offlineSales||0),0),k=e.salesData.filter(ee=>ee.storeId===y.id&&new Date(ee.date)>=p&&new Date(ee.date)<g).reduce((ee,re)=>ee+(re.onlineSales||0)+(re.offlineSales||0),0),S=k>0?(v-k)/k*100:v>0?100:0,w=e.stockRequests.filter(ee=>ee.storeId===y.id&&new Date(ee.requestDate)>=m),A=w.length,C=w.filter(ee=>ee.status==="fulfilled"||ee.status==="partially_fulfilled"),N=w.reduce((ee,re)=>ee+Object.values(re.requestedQuantities).reduce((Q,R)=>Q+R,0),0),E=C.reduce((ee,re)=>ee+(re.fulfilledQuantities?Object.values(re.fulfilledQuantities).reduce((Q,R)=>Q+R,0):0),0),_=N>0?E/N*100:0,O=A>0?N/A:0,B=E>0?v/E*(_/100):0,F=Math.min(v/1e5*100,100),D=_,H=Math.max(0,Math.min(S+50,100)),ne=Math.min(B,100),W=F*.35+D*.25+H*.25+ne*.15;return{storeId:y.id,storeName:y.name,totalSales:v,totalRequests:A,fulfillmentRate:_,avgRequestSize:O,salesGrowth:S,efficiency:B,overallScore:W,rank:0}});return b.sort((y,v)=>v.overallScore-y.overallScore),b.forEach((y,v)=>{y.rank=v+1}),r==="sales"?b.sort((y,v)=>v.totalSales-y.totalSales):r==="efficiency"&&b.sort((y,v)=>v.efficiency-y.efficiency),b},[e,t,s,r]),l=P.useMemo(()=>{const f=o.slice(0,3);return[{metric:"Sales",...Object.fromEntries(f.map(m=>[m.storeName,Math.min(m.totalSales/1e5*100,100)]))},{metric:"Fulfillment",...Object.fromEntries(f.map(m=>[m.storeName,m.fulfillmentRate]))},{metric:"Growth",...Object.fromEntries(f.map(m=>[m.storeName,Math.max(0,Math.min(m.salesGrowth+50,100))]))},{metric:"Efficiency",...Object.fromEntries(f.map(m=>[m.storeName,Math.min(m.efficiency,100)]))},{metric:"Requests",...Object.fromEntries(f.map(m=>[m.storeName,Math.min(m.totalRequests/10*100,100)]))}]},[o]),d=f=>f===1?{icon:Ej,color:"bg-yellow-100 text-yellow-800 border-yellow-300",label:" 1st"}:f===2?{icon:KE,color:"bg-gray-100 text-gray-800 border-gray-300",label:" 2nd"}:f===3?{icon:KE,color:"bg-orange-100 text-orange-800 border-orange-300",label:" 3rd"}:{icon:D2,color:"bg-blue-100 text-blue-800 border-blue-300",label:`#${f}`},u=o.map(f=>({name:f.storeName,sales:f.totalSales,score:f.overallScore}));return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:a.jsx(Ej,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl",children:"Store Performance Comparison"}),a.jsx("p",{className:"text-muted-foreground",children:"Compare and rank store performance metrics"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("select",{value:s,onChange:f=>i(f.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[a.jsx("option",{value:"7days",children:"Last 7 Days"}),a.jsx("option",{value:"30days",children:"Last 30 Days"}),a.jsx("option",{value:"90days",children:"Last 90 Days"})]}),a.jsxs("select",{value:r,onChange:f=>n(f.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[a.jsx("option",{value:"score",children:"Overall Score"}),a.jsx("option",{value:"sales",children:"Total Sales"}),a.jsx("option",{value:"efficiency",children:"Efficiency"})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.slice(0,3).map((f,m)=>{const p=d(f.rank),g=p.icon;return a.jsxs(Wa,{className:"p-6 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-bl-full"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(rf,{className:`${p.color} border text-lg px-3 py-1`,children:p.label}),a.jsx(g,{className:"h-8 w-8 text-purple-600"})]}),a.jsx("h3",{className:"text-xl mb-4",children:f.storeName}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Overall Score"}),a.jsxs("span",{className:"text-purple-600",children:[f.overallScore.toFixed(1),"/100"]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Sales"}),a.jsxs("span",{children:["",f.totalSales.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Growth"}),a.jsxs("span",{className:f.salesGrowth>=0?"text-green-600":"text-red-600",children:[f.salesGrowth>=0?a.jsx(Y6,{className:"inline h-4 w-4"}):a.jsx(nf,{className:"inline h-4 w-4"}),Math.abs(f.salesGrowth).toFixed(1),"%"]})]})]})]})]},f.storeId)})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(Wa,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"Multi-dimensional Performance (Top 3)"}),a.jsx(zn,{width:"100%",height:350,children:a.jsxs(Tle,{data:l,children:[a.jsx(kF,{}),a.jsx(Iu,{dataKey:"metric",tick:{fontSize:12}}),a.jsx(Pu,{angle:90,domain:[0,100],tick:{fontSize:10}}),a.jsx(vc,{name:o[0]?.storeName,dataKey:o[0]?.storeName,stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6}),o[1]&&a.jsx(vc,{name:o[1].storeName,dataKey:o[1].storeName,stroke:"#ec4899",fill:"#ec4899",fillOpacity:.6}),o[2]&&a.jsx(vc,{name:o[2].storeName,dataKey:o[2].storeName,stroke:"#10b981",fill:"#10b981",fillOpacity:.6}),a.jsx(Ss,{})]})})]}),a.jsxs(Wa,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"Sales & Performance Score"}),a.jsx(zn,{width:"100%",height:350,children:a.jsxs(pc,{data:u,children:[a.jsx(bs,{strokeDasharray:"3 3"}),a.jsx(Dn,{dataKey:"name",tick:{fontSize:12},angle:-45,textAnchor:"end",height:100}),a.jsx(jn,{yAxisId:"left",tick:{fontSize:12}}),a.jsx(jn,{yAxisId:"right",orientation:"right",tick:{fontSize:12}}),a.jsx(Ea,{}),a.jsx(Ss,{}),a.jsx(hn,{yAxisId:"left",dataKey:"sales",fill:"#8b5cf6",name:"Sales ()"}),a.jsx(hn,{yAxisId:"right",dataKey:"score",fill:"#ec4899",name:"Score"})]})})]})]}),a.jsxs(Wa,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"Detailed Performance Metrics"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left py-3 px-2",children:"Rank"}),a.jsx("th",{className:"text-left py-3 px-2",children:"Store"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Score"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Sales"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Growth"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Requests"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Fulfillment"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Efficiency"})]})}),a.jsx("tbody",{children:o.map(f=>{const m=d(f.rank);return a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-2",children:a.jsx(rf,{className:`${m.color} border text-xs`,children:m.label})}),a.jsx("td",{className:"py-3 px-2",children:f.storeName}),a.jsx("td",{className:"text-right py-3 px-2",children:a.jsx("span",{className:"text-purple-600",children:f.overallScore.toFixed(1)})}),a.jsxs("td",{className:"text-right py-3 px-2",children:["",f.totalSales.toLocaleString()]}),a.jsx("td",{className:"text-right py-3 px-2",children:a.jsxs("span",{className:f.salesGrowth>=0?"text-green-600":"text-red-600",children:[f.salesGrowth>=0?"+":"",f.salesGrowth.toFixed(1),"%"]})}),a.jsx("td",{className:"text-right py-3 px-2",children:f.totalRequests}),a.jsx("td",{className:"text-right py-3 px-2",children:a.jsxs("span",{className:f.fulfillmentRate>=90?"text-green-600":f.fulfillmentRate>=70?"text-yellow-600":"text-red-600",children:[f.fulfillmentRate.toFixed(1),"%"]})}),a.jsx("td",{className:"text-right py-3 px-2",children:f.efficiency.toFixed(1)})]},f.storeId)})})]})})]})]})}function Sye({context:e,productionHouses:t,onNavigateToManageItems:r}){const[n,s]=P.useState(new Date().toISOString().split("T")[0]),[i,o]=P.useState(null),[l,d]=P.useState([]),[u,f]=P.useState(!0),[m,p]=P.useState({}),g=async()=>{try{const S=ju(),{data:{session:w}}=await S.auth.getSession();return w?.access_token||null}catch(S){return console.error("Error getting fresh token:",S),null}};P.useEffect(()=>{(async()=>{const w=await g();if(!w){console.error("No access token available"),f(!1);return}try{const A=await Ig(w);d(A)}catch(A){console.error("Error loading production requests:",A)}finally{f(!1)}})()},[]),P.useEffect(()=>{const S=async()=>{const w=await g();if(!w)return;console.log(" Loading production house opening balances..."),console.log("  Production houses count:",t.length),console.log("  Inventory items count:",e.inventoryItems?.length||0);const A=new Date().toISOString().substring(0,7),C={};for(const N of t){console.log(`  Fetching recalibration for ${N.name} (${N.id})...`);try{const E=await vl(w,N.id,"production_house");if(console.log(`  Recalibration response for ${N.name}:`,E),E?.record){const _=E.record.date.substring(0,7);if(console.log(`  Recalibration date: ${_}, Current month: ${A}`),_===A){const O={};E.record.items.forEach(B=>{const F=e.inventoryItems?.find(D=>D.id===B.itemId||D.name===B.itemId);if(console.log(`    Item ${B.itemId}: ${F?"Found":"NOT FOUND"}`,F),F){const D=F.name.replace(/_([a-z])/g,H=>H[1].toUpperCase());O[D]=B.actualQuantity,console.log(`    Mapped to ${D} = ${B.actualQuantity}`)}}),C[N.id]=O,console.log(` Loaded opening balance for ${N.name}:`,O)}else console.log(`   Recalibration month ${_} doesn't match current month ${A}`)}else console.log(`   No recalibration found for ${N.name}`)}catch(E){console.error(` Error fetching recalibration for ${N.name}:`,E)}}console.log(" Final opening balances:",C),p(C)};t.length>0&&e.inventoryItems&&e.inventoryItems.length>0?S():console.log(" Skipping opening balance load:",{productionHousesCount:t.length,inventoryItemsCount:e.inventoryItems?.length||0})},[t,e.inventoryItems]);const b=P.useMemo(()=>{if(u)return[];const S=[];return console.log(" Production Houses:",t),console.log(" Production Requests:",l),console.log(" Selected Date:",n),t.forEach(w=>{console.log(`
 Processing house: ${w.name} (${w.id})`);const A=e.productionData.filter(R=>R.productionHouseId===w.id&&R.date<=n),C=l?.filter(R=>{if(!R.deliveredAt||R.status!=="delivered")return!1;let X;if(R.deliveredAt.includes("/")){const V=R.deliveredAt.split(",")[0].split("/");X=`${V[2]}-${V[1].padStart(2,"0")}-${V[0].padStart(2,"0")}`}else R.deliveredAt.includes("T")?X=R.deliveredAt.split("T")[0]:X=R.deliveredAt.split(" ")[0];const L=e.stores.find(V=>V.id===R.storeId),I=L?.productionHouseId===w.id,G=X<=n;return console.log(`     Request ${R.id}: storeId=${R.storeId}, store.productionHouseId=${L?.productionHouseId}, houseId=${w.id}, deliveredDate=${X}, isForThisHouse=${I}, isBeforeOrOnDate=${G}, status=${R.status}`),I&&G})||[];console.log(`   Total delivered requests for ${w.name}: ${C.length}`),C.forEach(R=>{console.log(`    - Request: chicken=${R.chickenMomos}, chickenCheese=${R.chickenCheeseMomos}, deliveredAt=${R.deliveredAt}`)});const N=e.productionData.find(R=>R.productionHouseId===w.id&&R.date===n),E=l?.filter(R=>{if(!R.deliveredAt||R.status!=="delivered")return!1;let X;if(R.deliveredAt.includes("/")){const I=R.deliveredAt.split(",")[0].split("/");X=`${I[2]}-${I[1].padStart(2,"0")}-${I[0].padStart(2,"0")}`}else R.deliveredAt.includes("T")?X=R.deliveredAt.split("T")[0]:X=R.deliveredAt.split(" ")[0];return e.stores.find(I=>I.id===R.storeId)?.productionHouseId===w.id&&X===n})||[],_={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0,schezwan:0},O=m[w.id]||{},B={chickenMomo:"chicken",chickenCheeseMomo:"chickenCheese",vegMomo:"veg",cheeseCornMomo:"cheeseCorn",paneerMomo:"paneer",vegKurkureMomo:"vegKurkure",chickenKurkureMomo:"chickenKurkure",schezwanMomo:"schezwan"};Object.keys(O).forEach(R=>{const X=B[R]||R;X in _&&(_[X]=O[R],console.log(`   Applied opening balance: ${R} -> ${X} = ${O[R]}`))}),A.forEach(R=>{_.chicken+=R.chickenMomos?.final||0,_.chickenCheese+=R.chickenCheeseMomos?.final||0,_.veg+=R.vegMomos?.final||0,_.cheeseCorn+=R.cheeseCornMomos?.final||0,_.paneer+=R.paneerMomos?.final||0,_.vegKurkure+=R.vegKurkureMomos?.final||0,_.chickenKurkure+=R.chickenKurkureMomos?.final||0,_.schezwan+=R.schezwanMomos?.final||0});const F={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0,schezwan:0};C.forEach(R=>{F.chicken+=R.chickenMomos||0,F.chickenCheese+=R.chickenCheeseMomos||0,F.veg+=R.vegMomos||0,F.cheeseCorn+=R.cheeseCornMomos||0,F.paneer+=R.paneerMomos||0,F.vegKurkure+=R.vegKurkureMomos||0,F.chickenKurkure+=R.chickenKurkureMomos||0,F.schezwan+=R.schezwanMomos||0});const D={chicken:N?.chickenMomos?.final||0,chickenCheese:N?.chickenCheeseMomos?.final||0,veg:N?.vegMomos?.final||0,cheeseCorn:N?.cheeseCornMomos?.final||0,paneer:N?.paneerMomos?.final||0,vegKurkure:N?.vegKurkureMomos?.final||0,chickenKurkure:N?.chickenKurkureMomos?.final||0,schezwan:N?.schezwanMomos?.final||0},H={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0,schezwan:0};E.forEach(R=>{H.chicken+=R.chickenMomos||0,H.chickenCheese+=R.chickenCheeseMomos||0,H.veg+=R.vegMomos||0,H.cheeseCorn+=R.cheeseCornMomos||0,H.paneer+=R.paneerMomos||0,H.vegKurkure+=R.vegKurkureMomos||0,H.chickenKurkure+=R.chickenKurkureMomos||0,H.schezwan+=R.schezwanMomos||0});const ne={chicken:{produced:D.chicken,sent:H.chicken,available:Math.max(0,_.chicken-F.chicken),percentage:0},chickenCheese:{produced:D.chickenCheese,sent:H.chickenCheese,available:Math.max(0,_.chickenCheese-F.chickenCheese),percentage:0},veg:{produced:D.veg,sent:H.veg,available:Math.max(0,_.veg-F.veg),percentage:0},cheeseCorn:{produced:D.cheeseCorn,sent:H.cheeseCorn,available:Math.max(0,_.cheeseCorn-F.cheeseCorn),percentage:0},paneer:{produced:D.paneer,sent:H.paneer,available:Math.max(0,_.paneer-F.paneer),percentage:0},vegKurkure:{produced:D.vegKurkure,sent:H.vegKurkure,available:Math.max(0,_.vegKurkure-F.vegKurkure),percentage:0},chickenKurkure:{produced:D.chickenKurkure,sent:H.chickenKurkure,available:Math.max(0,_.chickenKurkure-F.chickenKurkure),percentage:0},schezwan:{produced:D.schezwan,sent:H.schezwan,available:Math.max(0,_.schezwan-F.schezwan),percentage:0}};Object.keys(ne).forEach(R=>{const X=ne[R];_[R]>0?X.percentage=X.available/_[R]*100:X.percentage=0});const W=Object.values(D).reduce((R,X)=>R+X,0),ee=N?(N.wastage?.dough||0)+(N.wastage?.stuffing||0)+(N.wastage?.batter||0)+(N.wastage?.coating||0):0,re=e.productionData.filter(R=>R.productionHouseId===w.id&&R.date===n&&R.approvalStatus==="approved").length,Q=e.productionData.filter(R=>R.productionHouseId===w.id&&R.date===n&&R.approvalStatus==="pending").length;S.push({productionHouseId:w.id,productionHouseName:w.name,date:n,stock:ne,totalProduced:W,totalWastage:ee,approvedEntries:re,pendingApproval:Q}),console.log(`   Stock entry created for ${w.name}:`,{totalProduced:W,totalWastage:ee,availableStock:ne,hasOpeningBalance:Object.keys(O).length>0,openingBalance:O})}),console.log(" Final stocks array:",S),S},[e.productionData,e.stores,l,t,n,m]),y=i?b.filter(S=>S.productionHouseId===i):b,v={chicken:"Chicken Momos",chickenCheese:"Chicken Cheese Momos",veg:"Veg Momos",cheeseCorn:"Cheese Corn Momos",paneer:"Paneer Momos",vegKurkure:"Veg Kurkure Momos",chickenKurkure:"Chicken Kurkure Momos",schezwan:"Schezwan Momos"},k=S=>S>=80?{bg:"bg-purple-50",border:"border-purple-200",bar:"bg-purple-500",text:"text-purple-700"}:S>=60?{bg:"bg-pink-50",border:"border-pink-200",bar:"bg-pink-500",text:"text-pink-700"}:S>=40?{bg:"bg-green-50",border:"border-green-200",bar:"bg-green-500",text:"text-green-700"}:S>=20?{bg:"bg-yellow-50",border:"border-yellow-200",bar:"bg-yellow-500",text:"text-yellow-700"}:{bg:"bg-red-50",border:"border-red-200",bar:"bg-red-500",text:"text-red-700"};return a.jsxs("div",{className:"space-y-6",children:[a.jsx(Wa,{className:"p-4 bg-gradient-to-r from-orange-50 to-amber-50 border-2 border-orange-200",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(uB,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-orange-900 mb-1",children:"Dynamic Inventory Items"}),a.jsxs("p",{className:"text-sm text-orange-700 mb-2",children:["You can now add custom production items beyond the default 7 momo types! Manage all items from the ",a.jsx("strong",{children:'"Manage Items"'})," page in the navigation."]}),a.jsx("p",{className:"text-xs text-orange-600",children:" Items can be production house-specific or global (available to all facilities)"})]})]})}),a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl",children:"Production House Stock Status"}),a.jsx("p",{className:"text-muted-foreground",children:"Opening balance + This month produced - Sent to stores (delivered requests)"})]}),a.jsxs("div",{className:"flex gap-2 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ur,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("input",{type:"date",value:n,onChange:S=>s(S.target.value),max:new Date().toISOString().split("T")[0],className:"px-3 py-2 border rounded-lg bg-background"})]}),a.jsxs("select",{value:i||"all",onChange:S=>o(S.target.value==="all"?null:S.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[a.jsx("option",{value:"all",children:"All Production Houses"}),t.map(S=>a.jsx("option",{value:S.id,children:S.name},S.id))]}),r&&(e.user?.role==="manager"||e.user?.role==="cluster_head")&&a.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg",children:[a.jsx(Zt,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-semibold",children:"Manage Items"})]})]})]}),y.map(S=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs(Wa,{className:"p-6 bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Zt,{className:"h-5 w-5 text-orange-600"}),a.jsx("p",{className:"text-sm text-orange-800",children:"Total Production"})]}),a.jsx("p",{className:"text-3xl text-orange-900 mb-1",children:S.totalProduced.toLocaleString()}),a.jsx("p",{className:"text-xs text-orange-700",children:"pieces"})]}),a.jsxs(Wa,{className:"p-6 bg-gradient-to-br from-red-50 to-red-100 border-red-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Nc,{className:"h-5 w-5 text-red-600"}),a.jsx("p",{className:"text-sm text-red-800",children:"Total Wastage"})]}),a.jsx("p",{className:"text-3xl text-red-900 mb-1",children:S.totalWastage.toFixed(2)}),a.jsx("p",{className:"text-xs text-red-700",children:"kg"})]}),a.jsxs(Wa,{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(fa,{className:"h-5 w-5 text-green-600"}),a.jsx("p",{className:"text-sm text-green-800",children:"Approved Entries"})]}),a.jsx("p",{className:"text-3xl text-green-900 mb-1",children:S.approvedEntries}),a.jsx("p",{className:"text-xs text-green-700",children:"records"})]}),a.jsxs(Wa,{className:"p-6 bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Ur,{className:"h-5 w-5 text-yellow-600"}),a.jsx("p",{className:"text-sm text-yellow-800",children:"Pending Approval"})]}),a.jsx("p",{className:"text-3xl text-yellow-900 mb-1",children:S.pendingApproval}),a.jsx("p",{className:"text-xs text-yellow-700",children:"records"})]})]}),a.jsxs(Wa,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Za,{className:"h-5 w-5 text-orange-600"}),a.jsxs("h3",{className:"text-lg",children:[S.productionHouseName," - Stock Status"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Object.entries(S.stock).map(([w,A])=>{const C=k(A.percentage);return a.jsxs("div",{className:`p-4 rounded-lg border-2 ${C.bg} ${C.border}`,children:[a.jsx("h4",{className:"text-sm mb-3",children:v[w]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"This Month Produced:"}),a.jsx("span",{className:C.text,children:A.produced})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Sent to Stores:"}),a.jsx("span",{className:"text-red-600",children:A.sent})]}),a.jsxs("div",{className:"border-t pt-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"",children:"Stock Available:"}),a.jsx("span",{className:`text-lg ${C.text}`,children:A.available})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"flex justify-between text-xs",children:a.jsxs("span",{children:[A.percentage.toFixed(0),"% remaining"]})}),a.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${C.bar} transition-all duration-300`,style:{width:`${Math.min(A.percentage,100)}%`}})})]})]})]})]},w)})})]})]},S.productionHouseId)),y.length===0&&a.jsxs(Wa,{className:"p-12 text-center",children:[a.jsx(Za,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg mb-2",children:"No Production Data"}),a.jsx("p",{className:"text-muted-foreground",children:"No production data available for the selected date and production house"})]})]})}function q6({context:e,stores:t,onNavigateToManageItems:r}){const[n,s]=useState("dashboard");return a.jsx("div",{className:"min-h-screen bg-background p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl",children:"Advanced Inventory Management"}),a.jsx("p",{className:"text-muted-foreground",children:"Comprehensive inventory tracking, analytics, and reporting system"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg",children:a.jsx(Zt,{className:"h-6 w-6 text-white"})})})]}),a.jsxs(Tabs,{value:n,onValueChange:i=>s(i),className:"space-y-6",children:[a.jsxs(TabsList,{className:"grid grid-cols-7 w-full",children:[a.jsxs(TabsTrigger,{value:"dashboard",className:"flex items-center gap-2",children:[a.jsx(Nj,{className:"h-4 w-4"}),"Dashboard"]}),a.jsxs(TabsTrigger,{value:"stock-status",className:"flex items-center gap-2",children:[a.jsx(Zt,{className:"h-4 w-4"}),"Stock"]}),a.jsxs(TabsTrigger,{value:"alerts",className:"flex items-center gap-2",children:[a.jsx(kj,{className:"h-4 w-4"}),"Alerts"]}),a.jsxs(TabsTrigger,{value:"requests",className:"flex items-center gap-2",children:[a.jsx(Zm,{className:"h-4 w-4"}),"Requests"]}),a.jsxs(TabsTrigger,{value:"reports",className:"flex items-center gap-2",children:[a.jsx(ks,{className:"h-4 w-4"}),"Reports"]}),a.jsxs(TabsTrigger,{value:"predictive",className:"flex items-center gap-2",children:[a.jsx(D2,{className:"h-4 w-4"}),"Forecast"]}),a.jsxs(TabsTrigger,{value:"performance",className:"flex items-center gap-2",children:[a.jsx(Ej,{className:"h-4 w-4"}),"Rankings"]})]}),a.jsx(TabsContent,{value:"dashboard",children:a.jsx(InventoryDashboard,{context:e,stores:t})}),a.jsx(TabsContent,{value:"stock-status",children:a.jsx(Sye,{context:e,productionHouses:e.productionHouses,onNavigateToManageItems:r})}),a.jsx(TabsContent,{value:"alerts",children:a.jsx(InventoryAlerts,{context:e,stores:t})}),a.jsx(TabsContent,{value:"requests",children:a.jsx(EnhancedProductionRequests,{context:e,stores:t})}),a.jsx(TabsContent,{value:"reports",children:a.jsx(ReportsVisualization,{context:e,stores:t})}),a.jsx(TabsContent,{value:"predictive",children:a.jsx(Nye,{context:e,stores:t})}),a.jsx(TabsContent,{value:"performance",children:a.jsx(kye,{context:e,stores:t})})]})]})})}function W6({context:e}){const[t,r]=P.useState([]),[n,s]=P.useState(!0),[i,o]=P.useState(!1),[l,d]=P.useState(null),[u,f]=P.useState(null),[m,p]=P.useState(null),[g,b]=P.useState({displayName:"",category:"finished_product",unit:"pieces",linkedEntityType:"global",linkedEntityId:""}),[y,v]=P.useState("all"),[k,S]=P.useState("all");P.useEffect(()=>{w()},[]);const w=async()=>{try{s(!0);const D=await fetch(`https://${In}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items`,{headers:{Authorization:`Bearer ${rn}`}});if(!D.ok)throw new Error("Failed to load inventory items");const H=await D.json();r(H.items||[])}catch(D){console.error("Error loading items:",D),f(D instanceof Error?D.message:"Failed to load items")}finally{s(!1)}},A=async D=>{D.preventDefault(),f(null),p(null);try{const ne={name:g.displayName.toLowerCase().replace(/\s+/g,"_"),displayName:g.displayName,category:g.category,unit:g.unit,linkedEntityType:g.linkedEntityType,linkedEntityId:g.linkedEntityType==="global"?void 0:g.linkedEntityId,userId:e.user?.employeeId||"unknown"},W=l?`https://${In}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items/${l}`:`https://${In}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items`,ee=await fetch(W,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${rn}`},body:JSON.stringify(ne)});if(!ee.ok){const re=await ee.json();throw new Error(re.error||"Failed to save item")}p(l?"Item updated successfully!":"Item created successfully!"),o(!1),d(null),b({displayName:"",category:"finished_product",unit:"pieces",linkedEntityType:"global",linkedEntityId:""}),await w()}catch(H){console.error("Error saving item:",H),f(H instanceof Error?H.message:"Failed to save item")}},C=D=>{d(D.id),b({displayName:D.displayName,category:D.category,unit:D.unit,linkedEntityType:D.linkedEntityType,linkedEntityId:D.linkedEntityId||""}),o(!0)},N=async D=>{if(confirm("Are you sure you want to delete this item?"))try{if(!(await fetch(`https://${In}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items/${D}`,{method:"DELETE",headers:{Authorization:`Bearer ${rn}`}})).ok)throw new Error("Failed to delete item");p("Item deleted successfully!"),await w()}catch(H){console.error("Error deleting item:",H),f(H instanceof Error?H.message:"Failed to delete item")}},E=async()=>{if(confirm("This will add the 7 default momo types as global items. Continue?"))try{if(s(!0),!(await fetch(`https://${In}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items/initialize-defaults`,{method:"POST",headers:{Authorization:`Bearer ${rn}`}})).ok)throw new Error("Failed to initialize defaults");p("Default items initialized successfully!"),await w()}catch(D){console.error("Error initializing defaults:",D),f(D instanceof Error?D.message:"Failed to initialize defaults")}finally{s(!1)}},_=()=>{o(!1),d(null),b({displayName:"",category:"finished_product",unit:"pieces",linkedEntityType:"global",linkedEntityId:""})},O=t.filter(D=>!(y!=="all"&&D.category!==y||k!=="all"&&D.linkedEntityType!==k)),B=D=>{switch(D){case"finished_product":return"bg-purple-100 text-purple-800";case"raw_material":return"bg-blue-100 text-blue-800";case"sauce_chutney":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},F=D=>{switch(D){case"store":return a.jsx(eo,{className:"w-4 h-4"});case"production_house":return a.jsx(Za,{className:"w-4 h-4"});default:return a.jsx(Zt,{className:"w-4 h-4"})}};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Inventory Items Master"}),a.jsx("p",{className:"text-gray-600",children:"Manage all inventory items for stores and production houses"})]}),a.jsxs("div",{className:"flex gap-3",children:[t.length===0&&a.jsx("button",{onClick:E,disabled:n,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all disabled:opacity-50",children:"Initialize Defaults"}),a.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg transition-all",children:[a.jsx(Xi,{className:"w-5 h-5"}),"Add New Item"]})]})]}),u&&a.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"text-red-800",children:u}),a.jsx("button",{onClick:()=>f(null),className:"ml-auto",children:a.jsx(ea,{className:"w-4 h-4 text-red-600"})})]}),m&&a.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-3",children:[a.jsx(So,{className:"w-5 h-5 text-green-600"}),a.jsx("p",{className:"text-green-800",children:m}),a.jsx("button",{onClick:()=>p(null),className:"ml-auto",children:a.jsx(ea,{className:"w-4 h-4 text-green-600"})})]}),i&&a.jsxs(Wa,{className:"p-6 border-2 border-purple-200",children:[a.jsx("h2",{className:"text-xl mb-4",children:l?"Edit Item":"Add New Item"}),a.jsxs("form",{onSubmit:A,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Display Name *"}),a.jsx("input",{type:"text",value:g.displayName,onChange:D=>b({...g,displayName:D.target.value}),placeholder:"e.g., Schezwan Momo",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Category *"}),a.jsxs("select",{value:g.category,onChange:D=>b({...g,category:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"finished_product",children:"Finished Product"}),a.jsx("option",{value:"raw_material",children:"Raw Material"}),a.jsx("option",{value:"sauce_chutney",children:"Sauce/Chutney"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Unit *"}),a.jsxs("select",{value:g.unit,onChange:D=>b({...g,unit:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"pieces",children:"Pieces"}),a.jsx("option",{value:"kg",children:"Kilograms (kg)"}),a.jsx("option",{value:"liters",children:"Liters"}),a.jsx("option",{value:"grams",children:"Grams"}),a.jsx("option",{value:"ml",children:"Milliliters (ml)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Link To *"}),a.jsxs("select",{value:g.linkedEntityType,onChange:D=>b({...g,linkedEntityType:D.target.value,linkedEntityId:""}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"global",children:"All (Global)"}),a.jsx("option",{value:"store",children:"Specific Store"}),a.jsx("option",{value:"production_house",children:"Specific Production House"})]})]}),g.linkedEntityType==="store"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Select Store *"}),a.jsxs("select",{value:g.linkedEntityId,onChange:D=>b({...g,linkedEntityId:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"-- Select Store --"}),e.stores?.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]})]}),g.linkedEntityType==="production_house"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Select Production House *"}),a.jsxs("select",{value:g.linkedEntityId,onChange:D=>b({...g,linkedEntityId:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"-- Select Production House --"}),e.productionHouses?.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]})]})]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx("button",{type:"button",onClick:_,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg",children:l?"Update Item":"Add Item"})]})]})]}),a.jsx(Wa,{className:"p-4",children:a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Filter by Category"}),a.jsxs("select",{value:y,onChange:D=>v(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[a.jsx("option",{value:"all",children:"All Categories"}),a.jsx("option",{value:"finished_product",children:"Finished Products"}),a.jsx("option",{value:"raw_material",children:"Raw Materials"}),a.jsx("option",{value:"sauce_chutney",children:"Sauces/Chutneys"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Filter by Type"}),a.jsxs("select",{value:k,onChange:D=>S(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"global",children:"Global Items"}),a.jsx("option",{value:"store",children:"Store Specific"}),a.jsx("option",{value:"production_house",children:"Production House Specific"})]})]})]})}),n?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading items..."})]}):O.length===0?a.jsxs(Wa,{className:"p-12 text-center",children:[a.jsx(Zt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl text-gray-600 mb-2",children:"No items found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first inventory item"}),t.length===0&&a.jsx("button",{onClick:E,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg",children:"Initialize Default Items"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:O.map(D=>a.jsxs(Wa,{className:"p-4 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[F(D.linkedEntityType),a.jsx("h3",{className:"font-semibold text-gray-900",children:D.displayName})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>C(D),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:a.jsx(Vi,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>N(D.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:a.jsx(ws,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rf,{className:B(D.category),children:D.category.replace("_"," ").toUpperCase()}),a.jsxs("span",{className:"text-gray-500",children:[" ",D.unit]})]}),a.jsxs("div",{className:"text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Scope:"})," ",D.linkedEntityType==="global"?"All Entities":D.linkedEntityType==="store"?`Store: ${e.stores?.find(H=>H.id===D.linkedEntityId)?.name||"Unknown"}`:`Production House: ${e.productionHouses?.find(H=>H.id===D.linkedEntityId)?.name||"Unknown"}`]}),a.jsxs("div",{className:"text-xs text-gray-400 pt-2 border-t",children:["Created: ",new Date(D.createdAt).toLocaleDateString()]})]})]},D.id))}),a.jsx(Wa,{className:"p-6 bg-gradient-to-r from-purple-50 to-pink-50",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl text-purple-600",children:t.filter(D=>D.isActive).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Items"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl text-blue-600",children:t.filter(D=>D.linkedEntityType==="global").length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Global Items"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl text-green-600",children:t.filter(D=>D.linkedEntityType==="store").length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Store Specific"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl text-orange-600",children:t.filter(D=>D.linkedEntityType==="production_house").length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Production House"})]})]})})]})}function z6(){const e=P.useRef(""),t=P.useRef(null);return P.useEffect(()=>{console.log(" Stock Request Reminder Scheduler initialized");const r=async()=>{const n=new Date,s=n.getHours(),i=n.toISOString().split("T")[0];if(s===15&&e.current!==i){console.log(" 3PM - Time to send stock request reminders!");try{const o=await fetch(`https://${In}.supabase.co/functions/v1/make-server-c2dd9b9d/send-stock-request-reminders`,{method:"POST",headers:{Authorization:`Bearer ${rn}`,"Content-Type":"application/json"}});if(o.ok){const l=await o.json();console.log(" Stock request reminders sent successfully:",l),e.current=i}else console.error(" Failed to send stock request reminders:",o.statusText)}catch(o){console.error(" Error sending stock request reminders:",o)}}};return t.current=setInterval(r,900*1e3),r(),()=>{t.current&&clearInterval(t.current)}},[]),null}function _ye({context:e}){const[t,r]=P.useState(!1),[n,s]=P.useState(!0),i=e.inventory.filter(l=>!l.storeId);if(!e.user?.storeId||i.length===0||!n)return null;const o=async()=>{const l=[...new Set(i.map(d=>d.date))].sort();if(confirm(`Found ${i.length} inventory items without a store assignment.

Dates: ${l.join(", ")}

Assign them ALL to your current store (${e.user?.storeId})?`)){r(!0);try{const d=e.user?.accessToken;if(!d)throw new Error("No access token");let u=0,f=0;for(const m of i)try{const p=await fetch(`https://${In}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory/${m.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({...m,storeId:e.user?.storeId})});p.ok?u++:(f++,console.error(`Failed to update item ${m.id}:`,await p.text()))}catch(p){f++,console.error(`Error updating item ${m.id}:`,p)}u>0?(alert(` Successfully assigned ${u} inventory items to your store!

Reloading page...`),window.location.reload()):alert(" Failed to update items. Please try again or contact support.")}catch(d){console.error("Error fixing legacy inventory:",d),alert("Error: "+(d instanceof Error?d.message:"Unknown error"))}finally{r(!1)}}};return a.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50 animate-bounce",children:a.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-4 rounded-lg shadow-2xl border-4 border-yellow-300",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Qa,{className:"w-6 h-6 animate-pulse"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-lg",children:"Legacy Data Found!"}),a.jsxs("p",{className:"text-sm text-yellow-100",children:[i.length," inventory items need store assignment"]})]}),a.jsx("button",{onClick:o,disabled:t,className:"ml-4 bg-white text-orange-600 px-4 py-2 rounded-lg font-bold hover:bg-yellow-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:t?a.jsxs(a.Fragment,{children:[a.jsx(_o,{className:"w-4 h-4 animate-spin"}),"Fixing..."]}):"Fix Now"}),a.jsx("button",{onClick:()=>s(!1),className:"ml-2 text-yellow-100 hover:text-white",children:""})]})})})}function Eye({context:e}){const[t,r]=P.useState(!1),[n,s]=P.useState(!1),[i,o]=P.useState(null),[l,d]=P.useState(null),[u,f]=P.useState(!1),[m,p]=P.useState(null),g=async()=>{r(!0),o(null);try{const k={exportDate:new Date().toISOString(),exportDateIST:q2(new Date().toISOString()),version:"1.0",data:{inventory:e.inventory||[],overheads:e.overheads||[],fixedCosts:e.fixedCosts||[],sales:e.salesData||[],categorySalesData:e.categorySalesData||[],productionData:e.productionData||[],productionHouses:e.productionHouses||[],stockRequests:e.stockRequests||[],productionRequests:e.productionRequests||[],stores:e.stores||[],inventoryItems:e.inventoryItems||[]},metadata:{totalInventoryItems:(e.inventory||[]).length,totalOverheadItems:(e.overheads||[]).length,totalFixedCostItems:(e.fixedCosts||[]).length,totalSalesRecords:(e.salesData||[]).length,totalCategorySalesData:(e.categorySalesData||[]).length,totalProductionRecords:(e.productionData||[]).length,totalProductionHouses:(e.productionHouses||[]).length,totalStockRequests:(e.stockRequests||[]).length,totalProductionRequests:(e.productionRequests||[]).length,totalStores:(e.stores||[]).length,totalInventoryItemTypes:(e.inventoryItems||[]).length}},S=new Blob([JSON.stringify(k,null,2)],{type:"application/json"}),w=URL.createObjectURL(S),A=document.createElement("a");A.href=w,A.download=`bhandar-ims-backup-${Na()}-${Date.now()}.json`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(w),o({type:"success",message:`Backup created successfully! Downloaded ${Object.values(k.metadata).reduce((C,N)=>C+N,0)} total records.`})}catch(k){console.error("Export error:",k),o({type:"error",message:"Failed to export data. Please try again."})}finally{r(!1)}},b=k=>{const S=k.target.files?.[0];if(S){if(S.type!=="application/json"){d({type:"error",message:"Please select a valid JSON backup file."});return}p(S),f(!0),d(null)}},y=async()=>{if(!(!m||!e.user)){s(!0),d(null),f(!1);try{const k=await m.text(),S=JSON.parse(k);if(!S.data||!S.version)throw new Error("Invalid backup file format");let w={inventory:0,overheads:0,fixedCosts:0,sales:0,categorySalesData:0,productionData:0,productionHouses:0,stockRequests:0,productionRequests:0,stores:0,inventoryItems:0};if(S.data.inventory)for(const C of S.data.inventory)try{await e.addInventoryItem(C),w.inventory++}catch(N){console.error("Error importing inventory item:",N)}if(S.data.overheads)for(const C of S.data.overheads)try{await e.addOverheadItem(C),w.overheads++}catch(N){console.error("Error importing overhead:",N)}if(S.data.fixedCosts)for(const C of S.data.fixedCosts)try{await e.addFixedCostItem(C),w.fixedCosts++}catch(N){console.error("Error importing fixed cost:",N)}if(S.data.sales)for(const C of S.data.sales)try{await e.addSalesData(C),w.sales++}catch(N){console.error("Error importing sale:",N)}if(S.data.categorySalesData)for(const C of S.data.categorySalesData)try{await(void 0)(e.user.accessToken,C),w.categorySalesData++}catch(N){console.error("Error importing category sales data:",N)}if(S.data.productionData)for(const C of S.data.productionData)try{await e.addProductionData(C),w.productionData++}catch(N){console.error("Error importing production data:",N)}if(S.data.productionHouses)for(const C of S.data.productionHouses)try{await e.addProductionHouse(C),w.productionHouses++}catch(N){console.error("Error importing production house:",N)}if(S.data.stockRequests)for(const C of S.data.stockRequests)try{const{fulfilledQuantities:N,status:E,fulfilledBy:_,fulfilledByName:O,fulfillmentDate:B,notes:F,...D}=C;await e.createStockRequest(D),w.stockRequests++}catch(N){console.error("Error importing stock request:",N)}if(S.data.productionRequests)for(const C of S.data.productionRequests)try{await B2(e.user.accessToken,C),w.productionRequests++}catch(N){console.error("Error importing production request:",N)}if(S.data.stores)for(const C of S.data.stores)try{await M2(e.user.accessToken,C),w.stores++}catch(N){console.error("Error importing store:",N)}if(S.data.inventoryItems)for(const C of S.data.inventoryItems)try{await(void 0)(e.user.accessToken,C),w.inventoryItems++}catch(N){console.error("Error importing inventory item type:",N)}const A=Object.values(w).reduce((C,N)=>C+N,0);d({type:"success",message:`Successfully imported ${A} records! Page will reload in 3 seconds...`}),setTimeout(()=>{window.location.reload()},3e3)}catch(k){console.error("Import error:",k),d({type:"error",message:`Failed to import data: ${k instanceof Error?k.message:"Unknown error"}`})}finally{s(!1),p(null)}}},v=e.inventory.length+e.overheads.length+e.fixedCosts.length+e.salesData.length+e.categorySalesData.length+e.productionData.length+e.productionHouses.length+e.stockRequests.length+e.productionRequests.length+e.stores.length+e.inventoryItems.length;return a.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(_h,{className:"w-8 h-8"}),a.jsx("h1",{className:"text-2xl font-bold",children:"Backup & Restore"})]}),a.jsx("p",{className:"text-purple-100",children:"Protect your data by creating regular backups. Export your data to JSON files and restore when needed."})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(oB,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Current Database"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Inventory Items"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.inventory.length})]}),a.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Overhead Costs"}),a.jsx("p",{className:"text-2xl font-bold text-orange-600",children:e.overheads.length})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Fixed Costs"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.fixedCosts.length})]}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Sales Records"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:e.salesData.length})]}),a.jsxs("div",{className:"bg-pink-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Category Sales Data"}),a.jsx("p",{className:"text-2xl font-bold text-pink-600",children:e.categorySalesData.length})]}),a.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Production Data"}),a.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:e.productionData.length})]}),a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Production Houses"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:e.productionHouses.length})]}),a.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Stock Requests"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:e.stockRequests.length})]}),a.jsxs("div",{className:"bg-teal-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Production Requests"}),a.jsx("p",{className:"text-2xl font-bold text-teal-600",children:e.productionRequests.length})]}),a.jsxs("div",{className:"bg-cyan-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Stores"}),a.jsx("p",{className:"text-2xl font-bold text-cyan-600",children:e.stores.length})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Inventory Item Types"}),a.jsx("p",{className:"text-2xl font-bold text-gray-600",children:e.inventoryItems.length})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("p",{className:"text-lg text-gray-900",children:[a.jsx("span",{className:"font-semibold",children:"Total Records:"})," ",v.toLocaleString()]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Ms,{className:"w-5 h-5 text-green-600"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Export Data (Create Backup)"})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-semibold mb-1",children:" Backup Best Practices:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[a.jsx("li",{children:"Create backups daily or after important data entry"}),a.jsx("li",{children:"Store backup files in multiple locations (Google Drive, external hard drive, etc.)"}),a.jsx("li",{children:"Name files with dates for easy identification"}),a.jsx("li",{children:"Test restoring from backups periodically"})]})]})]})}),a.jsx("button",{onClick:g,disabled:t||v===0,className:"w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-lg font-semibold",children:t?a.jsxs(a.Fragment,{children:[a.jsx(Io,{className:"w-5 h-5 animate-spin"}),"Creating Backup..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ms,{className:"w-5 h-5"}),"Download Backup (",v," records)"]})}),i&&a.jsxs("div",{className:`mt-4 p-4 rounded-lg flex items-start gap-3 ${i.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[i.type==="success"?a.jsx(lr,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}):a.jsx(Ar,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsx("p",{className:`text-sm ${i.type==="success"?"text-green-800":"text-red-800"}`,children:i.message})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(cc,{className:"w-5 h-5 text-orange-600"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Import Data (Restore Backup)"})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ar,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("p",{className:"font-semibold mb-1",children:" Important Warning:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[a.jsxs("li",{children:["Importing will ",a.jsx("strong",{children:"ADD"})," data from the backup file to your current database"]}),a.jsx("li",{children:"This may create duplicate records if the same data already exists"}),a.jsx("li",{children:"Create a backup of your current data before importing"}),a.jsx("li",{children:"Only use backup files created by this system"})]})]})]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("input",{type:"file",accept:".json",onChange:b,disabled:n,className:"w-full px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-orange-400 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),m&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Selected file:"}),a.jsx("p",{className:"text-gray-900 font-medium",children:m.name}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(m.size/1024).toFixed(2)," KB"]})]})]}),l&&a.jsxs("div",{className:`mt-4 p-4 rounded-lg flex items-start gap-3 ${l.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[l.type==="success"?a.jsx(lr,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}):a.jsx(Ar,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsx("p",{className:`text-sm ${l.type==="success"?"text-green-800":"text-red-800"}`,children:l.message})]})]}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Ar,{className:"w-6 h-6 text-orange-600"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Confirm Import"})]}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsx("p",{className:"text-gray-700",children:"Are you sure you want to import data from this backup file?"}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:[a.jsx("strong",{children:"Warning:"})," This will add all records from the backup file to your current database. Make sure you've created a backup of your current data first!"]})}),a.jsx("div",{className:"bg-gray-50 rounded p-3",children:a.jsx("p",{className:"text-sm text-gray-600 font-medium",children:m?.name})})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{f(!1),p(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:y,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center gap-2",children:[a.jsx(cc,{className:"w-4 h-4"}),"Import Data"]})]})]})}),a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl shadow-lg p-6",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Ur,{className:"w-6 h-6 text-purple-600 flex-shrink-0 mt-1"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:" Recommended Backup Schedule"}),a.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-600 font-bold",children:""}),a.jsxs("span",{children:[a.jsx("strong",{children:"Daily:"})," At the end of each business day (especially after sales entry)"]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-600 font-bold",children:""}),a.jsxs("span",{children:[a.jsx("strong",{children:"Weekly:"})," Every Sunday for weekly records"]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-600 font-bold",children:""}),a.jsxs("span",{children:[a.jsx("strong",{children:"Monthly:"})," On the last day of each month before monthly reports"]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-600 font-bold",children:""}),a.jsxs("span",{children:[a.jsx("strong",{children:"Before Major Changes:"})," Always backup before bulk edits or deletions"]})]})]})]})]})})]})}function NS(){return"serviceWorker"in navigator&&"PushManager"in window}const Cye=`
// Service Worker for Push Notifications
self.addEventListener('install', (event) => {
  console.log('Service Worker installed');
  self.skipWaiting();
});

self.addEventListener('activate', (event) => {
  console.log('Service Worker activated');
  event.waitUntil(clients.claim());
});

self.addEventListener('push', (event) => {
  console.log('Push notification received:', event);
  
  let notificationData = {
    title: 'Bhandar-IMS',
    body: 'You have a new notification',
    icon: '/icon-192x192.png',
    badge: '/badge-72x72.png',
    tag: 'bhandar-notification',
    requireInteraction: false,
  };

  if (event.data) {
    try {
      const data = event.data.json();
      notificationData = {
        ...notificationData,
        title: data.title || notificationData.title,
        body: data.message || data.body || notificationData.body,
        icon: data.icon || notificationData.icon,
        tag: data.tag || notificationData.tag,
        data: data,
      };
    } catch (e) {
      console.error('Error parsing push data:', e);
      notificationData.body = event.data.text();
    }
  }

  event.waitUntil(
    self.registration.showNotification(notificationData.title, {
      body: notificationData.body,
      icon: notificationData.icon,
      badge: notificationData.badge,
      tag: notificationData.tag,
      requireInteraction: notificationData.requireInteraction,
      data: notificationData.data,
    })
  );
});

self.addEventListener('notificationclick', (event) => {
  console.log('Notification clicked:', event);
  event.notification.close();
  event.waitUntil(
    clients.matchAll({ type: 'window', includeUncontrolled: true }).then((clientList) => {
      for (const client of clientList) {
        if (client.url.includes(self.registration.scope) && 'focus' in client) {
          return client.focus();
        }
      }
      if (clients.openWindow) {
        return clients.openWindow('/');
      }
    })
  );
});
`;async function Aye(){if(!NS())return null;try{try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});return console.log(" Service Worker registered successfully from /sw.js"),e}catch{console.log(" /sw.js not found, using inline service worker");const t=new Blob([Cye],{type:"application/javascript"}),r=URL.createObjectURL(t),n=await navigator.serviceWorker.register(r,{scope:"/"});return console.log(" Service Worker registered successfully (inline)"),n}}catch{return null}}function Tye(e){const t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(r),s=new Uint8Array(n.length);for(let i=0;i<n.length;++i)s[i]=n.charCodeAt(i);return s}async function Dye(e,t){try{const r=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Tye(t)});return console.log("Push subscription successful:",r),r}catch(r){return console.error("Failed to subscribe to push notifications:",r),null}}async function K6(e,t){try{if(!(await fetch(`https://${In}.supabase.co/functions/v1/make-server-c2dd9b9d/push/subscribe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${rn}`},body:JSON.stringify({subscription:e.toJSON(),userId:t})})).ok)throw new Error("Failed to send subscription to server");return console.log("Subscription sent to server successfully"),!0}catch(r){return console.error("Error sending subscription to server:",r),!1}}async function Oye(e){try{return await e.pushManager.getSubscription()}catch(t){return console.error("Error getting existing subscription:",t),null}}async function Pye(e,t){if(!NS())return console.log(" Push notifications not supported in this browser"),!1;try{const r=await Aye();if(!r)return console.log(" Service worker registration failed - push notifications unavailable"),!1;await navigator.serviceWorker.ready;const n=await Oye(r);if(n)return console.log(" Push notifications already enabled"),await K6(n,e),!0;const s=Notification.permission;if(s==="denied")return console.log(" Push notifications blocked. To enable: Click  icon in address bar  Allow notifications"),!1;if(s==="default")return console.log(" Push notifications available. Click the notification bell to enable."),!1;if(s==="granted"){const i=await Dye(r,t);return i?(await K6(i,e),console.log(" Push notifications enabled successfully"),!0):(console.log(" Failed to create push subscription"),!1)}return!1}catch(r){return console.log(" Push notifications unavailable:",r instanceof Error?r.message:"Unknown error"),!1}}const Ic="bhandar_cache_",Iye=300*1e3,N8=3600*1e3,af=1;function Mye(e){try{const t=`${Ic}${e}`,r=localStorage.getItem(t);if(!r)return null;const n=JSON.parse(r);return n.version!==af||Date.now()-n.timestamp>N8?(localStorage.removeItem(t),null):n.data}catch(t){return console.error("Cache read error:",t),null}}function Rye(e){try{const t=`${Ic}${e}`,r=localStorage.getItem(t);if(!r)return!1;const n=JSON.parse(r);return Date.now()-n.timestamp<Iye&&n.version===af}catch{return!1}}function Fye(e,t){try{const r=`${Ic}${e}`,n={data:t,timestamp:Date.now(),version:af};localStorage.setItem(r,JSON.stringify(n))}catch(r){if(r instanceof Error&&r.name==="QuotaExceededError"){k8();try{const n=`${Ic}${e}`,s={data:t,timestamp:Date.now(),version:af};localStorage.setItem(n,JSON.stringify(s))}catch(n){console.error("Cache write error after cleanup:",n)}}else console.error("Cache write error:",r)}}function k8(){try{const e=Date.now(),t=[];for(let r=0;r<localStorage.length;r++){const n=localStorage.key(r);if(n&&n.startsWith(Ic))try{const s=localStorage.getItem(n);if(s){const i=JSON.parse(s);(e-i.timestamp>N8||i.version!==af)&&t.push(n)}}catch{t.push(n)}}t.forEach(r=>localStorage.removeItem(r)),console.log(` Cleared ${t.length} old cache entries`)}catch(e){console.error("Cache cleanup error:",e)}}function na(e){try{const t=`${Ic}${e}`;localStorage.removeItem(t)}catch(t){console.error("Cache invalidation error:",t)}}function $ye(){try{const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);r&&r.startsWith(Ic)&&e.push(r)}e.forEach(t=>localStorage.removeItem(t)),console.log(` Invalidated all caches (${e.length} entries)`)}catch(e){console.error("Cache invalidation error:",e)}}function Lye(e){const t=new Map;return e.forEach(r=>{t.set(r,Mye(r))}),t}function Bye(e){e.forEach((t,r)=>{Fye(r,t)})}function Uye(){const[e,t]=P.useState("analytics"),[r,n]=P.useState(null),[s,i]=P.useState(null),[o,l]=P.useState(!0),[d,u]=P.useState(null),[f,m]=P.useState([]),[p,g]=P.useState([]),[b,y]=P.useState([]),[v,k]=P.useState([]),[S,w]=P.useState([]),[A,C]=P.useState([]),[N,E]=P.useState([]),[_,O]=P.useState(!1),[B,F]=P.useState(null),[D,H]=P.useState(!1),[ne,W]=P.useState([]),[ee,re]=P.useState(null),[Q,R]=P.useState([]),[X,L]=P.useState([]),[I,G]=P.useState([]),[V,Z]=P.useState([]),[ve,Ee]=P.useState([]),[Te,ue]=P.useState([]),[ge,Fe]=P.useState([]),J=ju(),rt=new URLSearchParams(window.location.search).get("setup")==="cluster-head",Tt=async()=>{try{const K=await Nu();W(K)}catch(K){if(K instanceof Error&&(K.message==="Not authenticated"||K.message==="Unauthorized"))return;console.error("Error loading stores:",K)}},ze=async()=>{try{const K=await li();Z(K)}catch(K){if(K instanceof Error&&(K.message==="Not authenticated"||K.message==="Unauthorized"))return;console.error("Error loading employees:",K)}},Re=async K=>{try{const Y=await q5(K);Y&&(Ee(Y.managedStoreIds||[]),ue(Y.managedProductionHouseIds||[]),console.log(" Cluster assignments loaded:",{stores:Y.managedStoreIds?.length||0,productionHouses:Y.managedProductionHouseIds?.length||0}))}catch{console.log("No cluster assignments found (this is okay for new cluster heads)")}},Ce=async(K,Y=!1)=>{const le=["inventory","overheads","fixedCosts","salesData","categorySales","productionData","productionHouses","stockRequests","productionRequests","inventoryItems","onlineCashRecalibrations"];if(!Y){const pe=Lye(le);if(pe.get("inventory")){if(console.log(" Loading from cache - instant display!"),m(pe.get("inventory")||[]),g(pe.get("overheads")||[]),y(pe.get("fixedCosts")||[]),k(pe.get("salesData")||[]),w(pe.get("categorySales")?.data||[]),E(pe.get("productionData")||[]),R(pe.get("productionHouses")||[]),L(pe.get("stockRequests")||[]),G(pe.get("productionRequests")||[]),Fe(pe.get("inventoryItems")||[]),C(pe.get("onlineCashRecalibrations")||[]),le.every(ce=>Rye(ce))){console.log(" Cache is fresh - skipping API calls");return}console.log(" Cache loaded, refreshing in background...")}}O(!0),F(null);try{console.log(" Starting loadData - fetching from API...");const[pe,z,ce,ye,$e,De,Ge,Be,qe,St,ie]=await Promise.all([_g(K),Eg(K),wI(K),I2(K),Mg(K),Cg(),c0(K),E5(K),Ig(K),Ah(),R5(K)]);console.log(" Stock Requests API Response:",Be),console.log(" Stock Requests count:",Be?.length||0),console.log(" Sample stock request:",Be?.[0]),console.log(" Loaded Inventory Items:",pe.length),console.log(" Loaded Overhead Items:",z.length),console.log(" Loaded Fixed Cost Items:",ce.length);const fe=Array.from(new Map(pe.map(Ft=>[Ft.id,Ft])).values()),_e=Array.from(new Map(z.map(Ft=>[Ft.id,Ft])).values()),nt=Array.from(new Map(ce.map(Ft=>[Ft.id,Ft])).values()),xt=Array.from(new Map(ye.map(Ft=>[Ft.id,Ft])).values()),ut=Array.from(new Map(De.map(Ft=>[Ft.id,Ft])).values()),Dt=pe.length-fe.length,Wr=z.length-_e.length,Xt=ce.length-nt.length,pr=ye.length-xt.length,rr=De.length-ut.length,Ve=Dt+Wr+Xt+pr+rr;console.log(" After deduplication:"),console.log("Inventory: Before:",pe.length," After:",fe.length),console.log("Overheads: Before:",z.length," After:",_e.length),console.log("Fixed Costs: Before:",ce.length," After:",nt.length),console.log("Sales: Before:",ye.length," After:",xt.length),Ve>0&&(sessionStorage.getItem("db_cleaned")||setTimeout(async()=>{try{const ua=await J.auth.getUser(K),Ws=ua.data?.user?.user_metadata?.role;if(ua.data?.user&&Ws==="cluster_head"){console.log(" Silently cleaning duplicates in background..."),sessionStorage.setItem("db_cleaned","true");const Ua=await SI(K);console.log(` Cleaned ${Ua.removed} duplicates successfully`)}}catch(ua){console.log("Auto-cleanup skipped:",ua instanceof Error?ua.message:"Unknown error")}},1500)),m(fe),g(_e),y(nt),k(xt),w($e.data||[]),E(ut),R(Ge),console.log(" Loaded Stock Requests from API:",Be.length,Be),L(Be),G(qe),Fe(St),C(ie);const vt=new Map;vt.set("inventory",fe),vt.set("overheads",_e),vt.set("fixedCosts",nt),vt.set("salesData",xt),vt.set("categorySales",$e),vt.set("productionData",ut),vt.set("productionHouses",Ge),vt.set("stockRequests",Be),vt.set("productionRequests",qe),vt.set("inventoryItems",St),vt.set("onlineCashRecalibrations",ie),Bye(vt),console.log(" Data cached for instant future loads")}catch(pe){if(pe instanceof Error&&(pe.message==="Not authenticated"||pe.message==="Unauthorized"))return;console.error("Error loading data:",pe),F("Failed to load inventory data. Please refresh the page.")}finally{O(!1)}},Se=async()=>{try{const K=await Ah();if(K.length===0){console.log(" No inventory items found, initializing defaults...");try{await i5();const Y=await Ah();Fe(Y),console.log(` Initialized ${Y.length} default inventory items`);return}catch(Y){console.error("Error initializing default items:",Y),Fe([]);return}}Fe(K),await Qe(K)}catch(K){console.error("Error loading inventory items:",K),Fe([])}},Qe=async K=>{const Y=[{name:"chicken",displayName:"Chicken Momos",variations:["chicken momo","chicken momos"]},{name:"chickenCheese",displayName:"Chicken Cheese Momos",variations:["chicken cheese momo","chicken cheese momos","chicken cheese"]},{name:"veg",displayName:"Veg Momos",variations:["veg momo","veg momos","vegetable momos"]},{name:"cheeseCorn",displayName:"Cheese Corn Momos",variations:["cheese corn momo","cheese corn momos","corn cheese"]},{name:"paneer",displayName:"Paneer Momos",variations:["paneer momo","paneer momos"]},{name:"vegKurkure",displayName:"Veg Kurkure Momos",variations:["veg kurkure momo","veg kurkure momos","veg kurkure"]},{name:"chickenKurkure",displayName:"Chicken Kurkure Momos",variations:["chicken kurkure momo","chicken kurkure momos","chicken kurkure"]}];try{let le=!1;for(const pe of Y){let z=K.find(ce=>ce.name.toLowerCase()===pe.name.toLowerCase());z||(z=K.find(ce=>{const ye=ce.displayName.toLowerCase(),$e=pe.displayName.toLowerCase();return ye===$e||ye.replace(/\s*momos?\s*/i,"").trim()===$e.replace(/\s*momos?\s*/i,"").trim()?!0:pe.variations.some(De=>ye.includes(De.toLowerCase()))})),z?z.name!==pe.name&&(console.log(` Updating inventory item name: "${z.displayName}" from "${z.name}" to "${pe.name}"`),await s5(z.id,{name:pe.name,displayName:pe.displayName}),le=!0):(console.log(` Creating core inventory item: ${pe.displayName}`),await n5({name:pe.name,displayName:pe.displayName,category:"finished_product",unit:"pieces",linkedEntityType:"global",createdBy:"system"}),le=!0)}if(le){const pe=await Ah();Fe(pe)}}catch(le){console.error("Error ensuring core momos exist:",le)}};P.useEffect(()=>{sessionStorage.removeItem("logout_redirect_in_progress"),k8();const K=async()=>{try{const{data:{session:le}}=await J.auth.getSession();if(!le){l(!1);return}const{data:{session:pe},error:z}=await J.auth.refreshSession();z||!pe?(console.warn("Session refresh failed:",z?.message||"No session returned"),le?.user?await Y(le):(await J.auth.signOut(),l(!1))):await Y(pe)}catch(le){console.log("Session check error:",le)}finally{l(!1)}},Y=async le=>{let pe=null,z=le.user.user_metadata?.designation||null;if(le.user.user_metadata?.employeeId)try{const $e=(await El()).find(De=>De.employeeId===le.user.user_metadata?.employeeId);$e&&(pe=$e.storeId||null,z=$e.designation||z)}catch(ye){console.error("Error fetching employee storeId on session check:",ye)}const ce={email:le.user.email||"",name:le.user.user_metadata?.name||le.user.email?.split("@")[0]||"User",role:le.user.user_metadata?.role||"manager",employeeId:le.user.user_metadata?.employeeId||null,accessToken:le.access_token,storeId:pe,designation:z};n(ce),await Ce(le.access_token),(ce.role==="cluster_head"||ce.role==="manager"||ce.role==="audit")&&(await Tt(),await ze(),ce.role==="cluster_head"&&await Re(le.access_token))};K()},[]),P.useEffect(()=>{r&&(async()=>{try{if(!NS()){console.log("Push notifications not supported on this device");return}const Y=await fetch(`https://${In}.supabase.co/functions/v1/make-server-c2dd9b9d/push/vapid-public-key`,{headers:{Authorization:`Bearer ${rn}`}});if(!Y.ok){console.log("Could not fetch VAPID key - push notifications disabled");return}const le=await Y.json();if(!le.configured||!le.publicKey){console.log(" Push notifications not configured. To enable, set VAPID_PUBLIC_KEY and VAPID_PRIVATE_KEY environment variables.");return}const pe=r.employeeId||r.email;await Pye(pe,le.publicKey)&&console.log(" Push notifications enabled successfully for user:",pe)}catch(Y){console.log(" Push notifications setup skipped:",Y instanceof Error?Y.message:"Unknown error")}})()},[r]);const kt=async(K,Y)=>{i(null);try{const{data:le,error:pe}=await J.auth.signInWithPassword({email:K,password:Y});if(pe){i(pe.message);return}if(le.user&&le.session){let z=null,ce=le.user.user_metadata?.designation||null;if(le.user.user_metadata?.employeeId)try{const De=(await El()).find(Ge=>Ge.employeeId===le.user.user_metadata?.employeeId);De&&(z=De.storeId||null,ce=De.designation||ce)}catch($e){console.error("Error fetching employee storeId:",$e)}const ye={email:le.user.email||"",name:le.user.user_metadata?.name||le.user.email?.split("@")[0]||"User",role:le.user.user_metadata?.role||"manager",employeeId:le.user.user_metadata?.employeeId||null,accessToken:le.session.access_token,storeId:z,designation:ce};n(ye),await Ce(le.session.access_token),(ye.role==="cluster_head"||ye.role==="manager"||ye.role==="audit")&&(await Tt(),await ze())}}catch(le){console.log("Login error:",le),i("Failed to sign in. Please try again.")}},Ct=async(K,Y,le,pe)=>{i(null);try{const z=await fetch(`https://${In}.supabase.co/functions/v1/make-server-c2dd9b9d/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${rn}`},body:JSON.stringify({email:K,password:Y,name:le,role:pe,employeeId:pe==="cluster_head"?"BM001":pe==="audit"?"AUDIT001":null})}),ce=await z.json();if(!z.ok){i(ce.error||"Failed to create account");return}if(!ce.user){i("Failed to create account");return}if(pe==="cluster_head"||pe==="audit")try{const ye=pe==="cluster_head"?"BM001":"AUDIT001";await fetch(`https://${In}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${rn}`},body:JSON.stringify({employeeId:ye,name:le,email:K,role:pe,employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],createdBy:"system",status:"active",authUserId:ce.user.id})})}catch(ye){console.log("Error creating unified employee record:",ye)}await kt(K,Y)}catch(z){console.log("Signup error:",z),i("Failed to create account. Please try again.")}},yr=async()=>{await J.auth.signOut(),n(null),m([]),g([]),y([]),k([]),t("sales"),$ye()},Kt=async()=>{r&&(console.log(" Manual refresh triggered"),await Ce(r.accessToken,!0))},Ot={inventory:f,overheads:p,fixedCosts:b,salesData:v,categorySalesData:S,onlineCashRecalibrations:A,productionData:N,productionHouses:Q,stockRequests:X,productionRequests:I,stores:ne,managedStoreIds:ve,managedProductionHouseIds:Te,inventoryItems:ge,loadInventoryItems:Se,addInventoryItem:async K=>{if(r)try{const Y={...K,storeId:r.storeId||K.storeId};console.log(" Sending inventory item to backend:",Y);const le=await mI(r.accessToken,Y);console.log(" Received inventory item from backend:",le),m([...f,le]),na("inventory")}catch(Y){throw console.error("Error adding inventory item:",Y),Y}},addOverheadItem:async K=>{if(r)try{const Y={...K,storeId:r.storeId||K.storeId},le=await xI(r.accessToken,Y);g([...p,le]),na("overheads")}catch(Y){throw console.error("Error adding overhead item:",Y),Y}},addFixedCostItem:async K=>{if(r)try{const Y={...K,storeId:r.storeId||K.storeId},le=await jI(r.accessToken,Y);y([...b,le]),na("fixedCosts")}catch(Y){throw console.error("Error adding fixed cost item:",Y),Y}},updateInventoryItem:async(K,Y)=>{if(r)try{const le={...Y,storeId:r.storeId||Y.storeId},pe=await pI(r.accessToken,K,le);m(f.map(z=>z.id===K?pe:z)),na("inventory")}catch(le){throw console.error("Error updating inventory item:",le),le}},updateOverheadItem:async(K,Y)=>{if(r)try{const le={...Y,storeId:r.storeId||Y.storeId},pe=await yI(r.accessToken,K,le);g(p.map(z=>z.id===K?pe:z)),na("overheads")}catch(le){throw console.error("Error updating overhead item:",le),le}},updateFixedCostItem:async(K,Y)=>{if(r)try{const le={...Y,storeId:r.storeId||Y.storeId},pe=await NI(r.accessToken,K,le);y(b.map(z=>z.id===K?pe:z)),na("fixedCosts")}catch(le){throw console.error("Error updating fixed cost item:",le),le}},deleteInventoryItem:async K=>{if(r)try{await gI(r.accessToken,K),m(f.filter(Y=>Y.id!==K)),na("inventory"),console.log(" Inventory item deleted successfully")}catch(Y){if(Y?.message?.includes("not found")||Y?.message?.includes("already deleted"))console.log(" Item was already deleted, updating UI"),m(f.filter(le=>le.id!==K)),na("inventory");else throw console.error("Error deleting inventory item:",Y),Y}},deleteOverheadItem:async K=>{if(r)try{await vI(r.accessToken,K),g(p.filter(Y=>Y.id!==K)),na("overheads"),console.log(" Overhead item deleted successfully")}catch(Y){if(Y?.message?.includes("not found")||Y?.message?.includes("already deleted"))console.log(" Item was already deleted, updating UI"),g(p.filter(le=>le.id!==K)),na("overheads");else throw console.error("Error deleting overhead item:",Y),Y}},deleteFixedCostItem:async K=>{if(r)try{await kI(r.accessToken,K),y(b.filter(Y=>Y.id!==K)),na("fixedCosts"),console.log(" Fixed cost item deleted successfully")}catch(Y){if(Y?.message?.includes("not found")||Y?.message?.includes("already deleted"))console.log(" Item was already deleted, updating UI"),y(b.filter(le=>le.id!==K)),na("fixedCosts");else throw console.error("Error deleting fixed cost item:",Y),Y}},addSalesData:async K=>{if(r)try{console.log("Frontend - Current user:",r),console.log("Frontend - User role:",r.role),console.log("Frontend - Access token (first 50 chars):",r.accessToken.substring(0,50));const Y={...K,storeId:r.storeId||K.storeId},le=await _I(r.accessToken,Y);k([...v,le]),na("salesData"),na("categorySales")}catch(Y){throw console.error("Error adding sales data:",Y),Y}},updateSalesData:async(K,Y)=>{if(r)try{const le={...Y,storeId:r.storeId||Y.storeId},pe=await EI(r.accessToken,K,le);k(v.map(z=>z.id===K?pe:z)),na("salesData"),na("categorySales")}catch(le){throw console.error("Error updating sales data:",le),le}},approveSalesData:async K=>{if(r)try{const Y=await CI(r.accessToken,K);k(v.map(le=>le.id===K?Y:le)),na("salesData")}catch(Y){throw console.error("Error approving sales data:",Y),Y}},requestSalesApproval:async(K,Y,le)=>{if(r)try{const pe=await AI(r.accessToken,K,Y,le);k(v.map(z=>z.id===K?pe:z)),na("salesData")}catch(pe){throw console.error("Error requesting sales approval:",pe),pe}},approveDiscrepancy:async K=>{if(r)try{const Y=await TI(r.accessToken,K);k(v.map(le=>le.id===K?Y:le)),na("salesData")}catch(Y){throw console.error("Error approving discrepancy:",Y),Y}},rejectDiscrepancy:async(K,Y)=>{if(r)try{const le=await DI(r.accessToken,K,Y);k(v.map(pe=>pe.id===K?le:pe)),na("salesData")}catch(le){throw console.error("Error rejecting discrepancy:",le),le}},addProductionData:async K=>{if(r)try{const Y={...K,storeId:r.storeId||K.storeId},le=await OI(Y);E([...N,le]),na("productionData")}catch(Y){throw console.error("Error adding production data:",Y),Y}},updateProductionData:async(K,Y)=>{if(r)try{const le={...Y,storeId:r.storeId||Y.storeId},pe=await PI(K,le);E(N.map(z=>z.id===K?pe:z)),na("productionData")}catch(le){throw console.error("Error updating production data:",le),le}},approveProductionData:async K=>{if(r)try{const Y=await II(K);E(N.map(le=>le.id===K?Y:le)),na("productionData")}catch(Y){throw console.error("Error approving production data:",Y),Y}},addProductionHouse:async K=>{if(r)try{const Y=await v5(r.accessToken,K);R([...Q,Y]),na("productionHouses")}catch(Y){throw console.error("Error creating production house:",Y),Y}},updateProductionHouse:async(K,Y)=>{if(r)try{const le=await b5(r.accessToken,K,Y);R(Q.map(pe=>pe.id===K?le:pe)),na("productionHouses")}catch(le){throw console.error("Error updating production house:",le),le}},updateProductionHouseInventory:async(K,Y)=>{if(r)try{const le=await w5(r.accessToken,K,Y);R(Q.map(pe=>pe.id===K?le:pe))}catch(le){throw console.error("Error updating production house inventory:",le),le}},deleteProductionHouse:async K=>{if(r)try{await S5(r.accessToken,K),R(Q.filter(Y=>Y.id!==K)),na("productionHouses")}catch(Y){throw console.error("Error deleting production house:",Y),Y}},setProductionHouses:R,createStockRequest:async K=>{if(r)try{console.log(" Creating stock request:",K);const Y=await C5(r.accessToken,K);console.log(" Stock request created successfully:",Y),L([...X,Y]),console.log(" Updated stock requests count:",X.length+1),na("stockRequests")}catch(Y){throw console.error(" Error creating stock request:",Y),Y}},fulfillStockRequest:async(K,Y,le,pe,z)=>{if(r)try{const ce=await A5(r.accessToken,K,Y,le,pe,z);L(X.map($e=>$e.id===K?ce:$e));const ye=await c0(r.accessToken);R(ye),na("stockRequests"),na("productionHouses")}catch(ce){throw console.error("Error fulfilling stock request:",ce),ce}},cancelStockRequest:async K=>{if(r)try{const Y=await T5(r.accessToken,K);L(X.map(le=>le.id===K?Y:le)),na("stockRequests")}catch(Y){throw console.error("Error cancelling stock request:",Y),Y}},isManager:r?.role==="manager",user:r};if(o)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Zt,{className:"w-12 h-12 text-[#B0A8D8] mx-auto mb-4 animate-pulse"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(rt)return a.jsx(xxe,{});if(!r)return a.jsx(sxe,{onLogin:kt,onSignup:Ct,error:s});const xe=r.role==="cluster_head",it=r.role==="employee",dt=r.role==="audit",gt=r.role==="employee"&&r.designation==="store_incharge",ft=r.designation==="production_incharge",q=gt||ft,oe=r.role==="manager"&&r.designation!=="store_incharge"&&r.designation!=="production_incharge",ae=r.role==="manager",se=ft||oe||xe;return console.log(" User Permissions:",{role:r.role,designation:r.designation,isClusterHead:xe,isEmployee:it,isManager:ae,isStoreIncharge:gt,isProductionIncharge:ft,isOperationsManager:oe,isAnyIncharge:q,canViewProduction:se}),console.log(" Current activeView:",e),dt?a.jsx(nxe,{user:r,inventory:f,overheads:p,fixedCosts:b,salesData:v,categorySalesData:S,productionData:N,productionHouses:Q,stockRequests:X,productionRequests:I,employees:V,stores:ne,inventoryItems:ge,onLogout:yr,onDataUpdate:Ce}):it?a.jsxs(a.Fragment,{children:[a.jsx(z6,{}),a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("nav",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 shadow-xl sticky top-0 z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center py-3",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/30",children:[a.jsx("h1",{className:"text-xl sm:text-2xl text-white font-bold tracking-wide",children:"Bhandar-IMS"}),a.jsxs("p",{className:"text-xs text-white/90",children:[r.name,"  ",gt?"Store Incharge":ft?"Production Head":"Employee"]})]})}),a.jsx("button",{onClick:()=>H(!D),className:"lg:hidden flex items-center gap-2 px-3 py-2 bg-white/20 backdrop-blur-sm text-white rounded-lg hover:bg-white/30 transition-all border border-white/30",children:D?a.jsx(ea,{className:"w-5 h-5"}):a.jsx(XE,{className:"w-5 h-5"})}),a.jsxs("div",{className:"hidden lg:flex gap-2",children:[a.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="analytics"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(fa,{className:"w-4 h-4"}),a.jsx("span",{children:"Analytics"})]}),q&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="inventory"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Zt,{className:"w-4 h-4"}),a.jsx("span",{children:"Expense"})]}),a.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="sales"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(ca,{className:"w-4 h-4"}),a.jsx("span",{children:"Sales"})]})]}),se&&a.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="production"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Za,{className:"w-4 h-4"}),a.jsx("span",{children:"Production"})]}),q&&a.jsxs("button",{onClick:()=>t("stock-requests"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="stock-requests"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Zt,{className:"w-4 h-4"}),a.jsx("span",{children:"Stock Requests"})]}),ae&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>t("advanced-inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="advanced-inventory"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Nj,{className:"w-4 h-4"}),a.jsx("span",{children:"Inventory Analytics"})]}),a.jsxs("button",{onClick:()=>t("inventory-items"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="inventory-items"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Zt,{className:"w-4 h-4"}),a.jsx("span",{children:"Manage Items"})]})]}),a.jsxs("button",{onClick:()=>t("payroll"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="payroll"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(La,{className:"w-4 h-4"}),a.jsx("span",{children:q?"Payroll":"My Payouts"})]}),a.jsxs("button",{onClick:()=>t("attendance"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="attendance"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Aa,{className:"w-4 h-4"}),a.jsx("span",{children:"Attendance"})]}),q&&a.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="export"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Ms,{className:"w-4 h-4"}),a.jsx("span",{children:"Export"})]}),q&&a.jsx(P6,{onNavigate:(K,Y,le)=>{K==="sales"&&(t("sales"),u(null)),K==="production"&&(t("production"),u(null)),K==="attendance"&&(t("employees"),u(null)),K==="production-requests"&&(console.log(" Production request notification clicked, requestId:",le),u(null),setTimeout(()=>{u(le||null),t("analytics")},0))}}),a.jsxs("button",{onClick:Kt,disabled:_,className:"flex items-center gap-2 px-4 py-2 bg-green-500/90 text-white rounded-xl hover:bg-green-600 transition-all backdrop-blur-sm border-2 border-white/30 disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh data",children:[a.jsx(_o,{className:`w-4 h-4 ${_?"animate-spin":""}`}),a.jsx("span",{children:"Refresh"})]}),a.jsxs("button",{onClick:yr,className:"flex items-center gap-2 px-4 py-2 bg-red-500/90 text-white rounded-xl hover:bg-red-600 transition-all backdrop-blur-sm border-2 border-white/30",children:[a.jsx(Eh,{className:"w-4 h-4"}),a.jsx("span",{children:"Logout"})]})]})]}),D&&a.jsxs("div",{className:"lg:hidden border-t border-white/20 py-4 space-y-2",children:[a.jsxs("button",{onClick:()=>{t("analytics"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="analytics"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(fa,{className:"w-5 h-5"}),a.jsx("span",{children:"Analytics"})]}),q&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{t("inventory"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="inventory"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(Zt,{className:"w-5 h-5"}),a.jsx("span",{children:"Expense"})]}),a.jsxs("button",{onClick:()=>{t("sales"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="sales"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(ca,{className:"w-5 h-5"}),a.jsx("span",{children:"Sales"})]})]}),se&&a.jsxs("button",{onClick:()=>{t("production"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="production"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(Za,{className:"w-5 h-5"}),a.jsx("span",{children:"Production"})]}),q&&a.jsxs("button",{onClick:()=>{t("stock-requests"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="stock-requests"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(Zt,{className:"w-5 h-5"}),a.jsx("span",{children:"Stock Requests"})]}),ae&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{t("advanced-inventory"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="advanced-inventory"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(Nj,{className:"w-5 h-5"}),a.jsx("span",{children:"Inventory Analytics"})]}),a.jsxs("button",{onClick:()=>{t("inventory-items"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="inventory-items"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(Zt,{className:"w-5 h-5"}),a.jsx("span",{children:"Manage Items"})]})]}),a.jsxs("button",{onClick:()=>{t("payroll"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="payroll"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(La,{className:"w-5 h-5"}),a.jsx("span",{children:q?"Payroll":"My Payouts"})]}),a.jsxs("button",{onClick:()=>{t("attendance"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="attendance"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(Aa,{className:"w-5 h-5"}),a.jsx("span",{children:"Attendance"})]}),q&&a.jsxs("button",{onClick:()=>{t("export"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="export"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(Ms,{className:"w-5 h-5"}),a.jsx("span",{children:"Export"})]}),a.jsxs("button",{onClick:()=>{Kt(),H(!1)},disabled:_,className:"w-full flex items-center gap-3 px-4 py-3 bg-green-500/90 text-white rounded-lg hover:bg-green-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(_o,{className:`w-5 h-5 ${_?"animate-spin":""}`}),a.jsx("span",{children:"Refresh Data"})]}),a.jsxs("button",{onClick:yr,className:"w-full flex items-center gap-3 px-4 py-3 bg-red-500/90 text-white rounded-lg hover:bg-red-600 transition-all",children:[a.jsx(Eh,{className:"w-5 h-5"}),a.jsx("span",{children:"Logout"})]})]})]})}),a.jsx("main",{className:"pb-6",children:e==="analytics"?a.jsx(j2,{context:Ot,highlightRequestId:d,onNavigateToManageItems:()=>{console.log(" App.tsx: Changing activeView to inventory-items"),t("inventory-items")}}):e==="inventory"&&q?a.jsx(Hj,{context:Ot}):e==="sales"&&q?a.jsx(SP,{context:Ot,selectedStoreId:ee}):e==="production"&&se?a.jsx(N2,{context:Ot,selectedStoreId:ee}):e==="payroll"?q?a.jsx(Gk,{userRole:"manager",selectedDate:new Date().toISOString().split("T")[0],userEmployeeId:r.employeeId,userName:r.name,selectedStoreId:r.storeId,isIncharge:!0,inchargeDesignation:r.designation}):a.jsx(D6,{employeeId:r.employeeId||""}):e==="attendance"?a.jsx(o8,{user:{employeeId:r.employeeId,name:r.name,email:r.email,role:r.role},isIncharge:q,inchargeDesignation:r.designation}):e==="export"&&q?a.jsx(T6,{userRole:"manager",selectedStoreId:r.storeId||null,currentUserId:r.email}):e==="stock-requests"&&q?a.jsx(I6,{context:Ot,stores:ne}):e==="advanced-inventory"&&ae?a.jsx(q6,{context:Ot,stores:ne,onNavigateToManageItems:()=>t("inventory-items")}):e==="inventory-items"&&(ae||q)?(console.log(" Rendering InventoryItemsManagement:",{activeView:e,isManager:ae,isAnyIncharge:q}),a.jsx(W6,{context:Ot})):(console.log(" Falling through to EmployeeDashboard:",{activeView:e,isManager:ae,isAnyIncharge:q}),a.jsx(D6,{employeeId:r.employeeId||""}))})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(z6,{}),a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("nav",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 shadow-xl sticky top-0 z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center py-3",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/30",children:[a.jsx("h1",{className:"text-xl sm:text-2xl text-white font-bold tracking-wide",children:"Bhandar-IMS"}),a.jsxs("p",{className:"text-xs text-white/90",children:[r.name,"  ",r.designation==="store_incharge"?"Store Incharge":r.designation==="production_incharge"?"Production Incharge":r.role==="manager"?"Operations Manager":"Cluster Head"]})]})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(P6,{onNavigate:(K,Y,le)=>{K==="sales"?(t("sales"),u(null)):K==="attendance"||K==="leave"?(t("employees"),u(null)):K==="production"?(t("production"),u(null)):K==="production-requests"&&(console.log(" Production request notification clicked (mobile), requestId:",le),u(null),setTimeout(()=>{u(le||null),t("analytics")},0))}}),a.jsx("button",{onClick:()=>H(!D),className:"lg:hidden flex items-center gap-2 px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all border border-white/30",children:D?a.jsx(ea,{className:"w-5 h-5"}):a.jsx(XE,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"hidden lg:flex gap-2 flex-wrap",children:[xe?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="analytics"?"bg-white text-purple-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(fa,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Analytics"})]}),a.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="inventory"?"bg-white text-green-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Zt,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Expense"})]}),a.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="sales"?"bg-white text-pink-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(ca,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Sales"})]}),se&&a.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="production"?"bg-white text-amber-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Za,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Production"})]}),a.jsxs("button",{onClick:()=>t("employees"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="employees"?"bg-white text-indigo-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Bs,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Employees"})]}),a.jsxs("button",{onClick:()=>t("assets"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="assets"?"bg-white text-rose-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Zt,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Investments & Assets"})]}),a.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="export"?"bg-white text-yellow-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Ms,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Export"})]}),a.jsxs("button",{onClick:()=>t("backup"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="backup"?"bg-white text-blue-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(_h,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Backup"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="analytics"?"bg-white text-purple-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(fa,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Analytics"})]}),a.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="sales"?"bg-white text-pink-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(ca,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Sales"})]}),a.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="inventory"?"bg-white text-green-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Zt,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Expense"})]}),se&&a.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="production"?"bg-white text-amber-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Za,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Production"})]}),a.jsxs("button",{onClick:()=>t("employees"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="employees"?"bg-white text-indigo-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Bs,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Employees"})]}),a.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="export"?"bg-white text-yellow-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Ms,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Export"})]}),a.jsxs("button",{onClick:()=>t("backup"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="backup"?"bg-white text-blue-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(_h,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Backup"})]})]}),a.jsxs("button",{onClick:Kt,disabled:_,className:"flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm text-white rounded-xl hover:bg-green-500 transition-all duration-300 transform hover:scale-105 border border-white/20 disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh data",children:[a.jsx(_o,{className:`w-4 h-4 ${_?"animate-spin":""}`}),a.jsx("span",{className:"hidden xl:inline",children:"Refresh"})]}),a.jsxs("button",{onClick:yr,className:"flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm text-white rounded-xl hover:bg-red-500 transition-all duration-300 transform hover:scale-105 border border-white/20",children:[a.jsx(Eh,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Logout"})]})]})]}),D&&a.jsxs("div",{className:"lg:hidden border-t border-gray-200 py-4 space-y-2",children:[xe?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{t("analytics"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="analytics"?"bg-[#D4A5FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F5F0FF]"}`,children:[a.jsx(fa,{className:"w-5 h-5"}),a.jsx("span",{children:"Analytics"})]}),a.jsxs("button",{onClick:()=>{t("inventory"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="inventory"?"bg-[#C1E1C1] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F0FFF0]"}`,children:[a.jsx(Zt,{className:"w-5 h-5"}),a.jsx("span",{children:"Expense"})]}),a.jsxs("button",{onClick:()=>{t("sales"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="sales"?"bg-[#FFD4E5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5F8]"}`,children:[a.jsx(ca,{className:"w-5 h-5"}),a.jsx("span",{children:"Sales"})]}),se&&a.jsxs("button",{onClick:()=>{t("production"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="production"?"bg-[#FFE4B5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[a.jsx(Za,{className:"w-5 h-5"}),a.jsx("span",{children:"Production"})]}),a.jsxs("button",{onClick:()=>{t("employees"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="employees"?"bg-[#E6E6FA] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F8F8FF]"}`,children:[a.jsx(Bs,{className:"w-5 h-5"}),a.jsx("span",{children:"Employees"})]}),a.jsxs("button",{onClick:()=>{t("assets"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="assets"?"bg-[#FFE4CC] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5EE]"}`,children:[a.jsx(Zt,{className:"w-5 h-5"}),a.jsx("span",{children:"Investments & Assets"})]}),a.jsxs("button",{onClick:()=>{t("export"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="export"?"bg-[#FFE5B4] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[a.jsx(Ms,{className:"w-5 h-5"}),a.jsx("span",{children:"Export"})]}),a.jsxs("button",{onClick:()=>{t("backup"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="backup"?"bg-[#B4D7FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#E6F2FF]"}`,children:[a.jsx(_h,{className:"w-5 h-5"}),a.jsx("span",{children:"Backup"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{t("analytics"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="analytics"?"bg-[#D4A5FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F5F0FF]"}`,children:[a.jsx(fa,{className:"w-5 h-5"}),a.jsx("span",{children:"Analytics"})]}),a.jsxs("button",{onClick:()=>{t("sales"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="sales"?"bg-[#FFD4E5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5F8]"}`,children:[a.jsx(ca,{className:"w-5 h-5"}),a.jsx("span",{children:"Sales"})]}),a.jsxs("button",{onClick:()=>{t("inventory"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="inventory"?"bg-[#C1E1C1] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F0FFF0]"}`,children:[a.jsx(Zt,{className:"w-5 h-5"}),a.jsx("span",{children:"Expense"})]}),se&&a.jsxs("button",{onClick:()=>{t("production"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="production"?"bg-[#FFE4B5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[a.jsx(Za,{className:"w-5 h-5"}),a.jsx("span",{children:"Production"})]}),a.jsxs("button",{onClick:()=>{t("employees"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="employees"?"bg-[#E6E6FA] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F8F8FF]"}`,children:[a.jsx(Bs,{className:"w-5 h-5"}),a.jsx("span",{children:"Employees"})]}),a.jsxs("button",{onClick:()=>{t("export"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="export"?"bg-[#FFE5B4] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[a.jsx(Ms,{className:"w-5 h-5"}),a.jsx("span",{children:"Export"})]}),a.jsxs("button",{onClick:()=>{t("backup"),H(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="backup"?"bg-[#B4D7FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#E6F2FF]"}`,children:[a.jsx(_h,{className:"w-5 h-5"}),a.jsx("span",{children:"Backup"})]})]}),a.jsxs("button",{onClick:()=>{Kt(),H(!1)},disabled:_,className:"w-full flex items-center gap-3 px-4 py-3 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(_o,{className:`w-5 h-5 ${_?"animate-spin":""}`}),a.jsx("span",{children:"Refresh Data"})]}),a.jsxs("button",{onClick:yr,className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx(Eh,{className:"w-5 h-5"}),a.jsx("span",{children:"Logout"})]})]})]})}),xe&&ne.length>0&&a.jsx("div",{className:"bg-gradient-to-br from-purple-50 via-pink-50 to-purple-50 border-b border-purple-100 px-4 py-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx(gxe,{stores:ne,selectedStoreId:ee,onStoreChange:re,showAllStores:!0})})}),B&&a.jsx("div",{className:"bg-red-50 border-b border-red-200 px-4 py-3",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 text-red-800",children:[a.jsx(Ar,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm",children:B}),a.jsx("button",{onClick:()=>r&&Ce(r.accessToken),className:"ml-auto text-sm text-red-600 hover:text-red-700 underline",children:"Retry"})]})}),_&&a.jsx("div",{className:"bg-blue-50 border-b border-blue-200 px-4 py-3",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 text-blue-800",children:[a.jsx(Zt,{className:"w-5 h-5 animate-pulse"}),a.jsx("p",{className:"text-sm",children:"Loading inventory data..."})]})}),a.jsx("main",{className:"pb-6",children:e==="sales"?a.jsx(SP,{context:Ot,selectedStoreId:ee}):e==="inventory"?r.role==="manager"?a.jsx(_W,{context:Ot,selectedStoreId:ee,employees:V}):a.jsx(Hj,{context:Ot,selectedStoreId:ee}):e==="analytics"?a.jsx(j2,{context:Ot,selectedStoreId:ee,highlightRequestId:d,onNavigateToManageItems:()=>{console.log(" App.tsx: Changing activeView to inventory-items"),t("inventory-items")}}):e==="export"?a.jsx(T6,{userRole:r.role,selectedStoreId:ee,currentUserId:r.email}):e==="backup"?a.jsx(Eye,{context:Ot}):e==="employees"?a.jsx(mxe,{user:{role:r.role,email:r.email,employeeId:r.employeeId,name:r.name,storeId:r.storeId,accessToken:r.accessToken},selectedStoreId:ee}):e==="assets"?a.jsx(jxe,{context:Ot,stores:ne,employees:V,onRefreshStores:Tt}):e==="production"&&se?a.jsx(N2,{context:Ot,selectedStoreId:ee}):e==="stock-requests"?a.jsx(I6,{context:Ot,stores:ne}):e==="advanced-inventory"?a.jsx(q6,{context:Ot,stores:ne,onNavigateToManageItems:()=>{console.log(" App.tsx (Manager): Changing activeView to inventory-items"),t("inventory-items")}}):e==="inventory-items"?(console.log(" Rendering InventoryItemsManagement (Manager section):",{activeView:e,isManager:ae}),a.jsx(W6,{context:Ot})):a.jsx(Dle,{context:Ot})})]}),r&&e==="inventory"&&a.jsx(_ye,{context:Ot})]})}i9.createRoot(document.getElementById("root")).render(a.jsx(Uye,{}));
